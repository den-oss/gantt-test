var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty=typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6-impl','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||'')+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6-impl','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6-impl','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6-impl','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6-impl','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};a.resolve=function(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}};a.reject=function(b){return new a(function(d,a){a(b)})};a.race=function(b){return new a(function(f,g){var e=$jscomp.makeIterator(b);for(var d=e.next();!d.done;d=e.next()){a.resolve(d.value).callWhenSettled_(f,g)}})};a.all=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return a.resolve([])}else {return new a(function(h,i){var f=[];var g=0;function onFulfilled(a){return function(b){f[a]=b;g--;if(g==0){h(f)}}}do{f.push(undefined);g++;a.resolve(b.value).callWhenSettled_(onFulfilled(f.length-1),i);b=d.next()}while(!b.done)})}};if($jscomp.EXPOSE_ASYNC_EXECUTOR){a['$jscomp$new$AsyncExecutor']=function(){return new AsyncExecutor()}}return a},'es6-impl','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6-impl','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6-impl','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6-impl','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6-impl','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6-impl','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6-impl','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6-impl','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6-impl','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6-impl','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6-impl','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6-impl','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6-impl','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6-impl','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6-impl','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6-impl','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.polyfill('Object.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(b,c){b.__proto__=c;if(b.__proto__!==c){throw new TypeError(b+' is not extensible')}return b};return b},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.polyfill('Reflect.construct',function(a){if(a){return a}var b=function(c,e,b){if(b===undefined){b=c}var f=b.prototype||Object.prototype;var d=Object.create(f);var g=Reflect.apply(c,d,e);return g||d};return b},'es6','es5');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if(typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(typeof Object.preventExtensions!='function'){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(b,c){try{b.__proto__=c;return b.__proto__===c}catch(d){return !1}};return b},'es6','es5');$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6-impl','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6-impl','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6-impl','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6-impl','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){function tempCtor(){}tempCtor.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new tempCtor();a.prototype.constructor=a;for(var c in b){if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6-impl','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}var CGA=CGA||{};if(!CGA.column){CGA.column={}}if(!CGA.data){CGA.data={}}if(!CGA.field){CGA.field={}}if(!CGA.filter){CGA.filter={}}if(!CGA.locale){CGA.locale={}}if(!CGA.model){CGA.model={}}if(!CGA.plugin){CGA.plugin={}}if(!CGA.plugin.exporter){CGA.plugin.exporter={}}if(!CGA.store){CGA.store={}}if(!CGA.template){CGA.template={}}if(!CGA.util){CGA.util={}}if(!CGA.utils){CGA.utils={}}if(!CGA.ux){CGA.ux={}}if(!CGA.ux.exporter){CGA.ux.exporter={}}if(!CGA.ux.exporter.csvFormatter){CGA.ux.exporter.csvFormatter={}}if(!CGA.ux.exporter.excelFormatter){CGA.ux.exporter.excelFormatter={}}if(!CGA.ux.exporter.msProjectFormatter){CGA.ux.exporter.msProjectFormatter={}}if(!CGA.view){CGA.view={}}if(!CGA.widget){CGA.widget={}}if(!CGA.widget.calendar){CGA.widget.calendar={}}if(!CGA.widget.taskeditor){CGA.widget.taskeditor={}}if(!CGA.window){CGA.window={}}var Cal=Cal||{};if(!Cal.component){Cal.component={}}if(!Cal.container){Cal.container={}}if(!Cal.form){Cal.form={}}if(!Cal.form.field){Cal.form.field={}}if(!Cal.locale){Cal.locale={}}if(!Cal.menu){Cal.menu={}}if(!Cal.mixin){Cal.mixin={}}if(!Cal.model){Cal.model={}}if(!Cal.panel){Cal.panel={}}if(!Cal.patches){Cal.patches={}}if(!Cal.selection){Cal.selection={}}if(!Cal.store){Cal.store={}}if(!Cal.template){Cal.template={}}if(!Cal.tip){Cal.tip={}}if(!Cal.toolbar){Cal.toolbar={}}if(!Cal.util){Cal.util={}}if(!Cal.view){Cal.view={}}if(!Cal.window){Cal.window={}}var Deft=Deft||{};if(!Deft.log){Deft.log={}}if(!Deft.promise){Deft.promise={}}if(!Deft.util){Deft.util={}}var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.feature){Ext.grid.feature={}}if(!Ext.grid.filters){Ext.grid.filters={}}if(!Ext.grid.filters.filter){Ext.grid.filters.filter={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.grid.selection){Ext.grid.selection={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.list){Ext.list={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.en){Ext.locale.en={}}if(!Ext.locale.en.data){Ext.locale.en.data={}}if(!Ext.locale.en.data.validator){Ext.locale.en.data.validator={}}if(!Ext.locale.en.form){Ext.locale.en.form={}}if(!Ext.locale.en.form.field){Ext.locale.en.form.field={}}if(!Ext.locale.en.grid){Ext.locale.en.grid={}}if(!Ext.locale.en.grid.filters){Ext.locale.en.grid.filters={}}if(!Ext.locale.en.grid.filters.filter){Ext.locale.en.grid.filters.filter={}}if(!Ext.locale.en.grid.header){Ext.locale.en.grid.header={}}if(!Ext.locale.en.grid.plugin){Ext.locale.en.grid.plugin={}}if(!Ext.locale.en.picker){Ext.locale.en.picker={}}if(!Ext.locale.en.toolbar){Ext.locale.en.toolbar={}}if(!Ext.locale.en.view){Ext.locale.en.view={}}if(!Ext.locale.en.window){Ext.locale.en.window={}}if(!Ext.locale.he){Ext.locale.he={}}if(!Ext.locale.he.form){Ext.locale.he.form={}}if(!Ext.locale.he.form.field){Ext.locale.he.form.field={}}if(!Ext.locale.he.grid){Ext.locale.he.grid={}}if(!Ext.locale.he.grid.header){Ext.locale.he.grid.header={}}if(!Ext.locale.he.grid.plugin){Ext.locale.he.grid.plugin={}}if(!Ext.locale.he.picker){Ext.locale.he.picker={}}if(!Ext.locale.he.tab){Ext.locale.he.tab={}}if(!Ext.locale.he.toolbar){Ext.locale.he.toolbar={}}if(!Ext.locale.he.view){Ext.locale.he.view={}}if(!Ext.locale.he.window){Ext.locale.he.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.plugin){Ext.overrides.plugin={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.rtl){Ext.rtl={}}if(!Ext.rtl.button){Ext.rtl.button={}}if(!Ext.rtl.dd){Ext.rtl.dd={}}if(!Ext.rtl.dom){Ext.rtl.dom={}}if(!Ext.rtl.event){Ext.rtl.event={}}if(!Ext.rtl.form){Ext.rtl.form={}}if(!Ext.rtl.form.field){Ext.rtl.form.field={}}if(!Ext.rtl.grid){Ext.rtl.grid={}}if(!Ext.rtl.grid.column){Ext.rtl.grid.column={}}if(!Ext.rtl.grid.plugin){Ext.rtl.grid.plugin={}}if(!Ext.rtl.layout){Ext.rtl.layout={}}if(!Ext.rtl.layout.component){Ext.rtl.layout.component={}}if(!Ext.rtl.layout.container){Ext.rtl.layout.container={}}if(!Ext.rtl.layout.container.boxOverflow){Ext.rtl.layout.container.boxOverflow={}}if(!Ext.rtl.panel){Ext.rtl.panel={}}if(!Ext.rtl.resizer){Ext.rtl.resizer={}}if(!Ext.rtl.scroll){Ext.rtl.scroll={}}if(!Ext.rtl.slider){Ext.rtl.slider={}}if(!Ext.rtl.tab){Ext.rtl.tab={}}if(!Ext.rtl.tip){Ext.rtl.tip={}}if(!Ext.rtl.tree){Ext.rtl.tree={}}if(!Ext.rtl.util){Ext.rtl.util={}}if(!Ext.rtl.view){Ext.rtl.view={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.slider){Ext.slider={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.form){Ext.theme.neptune.form={}}if(!Ext.theme.neptune.form.field){Ext.theme.neptune.form.field={}}if(!Ext.theme.neptune.grid){Ext.theme.neptune.grid={}}if(!Ext.theme.neptune.grid.column){Ext.theme.neptune.grid.column={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.picker){Ext.theme.neptune.picker={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.grid){Ext.theme.triton.grid={}}if(!Ext.theme.triton.grid.column){Ext.theme.triton.grid.column={}}if(!Ext.theme.triton.grid.selection){Ext.theme.triton.grid.selection={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.picker){Ext.theme.triton.picker={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.selection){Ext.theme.triton.selection={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.tree.plugin){Ext.tree.plugin={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.mixin){Ext.ux.mixin={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var Gnt=Gnt||{};if(!Gnt.column){Gnt.column={}}if(!Gnt.column.mixin){Gnt.column.mixin={}}if(!Gnt.constraint){Gnt.constraint={}}if(!Gnt.data){Gnt.data={}}if(!Gnt.data.calendar){Gnt.data.calendar={}}if(!Gnt.data.linearizator){Gnt.data.linearizator={}}if(!Gnt.data.mixin){Gnt.data.mixin={}}if(!Gnt.data.undoredo){Gnt.data.undoredo={}}if(!Gnt.data.undoredo.action){Gnt.data.undoredo.action={}}if(!Gnt.data.undoredo.action.taskstore){Gnt.data.undoredo.action.taskstore={}}if(!Gnt.data.undoredo.mixin){Gnt.data.undoredo.mixin={}}if(!Gnt.data.util){Gnt.data.util={}}if(!Gnt.feature){Gnt.feature={}}if(!Gnt.field){Gnt.field={}}if(!Gnt.field.mixin){Gnt.field.mixin={}}if(!Gnt.field.trigger){Gnt.field.trigger={}}if(!Gnt.locale){Gnt.locale={}}if(!Gnt.mixin){Gnt.mixin={}}if(!Gnt.model){Gnt.model={}}if(!Gnt.model.mixin){Gnt.model.mixin={}}if(!Gnt.model.task){Gnt.model.task={}}if(!Gnt.panel){Gnt.panel={}}if(!Gnt.patches){Gnt.patches={}}if(!Gnt.plugin){Gnt.plugin={}}if(!Gnt.plugin.exporter){Gnt.plugin.exporter={}}if(!Gnt.plugin.exporter.mixin){Gnt.plugin.exporter.mixin={}}if(!Gnt.plugin.taskeditor){Gnt.plugin.taskeditor={}}if(!Gnt.selection){Gnt.selection={}}if(!Gnt.template){Gnt.template={}}if(!Gnt.util){Gnt.util={}}if(!Gnt.view){Gnt.view={}}if(!Gnt.view.dependency){Gnt.view.dependency={}}if(!Gnt.widget){Gnt.widget={}}if(!Gnt.widget.ConstraintType){Gnt.widget.ConstraintType={}}if(!Gnt.widget.calendar){Gnt.widget.calendar={}}if(!Gnt.widget.taskeditor){Gnt.widget.taskeditor={}}var MeetingsCalendar=MeetingsCalendar||{};if(!MeetingsCalendar.locale){MeetingsCalendar.locale={}}if(!MeetingsCalendar.mixin){MeetingsCalendar.mixin={}}if(!MeetingsCalendar.store){MeetingsCalendar.store={}}if(!MeetingsCalendar.template){MeetingsCalendar.template={}}if(!MeetingsCalendar.view){MeetingsCalendar.view={}}if(!MeetingsCalendar.window){MeetingsCalendar.window={}}var Robo=Robo||{};if(!Robo.action){Robo.action={}}if(!Robo.action.flat){Robo.action.flat={}}if(!Robo.action.tree){Robo.action.tree={}}if(!Robo.data){Robo.data={}}if(!Robo.util){Robo.util={}}var Sch=Sch||{};if(!Sch.column){Sch.column={}}if(!Sch.column.timeAxis){Sch.column.timeAxis={}}if(!Sch.crud){Sch.crud={}}if(!Sch.crud.encoder){Sch.crud.encoder={}}if(!Sch.crud.transport){Sch.crud.transport={}}if(!Sch.data){Sch.data={}}if(!Sch.data.mixin){Sch.data.mixin={}}if(!Sch.data.util){Sch.data.util={}}if(!Sch.eventlayout){Sch.eventlayout={}}if(!Sch.feature){Sch.feature={}}if(!Sch.gantt){Sch.gantt={}}if(!Sch.layout){Sch.layout={}}if(!Sch.locale){Sch.locale={}}if(!Sch.mixin){Sch.mixin={}}if(!Sch.model){Sch.model={}}if(!Sch.panel){Sch.panel={}}if(!Sch.patches){Sch.patches={}}if(!Sch.plugin){Sch.plugin={}}if(!Sch.plugin.exporter){Sch.plugin.exporter={}}if(!Sch.plugin.mixin){Sch.plugin.mixin={}}if(!Sch.preset){Sch.preset={}}if(!Sch.selection){Sch.selection={}}if(!Sch.template){Sch.template={}}if(!Sch.tooltip){Sch.tooltip={}}if(!Sch.util){Sch.util={}}if(!Sch.view){Sch.view={}}if(!Sch.view.dependency){Sch.view.dependency={}}if(!Sch.view.dependency.renderingstrategy){Sch.view.dependency.renderingstrategy={}}if(!Sch.view.model){Sch.view.model={}}if(!Sch.widget){Sch.widget={}}var ccReidComponents=ccReidComponents||{};if(!ccReidComponents.button){ccReidComponents.button={}}if(!ccReidComponents.container){ccReidComponents.container={}}if(!ccReidComponents.container.areaTree){ccReidComponents.container.areaTree={}}if(!ccReidComponents.container.categoriesFilter){ccReidComponents.container.categoriesFilter={}}if(!ccReidComponents.container.dateRangeFilter){ccReidComponents.container.dateRangeFilter={}}if(!ccReidComponents.container.filesView){ccReidComponents.container.filesView={}}if(!ccReidComponents.container.formRow){ccReidComponents.container.formRow={}}if(!ccReidComponents.container.pagingtoolbar){ccReidComponents.container.pagingtoolbar={}}if(!ccReidComponents.container.panel){ccReidComponents.container.panel={}}if(!ccReidComponents.container.roleFilter){ccReidComponents.container.roleFilter={}}if(!ccReidComponents.container.stagesAreasSelector){ccReidComponents.container.stagesAreasSelector={}}if(!ccReidComponents.container.stagesFilter){ccReidComponents.container.stagesFilter={}}if(!ccReidComponents.container.tabPanel){ccReidComponents.container.tabPanel={}}if(!ccReidComponents.container.toolbar){ccReidComponents.container.toolbar={}}if(!ccReidComponents.form){ccReidComponents.form={}}if(!ccReidComponents.form.field){ccReidComponents.form.field={}}if(!ccReidComponents.form.panel){ccReidComponents.form.panel={}}if(!ccReidComponents.grid){ccReidComponents.grid={}}if(!ccReidComponents.grid.tabGrid){ccReidComponents.grid.tabGrid={}}if(!ccReidComponents.locale){ccReidComponents.locale={}}if(!ccReidComponents.mixin){ccReidComponents.mixin={}}if(!ccReidComponents.noneGeneric){ccReidComponents.noneGeneric={}}if(!ccReidComponents.noneGeneric.container){ccReidComponents.noneGeneric.container={}}if(!ccReidComponents.noneGeneric.container.workersSelector){ccReidComponents.noneGeneric.container.workersSelector={}}if(!ccReidComponents.noneGeneric.form){ccReidComponents.noneGeneric.form={}}if(!ccReidComponents.noneGeneric.form.field){ccReidComponents.noneGeneric.form.field={}}if(!ccReidComponents.noneGeneric.grid){ccReidComponents.noneGeneric.grid={}}if(!ccReidComponents.noneGeneric.grid.similarIssues){ccReidComponents.noneGeneric.grid.similarIssues={}}if(!ccReidComponents.noneGeneric.window){ccReidComponents.noneGeneric.window={}}if(!ccReidComponents.store){ccReidComponents.store={}}if(!ccReidComponents.store.crudManager){ccReidComponents.store.crudManager={}}if(!ccReidComponents.store.proxy){ccReidComponents.store.proxy={}}if(!ccReidComponents.store.storeManager){ccReidComponents.store.storeManager={}}if(!ccReidComponents.store.storeManager.model){ccReidComponents.store.storeManager.model={}}if(!ccReidComponents.utils){ccReidComponents.utils={}}if(!ccReidComponents.window){ccReidComponents.window={}}var ccReidStoreConfig=ccReidStoreConfig||{};var ccReidStoreManager=ccReidStoreManager||{};var genericGrid=genericGrid||{};if(!genericGrid.field){genericGrid.field={}}if(!genericGrid.locale){genericGrid.locale={}}if(!genericGrid.mixin){genericGrid.mixin={}}if(!genericGrid.model){genericGrid.model={}}if(!genericGrid.store){genericGrid.store={}}if(!genericGrid.view){genericGrid.view={}}var issuesByStageByConstruct=issuesByStageByConstruct||{};if(!issuesByStageByConstruct.locale){issuesByStageByConstruct.locale={}}if(!issuesByStageByConstruct.mixin){issuesByStageByConstruct.mixin={}}if(!issuesByStageByConstruct.store){issuesByStageByConstruct.store={}}if(!issuesByStageByConstruct.view){issuesByStageByConstruct.view={}}var issuesEditor=issuesEditor||{};if(!issuesEditor.locale){issuesEditor.locale={}}if(!issuesEditor.mixin){issuesEditor.mixin={}}if(!issuesEditor.store){issuesEditor.store={}}if(!issuesEditor.view){issuesEditor.view={}}var issuesPkgs=issuesPkgs||{};if(!issuesPkgs.filter){issuesPkgs.filter={}}if(!issuesPkgs.locale){issuesPkgs.locale={}}if(!issuesPkgs.mixin){issuesPkgs.mixin={}}if(!issuesPkgs.model){issuesPkgs.model={}}if(!issuesPkgs.store){issuesPkgs.store={}}if(!issuesPkgs.utils){issuesPkgs.utils={}}if(!issuesPkgs.ux){issuesPkgs.ux={}}if(!issuesPkgs.ux.exporter){issuesPkgs.ux.exporter={}}if(!issuesPkgs.ux.exporter.csvFormatter){issuesPkgs.ux.exporter.csvFormatter={}}if(!issuesPkgs.ux.exporter.excelFormatter){issuesPkgs.ux.exporter.excelFormatter={}}if(!issuesPkgs.view){issuesPkgs.view={}}if(!issuesPkgs.window){issuesPkgs.window={}}var issuesProgress=issuesProgress||{};if(!issuesProgress.locale){issuesProgress.locale={}}if(!issuesProgress.mixin){issuesProgress.mixin={}}if(!issuesProgress.store){issuesProgress.store={}}if(!issuesProgress.view){issuesProgress.view={}}var stagesGrid=stagesGrid||{};if(!stagesGrid.store){stagesGrid.store={}}if(!stagesGrid.view){stagesGrid.view={}}var tasksByStages=tasksByStages||{};if(!tasksByStages.model){tasksByStages.model={}}if(!tasksByStages.store){tasksByStages.store={}}if(!tasksByStages.view){tasksByStages.view={}}var velocityGrid=velocityGrid||{};if(!velocityGrid.locale){velocityGrid.locale={}}if(!velocityGrid.mixin){velocityGrid.mixin={}}if(!velocityGrid.model){velocityGrid.model={}}if(!velocityGrid.store){velocityGrid.store={}}if(!velocityGrid.ux){velocityGrid.ux={}}if(!velocityGrid.ux.exporter){velocityGrid.ux.exporter={}}if(!velocityGrid.ux.exporter.csvFormatter){velocityGrid.ux.exporter.csvFormatter={}}if(!velocityGrid.ux.exporter.excelFormatter){velocityGrid.ux.exporter.excelFormatter={}}if(!velocityGrid.view){velocityGrid.view={}}(function(q){var e,p=['constructor','toString','valueOf','toLocaleString'],n={},m={},k=0,l,j,a,b,o,f,c,d,g,h,i,t=function(){var s,t;j=Ext.Base;a=Ext.ClassManager;b=Ext.Class;for(s=p.length;s-->0;){t=1<<s;m[n[t]=p[s]]=t}for(s in m){k|=m[s]}k=~k;Function.prototype.$isFunction=1;i=!!a.addAlias;o=b.getPreprocessor('config').fn;f=b.getPreprocessor('cachedConfig');f=f&&f.fn;h=b.getPreprocessor('privates');h=h&&h.fn;d=b.getPreprocessor('platformConfig');d=d&&d.fn;c=a.postprocessors.platformConfig;c=c&&c.fn;g=a.postprocessors.deprecated;g=g&&g.fn;e=j.$staticMembers;if(!e){e=[];for(l in j){if(j.hasOwnProperty(l)){e.push(l)}}}q.derive=r;return r.apply(this,arguments)},s=function(f,d,o){var l=o.enumerableMembers,j=f.prototype,b,h,k,e,m;if(!d){return}if(i){f.addMembers(d)}else {for(b in d){e=d[b];if(e&&e.$isFunction&&!e.$isClass&&e!==Ext.emptyFn&&e!==Ext.identityFn){m=j.hasOwnProperty(b)&&j[b];if(m){e.$previous=m}j[b]=h=e;h.$owner=f;h.$name=b}else {j[b]=e}}for(k=1;l;k<<=1){if(l&k){l&=~k;b=n[k];j[b]=h=d[b];h.$owner=f;h.$name=b}}}if(d.platformConfig&&c){c.call(a,f.$className,f,d)}if(d.deprecated&&g){g.call(a,f.$className,f,d)}},r=function(u,Q,c,L,E,M,O,B,D,G,N){var g=function ctor(){return this.constructor.apply(this,arguments)||null},m=g,v={enumerableMembers:L&k,onCreated:N,onBeforeCreated:s,aliases:B},p=c.alternateClassName||[],P=Ext.global,F,z,l,K,y,C,H,r,x,w,n,I,t,J=a.alternateToName||a.maps.alternateToName,A=a.nameToAlternates||a.maps.nameToAlternates;for(l=e.length;l-->0;){H=e[l];g[H]=j[H]}if(c.$isFunction){c=c(g)}v.data=c;x=c.statics;delete c.statics;c.$className=u;if('$className' in c){g.$className=c.$className}g.extend(Q);r=g.prototype;if(E){g.xtype=c.xtype=E[0];r.xtypes=E}r.xtypesChain=M;r.xtypesMap=O;c.alias=B;m.triggerExtended(g,c,v);if(c.onClassExtended){g.onExtended(c.onClassExtended,g);delete c.onClassExtended}if(c.privates&&h){h.call(b,g,c)}if(x){if(i){g.addStatics(x)}else {for(w in x){if(x.hasOwnProperty(w)){t=x[w];if(t&&t.$isFunction&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn){g[w]=I=t;I.$owner=g;I.$name=w}g[w]=t}}}}if(c.inheritableStatics){g.addInheritableStatics(c.inheritableStatics);delete c.inheritableStatics}if(r.onClassExtended){m.onExtended(r.onClassExtended,m);delete r.onClassExtended}if(c.platformConfig&&d){d.call(b,g,c);delete c.platformConfig}if(c.config){o.call(b,g,c)}if(c.cachedConfig&&f){f.call(b,g,c);delete c.cachedConfig}v.onBeforeCreated(g,v.data,v);for(l=0,y=D&&D.length;l<y;++l){g.mixin.apply(g,D[l])}for(l=0,y=B.length;l<y;l++){F=B[l];a.setAlias?a.setAlias(g,F):a.addAlias(g,F)}if(c.singleton){m=new g()}if(!(p instanceof Array)){p=[p]}n=a.getName(m);for(l=0,K=p.length;l<K;l++){z=p[l];a.classes[z]=m;if(i){a.addAlternate(g,z)}else {if(n){J[z]=n;p=A[n]||(A[n]=[]);p.push(z)}}}for(l=0,y=G.length;l<y;l+=2){C=G[l];if(!C){C=P}C[G[l+1]]=m}a.classes[u]=m;if(!i){if(n&&n!==u){J[u]=n;p=A[n]||(A[n]=[]);p.push(u)}}delete r.alternateClassName;if(v.onCreated){v.onCreated.call(m,m)}if(u){a.triggerCreated(u)}return m};q.derive=t})(Ext.cmd={});var Ext=Ext||{};(function(){var d=this,h=Object.prototype,c=h.toString,b=['valueOf','toLocaleString','toString','constructor'],a=function(){},f=function(){},e=function(a){return a},g=function(){var a=g.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},k=Ext.manifest||{},l,i=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,j=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=d;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=d.performance&&d.performance.now?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();a.$nullFn=e.$nullFn=a.$emptyFn=e.$identityFn=f.$nullFn=!0;f.$privacy='framework';Ext['suspendLayouts']=Ext['resumeLayouts']=a;for(l in {toString:1}){b=null}Ext.enumerables=b;Ext.apply=function(c,a,g){if(g){Ext.apply(c,g)}if(c&&a&&typeof a==='object'){var e,f,d;for(e in a){c[e]=a[e]}if(b){for(f=b.length;f--;){d=b[f];if(a.hasOwnProperty(d)){c[d]=a[d]}}}}return c};function addInstanceOverrides(d,e,c){var a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];if(typeof b==='function'){b.$name=a;b.$owner=e;b.$previous=d.hasOwnProperty(a)?d[a]:g}d[a]=b}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:'x-'},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:'ext-',isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||'Ext',privateFn:f,emptyFn:a,identityFn:e,frameStartTime:Ext.now(),manifest:k,enableAria:!0,enableAriaButtons:!0,enableAriaPanels:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:'data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',makeIdSelector:function(a){return '#'+a},id:function(a,c){if(a&&a.id){return a.id}var b=(c||Ext.idPrefix)+ ++Ext.idSeed;if(a){a.id=b}return b},returnId:function(a){return a.getId()},returnTrue:function(){return !0},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=Ext.$vendorEventRe.test(a)?a:a.toLowerCase())},applyIf:function(b,c){var a;if(b){for(a in c){if(b[a]===undefined){b[a]=c[a]}}}return b},destroy:function(){var c=arguments.length,b,a;for(b=0;b<c;b++){a=arguments[b];if(a){if(Ext.isArray(a)){this.destroy.apply(this,a)}else {if(Ext.isFunction(a.destroy)){a.destroy()}}}}return null},destroyMembers:function(c){for(var a,d,b=1,e=arguments,f=e.length;b<f;b++){a=c[d=e[b]];if(a!=null){c[d]=Ext.destroy(a)}}},override:function(a,b){if(a.$isClass){a.override(b)}else {if(typeof a==='function'){Ext.apply(a.prototype,b)}else {var c=a.self,d;if(c&&c.$isClass){d=b.privates;if(d){b=Ext.apply({},b);delete b.privates;addInstanceOverrides(a,c,d)}addInstanceOverrides(a,c,b)}else {Ext.apply(a,b)}}}return a},valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isEmpty:function(a,b){return a==null||(!b?a==='':!1)||Ext.isArray(a)&&a.length===0},isArray:'isArray' in Array?Array.isArray:function(a){return c.call(a)==='[object Array]'},isDate:function(a){return c.call(a)==='[object Date]'},isMSDate:function(a){if(!Ext.isString(a)){return !1}return j.test(a)},isObject:c.call(null)==='[object Object]'?function(a){return a!==null&&a!==undefined&&c.call(a)==='[object Object]'&&a.ownerDocument===undefined}:function(a){return c.call(a)==='[object Object]'},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(b){var a=typeof b;return a==='string'||a==='number'||a==='boolean'},isFunction:typeof document!=='undefined'&&typeof document.getElementsByTagName('body')==='function'?function(a){return !!a&&c.call(a)==='[object Function]'}:function(a){return !!a&&typeof a==='function'},isNumber:function(a){return typeof a==='number'&&isFinite(a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a==='string'},isBoolean:function(a){return typeof a==='boolean'},isElement:function(a){return a?a.nodeType===1:!1},isTextNode:function(a){return a?a.nodeName==='#text':!1},isDefined:function(a){return typeof a!=='undefined'},isIterable:function(a){if(!a||typeof a.length!=='number'||typeof a==='string'||Ext.isFunction(a)){return !1}if(!a.propertyIsEnumerable){return !!a.item}if(a.hasOwnProperty('length')&&!a.propertyIsEnumerable('length')){return !0}return i.test(c.call(a))},isDebugEnabled:a,clone:function(a){if(a===null||a===undefined){return a}if(a.nodeType&&a.cloneNode){return a.cloneNode(!0)}var g=c.call(a),e,i,f,d,h;if(g==='[object Date]'){return new Date(a.getTime())}if(g==='[object Array]'){e=a.length;d=[];while(e--){d[e]=Ext.clone(a[e])}}else {if(g==='[object Object]'&&a.constructor===Object){d={};for(h in a){d[h]=Ext.clone(a[h])}if(b){for(i=b.length;i--;){f=b[i];if(a.hasOwnProperty(f)){d[f]=a[f]}}}}}return d||a},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace,b;if(a===undefined){b=0;do{a='ExtBox'+ ++b}while(d[a]!==undefined);d[a]=Ext;this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var f=this,a=Array.prototype.slice.call(arguments),e=f.functionFactoryCache,d,b,c;if(Ext.isSandboxed){c=a.length;if(c>0){c--;a[c]='var Ext=window.'+Ext.name+';'+a[c]}}d=a.join('');b=e[d];if(!b){b=Function.prototype.constructor.apply(Function.prototype,a);e[d]=b}return b},functionFactory:function(){var b=Array.prototype.slice.call(arguments),a;if(Ext.isSandboxed){a=b.length;if(a>0){a--;b[a]='var Ext=window.'+Ext.name+';'+b[a]}}return Function.prototype.constructor.apply(Function.prototype,b)},Logger:{verbose:a,log:a,info:a,warn:a,error:function(a){throw new Error(a)},deprecate:a},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:function(){var a={};return function(e,c){if(!e){return []}else {if(!c){return [e]}}var g=a[c]||(a[c]=new RegExp('\\\\'+c,'g')),f=[],d,b;d=e.split(c);while((b=d.shift())!==undefined){while(b.charAt(b.length-1)==='\\'&&d.length>0){b=b+c+d.shift()}b=b.replace(g,c);f.push(b)}return f}}()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0})();Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=!0);(function(){function toString(){var d=this,b=d.sourceClass,a=d.sourceMethod,c=d.msg;if(a){if(c){a+='(): ';a+=c}else {a+='()'}}if(b){a=a?b+'.'+a:b}return a||c||''}Ext.Error=function(b){if(Ext.isString(b)){b={msg:b}}var a=new Error();Ext.apply(a,b);a.message=a.message||a.msg;a.toString=toString;return a};Ext.apply(Ext.Error,{ignore:!1,raise:function(a){a=a||{};if(Ext.isString(a)){a={msg:a}}var d=this,b=d.raise.caller,e,c;if(b===Ext.raise){b=b.caller}if(b){if(!a.sourceMethod&&(c=b.$name)){a.sourceMethod=c}if(!a.sourceClass&&(c=b.$owner)&&(c=c.$className)){a.sourceClass=c}}if(d.handle(a)!==!0){e=toString.call(a);throw new Ext.Error(a)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=function(){var c=Array.prototype,b=c.slice,f=function(){var a=[],b,c=20;if(!a.splice){return !1}while(c--){a.push('A')}a.splice(15,0,'F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F');b=a.length;a.splice(13,0,'XXX');if(b+1!==a.length){return !1}return !0}(),i='indexOf' in c,h=!0;function stableSort(b,e){var d=b.length,c=new Array(d),a;for(a=0;a<d;a++){c[a]=a}c.sort(function(a,c){return e(b[a],b[c])||a-c});for(a=0;a<d;a++){c[a]=b[c[a]]}for(a=0;a<d;a++){b[a]=c[a]}return b}try{if(typeof document!=='undefined'){b.call(document.getElementsByTagName('body'))}}catch(q){h=!1}var g=function(b,a){return a<0?Math.max(0,b.length+a):Math.min(b.length,a)},e=function(a,n,m,d){var e=d?d.length:0,i=a.length,f=g(a,n);if(f===i){if(e){a.push.apply(a,d)}}else {var k=Math.min(m,i-f),c=f+k,h=c+e-k,l=i-c,j=i-k,b;if(h<c){for(b=0;b<l;++b){a[h+b]=a[c+b]}}else {if(h>c){for(b=l;b--;){a[h+b]=a[c+b]}}}if(e&&f===j){a.length=j;a.push.apply(a,d)}else {a.length=j+e;for(b=0;b<e;++b){a[f+b]=d[b]}}}return a},k=function(a,c,d,b){if(b&&b.length){if(c===0&&!d){a.unshift.apply(a,b)}else {if(c<a.length){a.splice.apply(a,[c,d].concat(b))}else {a.push.apply(a,b)}}}else {a.splice(c,d)}return a},o=function(b,c,a){return e(b,c,a)},m=function(a,c,b){a.splice(c,b);return a},n=function(a,f,c){var d=g(a,f),h=a.slice(f,g(a,d+c));if(arguments.length<4){e(a,d,c)}else {e(a,d,c,b.call(arguments,3))}return h},l=function(a){return a.splice.apply(a,b.call(arguments,1))},d=f?m:o,j=f?k:e,p=f?l:n,a={binarySearch:function(h,i,c,b,d){var g=h.length,e,f;if(c instanceof Function){d=c;c=0;b=g}else {if(b instanceof Function){d=b;b=g}else {if(c===undefined){c=0}if(b===undefined){b=g}d=d||a.lexicalCompare}}--b;while(c<=b){e=c+b>>1;f=d(i,h[e]);if(f>=0){c=e+1}else {if(f<0){b=e-1}}}return c},defaultCompare:function(a,b){return a<b?-1:a>b?1:0},lexicalCompare:function(a,b){a=String(a);b=String(b);return a<b?-1:a>b?1:0},each:function(c,e,d,g){c=a.from(c);var b,f=c.length;if(g!==!0){for(b=0;b<f;b++){if(e.call(d||c[b],c[b],b,c)===!1){return b}}}else {for(b=f-1;b>-1;b--){if(e.call(d||c[b],c[b],b,c)===!1){return b}}}return !0},forEach:'forEach' in c?function(a,c,b){return a.forEach(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;a++){d.call(c,b[a],a,b)}},indexOf:i?function(a,d,b){return c.indexOf.call(a,d,b)}:function(d,e,b){var a,c=d.length;for(a=b<0?Math.max(0,c+b):b||0;a<c;a++){if(d[a]===e){return a}}return -1},contains:i?function(a,b){return c.indexOf.call(a,b)!==-1}:function(b,d){var a,c;for(a=0,c=b.length;a<c;a++){if(b[a]===d){return !0}}return !1},toArray:function(a,d,c){if(!a||!a.length){return []}if(typeof a==='string'){a=a.split('')}if(h){return b.call(a,d||0,c||a.length)}var f=[],e;d=d||0;c=c?c<0?a.length+c:c:a.length;for(e=d;e<c;e++){f.push(a[e])}return f},pluck:function(b,f){var d=[],a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d.push(c[f])}return d},map:'map' in c?function(a,c,b){return a.map(c,b)}:function(b,f,d){var c=[],e=b.length,a;for(a=0;a<e;a++){c[a]=f.call(d,b[a],a,b)}return c},every:'every' in c?function(a,c,b){return a.every(c,b)}:function(b,d,c){var a=0,e=b.length;for(;a<e;++a){if(!d.call(c,b[a],a,b)){return !1}}return !0},some:'some' in c?function(a,c,b){return a.some(c,b)}:function(b,d,c){var a=0,e=b.length;for(;a<e;++a){if(d.call(c,b[a],a,b)){return !0}}return !1},equals:function(b,c){var d=b.length,e=c.length,a;if(b===c){return !0}if(d!==e){return !1}for(a=0;a<d;++a){if(b[a]!==c[a]){return !1}}return !0},clean:function(d){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];if(!Ext.isEmpty(a)){c.push(a)}}return c},unique:function(e){var b=[],d=0,f=e.length,c;for(;d<f;d++){c=e[d];if(a.indexOf(b,c)===-1){b.push(c)}}return b},filter:'filter' in c?function(a,c,b){return a.filter(c,b)}:function(b,e,d){var c=[],a=0,f=b.length;for(;a<f;a++){if(e.call(d,b[a],a,b)){c.push(b[a])}}return c},findBy:function(b,e,c){var a=0,d=b.length;for(;a<d;a++){if(e.call(c||b,b[a],a)){return b[a]}}return null},from:function(c,e){if(c===undefined||c===null){return []}if(Ext.isArray(c)){return e?b.call(c):c}var d=typeof c;if(c&&c.length!==undefined&&d!=='string'&&(d!=='function'||!c.apply)){return a.toArray(c)}return [c]},remove:function(b,e){var c=a.indexOf(b,e);if(c!==-1){d(b,c,1)}return b},removeAt:function(c,b,a){var e=c.length;if(b>=0&&b<e){a=a||1;a=Math.min(a,e-b);d(c,b,a)}return c},include:function(b,c){if(!a.contains(b,c)){b.push(c)}},clone:function(a){return b.call(a)},merge:function(){var e=b.call(arguments),d=[],c,f;for(c=0,f=e.length;c<f;c++){d=d.concat(e[c])}return a.unique(d)},intersect:function(){var m=[],f=b.call(arguments),g,o,r,e,k,j,q,n,p,l,c,h,i;if(!f.length){return m}g=f.length;for(c=k=0;c<g;c++){j=f[c];if(!e||j.length<e.length){e=j;k=c}}e=a.unique(e);d(f,k,1);q=e.length;g=f.length;for(c=0;c<q;c++){n=e[c];l=0;for(h=0;h<g;h++){o=f[h];r=o.length;for(i=0;i<r;i++){p=o[i];if(n===p){l++;break}}}if(l===g){m.push(n)}}return m},difference:function(i,f){var c=b.call(i),h=c.length,e,a,g;for(e=0,g=f.length;e<g;e++){for(a=0;a<h;a++){if(c[a]===f[e]){d(c,a,1);a--;h--}}}return c},reduce:Array.prototype.reduce?function(b,a,c){if(arguments.length===3){return Array.prototype.reduce.call(b,a,c)}return Array.prototype.reduce.call(b,a)}:function(a,f,e){a=Object(a);var b=0,d=a.length>>>0,c=e;if(arguments.length<3){while(!0){if(b in a){c=a[b++];break}if(++b>=d){throw new TypeError('Reduce of empty array with no initial value')}}}for(;b<d;++b){if(b in a){c=f(c,a[b],b,a)}}return c},slice:[1,2].slice(1,undefined).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){if(typeof c==='undefined'){return b.call(a)}if(typeof d==='undefined'){return b.call(a,c)}return b.call(a,c,d)},sort:function(c,b){return stableSort(c,b||a.lexicalCompare)},flatten:function(b){var a=[];function rFlatten(f){var c,e,d;for(c=0,e=f.length;c<e;c++){d=f[c];if(Ext.isArray(d)){rFlatten(d)}else {a.push(d)}}return a}return rFlatten(b)},min:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===1){b=a}}else {if(a<b){b=a}}}return b},max:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===-1){b=a}}else {if(a>b){b=a}}}return b},mean:function(b){return b.length>0?a.sum(b)/b.length:undefined},sum:function(b){var d=0,a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d+=c}return d},toMap:function(c,b,e){var d={},a=c.length;if(!b){while(a--){d[c[a]]=a+1}}else {if(typeof b==='string'){while(a--){d[c[a][b]]=a+1}}else {while(a--){d[b.call(e,c[a])]=a+1}}}return d},toValueMap:function(g,d,k,f){var b={},e=g.length,j,i,h,l,c,a;if(!d){while(e--){a=g[e];b[a]=a}}else {if(!(l=typeof d!=='string')){f=k}i=f===1;j=f===2;while(e--){a=g[e];c=l?d.call(k,a):a[d];if(i){if(c in b){b[c].push(a)}else {b[c]=[a]}}else {if(j&&c in b){if((h=b[c]) instanceof Array){h.push(a)}else {b[c]=[h,a]}}else {b[c]=a}}}}return b},erase:d,insert:function(a,b,c){return j(a,b,0,c)},move:function(c,b,d){if(d===b){return}var f=c[b],e=d>b?1:-1,a;for(a=b;a!=d;a+=e){c[a]=c[a+e]}c[d]=f},replace:j,splice:p,push:function(a){var d=arguments.length,c=1,b;if(a===undefined){a=[]}else {if(!Ext.isArray(a)){a=[a]}}for(;c<d;c++){b=arguments[c];Array.prototype.push[Ext.isIterable(b)?'apply':'call'](a,b)}return a},numericSortFn:function(a,b){return a-b}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}();Ext.String=function(){var m=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,i=/([-.*+?\^${}()|\[\]\/\\])/g,k=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi,c,a,b,d,h=function(b,a){return c[a]},g=function(c,b){return b in a?a[b]:String.fromCharCode(parseInt(b.substr(2),10))},e=function(b,a){if(b===null||b===undefined||a===null||a===undefined){return !1}return a.length<=b.length},f;return f={insert:function(b,c,a){if(!b){return c}if(!c){return b}var d=b.length;if(!a&&a!==0){a=d}if(a<0){a*=-1;if(a>=d){a=0}else {a=d-a}}if(a===0){b=c+b}else {if(a>=b.length){b+=c}else {b=b.substr(0,a)+c+b.substr(a)}}return b},startsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.lastIndexOf(a,0)===0}return c},endsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.indexOf(a,b.length-a.length)!==-1}return c},createVarName:function(a){return a.replace(l,'')},htmlEncode:function(a){return !a?a:String(a).replace(b,h)},htmlDecode:function(a){return !a?a:String(a).replace(d,g)},hasHtmlCharacters:function(a){return b.test(a)},addCharacterEntities:function(g){var i=[],h=[],e,f;for(e in g){f=g[e];a[e]=f;c[f]=e;i.push(f);h.push(e)}b=new RegExp('('+i.join('|')+')','g');d=new RegExp('('+h.join('|')+'|&#[0-9]{1,5};)','g')},resetCharacterEntities:function(){c={};a={};this.addCharacterEntities({'&amp;':'&','&gt;':'>','&lt;':'<','&quot;':'"','&#39;':"'"})},urlAppend:function(a,b){if(!Ext.isEmpty(b)){return a+(a.indexOf('?')===-1?'?':'&')+b}return a},trim:function(a){if(a){a=a.replace(m,'')}return a||''},capitalize:function(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1)}return a||''},uncapitalize:function(a){if(a){a=a.charAt(0).toLowerCase()+a.substr(1)}return a||''},ellipsis:function(a,c,e){if(a&&a.length>c){if(e){var b=a.substr(0,c-2),d=Math.max(b.lastIndexOf(' '),b.lastIndexOf('.'),b.lastIndexOf('!'),b.lastIndexOf('?'));if(d!==-1&&d>=c-15){return b.substr(0,d)+'...'}}return a.substr(0,c-3)+'...'}return a},escapeRegex:function(a){return a.replace(i,'\\$1')},createRegex:function(b,d,e,c){var a=b;if(b!=null&&!b.exec){a=f.escapeRegex(String(b));if(d!==!1){a='^'+a}if(e!==!1){a+='$'}a=new RegExp(a,c!==!1?'i':'')}return a},escape:function(a){return a.replace(n,'\\$1')},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,d,b){var a=String(c);b=b||' ';while(a.length<d){a=b+a}return a},repeat:function(c,a,d){if(a<1){a=0}for(var b=[],e=a;e--;){b.push(c)}return b.join(d||'')},splitWords:function(a){if(a&&typeof a=='string'){return a.replace(k,'').split(j)}return a||[]}}}();Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=function(){var a,b=Date,d=/(\\.)/g,h=/([gGhHisucUOPZ]|MS)/,g=/([djzmnYycU]|MS)/,i=/\\/gi,e=/\{(\d+)\}/g,f=new RegExp('\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/'),c=Ext.String.leftPad,j=['var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,','def = me.defaults,','from = Ext.Number.from,','results = String(input).match(me.parseRegexes[{0}]);','if(results){','{1}','if(u != null){','v = new Date(u * 1000);','}else{','dt = me.clearTime(new Date);','y = from(y, from(def.y, dt.getFullYear()));','m = from(m, from(def.m - 1, dt.getMonth()));','dayMatched = d !== undefined;','d = from(d, from(def.d, dt.getDate()));','if (!dayMatched) {','dt.setDate(1);','dt.setMonth(m);','dt.setFullYear(y);','daysInMonth = me.getDaysInMonth(dt);','if (d > daysInMonth) {','d = daysInMonth;','}','}','h  = from(h, from(def.h, dt.getHours()));','i  = from(i, from(def.i, dt.getMinutes()));','s  = from(s, from(def.s, dt.getSeconds()));','ms = from(ms, from(def.ms, dt.getMilliseconds()));','if(z >= 0 && y >= 0){','v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);','}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){','v = null;','}else{','if (W) {','year = y || (new Date()).getFullYear();','jan4 = new Date(year, 0, 4, 0, 0, 0);','d = jan4.getDay();','week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));','v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));','} else {','v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','}','}','}','}','if(v){','if(zz != null){','v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);','}else if(o){',"v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));",'}','}','return (v != null) ? v : null;'].join('\n');if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var a=this;return c(a.getUTCFullYear(),4,'0')+'-'+c(a.getUTCMonth()+1,2,'0')+'-'+c(a.getUTCDate(),2,'0')+'T'+c(a.getUTCHours(),2,'0')+':'+c(a.getUTCMinutes(),2,'0')+':'+c(a.getUTCSeconds(),2,'0')+'.'+c(a.getUTCMilliseconds(),3,'0')+'Z'}}function xf(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(e,function(d,c){return b[c]})}return a={now:b.now,toString:function(a){if(!a){a=new b()}return a.getFullYear()+'-'+c(a.getMonth()+1,2,'0')+'-'+c(a.getDate(),2,'0')+'T'+c(a.getHours(),2,'0')+':'+c(a.getMinutes(),2,'0')+':'+c(a.getSeconds(),2,'0')},getElapsed:function(b,c){return Math.abs(b-(c||a.now()))},useStrict:!1,formatCodeToRegex:function(c,d){var b=a.parseCodes[c];if(b){b=typeof b==='function'?b():b;a.parseCodes[c]=b}return b?Ext.applyIf({c:b.c?xf(b.c,d||'{0}'):b.c},b):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{'MS':function(c,d){var a=(c||'').match(f);return a?new b(((a[1]||'')+a[2])*1):null},'time':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a)}return null},'timestamp':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a*1000)}return null}},parseRegexes:[],formatFunctions:{'MS':function(){return '\\/Date('+this.getTime()+')\\/'},'time':function(){return this.getTime().toString()},'timestamp':function(){return a.format(this,'U')}},y2kYear:50,MILLI:'ms',SECOND:'s',MINUTE:'mi',HOUR:'h',DAY:'d',MONTH:'mo',YEAR:'y',defaults:{},dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:'m/d/Y',getShortMonthName:function(b){return a.monthNames[b].substring(0,3)},getShortDayName:function(b){return a.dayNames[b].substring(0,3)},getMonthNumber:function(b){return a.monthNumbers[b.substring(0,1).toUpperCase()+b.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return h.test(a.replace(d,''))},formatContainsDateInfo:function(a){return g.test(a.replace(d,''))},unescapeFormat:function(a){return a.replace(i,'')},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:'Ext.Date.getShortDayName(m.getDay())',j:'m.getDate()',l:'Ext.Date.dayNames[m.getDay()]',N:'(m.getDay() ? m.getDay() : 7)',S:'Ext.Date.getSuffix(m)',w:'m.getDay()',z:'Ext.Date.getDayOfYear(m)',W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:'Ext.Date.monthNames[m.getMonth()]',m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:'Ext.Date.getShortMonthName(m.getMonth())',n:'(m.getMonth() + 1)',t:'Ext.Date.getDaysInMonth(m)',L:'(Ext.Date.isLeapYear(m) ? 1 : 0)',o:'(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))',Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:'((m.getHours() % 12) ? m.getHours() % 12 : 12)',G:'m.getHours()',h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:'Ext.Date.getGMTOffset(m)',P:'Ext.Date.getGMTOffset(m, true)',T:'Ext.Date.getTimezone(m)',Z:'(m.getTimezoneOffset() * -60)',c:function(){var e='Y-m-dTH:i:sP',d=[],b,f=e.length,c;for(b=0;b<f;++b){c=e.charAt(b);d.push(c==='T'?"'T'":a.getFormatCode(c))}return d.join(' + ')},C:function(){return 'm.toISOString()'},U:'Math.round(m.getTime() / 1000)'},isValid:function(d,j,i,f,g,h,e){f=f||0;g=g||0;h=h||0;e=e||0;var c=a.add(new b(d<100?100:d,j-1,i,f,g,h,e),a.YEAR,d<100?d-100:0);return d===c.getFullYear()&&j===c.getMonth()+1&&i===c.getDate()&&f===c.getHours()&&g===c.getMinutes()&&h===c.getSeconds()&&e===c.getMilliseconds()},parse:function(e,b,c){var d=a.parseFunctions;if(d[b]==null){a.createParser(b)}return d[b].call(a,e,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,b,c){return a.parse(d,b,c)},getFormatCode:function(c){var b=a.formatCodes[c];if(b){b=typeof b==='function'?b():b;a.formatCodes[c]=b}return b||"'"+Ext.String.escape(c)+"'"},createFormat:function(f){var d=[],c=!1,b='',e;for(e=0;e<f.length;++e){b=f.charAt(e);if(!c&&b==='\\'){c=!0}else {if(c){c=!1;d.push("'"+Ext.String.escape(b)+"'")}else {if(b==='\n'){d.push("'\\n'")}else {d.push(a.getFormatCode(b))}}}}a.formatFunctions[f]=Ext.functionFactory('var m=this;return '+d.join('+'))},createParser:function(f){var k=a.parseRegexes.length,i=1,d=[],g=[],c=!1,e='',h=0,m=f.length,l=[],b;for(;h<m;++h){e=f.charAt(h);if(!c&&e==='\\'){c=!0}else {if(c){c=!1;g.push(Ext.String.escape(e))}else {b=a.formatCodeToRegex(e,i);i+=b.g;g.push(b.s);if(b.g&&b.c){if(b.calcAtEnd){l.push(b.c)}else {d.push(b.c)}}}}}d=d.concat(l);a.parseRegexes[k]=new RegExp('^'+g.join('')+'$','i');a.parseFunctions[f]=Ext.functionFactory('input','strict',xf(j,k,d.join('')))},parseCodes:{d:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|0[1-9])'},j:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|[1-9])'},D:function(){for(var c=[],b=0;b<7;c.push(a.getShortDayName(b)),++b){}return {g:0,c:null,s:'(?:'+c.join('|')+')'}},l:function(){return {g:0,c:null,s:'(?:'+a.dayNames.join('|')+')'}},N:{g:0,c:null,s:'[1-7]'},S:{g:0,c:null,s:'(?:st|nd|rd|th)'},w:{g:0,c:null,s:'[0-6]'},z:{g:1,c:'z = parseInt(results[{0}], 10);\n',s:'(\\d{1,3})'},W:{g:1,c:'W = parseInt(results[{0}], 10);\n',s:'(\\d{2})'},F:function(){return {g:1,c:'m = parseInt(me.getMonthNumber(results[{0}]), 10);\n',s:'('+a.monthNames.join('|')+')'}},M:function(){for(var c=[],b=0;b<12;c.push(a.getShortMonthName(b)),++b){}return Ext.applyIf({s:'('+c.join('|')+')'},a.formatCodeToRegex('F'))},m:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|0[1-9])'},n:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|[1-9])'},t:{g:0,c:null,s:'(?:\\d{2})'},L:{g:0,c:null,s:'(?:1|0)'},o:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},Y:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},y:{g:1,c:'var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n',s:'(\\d{2})'},a:{g:1,c:'if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(am|pm|AM|PM)',calcAtEnd:!0},A:{g:1,c:'if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(AM|PM|am|pm)',calcAtEnd:!0},g:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|[0-9])'},G:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|1[0-9]|[0-9])'},h:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|0[1-9])'},H:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|[0-1][0-9])'},i:{g:1,c:'i = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},s:{g:1,c:'s = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},u:{g:1,c:'ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n',s:'(\\d+)'},O:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),','mn = o.substring(3,5) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{4})'},P:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),','mn = o.substring(4,6) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{2}:\\d{2})'},T:{g:0,c:null,s:'[A-Z]{1,5}'},Z:{g:1,c:'zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n',s:'([+-]?\\d{1,5})'},c:function(){var d=[],b=[a.formatCodeToRegex('Y',1),a.formatCodeToRegex('m',2),a.formatCodeToRegex('d',3),a.formatCodeToRegex('H',4),a.formatCodeToRegex('i',5),a.formatCodeToRegex('s',6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:['if(results[8]) {',"if(results[8] == 'Z'){",'zz = 0;',"}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex('P',8).c,'}else{',a.formatCodeToRegex('O',8).c,'}','}'].join('\n')}],c,e;for(c=0,e=b.length;c<e;++c){d.push(b[c].c)}return {g:1,c:d.join(''),s:[b[0].s,'(?:','-',b[1].s,'(?:','-',b[2].s,'(?:','(?:T| )?',b[3].s,':',b[4].s,'(?::',b[5].s,')?','(?:(?:\\.|,)(\\d+))?','(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?',')?',')?',')?'].join('')}},U:{g:1,c:'u = parseInt(results[{0}], 10);\n',s:'(-?\\d+)'}},dateFormat:function(c,b){return a.format(c,b)},isEqual:function(a,b){if(a&&b){return a.getTime()===b.getTime()}return !(a||b)},format:function(d,b){var c=a.formatFunctions;if(!Ext.isDate(d)){return ''}if(c[b]==null){a.createFormat(b)}return c[b].call(d)+''},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,'$1$2').replace(/[^A-Z]/g,'')},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return (a>0?'-':'+')+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,'0')+(b?':':'')+Ext.String.leftPad(Math.abs(a%60),2,'0')},getDayOfYear:function(c){var e=0,b=a.clone(c),f=c.getMonth(),d;for(d=0,b.setDate(1),b.setMonth(0);d<f;b.setMonth(++d)){e+=a.getDaysInMonth(b)}return e+c.getDate()-1},getWeekOfYear:function(){var a=86400000,c=7*a;return function(d){var f=b.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/a,e=Math.floor(f/7),g=(new b(e*c)).getUTCFullYear();return e-Math.floor(b.UTC(g,0,7)/c)+1}}(),isLeapYear:function(b){var a=b.getFullYear();return !!((a&3)===0&&(a%100||a%400===0&&a))},getFirstDayOfMonth:function(b){var a=(b.getDay()-(b.getDate()-1))%7;return a<0?a+7:a},getLastDayOfMonth:function(b){return a.getLastDateOfMonth(b).getDay()},getFirstDateOfMonth:function(a){return new b(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(c){return new b(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:function(){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return d===1&&a.isLeapYear(c)?29:b[d]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return 'st';case 2:case 22:return 'nd';case 3:case 23:return 'rd';default:return 'th';}},clone:function(a){return new b(a.getTime())},isDST:function(a){return (new b(a.getFullYear(),0,1)).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(b,f){if(isNaN(b.getTime())){return b}if(f){return a.clearTime(a.clone(b))}var e=b.getDate(),c,d;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);if(b.getDate()!==e){for(c=1,d=a.add(b,a.HOUR,c);d.getDate()!==e;c++,d=a.add(b,a.HOUR,c)){}b.setDate(e);b.setHours(d.getHours())}return b},add:function(f,h,c){var b=a.clone(f),d,g,e=0;if(!h||c===0){return b}g=c-parseInt(c,10);c=parseInt(c,10);if(c){switch(h.toLowerCase()){case a.MILLI:b.setTime(b.getTime()+c);break;case a.SECOND:b.setTime(b.getTime()+c*1000);break;case a.MINUTE:b.setTime(b.getTime()+c*60*1000);break;case a.HOUR:b.setTime(b.getTime()+c*60*60*1000);break;case a.DAY:b.setDate(b.getDate()+c);break;case a.MONTH:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.MONTH,c)).getDate())};b.setDate(d);b.setMonth(f.getMonth()+c);break;case a.YEAR:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.YEAR,c)).getDate())};b.setDate(d);b.setFullYear(f.getFullYear()+c);break;}}if(g){switch(h.toLowerCase()){case a.MILLI:e=1;break;case a.SECOND:e=1000;break;case a.MINUTE:e=1000*60;break;case a.HOUR:e=1000*60*60;break;case a.DAY:e=1000*60*60*24;break;case a.MONTH:d=a.getDaysInMonth(b);e=1000*60*60*24*d;break;case a.YEAR:d=a.isLeapYear(b)?366:365;e=1000*60*60*24*d;break;}if(e){b.setTime(b.getTime()+e*g)}}return b},subtract:function(d,b,c){return a.add(d,b,-c)},between:function(c,b,d){var a=c.getTime();return b.getTime()<=a&&a<=d.getTime()},compat:function(){var c,g=['useStrict','formatCodeToRegex','parseFunctions','parseRegexes','formatFunctions','y2kYear','MILLI','SECOND','MINUTE','HOUR','DAY','MONTH','YEAR','defaults','dayNames','monthNames','monthNumbers','getShortMonthName','getShortDayName','getMonthNumber','formatCodes','isValid','parseDate','getFormatCode','createFormat','createParser','parseCodes'],h=['dateFormat','format','getTimezone','getGMTOffset','getDayOfYear','getWeekOfYear','isLeapYear','getFirstDayOfMonth','getLastDayOfMonth','getDaysInMonth','getSuffix','clone','isDST','clearTime','add','between'],j=g.length,i=h.length,f,e,d;for(d=0;d<j;d++){f=g[d];b[f]=a[f]}for(c=0;c<i;c++){e=h[c];b.prototype[e]=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a[e].apply(a,b)}}},diff:function(e,d,f){var b,c=+d-e;switch(f){case a.MILLI:return c;case a.SECOND:return Math.floor(c/1000);case a.MINUTE:return Math.floor(c/60000);case a.HOUR:return Math.floor(c/3600000);case a.DAY:return Math.floor(c/86400000);case 'w':return Math.floor(c/604800000);case a.MONTH:b=d.getFullYear()*12+d.getMonth()-(e.getFullYear()*12+e.getMonth());if(a.add(e,f,b)>d){return b-1};return b;case a.YEAR:b=d.getFullYear()-e.getFullYear();if(a.add(e,f,b)>d){return b-1}else {return b};}},align:function(e,f,d){var c=new b(+e);switch(f.toLowerCase()){case a.MILLI:return c;case a.SECOND:c.setUTCSeconds(c.getUTCSeconds()-c.getUTCSeconds()%d);c.setUTCMilliseconds(0);return c;case a.MINUTE:c.setUTCMinutes(c.getUTCMinutes()-c.getUTCMinutes()%d);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.HOUR:c.setUTCHours(c.getUTCHours()-c.getUTCHours()%d);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.DAY:if(d===7||d===14){c.setUTCDate(c.getUTCDate()-c.getUTCDay()+1)};c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.MONTH:c.setUTCMonth(c.getUTCMonth()-(c.getUTCMonth()-1)%d,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.YEAR:c.setUTCFullYear(c.getUTCFullYear()-c.getUTCFullYear()%d,1,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return e;}}}}();Ext.Function=function(){var i=0,f,c=[],l=[],m=0,e={},d=window,b=Ext.global,h=!!(b.setImmediate&&b.clearImmediate),k=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||function(c){var b=Ext.now(),a=Math.max(0,16-(b-i)),e=d.setTimeout(function(){c(b+a)},a);i=b+a;return e},g=function(){var h=c.length,g,d,a;f=null;for(d=0;d<h;d++){a=c[d];g=a[3];if(e[g]){a[0].apply(a[1]||b,a[2]||l);delete e[g]}}c=c.slice(h)},j=function(){Ext.elevateFunction(g)},a={flexSetter:function(a){return function(b,e){var c,d;if(b!==null){if(typeof b!=='string'){for(c in b){if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}if(Ext.enumerables){for(d=Ext.enumerables.length;d--;){c=Ext.enumerables[d];if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}}}else {a.call(this,b,e)}}return this}},bind:function(f,d,c,a){if(arguments.length===2){return function(){return f.apply(d,arguments)}}var g=f,e=Array.prototype.slice;return function(){var h=c||arguments;if(a===!0){h=e.call(arguments,0);h=h.concat(c)}else {if(typeof a==='number'){h=e.call(arguments,0);Ext.Array.insert(h,a,c)}}return g.apply(d||b,h)}},bindCallback:function(b,e,a,d,c){return function(){var f=Ext.Array.slice(arguments);return Ext.callback(b,e,a?a.concat(f):f,d,c)}},pass:function(c,a,b){if(!Ext.isArray(a)){if(Ext.isIterable(a)){a=Ext.Array.clone(a)}else {a=a!==undefined?[a]:[]}}return function(){var d=a.slice();d.push.apply(d,arguments);return c.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){return function(){return a.apply(this,arguments)}},createInterceptor:function(c,d,e,a){if(!Ext.isFunction(d)){return c}else {a=Ext.isDefined(a)?a:null;return function(){var g=this,f=arguments;return d.apply(e||g||b,f)!==!1?c.apply(g||b,f):a}}},createDelayed:function(a,e,b,c,d){if(b||c){a=Ext.Function.bind(a,b,c,d)}return function(){var g=this,f=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a,g,f)}else {a.apply(g,f)}},e)}},defer:function(a,b,d,e,c){a=Ext.Function.bind(a,d,e,c);if(b>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else {a()}},b)}a();return 0},interval:function(a,c,d,e,b){a=Ext.Function.bind(a,d,e,b);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else {a()}},c)},createSequence:function(a,b,c){if(!b){return a}else {return function(){var d=a.apply(this,arguments);b.apply(c||this,arguments);return d}}},createBuffered:function(b,c,d,e){var a;return function(){var f=e||Array.prototype.slice.call(arguments,0),g=d||this;if(a){clearTimeout(a)}a=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(b,g,f)}else {b.apply(g,f)}},c)}},createAnimationFrame:function(f,d,e,c){var b;c=c||3;return function(){var g=e||Array.prototype.slice.call(arguments,0);d=d||this;if(c===3&&b){a.cancelAnimationFrame(b)}if(c&1||!b){b=a.requestAnimationFrame(function(){b=null;f.apply(d,g)})}}},requestAnimationFrame:function(i,d,h){var a=++m,b=Array.prototype.slice.call(arguments,0);b[3]=a;e[a]=1;c.push(b);if(!f){f=k(Ext.elevateFunction?j:g)}return a},cancelAnimationFrame:function(a){delete e[a]},createThrottled:function(h,f,a){var e=0,d,c,b,g=function(){if(Ext.elevateFunction){Ext.elevateFunction(h,a,c)}else {h.apply(a,c)}e=Ext.now();b=null};return function(){if(!a){a=this}d=Ext.now()-e;c=arguments;if(d>=f){clearTimeout(b);g()}else {if(!b){b=Ext.defer(g,f-d)}}}},createBarrier:function(a,c,b){return function(){if(!--a){c.apply(b,arguments)}}},interceptBefore:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){var f=e.apply(d||this,arguments);c.apply(this,arguments);return f}},interceptAfter:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){c.apply(this,arguments);return e.apply(d||this,arguments)}},makeCallback:function(b,a){return function(){return a[b].apply(a,arguments)}},memoize:function(e,c,a){var b={},d=a&&Ext.isFunction(a);return function(g){var f=d?a.apply(c,arguments):g;if(!(f in b)){b[f]=e.apply(c,arguments)}return b[f]}}};Ext.asap=h?function(b,d,c){if(d!=null||c!=null){b=a.bind(b,d,c)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else {b()}})}:function(b,d,c){if(d!=null||c!=null){b=a.bind(b,d,c)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else {b()}},0,!0)},Ext.asapCancel=h?function(a){clearImmediate(a)}:function(a){clearTimeout(a)};Ext.defer=a.defer;Ext.interval=a.interval;Ext.pass=a.pass;Ext.bind=a.bind;Ext.deferCallback=a.requestAnimationFrame;return a}();Ext.Number=new function(){var b=this,d=(0.9).toFixed()!=='1',c=Math,a={count:!1,inclusive:!1,wrap:!0};Ext.apply(b,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:!0},a),INCLUSIVE:Ext.applyIf({inclusive:!0},a),NOWRAP:Ext.applyIf({wrap:!1},a)},clipIndices:function(d,c,f){f=f||a;var h=0,i=f.wrap,g,b,e;c=c||[];for(e=0;e<2;++e){g=b;b=c[e];if(b==null){b=h}else {if(e&&f.count){b+=g;b=b>d?d:b}else {if(i){b=b<0?d+b:b}if(e&&f.inclusive){++b}b=b<0?0:b>d?d:b}}h=d}c[0]=g;c[1]=b<g?g:b;return c},constrain:function(c,b,a){var d=parseFloat(c);if(b===null){b=c}if(a===null){a=c}return d<b?b:d>a?a:d},snap:function(a,c,e,f){var d;if(a===undefined||a<e){return e||0}if(c){d=a%c;if(d!==0){a-=d;if(d*2>=c){a+=c}else {if(d*2<-c){a-=c}}}}return b.constrain(a,e,f)},snapInRange:function(a,d,c,e){var f;c=c||0;if(a===undefined||a<c){return c}if(d&&(f=(a-c)%d)){a-=f;f*=2;if(f>=d){a+=d}}if(e!==undefined){if(a>(e=b.snapInRange(e,d,c))){a=e}}return a},sign:function(a){a=+a;if(a===0||isNaN(a)){return a}return a>0?1:-1},toFixed:d?function(d,a){a=a||0;var b=c.pow(10,a);return (c.round(d*b)/b).toFixed(a)}:function(b,a){return b.toFixed(a)},from:function(a,b){if(isFinite(a)){a=parseFloat(a)}return !isNaN(a)?a:b},randomInt:function(a,b){return c.floor(c.random()*(b-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}});Ext.num=function(){return b.from.apply(this,arguments)}}();(function(){var b=function(){},d=/^\?/,f=/(\[):?([^\]]*)\]/g,e=/^([^\[]+)/,c=/\+/g,a=Ext.Object={chain:Object.create||function(a){b.prototype=a;var c=new b();b.prototype=null;return c},clear:function(a){for(var b in a){delete a[b]}return a},freeze:Object.freeze?function(b,c){if(b&&typeof b==='object'&&!Object.isFrozen(b)){Object.freeze(b);if(c){for(var d in b){a.freeze(b[d],c)}}}return b}:Ext.identityFn,toQueryObjects:function(e,c,f){var g=a.toQueryObjects,d=[],b,h;if(Ext.isArray(c)){for(b=0,h=c.length;b<h;b++){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}else {if(Ext.isObject(c)){for(b in c){if(c.hasOwnProperty(b)){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}}else {d.push({name:e,value:c})}}return d},toQueryString:function(g,j){var c=[],h=[],d,e,i,f,b;for(d in g){if(g.hasOwnProperty(d)){c=c.concat(a.toQueryObjects(d,g[d],j))}}for(e=0,i=c.length;e<i;e++){f=c[e];b=f.value;if(Ext.isEmpty(b)){b=''}else {if(Ext.isDate(b)){b=Ext.Date.toString(b)}}h.push(encodeURIComponent(f.name)+'='+encodeURIComponent(String(b)))}return h.join('&')},fromQueryString:function(u,v){var s=u.replace(d,'').split('&'),i={},j,o,a,g,n,t,q,h,l,m,r,k,b,p;for(n=0,t=s.length;n<t;n++){q=s[n];if(q.length>0){o=q.split('=');a=o[0];a=a.replace(c,'%20');a=decodeURIComponent(a);g=o[1];if(g!==undefined){g=g.replace(c,'%20');g=decodeURIComponent(g)}else {g=''}if(!v){if(i.hasOwnProperty(a)){if(!Ext.isArray(i[a])){i[a]=[i[a]]}i[a].push(g)}else {i[a]=g}}else {m=a.match(f);r=a.match(e);a=r[0];k=[];if(m===null){i[a]=g;continue}for(h=0,l=m.length;h<l;h++){b=m[h];b=b.length===2?'':b.substring(1,b.length-1);k.push(b)}k.unshift(a);j=i;for(h=0,l=k.length;h<l;h++){b=k[h];if(h===l-1){if(Ext.isArray(j)&&b===''){j.push(g)}else {j[b]=g}}else {if(j[b]===undefined||typeof j[b]==='string'){p=k[h+1];j[b]=Ext.isNumeric(p)||p===''?[]:{}}j=j[b]}}}}}return i},each:function(a,f,c){var d=Ext.enumerables,e,b;if(a){c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,b,a[b],a)===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,b,a[b],a)===!1){return}}}}}},eachValue:function(a,f,c){var d=Ext.enumerables,e,b;c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,a[b])===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,a[b])===!1){return}}}}},merge:function(d){var g=1,j=arguments.length,i=a.merge,h=Ext.clone,f,c,b,e;for(;g<j;g++){f=arguments[g];for(c in f){b=f[c];if(b&&b.constructor===Object){e=d[c];if(e&&e.constructor===Object){i(e,b)}else {d[c]=h(b)}}else {d[c]=b}}}return d},mergeIf:function(c){var e=1,g=arguments.length,f=Ext.clone,d,b,a;for(;e<g;e++){d=arguments[e];for(b in d){if(!(b in c)){a=d[b];if(a&&a.constructor===Object){c[b]=f(a)}else {c[b]=a}}}}return c},getAllKeys:function(c){var b=[],a;for(a in c){b.push(a)}return b},getKey:function(b,c){for(var a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return null},getValues:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(b[a])}}return c},getKeys:typeof Object.keys=='function'?function(a){if(!a){return []}return Object.keys(a)}:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(a)}}return c},getSize:function(b){var c=0,a;for(a in b){if(b.hasOwnProperty(a)){c++}}return c},isEmpty:function(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0},equals:function(){var a=function(b,c){var a;for(a in b){if(b.hasOwnProperty(a)){if(b[a]!==c[a]){return !1}}}return !0};return function(b,c){if(b===c){return !0}if(b&&c){return a(b,c)&&a(c,b)}else {if(!b&&!c){return b===c}else {return !1}}}}(),fork:function(c){var d,e,b;if(c&&c.constructor===Object){d=a.chain(c);for(e in c){b=c[e];if(b){if(b.constructor===Object){d[e]=a.fork(b)}else {if(b instanceof Array){d[e]=Ext.Array.clone(b)}}}}}else {d=c}return d},defineProperty:'defineProperty' in Object?Object.defineProperty:function(b,c,a){if(!Object.prototype.__defineGetter__){return}if(a.get){b.__defineGetter__(c,a.get)}if(a.set){b.__defineSetter__(c,a.set)}},classify:function(c){var h=c,e=[],f={},g=function(){var b=0,d=e.length,a;for(;b<d;b++){a=e[b];this[a]=new f[a]()}},b,d;for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d&&d.constructor===Object){e.push(b);f[b]=a.classify(d)}}}g.prototype=h;return g}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf})();Ext.apply(Ext,{_namedScopes:{'this':{isThis:1},controller:{isController:1},self:{isSelf:1},'self.controller':{isSelf:1,isController:1}},escapeId:function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,e=/([\W]{1})/g,a=/^(\d)/g,d=function(b,a){return '\\'+a},b=function(b,a){return '\\00'+a.charCodeAt(0).toString(16)+' '};return function(f){return c.test(f)?f:f.replace(e,d).replace(a,b)}}(),callback:function(b,a,d,h,c,g){if(!b){return}var f=a in Ext._namedScopes;if(b.charAt){if((!a||f)&&c){a=c.resolveListenerScope(f?a:g)}b=a[b]}else {if(f){a=g||c}else {if(!a){a=c}}}var e;if(b&&Ext.isFunction(b)){a=a||Ext.global;if(h){Ext.defer(b,h,a,d)}else {if(Ext.elevateFunction){e=Ext.elevateFunction(b,a,d)}else {if(d){e=b.apply(a,d)}else {e=b.call(a)}}}}return e},coerce:function(a,e){var d=Ext.typeOf(a),c=Ext.typeOf(e),b=typeof a==='string';if(d!==c){switch(c){case 'string':return String(a);case 'number':return Number(a);case 'boolean':return b&&(!a||a==='false')?!1:Boolean(a);case 'null':return b&&(!a||a==='null')?null:a;case 'undefined':return b&&(!a||a==='undefined')?undefined:a;case 'date':return b&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a));}}return a},copyTo:function(e,d,a,f){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,c=0,g=a?a.length:0;c<g;c++){b=a[c];if(f||d.hasOwnProperty(b)){e[b]=d[b]}}return e},copy:function(e,c,a,f){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,g=a?a.length:0;d<g;d++){b=a[d];if(c.hasOwnProperty(b)||f&&b in c){e[b]=c[b]}}return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(c,e,a){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,f=a?a.length:0;d<f;d++){b=a[d];if(c[b]===undefined){c[b]=e[b]}}return c},copyIf:function(c,e,a){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,f=a?a.length:0;d<f;d++){b=a[d];if(!(b in c)&&b in e){c[b]=e[b]}}return c},extend:function(){var a=Object.prototype.constructor,b=function(b){for(var a in b){if(!b.hasOwnProperty(a)){continue}this[a]=b[a]}};return function(c,d,g){if(Ext.isObject(d)){g=d;d=c;c=g.constructor!==a?g.constructor:function(){d.apply(this,arguments)}}var h=function(){},e,f=d.prototype;h.prototype=f;e=c.prototype=new h();e.constructor=c;c.superclass=f;if(f.constructor===a){f.constructor=d}c.override=function(a){Ext.override(c,a)};e.override=b;e.proto=e;c.override(g);c.extend=function(a){return Ext.extend(c,a)};return c}}(),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else {Ext.Object.each.call(Ext.Object,a,c,b)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(b){var c=b,a;if(b&&b.charAt(0)==='<'){a=Ext._resourcePoolRe.exec(b);if(a){c=Ext.getResourcePath(a[3],a[1],a[2])}}return c},urlEncode:function(){var a=Ext.Array.from(arguments),b='';if(Ext.isString(a[1])){b=a[1]+'&';a[1]=!1}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(d){var b=Ext._scrollbarSize;if(d||!b){var c=document.body,a=document.createElement('div');a.style.width=a.style.height='100px';a.style.overflow='scroll';a.style.position='absolute';c.appendChild(a);Ext._scrollbarSize=b={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight};c.removeChild(a)}return b},typeOf:function(){var a=/\S/,d=Object.prototype.toString,c={number:1,string:1,'boolean':1,'undefined':1},b={'[object Array]':'array','[object Date]':'date','[object Boolean]':'boolean','[object Number]':'number','[object RegExp]':'regexp'};return function(e){if(e===null){return 'null'}var f=typeof e,g,h;if(c[f]){return f}g=b[h=d.call(e)];if(g){return g}if(f==='function'){return 'function'}if(f==='object'){if(e.nodeType!==undefined){if(e.nodeType===3){return a.test(e.nodeValue)?'textnode':'whitespace'}else {return 'element'}}return 'object'}return h}}(),factory:function(a,f,b,d){var e=Ext.ClassManager,c;if(!a||a.isInstance){if(b&&b!==a){b.destroy()}return a}if(d){if(typeof a==='string'){return e.instantiateByAlias(d+'.'+a)}else {if(Ext.isObject(a)&&'type' in a){return e.instantiateByAlias(d+'.'+a.type,a)}}}if(a===!0){return b||Ext.create(f)}if('xtype' in a){c=e.instantiateByAlias('widget.'+a.xtype,a)}else {if('xclass' in a){c=Ext.create(a.xclass,a)}}if(c){if(b){b.destroy()}return c}if(b){return b.setConfig(a)}return Ext.create(f,a)},log:function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}()});(function(){var b=[''],c=/([^\d\.])/,f=/[^\d]/g,g=/[\-+]/g,h=/\s/g,e=/_/g,d={classic:1,modern:1},a;Ext.Version=a=function(k,p){var b=this,n=b.padModes,o,m,d,h,j,l,i;if(k.isVersion){k=k.version}b.version=i=String(k).toLowerCase().replace(e,'.').replace(g,'');o=i.charAt(0);if(o in n){i=i.substring(1);d=n[o]}else {d=p?n[p]:0}b.pad=d;l=i.search(c);b.shortVersion=i;if(l!==-1){b.release=j=i.substr(l,k.length);b.shortVersion=i.substr(0,l);j=a.releaseValueMap[j]||j}b.releaseValue=j||d;b.shortVersion=b.shortVersion.replace(f,'');b.parts=h=i.split('.');for(m=h.length;m--;){h[m]=parseInt(h[m],10)}if(d===Infinity){h.push(d)}b.major=h[0]||d;b.minor=h[1]||d;b.patch=h[2]||d;b.build=h[3]||d;return b};a.prototype={isVersion:!0,padModes:{'~':NaN,'^':Infinity},release:'',compareTo:function(f){var g=this,m=g.pad,j=g.parts,h=j.length,e=f.isVersion?f:new a(f),n=e.pad,k=e.parts,i=k.length,l=Math.max(h,i),b,c,d;for(b=0;b<l;b++){c=b<h?j[b]:m;d=b<i?k[b]:n;if(c<d){return -1}if(c>d){return 1}}c=g.releaseValue;d=e.releaseValue;if(c<d){return -1}if(c>d){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return this.compareTo(a)>0},isGreaterThanOrEqual:function(a){return this.compareTo(a)>=0},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return this.compareTo(a)===0},match:function(a){a=String(a);return this.version.substr(0,a.length)===a},toArray:function(){var a=this;return [a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return this.compareTo(a)>0},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return this.compareTo(a)>=0},ltEq:function(a){return this.compareTo(a)<=0}};Ext.apply(a,{aliases:{from:{extjs:'ext',core:'core',touch:'modern'},to:{ext:['extjs'],'core':['core'],modern:['touch']}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,'#':-2,p:-1,pl:-1},getComponentValue:function(a){return !a?0:isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10)},compare:function(b,c){var d=b.isVersion?b:new a(b);return d.compareTo(c)},set:function(g,f,c){var b=a.aliases.to[f],d=c.isVersion?c:new a(c),e;g[f]=d;if(b){for(e=b.length;e-->0;){g[b[e]]=d}}return d}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(b){var c=Ext.compatVersions,d;if(!b){d=c.ext||c.touch||c.core}else {d=c[a.aliases.from[b]||b]}return d||Ext.getVersion(b)},setCompatVersion:function(b,c){a.set(Ext.compatVersions,b,c)},setVersion:function(b,c){if(b in d){Ext.toolkit=b}Ext.lastRegisteredVersion=a.set(Ext.versions,b,c);return this},getVersion:function(c){var b=Ext.versions;if(!c){return b.ext||b.touch||b.core}return b[a.aliases.from[c]||c]},checkVersion:function(o,j){var p=Ext.isArray(o),s=a.aliases.from,q=p?o:b,t=q.length,n=Ext.versions,r=n.ext||n.touch,l,c,f,i,g,m,d,e,k;if(!p){b[0]=o}for(l=0;l<t;++l){if(!Ext.isString(d=q[l])){f=Ext.checkVersion(d.and||d.or,!d.or);if(d.not){f=!f}}else {if(d.indexOf(' ')>=0){d=d.replace(h,'')}c=d.indexOf('@');if(c<0){e=d;k=r}else {m=d.substring(0,c);if(!(k=n[s[m]||m])){if(j){return !1}continue}e=d.substring(c+1)}c=e.indexOf('-');if(c<0){if(e.charAt(c=e.length-1)==='+'){i=e.substring(0,c);g=null}else {i=g=e}}else {if(c>0){i=e.substring(0,c);g=e.substring(c+1)}else {i=null;g=e.substring(c+1)}}f=!0;if(i){i=new a(i,'~');f=i.ltEq(k)}if(f&&g){g=new a(g,'~');f=g.gtEq(k)}}if(f){if(!j){return !0}}else {if(j){return !1}}}return !!j},deprecate:function(b,e,c,d){if(a.compare(Ext.getVersion(b),e)<1){c.call(d)}}})})();(function(c){var d=c&&c.packages||{},b=c&&c.compatibility,a,e;for(a in d){e=d[a];Ext.setVersion(a,e.version)}if(b){if(Ext.isString(b)){Ext.setCompatVersion('core',b)}else {for(a in b){Ext.setCompatVersion(a,b[a])}}}if(!d.ext&&!d.touch){Ext.setVersion('ext','6.0.1.250');Ext.setVersion('core','6.0.1.250')}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:'_'+b,initializing:'is'+a+'Initializing',apply:'apply'+a,update:'update'+a,get:'get'+a,set:'set'+a,initGet:'initGet'+a,changeEvent:b.toLowerCase()+'change'};c.root=c};Ext.Config.map={};Ext.Config.get=function(a){var b=Ext.Config.map,c=b[a]||(b[a]=new Ext.Config(a));return c};Ext.Config.prototype={self:Ext.Config,isConfig:!0,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(b,d,f,e){var a,c;if(!d){a=b}else {if(!b){a=d}else {a=Ext.Object.chain(d);for(c in b){if(!e||!(c in a)){a[c]=b[c]}}}}return a},mergeSets:function(a,f,e){var b=f?Ext.Object.chain(f):{},c,d;if(a instanceof Array){for(c=a.length;c--;){d=a[c];if(!e||!(d in b)){b[d]=!0}}}else {if(a){if(a.constructor===Object){for(c in a){d=a[c];if(!e||!(c in b)){b[c]=d}}}else {if(!e||!(a in b)){b[a]=!0}}}}return b},makeGetter:function(){var b=this.name,a=this.names.internal;return function(){var c=this.$configPrefixed?a:b;return this[c]}},makeInitGetter:function(){var e=this.name,a=this.names,d=a.set,c=a.get,b=a.initializing;return function(){var a=this;a[b]=!0;delete a[c];a[d](a.config[e]);delete a[b];return a[c].apply(a,arguments)}},makeSetter:function(){var g=this.name,a=this.names,e=a.internal,f=a.get,d=a.apply,c=a.update,b;b=function(b){var a=this,h=a.$configPrefixed?e:g,i=a[h];delete a[f];if(!a[d]||(b=a[d](b,i))!==undefined){if(b!==(i=a[h])){a[h]=b;if(a[c]){a[c](b,i)}}}return a};b.$isDefault=!0;return b},makeEventedSetter:function(){var i=this.name,a=this.names,f=a.internal,h=a.get,d=a.apply,b=a.update,e=a.changeEvent,g=function(a,c,e,d){a[d]=c;if(a[b]){a[b](c,e)}},c;c=function(c){var a=this,k=a.$configPrefixed?f:i,j=a[k];delete a[h];if(!a[d]||(c=a[d](c,j))!==undefined){if(c!==(j=a[k])){if(a.isConfiguring){a[k]=c;if(a[b]){a[b](c,j)}}else {a.fireEventedAction(e,[a,c,j],g,a,[a,c,j,k])}}}return a};c.$isDefault=!0;return c}};(function(){var c=Ext.Config,b=c.map,a=Ext.Object;Ext.Configurator=function(d){var b=this,e=d.prototype,c=d.superclass?d.superclass.self.$config:null;b.cls=d;b.superCfg=c;if(c){b.configs=a.chain(c.configs);b.cachedConfigs=a.chain(c.cachedConfigs);b.initMap=a.chain(c.initMap);b.values=a.chain(c.values);b.needsFork=c.needsFork}else {b.configs={};b.cachedConfigs={};b.initMap={};b.values={}}e.config=e.defaultConfig=b.values;d.$config=b};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(t,l){var i=this,n=i.cls,k=i.configs,v=i.cachedConfigs,p=i.initMap,g=n.prototype,r=l&&l.$config.configs,u=i.values,m,f,s,h,b,j,e,q,o,d;for(e in t){d=t[e];m=d&&d.constructor===Object;f=m&&'$value' in d?d:null;if(f){s=!!f.cached;d=f.$value;m=d&&d.constructor===Object}h=f&&f.merge;b=k[e];if(b){if(l){h=b.merge;if(!h){continue}f=null}else {h=h||b.merge}j=u[e];if(h){d=h.call(b,d,j,n,l)}else {if(m){if(j&&j.constructor===Object){d=a.merge({},j,d)}}}}else {if(r){b=r[e];f=null}else {b=c.get(e)}k[e]=b;if(b.cached||s){v[e]=!0}q=b.names;if(!g[o=q.get]){g[o]=b.getter||b.getGetter()}if(!g[o=q.set]){g[o]=f&&f.evented?b.eventedSetter||b.getEventedSetter():b.setter||b.getSetter()}}if(f){if(b.owner!==n){k[e]=b=Ext.Object.chain(b);b.owner=n}Ext.apply(b,f);delete b.$value}if(!i.needsFork&&d&&(d.constructor===Object||d instanceof Array)){i.needsFork=!0}if(d!==null){p[e]=!0}else {if(g.$configPrefixed){g[k[e].names.internal]=null}else {g[k[e].name]=null}if(e in p){p[e]=!1}}u[e]=d}},configure:function(c,h){var k=this,u=k.configs,x=k.initMap,q=k.initListMap,o=k.initList,j=k.cls.prototype,i=k.values,r=0,v=!o,n,b,m,w,d,p,l,f,e,g,t,s,y;i=k.needsFork?a.fork(i):a.chain(i);c.isConfiguring=!0;if(v){k.initList=o=[];k.initListMap=q={};c.isFirstInstance=!0;for(e in x){w=x[e];b=u[e];t=b.cached;if(w){f=b.names;g=i[e];if(!j[f.set].$isDefault||j[f.apply]||j[f.update]||typeof g==='object'){if(t){(n||(n=[])).push(b)}else {o.push(b);q[e]=!0}c[f.get]=b.initGetter||b.getInitGetter()}else {j[b.getInternalName(j)]=g}}else {if(t){j[b.getInternalName(j)]=undefined}}}}l=n&&n.length;if(l){for(d=0;d<l;++d){p=n[d].getInternalName(j);c[p]=null}for(d=0;d<l;++d){f=(b=n[d]).names;m=f.get;if(c.hasOwnProperty(m)){c[f.set](i[b.name]);delete c[m]}}for(d=0;d<l;++d){p=n[d].getInternalName(j);j[p]=c[p];delete c[p]}}if(h&&h.platformConfig){h=k.resolvePlatformConfig(c,h)}if(v){if(c.afterCachedConfig&&!c.afterCachedConfig.$nullFn){c.afterCachedConfig(h)}}c.config=i;for(d=0,l=o.length;d<l;++d){b=o[d];c[b.names.get]=b.initGetter||b.getInitGetter()}if(c.transformInstanceConfig){h=c.transformInstanceConfig(h)}if(h){for(e in h){g=h[e];b=u[e];if(!b){c[e]=g}else {if(!b.lazy){++r}if(!q[e]){c[b.names.get]=b.initGetter||b.getInitGetter()}if(b.merge){g=b.merge(g,i[e],c)}else {if(g&&g.constructor===Object){s=i[e];if(s&&s.constructor===Object){g=a.merge(i[e],g)}else {g=Ext.clone(g)}}}}i[e]=g}}if(c.beforeInitConfig&&!c.beforeInitConfig.$nullFn){if(c.beforeInitConfig(h)===!1){return}}if(h){for(e in h){if(!r){break}b=u[e];if(b&&!b.lazy){--r;f=b.names;m=f.get;if(c.hasOwnProperty(m)){c[f.set](i[e]);delete c[f.get]}}}}for(d=0,l=o.length;d<l;++d){b=o[d];f=b.names;m=f.get;if(!b.lazy&&c.hasOwnProperty(m)){c[f.set](i[b.name]);delete c[m]}}delete c.isConfiguring},getCurrentConfig:function(c){var e=c.defaultConfig,d={},a;for(a in e){d[a]=c[b[a].names.get]()}return d},merge:function(g,c,f){var h=this.configs,b,a,d,e;for(b in f){a=f[b];e=h[b];if(e){if(e.merge){a=e.merge(a,c[b],g)}else {if(a&&a.constructor===Object){d=c[b];if(d&&d.constructor===Object){a=Ext.Object.merge(d,a)}else {a=Ext.clone(a)}}}}c[b]=a}return c},reconfigure:function(c,f,g){var n=c.config,i=[],p=c.$configStrict&&!(g&&g.strict===!1),l=this.configs,o=g&&g.defaults,d,j,h,m,a,e,k;for(a in f){if(o&&c.hasOwnProperty(a)){continue}n[a]=f[a];d=l[a];if(d){c[d.names.get]=d.initGetter||d.getInitGetter()}else {k=c.self.prototype[a];if(p){if(typeof k==='function'&&!k.$nullFn){continue}}}i.push(a)}for(h=0,m=i.length;h<m;h++){a=i[h];d=l[a];if(d){e=d.names;j=e.get;if(c.hasOwnProperty(j)){c[e.set](f[a]);delete c[j]}}else {d=b[a]||Ext.Config.get(a);e=d.names;if(c[e.set]){c[e.set](f[a])}else {c[a]=f[a]}}}},resolvePlatformConfig:function(g,e){var f=e&&e.platformConfig,b=e,c,a,d;if(f){a=Ext.getPlatformConfigKeys(f);d=a.length;if(d){b=Ext.merge({},b);for(c=0,d=a.length;c<d;++c){this.merge(g,b,f[a[c]])}}}return b}}})();Ext.Base=function(j){var c=[],d,g=[],k=function(d,f){var b=this,a,e,c;if(d){e=Ext.Config.map[d];c=e.names.get;if(f&&b.hasOwnProperty(c)){a=b.config[d]}else {a=b[c]()}}else {a=b.getCurrentConfig()}return a},i=function(a){return function(){return this[a].apply(this,arguments)}},l=Ext.Version,h=/^\d/,f={},e={},a=function(){},b=a.prototype;Ext.apply(a,{$className:'Ext.Base',$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(o){var s=this,n=[],t=Ext.getCompatVersion(o.name),c,g,r,u,e,k,p,f,m,b,v,a,q,d;for(g in o){if(h.test(g)){d=new Ext.Version(g);d.deprecations=o[g];n.push(d)}}n.sort(l.compare);for(r=n.length;r--;){c=(d=n[r]).deprecations;e=s.prototype;q=c.statics;k=t&&t.lt(d);if(!k){break}while(c){m=c.methods;if(m){for(b in m){a=m[b];f=null;if(!a){}else {if(Ext.isString(a)){if(k){f=i(a)}}else {u='';if(a.message||a.fn){a=a.fn}p=e.hasOwnProperty(b)&&e[b];if(k&&a){a.$owner=s;a.$name=b;if(p){a.$previous=p}f=a}}}if(f){e[b]=f}}}c=q;q=null;e=s}}},extend:function(e){var c=this,h=e.prototype,d,a,i,g,f;d=c.prototype=Ext.Object.chain(h);d.self=c;c.superclass=d.superclass=h;if(!e.$isClass){for(a in b){if(a in d){d[a]=b[a]}}}f=h.$inheritableStatics;if(f){for(a=0,i=f.length;a<i;a++){g=f[a];if(!c.hasOwnProperty(g)){c[g]=e[g]}}}if(e.$onExtended){c.$onExtended=e.$onExtended.slice()}c.getConfigurator()},$onExtended:[],triggerExtended:function(){var c=this.$onExtended,d=c.length,a,b;if(d>0){for(a=0;a<d;a++){b=c[a];b.fn.apply(b.scope||this,arguments)}}},onExtended:function(b,a){this.$onExtended.push({fn:b,scope:a});return this},addStatics:function(a){this.addMembers(a,!0);return this},addInheritableStatics:function(e){var c,b,d=this.prototype,a,f;c=d.$inheritableStatics;b=d.$hasInheritableStatics;if(!c){c=d.$inheritableStatics=[];b=d.$hasInheritableStatics={}}for(a in e){if(e.hasOwnProperty(a)){f=e[a];this[a]=f;if(!b[a]){b[a]=!0;c.push(a)}}}return this},addMembers:function(d,f,q){var e=this,m=Ext.Function.clone,c=f?e:e.prototype,n=!f&&c.defaultConfig,l=Ext.enumerables,g=d.privates,h,i,p,a,b,o,k;if(g){delete d.privates;if(!f){k=g.statics;delete g.statics}e.addMembers(g,f,o);if(k){e.addMembers(k,!0,o)}}for(b in d){if(d.hasOwnProperty(b)){a=d[b];if(typeof a==='function'&&!a.$isClass&&!a.$nullFn){if(a.$owner){a=m(a)}if(c.hasOwnProperty(b)){a.$previous=c[b]}a.$owner=e;a.$name=b}else {if(n&&b in n&&!c.config.hasOwnProperty(b)){(h||(h={}))[b]=a;continue}}c[b]=a}}if(h){e.addConfig(h)}if(l){for(i=0,p=l.length;i<p;++i){if(d.hasOwnProperty(b=l[i])){a=d[b];if(a&&!a.$nullFn){if(a.$owner){a=m(a)}a.$owner=e;a.$name=b;if(c.hasOwnProperty(b)){a.$previous=c[b]}}c[b]=a}}}return this},addMember:function(a,b){f[a]=b;this.addMembers(f);delete f[a];return this},borrow:function(f,a){var g=f.prototype,d={},b,e,c;a=Ext.Array.from(a);for(b=0,e=a.length;b<e;b++){c=a[b];d[c]=g[c]}return this.addMembers(d)},override:function(a){var b=this,d=a.statics,c=a.inheritableStatics,e=a.config,g=a.mixins,f=a.cachedConfig;if(d||c||e){a=Ext.apply({},a)}if(d){b.addMembers(d,!0);delete a.statics}if(c){b.addInheritableStatics(c);delete a.inheritableStatics}if(e){b.addConfig(e);delete a.config}if(f){b.addCachedConfig(f);delete a.cachedConfig}delete a.mixins;b.addMembers(a);if(g){b.mixin(g)}return b},callParent:function(b){var a;return (a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},callSuper:function(b){var a;return (a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},mixin:function(m,g){var c=this,a,b,e,i,d,k,h,l,f;if(typeof m!=='string'){f=m;if(f instanceof Array){for(d=0,k=f.length;d<k;d++){a=f[d];c.mixin(a.prototype.mixinId||a.$className,a)}}else {for(var n in f){c.mixin(n,f[n])}}return}a=g.prototype;b=c.prototype;if(a.onClassMixedIn){a.onClassMixedIn.call(g,c)}if(!b.hasOwnProperty('mixins')){if('mixins' in b){b.mixins=Ext.Object.chain(b.mixins)}else {b.mixins={}}}for(e in a){l=a[e];if(e==='mixins'){Ext.applyIf(b.mixins,l)}else {if(!(e==='mixinId'||e==='config')&&b[e]===undefined){b[e]=l}}}i=a.$inheritableStatics;if(i){for(d=0,k=i.length;d<k;d++){h=i[d];if(!c.hasOwnProperty(h)){c[h]=g[h]}}}if('config' in a){c.addConfig(a.config,g)}b.mixins[m]=a;if(a.afterClassMixedIn){a.afterClassMixedIn.call(g,c)}return c},addConfig:function(b,a){var c=this.$config||this.getConfigurator();c.add(b,a)},addCachedConfig:function(c,d){var b={},a;for(a in c){b[a]={cached:!0,$value:c[a]}}this.addConfig(b,d)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:j(function(a,b){e[a]=function(){return this[b].apply(this,arguments)};this.override(e);delete e[a]})});for(d in a){if(a.hasOwnProperty(d)){g.push(d)}}a.$staticMembers=g;a.getConfigurator();a.addMembers({$className:'Ext.Base',isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,statics:function(){var a=this.statics.caller,b=this.self;if(!a){return b}return a.$owner},callParent:function(d){var a,b=(a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,d||c)},callSuper:function(d){var a,b=(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,d||c)},self:a,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(b){var a=this,c=a.getConfigurator();a.initConfig=Ext.emptyFn;a.initialConfig=b||{};c.configure(a,b);return a},beforeInitConfig:Ext.emptyFn,getConfig:k,setConfig:function(b,e,d){var c=this,a;if(b){if(typeof b==='string'){a={};a[b]=e}else {a=b}c.getConfigurator().reconfigure(c,a,d)}return c},getCurrentConfig:function(){var a=this.getConfigurator();return a.getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(b){var a=this.config;if(!b){return a}return a[b]},$links:null,link:function(c,b){var a=this,d=a.$links||(a.$links={});d[c]=!0;a[c]=b;return b},unlink:function(e){var d=this,b,f,c,a;for(b=0,f=e.length;b<f;b++){c=e[b];a=d[c];if(a){if(a.isInstance&&!a.destroyed){a.destroy()}else {if(a.parentNode&&'nodeType' in a){a.parentNode.removeChild(a)}}}d[c]=null}return d},destroy:function(){var a=this,b=a.$links;a.initialConfig=a.config=null;a.destroy=Ext.emptyFn;a.isDestroyed=a.destroyed=!0;if(b){a.$links=null;a.unlink(Ext.Object.getKeys(b))}}});b.callOverridden=b.callParent;return a}(Ext.Function.flexSetter);(function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(e){var d=this,c;if(e){Ext.apply(d,e)}d.head=c={key:null,value:null};d.map={};c.next=c.prev=c};b.prototype=a={maxSize:100,count:0,clear:function(){var e=this,d=e.head,c=d.next;d.next=d.prev=d;if(!e.evict.$nullFn){for(;c!==d;c=c.next){e.evict(c.key,c.value)}}e.count=0},each:function(f,d){d=d||this;for(var e=this.head,c=e.next;c!==e;c=c.next){if(f.call(d,c.key,c.value)){break}}},get:function(e){var c=this,f=c.head,g=c.map,d=g[e];if(d){if(d.prev!==f){c.unlinkEntry(d);c.linkEntry(d)}}else {g[e]=d={key:e,value:c.miss.apply(c,arguments)};c.linkEntry(d);++c.count;while(c.count>c.maxSize){c.unlinkEntry(f.prev,!0);--c.count}}return d.value},evict:Ext.emptyFn,linkEntry:function(c){var d=this.head,e=d.next;c.next=e;c.prev=d;d.next=c;e.prev=c},unlinkEntry:function(c,f){var d=c.next,e=c.prev;e.next=d;d.prev=e;if(f){this.evict(c.key,c.value)}}};a.destroy=a.clear})();(function(){var a,d=Ext.Base,b=d.$staticMembers,c=function(a,b){return a.length-b.length||(a<b?-1:a>b?1:0)};function makeCtor(a){function constructor(){return this.constructor.apply(this,arguments)||null}return constructor}Ext.Class=a=function(b,c,d){if(typeof b!='function'){d=c;c=b;b=null}if(!c){c={}}b=a.create(b,c);a.process(b,c,d);return b};Ext.apply(a,{makeCtor:makeCtor,onBeforeCreated:function(a,c,b){a.addMembers(c);b.onCreated.call(a,a)},create:function(a,f){var e=b.length,c;if(!a){a=makeCtor()}while(e--){c=b[e];a[c]=d[c]}return a},process:function(l,f,k){var j=f.preprocessors||a.defaultPreprocessors,o=this.preprocessors,e={onBeforeCreated:this.onBeforeCreated},d=[],b,c,g,n,h,m,i;delete f.preprocessors;l._classHooks=e;for(g=0,n=j.length;g<n;g++){b=j[g];if(typeof b=='string'){b=o[b];c=b.properties;if(c===!0){d.push(b.fn)}else {if(c){for(h=0,m=c.length;h<m;h++){i=c[h];if(f.hasOwnProperty(i)){d.push(b.fn);break}}}}}else {d.push(b)}}e.onCreated=k?k:Ext.emptyFn;e.preprocessors=d;this.doProcess(l,f,e)},doProcess:function(f,g,b){var c=this,d=b.preprocessors,a=d.shift(),e=c.doProcess;for(;a;a=d.shift()){if(a.call(c,f,g,b,e)===!1){return}}b.onBeforeCreated.apply(c,arguments)},preprocessors:{},registerPreprocessor:function(a,e,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.preprocessors[a]={name:a,properties:b||!1,fn:e};this.setDefaultPreprocessorPosition(a,c,d);return this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){this.defaultPreprocessors=Ext.Array.from(a);return this},setDefaultPreprocessorPosition:function(d,a,e){var b=this.defaultPreprocessors,c;if(typeof a=='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,e);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPreprocessor('extend',function(b,c,i){var h=Ext.Base,g=h.prototype,f=c.extend,a,e,d;delete c.extend;if(f&&f!==Object){a=f}else {a=h}e=a.prototype;if(!a.$isClass){for(d in g){if(!e[d]){e[d]=g[d]}}}b.extend(a);b.triggerExtended.apply(b,arguments);if(c.onClassExtended){b.onExtended(c.onClassExtended,b);delete c.onClassExtended}},!0);a.registerPreprocessor('privates',function(d,e){var a=e.privates,c=a.statics,b=a.privacy||!0;delete e.privates;delete a.statics;d.addMembers(a,!1,b);if(c){d.addMembers(c,!0,b)}});a.registerPreprocessor('statics',function(b,a){b.addStatics(a.statics);delete a.statics});a.registerPreprocessor('inheritableStatics',function(b,a){b.addInheritableStatics(a.inheritableStatics);delete a.inheritableStatics});Ext.createRuleFn=function(a){return new Function('$c','with($c) { return ('+a+'); }')};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=c;Ext.getPlatformConfigKeys=function(e){var b=[],a,d;for(a in e){d=Ext.expressionCache.get(a);if(d(Ext.platformTags)){b.push(a)}}b.sort(c);return b};a.registerPreprocessor('platformConfig',function(n,g,o){var k=g.platformConfig,e=g.config,b,l,i,d,c,j,a,f,h,m;delete g.platformConfig;d=n.getConfigurator();l=d.configs;j=Ext.getPlatformConfigKeys(k);for(h=0,m=j.length;h<m;++h){i=k[j[h]];c=b=null;for(a in i){f=i[a];if(e&&a in e){(b||(b={}))[a]=f;(c||(c={}))[a]=e[a];delete e[a]}else {if(a in l){(b||(b={}))[a]=f}else {g[a]=f}}}if(c){d.add(c)}if(b){d.add(b)}}});a.registerPreprocessor('config',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addConfig(a.config);delete a.config});a.registerPreprocessor('cachedConfig',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addCachedConfig(a.cachedConfig);delete a.cachedConfig});a.registerPreprocessor('mixins',function(e,b,a){var d=b.mixins,c=a.onCreated;delete b.mixins;a.onCreated=function(){a.onCreated=c;e.mixin(d);return a.onCreated.apply(this,arguments)}});Ext.extend=function(d,c,b){if(arguments.length===2&&Ext.isObject(c)){b=c;c=d;d=null}var e;if(!c){throw new Error('[Ext.extend] Attempting to extend from a class which has not been loaded on the page.')}b.extend=c;b.preprocessors=['extend','statics','inheritableStatics','mixins','platformConfig','config'];if(d){e=new a(d,b);e.prototype.constructor=d}else {e=new a(b)}e.prototype.override=function(e){for(var a in e){if(e.hasOwnProperty(a)){this[a]=e[a]}}};return e}})();Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(a,c,b){return this.addMapping(a,c,this.aliasToName,this.nameToAliases,b)},addAlternate:function(b,a){return this.addMapping(b,a,this.alternateToName,this.nameToAlternates)},addMapping:function(h,m,k,j,n){var f=h.$className||h,c=f,l=this._array1,d,a,b,e,i,g;if(Ext.isString(f)){c={};c[f]=m}for(b in c){a=c[b];if(Ext.isString(a)){l[0]=a;a=l}i=a.length;g=j[b]||(j[b]=[]);for(e=0;e<i;++e){if(!(d=a[e])){continue}if(k[d]!==b){k[d]=b;g.push(d)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||''},getNameByAlternate:function(a){return this.alternateToName[a]||''},getNamesByExpression:function(k,e,r){var g=this,q=g.aliasToName,p=g.alternateToName,m=g.nameToAliases,o=g.nameToAlternates,i=r?e:{},l=[],n=Ext.isString(k)?[k]:k,t=n.length,s=g.wildcardRe,f,j,c,b,d,a,h;for(j=0;j<t;++j){if((f=n[j]).indexOf('*')<0){if(!(a=q[f])){if(!(a=p[f])){a=f}}if(!(a in i)&&!(e&&a in e)){i[a]=1;l.push(a)}}else {h=new RegExp('^'+f.replace(s,'(.*?)')+'$');for(a in m){if(!(a in i)&&!(e&&a in e)){if(!(b=h.test(a))){d=(c=m[a]).length;while(!b&&d-->0){b=h.test(c[d])}c=o[a];if(c&&!b){d=c.length;while(!b&&d-->0){b=h.test(c[d])}}}if(b){i[a]=1;l.push(a)}}}}}return l},getPath:function(a){var e=this,d=e.paths,b='',c;if(a in d){b=d[a]}else {c=e.getPrefix(a);if(c){a=a.substring(c.length+1);b=d[c];if(b){b+='/'}}b+=a.replace(e.dotRe,'/')+'.js'}return b},getPrefix:function(a){if(a in this.paths){return a}var d=this.getPrefixes(),e=d.length,b,c;while(e-->0){b=(c=d[e]).length;if(b<a.length&&a.charAt(b)==='.'&&c===a.substring(0,b)){return c}}return ''},getPrefixes:function(){var b=this,a=b.prefixes;if(!a){b.prefixes=a=b.names.slice(0);a.sort(b._compareNames)}return a},removeName:function(a){var c=this,j=c.aliasToName,i=c.alternateToName,h=c.nameToAliases,g=c.nameToAlternates,f=h[a],e=g[a],b,d;delete h[a];delete g[a];if(f){for(b=f.length;b--;){if(a===(d=f[b])){delete j[d]}}}if(e){for(b=e.length;b--;){if(a===(d=e[b])){delete i[d]}}}},resolveName:function(a){var c=this,b;if(!(a in c.nameToAliases)){if(!(b=c.aliasToName[a])){b=c.alternateToName[a]}}return b||a},select:function(b,f){var e=this,a={},d={excludes:a,exclude:function(){e.getNamesByExpression(arguments,a,!0);return this}},c;for(c in b){d[c]=e.selectMethod(a,b[c],f||b)}return d},selectMethod:function(a,c,b){var d=this;return function(f){var e=Ext.Array.slice(arguments,1);e.unshift(d.getNamesByExpression(f,a));return c.apply(b,e)}},setPath:Ext.Function.flexSetter(function(b,c){var a=this;a.paths[b]=c;a.names.push(b);a.prefixes=null;return a}),_compareNames:function(b,c){var a=b.length-c.length;if(!a){a=b<c?-1:1}return a}};Ext.ClassManager=function(n,e,o,g,r){var q=Ext.Class.makeCtor,i=[],b={Ext:{name:'Ext',value:Ext}},a=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(b){if(a.classes[b]||a.existCache[b]){return !0}if(!a.lookupName(b,!1)){return !1}a.triggerCreated(b);return !0},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,c){a.existCache[b]=c||1;a.classState[b]+=40;a.notify(b,a.createdListeners,a.nameCreatedListeners)},onCreated:function(d,c,b){a.addListener(d,c,b,a.createdListeners,a.nameCreatedListeners)},notify:function(k,c,m){var l=a.getAlternatesByName(k),f=[k],b,i,j,p,d,h;for(b=0,i=c.length;b<i;b++){d=c[b];d.fn.call(d.scope,k)}while(f){for(b=0,i=f.length;b<i;b++){h=f[b];c=m[h];if(c){for(j=0,p=c.length;j<p;j++){d=c[j];d.fn.call(d.scope,h)}delete m[h]}}f=l;l=null}},addListener:function(b,f,a,h,c){if(Ext.isArray(a)){b=Ext.Function.createBarrier(a.length,b,f);for(d=0;d<a.length;d++){this.addListener(b,null,a[d],h,c)}return}var d,i={fn:b,scope:f};if(a){if(this.isCreated(a)){b.call(f,a);return}if(!c[a]){c[a]=[]}c[a].push(i)}else {h.push(i)}},$namespaceCache:b,addRootNamespaces:function(c){for(var a in c){b[a]={name:a,value:c[a]}}},clearNamespaceCache:function(){i.length=0;for(var a in b){if(!b[a].value){delete b[a]}}},getNamespaceEntry:function(c){if(typeof c!=='string'){return c}var d=b[c],f;if(!d){f=c.lastIndexOf('.');if(f<0){d={name:c}}else {d={name:c.substring(f+1),parent:a.getNamespaceEntry(c.substring(0,f))}}b[c]=d}return d},lookupName:function(j,h){var k=a.getNamespaceEntry(j),c=Ext.global,d=0,b,f;for(b=k;b;b=b.parent){i[d++]=b}while(c&&d-->0){b=i[d];f=c;c=b.value||c[b.name];if(!c&&h){f[b.name]=c={}}}return c},setNamespace:function(f,d){var b=a.getNamespaceEntry(f),c=Ext.global;if(b.parent){c=a.lookupName(b.parent,!0)}c[b.name]=d;return d},setXType:function(i,d){var f=i.$className,k=f?i:a.get(f=i),b=k.prototype,j=b.xtypes,c=b.xtypesChain,h=b.xtypesMap;if(!b.hasOwnProperty('xtypes')){b.xtypes=j=[];b.xtypesChain=c=c?c.slice(0):[];b.xtypesMap=h=Ext.apply({},h)}a.addAlias(f,'widget.'+d,!0);j.push(d);c.push(d);h[d]=!0},set:function(b,d){var c=a.getName(d);a.classes[b]=a.setNamespace(b,d);if(c&&c!==b){a.addAlternate(c,b)}return a},get:function(b){return a.classes[b]||a.lookupName(b,!1)},addNameAliasMappings:function(b){a.addAlias(b)},addNameAlternateMappings:function(b){a.addAlternate(b)},getByAlias:function(b){return a.get(a.getNameByAlias(b))},getByConfig:function(c,d){var f=c.xclass,b;if(f){b=f}else {b=c.xtype;if(b){d='widget.'}else {b=c.type}b=a.getNameByAlias(d+b)}return a.get(b)},getName:function(a){return a&&a.$className||''},getClass:function(a){return a&&a.self||null},create:function(c,b,f){var d=q(c);if(typeof b==='function'){b=b(d)}b.$className=c;return new n(d,b,function(){var m=b.postprocessors||a.defaultPostprocessors,s=a.postprocessors,i=[],d,j,q,k,p,h,l;delete b.postprocessors;for(j=0,q=m.length;j<q;j++){d=m[j];if(typeof d==='string'){d=s[d];h=d.properties;if(h===!0){i.push(d.fn)}else {if(h){for(k=0,p=h.length;k<p;k++){l=h[k];if(b.hasOwnProperty(l)){i.push(d.fn);break}}}}}else {i.push(d)}}b.postprocessors=i;b.createdFn=f;a.processCreate(c,this,b)})},processCreate:function(a,b,d){var c=this,f=d.postprocessors.shift(),h=d.createdFn;if(!f){if(a){c.set(a,b)}delete b._classHooks;if(h){h.call(b,b)}if(a){c.triggerCreated(a)}return}if(f.call(c,a,b,d,c.processCreate)!==!1){c.processCreate(a,b,d)}},createOverride:function(h,c,m){var d=this,i=c.override,p=c.requires,q=c.uses,b=c.mixins,k,f=1,j,l=function(){var a,s,f,t,u;if(!j){s=p?p.slice(0):[];if(b){if(!(k=b instanceof Array)){for(t in b){if(Ext.isString(a=b[t])){s.push(a)}}}else {for(f=0,u=b.length;f<u;++f){if(Ext.isString(a=b[f])){s.push(a)}}}}j=!0;if(s.length){Ext.require(s,l);return}}if(k){for(f=0,u=b.length;f<u;++f){if(Ext.isString(a=b[f])){b[f]=Ext.ClassManager.get(a)}}}else {if(b){for(t in b){if(Ext.isString(a=b[t])){b[t]=Ext.ClassManager.get(a)}}}}a=d.get(i);delete c.override;delete c.compatibility;delete c.requires;delete c.uses;Ext.override(a,c);Ext.Loader.history.push(h);if(q){Ext['Loader'].addUsedClasses(q)}if(m){m.call(a,a)}};a.overrideMap[h]=!0;if('compatibility' in c&&Ext.isString(f=c.compatibility)){f=Ext.checkVersion(f)}if(f){d.onCreated(l,d,i)}d.triggerCreated(h,2);return d},instantiateByAlias:function(){var c=arguments[0],a=o.call(arguments),b=this.getNameByAlias(c);a[0]=b;return Ext.create.apply(Ext,a)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(b,a){a=g(a,!0);a.unshift(b);return Ext.create.apply(Ext,a)},getInstantiator:function(c){var f=this.instantiators,b,a,d;b=f[c];if(!b){a=c;d=[];for(a=0;a<c;a++){d.push('a['+a+']')}b=f[c]=new Function('c','a','return new c('+d.join(',')+')')}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,f,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.postprocessors[a]={name:a,properties:b||!1,fn:f};this.setDefaultPostprocessorPosition(a,c,d);return this},setDefaultPostprocessors:function(a){this.defaultPostprocessors=g(a);return this},setDefaultPostprocessorPosition:function(d,a,f){var b=this.defaultPostprocessors,c;if(typeof a==='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,f);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPostprocessor('alias',function(h,f,d){var b=Ext.Array.from(d.alias),a,c;for(a=0,c=b.length;a<c;a++){e=b[a];this.addAlias(f,e)}},['xtype','alias']);a.registerPostprocessor('singleton',function(b,c,a,d){if(a.singleton){d.call(this,b,new c(),a)}else {return !0}return !1});a.registerPostprocessor('alternateClassName',function(i,h,f){var a=f.alternateClassName,b,d,c;if(!(a instanceof Array)){a=[a]}for(b=0,d=a.length;b<d;b++){c=a[b];this.set(c,h)}});a.registerPostprocessor('debugHooks',function(d,a,c){var b=a.isInstance?a.self:a;delete b.prototype.debugHooks});a.registerPostprocessor('deprecated',function(d,a,c){var b=a.isInstance?a.self:a;b.addDeprecations(c.deprecated);delete b.prototype.deprecated});Ext.apply(Ext,{create:function(){var b=arguments[0],f=typeof b,c=o.call(arguments,1),d;if(f==='function'){d=b}else {if(f!=='string'&&c.length===0){c=[b];if(!(b=b.xclass)){b=c[0].xtype;if(b){b='widget.'+b}}}b=a.resolveName(b);d=a.get(b)}if(!d){Ext.syncRequire(b);d=a.get(b)}return a.getInstantiator(c.length)(d,c)},widget:function(i,b){var f=i,d,c,h;if(typeof f!=='string'){b=i;f=b.xtype;c=b.xclass}else {b=b||{}}if(b.isComponent){return b}if(!c){d='widget.'+f;c=a.getNameByAlias(d)}if(c){h=a.get(c)}if(!h){return Ext.create(c||d,b)}return new h(b)},createByAlias:e(a,'instantiateByAlias'),define:function(b,c,d){if(c.override){a.classState[b]=20;return a.createOverride.apply(a,arguments)}a.classState[b]=10;return a.create.apply(a,arguments)},undefine:function(b){var f=a.classes;delete f[b];delete a.existCache[b];delete a.classState[b];a.removeName(b);var c=a.getNamespaceEntry(b),d=c.parent?a.lookupName(c.parent,!1):Ext.global;if(d){try{delete d[c.name]}catch(t){d[c.name]=undefined}}},getClassName:e(a,'getName'),getDisplayName:function(a){if(a){if(a.displayName){return a.displayName}if(a.$name&&a.$class){return Ext.getClassName(a.$class)+'#'+a.$name}if(a.$className){return a.$className}}return 'Anonymous'},getClass:e(a,'getClass'),namespace:function(){var c=r,b;for(b=arguments.length;b-->0;){c=a.lookupName(arguments[b],!0)}return c}});Ext.addRootNamespaces=a.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;n.registerPreprocessor('className',function(b,a){if('$className' in a){b.$className=a.$className}},!0,'first');n.registerPreprocessor('alias',function(q,d){var l=q.prototype,c=g(d.xtype),i=g(d.alias),j='widget.',p=j.length,k=Array.prototype.slice.call(l.xtypesChain||[]),h=Ext.merge({},l.xtypesMap||{}),a,f,m,b;for(a=0,f=i.length;a<f;a++){m=i[a];if(m.substring(0,p)===j){b=m.substring(p);Ext.Array.include(c,b)}}q.xtype=d.xtype=c[0];d.xtypes=c;for(a=0,f=c.length;a<f;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}d.xtypesChain=k;d.xtypesMap=h;Ext.Function.interceptAfter(d,'onClassCreated',function(){var i=l.mixins,j,m;for(j in i){if(i.hasOwnProperty(j)){m=i[j];c=m.xtypes;if(c){for(a=0,f=c.length;a<f;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}}}}});for(a=0,f=c.length;a<f;a++){b=c[a];Ext.Array.include(i,j+b)}d.alias=i},['xtype','alias']);if(Ext.manifest){var k=Ext.manifest,m=k.classes,d=k.paths,l={},j={},c,f,s,h,p;if(d){if(k.bootRelative){p=Ext.Boot.baseUrl;for(h in d){if(d.hasOwnProperty(h)){d[h]=p+d[h]}}}a.setPath(d)}if(m){for(c in m){j[c]=[];l[c]=[];f=m[c];if(f.alias){l[c]=f.alias}if(f.alternates){j[c]=f.alternates}}}a.addAlias(l);a.addAlternate(j)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global);(Ext.env||(Ext.env={})).Browser=function(e,r){var n=this,s=Ext.Boot.browserPrefixes,j=Ext.Boot.browserNames,t=n.enginePrefixes,k=n.engineNames,i=e.match(new RegExp('((?:'+Ext.Object.getValues(s).join(')|(?:')+'))([\\w\\._]+)')),p=e.match(new RegExp('((?:'+Ext.Object.getValues(t).join(')|(?:')+'))([\\w\\._]+)')),c=j.other,g=k.other,f='',l='',a='',q=!1,d,o,b,h,u;n.userAgent=e;if(/Edge\//.test(e)){i=e.match(/(Edge\/)([\w.]+)/)}if(i){c=j[Ext.Object.getKey(s,i[1])];if(c==='Safari'&&/^Opera/.test(e)){c='Opera'}f=new Ext.Version(i[2])}if(p){g=k[Ext.Object.getKey(t,p[1])];l=new Ext.Version(p[2])}if(g==='Trident'&&c!=='IE'){c='IE';var m=e.match(/.*rv:(\d+.\d+)/);if(m&&m.length){m=m[1];f=new Ext.Version(m)}}if(c&&f){Ext.setVersion(c,f)}if(e.match(/FB/)&&c==='Other'){c=j.safari;g=k.webkit}if(e.match(/Android.*Chrome/g)){c='ChromeMobile'}if(e.match(/OPR/)){c='Opera';i=e.match(/OPR\/(\d+.\d+)/);f=new Ext.Version(i[1])}Ext.apply(this,{engineName:g,engineVersion:l,name:c,version:f});this.setFlag(c,!0,r);if(f){a=f.getMajor()||'';if(n.is.IE){a=parseInt(a,10);b=document.documentMode;if(b===7||a===7&&b!==8&&b!==9&&b!==10){a=7}else {if(b===8||a===8&&b!==8&&b!==9&&b!==10){a=8}else {if(b===9||a===9&&b!==7&&b!==8&&b!==10){a=9}else {if(b===10||a===10&&b!==7&&b!==8&&b!==9){a=10}else {if(b===11||a===11&&b!==7&&b!==8&&b!==9&&b!==10){a=11}}}}}u=Math.max(a,Ext.Boot.maxIEVersion);for(d=7;d<=u;++d){o='isIE'+d;if(a<=d){Ext[o+'m']=!0}if(a===d){Ext[o]=!0}if(a>=d){Ext[o+'p']=!0}}}if(n.is.Opera&&parseInt(a,10)<=12){Ext.isOpera12m=!0}Ext.chromeVersion=Ext.isChrome?a:0;Ext.firefoxVersion=Ext.isFirefox?a:0;Ext.ieVersion=Ext.isIE?a:0;Ext.operaVersion=Ext.isOpera?a:0;Ext.safariVersion=Ext.isSafari?a:0;Ext.webKitVersion=Ext.isWebKit?a:0;this.setFlag(c+a,!0,r);this.setFlag(c+f.getShortVersion())}for(d in j){if(j.hasOwnProperty(d)){h=j[d];this.setFlag(h,c===h)}}this.setFlag(h);if(l){this.setFlag(g+(l.getMajor()||''));this.setFlag(g+l.getShortVersion())}for(d in k){if(k.hasOwnProperty(d)){h=k[d];this.setFlag(h,g===h,r)}}this.setFlag('Standalone',!!navigator.standalone);this.setFlag('Ripple',!!document.getElementById('tinyhippos-injected')&&!Ext.isEmpty(window.top.ripple));this.setFlag('WebWorks',!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){q=!0;this.setFlag('PhoneGap');this.setFlag('Cordova')}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)){q=!0}this.setFlag('WebView',q);this.isStrict=Ext.isStrict=document.compatMode==='CSS1Compat';this.isSecure=Ext.isSecure;this.identity=c+a+(this.isStrict?'Strict':'Quirks')};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:'WebKit',gecko:'Gecko',presto:'Presto',trident:'Trident',other:'Other'},enginePrefixes:{webkit:'AppleWebKit/',gecko:'Gecko/',presto:'Presto/',trident:'Trident/'},styleDashPrefixes:{WebKit:'-webkit-',Gecko:'-moz-',Trident:'-ms-',Presto:'-o-',Other:''},stylePrefixes:{WebKit:'Webkit',Gecko:'Moz',Trident:'ms',Presto:'O',Other:''},propertyPrefixes:{WebKit:'webkit',Gecko:'moz',Trident:'ms',Presto:'o',Other:''},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){if(a===undefined){a=!0}this.is[b]=a;this.is[b.toLowerCase()]=a;if(c){Ext['is'+b]=a}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(b){var a=this.propertyPrefixes[this.engineName];if(a.length>0){return a+Ext.String.capitalize(b)}return b},getPreferredTranslationMethod:function(a){if(typeof a==='object'&&'translationMethod' in a&&a.translationMethod!=='auto'){return a.translationMethod}else {return 'csstransform'}}};(function(a){Ext.browser=new Ext.env.Browser(a,!0);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":'about:blank'})(Ext.global.navigator.userAgent);Ext.env.OS=function(j,k,b){var n=this,g=Ext.Boot.osNames,h=Ext.Boot.osPrefixes,a,c='',m=n.is,d,l,f,i,e;b=b||Ext.browser;for(d in h){if(h.hasOwnProperty(d)){l=h[d];f=j.match(new RegExp('(?:'+l+')([^\\s;]+)'));if(f){a=g[d];e=f[1];if(e&&e==='HTC_'){c=new Ext.Version('2.3')}else {if(e&&e==='Silk/'){c=new Ext.Version('2.3')}else {c=new Ext.Version(f[f.length-1])}}break}}}if(!a){a=g[(j.toLowerCase().match(/mac|win|linux/)||['other'])[0]];c=new Ext.Version('')}this.name=a;this.version=c;if(k){this.setFlag(k.replace(/ simulator$/i,''))}this.setFlag(a);if(c){this.setFlag(a+(c.getMajor()||''));this.setFlag(a+c.getShortVersion())}for(d in g){if(g.hasOwnProperty(d)){i=g[d];if(!m.hasOwnProperty(a)){this.setFlag(i,a===i)}}}if(this.name==='iOS'&&window.screen.height===568){this.setFlag('iPhone5')}if(b.is.Safari||b.is.Silk){if(this.is.Android2||this.is.Android3||b.version.shortVersion===501){b.setFlag('AndroidStock')}if(this.is.Android4){b.setFlag('AndroidStock');b.setFlag('AndroidStock4')}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(b,a){if(a===undefined){a=!0}if(this.flags){this.flags[b]=a}this.is[b]=a;this.is[b.toLowerCase()]=a;return this}};(function(){var h=Ext.global.navigator,i=h.userAgent,e=Ext.env.OS,f=Ext.is||(Ext.is={}),a,c,b;e.prototype.flags=f;Ext.os=a=new e(i,h.platform);c=a.name;Ext['is'+c]=!0;Ext.isMac=f.Mac=f.MacOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),g=window.deviceType;if(d&&d[1]){b=d[1]}else {if(g==='iPhone'){b='Phone'}else {if(g==='iPad'){b='Tablet'}else {if(!a.is.Android&&!a.is.iOS&&!a.is.WindowsPhone&&/Windows|Linux|MacOS/.test(c)){b='Desktop';Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else {if(a.is.iPad||a.is.RIMTablet||a.is.Android3||Ext.browser.is.Silk||a.is.Android&&i.search(/mobile/i)===-1){b='Tablet'}else {b='Phone'}}}}}a.setFlag(b,!0);a.deviceType=b;delete e.prototype.flags})();Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a='div'}else {if(typeof a!=='string'){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);if(typeof b[a]!=='undefined'||typeof b[Ext.browser.getStylePrefix(a)+c]!=='undefined'){return !0}return !1},isStyleSupportedWithoutPrefix:function(b,c){var a=this.getTestElement(c).style;if(typeof a[b]!=='undefined'){return !0}return !1},isEventSupported:function(e,d){if(d===undefined){d=window}var a=this.getTestElement(d),b='on'+e.toLowerCase(),c=b in a;if(!c){if(a.setAttribute&&a.removeAttribute){a.setAttribute(b,'');c=typeof a[b]==='function';if(typeof a[b]!=='undefined'){a[b]=undefined}a.removeAttribute(b)}}return c},getStyle:function(a,c){var b=a.ownerDocument.defaultView,d=b?b.getComputedStyle(a,null):a.currentStyle;return (d||a.style)[c]},getSupportedPropertyName:function(c,a){var b=Ext.browser.getVendorProperyName(a);if(b in c){return b}else {if(a in c){return a}}return null},detect:function(h){var c=this,g=document,m=c.toRun||c.tests,i=m.length,f=g.createElement('div'),k=[],j=Ext.supports,n=c.has,a,e,b,l,d;f.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(h){g.body.appendChild(f)}l=c.preDetected[Ext.browser.identity]||[];while(i--){b=m[i];d=l[i];a=b.name;e=b.names;if(d===undefined){if(!h&&b.ready){k.push(b);continue}d=b.fn.call(c,g,f)}if(a){j[a]=n[a]=d}else {if(e){while(e.length){a=e.pop();j[a]=n[a]=d}}}}if(h){g.body.removeChild(f)}c.toRun=k},report:function(){var b=[],c=this.tests.length,a;for(a=0;a<c;++a){b.push(this.has[this.tests[a].name]?1:0)}Ext.log(Ext.browser.identity+': ['+b.join(',')+']')},preDetected:{},tests:[{name:'CloneNodeCopiesExpando',fn:function(){var a=document.createElement('div');a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:'CSSPointerEvents',fn:function(a){return 'pointerEvents' in a.documentElement.style}},{name:'CSS3BoxShadow',fn:function(a){return 'boxShadow' in a.documentElement.style||'WebkitBoxShadow' in a.documentElement.style||'MozBoxShadow' in a.documentElement.style}},{name:'CSS3NegationSelector',fn:function(a){try{a.querySelectorAll('foo:not(bar)')}catch(b){return !1}return !0}},{name:'ClassList',fn:function(a){return !!a.documentElement.classList}},{name:'Canvas',fn:function(){var a=this.getTestElement('canvas');return !!(a&&a.getContext&&a.getContext('2d'))}},{name:'Svg',fn:function(a){return !!(a.createElementNS&&!!a.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect)}},{name:'Vml',fn:function(){var a=this.getTestElement(),b=!1;a.innerHTML='<!--[if vml]><br><![endif]-->';b=a.childNodes.length===1;a.innerHTML='';return b}},{name:'touchScroll',fn:function(){var a=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){a=1}else {if(Ext.supports.Touch){a=2}}return a}},{name:'Touch',fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return Ext.supports.TouchEvents&&a!==1||a>1}else {return Ext.supports.TouchEvents||a>0}}},{name:'TouchEvents',fn:function(){return this.isEventSupported('touchend')}},{name:'PointerEvents',fn:function(){return navigator.pointerEnabled}},{name:'MSPointerEvents',fn:function(){return navigator.msPointerEnabled}},{name:'Orientation',fn:function(){return 'orientation' in window&&this.isEventSupported('orientationchange')}},{name:'OrientationChange',fn:function(){return this.isEventSupported('orientationchange')}},{name:'DeviceMotion',fn:function(){return this.isEventSupported('devicemotion')}},{names:['Geolocation','GeoLocation'],fn:function(){return 'geolocation' in window.navigator}},{name:'SqlDatabase',fn:function(){return 'openDatabase' in window}},{name:'WebSockets',fn:function(){return 'WebSocket' in window}},{name:'Range',fn:function(){return !!document.createRange}},{name:'CreateContextualFragment',fn:function(){var a=!!document.createRange?document.createRange():!1;return a&&!!a.createContextualFragment}},{name:'History',fn:function(){return 'history' in window&&'pushState' in window.history}},{name:'Css3dTransforms',fn:function(){return this.has('CssTransforms')&&this.isStyleSupported('perspective')}},{name:'CssTransforms',fn:function(){return this.isStyleSupported('transform')}},{name:'CssTransformNoPrefix',fn:function(){return this.isStyleSupportedWithoutPrefix('transform')}},{name:'CssAnimations',fn:function(){return this.isStyleSupported('animationName')}},{names:['CssTransitions','Transitions'],fn:function(){return this.isStyleSupported('transitionProperty')}},{names:['Audio','AudioTag'],fn:function(){return !!this.getTestElement('audio').canPlayType}},{name:'Video',fn:function(){return !!this.getTestElement('video').canPlayType}},{name:'LocalStorage',fn:function(){try{if('localStorage' in window&&window['localStorage']!==null){localStorage.setItem('sencha-localstorage-test','test success');localStorage.removeItem('sencha-localstorage-test');return !0}}catch(b){}return !1}},{name:'XHR2',fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&'withCredentials' in new XMLHttpRequest()}},{name:'XHRUploadProgress',fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&'upload' in a&&'onprogress' in a.upload}return !1}},{name:'NumericInputPlaceHolder',fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:'matchesSelector',fn:function(){var a=document.documentElement,d='matches',e='webkitMatchesSelector',b='msMatchesSelector',c='mozMatchesSelector';return a[d]?d:a[e]?e:a[b]?b:a[c]?c:null}},{name:'RightMargin',ready:!0,fn:function(c,b){var a=c.defaultView;return !(a&&a.getComputedStyle(b.firstChild.firstChild,null).marginRight!=='0px')}},{name:'DisplayChangeInputSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:'DisplayChangeTextAreaSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:'TransparentColor',ready:!0,fn:function(c,b,a){a=c.defaultView;return !(a&&a.getComputedStyle(b.lastChild,null).backgroundColor!=='transparent')}},{name:'ComputedStyle',ready:!0,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:'Float',fn:function(a){return 'cssFloat' in a.documentElement.style}},{name:'CSS3BorderRadius',ready:!0,fn:function(d){var b=['borderRadius','BorderRadius','MozBorderRadius','WebkitBorderRadius','OBorderRadius','KhtmlBorderRadius'],c=!1,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=!0}}return c&&!Ext.isIE9}},{name:'CSS3LinearGradient',fn:function(i,c){var a='background-image:',e='-webkit-gradient(linear, left top, right bottom, from(black), to(white))',b='linear-gradient(left top, black, white)',g='-moz-'+b,h='-ms-'+b,f='-o-'+b,d=[a+e,a+b,a+g,a+h,a+f];c.style.cssText=d.join(';');return (''+c.style.backgroundImage).indexOf('gradient')!==-1&&!Ext.isIE9}},{name:'MouseEnterLeave',fn:function(a){return 'onmouseenter' in a.documentElement&&'onmouseleave' in a.documentElement}},{name:'MouseWheel',fn:function(a){return 'onmousewheel' in a.documentElement}},{name:'Opacity',fn:function(b,a){if(Ext.isIE8){return !1}a.firstChild.style.cssText='opacity:0.73';return a.firstChild.style.opacity=='0.73'}},{name:'Placeholder',fn:function(a){return 'placeholder' in a.createElement('input')}},{name:'Direct2DBug',fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:'BoundingClientRect',fn:function(a){return 'getBoundingClientRect' in a.documentElement}},{name:'RotatedBoundingClientRect',ready:!0,fn:function(e){var d=e.body,c=!1,b=e.createElement('div'),a=b.style;if(b.getBoundingClientRect){a.position='absolute';a.top='0';a.WebkitTransform=a.MozTransform=a.msTransform=a.OTransform=a.transform='rotate(90deg)';a.width='100px';a.height='30px';d.appendChild(b);c=b.getBoundingClientRect().height!==100;d.removeChild(b)}return c}},{name:'ChildContentClearedWhenSettingInnerHTML',ready:!0,fn:function(){var a=this.getTestElement(),b;a.innerHTML='<div>a</div>';b=a.firstChild;a.innerHTML='<div>b</div>';return b.innerHTML!=='a'}},{name:'IncludePaddingInWidthCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetWidth===210}},{name:'IncludePaddingInHeightCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetHeight===210}},{name:'TextAreaMaxLength',fn:function(a){return 'maxlength' in a.createElement('textarea')}},{name:'GetPositionPercentage',ready:!0,fn:function(b,a){return Ext.feature.getStyle(a.childNodes[2],'left')==='10%'}},{name:'PercentageHeightOverflowBug',ready:!0,fn:function(d){var c=!1,b,a;if(Ext.getScrollbarSize().height){a=this.getTestElement();b=a.style;b.height='50px';b.width='50px';b.overflow='auto';b.position='absolute';a.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>','</div>'].join('');d.body.appendChild(a);if(a.firstChild.offsetHeight===50){c=!0}d.body.removeChild(a)}return c}},{name:'xOriginBug',ready:!0,fn:function(e,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var a=document.getElementById('b1').getBoundingClientRect(),c=document.getElementById('b2').getBoundingClientRect(),d=document.getElementById('b3').getBoundingClientRect();return c.left!==a.left&&d.right!==a.right}},{name:'ScrollWidthInlinePaddingBug',ready:!0,fn:function(c){var d=!1,a,b;b=c.createElement('div');a=b.style;a.height='50px';a.width='50px';a.padding='10px';a.overflow='hidden';a.position='absolute';b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';c.body.appendChild(b);if(b.scrollWidth===70){d=!0}c.body.removeChild(b);return d}},{name:'rtlVertScrollbarOnRight',ready:!0,fn:function(d,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var a=c.firstChild,b=a.firstChild;return b.offsetLeft+b.offsetWidth!==a.offsetLeft+a.offsetWidth}},{name:'rtlVertScrollbarOverflowBug',ready:!0,fn:function(c,b){b.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=b.firstChild;return a.clientHeight===a.offsetHeight}},{identity:'defineProperty',fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return !1}return !0}},{identify:'nativeXhr',fn:function(){if(typeof XMLHttpRequest!=='undefined'){return !0}XMLHttpRequest=function(){try{return new ActiveXObject('MSXML2.XMLHTTP.3.0')}catch(b){return null}};return !1}},{name:'SpecialKeyDownRepeat',fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera&&Ext.operaVersion<12)}},{name:'EmulatedMouseOver',fn:function(){return Ext.os.is.iOS}},{name:'Hashchange',fn:function(){var a=document.documentMode;return 'onhashchange' in window&&(a===undefined||a>7)}},{name:'FixedTableWidthBug',ready:!0,fn:function(){if(Ext.isIE8){return !1}var a=document.createElement('div'),b=document.createElement('div'),c;a.setAttribute('style','display:table;table-layout:fixed;');b.setAttribute('style','display:table-cell;min-width:50px;');a.appendChild(b);document.body.appendChild(a);a.offsetWidth;a.style.width='25px';c=a.offsetWidth;document.body.removeChild(a);return c===50}},{name:'FocusinFocusoutEvents',fn:function(){return !Ext.isGecko}},{name:'AsyncFocusEvents',fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:'accessibility',ready:!0,fn:function(f){var g=f.body,b,c,a,e,d;function getColor(a){var c=[],e=0,g,b;if(a.indexOf('rgb(')!==-1){c=a.replace('rgb(','').replace(')','').split(', ')}else {if(a.indexOf('#')!==-1){g=a.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;b=a.match(g);if(b){c=['0x'+b[1],'0x'+b[2],'0x'+b[3]]}}}for(var d=0;d<c.length;d++){e+=parseInt(c[d])}return e}b=f.createElement('div');c=f.createElement('img');a=b.style;Ext.apply(a,{width:'2px',position:'absolute',clip:'rect(1px,1px,1px,1px)',borderWidth:'1px',borderStyle:'solid',borderTopTolor:'#f00',borderRightColor:'#ff0',backgroundColor:'#fff',backgroundImage:'url('+Ext.BLANK_IMAGE_URL+')'});c.alt='';c.src=Ext.BLANK_IMAGE_URL;b.appendChild(c);g.appendChild(b);a=b.currentStyle||b.style;d=a.backgroundImage;e={Images:c.offsetWidth===1&&c.readyState!=='uninitialized',BackgroundImages:!(d!==null&&(d==='none'||d==='url(invalid-url:)')),BorderColors:a.borderTopColor!==a.borderRightColor,LightOnDark:getColor(a.color)-getColor(a.backgroundColor)>0};Ext.supports.HighContrastMode=!e.BackgroundImages;g.removeChild(b);b=c=null;return e}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||'').indexOf('ext-pauseReadyFire')>0?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==='complete'){a.onReadyEvent({type:b.readyState||'body'})}else {a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener('deviceready',a.onReadyEvent,!1)}b.addEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.addEventListener('load',a.onReadyEvent,!1)}}},block:function(){++this.blocks;Ext.isReady=!1},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=!0;a.state=1;Ext.feature.detect(!0);if(!a.delay){a.handleReady()}else {if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else {a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(b){var a=this;if(!a.timer){a.timer=Ext.defer(function(){a.timer=null;a.handleReady()},b||a.delay)}},invoke:function(a){var b=a.delay;if(b){Ext.defer(a.fn,b,a.scope)}else {if(Ext.elevateFunction){Ext.elevateFunction(a.fn,a.scope)}else {a.fn.call(a.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else {this.doInvokeAll()}},doInvokeAll:function(){var a=this,b=a.listeners,c;if(!a.blocks){Ext.isReady=!0}a.firing=!0;while(b.length){if(a.sortGeneration!==a.generation){a.sortGeneration=a.generation;b.sort(a.sortFn)}c=b.pop();if(a.blocks&&!c.dom){b.push(c);break}a.invoke(c)}a.firing=!1},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:!1,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(e,d,c){var a=Ext.env.Ready,b=a.makeListener(e,d,c);if(a.state===2&&!a.firing&&(b.dom||!a.blocks)){a.invoke(b)}else {a.listeners.push(b);++a.generation;if(!a.bound){a.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else {a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(a,b){return -(a.phase-b.phase||b.priority-a.priority||a.id-b.id)},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener('deviceready',a.onReadyEvent,!1)}b.removeEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.removeEventListener('load',a.onReadyEvent,!1)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=!0;try{document.documentElement.doScroll('left')}catch(c){b=!1}if(b&&document.body){a.onReadyEvent({type:'doScroll'})}else {a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var b=document,c;try{c=window.frameElement===undefined}catch(d){}if(!c||!b.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else {if(a.pollScroll()){return}}if(b.readyState==='complete'){a.onReadyEvent({type:'already '+(b.readyState||'body')})}else {b.attachEvent('onreadystatechange',a.onReadyStateChange);window.attachEvent('onload',a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent('onreadystatechange',a.onReadyStateChange);window.detachEvent('onload',a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(e,d,b){var c={dom:!0};if(b){Ext.apply(c,b)}a.on(e,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()})();Ext.Loader=new function(){var a=this,b=Ext.ClassManager,i=Ext.Boot,o=Ext.Class,c=Ext.env.Ready,k=Ext.Function.alias,h=['extend','mixins','requires'],j={},m=[],f=[],g=[],l={},d={},e={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:'_dc',paths:b.paths,preserveScripts:!0,scriptCharset:undefined},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:'loadDelay'};Ext.apply(a,{isInHistory:j,isLoading:!1,history:m,config:e,readyListeners:f,optionalRequires:g,requiresMap:l,hasFileLoadError:!1,scriptsLoading:0,syncModeEnabled:!1,missingQueue:d,init:function(){var k=document.getElementsByTagName('script'),m=k[k.length-1].src,n=m.substring(0,m.lastIndexOf('/')+1),l=Ext._classPathMetadata,h=Ext.Microloader,g=Ext.manifest,d,i,j,e,f;if(!b.getPath('Ext')){b.setPath('Ext',n+'src')}if(l){Ext._classPathMetadata=null;a.addClassPathMappings(l)}if(g){d=g.loadOrder;i=Ext.Boot.baseUrl;if(d&&g.bootRelative){for(j=d.length,e=0;e<j;e++){f=d[e];f.path=i+f.path}}}if(h){c.block();h.onMicroloaderReady(function(){c.unblock()})}},setConfig:Ext.Function.flexSetter(function(b,d){if(b==='paths'){a.setPath(d)}else {e[b]=d;var c=n[b];if(c){i.setConfig(c===!0?b:c,d)}}return a}),getConfig:function(a){return a?e[a]:e},setPath:function(){b.setPath.apply(b,arguments);return a},addClassPathMappings:function(c){b.setPath(c);return a},addBaseUrlClassPathMappings:function(a){for(var b in a){a[b]=i.baseUrl+a[b]}Ext.Loader.addClassPathMappings(a)},getPath:function(a){return b.getPath(a)},require:function(c,f,e,d){if(d){return a.exclude(d).require(c,f,e)}var g=b.getNamesByExpression(c);return a.load(g,f,e)},syncRequire:function(){var b=a.syncModeEnabled;a.syncModeEnabled=!0;var c=a.require.apply(a,arguments);a.syncModeEnabled=b;return c},exclude:function(d){var c=b.select({require:function(b,e,c){return a.load(b,e,c)},syncRequire:function(b,g,e){var c=a.syncModeEnabled;a.syncModeEnabled=!0;var f=a.load(b,g,e);a.syncModeEnabled=c;return f}});c.exclude(d);return c},load:function(h,c,k){if(c){if(c.length){c=a.makeLoadCallback(h,c)}c=c.bind(k||Ext.global)}var g=[],m=h.length,f,i,j,l=[],n=b.classState;for(i=0;i<m;++i){f=b.resolveName(h[i]);if(!b.isCreated(f)){g.push(f);d[f]=a.getPath(f);if(!n[f]){l.push(d[f])}}}j=g.length;if(j){a.missingCount+=j;b.onCreated(function(){if(c){Ext.callback(c,k,arguments)}a.checkReady()},a,g);if(!e.enabled){Ext.raise('Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class'+(g.length>1?'es':'')+': '+g.join(', '))}if(l.length){a.loadScripts({url:l,_classNames:g})}else {a.checkReady()}}else {if(c){c.call(k)}a.checkReady()}if(a.syncModeEnabled){if(m===1){return b.get(h[0])}}return a},makeLoadCallback:function(a,c){return function(){var e=[],d=a.length;while(d-->0){e[d]=b.get(a[d])}return c.apply(this,e)}},onLoadFailure:function(){var b=this,c=b.onError;a.hasFileLoadError=!0;--a.scriptsLoading;if(c){c.call(b.userScope,b)}a.checkReady()},onLoadSuccess:function(){var b=this,c=b.onLoad;--a.scriptsLoading;if(c){c.call(b.userScope,b)}a.checkReady()},onReady:function(g,e,h,d){if(h){c.on(g,e,d)}else {var b=c.makeListener(g,e,d);if(a.isLoading){f.push(b)}else {c.invoke(b)}}},addUsedClasses:function(b){var c,d,e;if(b){b=typeof b==='string'?[b]:b;for(d=0,e=b.length;d<e;d++){c=b[d];if(typeof c==='string'&&!Ext.Array.contains(g,c)){g.push(c)}}}return a},triggerReady:function(){var d,b=g;if(a.isLoading&&b.length){g=[];a.require(b)}else {a.isLoading=!1;f.sort(c.sortFn);while(f.length&&!a.isLoading){d=f.pop();c.invoke(d)}c.unblock()}},historyPush:function(c){if(c&&!j[c]&&!b.overrideMap[c]){j[c]=!0;m.push(c)}return a},loadScripts:function(g){var c=Ext.manifest,f=c&&c.loadOrder,d=c&&c.loadOrderMap,b;++a.scriptsLoading;if(f&&!d){c.loadOrderMap=d=i.createLoadOrderMap(f)}a.checkReady();b=Ext.apply({loadOrder:f,loadOrderMap:d,charset:e.scriptCharset,success:a.onLoadSuccess,failure:a.onLoadFailure,sync:a.syncModeEnabled,_classNames:[]},g);b.userScope=b.scope;b.scope=b;i.load(b)},loadScriptsSync:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c});a.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c,prependBaseUrl:!0});a.syncModeEnabled=b},loadScript:function(b){var d=typeof b==='string',e=b instanceof Array,c=!e&&!d,j=c?b.url:b,f=c&&b.onError,h=c&&b.onLoad,i=c&&b.scope,g={url:j,scope:i,onLoad:h,onError:f,_classNames:[]};a.loadScripts(g)},flushMissingQueue:function(){var a,f,e=0,c=0;for(a in d){e++;f=d[a];if(b.isCreated(a)){delete d[a]}else {if(b.existCache[a]===2){delete d[a]}else {++c}}}this.missingCount=c},checkReady:function(){var d=a.isLoading,b;a.flushMissingQueue();b=a.missingCount+a.scriptsLoading;if(b&&!d){c.block();a.isLoading=!!b}else {if(!b&&d){a.triggerReady()}}}});Ext.require=k(a,'require');Ext.syncRequire=k(a,'syncRequire');Ext.exclude=k(a,'exclude');o.registerPreprocessor('loader',function(o,g,q,p){var r=this,j=[],t,k=b.getName(o),i,e,n,m,d,f,c,s;for(i=0,n=h.length;i<n;i++){f=h[i];if(g.hasOwnProperty(f)){c=g[f];if(typeof c==='string'){j.push(c)}else {if(c instanceof Array){for(e=0,m=c.length;e<m;e++){d=c[e];if(typeof d==='string'){j.push(d)}}}else {if(typeof c!=='function'){for(e in c){if(c.hasOwnProperty(e)){d=c[e];if(typeof d==='string'){j.push(d)}}}}}}}}if(j.length===0){return}if(k){l[k]=j}(k?a.exclude(k):a).require(j,function(){for(i=0,n=h.length;i<n;i++){f=h[i];if(g.hasOwnProperty(f)){c=g[f];if(typeof c==='string'){g[f]=b.get(c)}else {if(c instanceof Array){for(e=0,m=c.length;e<m;e++){d=c[e];if(typeof d==='string'){g[f][e]=b.get(d)}}}else {if(typeof c!=='function'){for(var a in c){if(c.hasOwnProperty(a)){d=c[a];if(typeof d==='string'){g[f][a]=b.get(d)}}}}}}}}p.call(r,o,g,q)});return !1},!0,'after','className');b.registerPostprocessor('uses',function(l,m,h){var d=Ext.manifest,e=d&&d.loadOrder,k=d&&d.classes,b,g,i,j,c,f;if(e){g=k[l];if(g&&!isNaN(c=g.idx)){i=e[c];b=i.uses;f={};for(j=b.length,c=0;c<j;c++){f[b[c]]=!0}b=Ext.Boot.getPathsFromIndexes(f,e,!0);if(b.length>0){a.loadScripts({url:b,sequential:!0})}}}if(h.uses){b=h.uses;a.addUsedClasses(b)}});b.onCreated(a.historyPush);a.init()}();Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}Ext.cmd.derive('Ext.Mixin',Ext.Base,function(a){return {statics:{addHook:function(e,c,d,h){var g=Ext.isFunction(e),b=function(){var b=arguments,i=g?e:h[e],f=this.callParent(b);i.apply(this,b);return f},f=c.hasOwnProperty(d)&&c[d];if(g){e.$previous=Ext.emptyFn}b.$name=d;b.$owner=c.self;if(f){b.$previous=f.$previous;f.$previous=b}else {c[d]=b}}},onClassExtended:function(k,c){var b=c.mixinConfig,d=c.xhooks,j=k.superclass,i=c.onClassMixedIn,h,f,g,e;if(d){delete c.xhooks;(b||(c.mixinConfig=b={})).on=d}if(b){h=j.mixinConfig;if(h){c.mixinConfig=b=Ext.merge({},h,b)}c.mixinId=b.id;f=b.before;g=b.after;d=b.on;e=b.extended}if(f||g||d||e){c.onClassMixedIn=function(b){var h=this.prototype,l=b.prototype,j;if(f){Ext.Object.each(f,function(e,d){b.addMember(e,function(){if(h[d].apply(this,arguments)!==!1){return this.callParent(arguments)}})})}if(g){Ext.Object.each(g,function(e,d){b.addMember(e,function(){var f=this.callParent(arguments);h[d].apply(this,arguments);return f})})}if(d){for(j in d){a.addHook(d[j],l,j,h)}}if(e){b.onExtended(function(){var d=Ext.Array.slice(arguments,0);d.unshift(b);return e.apply(this,d)},this)}if(i){i.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,'Mixin'],0);Ext.util=Ext.util||{};Ext.util.DelayedTask=function(e,c,d,b,g){var a=this,f,h=function(){var f=Ext.GlobalEvents;clearInterval(a.id);a.id=null;e.apply(c,d||[]);if(g!==!1&&f.hasListeners.idle){f.fireEvent('idle')}};b=typeof b==='boolean'?b:!0;a.id=null;a.delay=function(i,l,j,k){if(b){a.cancel()}if(typeof i==='number'){f=i}e=l||e;c=j||c;d=k||d;if(!a.id){a.id=Ext.interval(h,f)}};a.cancel=function(){if(a.id){clearInterval(a.id);a.id=null}}};Ext.cmd.derive('Ext.util.Event',Ext.Base,function(){var d=Array.prototype.slice,c=Ext.Array.insert,b=Ext.Array.toArray,a={};return {isEvent:!0,suspended:0,noOptions:{},constructor:function(a,b){this.name=b;this.observable=a;this.listeners=[]},addListener:function(r,q,g,t,s){var a=this,p=!1,l=a.observable,o=a.name,d,m,i,h,f,k,j,b,e,n;if(a.findListener(r,q)===-1){m=a.createListener(r,q,g,t,s);if(a.firing){a.listeners=a.listeners.slice(0)}d=a.listeners;b=j=d.length;i=g&&g.priority;f=a._highestNegativePriorityIndex;k=f!==undefined;if(i){h=i<0;if(!h||k){for(e=h?f:0;e<j;e++){n=d[e].o?d[e].o.priority||0:0;if(n<i){b=e;break}}}else {a._highestNegativePriorityIndex=b}}else {if(k){b=f}}if(!h&&b<=f){a._highestNegativePriorityIndex++}if(b===j){d[j]=m}else {c(d,b,[m])}if(l.isElement){l._getPublisher(o).subscribe(l,o,g.delegated!==!1,g.capture)}p=!0}return p},createListener:function(h,e,a,k,j){var f=this,i=Ext._namedScopes[e],b={fn:h,scope:e,ev:f,caller:k,manager:j,namedScope:i,defaultScope:i?e||f.observable:undefined,lateBound:typeof h==='string'},c=h,d=!1,g;if(a){b.o=a;if(a.single){c=f.createSingle(c,b,a,e);d=!0}if(a.target){c=f.createTargeted(c,b,a,e,d);d=!0}if(a.delay){c=f.createDelayed(c,b,a,e,d);d=!0}if(a.buffer){c=f.createBuffered(c,b,a,e,d);d=!0}if(f.observable.isElement){g=a.type;if(g){b.type=g}}}b.fireFn=c;b.wrapped=d;return b},findListener:function(e,d){var c=this.listeners,b=c.length,a;while(b--){a=c[b];if(a){if(a.fn===e&&a.scope==d){return b}}}return -1},removeListener:function(o,n,c){var a=this,m=!1,i=a.observable,j=a.name,b,f,l,h,k,d,e,g;c=c||a.findListener(o,n);if(c!=-1){b=a.listeners[c];l=b.o;f=a._highestNegativePriorityIndex;if(a.firing){a.listeners=a.listeners.slice(0)}if(b.task){b.task.cancel();delete b.task}h=b.tasks&&b.tasks.length;if(h){while(h--){b.tasks[h].cancel()}delete b.tasks}a.listeners.splice(c,1);k=b.manager;if(k){d=k.managedListeners;if(d){for(g=d.length;g--;){e=d[g];if(e.item===a.observable&&e.ename===j&&e.fn===o&&e.scope===n){d.splice(g,1)}}}}if(f){if(c<f){a._highestNegativePriorityIndex--}else {if(c===f&&c===a.listeners.length){delete a._highestNegativePriorityIndex}}}if(i.isElement){i._getPublisher(j).unsubscribe(i,j,l.delegated!==!1,l.capture)}m=!0}return m},clearListeners:function(){var b=this.listeners,c=b.length,a;while(c--){a=b[c];this.removeListener(a.fn,a.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(a,b){this.firingObservable=a;return this.fire.apply(this,b)},fire:function(){var e=this,r=e.listeners,t=r.length,n=e.observable,i=n.isElement,w=n.isComponent,v=e.firingObservable,b,o,f,k,c,j,u,h,l,p,g,m,a,s,q;if(!e.suspended&&t>0){e.firing=!0;c=arguments.length?d.call(arguments,0):[];u=c.length;if(i){a=c[0]}for(k=0;k<t;k++){j=r[k];b=j.o;if(i){if(l){a.setCurrentTarget(l)}p=j.type;if(p){g=a;a=c[0]=g.chain({type:p})}Ext.EventObject=a}m=c;if(b){o=b.delegate;if(o){if(i){h=a.getTarget('#'+a.currentTarget.id+' '+o);if(h){c[1]=h;l=a.currentTarget;a.setCurrentTarget(h)}else {continue}}else {if(w&&!v.is('#'+n.id+' '+b.delegate)){continue}}}if(i){if(b.preventDefault){a.preventDefault()}if(b.stopPropagation){a.stopPropagation()}if(b.stopEvent){a.stopEvent()}}c[u]=b;if(b.args){m=b.args.concat(c)}}f=e.getFireInfo(j);s=f.fn;q=f.scope;f.fn=f.scope=null;if(s.apply(q,m)===!1){Ext.EventObject=null;return e.firing=!1}if(g){a=c[0]=g;g=null}Ext.EventObject=null}}e.firing=!1;return !0},getFireInfo:function(b,g){var f=this.observable,h=b.fireFn,c=b.scope,d=b.namedScope,e;if(!g&&b.wrapped){a.fn=h;return a}e=g?b.fn:h;if(b.lateBound){if(!c||d){c=(b.caller||f).resolveListenerScope(b.defaultScope)}e=c[e]}else {if(d&&d.isController){c=(b.caller||f).resolveListenerScope(b.defaultScope)}else {if(!c||d){c=f}}}a.fn=e;a.scope=c;return a},createTargeted:function(b,a,e,c,d){return function(){if(e.target===arguments[0]){var f;if(!d){f=a.ev.getFireInfo(a,!0);b=f.fn;c=f.scope;f.fn=f.scope=null}return b.apply(c,arguments)}}},createBuffered:function(c,a,f,d,e){a.task=new Ext.util.DelayedTask();return function(){var g;if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}a.task.delay(f.buffer,c,d,b(arguments))}},createDelayed:function(c,a,f,d,e){return function(){var h=new Ext.util.DelayedTask(),g;if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}if(!a.tasks){a.tasks=[]}a.tasks.push(h);h.delay(f.delay||10,c,d,b(arguments))}},createSingle:function(c,a,e,b,d){return function(){var g=a.ev,f;if(g.removeListener(a.fn,b)&&g.observable){g.observable.hasListeners[g.name]--}if(!d){f=g.getFireInfo(a,!0);c=f.fn;b=f.scope;f.fn=f.scope=null}return c.apply(b,arguments)}}}},1,0,0,0,0,0,[Ext.util,'Event'],0);Ext.cmd.derive('Ext.mixin.Identifiable',Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:!0,mixinId:'identifiable',idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:'ext-',defaultIdSeparator:'-',getOptimizedId:function(){return this.id},getUniqueId:function(){var e=this.id,c,b,f,d,a;if(!(e||e===0)){c=this.self.prototype;b=this.defaultIdSeparator;d=Ext.mixin.Identifiable.uniqueIds;if(!c.hasOwnProperty('identifiablePrefix')){f=this.xtype;if(f){a=this.defaultIdPrefix+f.replace(this.idCleanRegex,b)+b}else {if(!(a=c.$className)){a=this.defaultIdPrefix+'anonymous'+b}else {a=a.replace(this.idCleanRegex,b).toLowerCase()+b}}c.identifiablePrefix=a}a=this.identifiablePrefix;if(!d.hasOwnProperty(a)){d[a]=0}e=this.id=this.id=a+ ++d[a]}this.getUniqueId=this.getOptimizedId;return e},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,'Identifiable'],0);Ext.cmd.derive('Ext.mixin.Observable',Ext.Mixin,function(c){var d=Ext.emptyFn,f=[],e=Array.prototype,b=e.slice,a=function(d){if(d instanceof a){return d}this.observable=d;if(arguments[1].isObservable){this.managedListeners=!0}this.args=b.call(arguments,1)};a.prototype.destroy=function(){this.destroy=Ext.emptyFn;var a=this.observable;a[this.managedListeners?'mun':'un'].apply(a,this.args)};return {mixinConfig:{id:'observable',after:{destroy:'clearListeners'}},statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,d,a){var b=function(b,f){return d.apply(a,[b].concat(f))};this.captureArgs(e,b,a)},captureArgs:function(a,d,b){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,d,b)},observe:function(a,b){if(a){if(!a.isObservable){Ext.applyIf(a,new this());this.captureArgs(a.prototype,a.fireEventArgs,a)}if(Ext.isObject(b)){a.on(b)}}return a},prepareClass:function(a,d,l){var i=a.listeners=[],j=l||a.prototype,b=j.listeners,g=d?d.listeners:a.superclass.self.listeners,m,f,e;if(g){i.push(g)}if(b){f=b.scope;if(!f){b.scope='self'}else {e=Ext._namedScopes[f];if(e&&e.isController){b.scope='self.controller'}}i.push(b);j.listeners=null}if(!a.HasListeners){var h=function(){},k=a.superclass.HasListeners||d&&d.HasListeners||c.HasListeners;a.prototype.HasListeners=a.HasListeners=h;h.prototype=a.hasListeners=new k()}}},isObservable:!0,eventsSuspended:0,constructor:function(d){var a=this,h=a.self,f,b,g,i,e;if(a.$observableInitialized){return}a.$observableInitialized=!0;a.hasListeners=new a.HasListeners();a.eventedBeforeEventNames={};a.events=a.events||{};f=h.listeners;if(f&&!a._addDeclaredListeners(f)){h.listeners=null}b=d&&d.listeners||a.listeners;if(b){if(b instanceof Array){for(e=0,i=b.length;e<i;++e){a.addListener(b[e])}}else {a.addListener(b)}}g=d&&d.bubbleEvents||a.bubbleEvents;if(g){a.enableBubble(g)}if(a.$applyConfigs){if(d){Ext.apply(a,d)}}else {a.initConfig(d)}if(b){a.listeners=null}},onClassExtended:function(a,b){if(!a.HasListeners){c.prepareClass(a,a.prototype.$observableMixedIn?undefined:b)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(b){var a=this;if(b instanceof Array){Ext.each(b,a._addDeclaredListeners,a)}else {a._addedDeclaredListeners=!0;a.addListener(b)}return a._addedDeclaredListeners},addManagedListener:function(h,e,j,i,b,l){var f=this,m=f.managedListeners=f.managedListeners||[],g,k;if(typeof e!=='string'){k=arguments.length>4?b:e;b=e;for(e in b){if(b.hasOwnProperty(e)){g=b[e];if(!h.$eventOptions[e]){f.addManagedListener(h,e,g.fn||g,g.scope||b.scope||i,g.fn?g:k,!0)}}}if(b&&b.destroyable){return new a(f,h,b)}}else {if(j!==d){h.doAddListener(e,j,i,b,null,f,f);if(!l&&b&&b.destroyable){return new a(f,h,e,j,i)}}}},removeManagedListener:function(h,a,k,j){var e=this,b,d,g,i,f;if(typeof a!=='string'){b=a;for(a in b){if(b.hasOwnProperty(a)){d=b[a];if(!h.$eventOptions[a]){e.removeManagedListener(h,a,d.fn||d,d.scope||b.scope||j)}}}}else {g=e.managedListeners?e.managedListeners.slice():[];a=Ext.canonicalEventName(a);for(f=0,i=g.length;f<i;f++){e.removeManagedListenerItem(!1,g[f],h,a,k,j)}}},fireEvent:function(a){return this.fireEventArgs(a,b.call(arguments,1))},resolveListenerScope:function(a){var b=Ext._namedScopes[a];if(b){if(b.isSelf||b.isThis){a=null}}return a||this},fireEventArgs:function(a,h){a=Ext.canonicalEventName(a);var b=this,d=b.events,e=d&&d[a],g=!0;if(b.hasListeners[a]){g=b.doFireEvent(a,h||f,e?e.bubble:!1)}return g},fireAction:function(d,g,b,e,a,f){if(typeof b==='string'&&!e){b=this[b]}a=a?Ext.Object.chain(a):{};a.single=!0;a.priority=f==='after'?-99.5:99.5;this.doAddListener(d,b,e,a);this.fireEventArgs(d,g)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var a=this,b=a.fn,d=a.scope,g=a.fnArgs,h=a.owner,e,f;if(!--a._paused){if(b){e=Ext.Array.slice(g||a.args);if(g===!1){e.shift()}a.fn=null;e.push(a);if(Ext.isFunction(b)){f=b.apply(d,e)}else {if(d&&Ext.isString(b)&&Ext.isFunction(d[b])){f=d[b].apply(d,e)}}if(f===!1){return !1}}if(!a._paused){return a.owner.fireEventArgs(a.eventName,a.args)}}}},fireEventedAction:function(a,b,k,j,i){var d=this,e=d.eventedBeforeEventNames,h=e[a]||(e[a]='before'+a),f=Ext.apply({owner:d,eventName:a,fn:k,scope:j,fnArgs:i,args:b},d.$eventedController),g;b.push(f);g=d.fireEventArgs(h,b);b.pop();if(g===!1){return !1}return f.resume()},doFireEvent:function(e,g,h){var a=this,f,b,d=!0;do{if(a.eventsSuspended){if(f=a.eventQueue){f.push([e,g])}return d}else {b=a.events&&a.events[e];if(b&&b!==!0){if((d=b.fire.apply(b,g))===!1){break}}}}while(h&&(a=a.getBubbleParent()));return d},getBubbleParent:function(){var b=this,a=b.getBubbleTarget&&b.getBubbleTarget();if(a&&a.isObservable){return a}return null},addListener:function(e,o,h,b,n,m){var d=this,l=Ext._namedScopes,g,f,j,i,k;if(typeof e!=='string'){b=e;h=b.scope;f=h&&l[h];j=f&&f.isSelf;k=(d.isComponent||d.isWidget)&&b.element?d.$elementEventOptions:d.$eventOptions;for(e in b){g=b[e];if(!k[e]){i=g.scope;if(i&&j){f=l[i];if(f&&f.isController){i='self.controller'}}d.doAddListener(e,g.fn||g,i||h,g.fn?g:b,n,m)}}if(b&&b.destroyable){return new a(d,b)}}else {d.doAddListener(e,o,h,b,n,m);if(b&&b.destroyable){return new a(d,e,o,h,b)}}return d},removeListener:function(a,h,g,f){var d=this,e,b;if(typeof a!=='string'){b=a;f=f||d.$eventOptions;for(a in b){if(b.hasOwnProperty(a)){e=b[a];if(!d.$eventOptions[a]){d.doRemoveListener(a,e.fn||e,e.scope||b.scope)}}}}else {d.doRemoveListener(a,h,g)}return d},onBefore:function(a,e,d,b){return this.addListener(a,e,d,b,'before')},onAfter:function(a,e,d,b){return this.addListener(a,e,d,b,'after')},unBefore:function(a,e,d,b){return this.removeListener(a,e,d,b,'before')},unAfter:function(a,e,d,b){return this.removeListener(a,e,d,b,'after')},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var d=this,a=d.events,f=d.hasListeners,e,b;if(a){for(b in a){if(a.hasOwnProperty(b)){e=a[b];if(e.isEvent){delete f[b];e.clearListeners()}}}d.events=null}d.clearManagedListeners()},clearManagedListeners:function(){var a=this,d=a.managedListeners?a.managedListeners.slice():[],b=0,e=d.length;for(;b<e;b++){a.removeManagedListenerItem(!0,d[b])}a.managedListeners=[]},removeManagedListenerItem:function(b,a,g,f,e,d){if(b||a.item===g&&a.ename===f&&(!e||a.fn===e)&&(!d||a.scope===d)){a.item.doRemoveListener(a.ename,a.fn,a.scope,a.options);if(!b){Ext.Array.remove(this.managedListeners,a)}}},hasListener:function(a){a=Ext.canonicalEventName(a);return !!this.hasListeners[a]},isSuspended:function(a){var b=this.eventsSuspended>0,d=this.events;if(!b&&a&&d){a=d[a];if(a&&a.isEvent){return a.isSuspended()}}return b},suspendEvents:function(a){++this.eventsSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var e=this,f=e.events,g=arguments.length,d,b,a;for(d=0;d<g;d++){a=arguments[d];a=Ext.canonicalEventName(a);b=f[a];if(!b||!b.isEvent){b=e._initEvent(a)}b.suspend()}},resumeEvent:function(){var d=this.events||0,e=d&&arguments.length,b,a;for(b=0;b<e;b++){a=d[arguments[b]];if(a&&a.resume){a.resume()}}},resumeEvents:function(f){var a=this,d=a.eventQueue,e,b;if(a.eventsSuspended&&!--a.eventsSuspended){delete a.eventQueue;if(!f&&d){e=d.length;for(b=0;b<e;b++){a.fireEventArgs.apply(a,d[b])}}}},relayEvents:function(i,d,j){var g=this,k=d.length,b=0,f,h,e={};if(Ext.isObject(d)){for(b in d){h=d[b];e[b]=g.createRelayer(h)}}else {for(;b<k;b++){f=d[b];e[f]=g.createRelayer(j?j+f:f)}}g.mon(i,e,null,null,undefined);return new a(g,i,e)},createRelayer:function(e,a){var d=this;return function(){return d.fireEventArgs.call(d,e,a?b.apply(arguments,a):arguments)}},enableBubble:function(e){if(e){var f=this,h=typeof e=='string'?arguments:e,g=f.events,i=g&&h.length,a,b,d;for(d=0;d<i;++d){a=h[d];a=Ext.canonicalEventName(a);b=g[a];if(!b||!b.isEvent){b=f._initEvent(a)}f.hasListeners._incr_(a);b.bubble=!0}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(f,j,g,a,i,m,e){var b=this,h,k,l;i=i||a&&a.order;if(i){l=a&&a.priority;if(!l){a=a?Ext.Object.chain(a):{};a.priority=b.$orderToPriority[i]}}f=Ext.canonicalEventName(f);if(!e&&(g&&g.isObservable&&g!==b)){e=g}if(e){k=e.managedListeners=e.managedListeners||[];k.push({item:b,ename:f,fn:j,scope:g,options:a})}h=(b.events||(b.events={}))[f];if(!h||!h.isEvent){h=b._initEvent(f)}if(j!==d){if(h.addListener(j,g,a,m,e)){b.hasListeners._incr_(f)}}},doRemoveListener:function(a,g,f){var e=this,d=e.events,b;a=Ext.canonicalEventName(a);b=d&&d[a];if(b&&b.isEvent){if(b.removeListener(g,f)){e.hasListeners._decr_(a)}}},_initEvent:function(a){return this.events[a]=new Ext.util.Event(this,a)}},deprecated:{'5.0':{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,'Observable'],function(){var a=this,c=a.prototype,d=function(){},b=function(c){if(!c.HasListeners){var d=c.prototype;d.$observableMixedIn=1;a.prepareClass(c,this);c.onExtended(function(d,b){a.prepareClass(d,null,b)});if(d.onClassMixedIn){Ext.override(c,{onClassMixedIn:function(a){b.call(this,a);this.callParent(arguments)}})}else {d.onClassMixedIn=function(a){b.call(this,a)}}}e.call(this,c)},e=c.onClassMixedIn;d.prototype={_decr_:function(b,a){if(a==null){a=1}if(!(this[b]-=a)){delete this[b]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else {this[a]=1}}};c.HasListeners=a.HasListeners=d;a.createAlias({on:'addListener',un:'removeListener',mon:'addManagedListener',mun:'removeManagedListener',setListeners:'addListener'});a.observeClass=a.observe;function getMethodEvent(e){var a=(this.methodEvents=this.methodEvents||{})[e],c,b,d,g=this,f;if(!a){this.methodEvents[e]=a={};a.originalFn=this[e];a.methodName=e;a.before=[];a.after=[];f=function(h,a,f){if((b=h.apply(a||g,f))!==undefined){if(typeof b=='object'){if(b.returnValue!==undefined){c=b.returnValue}else {c=b}d=!!b.cancel}else {if(b===!1){d=!0}else {c=b}}}};this[e]=function(){var k=Array.prototype.slice.call(arguments,0),i,h,j;c=b=undefined;d=!1;for(h=0,j=a.before.length;h<j;h++){i=a.before[h];f(i.fn,i.scope,k);if(d){return c}}if((b=a.originalFn.apply(g,k))!==undefined){c=b}for(h=0,j=a.after.length;h<j;h++){i=a.after[h];f(i.fn,i.scope,k);if(d){return c}}return c}}return a}Ext.apply(c,{onClassMixedIn:b,beforeMethod:function(a,c,b){getMethodEvent.call(this,a).before.push({fn:c,scope:b})},afterMethod:function(a,c,b){getMethodEvent.call(this,a).after.push({fn:c,scope:b})},removeMethodListener:function(f,e,d){var b=this.getMethodEvent(f),a,c;for(a=0,c=b.before.length;a<c;a++){if(b.before[a].fn==e&&b.before[a].scope==d){Ext.Array.erase(b.before,a,1);return}}for(a=0,c=b.after.length;a<c;a++){if(b.after[a].fn==e&&b.after[a].scope==d){Ext.Array.erase(b.after,a,1);return}}},toggleEventLogging:function(a){Ext.util.Observable[a?'capture':'releaseCapture'](this,function(b){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(b,arguments)}})}})});Ext.cmd.derive('Ext.util.HashMap',Ext.Base,{generation:0,config:{keyFn:null},constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.clear(!0);b=a.getKeyFn();if(b){a.getKey=b}},getCount:function(){return this.length},getData:function(b,a){if(a===undefined){a=b;b=this.getKey(a)}return [b,a]},getKey:function(a){return a.id},add:function(c,b){var a=this;if(arguments.length===1){b=c;c=a.getKey(b)}if(a.containsKey(c)){return a.replace(c,b)}a.map[c]=b;++a.length;a.generation++;if(a.hasListeners.add){a.fireEvent('add',a,c,b)}return b},replace:function(b,c){var a=this,d=a.map,e;if(arguments.length===1){c=b;b=a.getKey(c)}if(!a.containsKey(b)){a.add(b,c)}e=d[b];d[b]=c;a.generation++;if(a.hasListeners.replace){a.fireEvent('replace',a,b,c,e)}return c},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return !1},removeAtKey:function(b){var a=this,c;if(a.containsKey(b)){c=a.map[b];delete a.map[b];--a.length;a.generation++;if(a.hasListeners.remove){a.fireEvent('remove',a,b,c)}return !0}return !1},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(b){var a=this;if(b||a.generation){a.map={};a.length=0;a.generation=b?0:a.generation+1}if(b!==!0&&a.hasListeners.clear){a.fireEvent('clear',a)}return a},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(d){var c=[],a,b=this.map;for(a in b){if(b.hasOwnProperty(a)){c.push(d?a:b[a])}}return c},each:function(e,c){var b=Ext.apply({},this.map),a,d=this.length;c=c||this;for(a in b){if(b.hasOwnProperty(a)){if(e.call(c,a,b[a],d)===!1){break}}}return this},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b])}}a.resumeEvents();return a},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'HashMap'],function(b){var a=b.prototype;a.removeByKey=a.removeAtKey});Ext.cmd.derive('Ext.promise.Consequence',Ext.Base,function(a){return {promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(c,e,d){var b=this;b.onFulfilled=c;b.onRejected=e;b.onProgress=d;b.deferred=new Ext.promise.Deferred();b.promise=b.deferred.promise},trigger:function(e,d){var b=this,c=b.deferred;switch(e){case 'fulfill':b.propagate(d,b.onFulfilled,c,c.resolve);break;case 'reject':b.propagate(d,b.onRejected,c,c.reject);break;}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,b,c,e){if(Ext.isFunction(b)){this.schedule(function(){try{c.resolve(b(d))}catch(f){c.reject(f)}})}else {e.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var c=a.queue,d,b;for(b=0;b<a.queueSize;++b){d=c[b];c[b]=null;d()}a.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,'Consequence'],0);Ext.cmd.derive('Ext.promise.Deferred',Ext.Base,{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=!1;a.completionAction=null;a.completionValue=null},then:function(c,e,d){var a=this,b=new Ext.promise.Consequence(c,e,d);if(a.completed){b.trigger(a.completionAction,a.completionValue)}else {a.consequences.push(b)}return b.promise},resolve:function(c){var a=this,b,d;if(a.completed){return}try{if(c===a.promise){throw new TypeError('A Promise cannot be resolved with itself.')}if((Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(d=c.then)){b=!1;try{d.call(c,function(d){if(!b){b=!0;a.resolve(d)}},function(d){if(!b){b=!0;a.reject(d)}})}catch(e){if(!b){a.reject(e)}}}else {a.complete('fulfill',c)}}catch(f){a.reject(f)}},reject:function(a){if(this.completed){return}this.complete('reject',a)},update:function(e){var b=this.consequences,c,a,d;if(this.completed){return}for(a=0,d=b.length;a<d;a++){c=b[a];c.update(e)}},complete:function(f,g){var a=this,c=a.consequences,d,b,e;a.completionAction=f;a.completionValue=g;a.completed=!0;for(b=0,e=c.length;b<e;b++){d=c[b];d.trigger(a.completionAction,a.completionValue)}a.consequences=null}},1,0,0,0,0,0,[Ext.promise,'Deferred'],0);Ext.cmd.derive('Ext.promise.Promise',Ext.Base,function(a){var b;return {statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){b=Ext.promise.Deferred},all:function(c){return a.when(c).then(function(f){var g=new b(),e=f.length,h=new Array(e),d,j,k,i,l;if(!e){g.resolve(h)}else {k=function(d,b){return a.when(d).then(function(i){h[b]=i;if(!--e){g.resolve(h)}return i},function(e){return g.reject(e)})};for(d=i=0,l=f.length;i<l;d=++i){j=f[d];if(d in f){k(j,d)}else {e--}}}return g.promise})},is:function(b){return (Ext.isObject(b)||Ext.isFunction(b))&&Ext.isFunction(b.then)},rethrowError:function(b){Ext.asap(function(){throw b})},when:function(c){var b=new Ext.promise.Deferred();b.resolve(c);return b.promise}},owner:null,constructor:function(b){this.owner=b},then:function(b,d,c,e){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];b=f.success;d=f.failure;c=f.progress;e=f.scope}if(e){if(b){b=Ext.Function.bind(b,e)}if(d){d=Ext.Function.bind(d,e)}if(c){c=Ext.Function.bind(c,e)}}return this.owner.then(b,d,c)},otherwise:function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=Ext.Function.bind(b,c)}return this.owner.then(null,b)},always:function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=Ext.Function.bind(b,c)}return this.owner.then(function(d){try{b()}catch(e){a.rethrowError(e)}return d},function(d){try{b()}catch(e){a.rethrowError(e)}throw d})},done:function(){this.owner.then(null,a.rethrowError)},cancel:function(b){if(b==null){b=null}this.owner.reject(new this.self.CancellationError(b))},log:function(b){if(b==null){b=''}return this._owner.then(function(c){Ext.log(''+(b||'Promise')+' resolved with value: '+c);return c},function(c){Ext.log(''+(b||'Promise')+' rejected with reason: '+c);throw c})}}},1,0,0,0,0,0,[Ext.promise,'Promise'],function(a){a._ready()});Ext.cmd.derive('Ext.Promise',Ext.Base,function(){var a;return {statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(b){var a=new Ext.promise.Deferred();a.reject(b);return a.promise},resolve:function(b){var a=new Ext.promise.Deferred();a.resolve(b);return a.promise}},constructor:function(b){var a=new Ext.promise.Deferred();b(a.resolve.bind(a),a.reject.bind(a));return a.promise}}},1,0,0,0,0,0,[Ext,'Promise'],function(b){var a=Ext.global.Promise;if(a&&a.resolve){Ext.Promise=a}else {b._ready()}});Ext.cmd.derive('Ext.Deferred',Ext.promise.Deferred,function(a){var b,c;return {statics:{_ready:function(){b=Ext.promise.Promise;c=Ext.Promise.resolve},all:function(){return b.all.apply(b,arguments)},any:function(b){return a.some(b,1).then(function(c){return c[0]},function(c){if(c instanceof Error&&c.message==='Too few Promises were resolved.'){Ext.raise('No Promises were resolved.')}else {throw c}})},delay:function(c,b){var d;if(arguments.length===1){b=c;c=undefined}b=Math.max(b,0);d=new a();setTimeout(function(){d.resolve(c)},b);return d.promise},map:function(b,c){return a.resolved(b).then(function(d){var e,g,j,h,k,f,i,l;h=d.length;f=new Array(d.length);e=new a();if(!h){e.resolve(f)}else {k=function(i,g){return a.resolved(i).then(function(e){return c(e,g,f)}).then(function(j){f[g]=j;if(!--h){e.resolve(f)}return j},function(f){return e.reject(f)})};for(g=i=0,l=d.length;i<l;g=++i){j=d[g];if(g in d){k(j,g)}else {h--}}}return e.promise})},memoize:function(e,b,d){var c=Ext.Function.memoize(e,b,d);return function(){return a.all(Ext.Array.slice(arguments)).then(function(f){return c.apply(b,f)})}},parallel:function(d,b){if(b==null){b=null}var c=Ext.Array.slice(arguments,2);return a.map(d,function(e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.apply(b,c)})},pipeline:function(d,c,b){if(b==null){b=null}return a.reduce(d,function(f,e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.call(b,f)},c)},reduce:function(e,d,c){var b=arguments.length===3;return a.resolved(e).then(function(f){var g=[f,function(b,g,h){return a.resolved(b).then(function(i){return a.resolved(g).then(function(j){return d(i,j,h,f)})})}];if(b){g.push(c)}return Ext.Array.reduce.apply(Ext.Array,g)})},rejected:function(c){var b=new Ext.Deferred();b.reject(c);return b.promise},resolved:function(c){var b=new Ext.Deferred();b.resolve(c);return b.promise},sequence:function(d,b){if(b==null){b=null}var c=Ext.Array.slice(arguments,2);return a.reduce(d,function(e,f){if(!Ext.isFunction(f)){throw new Error('Invalid parameter: expected a function.')}return a.resolved(f.apply(b,c)).then(function(c){e.push(c);return e})},[])},some:function(c,b){return a.resolved(c).then(function(e){var f,g,m,l,k,h,d,i,j,n;i=[];d=b;h=e.length-d+1;f=new a();if(e.length<b){f.reject(new Error('Too few Promises were resolved.'))}else {l=function(g){if(d>0){i.push(g)}d--;if(d===0){f.resolve(i)}return g};m=function(d){h--;if(h===0){f.reject(new Error('Too few Promises were resolved.'))}return d};for(g=j=0,n=e.length;j<n;g=++j){k=e[g];if(g in e){a.resolved(k).then(l,m)}}}return f.promise})},timeout:function(d,e){var c=new a(),b;b=setTimeout(function(){if(b){c.reject(new Error('Promise timed out.'))}},e);a.resolved(d).then(function(f){clearTimeout(b);b=null;c.resolve(f)},function(f){clearTimeout(b);b=null;c.reject(f)});return c.promise}}}},0,0,0,0,0,0,[Ext,'Deferred'],function(a){a._ready()});Ext.Factory=function(b){var a=this;a.aliasPrefix=b+'.';a.cache={};a.name=b.replace(a.fixNameRe,a.fixNameFn);a.type=b};Ext.Factory.prototype={defaultProperty:'type',instanceProp:'isInstance',create:function(a,i){var e=this,f=Ext.ClassManager,h=e.cache,g,d,b,c;if(a){if(a[e.instanceProp]){return a}if(typeof a==='string'){c=a;a={};a[e.defaultProperty]=c}d=a.xclass;c=a.type}if(d){if(!(b=f.get(d))){return f.instantiate(d,a)}}else {if(!(c=c||i||e.defaultType)){b=e.defaultClass}if(!b&&!(b=h[c])){g=e.aliasPrefix+c;d=f.getNameByAlias(g);if(!(b=d&&f.get(d))){return f.instantiateByAlias(g,a)}h[c]=b}}return b.isInstance?b:new b(a)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(d,b){var c=Ext.Factory,f,a,e;if(d.constructor===Object){Ext.Object.each(d,c.define,c)}else {a=new Ext.Factory(d);if(b){if(b.constructor===Object){Ext.apply(a,b);if(typeof (f=a.xclass)==='string'){a.defaultClass=Ext.ClassManager.get(f)}}else {a.defaultType=b}}c[a.name]=e=a.create.bind(a);e.instance=a}return e};Ext.cmd.derive('Ext.mixin.Factoryable',Ext.Base,{mixinId:'factoryable',onClassMixedIn:function(c){var d=c.prototype,f=d.factoryConfig,a=d.alias,b={},e,g;a=a&&a.length&&a[0];if(a&&(e=a.lastIndexOf('.'))>0){b.type=a.substring(0,e);b.defaultType=a.substring(e+1)}if(f){delete d.factoryConfig;Ext.apply(b,f)}g=Ext.Factory.define(b.type,b);if(c.create===Ext.Base.create){c.create=g}}},0,0,0,0,0,0,[Ext.mixin,'Factoryable'],0);Ext.cmd.derive('Ext.data.request.Base',Ext.Base,{factoryConfig:{type:'request',defaultType:'ajax'},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=!0}a.abort=Ext.emptyFn},createDeferred:function(){return this.deferred=new Ext.Deferred()},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var a=this,b=a.deferred,c=a.result;a.clearTimer();if(b){if(a.success){b.resolve(c)}else {b.reject(c)}}},onTimeout:function(){var a=this;a.timedout=!0;a.timer=null;a.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var a=this,b;b={request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?'transaction aborted':'communication failure',getResponseHeader:a._getHeader,getAllResponseHeaders:a._getHeaders};if(a.aborted){b.aborted=!0}if(a.timedout){b.timedout=!0}return b},_getHeader:function(b){var a=this.headers;return a&&a[b.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,'Base'],0);Ext.cmd.derive('Ext.data.flash.BinaryXhr',Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById('ext-flash-polyfill');Ext.GlobalEvents.fireEvent('flashready')},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(b,c,d){var a;a=this.liveConnections[Number(b)];if(a){a.onFlashStateChange(c,d)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var c=this,b,a;c.flashPolyfillEl=Ext.getBody().appendChild({id:'ext-flash-polyfill',cn:[{tag:'p',html:'To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed.'},{tag:'a',href:'http://www.adobe.com/go/getflashplayer',cn:[{tag:'img',src:window.location.protocol+'//www.adobe.com/images/shared/download_buttons/get_flash_player.gif',alt:'Get Adobe Flash player'}]}]});b=[Ext.Loader.getPath('Ext.data.Connection'),'../../../plugins/flash/swfobject.js'].join('/');a='/plugins/flash/FlashPlugin.swf';if(Ext.flashPluginPath){a=Ext.flashPluginPath}Ext.Loader.loadScript({url:b,onLoad:function(){var d='11.4.0';var e='playerProductInstall.swf';var f={};var b={};b.quality='high';b.bgcolor='#ffffff';b.allowscriptaccess='sameDomain';b.allowfullscreen='true';var c={};c.id='ext-flash-polyfill';c.name='polyfill';c.align='middle';swfobject.embedSWF(a,'ext-flash-polyfill','0','0',d,e,f,b,c)},onError:function(){},scope:c});Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:'',responseBytes:null,javascriptId:null,constructor:function(b){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var a=this;Ext.apply(a,b);a.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=!0;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener('flashready',a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(c,b){a.push(c+': '+b)});return a.join('\r\n')},getResponseHeader:function(b){var a=this.responseHeaders;return a&&a[b]||null},open:function(c,f,d,e,b){var a=this;a.method=c;a.url=f;a.async=d!==!1;a.user=e;a.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(b){var a=this;a.body=b;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener('flashready',a.onFlashReady,a)}else {this.onFlashReady()}},onFlashReady:function(){var a=this,b,c;a.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(a);b={method:a.method,url:a.url,user:a.user,password:a.password,mimeType:a.mimeType,requestHeaders:a.requestHeaders,body:a.body,javascriptId:a.javascriptId};c=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(a,b){this.requestHeaders[a]=b},onreadystatechange:Ext.emptyFn,parseData:function(a){var b=this;this.status=a.status||0;b.responseHeaders={};if(b.mimeType){b.responseHeaders['content-type']=b.mimeType}if(a.reason=='complete'){this.responseBytes=a.data;b.responseHeaders['content-length']=a.data.length}else {if(a.reason=='error'||a.reason=='securityError'){this.statusText=a.text;b.responseHeaders['content-length']=0}}},onFlashStateChange:function(b,c){var a=this;if(b==4){a.parseData(c);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(b)}},1,0,0,0,0,0,[Ext.data.flash,'BinaryXhr'],0);Ext.cmd.derive('Ext.data.request.Ajax',Ext.data.request.Base,{statics:{parseStatus:function(a){a=a==1223?204:a;var c=a>=200&&a<300||a==304,b=!1;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=!0;break;}}return {success:c,isException:b}}},start:function(f){var a=this,e=a.options,c=a.requestOptions,d=a.isXdr,b,g;b=a.xhr=a.openRequest(e,c,a.async,a.username,a.password);if(!d){g=a.setupHeaders(b,e,c.data,c.params)}if(a.async){if(!d){b.onreadystatechange=Ext.Function.bind(a.onStateChange,a)}}if(d){a.processXdrRequest(a,b)}Ext.data.request.Base.prototype.start.call(this,f);b.send(f);if(!a.async){return a.onComplete()}return a},abort:function(c){var a=this,b=a.xhr;if(c||a.isLoading()){try{b.onreadystatechange=null}catch(d){b.onreadystatechange=Ext.emptyFn}b.abort();Ext.data.request.Base.prototype.abort.call(this,c);a.onComplete();a.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var c=this,a=c.xhr,b=a&&a.readyState,d=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!a||c.aborted||c.timedout){return !1}if(d&&a instanceof d){return b!==4}return b!==0&&b!==4},openRequest:function(d,b,f,e,g){var c=this,a=c.newRequest(d);if(e){a.open(b.method,b.url,f,e,g)}else {if(c.isXdr){a.open(b.method,b.url)}else {a.open(b.method,b.url,f)}}if(d.binary||c.binary){if(window.Uint8Array){a.responseType='arraybuffer'}else {if(a.overrideMimeType){a.overrideMimeType('text/plain; charset=x-user-defined')}}}if(d.withCredentials||c.withCredentials){a.withCredentials=!0}return a},newRequest:function(c){var a=this,b;if(c.binaryData){if(window.Uint8Array){b=a.getXhrInstance()}else {b=new Ext.data.flash.BinaryXhr()}}else {if(a.cors&&Ext.isIE9m){b=a.getXdrInstance();a.isXdr=!0}else {b=a.getXhrInstance();a.isXdr=!1}}return b},setupHeaders:function(m,f,j,l){var d=this,a=Ext.apply({},f.headers||{},d.defaultHeaders),e=d.defaultPostHeader,h=f.jsonData,i=f.xmlData,b='Content-Type',k=d.useDefaultXhrHeader,c,g;if(!a.hasOwnProperty(b)&&(j||l)){if(j){if(f.rawData){e='text/plain'}else {if(i&&Ext.isDefined(i)){e='text/xml'}else {if(h&&Ext.isDefined(h)){e='application/json'}}}}a[b]=e}if(k&&!a['X-Requested-With']){a['X-Requested-With']=d.defaultXhrHeader}if(a[b]===undefined||a[b]===null){delete a[b]}try{for(c in a){if(a.hasOwnProperty(c)){g=a[c];m.setRequestHeader(c,g)}}}catch(n){d.owner.fireEvent('exception',c,g)}return a},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else {Ext.raise({msg:'Your browser does not support CORS'})}return a},getXhrInstance:function(){var c=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject('MSXML2.XMLHTTP.3.0')},function(){return new ActiveXObject('MSXML2.XMLHTTP')},function(){return new ActiveXObject('Microsoft.XMLHTTP')}],b=0,d=c.length,a;for(;b<d;++b){try{a=c[b];a();break}catch(e){}}return a}(),processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.defaultXdrContentType;c.onload=Ext.Function.bind(a.onStateChange,a,[!0]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[!1])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return []};a.getResponseHeader=function(){return ''};a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(d){var a=this,c=a.xhr,b=Ext.GlobalEvents;if(c&&c.readyState==4||a.isXdr){a.clearTimer();a.onComplete(d);a.cleanup();if(b.hasListeners.idle){b.fireEvent('idle')}}},onComplete:function(h){var a=this,f=a.owner,b=a.options,e=a.xhr,i={success:!1,isException:!1},d,g,c;if(!e||a.destroyed){return a.result=i}try{d=Ext.data.request.Ajax.parseStatus(e.status);if(d.success){d.success=e.readyState===4}}catch(j){d=i}g=a.success=a.isXdr?h:d.success;if(g){c=a.createResponse(e);f.fireEvent('requestcomplete',f,c,b);Ext.callback(b.success,b.scope,[c,b])}else {if(d.isException||a.aborted||a.timedout){c=a.createException(e)}else {c=a.createResponse(e)}f.fireEvent('requestexception',f,c,b);Ext.callback(b.failure,b.scope,[c,b])}a.result=c;Ext.callback(b.callback,b.scope,[b,g,c]);f.onRequestComplete(a);Ext.data.request.Base.prototype.onComplete.call(this,h);return c},createResponse:function(a){var d=this,h=d.isXdr,f={},i=h?[]:a.getAllResponseHeaders().replace(/\r\n/g,'\n').split('\n'),g=i.length,e,c,j,b,k;while(g--){e=i[g];c=e.indexOf(':');if(c>=0){j=e.substr(0,c).toLowerCase();if(e.charAt(c+1)==' '){++c}f[j]=e.substr(c+1)}}b={request:d,requestId:d.id,status:a.status,statusText:a.statusText,getResponseHeader:function(b){return f[b.toLowerCase()]},getAllResponseHeaders:function(){return f}};if(h){d.processXdrResponse(b,a)}if(d.binary){b.responseBytes=d.getByteArray(a)}else {b.responseText=a.responseText;b.responseXML=a.responseXML}return b},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(b){var e=b.response,g=b.responseBody,h=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,d,f,c;if(b instanceof h){a=b.responseBytes}else {if(window.Uint8Array){a=e?new Uint8Array(e):[]}else {if(Ext.isIE9p){try{a=(new VBArray(g)).toArray()}catch(i){a=[]}}else {if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(b.responseBody,a=[])}else {a=[];d=b.responseText;f=d.length;for(c=0;c<f;c++){a.push(d.charCodeAt(c)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement('script');a.type='text/vbscript';a.text=['Function getIEByteArray(byteArray, out)','Dim len, i','len = LenB(byteArray)','For i = 1 to len','out.push(AscB(MidB(byteArray, i, 1)))','Next','End Function'].join('\n');Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=!0}}},0,0,0,0,['request.ajax'],0,[Ext.data.request,'Ajax'],0);Ext.cmd.derive('Ext.data.request.Form',Ext.data.request.Base,{start:function(d){var a=this,c=a.options,b=a.requestOptions;Ext.data.request.Base.prototype.start.call(this,d);a.form=a.upload(c.form,b.url,b.data,c);return a},abort:function(c){var b=this,a;if(b.isLoading()){try{a=b.frame.dom;if(a.stop){a.stop()}else {a.document.execCommand('Stop')}}catch(d){}}Ext.data.request.Base.prototype.abort.call(this,c);b.onComplete();b.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un('load',a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(a,s,o,n){a=Ext.getDom(a);n=n||{};var m=document.createElement('iframe'),e=Ext.get(m),g=e.id,j=[],l='multipart/form-data',r={target:a.target,method:a.method,encoding:a.encoding,enctype:a.enctype,action:a.action},k=function(c,b){d=document.createElement('input');Ext.fly(d).set({type:'hidden',value:b,name:c});a.appendChild(d);j.push(d)},d,f,b,c,q,i,p,h,t;e.set({name:g,cls:'x-hidden-display',src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(m);if(document.frames){document.frames[g].name=g}Ext.fly(a).set({target:g,method:'POST',enctype:l,encoding:l,action:s||r.action});if(o){f=Ext.Object.fromQueryString(o)||{};for(c in f){if(f.hasOwnProperty(c)){b=f[c];if(Ext.isArray(b)){q=b.length;for(i=0;i<q;i++){k(c,b[i])}}else {k(c,b)}}}}this.frame=e;e.on({load:this.onComplete,scope:this,single:!Ext.isOpera});a.submit();Ext.fly(a).set(r);for(p=j.length,h=0;h<p;h++){Ext.removeNode(j[h])}return a},getDoc:function(){var a=this.frame.dom;return a&&(a.contentWindow.document||a.contentDocument)||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var b=this,h=b.frame,i=b.owner,d=b.options,g,c,f,e,a;if(!h){return}if(b.aborted||b.timedout){b.result=a=b.createException();a.responseXML=null;a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}';g=d.failure;f=!1}else {try{c=b.getDoc();b.result=a={responseText:'',responseXML:null};if(c){if(Ext.isOpera&&c.location==Ext.SSL_SECURE_URL){return}if(c.body){if((e=c.body.firstChild)&&/pre/i.test(e.tagName)){a.responseText=e.textContent||e.innerText}else {if(e=c.getElementsByTagName('textarea')[0]){a.responseText=e.value}else {a.responseText=c.body.textContent||c.body.innerText}}}a.responseXML=c.XMLDocument||c;g=d.success;f=!0;a.status=200}else {Ext.raise('Could not acquire a suitable connection for the file upload service.')}}catch(j){b.result=a=b.createException();a.status=400;a.statusText=(j.message||j.description)+'';a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}';a.responseXML=null;g=d.failure;f=!1}}b.frame=null;b.success=f;i.fireEvent(f?'requestcomplete':'requestexception',i,a,d);Ext.callback(g,d.scope,[a,d]);Ext.callback(d.callback,d.scope,[d,f,a]);i.onRequestComplete(b);Ext.asap(h.destroy,h);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,['request.form'],0,[Ext.data.request,'Form'],0);Ext.cmd.derive('Ext.data.Connection',Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:'',password:'',disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:'text/plain',disableCachingParam:'_dc',timeout:30000,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:'application/x-www-form-urlencoded; charset=UTF-8',useDefaultXhrHeader:!0,defaultXhrHeader:'XMLHttpRequest'},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(a){a=a||{};var b=this,c,d;if(b.fireEvent('beforerequest',b,a)!==!1){c=b.setOptions(a,a.scope||Ext.global);d=b.createRequest(a,c);return d.start(c.data)}Ext.callback(a.callback,a.scope,[a,undefined,undefined]);return Ext.Deferred.rejected([a,undefined,undefined])},createRequest:function(c,e){var a=this,d=c.type||e.type,b;if(!d){d=a.isFormUpload(c)?'form':'ajax'}if(c.autoAbort||a.getAutoAbort()){a.abort()}b=Ext.Factory.request({type:d,owner:a,options:c,requestOptions:e,ownerConfig:a.getConfig()});a.requests[b.id]=b;a.latestId=b.id;return b},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute('enctype'))}return !1},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(a,k){var e=this,b=a.params||{},g=e.getExtraParams(),f=a.urlParams,c=a.url||e.getUrl(),l=a.cors,i=a.jsonData,h,j,d;if(l!==undefined){e.setCors(l)}if(Ext.isFunction(b)){b=b.call(k,a)}if(Ext.isFunction(c)){c=c.call(k,a)}c=this.setupUrl(a,c);d=a.rawData||a.binaryData||a.xmlData||i||null;if(i&&!Ext.isPrimitive(i)){d=Ext.encode(d)}if(a.binaryData){if(e.nativeBinaryPostSupport()){d=new Uint8Array(a.binaryData);if(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko){d=d.buffer}}}if(Ext.isObject(b)){b=Ext.Object.toQueryString(b)}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}b=b+(g?(b?'&':'')+g:'');f=Ext.isObject(f)?Ext.Object.toQueryString(f):f;b=this.setupParams(a,b);h=(a.method||e.getMethod()||(b||d?'POST':'GET')).toUpperCase();this.setupMethod(a,h);j=a.disableCaching!==!1?a.disableCaching||e.getDisableCaching():!1;if(h==='GET'&&j){c=Ext.urlAppend(c,(a.disableCachingParam||e.getDisableCachingParam())+'='+(new Date()).getTime())}if((h=='GET'||d)&&b){c=Ext.urlAppend(c,b);b=null}if(f){c=Ext.urlAppend(c,f)}return {url:c,method:h,data:d||b||null}},setupUrl:function(c,a){var b=this.getForm(c);if(b){a=a||b.action}return a},setupParams:function(c,a){var d=this.getForm(c),b;if(d&&!this.isFormUpload(c)){b=Ext.Element.serializeForm(d);a=a?a+'&'+b:b}return a},setupMethod:function(a,b){if(this.isFormUpload(a)){return 'POST'}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():!1},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var a=this.requests,b;for(b in a){this.abort(a[b])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}},1,0,0,0,0,[['observable',Ext.mixin.Observable]],[Ext.data,'Connection'],0);Ext.cmd.derive('Ext.Ajax',Ext.data.Connection,{singleton:!0,autoAbort:!1},0,0,0,0,0,0,[Ext,'Ajax'],0);Ext.cmd.derive('Ext.AnimationQueue',Ext.Base,{singleton:!0,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=!1;a.isIdle=!0;a.run=Ext.Function.bind(a.run,a);if(Ext.os.is.iOS){Ext.interval(a.watch,500,a)}},start:function(d,b,c){var a=this;a.queue.push(arguments);if(!a.isRunning){if(a.hasOwnProperty('idleTimer')){clearTimeout(a.idleTimer);delete a.idleTimer}if(a.hasOwnProperty('idleQueueTimer')){clearTimeout(a.idleQueueTimer);delete a.idleQueueTimer}a.isIdle=!1;a.isRunning=!0;a.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var a=this;if(!a.isRunning){return}var b=a.runningQueue,d=Ext.now(),c,e;a.lastRunTime=d;a.frameStartTime=d;b.push.apply(b,a.queue);for(c=0,e=b.length;c<e;c++){a.invoke(b[c])}b.length=0;a.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(h,f,g){var a=this;if(!a.isRunning){return}var d=a.queue,e=d.length,b,c;for(b=0;b<e;b++){c=d[b];if(c[0]===h&&c[1]===f&&c[2]===g){d.splice(b,1);b--;e--}}if(e===0){a.doStop();a.isRunning=!1;a.idleTimer=Ext.defer(a.whenIdle,100,a)}},onIdle:function(g,e,f){var c=this.idleQueue,b,d,a;for(b=0,d=c.length;b<d;b++){a=c[b];if(g===a[0]&&e===a[1]&&f===a[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(g,e,f){var c=this.idleQueue,a,d,b;for(a=0,d=c.length;a<d;a++){b=c[a];if(g===b[0]&&e===b[1]&&f===b[2]){c.splice(a,1);return !0}}return !1},queueTask:function(c,a,b){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(g,e,f){var c=this.taskQueue,a,d,b;for(a=0,d=c.length;a<d;a++){b=c[a];if(g===b[0]&&e===b[1]&&f===b[2]){c.splice(a,1);a--;d--}}},invoke:function(b){var a=b[0],c=b[1],d=b[2];a=typeof a=='string'?c[a]:a;if(Ext.isArray(d)){a.apply(c,d)}else {a.call(c,d)}},whenIdle:function(){this.isIdle=!0;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty('idleQueueTimer')){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty('taskQueueTimer')){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,'AnimationQueue'],0);Ext.cmd.derive('Ext.ComponentManager',Ext.Base,{alternateClassName:'Ext.ComponentMgr',singleton:!0,count:0,typeName:'xtype',constructor:function(b){var a=this;Ext.apply(a,b||{});a.all={};a.references={};a.onAvailableCallbacks={}},create:function(a,b){if(typeof a==='string'){return Ext.widget(a)}if(a.isComponent){return a}if('xclass' in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(b){var a=this,e=a.all,d=b.getId(),c=a.onAvailableCallbacks;e[d]=b;if(b.getReference&&b.getReference()){a.references[d]=b}++a.count;if(!a.hasFocusListener){Ext.on('focus',a.onGlobalFocus,a);a.hasFocusListener=!0}c=c&&c[d];if(c&&c.length){a.notifyAvailable(b)}},unregister:function(b){var a=b.getId();if(b.getReference&&b.getReference()){this.references[a]=null;delete this.references[a]}this.all[a]=null;delete this.all[a];this.count--},markReferencesDirty:function(){this.referencesDirty=!0},fixReferences:function(){var c=this,a=c.references,b;if(c.referencesDirty){for(b in a){if(a.hasOwnProperty(b)){a[b].fixReference()}}c.referencesDirty=!1}},onAvailable:function(a,f,d){var g=this,b=g.onAvailableCallbacks,e=g.all,c;if(a in e){c=e[a];f.call(d||c,c)}else {if(a){if(!Ext.isArray(b[a])){b[a]=[]}b[a].push(function(b){f.call(d||b,b)})}}},notifyAvailable:function(a){var b=this.onAvailableCallbacks[a&&a.getId()]||[];while(b.length){b.shift()(a)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(d){var h=this,g=d.toElement,f=d.fromElement,c=Ext.Component.fromElement(g),b=Ext.Component.fromElement(f),e,a;if(c===b){return}e=h.getCommonAncestor(b,c);if(b&&!(b.destroyed||b.destroying)){if(b.handleBlurEvent){b.handleBlurEvent(d)}for(a=b;a&&a!==e;a=a.getRefOwner()){if(!(a.destroyed||a.destroying)){a.onFocusLeave({event:d.event,type:'focusleave',target:f,relatedTarget:g,fromComponent:b,toComponent:c})}}}if(c&&!c.destroyed){if(c.handleFocusEvent){c.handleFocusEvent(d)}for(a=c;a&&a!==e;a=a.getRefOwner()){a.onFocusEnter({event:d.event,type:'focusenter',relatedTarget:f,target:g,fromComponent:b,toComponent:c})}}},getCommonAncestor:function(a,b){if(a===b){return a}while(a&&!(a.isAncestor(b)||a===b)){a=a.getRefOwner()}return a},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(i,b,e){var a=Ext.getDom(i),h=this.all,g=0,f,d,c;if(typeof b!=='number'){f=Ext.getDom(b);b=Number.MAX_VALUE}while(a&&a.nodeType===1&&g<b&&a!==f){d=a.getAttribute('data-componentid')||a.id;if(d){c=h[d];if(c&&(!e||Ext.ComponentQuery.is(c,e))){return c}g++}a=a.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,'ComponentManager',Ext,'ComponentMgr'],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}});Ext.ns('Ext.util').Operators={'=':function(a,b){return a==b},'!=':function(a,b){return a!=b},'^=':function(a,b){return a&&a.substr(0,b.length)==b},'$=':function(a,b){return a&&a.substr(a.length-b.length)==b},'*=':function(a,b){return a&&a.indexOf(b)!==-1},'%=':function(a,b){return a%b===0},'|=':function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+'-')},'~=':function(a,b){return a&&(' '+a+' ').indexOf(' '+b+' ')!=-1}};Ext.cmd.derive('Ext.util.LruCache',Ext.util.HashMap,{config:{maxSize:null},add:function(d,e){var b=this,a,c;b.removeAtKey(d);c=b.last;a={prev:c,next:null,key:d,value:e};if(c){c.next=a}else {b.first=a}b.last=a;Ext.util.HashMap.prototype.add.call(this,d,a);b.prune();return e},insertBefore:function(f,d,a){var c=this,e,b;if(a=this.map[this.findKey(a)]){e=c.findKey(d);if(e){c.unlinkEntry(b=c.map[e])}else {b={prev:a.prev,next:a,key:f,value:d}}if(a.prev){b.prev.next=b}else {c.first=b}b.next=a;a.prev=b;c.prune();return d}else {return c.add(f,d)}},get:function(b){var a=this.map[b];if(a){if(a.next){this.moveToEnd(a)}return a.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,a)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else {this.last=a.prev}if(a.prev){a.prev.next=a.next}else {this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else {this.first=a}this.last=a},getArray:function(c){var b=[],a=this.first;while(a){b.push(c?a.key:a.value);a=a.next}return b},each:function(f,c,d){var b=this,a=d?b.last:b.first,e=b.length;c=c||b;while(a){if(f.call(c,a.key,a.value,e)===!1){break}a=d?a.prev:a.next}return b},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a].value===c){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var a=this,c=a.getMaxSize(),b=c?a.length-c:0;if(b>0){for(;a.first&&b;b--){a.removeAtKey(a.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,'LruCache'],0);Ext.cmd.derive('Ext.ComponentQuery',Ext.Base,{singleton:!0},0,0,0,0,0,0,[Ext,'ComponentQuery'],function(){var a=this,f=Ext.util.Operators,r=/(\d*)n\+?(\d*)/,q=/\D/,c=/^(\s)+/,b=/\\(.)/g,j=new Ext.util.LruCache({maxSize:100}),m=['var r = [],','i = 0,','it = items,','l = it.length,','c;','for (; i < l; i++) {','c = it[i];','if (c.{0}) {','r.push(c);','}','}','return r;'].join(''),d=function(b,a){return a.method.apply(this,[b].concat(a.args))},e=function(d,g){var b=[],c=0,e=d.length,a,f=g!=='>';for(;c<e;c++){a=d[c];if(a.getRefItems){b=b.concat(a.getRefItems(f))}}return b},h=function(d){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];while(!!(a=a.getRefOwner())){c.push(a)}}return c},g=function(b,e,f){if(e==='*'){return b.slice()}else {var d=[],c=0,g=b.length,a;for(;c<g;c++){a=b[c];if(a.isXType(e,f)){d.push(a)}}return d}},l=function(n,c,g,d){var e=[],k=0,o=n.length,i,l,a,b,h,m,j;if(c.charAt(0)==='@'){i=!0;c=c.substr(1)}if(c.charAt(0)==='?'){i=!0;l=!0;c=c.substr(1)}for(;k<o;k++){a=n[k];j=a.getConfigurator&&a.self.$config.configs[c];if(j){b=a[j.names.get]()}else {if(i&&!a.hasOwnProperty(c)){continue}else {b=a[c]}}if(l){e.push(a)}else {if(g==='~='){if(b){if(!Ext.isArray(b)){b=b.split(' ')}for(h=0,m=b.length;h<m;h++){if(f[g](Ext.coerce(b[h],d),d)){e.push(a);break}}}}else {if(g==='/='){if(b!=null&&d.test(b)){e.push(a)}}else {if(!d?!!a[c]:f[g](Ext.coerce(b,d),d)){e.push(a)}}}}}return e},i=function(d,f){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];if(a.getItemId()===f){c.push(a)}}return c},n=function(b,d,c){return a.pseudos[d](b,c)},p=/^(\s?([>\^])\s?|\s|$)/,o=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,k=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:g,argTransform:function(a){if(a[1]!==undefined){a[1]=a[1].replace(b,'$1')}return a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:l,argTransform:function(c){var g=c[0],f=c[1],e=c[2],a=c[4],d;if(a!==undefined){a=a.replace(b,'$1')}if(e==='/='){d=j.get(a);if(d){a=d}else {a=j.add(a,new RegExp(a))}}return [f,e,a]}},{re:/^#((?:\\\.|[\w\-])+)/,method:i},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:n,argTransform:function(a){if(a[2]!==undefined){a[2]=a[2].replace(b,'$1')}return a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:m}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{};Ext.apply(this,a)},execute:function(f){var c=this.operations,b=[],e,a,d;for(a=0,d=c.length;a<d;a++){e=c[a];b=b.concat(this._execute(f,e))}return b},_execute:function(b,g){var f=0,i=g.length,c,a;if(!b){a=Ext.ComponentManager.getAll()}else {if(Ext.isIterable(b)){a=b}else {if(b.isMixedCollection){a=b.items}}}for(;f<i;f++){c=g[f];if(c.mode==='^'){a=h(a||[b])}else {if(c.mode){a=e(a||[b],c.mode)}else {a=d(a||e([b]),c)}}if(f===i-1){return a}}return []},is:function(f){var c=this.operations,b=!1,d=c.length,e,a;if(d===0){return !0}for(a=0;a<d;a++){e=c[a];b=this._is(f,e);if(b){return b}}return !1},_is:function(m,l){var k=l.length,a=[m],g,c,f,b,i,j;for(c=k-1;c>=0;--c){g=l[c];b=g.mode;if(b){if(b==='^'){a=e(a,' ')}else {if(b==='>'){i=[];for(f=0,k=a.length;f<k;++f){j=a[f].getRefOwner();if(j){i.push(j)}}a=i}else {a=h(a)}}if(a.length===0){return !1}}else {a=d(a,g);if(a.length===0){return !1}}}return !0},getMatches:function(a,c){var e=c.length,b;for(b=0;b<e;++b){a=d(a,c[b]);if(a.length===0){break}}return a},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(a,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(d,f){var c=0,g=d.length,e=[],h=-1,b;for(;c<g;++c){b=d[c];if(!a.is(b,f)){e[++h]=b}}return e},first:function(a){var b=[];if(a.length>0){b.push(a[0])}return b},last:function(a){var b=a.length,c=[];if(b>0){c.push(a[b-1])}return c},focusable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.isFocusable&&a.isFocusable()){c.push(a)}}return c},'nth-child':function(i,a){var d=[],h=r.exec(a==='even'&&'2n'||a==='odd'&&'2n+1'||!q.test(a)&&'n+'+a||a),g=(h[1]||1)-0,e=h[2]-0,b,f,c;for(b=0;f=i[b];b++){c=b+1;if(g===1){if(e===0||c===e){d.push(f)}}else {if((c+e)%g===0){d.push(f)}}}return d},scrollable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.scrollable||a._scrollable){c.push(a)}}return c}},query:function(c,j){if(!c){return Ext.ComponentManager.all.getArray()}var b=[],g=[],h={},d=a.cache.get(c),i,e,f;if(!d){d=a.cache.add(c,a.parse(c))}b=d.execute(j);if(d.isMultiMatch()){i=b.length;for(f=0;f<i;f++){e=b[f];if(!h[e.id]){g.push(e);h[e.id]=!0}}b=g}return b},visitPreOrder:function(c,e,f,d,b){a._visit(!0,c,e,f,d,b)},visitPostOrder:function(c,e,f,d,b){a._visit(!1,c,e,f,d,b)},_visit:function(i,c,b,l,k,e){var j=a.cache.get(c),g=[b],h,m=0,d,f;if(!j){j=a.cache.add(c,a.parse(c))}f=j.is(b);if(b.getRefItems){h=b.getRefItems();m=h.length}if(e){Ext.Array.push(g,e)}if(i){if(f){if(l.apply(k||b,g)===!1){return !1}}}for(d=0;d<m;d++){if(a._visit.call(a,i,c,h[d],l,k,e)===!1){return !1}}if(!i){if(f){if(l.apply(k||b,g)===!1){return !1}}}},is:function(d,b){if(!b){return !0}var c=a.cache.get(b);if(!c){c=a.cache.add(b,a.parse(b))}return c.is(d)},parse:function(g){var d=[],c,f,b,e;c=Ext.splitAndUnescape(g,',');for(b=0,e=c.length;b<e;b++){f=Ext.String.trim(c[b]);d.push(a._parse(f))}return new a.Query({operations:d})},_parse:function(a){var h=[],v=Ext.String.trim,t=k.length,r,e,n,s,j,d,m,l,f,u,q;while(a&&r!==a){r=a;e=a.match(o);if(e){s=e[1];n=v(e[2]).replace(b,'$1');if(s==='#'){h.push({method:i,args:[n]})}else {h.push({method:g,args:[n,Boolean(e[3])]})}a=a.replace(e[0],'').replace(c,'$1')}while(!(j=a.match(p))){for(l=0;a&&l<t;l++){f=k[l];d=a.match(f.re);u=f.method;m=f.argTransform;if(d){if(m){q=m(d)}else {q=d.slice(1)}h.push({method:Ext.isString(f.method)?Ext.functionFactory('items',Ext.String.format.apply(Ext.String,[u].concat(d.slice(1)))):f.method,args:q});a=a.replace(d[0],'').replace(c,'$1');break}if(l===t-1){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(j[1]){h.push({mode:j[2]||j[1]});a=a.replace(j[0],'').replace(c,'')}}return h}});Ext.all=function(){return a.query.apply(a,arguments)};Ext.first=function(){var b=a.query.apply(a,arguments);return b&&b[0]||null}});Ext.cmd.derive('Ext.Evented',Ext.Base,{alternateClassName:'Ext.EventedBase',initialized:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=!0},onClassExtended:function(f,b){if(!b.hasOwnProperty('eventedConfig')){return}var e=b.config,a=b.eventedConfig,d,c;if(e){Ext.applyIf(e,a)}else {f.addConfig(a)}for(d in a){if(a.hasOwnProperty(d)){c=Ext.Config.get(d);b[c.names.set]=c.eventedSetter||c.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,'Evented',Ext,'EventedBase'],0);Ext.cmd.derive('Ext.util.Positionable',Ext.Base,{mixinId:'positionable',_positionTopLeft:['position','top','left'],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(a,c){var b=this.getConstrainVector(c,a);if(b){a[0]+=b[0];a[1]+=b[1]}return a},alignTo:function(e,d,f,b){var a=this,c=a.el;return a.setXY(a.getAlignToXY(e,d,f),c.anim&&!!b?c.anim(b):!1)},calculateAnchorXY:function(f,k,l,e){var g=this,j=g.el,i=document,h=j.dom===i.body||j.dom===i,d=Math.round,a,b,c;f=(f||'tl').toLowerCase();e=e||{};b=e.width||(h?Ext.Element.getViewportWidth():g.getWidth());c=e.height||(h?Ext.Element.getViewportHeight():g.getHeight());switch(f){case 'tl':a=[0,0];break;case 'bl':a=[0,c];break;case 'tr':a=[b,0];break;case 'c':a=[d(b*0.5),d(c*0.5)];break;case 't':a=[d(b*0.5),0];break;case 'l':a=[0,d(c*0.5)];break;case 'r':a=[b,d(c*0.5)];break;case 'b':a=[d(b*0.5),c];break;case 'tc':a=[d(b*0.5),0];break;case 'bc':a=[d(b*0.5),c];break;case 'br':a=[b,c];}return [a[0]+k,a[1]+l]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(g,b,n){var d=this,h,a,i,r,q,k,j,c,p,o,w,l,m,t,s,v,u,e,f;g=Ext.get(g.el||g);if(!g||!g.dom){}n=n||[0,0];b=(!b||b==='?'?'tl-bl?':!/-/.test(b)&&b!==''?'tl-'+b:b||'tl-bl').toLowerCase();b=d.convertPositionSpec(b);i=b.match(d._alignRe);l=i[1];m=i[2];w=!!i[3];r=d.getAnchorXY(l,!0);q=d.getAnchorToXY(g,m,!1);e=q[0]-r[0]+n[0];f=q[1]-r[1]+n[1];if(w){if(i[3]==='!'){h=g}else {h=d.constrainTo||d.container||d.el.parent()}h=Ext.get(h.el||h);a=h.getConstrainRegion();a.right=a.left+h.el.dom.clientWidth;k=d.getWidth();j=d.getHeight();c=g.getRegion();t=l.charAt(0);s=l.charAt(l.length-1);v=m.charAt(0);u=m.charAt(m.length-1);p=e<c.right&&e+k>=c.left&&(t=='t'&&v=='b'||t=='b'&&v=='t');o=f<c.bottom&&f+j>=c.top&&(s=='r'&&u=='l'||s=='l'&&u=='r');if(e+k>a.right){if(o){e=c.left-k;o=!1}else {e=a.right-k}}if(e<a.left){e=o?c.right:a.left}if(f+j>a.bottom){if(p){f=c.top-j;p=!1}else {f=a.bottom-j}}if(f<a.top){f=p?c.bottom:a.top}}return [e,f]},getAnchorXY:function(h,e,k){var b=this,f=b.getXY(),a=b.el,g=document,c=a.dom==g.body||a.dom==g,d=a.getScroll(),i=c?d.left:e?0:f[0],j=c?d.top:e?0:f[1];return b.calculateAnchorXY(h,i,j,k)},getBox:function(j,k){var b=this,i=k?b.getLocalXY():b.getXY(),c=i[0],d=i[1],h=b.getWidth(),g=b.getHeight(),a,e,f;if(j){a=b.getBorderPadding();e=a.beforeX;f=a.beforeY;c+=e;d+=f;h-=e+a.afterX;g-=f+a.afterY}return {x:c,left:c,0:c,y:d,top:d,1:d,width:h,height:g,right:c+h,bottom:d+g}},calculateConstrainedPosition:function(h,c,j,l){var a=this,e,k=a.floatParent,i=k?k.getTargetEl():null,d,g,b,f=!1,m;if(j&&k){d=i.getXY();g=i.getBorderPadding();d[0]+=g.beforeX;d[1]+=g.beforeY;if(c){b=[c[0]+d[0],c[1]+d[1]]}}else {b=c}h=h||a.constrainTo||i||a.container||a.el.parent();if(j&&b){b=a.reverseTranslateXY(b)}e=(a.constrainHeader&&a.header.rendered?a.header:a).getConstrainVector(h,b,l);if(e){f=c||a.getPosition(j);f[0]+=e[0];f[1]+=e[1]}return f},getConstrainRegion:function(){var k=this,a=k.el,j=a.dom.nodeName==='BODY',h=a.dom,g=a.getBorders(),i=a.getXY(),e=i[0]+g.beforeX,f=i[1]+g.beforeY,c,d,b;if(j){c=a.getScroll();e=c.left;f=c.top;d=Ext.Element.getViewportWidth();b=Ext.Element.getViewportHeight()}else {d=h.clientWidth;b=h.clientHeight}return new Ext.util.Region(f,e+d,f+b,e)},getConstrainVector:function(a,g,i){var b=this.getRegion(),d=[0,0],f=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.shadow.getShadowSize():undefined,e=!1,h,c=this.constraintInsets;if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a);h=a.getViewSize();a=a.getConstrainRegion();a.right=a.left+h.width;a.bottom=a.top+h.height}if(c){c=Ext.isObject(c)?c:Ext.Element.parseBox(c);a.adjust(c.top,c.right,c.bottom,c.left)}if(g){b.translateBy(g[0]-b.x,g[1]-b.y)}if(i){b.right=b.left+i[0];b.bottom=b.top+i[1]}if(f){a.adjust(f[0],-f[1],-f[2],f[3])}if(b.right>a.right){e=!0;d[0]=a.right-b.right}if(b.left+d[0]<a.left){e=!0;d[0]=a.left-b.left}if(b.bottom>a.bottom){e=!0;d[1]=a.bottom-b.bottom}if(b.top+d[1]<a.top){e=!0;d[1]=a.top-b.top}return e?d:!1},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return [c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var d=this,b,a=d.getBox(),c=d.dom;b=c.offsetWidth-c.clientWidth;if(b){if(d.getStyle('direction')==='rtl'){a.left+=b}else {a.right-=b}}b=c.offsetHeight-c.clientHeight;if(b){a.bottom-=b}return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var a=this,i=a.el,j=i.dom.nodeName==='BODY',d,f,h,c,b,g,e;if(j){f=i.getScroll();b=f.left;c=f.top;g=Ext.Element.getViewportWidth();e=Ext.Element.getViewportHeight()}else {d=a.getBorderPadding();h=a.getXY();b=h[0]+d.beforeX;c=h[1]+d.beforeY;g=a.getWidth(!0);e=a.getHeight(!0)}return new Ext.util.Region(c,b+g,c+e,b)},move:function(a,b,l){var j=this,k=j.getXY(),c=k[0],d=k[1],i=[c-b,d],g=[c+b,d],f=[c,d-b],e=[c,d+b],h={l:i,left:i,r:g,right:g,t:f,top:f,up:f,b:e,bottom:e,down:e};a=a.toLowerCase();j.setXY([h[a][0],h[a][1]],l)},setBox:function(a){var b=this,c,d;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}b.constrainBox(a);c=a.x;d=a.y;b.setXY([c,d]);b.setSize(a.width,a.height);b.afterSetPosition(c,d);return b},constrainBox:function(a){var c=this,b,d,e;if(c.constrain||c.constrainHeader){d='x' in a?a.x:a.left;e='y' in a?a.y:a.top;b=c.calculateConstrainedPosition(null,[d,e],!1,[a.width,a.height]);if(b){a.x=b[0];a.y=b[1]}}},translatePoints:function(b,c){var a=this.translateXY(b,c);return {left:a.x,top:a.y}},translateXY:function(a,g){var f=this,e=f.el,d=e.getStyle(f._positionTopLeft),h=d.position==='relative',b=parseFloat(d.left),c=parseFloat(d.top),i=f.getXY();if(Ext.isArray(a)){g=a[1];a=a[0]}if(isNaN(b)){b=h?0:e.dom.offsetLeft}if(isNaN(c)){c=h?0:e.dom.offsetTop}b=typeof a==='number'?a-i[0]+b:undefined;c=typeof g==='number'?g-i[1]+c:undefined;return {x:b,y:c}},reverseTranslateXY:function(d){var h=d,b=this.el,j=[],i=b.dom,a=i.offsetParent,g,c,e,f;if(a){g=b.isStyle('position','relative'),c=Ext.fly(a).getXY(),e=d[0]+c[0]+a.clientLeft;f=d[1]+c[1]+a.clientTop;if(g){e+=b.getPadding('l');f+=b.getPadding('t')}h=[e,f]}return h}},0,0,0,0,0,0,[Ext.util,'Positionable'],0);Ext.define('Ext.overrides.util.Positionable',{override:'Ext.util.Positionable',anchorTo:function(e,f,i,h,c,g){var a=this,d=!Ext.isEmpty(c),b=function(){a.alignTo(e,f,i,h);Ext.callback(g,a)},j=a.getAnchor();a.removeAnchor();Ext.apply(j,{fn:b,scroll:d});Ext.on('resize',b,null);if(d){Ext.getWin().on('scroll',b,null,{buffer:!isNaN(c)?c:50})}b();return a},getAnchor:function(){var c=this.el,b,a;if(!c.dom){return}b=c.getData();a=b._anchor;if(!a){a=b._anchor={}}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un('resize',a.fn);if(a.scroll){Ext.getWin().on('scroll',a.fn)}delete a.fn}return this},setBox:function(a,c){var b=this;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}if(c){b.constrainBox(a);b.animate(Ext.applyIf({to:a,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[a.x,a.y])}},c))}else {arguments.callee.$previous.call(this,a)}return b}});Ext.cmd.derive('Ext.dom.UnderlayPool',Ext.Base,{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,'UnderlayPool'],0);Ext.cmd.derive('Ext.dom.Underlay',Ext.Base,{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var a=this,b=a.el;if(b){b.hide();a.getPool().checkIn(b);a.el=null;a.hidden=!0}},realign:function(d,e,c,b){var h=this,g=h.el,f=h.target,a=h.offsets,i=Math.max;if(g){if(d==null){d=f.getX()}if(e==null){e=f.getY()}if(c==null){c=f.getWidth()}if(b==null){b=f.getHeight()}if(a){d=d+a.x;e=e+a.y;c=i(c+a.w,0);b=i(b+a.h,0)}g.setXY([d,e]);g.setSize(c,b)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle('z-index',a)}},show:function(){var a=this,f=a.target,c=a.zIndex,b=a.el,e=a.getInsertionTarget().dom,d;if(!b){b=a.el=a.getPool().checkOut()}a.beforeShow();if(c==null){c=parseInt(f.getStyle('z-index'),10)}if(c){b.setStyle('z-index',c)}b.setStyle('position',a.fixed?'fixed':'');d=b.dom;if(d.nextSibling!==e){f.dom.parentNode.insertBefore(d,e)}b.show();a.realign();a.hidden=!1}},1,0,0,0,0,0,[Ext.dom,'Underlay'],0);Ext.cmd.derive('Ext.dom.Shadow',Ext.dom.Underlay,{alternateClassName:'Ext.Shadow',mode:'drop',offset:4,cls:'x-'+(!Ext.supports.CSS3BoxShadow?'ie':'css')+'-shadow',constructor:function(f){var d=this,e,c,a,b;Ext.dom.Underlay.prototype.constructor.call(this,f);d.elementConfig={cls:d.cls,role:'presentation'};a=d.offset;b=Math.floor(a/2);d.opacity=50;switch(d.mode.toLowerCase()){case 'drop':e={x:0,y:0,w:a,h:a};if(Ext.supports.CSS3BoxShadow){c={x:a,y:a,h:-a,w:-a}}else {c={x:-b,y:-b,h:-b,w:-b}};break;case 'sides':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:1+b-2*a,y:-(1+b),h:-1,w:b-1}};break;case 'frame':e={x:-a,y:-a,w:a*2,h:a*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0}}else {c={x:1+b-2*a,y:1+b-2*a,h:a-b-1,w:a-b-1}};break;case 'bottom':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:0,y:a,h:0,w:0}};break;}d.offsets=c;d.outerOffsets=e},getShadowSize:function(){var b=this,a=b.el?b.offset:0,c=[a,a,a,a],d=b.mode.toLowerCase();if(b.el&&d!=='frame'){c[0]=0;if(d=='drop'){c[3]=0}}return c},boxShadowProperty:function(){var a='boxShadow',b=document.documentElement.style;if(!('boxShadow' in b)){if('WebkitBoxShadow' in b){a='WebkitBoxShadow'}else {if('MozBoxShadow' in b){a='MozBoxShadow'}}}return a}(),beforeShow:function(){var a=this,b=a.el.dom.style,c=a.shim;if(Ext.supports.CSS3BoxShadow){b[a.boxShadowProperty]='0 0 '+(a.offset+2)+'px #888'}else {b.filter='progid:DXImageTransform.Microsoft.alpha(opacity='+a.opacity+') progid:DXImageTransform.Microsoft.Blur(pixelradius='+a.offset+')'}if(c){c.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}},1,0,0,0,0,0,[Ext.dom,'Shadow',Ext,'Shadow'],0);Ext.cmd.derive('Ext.dom.Shim',Ext.dom.Underlay,{cls:'x-shim',constructor:function(a){Ext.dom.Underlay.prototype.constructor.call(this,a);this.elementConfig={tag:'iframe',cls:this.cls,role:'presentation',frameBorder:'0',src:Ext.SSL_SECURE_URL,tabindex:'-1'}},getInsertionTarget:function(){var a=this.shadow;return a&&a.el||this.target}},1,0,0,0,0,0,[Ext.dom,'Shim'],0);Ext.cmd.derive('Ext.dom.ElementEvent',Ext.util.Event,{addListener:function(h,f,b,e,d){var a=this,c=!1,g=a.name,j,k,i;b=b||{};if(b.delegated===!1||Ext.event.publisher.Dom.instance.directEvents[g]){if(b.capture){i=a.directCaptures||(a.directCaptures=new Ext.util.Event(a.observable,g));c=i.addListener(h,f,b,e,d)}else {k=a.directs||(a.directs=new Ext.util.Event(a.observable,g));c=k.addListener(h,f,b,e,d)}}else {if(b.capture){j=a.captures||(a.captures=new Ext.util.Event(a.observable,g));c=j.addListener(h,f,b,e,d)}else {c=Ext.util.Event.prototype.addListener.call(this,h,f,b,e,d)}}return c},removeListener:function(c,b){var e=this,g=e.captures,h=e.directs,f=e.directCaptures,d=!1,a=e.findListener(c,b);if(a!==-1){d=Ext.util.Event.prototype.removeListener.call(this,c,b,a)}else {if(h){a=h.findListener(c,b)}if(a!==-1){d=h.removeListener(c,b,a)}else {if(g){a=g.findListener(c,b)}if(a!==-1){d=g.removeListener(c,b,a)}else {if(f){a=f.findListener(c,b);if(a!==-1){d=f.removeListener(c,b,a)}}}}}return d},clearListeners:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.clearListeners()}if(d){d.clearListeners()}if(c){c.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.suspend()}if(d){d.suspend()}if(c){c.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.resume()}if(d){d.resume()}if(c){c.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,'ElementEvent'],0);Ext.cmd.derive('Ext.event.publisher.Publisher',Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var a=this,b=a.type;a.handles={};a.registerEvents();Ext.event.publisher.Publisher.publishers[b]=a},registerEvents:function(f){var c=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=f||c.handledEvents,g=d.length,b,a;for(a=0;a<g;a++){b=d[a];c.handles[b]=1;e[b]=c}},fire:function(c,b,d){var a;if(c.hasListeners[b]){a=c.events[b];if(a){a.fire.apply(a,d)}}}},1,0,0,0,0,0,[Ext.event.publisher,'Publisher'],0);Ext.cmd.derive('Ext.util.Offset',Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=a!=null&&!isNaN(a)?a:0;this.y=b!=null&&!isNaN(b)?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return 'Offset['+this.x+','+this.y+']'},equals:function(a){return this.x==a.x&&this.y==a.y},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else {this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,'Offset'],0);Ext.cmd.derive('Ext.util.Region',Ext.Base,{isRegion:!0,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(e,c,b,d){var a=this;a.y=a.top=a[1]=e;a.right=c;a.bottom=b;a.x=a.left=a[0]=d},contains:function(a){var b=this;return a.x>=b.x&&a.right<=b.right&&a.y>=b.y&&a.bottom<=b.bottom},intersect:function(a){var b=this,f=Math.max(b.y,a.y),e=Math.min(b.right,a.right),c=Math.min(b.bottom,a.bottom),d=Math.max(b.x,a.x);if(c>f&&e>d){return new this.self(f,e,c,d)}else {return !1}},union:function(a){var b=this,f=Math.min(b.y,a.y),e=Math.max(b.right,a.right),c=Math.max(b.bottom,a.bottom),d=Math.min(b.x,a.x);return new this.self(f,e,c,d)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(e,c,b,d){var a=this;a.top=a.y+=e;a.left=a.x+=d;a.right+=c;a.bottom+=b;return a},getOutOfBoundOffset:function(b,a){if(!Ext.isObject(b)){if(b=='x'){return this.getOutOfBoundOffsetX(a)}else {return this.getOutOfBoundOffsetY(a)}}else {a=b;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(a.x);c.y=this.getOutOfBoundOffsetY(a.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else {if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else {if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(b,a){if(!Ext.isObject(b)){if(b=='x'){return this.isOutOfBoundX(a)}else {return this.isOutOfBoundY(a)}}else {a=b;return this.isOutOfBoundX(a.x)||this.isOutOfBoundY(a.y)}},isOutOfBoundX:function(a){return a<this.x||a>this.right},isOutOfBoundY:function(a){return a<this.y||a>this.bottom},restrict:function(d,a,b){if(Ext.isObject(d)){var c;b=a;a=d;if(a.copy){c=a.copy()}else {c={x:a.x,y:a.y}}c.x=this.restrictX(a.x,b);c.y=this.restrictY(a.y,b);return c}else {if(d=='x'){return this.restrictX(a,b)}else {return this.restrictY(a,b)}}},restrictX:function(a,b){if(!b){b=1}if(a<=this.x){a-=(a-this.x)*b}else {if(a>=this.right){a-=(a-this.right)*b}}return a},restrictY:function(a,b){if(!b){b=1}if(a<=this.y){a-=(a-this.y)*b}else {if(a>=this.bottom){a-=(a-this.bottom)*b}}return a},getSize:function(){return {width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return 'Region['+this.top+','+this.right+','+this.bottom+','+this.left+']'},translateBy:function(b,c){if(arguments.length==1){c=b.y;b=b.x}var a=this;a.top=a.y+=c;a.right+=b;a.bottom+=c;a.left=a.x+=b;return a},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left}},3,0,0,0,0,0,[Ext.util,'Region'],0);Ext.cmd.derive('Ext.util.Point',Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=a&&a.length>0?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return 'Point['+this.x+','+this.y+']'},equals:function(a){return this.x===a.x&&this.y===a.y},isCloseTo:function(b,a){if(typeof a=='number'){return this.getDistanceTo(b)<=a}var e=b.x,f=b.y,c=a.x,d=a.y;return this.x<=e+c&&this.x>=e-c&&this.y<=f+d&&this.y>=f-d},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=='object'){a=this.origin}return Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y)},getDistanceTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},getAngleTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.atan2(c,b)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,'Point'],function(){this.prototype.translate=this.prototype.translateBy});Ext.cmd.derive('Ext.event.Event',Ext.Base,{alternateClassName:'Ext.EventObjectImpl',isStopped:!1,defaultPrevented:!1,isEvent:!0,statics:{resolveTextNode:function(a){return a&&a.nodeType===3?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:'touch',3:'pen',4:'mouse',touch:'touch',pen:'pen',mouse:'mouse'}},constructor:function(b){var a=this,c=a.self,h=a.self.resolveTextNode,i=b.changedTouches,g=i?i[0]:b,d=b.type,e,f;a.pageX=g.pageX;a.pageY=g.pageY;a.target=a.delegatedTarget=h(b.target);f=b.relatedTarget;if(f){a.relatedTarget=h(f)}a.browserEvent=a.event=b;a.type=d;a.button=b.button||0;a.shiftKey=b.shiftKey;a.ctrlKey=b.ctrlKey||b.metaKey||!1;a.altKey=b.altKey;a.charCode=b.charCode;a.keyCode=b.keyCode;a.buttons=b.buttons;if(a.button===0&&a.buttons===0){a.buttons=1}if(c.forwardTab!==undefined&&c.focusEvents[d]){a.forwardTab=c.forwardTab}if(c.mouseEvents[d]||c.clickEvents[d]){e='mouse'}else {if(c.pointerEvents[d]){e=c.pointerTypes[b.pointerType]}else {if(c.touchEvents[d]){e='touch'}}}if(e){a.pointerType=e}a.timeStamp=a.time=+(b.timeStamp||new Date())},chain:function(b){var a=Ext.Object.chain(this);a.parentEvent=this;return Ext.apply(a,b)},correctWheelDelta:function(a){var c=this.WHEEL_SCALE,b=Math.round(a/c);if(!b&&a){b=a<0?-1:1}return b},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(d,e,c){var a=this.relatedTarget,b=null;if(a){if(d){b=Ext.fly(a).findParent(d,e,c)}else {b=c?Ext.get(a):a}}return b},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):a?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,a=d.browserEvent,c=0,b=0;if(Ext.isDefined(a.wheelDeltaX)){c=a.wheelDeltaX;b=a.wheelDeltaY}else {if(a.wheelDelta){b=a.wheelDelta}else {if(a.detail){b=-a.detail;if(b>100){b=3}else {if(b<-100){b=-3}}if(Ext.isDefined(a.axis)&&a.axis===a.HORIZONTAL_AXIS){c=b;b=0}}}}return {x:d.correctWheelDelta(c),y:d.correctWheelDelta(b)}},getX:function(){return this.getXY()[0]},getXY:function(){var d=this,c=d.xy;if(!c){c=d.xy=[d.pageX,d.pageY];var g=c[0],e,f,a,b;if(!g&&g!==0){e=d.browserEvent;f=document;a=f.documentElement;b=f.body;c[0]=e.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0);c[1]=e.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0)}}return c},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(c){var a=this,b=a.keyCode,d=a.type==='keypress';return (!d||Ext.isGecko)&&b>=33&&b<=40||!c&&(b===a.RETURN||b===a.TAB||b===a.ESC)},isSpecialKey:function(){var b=this,a=b.keyCode,d=Ext.isGecko,c=b.type==='keypress';return d&&c&&b.charCode===0||this.isNavKeyPress()||a===b.BACKSPACE||a===b.ENTER||a>=16&&a<=20||(!c||d)&&a>=44&&a<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var a=this,b=a.parentEvent;a.defaultPrevented=!0;if(b){b.defaultPrevented=!0}a.browserEvent.preventDefault();return a},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var a=this,b=a.browserEvent,c=a.parentEvent;a.isStopped=!0;if(c){c.isStopped=!0}if(!b.stopPropagation){b.cancelBubble=!0;return a}b.stopPropagation();return a},within:function(b,d,c){var a;if(b){a=d?this.getRelatedTarget():this.getTarget()}return a?Ext.fly(b).contains(a)||!!(c&&a===Ext.getDom(b)):!1},deprecated:{'4.0':{methods:{getPageX:'getX',getPageY:'getY'}}}},1,0,0,0,0,0,[Ext.event,'Event',Ext,'EventObjectImpl'],function(f){var b=f.prototype,a={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var a;if(Ext.isGecko){a=3}else {if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){a=120}else {a=12}a*=3}else {a=120}}return a}()},d={},c,e;Ext.apply(f,a);Ext.apply(b,a);delete a.WHEEL_SCALE;delete a.RETURN;for(c in a){e=a[c];d[e]=c}b.keyCodes=d;b.getTrueXY=b.getXY});Ext.define('Ext.overrides.event.Event',{override:'Ext.event.Event',mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:function(){var a,b={},c;if(!Ext.isIE9m&&document.createEvent){a={createHtmlEvent:function(e,d,c,b){var a=e.createEvent('HTMLEvents');a.initEvent(d,c,b);return a},createMouseEvent:function(d,n,h,f,m,b,c,i,k,g,j,l,e){var a=d.createEvent('MouseEvents'),o=d.defaultView||window;if(a.initMouseEvent){a.initMouseEvent(n,h,f,o,m,b,c,b,c,i,k,g,j,l,e)}else {a=d.createEvent('UIEvents');a.initEvent(n,h,f);a.view=o;a.detail=m;a.screenX=b;a.screenY=c;a.clientX=b;a.clientY=c;a.ctrlKey=i;a.altKey=k;a.metaKey=j;a.shiftKey=g;a.button=l;a.relatedTarget=e}return a},createUIEvent:function(b,f,d,c,e){var a=b.createEvent('UIEvents'),g=b.defaultView||window;a.initUIEvent(f,d,c,g,e);return a},fireEvent:function(a,c,b){a.dispatchEvent(b)}}}else {if(document.createEventObject){c={0:1,1:4,2:2};a={createHtmlEvent:function(d,e,c,b){var a=d.createEventObject();a.bubbles=c;a.cancelable=b;return a},createMouseEvent:function(n,o,i,g,m,b,d,j,l,h,k,e,f){var a=n.createEventObject();a.bubbles=i;a.cancelable=g;a.detail=m;a.screenX=b;a.screenY=d;a.clientX=b;a.clientY=d;a.ctrlKey=j;a.altKey=l;a.shiftKey=h;a.metaKey=k;a.button=c[e]||e;a.relatedTarget=f;return a},createUIEvent:function(d,f,c,b,e){var a=d.createEventObject();a.bubbles=c;a.cancelable=b;return a},fireEvent:function(a,c,b){a.fireEvent('on'+c,b)}}}}Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,h){var g=a.createHtmlEvent(c,f,e);a.fireEvent(b,c,g)}});function createMouseEventDispatcher(b,d){var c=b!=='mousemove';return function(f,e){var g=e.getXY(),h=a.createMouseEvent(f.ownerDocument,b,!0,c,d,g[0],g[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);a.fireEvent(f,b,h)}}Ext.each(['click','dblclick','mousedown','mouseup','mouseover','mousemove','mouseout'],function(a){b[a]=createMouseEventDispatcher(a,1)});Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,h){var g=a.createUIEvent(b.ownerDocument,c,f,e,1);a.fireEvent(b,c,g)}});if(!a){b={};a={}}function cannotInject(b,a){}return function(a){var c=this,d=b[c.type]||cannotInject,e=a?a.dom||a:c.getTarget();d(e,c)}}(),preventDefault:function(){var c=this,a=c.browserEvent,e=c.parentEvent,d,b;if(typeof a.type!=='unknown'){c.defaultPrevented=!0;if(e){e.defaultPrevented=!0}if(a.preventDefault){a.preventDefault()}else {if(a.type==='mousedown'){b=a.target;d=b.getAttribute('unselectable');if(d!=='on'){b.setAttribute('unselectable','on');Ext.defer(function(){b.setAttribute('unselectable',d)},1)}}a.returnValue=!1;if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}}return c},stopPropagation:function(){var a=this,b=a.browserEvent;if(typeof b.type!=='unknown'){if(a.mousedownEvents[a.type]){Ext.GlobalEvents.fireMouseDown(a)}arguments.callee.$previous.call(this)}return a},deprecated:{'5.0':{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var c=this,d,a=function(a){if(a.keyCode===9){c.forwardTab=!a.shiftKey}},b=function(a){if(a.keyCode===9){delete c.forwardTab}};if(Ext.isIE9m){d={0:0,1:0,4:1,2:2};c.override({statics:{enableIEAsync:function(b){var a,c={};for(a in b){c[a]=b[a]}return c}},constructor:function(a,f,e,c){var b=this;b.callParent([a,f,e,c]);b.button=d[a.button];if(a.type==='contextmenu'){b.button=2}b.toElement=a.toElement;b.fromElement=a.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(a){this.browserEvent=this.self.enableIEAsync(a)},getRelatedTarget:function(f,d,e){var a=this,c,b;if(!a.relatedTarget){c=a.type;if(a.mouseLeaveRe.test(c)){b=a.toElement}else {if(a.mouseEnterRe.test(c)){b=a.fromElement}}if(b){a.relatedTarget=a.self.resolveTextNode(b)}}return a.callParent([f,d,e])}});document.attachEvent('onkeydown',a);document.attachEvent('onkeyup',b);window.attachEvent('onunload',function(){document.detachEvent('onkeydown',a);document.detachEvent('onkeyup',b)})}else {if(document.addEventListener){document.addEventListener('keydown',a,!0);document.addEventListener('keyup',b,!0)}}});Ext.define('Ext.rtl.event.Event',{override:'Ext.event.Event',getXY:function(){var b=this,a=b.xy;if(!a){a=arguments.callee.$previous.call(this);if(Ext.rootInheritedState.rtl){a[0]=Ext.Element.getViewportWidth()-a[0]}}return a}});Ext.cmd.derive('Ext.event.publisher.Dom',Ext.event.publisher.Publisher,{type:'dom',handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var b=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=b.handledDomEvents,f=d.length,c=0,a;for(;c<f;c++){a=d[c];b.handles[a]=1;e[a]=b}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var a=this,c=a.handledDomEvents,d,b;if(c){for(b=0,d=c.length;b<d;b++){a.addDelegatedListener(c[b])}}Ext.getWin().on('unload',a.destroy,a)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(b,c,a){c.dom.addEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.dom.removeEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},subscribe:function(f,b,g,e){var c=this,a,d;if(g&&!c.directEvents[b]){a=e?c.captureSubscribers:c.bubbleSubscribers;if(!c.handles[b]&&!c.delegatedListeners[b]){c.addDelegatedListener(b)}if(a[b]){++a[b]}else {a[b]=1}}else {a=e?c.directCaptureSubscribers:c.directSubscribers;d=f.id;a=a[b]||(a[b]={});if(a[d]){++a[d]}else {a[d]=1;c.addDirectListener(b,f,e)}}},unsubscribe:function(h,b,i,g){var c=this,e,f,a,d;if(i&&!c.directEvents[b]){e=c.captureSubscribers;f=c.bubbleSubscribers;a=g?e:f;if(a[b]){--a[b]}if(!c.handles[b]&&!f[b]&&!e[b]){this.removeDelegatedListener(b)}}else {a=g?c.directCaptureSubscribers:c.directSubscribers;d=h.id;a=a[b];if(a[d]){--a[d]}if(!a[d]){delete a[d];c.removeDirectListener(b,h,g)}}},getPropagatingTargets:function(d){var a=d,c=[],b;while(a){c.push(a);b=a.parentNode;if(!b){b=a.defaultView}a=b}return c},publish:function(e,g,f){var d=this,c,a,b,h;if(Ext.isArray(g)){c=g}else {if(d.captureEvents[e]){a=Ext.cache[g.id];c=a?[a]:[]}else {c=d.getPropagatingTargets(g)}}h=c.length;if(d.captureSubscribers[e]){for(b=h;b--;){a=Ext.cache[c[b].id];if(a){d.fire(a,e,f,!1,!0);if(f.isStopped){break}}}}if(!f.isStopped&&d.bubbleSubscribers[e]){for(b=0;b<h;b++){a=Ext.cache[c[b].id];if(a){d.fire(a,e,f,!1,!1);if(f.isStopped){break}}}}},fire:function(b,d,c,f,e){var a;if(b.hasListeners[d]){a=b.events[d];if(a){if(e&&f){a=a.directCaptures}else {if(e){a=a.captures}else {if(f){a=a.directs}}}if(a){c.setCurrentTarget(b.dom);a.fire(c,c.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else {this.doDelegatedEvent(a)}},doDelegatedEvent:function(a,c){var b=this,d=a.timeStamp;a=new Ext.event.Event(a);if(b.isEventBlocked(a)){return !1}b.beforeEvent(a);Ext.frameStartTime=d;b.reEnterCount++;b.publish(a.type,a.target,a);b.reEnterCount--;if(c!==!1){b.afterEvent(a)}return a},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!1])}else {this.doDirectEvent(a,!1)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!0])}else {this.doDirectEvent(a,!0)}},doDirectEvent:function(a,f){var b=this,d=a.currentTarget,e=a.timeStamp,c;a=new Ext.event.Event(a);if(b.isEventBlocked(a)){return}b.beforeEvent(a);Ext.frameStartTime=e;c=Ext.cache[d.id];if(c){b.reEnterCount++;b.fire(c,a.type,a,!0,f);b.reEnterCount--}b.afterEvent(a)},beforeEvent:function(e){var c=e.browserEvent,d=Ext.event.publisher.Dom,a,b;if(c.type==='touchstart'){a=c.touches;if(a.length===1){b=a[0];d.lastTouchStartX=b.pageX;d.lastTouchStartY=b.pageY}}},afterEvent:function(c){var e=c.browserEvent,b=e.type,d=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(c.self.pointerEvents[b]&&c.pointerType!=='mouse'){d.lastScreenPointerEventTime=Ext.now()}if(b==='touchend'){d.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[b]){a.fireEvent('idle')}},isEventBlocked:function(a){var d=this,c=a.type,b=Ext.event.publisher.Dom,e=Ext.now();if(Ext.isGecko&&a.type==='click'&&a.button===2){return !0}return d.blockedPointerEvents[c]&&a.pointerType!=='mouse'||d.blockedCompatibilityMouseEvents[c]&&e-b.lastScreenPointerEventTime<1000||Ext.supports.TouchEvents&&a.self.mouseEvents[a.type]&&Math.abs(a.pageX-b.lastTouchStartX)<15&&Math.abs(a.pageY-b.lastTouchStartY)<15&&Ext.now()-b.lastTouchEndTime<1000},destroy:function(){var a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,'Dom'],function(b){var d=document,a=d.defaultView,c=b.prototype;if(Ext.os.is.iOS&&Ext.os.version.getMajor()<5||Ext.browser.is.AndroidStock||!(a&&a.addEventListener)){c.target=d}else {c.target=a}b.instance=new b()});Ext.define('Ext.overrides.event.publisher.Dom',{override:'Ext.event.publisher.Dom'},function(c){if(Ext.isIE9m){var d=document.documentElement,e=document.body,a=c.prototype,b,f;a.target=document;a.directBoundListeners={};b=function(a,b,d){a.target=a.srcElement||window;a.currentTarget=this;if(d){b.onDirectCaptureEvent(a)}else {b.onDirectEvent(a)}};f=function(a,b){a.target=a.srcElement||window;a.currentTarget=this;b.onDirectCaptureEvent(a)};c.override({addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.attachEvent('on'+a,this.onDelegatedEvent)},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.detachEvent('on'+a,this.onDelegatedEvent)},addDirectListener:function(d,j,i){var e=this,a=j.dom,g=Ext.Function.bind(b,a,[e,i],!0),f=e.directBoundListeners,h=f[d]||(f[d]={});h[a.id]=g;if(a.attachEvent){a.attachEvent('on'+d,g)}else {e.callParent(arguments)}},removeDirectListener:function(b,d){var a=d.dom;if(a.detachEvent){a.detachEvent('on'+b,this.directBoundListeners[b][a.id])}else {this.callParent(arguments)}},doDelegatedEvent:function(a,b){a.target=a.srcElement||window;if(a.type==='focusin'){a.relatedTarget=a.fromElement===e||a.fromElement===d?null:a.fromElement}else {if(a.type==='focusout'){a.relatedTarget=a.toElement===e||a.toElement===d?null:a.toElement}}return this.callParent([a,b])}});Ext.apply(a.directEvents,a.captureEvents);Ext.apply(a.directEvents,{change:1,input:1,paste:1});a.captureEvents={}}});Ext.cmd.derive('Ext.event.publisher.Gesture',Ext.event.publisher.Dom,{type:'gesture',config:{async:!0},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(l){var a=this,d=a.handledDomEvents,j=Ext.supports,i=j.TouchEvents,k=Ext.Function,g=a.onTouchStart,h=a.onTouchMove,c=a.onTouchEnd,e=k.createAnimationFrame(a.onTouchStart,a,null,1),f=k.createAnimationFrame(a.onTouchMove,a),b=k.createAnimationFrame(a.onTouchEnd,a,null,1);a._handlers={touchstart:g,touchmove:h,touchend:c,touchcancel:c,pointerdown:g,pointermove:h,pointerup:c,pointercancel:c,MSPointerDown:g,MSPointerMove:h,MSPointerUp:c,MSPointerCancel:c,mousedown:g,mousemove:h,mouseup:c};a._asyncHandlers={touchstart:e,touchmove:f,touchend:b,touchcancel:b,pointerdown:e,pointermove:f,pointerup:b,pointercancel:b,MSPointerDown:e,MSPointerMove:f,MSPointerUp:b,MSPointerCancel:b,mousedown:e,mousemove:f,mouseup:b};a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.recognizers=[];if(i){a.onTargetTouchMove=a.onTargetTouchMove.bind(a);a.onTargetTouchEnd=a.onTargetTouchEnd.bind(a)}if(j.PointerEvents){d.push('pointerdown','pointermove','pointerup','pointercancel');a.mousePointerType='mouse'}else {if(j.MSPointerEvents){d.push('MSPointerDown','MSPointerMove','MSPointerUp','MSPointerCancel');a.mousePointerType=4}else {if(i){d.push('touchstart','touchmove','touchend','touchcancel')}}}if(!d.length||i&&Ext.isWebKit&&Ext.os.is.Desktop){d.push('mousedown','mousemove','mouseup')}a.initConfig(l);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(c,d){var a=c.priority,b=d.priority;return a>b?1:a<b?-1:0})},registerRecognizer:function(b){var a=this,d=b.handledEvents,e=d.length,c;b.setOnRecognized(a.onRecognized);b.setCallbackScope(a);for(c=0;c<e;c++){a.handledEvents.push(d[c])}a.registerEvents(d);a.recognizers.push(b)},onRecognized:function(g,c,a){var j=this,b=c.changedTouches,i=b.length,e,f,d,h;a=a||{};a.type=g;a.target=b[0].target;a.isStopped=!1;c=c.chain(a);if(i>1){e=[];for(d=0;d<i;d++){h=b[d];e.push(h.targets)}f=j.getCommonTargets(e)}else {f=b[0].targets}j.publish(g,f,c)},getCommonTargets:function(e){var d=e[0],h=e.length;if(h===1){return d}var a=[],g=1,b,f,c;while(!0){b=d[d.length-g];if(!b){return a}for(c=1;c<h;c++){f=e[c];if(f[f.length-g]!==b){return a}}a.unshift(b);g++}return a},invokeRecognizers:function(d,f){var c=this.recognizers,e=c.length,a,b;if(d==='onStart'){for(a=0;a<e;a++){c[a].isActive=!0}}for(a=0;a<e;a++){b=c[a];if(b.isActive&&b[d].call(b,f)===!1){b.isActive=!1}}},updateTouches:function(i,p){var h=this,m=i.browserEvent,n=m.changedTouches||[m],f=h.activeTouches,e=h.activeTouchesMap,l=[],b,c,a,g,d,o,j,k;for(d=0,o=n.length;d<o;d++){b=n[d];if('identifier' in b){c=b.identifier}else {if('pointerId' in b){c=b.pointerId}else {c=1}}a=e[c];if(!a){g=Ext.event.Event.resolveTextNode(b.target);a=e[c]={identifier:c,target:g,targets:h.getPropagatingTargets(g)};f.push(a)}if(p){delete e[c];Ext.Array.remove(f,a)}j=b.pageX;k=b.pageY;a.pageX=j;a.pageY=k;a.point=new Ext.util.Point(j,k);l.push(a)}i.touches=Ext.Array.clone(f);i.changedTouches=l},doDelegatedEvent:function(a){var b=this;a=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,a,!1);if(a){if(!a.button||a.button<1){b.handlers[a.type].call(b,a)}b.afterEvent(a)}},onTouchStart:function(b){var a=this,d=b.target,c=b.browserEvent.touches;if(b.browserEvent.type==='touchstart'){d.addEventListener('touchmove',a.onTargetTouchMove);d.addEventListener('touchend',a.onTargetTouchEnd);d.addEventListener('touchcancel',a.onTargetTouchEnd)}if(c&&c.length<=a.activeTouches.length){a.removeGhostTouches(c)}a.updateTouches(b);if(!a.isStarted){a.isStarted=!0;a.invokeRecognizers('onStart',b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers('onTouchStart',b)},onTouchMove:function(a){var b=this,c=b.mousePointerType;if(b.isStarted){if(c&&a.browserEvent.pointerType===c&&a.buttons===0){a.type=Ext.dom.Element.prototype.eventMap.touchend;a.button=0;b.onTouchEnd(a);return}b.updateTouches(a);if(a.changedTouches.length>0){b.invokeRecognizers('onTouchMove',a)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,!0);a.invokeRecognizers(a.isCancelEvent[b.type]?'onTouchCancel':'onTouchEnd',b);if(!a.activeTouches.length){a.isStarted=!1;a.invokeRecognizers('onEnd',b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else {this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else {this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var b=this,a=c.target;a.removeEventListener('touchmove',b.onTargetTouchMove);a.removeEventListener('touchend',b.onTargetTouchEnd);a.removeEventListener('touchcancel',b.onTargetTouchEnd);if(!Ext.getBody().contains(a)){b.onTouchEnd(new Ext.event.Event(c))}},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var a=this,d=a.recognizers,e=d.length,b,c;a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.isStarted=!1;for(b=0;b<e;b++){c=d[b];c.reset();c.isActive=!1}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(c){var f={},g=c.length,b=this.activeTouches,h=this.activeTouchesMap,a,e,d;for(a=0;a<g;++a){f[c[a].identifier]=!0}a=b.length;while(a--){d=b[a];e=d.identifier;if(!c[e]){Ext.Array.remove(b,d);delete h[e]}}}}},1,0,0,0,0,0,[Ext.event.publisher,'Gesture'],function(a){a.instance=new a()});Ext.define('Ext.overrides.event.publisher.Gesture',{override:'Ext.event.publisher.Gesture'},function(){if(Ext.isIE9m){this.override({updateTouches:function(a,d){var b=a.browserEvent,c=a.getXY();b.pageX=c[0];b.pageY=c[1];this.callParent([a,d])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}});Ext.cmd.derive('Ext.mixin.Templatable',Ext.Mixin,{mixinConfig:{id:'templatable'},referenceAttributeName:'reference',referenceSelector:'[reference]',getElementConfig:function(){return {reference:'element'}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),!0));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var d=this.referenceAttributeName,e,c,b,g,a,f;e=this.elementTemplate.cloneNode(!0);c=e.querySelectorAll(this.referenceSelector);for(b=0,g=c.length;b<g;b++){a=c[b];f=a.getAttribute(d);a.removeAttribute(d);this.linkElement(f,a)}}},0,0,0,0,0,0,[Ext.mixin,'Templatable'],0);Ext.cmd.derive('Ext.TaskQueue',Ext.Base,{singleton:!0,pending:!1,mode:!0,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(c,a,b){this.request(!0);this.readQueue.push(arguments)},requestWrite:function(c,a,b){this.request(!1);this.writeQueue.push(arguments)},request:function(a){if(!this.pending){this.pendingTime=Date.now();this.pending=!0;this.mode=a;if(a){Ext.defer(this.run,1,this)}else {Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=!1;var i=this.readQueue,h=this.writeQueue,c=null,d;if(this.mode){d=i;if(h.length>0){c=!1}}else {d=h;if(i.length>0){c=!0}}var g=d.slice(),f,j,b,a,e;d.length=0;for(f=0,j=g.length;f<j;f++){b=g[f];a=b[0];e=b[1];if(typeof a==='string'){a=e[a]}if(b.length>2){a.apply(e,b[2])}else {a.call(e)}}g.length=0;if(c!==null){this.request(c)}}},1,0,0,0,0,0,[Ext,'TaskQueue'],0);Ext.cmd.derive('Ext.util.sizemonitor.Abstract',Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(a);this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer);a.addCls('x-size-monitored')},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead('refresh',this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var b=this.getElement();if(!b||b.destroyed){return !1}var h=b.getWidth(),g=b.getHeight(),d=this.getContentWidth(),c=this.getContentHeight(),j=this.contentWidth,i=this.contentHeight,a=this.info,f=!1,e;this.width=h;this.height=g;this.contentWidth=d;this.contentHeight=c;e=(j!==d?1:0)+(i!==c?2:0);if(e>0){a.width=h;a.height=g;a.contentWidth=d;a.contentHeight=c;a.flag=e;f=!0;this.getCallback().apply(this.getScope(),this.getArgs())}return f},refresh:function(a){if(this.refreshSize()||a){Ext.TaskQueue.requestWrite('refreshMonitors',this)}},destroy:function(){var a=this,b=a.getElement();a.bindListeners(!1);if(b&&!b.destroyed){b.removeCls('x-size-monitored')}delete a._element;a.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,'Abstract'],0);Ext.cmd.derive('Ext.util.sizemonitor.Scroll',Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return {reference:'detectorsContainer',classList:['x-size-monitors','scroll'],children:[{reference:'expandMonitor',className:'expand'},{reference:'shrinkMonitor',className:'shrink'}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(b){var a=b?'addEventListener':'removeEventListener';this.expandMonitor[a]('scroll',this.onScroll,!0);this.shrinkMonitor[a]('scroll',this.onScroll,!0)},forceRefresh:function(){Ext.TaskQueue.requestRead('refresh',this,[!0])},onScroll:function(){Ext.TaskQueue.requestRead('refresh',this)},refreshMonitors:function(){var a=this.expandMonitor,b=this.shrinkMonitor,c=1000000;if(a&&!a.destroyed){a.scrollLeft=c;a.scrollTop=c}if(b&&!b.destroyed){b.scrollLeft=c;b.scrollTop=c}}},1,0,0,0,0,0,[Ext.util.sizemonitor,'Scroll'],0);Ext.cmd.derive('Ext.util.sizemonitor.OverflowChange',Ext.util.sizemonitor.Abstract,{constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return {reference:'detectorsContainer',classList:['x-size-monitors','overflowchanged'],children:[{reference:'expandMonitor',className:'expand',children:[{reference:'expandHelper'}]},{reference:'shrinkMonitor',className:'shrink',children:[{reference:'shrinkHelper'}]}]}},bindListeners:function(b){var a=b?'addEventListener':'removeEventListener';this.expandMonitor[a](Ext.browser.is.Firefox?'underflow':'overflowchanged',this.onExpand,!0);this.shrinkMonitor[a](Ext.browser.is.Firefox?'overflow':'overflowchanged',this.onShrink,!0)},onExpand:function(a){if(Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow){return}Ext.TaskQueue.requestRead('refresh',this)},onShrink:function(a){if(Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow){return}Ext.TaskQueue.requestRead('refresh',this)},refreshMonitors:function(){if(this.destroyed){return}var b=this.expandHelper,c=this.shrinkHelper,d=this.getContentBounds(),f=d.width,e=d.height,a;if(b&&!b.destroyed){a=b.style;a.width=f+1+'px';a.height=e+1+'px'}if(c&&!c.destroyed){a=c.style;a.width=f+'px';a.height=e+'px'}Ext.TaskQueue.requestRead('refresh',this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,'OverflowChange'],0);Ext.cmd.derive('Ext.util.SizeMonitor',Ext.Base,{constructor:function(b){var a=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new a.OverflowChange(b)}else {return new a.Scroll(b)}}},1,0,0,0,0,0,[Ext.util,'SizeMonitor'],0);Ext.cmd.derive('Ext.event.publisher.ElementSize',Ext.event.publisher.Publisher,{type:'size',handledEvents:['resize'],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(b){var a=b.id,c=this.subscribers,d=this.monitors;if(c[a]){++c[a]}else {c[a]=1;d[a]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})}b.on('painted','forceRefresh',d[a]);return !0},unsubscribe:function(e){var a=e.id,c=this.subscribers,d=this.monitors,b;if(c[a]&&!--c[a]){delete c[a];b=d[a];e.un('painted','forceRefresh',b);b.destroy();delete d[a]}},onElementResize:function(a,b){Ext.TaskQueue.requestRead('fire',this,[a,'resize',[a,b]])}},1,0,0,0,0,0,[Ext.event.publisher,'ElementSize'],function(a){a.instance=new a()});Ext.cmd.derive('Ext.util.paintmonitor.Abstract',Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:'',monitorClass:'',constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?'addEventListener':'removeEventListener'](this.eventName,this.onElementPainted,!0)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:['x-paint-monitor',this.monitorClass]},!0);a.appendChild(this.monitorElement);a.addCls('x-paint-monitored');this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var a=this,c=a.monitorElement,d=c.parentNode,b=a.getElement();a.bindListeners(!1);delete a.monitorElement;if(b&&!b.destroyed){b.removeCls('x-paint-monitored');delete a._element}if(d){d.removeChild(c)}a.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,'Abstract'],0);Ext.cmd.derive('Ext.util.paintmonitor.CssAnimation',Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?'webkitAnimationEnd':'animationend',monitorClass:'cssanimation',onElementPainted:function(a){if(a.animationName==='x-paint-monitor-helper'){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,'CssAnimation'],0);Ext.cmd.derive('Ext.util.PaintMonitor',Ext.Base,{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}},1,0,0,0,0,0,[Ext.util,'PaintMonitor'],0);Ext.cmd.derive('Ext.event.publisher.ElementPaint',Ext.event.publisher.Publisher,{type:'paint',handledEvents:['painted'],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(d){var b=this,a=d.id,c=b.subscribers;if(c[a]){++c[a]}else {c[a]=1;b.monitors[a]=new Ext.util.PaintMonitor({element:d,callback:b.onElementPainted,scope:b,args:[d]})}},unsubscribe:function(d){var a=d.id,b=this.subscribers,c=this.monitors;if(b[a]&&!--b[a]){delete b[a];c[a].destroy();delete c[a]}},onElementPainted:function(a){Ext.TaskQueue.requestRead('fire',this,[a,'painted',[a]])}},1,0,0,0,0,0,[Ext.event.publisher,'ElementPaint'],function(a){a.instance=new a()});Ext.cmd.derive('Ext.dom.Element',Ext.Base,function(a){var h=window,b=document,F='ext-window',D='ext-document',w='width',H='height',ac='min-width',_='min-height',ab='max-width',$='max-height',S='top',P='right',ag='bottom',R='left',aa='visibility',M='hidden',G='display',x='none',O='z-index',u='position',ad='relative',N='static',i='-',T=/\w/g,k=/\s+/,V=/[\s]+/,Y=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,U=/table-row|table-.*-group/,Q=/top/i,d={t:'border-top-width',r:'border-right-width',b:'border-bottom-width',l:'border-left-width'},f={t:'padding-top',r:'padding-right',b:'padding-bottom',l:'padding-left'},v={t:'margin-top',r:'margin-right',b:'margin-bottom',l:'margin-left'},Z=[f.l,f.r,f.t,f.b],B=[d.l,d.r,d.t,d.b],ae=/\d+$/,I=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,C='px',af=/(-[a-z])/gi,J=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,t=/^\d+(?:\.\d*)?px$/i,A={},y='originalDisplay',X=function(c,b){return b.charAt(1).toUpperCase()},E=function(d,e){var c,b,f;if(d.nodeType===1){d._extData=null;if(e){c=d.childNodes;for(b=0,f=c.length;b<f;++b){E(c[b],e)}}}},m='x-hidden-visibility',j='x-hidden-display',o='x-hidden-offsets',r='x-hidden-clip',q='x-sized',p='x-unsized',n='x-stretched',W='x-no-touch-scroll',g={style:'style',className:'className',cls:'cls',classList:'classList',text:'text',hidden:'hidden',html:'html',children:'children'},z=0,K=0,L=!1,l=!1,s,c,e;return {alternateClassName:['Ext.Element'],observableType:'element',isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:'ext-element-',styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(d){var c=this,e;if(typeof d==='string'){d=b.getElementById(d)}if(!d){return null}c.dom=d;e=d.id;if(e){c.id=e}else {e=d.id=c.getUniqueId()}c.el=c;Ext.cache[e]=c;c.mixins.observable.constructor.call(c)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:I,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},addUnits:function(b,c){if(typeof b==='number'){return b+(c||C)}if(b===''||b==='auto'||b==null){return b||''}if(ae.test(b)){return b+(c||C)}if(!I.test(b)){return b||''}return b},create:function(c,l){var p=this,n=g.hidden,e,m,k,d,h,f,o,i;if(!c){c={}}if(c.isElement){return l?c.dom:c}else {if('nodeType' in c){return l?c:Ext.get(c)}}if(typeof c==='string'){return b.createTextNode(c)}k=c.tag;if(!k){k='div'}if(c.namespace){e=b.createElementNS(c.namespace,k)}else {e=b.createElement(k)}m=e.style;if(c[n]){i=c.className;i=i==null?'':i+' ';c.className=i+j;delete c[n]}for(h in c){if(h!=='tag'){d=c[h];switch(h){case g.style:if(typeof d==='string'){e.setAttribute(h,d)}else {for(f in d){if(d.hasOwnProperty(f)){m[f]=d[f]}}};break;case g.className:case g.cls:e.className=d;break;case g.classList:e.className=d.join(' ');break;case g.text:e.textContent=d;break;case g.html:e.innerHTML=d;break;case g.children:for(f=0,o=d.length;f<o;f++){e.appendChild(p.create(d[f],!0))};break;default:if(d!=null){e.setAttribute(h,d)};}}}if(l){return e}else {return p.get(e)}},detach:function(){var b=this.dom;if(b&&b.parentNode&&b.tagName!=='BODY'){b.parentNode.removeChild(b)}return this},fly:function(c,b){return Ext.fly(c,b)},fromPoint:function(c,d){return Ext.get(b.elementFromPoint(c,d))},get:function(c){var m=this,g=Ext.cache,f,j,e,d,l,i,k;if(!c){return null}if(c.isFly){c=c.dom}if(typeof c==='string'){e=c;if(g.hasOwnProperty(e)){d=g[e];if(d.skipGarbageCollection||!Ext.isGarbage(d.dom)){return d}else {d.destroy()}}if(e===F){return a.get(h)}else {if(e===D){return a.get(b)}}j=Ext.getElementById?Ext.getElementById(e):b.getElementById(e);if(j){return new a(j)}}f=c.nodeType;if(f){l=f===9;k=m.validNodeTypes[f]}else {i=c.window==c}if(k||i){e=c.id;if(g.hasOwnProperty(e)){d=g[e];if(d.skipGarbageCollection||c===d.dom||!Ext.isGarbage(d.dom)){return d}else {d.destroy()}}if(c===b){c.id=D}if(c==h){c.id=F}c=new a(c);if(i||l){c.skipGarbageCollection=!0}return c}if(c.isElement){return c}if(c.isComposite){return c}if(Ext.isIterable(c)){return m.select(c)}return null},getActiveElement:function(d){var c=b.activeElement;if(!c||!c.focus){c=b.body}return d?Ext.get(c):c},getDocumentHeight:function(){return Math.max(!Ext.isStrict?b.body.scrollHeight:b.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?b.body.scrollWidth:b.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return h.orientation==0?'portrait':'landscape'}return h.innerHeight>h.innerWidth?'portrait':'landscape'},getViewportHeight:function(){var c=a._viewportHeight;if(Ext.isIE9m){return b.documentElement.clientHeight}return c!=null?c:h.innerHeight},getViewportWidth:function(){var c=a._viewportWidth;if(Ext.isIE9m){return b.documentElement.clientWidth}return c!=null?c:h.innerWidth},getViewSize:function(){return {width:a.getViewportWidth(),height:a.getViewportHeight()}},normalize:function(b){return A[b]||(A[b]=b.replace(af,X))},_onWindowFocusChange:function(b){if(Ext.fly(b.target).is(a.editableSelector)){z=new Date();L=b.type==='focusin'||b.type==='pointerup'}},_onWindowResize:function(){var c=window.innerWidth,b=window.innerHeight,g=new Date(),f=1000,d,e;d=c-a._windowWidth;e=b-a._windowHeight;a._windowWidth=c;a._windowHeight=b;if(g-z<f||g-K<f){if(d===0&&(L&&e<=-a.minKeyboardHeight)){l=!0;return}}if(l&&d===0&&e>=a.minKeyboardHeight){l=!1;K=new Date()}if(l){return}a._viewportWidth=c;a._viewportHeight=b},parseBox:function(c){c=c||0;var e=typeof c,b,d;if(e==='number'){return {top:c,right:c,bottom:c,left:c}}else {if(e!=='string'){return c}}b=c.split(' ');d=b.length;if(d===1){b[1]=b[2]=b[3]=b[0]}else {if(d===2){b[2]=b[0];b[3]=b[1]}else {if(d===3){b[3]=b[1]}}}return {top:parseFloat(b[0])||0,right:parseFloat(b[1])||0,bottom:parseFloat(b[2])||0,left:parseFloat(b[3])||0}},parseStyles:function(c){var d={},b;if(c){J.lastIndex=0;while(b=J.exec(c)){d[b[1]]=b[2]||''}}return d},select:function(d,c,e){return Ext.fly(e||b).select(d,c)},query:function(c,d,e){return Ext.fly(e||b).query(c,d)},unitizeBox:function(b,d){var c=this;b=c.parseBox(b);return c.addUnits(b.top,d)+' '+c.addUnits(b.right,d)+' '+c.addUnits(b.bottom,d)+' '+c.addUnits(b.left,d)},serializeForm:function(l){var m=l.elements||(b.forms[l]||Ext.getDom(l)).elements,n=!1,f=encodeURIComponent,g='',q=m.length,c,h,d,k,o,i,j,p,e;for(i=0;i<q;i++){c=m[i];h=c.name;d=c.type;k=c.options;if(!c.disabled&&h){if(/select-(one|multiple)/i.test(d)){p=k.length;for(j=0;j<p;j++){e=k[j];if(e.selected){o=e.hasAttribute('value');g+=Ext.String.format('{0}={1}&',f(h),f(o?e.value:e.text))}}}else {if(!/file|undefined|reset|button/i.test(d)){if(!(/radio|checkbox/i.test(d)&&!c.checked)&&!(d=='submit'&&n)){g+=f(h)+'='+f(c.value)+'&';n=/submit/i.test(d)}}}}}return g.substr(0,g.length-1)},getCommonAncestor:function(c,d,b){e=e||new Ext.dom.Fly();e.attach(Ext.getDom(c));while(!e.isAncestor(d)){if(e.dom.parentNode){e.attach(e.dom.parentNode)}else {e.attach(document.body);break}}return b?e.dom:Ext.get(e)}},addCls:function(c,e,f){var d=this,h=d.getData(),m,n,l,j,g,o,b;if(!c){return d}if(!h.isSynchronized){d.synchronize()}n=d.dom;l=h.classMap;j=h.classList;e=e?e+i:'';f=f?i+f:'';if(typeof c==='string'){c=c.split(k)}for(g=0,o=c.length;g<o;g++){b=c[g];if(b){b=e+b+f;if(!l[b]){l[b]=!0;j.push(b);m=!0}}}if(m){n.className=j.join(' ')}return d},addStyles:function(i,h){var g=0,d=(i||'').match(T),b,f=d.length,e,c=[];if(f===1){g=Math.abs(parseFloat(this.getStyle(h[d[0]]))||0)}else {if(f){for(b=0;b<f;b++){e=d[b];c.push(h[e])}c=this.getStyle(c);for(b=0;b<f;b++){e=d[b];g+=parseFloat(c[h[e]])||0}}}return g},addUnits:function(c,b){return a.addUnits(c,b)},adjustDirect2DDimension:function(e){var g=this,b=g.dom,c=g.getStyle('display'),i=b.style.display,h=b.style.position,j=e===w?0:1,d=b.currentStyle,f;if(c==='inline'){b.style.display='inline-block'}b.style.position=c.match(U)?'absolute':'static';f=(parseFloat(d[e])||parseFloat(d.msTransformOrigin.split(' ')[j])*2)%1;b.style.position=h;if(c==='inline'){b.style.display=i}return f},animate:function(b){b=new Ext.fx.Animation(b);b.setElement(this);this._activeAnimation=b;b.on({animationend:this._onAnimationEnd});Ext.Animator.run(b);return b},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(b,d){var f=this,c,g,e;if(b.nodeType||b.dom||typeof b==='string'){b=Ext.getDom(b);f.dom.appendChild(b);return !d?Ext.get(b):b}else {if(b.length){c=Ext.fly(document.createDocumentFragment());g=b.length;for(e=0;e<g;e++){c.appendChild(b[e],d)}f.dom.appendChild(c.dom);return d?c.dom:c}else {return f.createChild(b,null,d)}}},appendTo:function(b){Ext.getDom(b).appendChild(this.dom);return this},applyStyles:function(b){if(b){if(typeof b==='function'){b=b.call()}if(typeof b==='string'){b=a.parseStyles(b)}if(typeof b==='object'){this.setStyle(b)}}return this},blur:function(){var d=this,c=d.dom;if(c!==b.body){try{c.blur()}catch(ah){}return d}else {return d.focus(undefined,c)}},cacheScrollValues:function(){var i=this,g=[],e=[],f,b,d,h;c=c||new Ext.dom.Fly();f=i.query('*');for(d=0,h=f.length;d<h;d++){b=f[d];if(b.scrollTop>0||b.scrollLeft!==0){e.push(b);g.push(c.attach(b).getScroll())}}return function(){var d,b,f;for(b=0,f=e.length;b<f;b++){d=g[b];c.attach(e[b]);c.setScrollLeft(d.left);c.setScrollTop(d.top)}}},center:function(c){return this.alignTo(c||b,'c-c')},child:function(d,c){var b=this,e=Ext.get(b).id;return b.selectNode(Ext.makeIdSelector(e)+' > '+d,!!c)},clone:function(c,d){var b=this.dom.cloneNode(c);if(Ext.supports.CloneNodeCopiesExpando){E(b,c)}return d?b:Ext.get(b)},constrainScrollLeft:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollWidth-b.clientWidth),0)},constrainScrollTop:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollHeight-b.clientHeight),0)},createChild:function(b,c,d){b=b||{tag:'div'};if(c){return Ext.DomHelper.insertBefore(c,b,d!==!0)}else {return Ext.DomHelper.append(this.dom,b,d!==!0)}},contains:function(b){if(!b){return !1}var d=this,c=Ext.getDom(b);return c===d.dom||d.isAncestor(c)},destroy:function(){var c=this,b=c.dom;if(b&&b.parentNode){b.parentNode.removeChild(b)}c.collect();if(!c.isFly){c.callParent()}},detach:function(){var b=this.dom;if(b&&b.parentNode&&b.tagName!=='BODY'){b.parentNode.removeChild(b)}return this},disableShadow:function(){var b=this.shadow;if(b){b.hide();b.disabled=!0}},disableShim:function(){var b=this.shim;if(b){b.hide();b.disabled=!0}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(b){b.preventDefault()},destroyable:!0,delegated:!1})},disableTouchScroll:function(){this.addCls(W);this.on({touchmove:function(b){b.preventDefault()},translate:!1})},doReplaceWith:function(c){var b=this.dom;b.parentNode.replaceChild(Ext.getDom(c),b)},doScrollIntoView:function(b,o,d,m,l,n){c=c||new Ext.dom.Fly();var e=this,k=e.dom,i=c.attach(b)[l](),j=b.scrollTop,h=e.getScrollIntoViewXY(b,i,j),f=h.x,g=h.y;if(m){if(d){d=Ext.apply({listeners:{afteranimate:function(){c.attach(k).highlight()}}},d)}else {c.attach(k).highlight()}}if(g!==j){c.attach(b).scrollTo('top',g,d)}if(o!==!1&&f!==i){c.attach(b)[n]('left',f,d)}return e},down:function(c,b){return this.selectNode(c,!!b)},enableShadow:function(f,e){var c=this,b=c.shadow||(c.shadow=new Ext.dom.Shadow(Ext.apply({target:c},f))),d=c.shim;if(d){d.offsets=b.outerOffsets;d.shadow=b;b.shim=d}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1},enableShim:function(f,e){var c=this,b=c.shim||(c.shim=new Ext.dom.Shim(Ext.apply({target:c},f))),d=c.shadow;if(d){b.offsets=d.outerOffsets;b.shadow=d;d.shim=b}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1},findParent:function(g,d,h){var i=this,c=i.dom,e=b.documentElement,f=0;if(d||d===0){if(typeof d!=='number'){e=Ext.getDom(d);d=Number.MAX_VALUE}}else {d=50}while(c&&c.nodeType===1&&f<d&&c!==e){if(Ext.fly(c).is(g)){return h?Ext.get(c):c}f++;c=c.parentNode}return null},findParentNode:function(c,e,d){var b=Ext.fly(this.dom.parentNode);return b?b.findParent(c,e,d):null},first:function(c,b){return this.matchNode('nextSibling','firstChild',c,b)},focus:function(d,b){var c=this;b=b||c.dom;if(Number(d)){Ext.defer(c.focus,d,c,[null,b])}else {Ext.GlobalEvents.fireEvent('beforefocus',b);b.focus()}return c},collect:function(){var b=this,e=b.dom,c=b.shadow,d=b.shim;if(!b.isFly){b.mixins.observable.destroy.call(b);delete Ext.cache[b.id];b.destroyed=!0;b.el=null}if(e){e._extData=b.dom=null}if(c){c.hide();b.shadow=null}if(d){d.hide();b.shim=null}},getAnchorToXY:function(e,b,d,c){return e.getAnchorXY(b,d,c)},getAttribute:function(b,d){var c=this.dom;return d?c.getAttributeNS(d,b)||c.getAttribute(d+':'+b):c.getAttribute(b)||c[b]||null},getAttributes:function(){var d=this.dom.attributes,e={},c,b,f;for(b=0,f=d.length;b<f;b++){c=d[b];e[c.name]=c.value}return e},getBottom:function(b){return (b?this.getLocalY():this.getY())+this.getHeight()},getById:function(d,e){var c=b.getElementById(d)||this.dom.querySelector(Ext.makeIdSelector(d));return e?c:c?Ext.get(c):null},getBorderPadding:function(){var c=this.getStyle(Z),b=this.getStyle(B);return {beforeX:(parseFloat(b[d.l])||0)+(parseFloat(c[f.l])||0),afterX:(parseFloat(b[d.r])||0)+(parseFloat(c[f.r])||0),beforeY:(parseFloat(b[d.t])||0)+(parseFloat(c[f.t])||0),afterY:(parseFloat(b[d.b])||0)+(parseFloat(c[f.b])||0)}},getBorders:function(){var b=this.getStyle(B);return {beforeX:parseFloat(b[d.l])||0,afterX:parseFloat(b[d.r])||0,beforeY:parseFloat(b[d.t])||0,afterY:parseFloat(b[d.b])||0}},getBorderWidth:function(b){return this.addStyles(b,d)},getData:function(d){var c=this.dom,b;if(c){b=c._extData;if(!b&&!d){c._extData=b={}}}return b},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(e,f){var c=this,g=c.isStyle('display','none'),b,d;if(g){return 0}b=c.dom.offsetHeight;if(Ext.supports.Direct2DBug){d=c.adjustDirect2DDimension(H);if(f){b+=d}else {if(d>0&&d<0.5){b++}}}if(e){b-=c.getBorderWidth('tb')+c.getPadding('tb')}return b<0?0:b},getHtml:function(){return this.dom?this.dom.innerHTML:''},getLeft:function(b){return b?this.getLocalX():this.getX()},getLocalX:function(){var d=this,c,b=d.getStyle('left');if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=d.getX();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getX()}}}return b},getLocalXY:function(){var e=this,d,f=e.getStyle(['left','top']),b=f.left,c=f.top;if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=e.getX();d=e.dom.offsetParent;if(d){b-=Ext.fly(d).getX()}}}if(!c||c==='auto'){c=0}else {if(t.test(c)){c=parseFloat(c)}else {c=e.getY();d=e.dom.offsetParent;if(d){c-=Ext.fly(d).getY()}}}return [b,c]},getLocalY:function(){var d=this,c,b=d.getStyle('top');if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=d.getY();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getY()}}}return b},getMargin:function(){var c={t:'top',l:'left',r:'right',b:'bottom'},b=['margin-top','margin-left','margin-right','margin-bottom'];return function(g){var h=this,e,f,d;if(!g){e=h.getStyle(b);d={};if(e&&typeof e==='object'){d={};for(f in v){d[f]=d[c[f]]=parseFloat(e[v[f]])||0}}}else {d=h.addStyles(g,v)}return d}}(),getPadding:function(b){return this.addStyles(b,f)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(b){return (b?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var h=this,d=h.dom,g=b.documentElement,e,f,c=document.body;if(d===b||d===c){e=g.scrollLeft||(c?c.scrollLeft:0);f=g.scrollTop||(c?c.scrollTop:0)}else {e=d.scrollLeft;f=d.scrollTop}return {left:e,top:f}},getScrollIntoViewXY:function(r,b,c){var p=this.dom,h=Ext.getDom(r),j=this.getOffsetsTo(h),o=p.offsetWidth,m=p.offsetHeight,f=j[0]+b,g=j[1]+c,l=g+m,n=f+o,d=h.clientHeight,e=h.clientWidth,i=b,k=c,q=k+d,s=i+e;if(m>d||g<k){c=g}else {if(l>q){c=l-d}}if(o>e||f<i){b=f}else {if(n>s){b=n-e}}return {x:b,y:c}},getScrollLeft:function(){var c=this.dom;if(c===b||c===document.body){return this.getScroll().left}else {return c.scrollLeft}},getScrollTop:function(){var c=this.dom;if(c===b||c===document.body){return this.getScroll().top}else {return c.scrollTop}},getSize:function(b){return {width:this.getWidth(b),height:this.getHeight(b)}},getStyle:function(n,i){var k=this,e=k.dom,m=typeof n!=='string',p=k.styleHooks,b=n,j=b,q=1,h,o,f,d,g,c,l;if(m){f={};b=j[0];l=0;if(!(q=j.length)){return f}}if(!e||e.documentElement){return f||''}h=e.style;if(i){c=h}else {c=e.ownerDocument.defaultView.getComputedStyle(e,null);if(!c){i=!0;c=h}}do{d=p[b];if(!d){p[b]=d={name:a.normalize(b)}}if(d.get){g=d.get(e,k,i,c)}else {o=d.name;g=c[o]}if(!m){return g}f[b]=g;b=j[++l]}while(l<q);return f},getStyleValue:function(b){return this.dom.style.getPropertyValue(b)},getTop:function(b){return b?this.getLocalY():this.getY()},getValue:function(c){var b=this.dom.value;return c?parseInt(b,10):b},getViewSize:function(){var c=this.dom;if(c===b||c===b.body){return {width:a.getViewportWidth(),height:a.getViewportHeight()}}else {return {width:c.clientWidth,height:c.clientHeight}}},getVisibilityMode:function(){var d=this,c=d.getData(),b=c.visibilityMode;if(b===undefined){c.visibilityMode=b=a.DISPLAY}return b},getWidth:function(h,f){var c=this,g=c.dom,i=c.isStyle('display','none'),d,b,e;if(i){return 0}if(Ext.supports.BoundingClientRect){d=g.getBoundingClientRect();b=c.vertical&&!Ext.supports.RotatedBoundingClientRect?d.bottom-d.top:d.right-d.left;b=f?b:Math.ceil(b)}else {b=g.offsetWidth}if(Ext.supports.Direct2DBug&&!c.vertical){e=c.adjustDirect2DDimension(w);if(f){b+=e}else {if(e>0&&e<0.5){b++}}}if(h){b-=c.getBorderWidth('lr')+c.getPadding('lr')}return b<0?0:b},getX:function(){return this.getXY()[0]},getXY:function(){var h=Math.round,e=this.dom,f=0,g=0,c,d;if(e!==b&&e!==b.body){try{c=e.getBoundingClientRect()}catch(ah){c={left:0,top:0}}f=h(c.left);g=h(c.top);d=Ext.getDoc().getScroll();f+=d.left;g+=d.top}return [f,g]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle('z-index'),10)},hasCls:function(c){var b=this.getData();if(!b.isSynchronized){this.synchronize()}return b.classMap.hasOwnProperty(c)},hide:function(){this.setVisible(!1);return this},insertAfter:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b.nextSibling);return this},insertBefore:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b);return this},insertFirst:function(b,c){b=b||{};if(b.nodeType||b.dom||typeof b==='string'){b=Ext.getDom(b);this.dom.insertBefore(b,this.dom.firstChild);return !c?Ext.get(b):b}else {return this.createChild(b,this.dom.firstChild,c)}},insertHtml:function(d,e,c){var b=Ext.DomHelper.insertHtml(d,this.dom,e);return c?Ext.get(b):b},insertSibling:function(b,k,f){var d=this,j=Ext.DomHelper,h=(k||'before').toLowerCase()==='after',c,g,i,e;if(Ext.isIterable(b)){i=b.length;g=Ext.fly(document.createDocumentFragment());if(Ext.isArray(b)){for(e=0;e<i;e++){c=g.appendChild(b[e],f)}}else {for(e=0;e<i;e++){g.dom.appendChild(c=b[0])}if(f===!1){c=Ext.get(c)}}d.dom.parentNode.insertBefore(g.dom,h?d.dom.nextSibling:d.dom);return c}b=b||{};if(b.nodeType||b.dom){c=d.dom.parentNode.insertBefore(Ext.getDom(b),h?d.dom.nextSibling:d.dom);if(!f){c=Ext.get(c)}}else {if(h&&!d.dom.nextSibling){c=j.append(d.dom.parentNode,b,!f)}else {c=j[h?'insertAfter':'insertBefore'](d.dom,b,!f)}}return c},is:function(c){var d=this.dom,b;if(!c){b=!0}else {if(!d.tagName){b=!1}else {if(Ext.isFunction(c)){b=c(d)}else {b=d[Ext.supports.matchesSelector](c)}}}return b},isAncestor:function(e){var d=!1,c=this.dom,b=Ext.getDom(e);if(c&&b){if(c.contains){return c.contains(b)}else {if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(b)&16)}else {while(b=b.parentNode){d=b===c||d}}}}return d},isPainted:function(){return !Ext.browser.is.IE?function(){var b=this.dom;return Boolean(b&&b.offsetParent)}:function(){var b=this.dom;return Boolean(b&&(b.offsetHeight!==0&&b.offsetWidth!==0))}}(),isScrollable:function(){var b=this.dom;return b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth},isStyle:function(b,c){return this.getStyle(b)===c},isVisible:function(d){var b=this.dom,c;if(!b){return !1}if(!s){s=new Ext.dom.Fly()}for(c=b.ownerDocument.documentElement;b!==c;b=b.parentNode){if(!b||b.nodeType===11||s.attach(b).isStyle(aa,M)||s.isStyle(G,x)){return !1}if(!d){break}}return !0},last:function(c,b){return this.matchNode('previousSibling','lastChild',c,b)},maskIframes:function(){var b=document.getElementsByTagName('iframe');Ext.each(b,function(c){var b=Ext.fly(c.parentNode),d=b.mask();d.setStyle('background-color','transparent')})},matchNode:function(g,f,c,e){var d=this.dom,b;if(!d){return null}b=d[f];while(b){if(b.nodeType===1&&(!c||Ext.fly(b,'_matchNode').is(c))){return !e?Ext.get(b):b}b=b[g]}return null},next:function(c,b){return this.matchNode('nextSibling','nextSibling',c,b)},parent:function(c,b){return this.matchNode('parentNode','parentNode',c,b)},position:function(c,d,e,f){var b=this;if(b.dom.tagName!=='BODY'){if(!c&&b.isStyle(u,N)){b.setStyle(u,ad)}else {if(c){b.setStyle(u,c)}}if(d){b.setStyle(O,d)}if(e||f){b.setXY([e||!1,f||!1])}}},prev:function(c,b){return this.matchNode('previousSibling','previousSibling',c,b)},query:function(b,e,j){var i=this.dom,g,l,k,h,f,c,d;if(!i){return null}e=e!==!1;b=b.split(',');if(!j){g=[]}for(c=0,l=b.length;c<l;c++){if(typeof b[c]==='string'){if(j){h=i.querySelector(b[c]);return e?h:Ext.get(h)}f=i.querySelectorAll(b[c]);for(d=0,k=f.length;d<k;d++){g.push(e?f[d]:Ext.get(f[d]))}}}return g},radioCls:function(b){var e=this.dom.parentNode.childNodes,c;b=Ext.isArray(b)?b:[b];for(var d=0,f=e.length;d<f;d++){c=e[d];if(c&&c.nodeType===1){Ext.fly(c).removeCls(b)}}return this.addCls(b)},redraw:function(){var c=this.dom,b=c.style;b.display='none';c.offsetHeight;b.display=''},remove:function(){this.destroy()},removeChild:function(b){this.dom.removeChild(Ext.getDom(b));return this},removeCls:function(c,e,f){var d=this,h=d.getData(),m,n,l,j,g,o,b;if(!c){return d}if(!h.isSynchronized){d.synchronize()}n=d.dom;l=h.classMap;j=h.classList;e=e?e+i:'';f=f?i+f:'';if(typeof c==='string'){c=c.split(k)}for(g=0,o=c.length;g<o;g++){b=c[g];if(b){b=e+b+f;if(l[b]){delete l[b];Ext.Array.remove(j,b);m=!0}}}if(m){n.className=j.join(' ')}return d},repaint:function(){var b=this;b.addCls('x-repaint');Ext.defer(function(){if(b.dom){Ext.fly(b.dom).removeCls('x-repaint')}},1);return b},replace:function(b,f){b=Ext.getDom(b);var c=b.parentNode,e=b.id,d=this.dom;if(f!==!1&&e&&Ext.cache[e]){c.insertBefore(d,b);Ext.get(b).destroy()}else {c.replaceChild(d,b)}return this},replaceCls:function(c,b,h,e){var j=this,p,g,n,d,m,f,l=j.getData(),o;if(!c&&!b){return j}c=c||[];b=b||[];if(!l.isSynchronized){j.synchronize()}if(!e){e=''}p=j.dom;g=l.classMap;n=l.classList;h=h?h+i:'';e=e?i+e:'';if(typeof c==='string'){c=c.split(k)}if(typeof b==='string'){b=b.split(k)}for(d=0,m=c.length;d<m;d++){f=h+c[d]+e;if(g[f]){delete g[f];o=!0}}for(d=0,m=b.length;d<m;d++){f=h+b[d]+e;if(!g[f]){g[f]=!0;o=!0}}if(o){l.classList=n=Ext.Object.getKeys(g);p.className=n.join(' ')}return j},replaceWith:function(c){var b=this,e=b.dom,f=e.parentNode,g=Ext.cache,d;b.clearListeners();if(c.nodeType||c.dom||typeof c==='string'){c=Ext.get(c);d=f.insertBefore(c.dom,e)}else {d=Ext.DomHelper.insertBefore(e,c)}f.removeChild(e);b.dom=d;if(!b.isFly){delete g[b.id];g[b.id=Ext.id(d)]=b}return b},resolveListenerScope:function(c){var b=this.component;return b?b.resolveListenerScope(c):this},scroll:function(b,e,j){if(!this.isScrollable()){return !1}b=b.charAt(0);var f=this,i=f.dom,h=b==='r'||b==='l'?'left':'top',g=!1,c,d;if(b==='l'||b==='t'||b==='u'){e=-e}if(h==='left'){c=i.scrollLeft;d=f.constrainScrollLeft(c+e)}else {c=i.scrollTop;d=f.constrainScrollTop(c+e)}if(d!==c){this.scrollTo(h,d,j);g=!0}return g},scrollBy:function(b,c,e){var d=this,f=d.dom;if(b.length){e=c;c=b[1];b=b[0]}else {if(typeof b!='number'){e=c;c=b.y;b=b.x}}if(b){d.scrollTo('left',d.constrainScrollLeft(f.scrollLeft+b),e)}if(c){d.scrollTo('top',d.constrainScrollTop(f.scrollTop+c),e)}return d},scrollChildIntoView:function(c,b){Ext.fly(c).scrollIntoView(this,b)},scrollIntoView:function(b,e,d,c){b=Ext.getDom(b)||Ext.getBody().dom;return this.doScrollIntoView(b,e,d,c,'getScrollLeft','scrollTo')},scrollTo:function(h,e,d){var i=Q.test(h),c=this,f=i?'scrollTop':'scrollLeft',g=c.dom,b;if(!d||!c.anim){g[f]=e;g[f]=e}else {b={to:{}};b.to[f]=e;if(Ext.isObject(d)){Ext.applyIf(b,d)}c.animate(b)}return c},select:function(c,e){var d,b;if(typeof c==='string'){b=this.query(c,!e)}else {b=c;d=!0}return e?new Ext.CompositeElement(b,!d):new Ext.CompositeElementLite(b,!0)},selectNode:function(b,c){return this.query(b,c,!0)},set:function(e,g){var f=this,d=f.dom,b,c;for(b in e){if(e.hasOwnProperty(b)){c=e[b];if(b==='style'){f.applyStyles(c)}else {if(b==='cls'){d.className=c}else {if(g!==!1){if(c===undefined){d.removeAttribute(b)}else {d.setAttribute(b,c)}}else {d[b]=c}}}}}return f},setBottom:function(b){this.dom.style[ag]=a.addUnits(b);return this},setCls:function(c){var f=this,e=f.getData(),d,h,i,g,b;if(!e.isSynchronized){f.synchronize()}if(typeof c==='string'){c=c.split(k)}e.classList=b=c.slice();e.classMap=g={};for(d=0,h=b.length;d<h;d++){g[b[d]]=!0}f.dom.className=b.join(' ')},setDisplayed:function(c){var b=this;if(typeof c==='boolean'){c=c?b._getDisplay():x}b.setStyle(G,c);if(b.shadow||b.shim){b.setUnderlaysVisible(c!==x)}return b},setHeight:function(c){var b=this;b.dom.style[H]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setHtml:function(b){if(this.dom){this.dom.innerHTML=b}return this},setId:function(c){var b=this,d=b.id,e=Ext.cache;if(d){delete e[d]}b.dom.id=c;b.id=c;e[c]=b;return b},setLeft:function(c){var b=this;b.dom.style[R]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalX:function(d){var b=this,c=b.dom.style;c.right='auto';c.left=d===null?'auto':d+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalXY:function(b,e){var d=this,c=d.dom.style;c.right='auto';if(b&&b.length){e=b[1];b=b[0]}if(b===null){c.left='auto'}else {if(b!==undefined){c.left=b+'px'}}if(e===null){c.top='auto'}else {if(e!==undefined){c.top=e+'px'}}if(d.shadow||d.shim){d.syncUnderlays()}return d},setLocalY:function(c){var b=this;b.dom.style.top=c===null?'auto':c+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setMargin:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('margin',b,'important')}else {c.removeProperty('margin-top');c.removeProperty('margin-right');c.removeProperty('margin-bottom');c.removeProperty('margin-left')}},setMaxHeight:function(b){this.dom.style[$]=a.addUnits(b);return this},setMaxWidth:function(b){this.dom.style[ab]=a.addUnits(b);return this},setMinHeight:function(b){this.dom.style[_]=a.addUnits(b);return this},setMinWidth:function(b){this.dom.style[ac]=a.addUnits(b);return this},setOpacity:function(c){var b=this;if(b.dom){b.setStyle('opacity',c)}return b},setPadding:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('padding',b,'important')}else {c.removeProperty('padding-top');c.removeProperty('padding-right');c.removeProperty('padding-bottom');c.removeProperty('padding-left')}},setRight:function(b){this.dom.style[P]=a.addUnits(b);return this},setScrollLeft:function(b){this.dom.scrollLeft=b;return this},setScrollTop:function(b){this.dom.scrollTop=b;return this},setSize:function(b,d){var c=this,e=c.dom.style;if(Ext.isObject(b)){d=b.height;b=b.width}e.width=a.addUnits(b);e.height=a.addUnits(d);if(c.shadow||c.shim){c.syncUnderlays()}return c},setSizeState:function(d){var e=this,c,b;if(d===!0){c=q;b=[p,n]}else {if(d===!1){c=p;b=[q,n]}else {if(d===null){c=n;b=[q,p]}else {b=[q,p,n]}}}if(c){e.addCls(c)}e.removeCls(b);return e},setStyle:function(h,c){var e=this,f=e.dom,g=e.styleHooks,i=f.style,d=h,b;if(typeof d==='string'){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}else {for(d in h){if(h.hasOwnProperty(d)){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=h[d];c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}}}return e},setText:function(b){this.dom.textContent=b},setTop:function(c){var b=this;b.dom.style[S]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setUnderlaysVisible:function(d){var b=this.shadow,c=this.shim;if(b&&!b.disabled){if(d){b.show()}else {b.hide()}}if(c&&!c.disabled){if(d){c.show()}else {c.hide()}}},setVisibility:function(c){var b=this.dom.style;if(c){b.removeProperty('visibility')}else {b.setProperty('visibility','hidden','important')}},setVisibilityMode:function(b){this.getData().visibilityMode=b;return this},setVisible:function(d){var b=this,e=b.getVisibilityMode(),c=d?'removeCls':'addCls';switch(e){case a.DISPLAY:b.removeCls([m,o,r]);b[c](j);break;case a.VISIBILITY:b.removeCls([j,o,r]);b[c](m);break;case a.OFFSETS:b.removeCls([m,j,r]);b[c](o);break;case a.CLIP:b.removeCls([m,j,o]);b[c](r);break;}if(b.shadow||b.shim){b.setUnderlaysVisible(d)}return b},setWidth:function(c){var b=this;b.dom.style[w]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setX:function(b){return this.setXY([b,!1])},setXY:function(f){var b=this,d=b.translatePoints(f),e=b.dom.style,c;b.position();e.right='auto';for(c in d){if(!isNaN(d[c])){e[c]=d[c]+'px'}}if(b.shadow||b.shim){b.syncUnderlays()}return b},setY:function(b){return this.setXY([!1,b])},setZIndex:function(c){var b=this;if(b.shadow){b.shadow.setZIndex(c)}if(b.shim){b.shim.setZIndex(c)}return b.setStyle('z-index',c)},show:function(){this.setVisible(!0);return this},swapCls:function(h,g,c,b){if(c===undefined){c=!0}var f=this,e=c?h:g,d=c?g:h;if(d){f.removeCls(b?b+'-'+d:d)}if(e){f.addCls(b?b+'-'+e:e)}return f},synchronize:function(){var e=this,i=e.dom,f={},g=i.className,b,c,j,h,d=e.getData();if(g&&g.length>0){b=i.className.split(V);for(c=0,j=b.length;c<j;c++){h=b[c];f[h]=!0}}else {b=[]}d.classList=b;d.classMap=f;d.isSynchronized=!0;return e},syncUnderlays:function(){var b=this,c=b.shadow,d=b.shim,j=b.dom,e,h,i,g,f;if(b.isVisible()){e=b.getXY();h=e[0];i=e[1];g=j.offsetWidth;f=j.offsetHeight;if(c&&!c.hidden){c.realign(h,i,g,f)}if(d&&!d.hidden){d.realign(h,i,g,f)}}},toggleCls:function(b,c){if(typeof c!=='boolean'){c=!this.hasCls(b)}return c?this.addCls(b):this.removeCls(b)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var c='webkitTransform' in b.createElement('div').style?'webkitTransform':'transform';return function(b,d,e){this.dom.style[c]='translate3d('+(b||0)+'px, '+(d||0)+'px, '+(e||0)+'px)'}}(),unmaskIframes:function(){var b=document.getElementsByTagName('iframe');Ext.each(b,function(c){var b=Ext.fly(c.parentNode);b.unmask()})},unwrap:function(){var h=this.dom,f=h.parentNode,c,e=Ext.fly(Ext.Element.getActiveElement()),b,g,d,i;b=Ext.cache[e.id];if(b){e=b}if(this.contains(e)){if(b){b.suspendFocusEvents()}g=!0}if(f){c=f.parentNode;if(g){i=c.getAttribute('tabIndex');d=Ext.fly(c);d.set({tabIndex:-1});d.suspendFocusEvents();d.focus()}c.insertBefore(h,f);c.removeChild(f)}else {c=document.createDocumentFragment();c.appendChild(h)}if(g){if(b){b.focus();b.resumeFocusEvents()}else {Ext.fly(e).focus()}if(d){d.resumeFocusEvents();d.set({tabIndex:i})}}return this},up:function(b,d,c){return this.findParentNode(b,d,!c)},update:function(b){return this.setHtml(b)},wrap:function(l,f,g){var k=this,j=k.dom,b=Ext.DomHelper.insertBefore(j,l||{tag:'div'},!f),i=b,d=Ext.Element.getActiveElement(),c,e,h;c=Ext.cache[d.id];if(c){d=c}if(g){i=b.selectNode(g,f)}if(k.contains(d)){if(c){c.suspendFocusEvents()}h=b.dom.getAttribute('tabIndex');b.set({tabIndex:-1});b.suspendFocusEvents();b.focus();e=!0}i.appendChild(j);if(e){if(c){c.focus();c.resumeFocusEvents()}else {Ext.fly(d).focus()}b.resumeFocusEvents();b.set({tabIndex:h})}return b},privates:{doAddListener:function(b,l,k,c,j,i,h){var d=this,e,g,f;b=Ext.canonicalEventName(b);if(!d.blockedEvents[b]){e=d.mixins.observable.doAddListener;c=c||{};if(d.longpressEvents[b]){d.disableTouchContextMenu()}if(a.useDelegatedEvents===!1){c.delegated=c.delegated||!1}if(c.translate!==!1){g=d.additiveEvents[b];if(g){c.type=b;b=g;e.call(d,b,l,k,c,j,i,h)}f=d.eventMap[b];if(f){c.type=c.type||b;b=f}}e.call(d,b,l,k,c,j,i,h);delete c.type}},doRemoveListener:function(c,i,h){var b=this,d,f,g,e;if(!b.blockedEvents[c]){d=b.mixins.observable.doRemoveListener;if(b.longpressEvents[c]){e=this._contextMenuListenerRemover;if(e){e.destroy()}}g=b.additiveEvents[c];if(g){c=g;d.call(b,c,i,h)}f=b.eventMap[c];if(f){d.call(b,f,i,h)}d.call(b,c,i,h)}},_initEvent:function(b){return this.events[b]=new Ext.dom.ElementEvent(this,b)},_getDisplay:function(){var c=this.getData(),b=c[y];if(b===undefined){c[y]=b=''}return b},_getPublisher:function(d){var c=Ext.event.publisher.Publisher,b=c.publishersByEvent[d];if(!b||this.dom===window&&d==='resize'){b=c.publishers.dom}return b},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent('focus','blur')}this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function resumeFn(){var b;if(!this.destroyed){b=this.getData();if(b){b.suspendFocusEvents=!1}if(!this.isFly){this.resumeEvent('focus','blur')}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(resumeFn,this)}else {resumeFn.call(this)}}}},deprecated:{'5.0':{methods:{cssTranslate:null,getHTML:'getHtml',getOuterHeight:null,getOuterWidth:null,getPageBox:function(l){var e=this,c=e.dom,d=c.nodeName==='BODY',k=d?a.getViewportWidth():c.offsetWidth,g=d?a.getViewportHeight():c.offsetHeight,b=e.getXY(),j=b[1],i=b[0]+k,f=b[1]+g,h=b[0];if(l){return new Ext.util.Region(j,i,f,h)}else {return {left:h,top:j,width:k,height:g,right:i,bottom:f}}},getScrollParent:null,isDescendent:null,isTransparent:function(c){var b=this.getStyle(c);return b?Y.test(b):!1},purgeAllListeners:'clearListeners',removeAllListeners:'clearListeners',setHTML:'setHtml',setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,'Element',Ext,'Element'],function(d){var k=document,m=d.prototype,w=Ext.supports,n='pointerdown',o='pointermove',p='pointerup',q='pointercancel',r='MSPointerDown',s='MSPointerMove',t='MSPointerUp',C='MSPointerCancel',f='mousedown',g='mousemove',b='mouseup',z='mouseover',A='mouseout',D='mouseenter',E='mouseleave',h='touchstart',i='touchmove',j='touchend',l='touchcancel',x='click',v='dblclick',y='tap',u='doubletap',a=m.eventMap={},c=m.additiveEvents={},B=Ext.id,e;Ext.id=function(f,e){var b=Ext.getDom(f,!0),c,a;if(!b){a=B(f,e)}else {if(!(a=b.id)){a=B(null,e||d.prototype.identifiablePrefix);if(Ext.isSandboxed){c=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+'-');a=c+a}b.id=a}}return a};if(w.PointerEvents){a[f]=n;a[g]=o;a[b]=p;a[h]=n;a[i]=o;a[j]=p;a[l]=q;a[x]=y;a[v]=u;a[z]='pointerover';a[A]='pointerout';a[D]='pointerenter';a[E]='pointerleave'}else {if(w.MSPointerEvents){a[n]=r;a[o]=s;a[p]=t;a[q]=C;a[f]=r;a[g]=s;a[b]=t;a[h]=r;a[i]=s;a[j]=t;a[l]=C;a[x]=y;a[v]=u;a[z]='MSPointerOver';a[A]='MSPointerOut'}else {if(w.TouchEvents){a[n]=h;a[o]=i;a[p]=j;a[q]=l;a[f]=h;a[g]=i;a[b]=j;a[x]=y;a[v]=u;if(Ext.isWebKit&&Ext.os.is.Desktop){a[h]=f;a[i]=g;a[j]=b;a[l]=b;c[f]=f;c[g]=g;c[b]=b;c[h]=h;c[i]=i;c[j]=j;c[l]=l;c[n]=f;c[o]=g;c[p]=b;c[q]=b}}else {a[n]=f;a[o]=g;a[p]=b;a[q]=b;a[h]=f;a[i]=g;a[j]=b;a[l]=b}}}if(Ext.isWebKit){a.transitionend=Ext.browser.getVendorProperyName('transitionEnd');a.animationstart=Ext.browser.getVendorProperyName('animationStart');a.animationend=Ext.browser.getVendorProperyName('animationEnd')}if(!Ext.supports.MouseWheel&&!Ext.isOpera){a.mousewheel='DOMMouseScroll'}e=m.$eventOptions=Ext.Object.chain(m.$eventOptions);e.translate=e.capture=e.delegate=e.delegated=e.stopEvent=e.preventDefault=e.stopPropagation=e.element=1;m.styleHooks.opacity={name:'opacity',afterSet:function(e,b,c){var a=c.shadow;if(a){a.setOpacity(b)}}};m.getTrueXY=m.getXY;Ext.select=d.select;Ext.query=d.query;Ext.apply(Ext,{get:function(a){return d.get(a)},getDom:function(a){if(!a||!k){return null}return typeof a==='string'?Ext.getElementById(a):'dom' in a?a.dom:a},getBody:function(){if(!Ext._bodyEl){if(!k.body){throw new Error('[Ext.getBody] document.body does not yet exist')}Ext._bodyEl=Ext.get(k.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(k.head||k.getElementsByTagName('head')[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(k)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(a){a=a.dom||a;var e=a&&a.id,c=Ext.cache[e],b;if(c){c.destroy()}else {if(a&&(a.nodeType===3||a.tagName.toUpperCase()!=='BODY')){b=a.parentNode;if(b){b.removeChild(a)}}}}});Ext.isGarbage=function(a){return a&&a.nodeType===1&&a.tagName!=='BODY'&&a.tagName!=='HTML'&&(!a.parentNode||!a.offsetParent&&(Ext.isIE8?k.all[a.id]:k.getElementById(a.id))!==a&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(a)))};if(Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch){Ext.onReady(function(){var a=Ext.getWin();d._windowWidth=d._viewportWidth=window.innerWidth;d._windowHeight=d._viewportHeight=window.innerHeight;a.on({focusin:'_onWindowFocusChange',focusout:'_onWindowFocusChange',pointerup:'_onWindowFocusChange',capture:!0,delegated:!1,delay:1,scope:d});a.on({resize:'_onWindowResize',priority:2000,scope:d})})}});Ext.cmd.derive('Ext.util.Filter',Ext.Base,{isFilter:!0,config:{property:null,value:null,filterFn:null,id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,disableOnEmpty:!1,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(f){var e=a.isCollection?a.items:a,g=e.length,d=!0,b,c;for(b=0;d&&b<g;b++){c=e[b];if(!c.getDisabled()){d=c.filter(f)}}return d}},isInvalid:function(a){if(!a.filterFn){if(!a.property){return 'A Filter requires either a property or a filterFn to be set'}if(!a.hasOwnProperty('value')&&!a.operator){return 'A Filter requires either a property and value, or a filterFn to be set'}}return !1}},constructor:function(a){this.initConfig(a)},preventConvert:{'in':1,notin:1},filter:function(e){var a=this,d=a._filterFn||a.getFilterFn(),c=a.getConvert(),b=a._value;a._filterValue=b;a.isDateValue=Ext.isDate(b);if(a.isDateValue){a.dateValue=b.getTime()}if(c&&!a.preventConvert[a.getOperator()]){a._filterValue=c.call(a.scope||a,b)}return d.call(a.scope||a,e)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,'ext-filter-')}this._id=a}return a},getFilterFn:function(){var b=this,a=b._filterFn,c;if(!a){c=b.getOperator();if(c){a=b.operatorFns[c]}else {a=b.createRegexFilter()}b._filterFn=a}return a},createRegexFilter:function(){var a=this,b=!!a.getAnyMatch(),d=!!a.getExactMatch(),e=a.getValue(),c=Ext.String.createRegex(e,!b,!b&&d,!a.getCaseSensitive());return function(d){var b=a.getPropertyValue(d);return c?c.test(b):b==null}},getPropertyValue:function(a){var b=this._root,c=b==null?a:a[b];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();delete a.id;delete a.serializer;if(b){b.call(this,a)}return a},updateOperator:function(){this._filterFn=null},updateValue:function(a){this._filterFn=null;if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateDisableOnEmpty:function(b){var a=!1;if(b){a=Ext.isEmpty(this.getValue())}this.setDisabled(a)},privates:{getCandidateValue:function(e,f,d){var b=this,c=b._convert,a=b.getPropertyValue(e);if(c){a=c.call(b.scope||b,a)}else {if(!d){a=Ext.coerce(a,f)}}return a}}},1,0,0,0,0,0,[Ext.util,'Filter'],function(){var b=this.prototype,a=b.operatorFns={'<':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<a},'<=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<=a},'=':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a==c},'===':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a===c},'>=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>=a},'>':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>a},'!=':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a!=c},'!==':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a!==c},'in':function(b){var a=this._filterValue;return Ext.Array.contains(a,this.getCandidateValue(b,a))},notin:function(b){var a=this._filterValue;return !Ext.Array.contains(a,this.getCandidateValue(b,a))},like:function(b){var a=this._filterValue;return a&&this.getCandidateValue(b,a).toLowerCase().indexOf(a.toLowerCase())>-1}};a['==']=a['='];a.gt=a['>'];a.ge=a['>='];a.lt=a['<'];a.le=a['<='];a.eq=a['='];a.ne=a['!=']});Ext.cmd.derive('Ext.util.Observable',Ext.mixin.Observable,{$applyConfigs:!0},0,0,0,0,0,0,[Ext.util,'Observable'],function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe});Ext.cmd.derive('Ext.util.AbstractMixedCollection',Ext.Base,{isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(b,c){var a=this;if(arguments.length===1&&Ext.isObject(b)){a.initialConfig=b;Ext.apply(a,b)}else {a.allowFunctions=b===!0;if(c){a.getKey=c}a.initialConfig={allowFunctions:a.allowFunctions,getKey:a.getKey}}a.items=[];a.map={};a.keys=[];a.indexMap={};a.length=0;a.mixins.observable.constructor.call(a)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:!1,add:function(b,d){var c=this.length,a;if(arguments.length===1){a=this.insert(c,b)}else {a=this.insert(c,b,d)}return a},getKey:function(a){return a.id},replace:function(b,c){var a=this,d,e;if(arguments.length==1){c=arguments[0];b=a.getKey(c)}d=a.map[b];if(typeof b=='undefined'||b===null||typeof d=='undefined'){return a.add(b,c)}a.generation++;e=a.indexOfKey(b);a.items[e]=c;a.map[b]=c;if(a.hasListeners.replace){a.fireEvent('replace',b,d,c)}return c},reorder:function(e){var b=this,f=b.items,a=0,h=f.length,c=[],g=[],d;b.suspendEvents();for(d in e){c[e[d]]=f[d]}for(a=0;a<h;a++){if(e[a]==undefined){g.push(f[a])}}for(a=0;a<h;a++){if(c[a]==undefined){c[a]=g.shift()}}b.clear();b.addAll(c);b.resumeEvents()},updateKey:function(b,c){var a=this,e=a.map,d=a.indexOfKey(b),f=a.indexMap,g;if(d>-1){g=e[b];delete e[b];delete f[b];e[c]=g;f[c]=d;a.keys[d]=c;a.indexGeneration=++a.generation}},addAll:function(a){var c=this,b;if(arguments.length>1||Ext.isArray(a)){c.insert(c.length,arguments.length>1?arguments:a)}else {for(b in a){if(a.hasOwnProperty(b)){if(c.allowFunctions||typeof a[b]!='function'){c.add(b,a[b])}}}}},each:function(f,e){var c=Ext.Array.push([],this.items),a=0,d=c.length,b;for(;a<d;a++){b=c[a];if(f.call(e||b,b,a,d)===!1){break}}},eachKey:function(f,e){var b=this.keys,d=this.items,a=0,c=b.length;for(;a<c;a++){f.call(e||window,b[a],d[a],a,c)}},findBy:function(f,c){var d=this.keys,b=this.items,a=0,e=b.length;for(;a<e;a++){if(f.call(c||window,b[a],d[a])){return b[a]}}return null},insert:function(c,b,d){var a;if(Ext.isIterable(b)){a=this.doInsert(c,b,d)}else {if(arguments.length>2){a=this.doInsert(c,[b],[d])}else {a=this.doInsert(c,[b])}a=a[0]}return a},doInsert:function(f,e,d){var b=this,c,i,a,g=e.length,j=g,o=b.hasListeners.add,k,h={},l,n,m;if(d!=null){b.useLinearSearch=!0}else {d=e;e=new Array(g);for(a=0;a<g;a++){e[a]=this.getKey(d[a])}}b.suspendEvents();for(a=0;a<g;a++){c=e[a];i=b.indexOfKey(c);if(i!==-1){if(i<f){f--}b.removeAt(i)}if(c!=null){if(h[c]!=null){l=!0;j--}h[c]=a}}b.resumeEvents();if(l){n=e;m=d;e=new Array(j);d=new Array(j);a=0;for(c in h){e[a]=n[h[c]];d[a]=m[h[c]];a++}g=j}k=f===b.length&&b.indexGeneration===b.generation;Ext.Array.insert(b.items,f,d);Ext.Array.insert(b.keys,f,e);b.length+=g;b.generation++;if(k){b.indexGeneration=b.generation}for(a=0;a<g;a++,f++){c=e[a];if(c!=null){b.map[c]=d[a];if(k){b.indexMap[c]=f}}if(o){b.fireEvent('add',f,d[a],c)}}return d},remove:function(d){var a=this,c,b;if(!a.useLinearSearch&&(c=a.getKey(d))){b=a.indexOfKey(c)}else {b=Ext.Array.indexOf(a.items,d)}return b===-1?!1:a.removeAt(b)},removeAll:function(b){var a=this,c;if(b||a.hasListeners.remove){if(b){for(c=b.length-1;c>=0;--c){a.remove(b[c])}}else {while(a.length){a.removeAt(0)}}}else {a.length=a.items.length=a.keys.length=0;a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}},removeAt:function(b){var a=this,d,c;if(b<a.length&&b>=0){a.length--;d=a.items[b];Ext.Array.erase(a.items,b,1);c=a.keys[b];if(typeof c!='undefined'){delete a.map[c]}Ext.Array.erase(a.keys,b,1);if(a.hasListeners.remove){a.fireEvent('remove',d,c)}a.generation++;return d}return !1},removeRange:function(c,b){var a=this,i,f,d,e,g,h;if(c<a.length&&c>=0){if(!b){b=1}e=Math.min(c+b,a.length);b=e-c;h=e===a.length;g=h&&a.indexGeneration===a.generation;for(d=c;d<e;d++){f=a.keys[d];if(f!=null){delete a.map[f];if(g){delete a.indexMap[f]}}}i=a.items[d-1];a.length-=b;a.generation++;if(g){a.indexGeneration=a.generation}if(h){a.items.length=a.keys.length=a.length}else {a.items.splice(c,b);a.keys.splice(c,b)}return i}return !1},removeAtKey:function(d){var b=this,c=b.keys,a;if(d==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){b.removeAt(a)}}}else {return b.removeAt(b.indexOfKey(d))}},getCount:function(){return this.length},indexOf:function(b){var a=this,c;if(b!=null){if(!a.useLinearSearch&&(c=a.getKey(b))){return this.indexOfKey(c)}return Ext.Array.indexOf(a.items,b)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var b=this,d=b.indexMap={},c=b.keys,e=c.length,a;for(a=0;a<e;a++){d[c[a]]=a}b.indexGeneration=b.generation},get:function(a){var b=this,d=b.map[a],c=d!==undefined?d:typeof a=='number'?b.items[a]:undefined;return typeof c!='function'||b.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){var c=this,b;if(a!=null){if(!c.useLinearSearch&&(b=c.getKey(a))){return this.map[b]!=null}return Ext.Array.indexOf(this.items,a)!==-1}return !1},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent('clear')}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(f,h,c,a){var d=this.extractValues(f,h),g=d.length,e=0,b;c=c||0;a=a||a===0?a:g-1;for(b=c;b<=a;b++){e+=d[b]}return e},collect:function(h,j,g){var e=this.extractValues(h,j),i=e.length,f={},d=[],a,c,b;for(b=0;b<i;b++){a=e[b];c=String(a);if((g||!Ext.isEmpty(a))&&!f[c]){f[c]=!0;d.push(a)}}return d},extractValues:function(c,b){var a=this.items;if(b){a=Ext.Array.pluck(a,b)}return Ext.Array.pluck(a,c)},hasRange:function(b,a){return a<this.length},getRange:function(b,a){var h=this,f=h.items,c=[],d=f.length,g,e;if(d<1){return c}if(b>a){e=!0;g=b;b=a;a=g}if(b<0){b=0}if(a==null||a>=d){a=d-1}c=f.slice(b,a+1);if(e&&c.length){c.reverse()}return c},filter:function(a,e,d,c){var b=[];if(Ext.isString(a)){b.push(new Ext.util.Filter({property:a,value:e,anyMatch:d,caseSensitive:c}))}else {if(Ext.isArray(a)||a instanceof Ext.util.Filter){b=b.concat(a)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(h,g){var a=this,c=new a.self(a.initialConfig),e=a.keys,d=a.items,f=d.length,b;c.getKey=a.getKey;for(b=0;b<f;b++){if(h.call(g||a,d[b],e[b])){c.add(e[b],d[b])}}c.useLinearSearch=a.useLinearSearch;return c},findIndex:function(d,a,e,c,b){if(Ext.isEmpty(a,!1)){return -1}a=this.createValueMatcher(a,c,b);return this.findIndexBy(function(f){return f&&a.test(f[d])},null,e)},findIndexBy:function(h,d,e){var b=this,f=b.keys,c=b.items,a=e||0,g=c.length;for(;a<g;a++){if(h.call(d||b,c[a],f[a])){return a}}return -1},createValueMatcher:function(a,e,c,d){if(!a.exec){var b=Ext.String.escapeRegex;a=String(a);if(e===!0){a=b(a)}else {a='^'+b(a);if(d===!0){a+='$'}}a=new RegExp(a,c?'':'i')}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.util,'AbstractMixedCollection'],0);Ext.cmd.derive('Ext.util.Sorter',Ext.Base,{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:'ASC',id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(f,g){var e=b.isCollection?b.items:b,h=e.length,d,c;for(c=0;c<h;++c){d=e[c].sort(f,g);if(d){return d}}return a&&a(f,g)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,'ext-sorter-')}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,e){var g=this,c=g._transform,f=g._root,h=g._property,a,b;if(f){d=d[f];e=e[f]}a=d[h];b=e[h];if(c){a=c(a);b=c(b)}return a>b?1:a<b?-1:0},applyDirection:function(a){return a?a:'ASC'},updateDirection:function(a){this.multiplier=a.toUpperCase()==='DESC'?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),'ASC','DESC'))},getState:function(){var a=this,b={root:a.getRoot(),property:a.getProperty(),direction:a.getDirection()};if(a._id){b.id=a._id}return b},serialize:function(){return {property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,'Sorter'],0);Ext.cmd.derive('Ext.util.Sortable',Ext.Base,{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:'ASC',multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,e){var c=a[0].sort(d,e),f=a.length,b=1;for(;!c&&b<f;b++){c=a[b].sort.call(a[b],d,e)}return c}:function(){return 0}}},applySorters:function(b){var c=this,a=c.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);if(b){a.addAll(c.decodeSorters(b))}return a},sort:function(a,f,e,h){var b=this,d,g,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(a)){h=e;e=f}else {if(Ext.isObject(a)){a=[a];h=e;e=f}else {if(Ext.isString(a)){d=c.get(a);if(!d){d={property:a,direction:f}}else {if(f==null){d.toggle()}else {d.setDirection(f)}}a=[d]}}}if(a&&a.length){a=b.decodeSorters(a);switch(e){case 'multi':c.insert(0,a[0]);g=c.getCount()-b.multiSortLimit;if(g>0){c.removeRange(b.multiSortLimit,g)};break;case 'prepend':c.insert(0,a);break;case 'append':c.addAll(a);break;case undefined:case null:case 'replace':c.clear();c.addAll(a);break;default:}}if(h!==!1){b.fireEvent('beforesort',b,a);b.onBeforeSort(a);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return a},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(b){if(!Ext.isArray(b)){if(b===undefined){b=[]}else {b=[b]}}var g=b.length,f=Ext.util.Sorter,e=this.getModel?this.getModel():this.model,d,a,c;for(c=0;c<g;c++){a=b[c];if(!(a instanceof f)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:'ASC'});if(a.fn){a.sorterFn=a.fn}if(typeof a=='function'){a={sorterFn:a}}if(e&&!a.transform){d=e.getField(a.property);a.transform=d&&d.sortType!==Ext.identityFn?d.sortType:undefined}b[c]=new Ext.util.Sorter(a)}}return b},getFirstSorter:function(){var c=this.getSorters().items,d=c.length,b=0,a;for(;b<d;++b){a=c[b];if(!a.isGrouper){return a}}return null}},0,0,0,0,0,0,[Ext.util,'Sortable'],function(){this.prototype.createComparator=this.createComparator});Ext.cmd.derive('Ext.util.MixedCollection',Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(h,j,g){var b=this,a,d,k=String(j).toUpperCase()=='DESC'?-1:1,c=[],i=b.keys,f=b.items,e;g=g||function(a,b){return a-b};for(a=0,d=f.length;a<d;a++){c[c.length]={key:i[a],value:f[a],index:a}}Ext.Array.sort(c,function(a,b){return g(a[h],b[h])*k||(a.index<b.index?-1:1)});for(a=0,d=c.length;a<d;a++){e=c[a];f[a]=e.value;i[a]=e.key;b.indexMap[e.key]=a}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b)},sortBy:function(h){var b=this,c=b.items,f,g=b.keys,d,e=c.length,a;for(a=0;a<e;a++){c[a].$extCollectionIndex=a}Ext.Array.sort(c,function(a,b){return h(a,b)||(a.$extCollectionIndex<b.$extCollectionIndex?-1:1)});for(a=0;a<e;a++){f=c[a];d=b.getKey(f);g[a]=d;b.indexMap[d]=a;delete c.$extCollectionIndex}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b,c,g)},findInsertionIndex:function(h,d){var g=this,f=g.items,b=0,e=f.length-1,a,c;if(!d){d=g.generateComparator()}while(b<=e){a=b+e>>1;c=d(h,f[a]);if(c>=0){b=a+1}else {if(c<0){e=a-1}}}return b},reorder:function(a){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,a);this.fireEvent('sort',this)},sortByKey:function(a,b){this._sort('key',a,b||function(e,f){var c=String(e).toUpperCase(),d=String(f).toUpperCase();return c>d?1:c<d?-1:0})}},1,0,0,0,0,[['sortable',Ext.util.Sortable]],[Ext.util,'MixedCollection'],0);Ext.cmd.derive('Ext.util.TaskRunner',Ext.Base,{interval:10,timerId:null,constructor:function(b){var a=this;if(typeof b=='number'){a.interval=b}else {if(b){Ext.apply(a,b)}}a.tasks=[];a.timerFn=Ext.Function.bind(a.onTick,a)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var b=this,c=Ext.Date.now();if(!a.pending){b.tasks.push(a);a.pending=!0}a.stopped=!1;a.taskStartTime=c;a.taskRunTime=a.fireOnStart!==!1?0:a.taskStartTime;a.taskRunCount=0;if(!b.firing){if(a.fireOnStart!==!1){b.startTimer(0,c)}else {b.startTimer(a.interval,c)}}return a},stop:function(a){if(!a.stopped){a.stopped=!0;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1.0E99,onTick:function(){var b=this,h=b.tasks,g=Ext.Date.now(),k=1.0E99,m=h.length,l=Ext.GlobalEvents,f,c,e,a,i,d,j;b.timerId=null;b.firing=!0;for(e=0;e<m||e<(m=h.length);++e){a=h[e];if(!(d=a.stopped)){f=a.taskRunTime+a.interval;if(f<=g){i=1;if(a.hasOwnProperty('fireIdleEvent')){j=a.fireIdleEvent}else {j=b.fireIdleEvent}try{i=a.run.apply(a.scope||a,a.args||[++a.taskRunCount])}catch(n){try{if(a.onError){i=a.onError.call(a.scope||a,a,n)}}catch(o){}}a.taskRunTime=g;if(i===!1||a.taskRunCount===a.repeat){b.stop(a);d=!0}else {d=a.stopped;f=g+a.interval}}if(!d&&a.duration&&a.duration<=g-a.taskStartTime){b.stop(a);d=!0}}if(d){a.pending=!1;if(!c){c=h.slice(0,e)}}else {if(c){c.push(a)}if(k>f){k=f}}}if(c){b.tasks=c}b.firing=!1;if(b.tasks.length){b.startTimer(k-g,Ext.Date.now())}if(j!==!1&&l.hasListeners.idle){l.fireEvent('idle')}},startTimer:function(b,e){var a=this,d=e+b,c=a.timerId;if(c&&a.nextExpires-d>a.interval){clearTimeout(c);c=null}if(!c){if(b<a.interval){b=a.interval}a.timerId=Ext.defer(a.timerFn,b);a.nextExpires=d}}},1,0,0,0,0,0,[Ext.util,'TaskRunner'],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(a){Ext.apply(this,a)},restart:function(a){if(a!==undefined){this.interval=a}this.manager.start(this)},start:function(a){if(this.stopped){this.restart(a)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop});Ext.cmd.derive('Ext.fx.target.Target',Ext.Base,{isAnimTarget:!0,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,'Target'],0);Ext.cmd.derive('Ext.fx.target.Element',Ext.fx.target.Target,{type:'element',getElVal:function(c,b,a){if(a===undefined){if(b==='x'){a=c.getX()}else {if(b==='y'){a=c.getY()}else {if(b==='scrollTop'){a=c.getScroll().top}else {if(b==='scrollLeft'){a=c.getScroll().left}else {if(b==='height'){a=c.getHeight()}else {if(b==='width'){a=c.getWidth()}else {a=c.getStyle(b)}}}}}}}return a},getAttr:function(b,c){var a=this.target;return [[a,this.getElVal(a,b,c)]]},setAttr:function(f){var h=f.length,a,b,e,c,d,g;for(c=0;c<h;c++){a=f[c].attrs;for(b in a){if(a.hasOwnProperty(b)){g=a[b].length;for(d=0;d<g;d++){e=a[b][d];this.setElVal(e[0],b,e[1])}}}}},setElVal:function(a,c,b){if(c==='x'){a.setX(b)}else {if(c==='y'){a.setY(b)}else {if(c==='scrollTop'){a.scrollTo('top',b)}else {if(c==='scrollLeft'){a.scrollTo('left',b)}else {if(c==='width'){a.setWidth(b)}else {if(c==='height'){a.setHeight(b)}else {a.setStyle(c,b)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,'Element'],0);Ext.cmd.derive('Ext.fx.target.ElementCSS',Ext.fx.target.Element,{setAttr:function(j,f){var d={attrs:[],duration:[],easing:[]},m=j.length,n=function(){this.setStyle(Ext.supports.CSS3Prefix+'TransitionProperty',null);this.setStyle(Ext.supports.CSS3Prefix+'TransitionDuration',null);this.setStyle(Ext.supports.CSS3Prefix+'TransitionTimingFunction',null)},o={single:!0},k,a,e,h,g,b,c,i,l;for(c=0;c<m;c++){a=j[c];g=a.duration;h=a.easing;a=a.attrs;for(e in a){if(Ext.Array.indexOf(d.attrs,e)==-1){d.attrs.push(e.replace(/[A-Z]/g,function(a){return '-'+a.toLowerCase()}));d.duration.push(g+'ms');d.easing.push(h)}}}k=d.attrs.join(',');g=d.duration.join(',');h=d.easing.join(', ');for(c=0;c<m;c++){a=j[c].attrs;for(e in a){l=a[e].length;for(i=0;i<l;i++){b=a[e][i];b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionProperty',f?'':k);b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionDuration',f?'':g);b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionTimingFunction',f?'':h);b[0].setStyle(e,b[1]);if(f){b=b[0].dom.offsetWidth}else {b[0].on(Ext.supports.CSS3TransitionEnd,n,b[0],o)}}}}}},0,0,0,0,0,0,[Ext.fx.target,'ElementCSS'],0);Ext.cmd.derive('Ext.fx.target.CompositeElement',Ext.fx.target.Element,{isComposite:!0,constructor:function(a){a.id=a.id||Ext.id(null,'ext-composite-');Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(g,h){var e=[],d=this.target,c=d.elements,f=c.length,b,a;for(b=0;b<f;b++){a=c[b];if(a){a=d.getElement(a);e.push([a,this.getElVal(a,g,h)])}}return e},setAttr:function(g){var i=this.target,m=g.length,h=i.elements,l=h.length,j,f,a,b,c,d,e,k;for(d=0;d<m;d++){a=g[d].attrs;for(b in a){if(a.hasOwnProperty(b)){k=a[b].length;for(e=0;e<k;e++){j=a[b][e][1];for(f=0;f<l;++f){c=h[f];if(c){c=i.getElement(c);this.setElVal(c,b,j)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,'CompositeElement'],0);Ext.cmd.derive('Ext.fx.target.CompositeElementCSS',Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,'CompositeElementCSS'],0);Ext.cmd.derive('Ext.fx.target.Sprite',Ext.fx.target.Target,{type:'draw',getFromPrim:function(b,c){var a;switch(c){case 'rotate':case 'rotation':a=b.attr.rotation;return {x:a.x||0,y:a.y||0,degrees:a.degrees||0};case 'scale':case 'scaling':a=b.attr.scaling;return {x:a.x||1,y:a.y||1,cx:a.cx||0,cy:a.cy||0};case 'translate':case 'translation':a=b.attr.translation;return {x:a.x||0,y:a.y||0};default:return b.attr[c];}},getAttr:function(b,a){return [[this.target,a!==undefined?a:this.getFromPrim(this.target,b)]]},setAttr:function(n){var m=n.length,f=[],k,a,i,b,l,j,g,c,h,d,e,o;for(c=0;c<m;c++){k=n[c].attrs;for(a in k){i=k[a];o=i.length;for(h=0;h<o;h++){l=i[h][0];b=i[h][1];if(a==='translate'||a==='translation'){g={x:b.x,y:b.y}}else {if(a==='rotate'||a==='rotation'){d=b.x;if(isNaN(d)){d=null}e=b.y;if(isNaN(e)){e=null}g={degrees:b.degrees,x:d,y:e}}else {if(a==='scale'||a==='scaling'){d=b.x;if(isNaN(d)){d=null}e=b.y;if(isNaN(e)){e=null}g={x:d,y:e,cx:b.cx,cy:b.cy}}else {if(a==='width'||a==='height'||a==='x'||a==='y'){g=parseFloat(b)}else {g=b}}}}j=Ext.Array.indexOf(f,l);if(j===-1){f.push([l,{}]);j=f.length-1}f[j][1][a]=g}}}m=f.length;for(c=0;c<m;c++){f[c][0].setAttributes(f[c][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,'Sprite'],0);Ext.cmd.derive('Ext.fx.target.CompositeSprite',Ext.fx.target.Sprite,{getAttr:function(g,e){var d=[],c=[].concat(this.target.items),f=c.length,a,b;for(a=0;a<f;a++){b=c[a];d.push([b,e!==undefined?e:this.getFromPrim(b,g)])}return d}},0,0,0,0,0,0,[Ext.fx.target,'CompositeSprite'],0);Ext.cmd.derive('Ext.fx.target.Component',Ext.fx.target.Target,{type:'component',getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle('opacity')}},setMethods:{top:'setPosition',left:'setPosition',x:'setPagePosition',y:'setPagePosition',height:'setSize',width:'setSize',opacity:'setOpacity'},getAttr:function(b,a){return [[this.target,a!==undefined?a:this.getPropMethod[b].call(this.target)]]},setAttr:function(k,q,o){var h=this,p=k.length,d,c,a,e,f,l,m,n,j,i,b={},g;for(e=0;e<p;e++){d=k[e].attrs;for(c in d){l=d[c].length;for(f=0;f<l;f++){a=d[c][f];g=b[h.setMethods[c]]||(b[h.setMethods[c]]={});g.target=a[0];g[c]=a[1]}}if(b.setPosition){a=b.setPosition;m=a.left===undefined?undefined:parseFloat(a.left);n=a.top===undefined?undefined:parseFloat(a.top);a.target.setPosition(m,n)}if(b.setPagePosition){a=b.setPagePosition;a.target.setPagePosition(a.x,a.y)}if(b.setSize){a=b.setSize;j=a.width===undefined?a.target.getWidth():parseFloat(a.width);i=a.height===undefined?a.target.getHeight():parseFloat(a.height);a.target.el.setSize(j,i);if(o||h.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(a.target.setSize,a.target,[j,i]),single:!0})}}if(b.setOpacity){a=b.setOpacity;a.target.el.setStyle('opacity',a.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,'Component'],0);Ext.cmd.derive('Ext.fx.Queue',Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(b){var a=this.targets.get(b);if(a){return a.fxDefaults}return {}},setFxDefaults:function(b,c){var a=this.targets.get(b);if(a){a.fxDefaults=Ext.apply(a.fxDefaults||{},c)}},stopAnimation:function(d){var e=this,c=e.getFxQueue(d),b=c.length,a;while(b){a=c[b-1];if(a){a.end()}b--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return a&&!!a.length?a[0]:!1},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(a){if(!a){return !1}var b=this,d=b.fxQueue[a],c=b.targets.get(a);if(!c){return !1}if(!d){b.fxQueue[a]=[];if(c.type!=='element'){c.target.on('destroy',function(){b.fxQueue[a]=[]})}}return b.fxQueue[a]},queueFx:function(a){var e=this,c=a.target,b,d;if(!c){return}b=e.getFxQueue(c.getId());d=b.length;if(d){if(a.concurrent){a.paused=!1}else {b[d-1].on('afteranimate',function(){a.paused=!1})}}else {a.paused=!1}a.on('afteranimate',function(){Ext.Array.remove(b,a);if(b.length===0){e.targets.remove(a.target)}if(a.remove){if(c.type==='element'){var d=Ext.get(c.id);if(d){d.destroy()}}}},e,{single:!0});b.push(a)}},1,0,0,0,0,0,[Ext.fx,'Queue'],0);Ext.cmd.derive('Ext.fx.Manager',Ext.Base,{singleton:!0,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:!0,createTarget:function(a){var d=this,c=!d.forceJS&&Ext.supports.Transitions,b;d.useCSS3=c;if(a){if(a.tagName||Ext.isString(a)||a.isFly){a=Ext.get(a);b=new Ext.fx.target['Element'+(c?'CSS':'')](a)}else {if(a.dom){b=new Ext.fx.target['Element'+(c?'CSS':'')](a)}else {if(a.isComposite){b=new Ext.fx.target['CompositeElement'+(c?'CSS':'')](a)}else {if(a.isSprite){b=new Ext.fx.target.Sprite(a)}else {if(a.isCompositeSprite){b=new Ext.fx.target.CompositeSprite(a)}else {if(a.isComponent){b=new Ext.fx.target.Component(a)}else {if(a.isAnimTarget){return a}else {return null}}}}}}}d.targets.add(b);return b}else {return null}},addAnim:function(d){var a=this,c=a.items,b=a.task;c.add(d.id,d);if(!b&&c.length){b=a.task={run:a.runner,interval:a.interval,scope:a};a.taskRunner.start(b)}},removeAnim:function(d){var a=this,b=a.items,c=a.task;b.removeAtKey(d.id);if(c&&!b.length){a.taskRunner.stop(c);delete a.task}},runner:function(){var a=this,d=a.items.getRange(),b=0,e=d.length,c;a.targetArr={};a.timestamp=new Date();for(;b<e;b++){c=d[b];if(c.isReady()){a.startAnim(c)}}for(b=0;b<e;b++){c=d[b];if(c.isRunning()){a.runAnim(c)}}a.applyPendingAttrs();a.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(a,h){if(!a){return}var g=this,f=g.useCSS3&&a.target.type==='element',d=g.timestamp-a.startTime,e=d>=a.duration,b,c;if(h){d=a.duration;e=!0}b=this.collectTargetData(a,d,f,e);if(f){a.target.setAttr(b.anims[a.id].attributes,!0);g.collectTargetData(a,a.duration,f,e);a.paused=!0;b=a.target.target;if(a.target.isComposite){b=a.target.target.last()}c={};c[Ext.supports.CSS3TransitionEnd]=a.lastFrame;c.scope=a;c.single=!0;b.on(c)}return b},jumpToEnd:function(d){var a=this,b,c;if(!a.targetArr){a.targetArr={};c=!0}b=a.runAnim(d,!0);a.applyAnimAttrs(b,b.anims[d.id]);if(c){a.targetArr=null}},collectTargetData:function(a,d,f,e){var c=a.target.getId(),b=this.targetArr[c];if(!b){b=this.targetArr[c]={id:c,el:a.target,anims:{}}}b.anims[a.id]={id:a.id,anim:a,elapsed:d,isLastFrame:e,attributes:[{duration:a.duration,easing:f&&a.reverse?a.easingFn.reverse().toCSS3():a.easing,attrs:a.runAnim(d)}]};return b},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,!1,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var c=this.targetArr,b,d,a,f,e;for(d in c){if(c.hasOwnProperty(d)){b=c[d];for(e in b.anims){if(b.anims.hasOwnProperty(e)){a=b.anims[e];f=a.anim;if(a.attributes&&f.isRunning()){b.el.setAttr(a.attributes,!1,a.isLastFrame);if(a.isLastFrame){f.lastFrame()}}}}}}}},1,0,0,0,0,[['queue',Ext.fx.Queue]],[Ext.fx,'Manager'],0);Ext.cmd.derive('Ext.fx.Animator',Ext.Base,{isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:'ease',running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(b){var a=this;b=Ext.apply(a,b||{});a.config=b;a.id=Ext.id(null,'ext-animator-');a.mixins.observable.constructor.call(a,b);a.timeline=[];a.createTimeline(a.keyframes);if(a.target){a.applyAnimator(a.target);Ext.fx.Manager.addAnim(a)}},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(e){var d=this,b=[],k=d.to||{},g=d.duration,h,j,c,i,a,f;for(a in e){if(e.hasOwnProperty(a)&&d.animKeyFramesRE.test(a)){f={attrs:Ext.apply(e[a],k)};if(a==='from'){a=0}else {if(a==='to'){a=100}}f.pct=parseInt(a,10);b.push(f)}}Ext.Array.sort(b,d.sorter);i=b.length;for(c=0;c<i;c++){h=b[c-1]?g*(b[c-1].pct/100):0;j=g*(b[c].pct/100);d.timeline.push({duration:j-h,attrs:b[c].attrs})}},applyAnimator:function(j){var b=this,e=[],g=b.timeline,f=g.length,a,i,h,d,c;if(b.fireEvent('beforeanimate',b)!==!1){for(c=0;c<f;c++){a=g[c];d=a.attrs;i=d.easing||b.easing;h=d.damper||b.damper;delete d.easing;delete d.damper;a=new Ext.fx.Anim({target:j,easing:i,damper:h,duration:a.duration,paused:!0,to:d});e.push(a)}b.animations=e;b.target=a.target;for(c=0;c<f-1;c++){a=e[c];a.nextAnim=e[c+1];a.on('afteranimate',function(){this.nextAnim.paused=!1});a.on('afteranimate',function(){this.fireEvent('keyframe',this,++this.keyframeStep)},b)}e[f-1].on('afteranimate',function(){this.lastFrame()},b)}},start:function(b){var a=this,d=a.delay,c=a.delayStart,e;if(d){if(!c){a.delayStart=b;return}else {e=b-c;if(e<d){return}else {b=new Date(c.getTime()+d)}}}if(a.fireEvent('beforeanimate',a)!==!1){a.startTime=b;a.running=!0;a.animations[a.keyframeStep].paused=!1}},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;b++;if(b<c){a.startTime=new Date();a.currentIteration=b;a.keyframeStep=0;a.applyAnimator(a.target);a.animations[a.keyframeStep].paused=!1}else {a.currentIteration=0;a.end()}},end:function(){var a=this;a.fireEvent('afteranimate',a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return !1}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.fx,'Animator'],0);Ext.cmd.derive('Ext.fx.CubicBezier',Ext.Base,{singleton:!0,cubicBezierAtTime:function(l,d,e,i,j,h){var a=3*d,b=3*(i-d)-a,f=1-a-b,c=3*e,g=3*(j-e)-c,k=1-c-g;function sampleCurveX(c){return ((f*c+b)*c+a)*c}function solve(f,b){var a=solveCurveX(f,b);return ((k*a+g)*a+c)*a}function solveCurveX(n,q){var g,k,c,m,o,p;for(c=n,p=0;p<8;p++){m=sampleCurveX(c)-n;if(Math.abs(m)<q){return c}o=(3*f*c+2*b)*c+a;if(Math.abs(o)<1.0E-6){break}c=c-m/o}g=0;k=1;c=n;if(c<g){return g}if(c>k){return k}while(g<k){m=sampleCurveX(c);if(Math.abs(m-n)<q){return c}if(n>m){g=c}else {k=c}c=(k-g)/2+g}return c}return solve(l,1/(200*h))},cubicBezier:function(b,d,c,e){var a=function(a){return Ext.fx.CubicBezier.cubicBezierAtTime(a,b,d,c,e,1)};a.toCSS3=function(){return 'cubic-bezier('+[b,d,c,e].join(',')+')'};a.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-c,1-e,1-b,1-d)};return a}},0,0,0,0,0,0,[Ext.fx,'CubicBezier'],0);Ext.cmd.derive('Ext.fx.Easing',Ext.Base,function(){var b=Math,g=b.PI,a=b.pow,f=b.sin,e=b.sqrt,d=b.abs,c=1.70158;return {singleton:!0,linear:Ext.identityFn,ease:function(k){var c=0.07813-k/2,f=e(0.0066+c*c),g=f-c,i=a(d(g),1/3)*(g<0?-1:1),h=-f-c,j=a(d(h),1/3)*(h<0?-1:1),b=i+j+0.25;return a(1-b,2)*3*b*0.1+(1-b)*3*b*b+b*b*b},easeIn:function(b){return a(b,1.7)},easeOut:function(b){return a(b,0.48)},easeInOut:function(k){var c=0.48-k/1.04,f=e(0.1734+c*c),g=f-c,i=a(d(g),1/3)*(g<0?-1:1),h=-f-c,j=a(d(h),1/3)*(h<0?-1:1),b=i+j+0.5;return (1-b)*3*b*b+b*b*b},backIn:function(a){return a*a*((c+1)*a-c)},backOut:function(a){a=a-1;return a*a*((c+1)*a+c)+1},elasticIn:function(b){if(b===0||b===1){return b}var c=0.3,d=c/4;return a(2,-10*b)*f((b-d)*(2*g)/c)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(a){var d=7.5625,b=2.75,c;if(a<1/b){c=d*a*a}else {if(a<2/b){a-=1.5/b;c=d*a*a+0.75}else {if(a<2.5/b){a-=2.25/b;c=d*a*a+0.9375}else {a-=2.625/b;c=d*a*a+0.984375}}}return c}}},0,0,0,0,0,0,[Ext.fx,'Easing'],function(c){var b=c.self,a=b.prototype;b.addMembers({'back-in':a.backIn,'back-out':a.backOut,'ease-in':a.easeIn,'ease-out':a.easeOut,'elastic-in':a.elasticIn,'elastic-out':a.elasticOut,'bounce-in':a.bounceIn,'bounce-out':a.bounceOut,'ease-in-out':a.easeInOut})});Ext.cmd.derive('Ext.fx.DrawPath',Ext.Base,{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return a=='object'&&b===Object(b)||a=='undefined'&&typeof b==a||a=='null'&&b===null||a=='array'&&Array.isArray&&Array.isArray(b)||Object.prototype.toString.call(b).toLowerCase().slice(8,-1)==a},path2string:function(){return this.join(',').replace(Ext.fx.DrawPath.pathToStringRE,'$1')},pathToString:function(a){return a.join(',').replace(Ext.fx.DrawPath.pathToStringRE,'$1')},parsePathString:function(c){if(!c){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=[],b=this;if(b.is(c,'array')&&b.is(c[0],'array')){a=b.pathClone(c)}if(!a.length){String(c).replace(b.pathCommandRE,function(i,g,h){var e=[],f=g.toLowerCase();h.replace(b.pathValuesRE,function(b,a){if(a){e.push(+a)}});if(f=='m'&&e.length>2){a.push([g].concat(Ext.Array.splice(e,0,2)));f='l';g=g=='m'?'l':'L'}while(e.length>=d[f]){a.push([g].concat(Ext.Array.splice(e,0,d[f])));if(!d[f]){break}}})}a.toString=b.path2string;return a},pathClone:function(a){var d=[],c,f,b,e;if(!this.is(a,'array')||!this.is(a&&a[0],'array')){a=this.parsePathString(a)}for(b=0,e=a.length;b<e;b++){d[b]=[];for(c=0,f=a[b].length;c<f;c++){d[b][c]=a[b][c]}}d.toString=this.path2string;return d},pathToAbsolute:function(d){if(!this.is(d,'array')||!this.is(d&&d[0],'array')){d=this.parsePathString(d)}var i=[],f=0,g=0,j=0,k=0,h=0,l=d.length,b,a,c,e;if(l&&d[0][0]=='M'){f=+d[0][1];g=+d[0][2];j=f;k=g;h++;i[0]=['M',f,g]}for(;h<l;h++){b=i[h]=[];a=d[h];if(a[0]!=a[0].toUpperCase()){b[0]=a[0].toUpperCase();switch(b[0]){case 'A':b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=+(a[6]+f);b[7]=+(a[7]+g);break;case 'V':b[1]=+a[1]+g;break;case 'H':b[1]=+a[1]+f;break;case 'M':j=+a[1]+f;k=+a[2]+g;default:c=1;e=a.length;for(;c<e;c++){b[c]=+a[c]+(c%2?f:g)};}}else {c=0;e=a.length;for(;c<e;c++){i[h][c]=a[c]}}switch(b[0]){case 'Z':f=j;g=k;break;case 'H':f=b[1];break;case 'V':g=b[1];break;case 'M':a=i[h];e=a.length;j=a[e-2];k=a[e-1];default:a=i[h];e=a.length;f=a[e-2];g=a[e-1];}}i.toString=this.path2string;return i},interpolatePaths:function(o,n){var k=this,c=k.pathToAbsolute(o),b=k.pathToAbsolute(n),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(a,d){if(a[d].length>7){a[d].shift();var e=a[d];while(e.length){Ext.Array.splice(a,d++,0,['C'].concat(Ext.Array.splice(e,0,6)))}Ext.Array.erase(a,d,1);j=Math.max(c.length,b.length||0)}},m=function(d,f,e,g,a){if(d&&f&&d[a][0]=='M'&&f[a][0]!='M'){Ext.Array.splice(f,a,0,['M',g.x,g.y]);e.bx=0;e.by=0;e.x=d[a][1];e.y=d[a][2];j=Math.max(c.length,b.length||0)}},a,j,g,f,i,h;for(a=0,j=Math.max(c.length,b.length||0);a<j;a++){c[a]=k.command2curve(c[a],e);l(c,a);b[a]=k.command2curve(b[a],d);l(b,a);m(c,b,e,d,a);m(b,c,d,e,a);g=c[a];f=b[a];i=g.length;h=f.length;e.x=g[i-2];e.y=g[i-1];e.bx=parseFloat(g[i-4])||e.x;e.by=parseFloat(g[i-3])||e.y;d.bx=parseFloat(f[h-4])||d.x;d.by=parseFloat(f[h-3])||d.y;d.x=f[h-2];d.y=f[h-1]}return [c,b]},command2curve:function(b,a){var c=this;if(!b){return ['C',a.x,a.y,a.x,a.y,a.x,a.y]}if(b[0]!='T'&&b[0]!='Q'){a.qx=a.qy=null}switch(b[0]){case 'M':a.X=b[1];a.Y=b[2];break;case 'A':b=['C'].concat(c.arc2curve.apply(c,[a.x,a.y].concat(b.slice(1))));break;case 'S':b=['C',a.x+(a.x-(a.bx||a.x)),a.y+(a.y-(a.by||a.y))].concat(b.slice(1));break;case 'T':a.qx=a.x+(a.x-(a.qx||a.x));a.qy=a.y+(a.y-(a.qy||a.y));b=['C'].concat(c.quadratic2curve(a.x,a.y,a.qx,a.qy,b[1],b[2]));break;case 'Q':a.qx=b[1];a.qy=b[2];b=['C'].concat(c.quadratic2curve(a.x,a.y,b[1],b[2],b[3],b[4]));break;case 'L':b=['C'].concat(a.x,a.y,b[1],b[2],b[1],b[2]);break;case 'H':b=['C'].concat(a.x,a.y,b[1],a.y,b[1],a.y);break;case 'V':b=['C'].concat(a.x,a.y,a.x,b[1],a.x,b[1]);break;case 'Z':b=['C'].concat(a.x,a.y,a.X,a.Y,a.X,a.Y);break;}return b},quadratic2curve:function(g,h,c,d,e,f){var a=1/3,b=2/3;return [a*g+b*c,a*h+b*d,a*e+b*c,a*f+b*d,e,f]},rotate:function(d,e,b){var a=Math.cos(b),c=Math.sin(b),f=d*a-e*c,g=d*c+e*a;return {x:f,y:g}},arc2curve:function(m,n,d,c,K,X,v,e,f,o){var s=this,k=Math.PI,Y=s.radian,Q=k*120/180,w=Y*(+K||0),g=[],p=Math,B=p.cos,C=p.sin,N=p.sqrt,R=p.abs,M=p.asin,t,i,j,u,x,y,I,q,r,b,a,z,S,V,T,W,J,D,E,F,l,G,H,A,h,U,L,O,P;if(!o){t=s.rotate(m,n,-w);m=t.x;n=t.y;t=s.rotate(e,f,-w);e=t.x;f=t.y;i=(m-e)/2;j=(n-f)/2;u=i*i/(d*d)+j*j/(c*c);if(u>1){u=N(u);d=u*d;c=u*c}x=d*d;y=c*c;I=(X==v?-1:1)*N(R((x*y-x*j*j-y*i*i)/(x*j*j+y*i*i)));q=I*d*j/c+(m+e)/2;r=I*-c*i/d+(n+f)/2;b=M(((n-r)/c).toFixed(7));a=M(((f-r)/c).toFixed(7));b=m<q?k-b:b;a=e<q?k-a:a;if(b<0){b=k*2+b}if(a<0){a=k*2+a}if(v&&b>a){b=b-k*2}if(!v&&a>b){a=a-k*2}}else {b=o[0];a=o[1];q=o[2];r=o[3]}z=a-b;if(R(z)>Q){L=a;O=e;P=f;a=b+Q*(v&&a>b?1:-1);e=q+d*B(a);f=r+c*C(a);g=s.arc2curve(e,f,d,c,K,0,v,O,P,[a,L,q,r])}z=a-b;S=B(b);V=C(b);T=B(a);W=C(a);J=p.tan(z/4);D=4/3*d*J;E=4/3*c*J;F=[m,n];l=[m+D*V,n-E*S];G=[e+D*W,f-E*T];H=[e,f];l[0]=2*F[0]-l[0];l[1]=2*F[1]-l[1];if(o){return [l,G,H].concat(g)}else {g=[l,G,H].concat(g).join().split(',');A=[];U=g.length;for(h=0;h<U;h++){A[h]=h%2?s.rotate(g[h-1],g[h],w).y:s.rotate(g[h],g[h+1],w).x}return A}}},0,0,0,0,0,0,[Ext.fx,'DrawPath'],0);Ext.cmd.derive('Ext.fx.PropertyHandler',Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(c,d,e,f,i){e=typeof e=='number'?e:1;var g=this.unitRE,a=g.exec(c),h,b;if(a){c=a[1];b=a[2];if(!this.scrollRE.test(i)&&!b&&this.pixelDefaultsRE.test(i)){b='px'}}c=+c||0;a=g.exec(d);if(a){d=a[1];b=a[2]||b}d=+d||0;h=f!=null?f:c;return {from:c,delta:(d-h)*e,units:b}},get:function(b,e,i,h,j){var l=b.length,f=[],a,d,g,c,k;for(a=0;a<l;a++){if(h){d=h[a][1].from}if(Ext.isArray(b[a][1])&&Ext.isArray(e)){g=[];c=0;k=b[a][1].length;for(;c<k;c++){g.push(this.computeDelta(b[a][1][c],e[c],i,d,j))}f.push([b[a][0],g])}else {f.push([b[a][0],this.computeDelta(b[a][1],e,i,d,j)])}}return f},set:function(d,g){var i=d.length,e=[],b,a,f,h,c;for(b=0;b<i;b++){a=d[b][1];if(Ext.isArray(a)){f=[];c=0;h=a.length;for(;c<h;c++){f.push(a[c].from+a[c].delta*g+(a[c].units||0))}e.push([d[b][0],f])}else {e.push([d[b][0],a.from+a.delta*g+(a.units||0)])}}return e}},stringHandler:{computeDelta:function(a,b,d,c,e){return {from:a,delta:b}},get:function(b,g,e,i,f){var h=b.length,c=[],a,d;for(a=0;a<h;a++){c.push([b[a][0],this.computeDelta(b[a][1],g,e,d,f)])}return c},set:function(b,f){var e=b.length,c=[],a,d;for(a=0;a<e;a++){d=b[a][1];c.push([b[a][0],d.delta])}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(f,d){d=typeof d=='number'?d:1;var g=!1,e=[this.hexRE,this.rgbRE,this.hex3RE],i=e.length,a,c,h,b;for(b=0;b<i;b++){h=e[b];c=b%2===0?16:10;a=h.exec(f);if(a&&a.length===4){if(b===2){a[1]+=a[1];a[2]+=a[2];a[3]+=a[3]}g={red:parseInt(a[1],c),green:parseInt(a[2],c),blue:parseInt(a[3],c)};break}}return g||f},computeDelta:function(d,a,c,e){d=this.parseColor(d);a=this.parseColor(a,c);var b=e?e:d,f=typeof b,g=typeof a;if(f==='string'||f==='undefined'||g==='string'||g==='undefined'){return a||b}return {from:d,delta:{red:Math.round((a.red-b.red)*c),green:Math.round((a.green-b.green)*c),blue:Math.round((a.blue-b.blue)*c)}}},get:function(b,g,f,c){var h=b.length,e=[],a,d;for(a=0;a<h;a++){if(c){d=c[a][1].from}e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)])}return e},set:function(f,e){var i=f.length,h=[],b,a,g,d,c;for(b=0;b<i;b++){a=f[b][1];if(a){d=a.from;c=a.delta;a=typeof a==='object'&&'red' in a?'rgb('+a.red+', '+a.green+', '+a.blue+')':a;a=typeof a==='object'&&a.length?a[0]:a;if(typeof a==='undefined'){return []}g=typeof a==='string'?a:'rgb('+[(d.red+Math.round(c.red*e))%256,(d.green+Math.round(c.green*e))%256,(d.blue+Math.round(c.blue*e))%256].join(',')+')';h.push([f[b][0],g])}}return h}},object:{interpolate:function(c,a){a=typeof a==='number'?a:1;var d={},b;for(b in c){d[b]=parseFloat(c[b])*a}return d},computeDelta:function(a,b,f,d){a=this.interpolate(a);b=this.interpolate(b,f);var g=d?d:a,e={},c;for(c in b){e[c]=b[c]-g[c]}return {from:a,delta:e}},get:function(b,g,f,c){var h=b.length,e=[],a,d;for(a=0;a<h;a++){if(c){d=c[a][1].from}e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)])}return e},set:function(c,i){var j=c.length,h=[],f={},a,d,g,e,b;for(a=0;a<j;a++){e=c[a][1];d=e.from;g=e.delta;for(b in d){f[b]=d[b]+g[b]*i}h.push([c[a][0],f])}return h}},path:{computeDelta:function(b,c,a,d){a=typeof a==='number'?a:1;var e;b=+b||0;c=+c||0;e=d!=null?d:b;return {from:b,delta:(c-e)*a}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(g,p,o,i){var f=this.forcePath(p),m=[],n=g.length,j,k,e,c,l,a,d,h,b;for(e=0;e<n;e++){b=this.forcePath(g[e][1]);c=Ext.fx.DrawPath.interpolatePaths(b,f);b=c[0];f=c[1];j=b.length;h=[];for(a=0;a<j;a++){c=[b[a][0]];k=b[a].length;for(d=1;d<k;d++){l=i&&i[0][1][a][d].from;c.push(this.computeDelta(b[a][d],f[a][d],o,l))}h.push(c)}m.push([g[e][0],h])}return m},set:function(g,k){var l=g.length,j=[],c,a,d,f,e,b,h,i;for(c=0;c<l;c++){b=g[c][1];f=[];h=b.length;for(a=0;a<h;a++){e=[b[a][0]];i=b[a].length;for(d=1;d<i;d++){e.push(b[a][d].from+b[a][d].delta*k)}f.push(e.join(','))}j.push([g[c][0],f.join(',')])}return j}}}},0,0,0,0,0,0,[Ext.fx,'PropertyHandler'],function(){var b=['outlineColor','backgroundColor','borderColor','borderTopColor','borderRightColor','borderBottomColor','borderLeftColor','fill','stroke'],d=b.length,a=0,c;for(;a<d;a++){c=b[a];this[c]=this.color}b=['cursor'];d=b.length;a=0;for(;a<d;a++){c=b[a];this[c]=this.stringHandler}});Ext.cmd.derive('Ext.fx.Anim',Ext.Base,{isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:'ease',damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(b){var a=this,c;b=b||{};if(b.keyframes){return new Ext.fx.Animator(b)}Ext.apply(a,b);if(a.from===undefined){a.from={}}a.propHandlers={};a.config=b;a.target=Ext.fx.Manager.createTarget(a.target);a.easingFn=Ext.fx.Easing[a.easing];a.target.dynamic=a.dynamic;if(!a.easingFn){a.easingFn=String(a.easing).match(a.bezierRE);if(a.easingFn&&a.easingFn.length===5){c=a.easingFn;a.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}a.id=Ext.id(null,'ext-anim-');a.mixins.observable.constructor.call(a);Ext.fx.Manager.addAnim(a);if(b.autoEnd){a.running=!0;a.jumpToEnd()}},setAttr:function(b,a){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,b,a)},initAttrs:function(){var b=this,i=b.from,e=b.to,h=b.initialFrom||{},g={},f,d,c,a;for(a in e){if(e.hasOwnProperty(a)){f=b.target.getAttr(a,i[a]);d=e[a];if(!Ext.fx.PropertyHandler[a]){if(Ext.isObject(d)){c=b.propHandlers[a]=Ext.fx.PropertyHandler.object}else {c=b.propHandlers[a]=Ext.fx.PropertyHandler.defaultHandler}}else {c=b.propHandlers[a]=Ext.fx.PropertyHandler[a]}g[a]=c.get(f,d,b.damper,h[a],a)}}b.currentAttrs=g},start:function(b){var a=this,d=a.delay,c=a.delayStart,e;if(d){if(!c){a.delayStart=b;return}else {e=b-c;if(e<d){return}else {b=new Date(c.getTime()+d)}}}if(a.fireEvent('beforeanimate',a)!==!1){a.startTime=b;if(!a.paused&&!a.currentAttrs){a.initAttrs()}a.running=!0;a.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(b){var a=this,e=a.currentAttrs,d=a.duration,k=a.easingFn,j=a.propHandlers,i={},g,h,c,f;if(b>=d){b=d;f=!0}if(a.reverse){b=d-b}for(c in e){if(e.hasOwnProperty(c)){h=e[c];g=f?1:k(b/d);i[c]=j[c].set(h,g)}}a.frameCount++;return i},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;b++;if(b<c){if(a.alternate){a.reverse=!a.reverse}a.startTime=new Date();a.currentIteration=b;a.paused=!1}else {a.currentIteration=0;a.end();a.fireEvent('lastframe',a,a.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=!1;a.running=!1;Ext.fx.Manager.removeAnim(a);a.fireEvent('afteranimate',a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return this.paused===!1&&this.running===!0&&this.isAnimator!==!0}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.fx,'Anim'],0);Ext.enableFx=!0;Ext.cmd.derive('Ext.util.Animate',Ext.Base,{mixinId:'animate',isAnimate:!0,animate:function(b){var a=this;if(Ext.fx.Manager.hasFxBlock(a.id)){return a}Ext.fx.Manager.queueFx(new Ext.fx.Anim(a.anim(b)));return this},anim:function(a){if(!Ext.isObject(a)){return a?{}:!1}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:!0},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,'stopAnimation'),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,'getActiveAnimation'),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,'Animate'],0);Ext.cmd.derive('Ext.dom.Fly',Ext.dom.Element,{alternateClassName:'Ext.dom.Element.Fly',validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=!1}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,'Fly',Ext.dom.Element,'Fly'],function(b){var a={};b.cache=a;Ext.fly=function(c,e){var d=null,h=Ext.fly,f,g;e=e||h.caller&&h.caller.$name||'_global';c=Ext.getDom(c);if(c){f=c.nodeType;if(b.prototype.validNodeTypes[f]||!f&&c.window==c){d=Ext.cache[c.id];if(!d||d.dom!==c){d=a[e]||(a[e]=new b());d.dom=c;g=d.getData(!0);if(g){g.isSynchronized=!1}}}}return d}});Ext.cmd.derive('Ext.dom.CompositeElementLite',Ext.Base,{alternateClassName:['Ext.CompositeElementLite'],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var b=Ext.dom.Element,a=this.prototype;Ext.Object.each(b.prototype,function(b,c){if(typeof c==='function'&&!a[b]){a[b]=function(){return this.invoke(b,arguments)}}})}},constructor:function(a,b){if(b){this.elements=a||[]}else {this.elements=[];this.add(a)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,e){var d=this.elements,b,c;if(!a){return this}if(typeof a=='string'){a=Ext.fly(e||document).query(a)}else {if(a.isComposite){a=a.elements}else {if(!Ext.isIterable(a)){a=[a]}}}for(b=0,c=a.length;b<c;++b){d.push(this.transformElement(a[b]))}return this},invoke:function(g,f){var b=this,e=b.elements,h=e.length,d,c,a;if(a!==0){d=(b.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(a=0;a<h;a++){c=e[a];if(c){d[g].apply(b.getElement(c),f)}}}return b},item:function(c){var b=this.elements[c],a=null;if(b){a=this.getElement(b)}return a},slice:function(a,b){return Ext.Array.slice(this.elements,a,b)},each:function(g,e){var c=this,d=c.elements,f=d.length,b,a;for(b=0;b<f;b++){a=d[b];if(a){a=this.getElement(a);if(g.call(e||a,a,c,b)===!1){break}}}return c},fill:function(b){var a=this;a.elements=[];a.add(b);return a},insert:function(a,b){Ext.Array.insert(this.elements,a,b)},filter:function(e){var b=this,f=b.elements,i=f.length,g=[],d=0,h=typeof e=='function',c,a;for(;d<i;d++){a=f[d];c=!1;if(a){a=b.getElement(a);if(h){c=e.call(a,a,b,d)!==!1}else {c=a.is(e)}if(c){g.push(b.transformElement(a))}}}b.elements=g;return b},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(d,a,e){var c=!isNaN(d)?d:this.indexOf(d),b;if(c>-1){a=Ext.getDom(a);if(e){b=this.elements[c];b.parentNode.insertBefore(a,b);Ext.removeNode(b)}Ext.Array.splice(this.elements,c,1,a)}return this},clear:function(c){var d=this,b=d.elements,a=b.length-1;if(c){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(a,d){if(!a){return this}if(typeof a==='string'){a=Ext.dom.Element.selectorFunction(a,d)}var e=this.elements,c=a.length,b;for(b=0;b<c;b++){e.push(Ext.get(a[b]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(b,g){b=[].concat(b);var f=this,e=f.elements,h=b.length,a,c,d;for(d=0;d<h;d++){a=b[d];if(c=e[a]||e[a=f.indexOf(a)]){if(g){if(c.dom){c.destroy()}else {Ext.removeNode(c)}}Ext.Array.erase(e,a,1)}}return f},destroy:function(){return this.invoke('destroy',arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,'CompositeElementLite',Ext,'CompositeElementLite'],function(a){var b=a.prototype;a.importElementMethods();b.on=b.addListener});Ext.define('Ext.overrides.dom.Element',function(){var a,t=window,b=document,e='hidden',g='isClipped',j='overflow',h='overflow-x',i='overflow-y',n='originalClip',C='height',F='width',o='visibility',d='display',s='none',A='offsets',H='clip',K='originalDisplay',q='visibilityMode',x='isVisible',N='x-hidden-offsets',w='x-hidden-clip',y=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>','</div>','</div>','<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>','</div>','</div>','<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>','</div>','</div>'].join(''),O=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,J=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,G=/\ssrc=([\'\"])(.*?)\1/i,v=/\S/,E=/\stype=([\'\"])(.*?)\1/i,I=/^-ms-/,B=/(-[a-z])/gi,L=function(b,a){return a.charAt(1).toUpperCase()},r='x-masked',k='x-masked-relative',m='x-mask-msg',D=/^body/i,l={},u=function(d){var c=d.getData(),b=c[q];if(b===undefined){c[q]=b=a.VISIBILITY}return b},f=b.createRange?b.createRange():null,z={INPUT:!0,TEXTAREA:!0};if(Ext.isIE8){var p=b.createElement('div'),c=[],M=Ext.Function.createBuffered(function(){var b=c.length,a;for(a=0;a<b;a++){p.appendChild(c[a])}p.innerHTML='';c.length=0},10)}return {override:'Ext.dom.Element',mixins:[Ext.util.Animate],skipGarbageCollection:!1,_init:function(b){a=b;b.tabbableSelector+=',['+b.tabbableSavedCounterAttribute+']'},statics:{selectableCls:'x-selectable',unselectableCls:'x-unselectable',tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:Ext.isIE?!0:!1},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:Ext.isIE8m?!0:!1},tabbableSavedCounterAttribute:'data-tabindex-counter',tabbableSavedValueAttribute:'data-tabindex-value',normalize:function(a){if(a==='float'){a=Ext.supports.Float?'cssFloat':'styleFloat'}return l[a]||(l[a]=a.replace(I,'ms-').replace(B,L))}},addClsOnClick:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);a.on('mousedown',function(){if(e&&c.call(f||a,a)===!1){return !1}Ext.fly(d).addCls(b);var h=Ext.getDoc(),g=function(){Ext.fly(d).removeCls(b);h.removeListener('mouseup',g)};h.on('mouseup',g)});return a},addClsOnFocus:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);a.on('focus',function(){if(e&&c.call(f||a,a)===!1){return !1}Ext.fly(d).addCls(b)});a.on('blur',function(){Ext.fly(d).removeCls(b)});return a},addClsOnOver:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);a.hover(function(){if(e&&c.call(f||a,a)===!1){return}Ext.fly(d).addCls(b)},function(){Ext.fly(d).removeCls(b)});return a},addKeyListener:function(a,d,c){var b;if(typeof a!=='object'||Ext.isArray(a)){b={target:this,key:a,fn:d,scope:c}}else {b={target:this,key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:d,scope:c}}return new Ext.util.KeyMap(b)},addKeyMap:function(a){return new Ext.util.KeyMap(Ext.apply({target:this},a))},afterAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.show()}},anchorAnimX:function(a){var b=a==='l'?'right':'left';this.dom.style[b]='0px'},anim:function(b){if(!Ext.isObject(b)){return b?{}:!1}var c=this,d=b.duration||Ext.fx.Anim.prototype.duration,e=b.easing||'ease',a;if(b.stopAnimation){c.stopAnimation()}Ext.applyIf(b,Ext.fx.Manager.getFxDefaults(c.id));Ext.fx.Manager.setFxDefaults(c.id,{delay:0});a={target:c.dom,remove:b.remove,alternate:b.alternate||!1,duration:d,easing:e,callback:b.callback,listeners:b.listeners,iterations:b.iterations||1,scope:b.scope,block:b.block,concurrent:b.concurrent,delay:b.delay||0,paused:!0,keyframes:b.keyframes,from:b.from||{},to:Ext.apply({},b),userConfig:b};Ext.apply(a.to,b.to);delete a.to.to;delete a.to.from;delete a.to.remove;delete a.to.alternate;delete a.to.keyframes;delete a.to.iterations;delete a.to.listeners;delete a.to.target;delete a.to.paused;delete a.to.callback;delete a.to.scope;delete a.to.duration;delete a.to.easing;delete a.to.concurrent;delete a.to.block;delete a.to.stopAnimation;delete a.to.delay;return a},animate:function(a){this.addAnimation(a);return this},addAnimation:function(a){var c=this,f=c.dom.id||Ext.id(c.dom),d,b,e;if(!Ext.fx.Manager.hasFxBlock(f)){if(a.listeners){d=a.listeners;delete a.listeners}if(a.internalListeners){a.listeners=a.internalListeners;delete a.internalListeners}e=a.autoEnd;delete a.autoEnd;b=new Ext.fx.Anim(c.anim(a));b.on({afteranimate:'afterAnimate',beforeanimate:'beforeAnimate',scope:c,single:!0});if(d){b.on(d)}Ext.fx.Manager.queueFx(b);if(e){b.jumpToEnd()}}return b},beforeAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.hide()}},boxWrap:function(a){a=a||'x-box';var b=Ext.get(this.insertHtml('beforeBegin',"<div class='"+a+"' role='presentation'>"+Ext.String.format(y,a)+'</div>'));b.selectNode('.'+a+'-mc').appendChild(this.dom);return b},clean:function(g){var c=this,d=c.dom,e=c.getData(),a=d.firstChild,f=-1,b;if(e.isCleaned&&g!==!0){return c}while(a){b=a.nextSibling;if(a.nodeType===3){if(!v.test(a.nodeValue)){d.removeChild(a)}else {if(b&&b.nodeType===3){a.appendData(Ext.String.trim(b.data));d.removeChild(b);b=a.nextSibling;a.nodeIndex=++f}}}else {Ext.fly(a,'_clean').clean();a.nodeIndex=++f}a=b}e.isCleaned=!0;return c},empty:f?function(){var a=this.dom;if(a.firstChild){f.setStartBefore(a.firstChild);f.setEndAfter(a.lastChild);f.deleteContents()}}:function(){var a=this.dom;while(a.lastChild){a.removeChild(a.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(a){a=a||'';return this.setStyle({left:a,right:a,top:a,bottom:a,'z-index':'',position:'static'})},createProxy:function(b,e,f){b=typeof b==='object'?b:{tag:'div',role:'presentation',cls:b};var d=this,c=e?Ext.DomHelper.append(e,b,!0):Ext.DomHelper.insertBefore(d.dom,b,!0);c.setVisibilityMode(a.DISPLAY);c.hide();if(f&&d.setBox&&d.getBox){c.setBox(d.getBox())}return c},clearOpacity:function(){return this.setOpacity('')},clip:function(){var a=this,c=a.getData(),b;if(!c[g]){c[g]=!0;b=a.getStyle([j,h,i]);c[n]={o:b[j],x:b[h],y:b[i]};a.setStyle(j,e);a.setStyle(h,e);a.setStyle(i,e)}return a},destroy:function(){var b=this,a=b.dom,f=b.getData(),e,d;if(a&&b.isAnimate){b.stopAnimation()}arguments.callee.$previous.call(this);if(a&&Ext.isIE8&&a.window!=a&&a.nodeType!==9&&a.tagName!=='BODY'&&a.tagName!=='HTML'){c[c.length]=a;M()}if(f){e=f.maskEl;d=f.maskMsg;if(e){e.destroy()}if(d){d.destroy()}}},enableDisplayMode:function(c){var b=this;b.setVisibilityMode(a.DISPLAY);if(c!==undefined){b.getData()[K]=c}return b},fadeIn:function(c){var a=this,b=a.dom;a.animate(Ext.apply({},c,{opacity:1,internalListeners:{beforeanimate:function(d){var a=Ext.fly(b,'_anim');if(a.isStyle('display','none')){a.setDisplayed('')}else {a.show()}}}}));return this},fadeOut:function(a){var b=this,c=b.dom;a=Ext.apply({opacity:0,internalListeners:{afteranimate:function(d){if(c&&d.to.opacity===0){var b=Ext.fly(c,'_anim');if(a.useDisplay){b.setDisplayed(!1)}else {b.hide()}}}}},a);b.animate(a);return b},fixDisplay:function(){var a=this;if(a.isStyle(d,s)){a.setStyle(o,e);a.setStyle(d,a._getDisplay());if(a.isStyle(d,s)){a.setStyle(d,'block')}}},frame:function(b,c,a){var d=this,f=d.dom,e;b=b||'#C3DAF9';c=c||1;a=a||{};e=function(){var g=Ext.fly(f,'_anim'),i=this,d,e,h;g.show();d=g.getBox();e=Ext.getBody().createChild({role:'presentation',id:g.dom.id+'-anim-proxy',style:{position:'absolute','pointer-events':'none','z-index':35000,border:'0px solid '+b}});h=new Ext.fx.Anim({target:e,duration:a.duration||1000,iterations:c,from:{top:d.y,left:d.x,borderWidth:0,opacity:1,height:d.height,width:d.width},to:{top:d.y-20,left:d.x-20,borderWidth:10,opacity:0,height:d.height+40,width:d.width+40}});h.on('afteranimate',function(){e.destroy();i.end()})};d.animate({duration:Math.max(a.duration,500)*2||2000,listeners:{beforeanimate:{fn:e}},callback:a.callback,scope:a.scope});return d},getColor:function(h,f,c){var a=this.getStyle(h),b=c||c===''?c:'#',d,g,e=0;if(!a||/transparent|inherit/.test(a)){return f}if(/^r/.test(a)){a=a.slice(4,a.length-1).split(',');g=a.length;for(;e<g;e++){d=parseInt(a[e],10);b+=(d<16?'0':'')+d.toString(16)}}else {a=a.replace('#','');b+=a.length===3?a.replace(/^(\w)(\w)(\w)$/,'$1$1$2$2$3$3'):a}return b.length>5?b.toLowerCase():f},getLoader:function(){var c=this,b=c.getData(),a=b.loader;if(!a){b.loader=a=new Ext.ElementLoader({target:c})}return a},getPositioning:function(c){var a=this.getStyle(['left','top','position','z-index']),b=this.dom;if(c){if(a.left==='auto'){a.left=b.offsetLeft+'px'}if(a.top==='auto'){a.top=b.offsetTop+'px'}}return a},ghost:function(a,e){var b=this,d=b.dom,c;a=a||'b';c=function(){var h=Ext.fly(d,'_anim'),g=h.getWidth(),f=h.getHeight(),c=h.getXY(),i=h.getPositioning(),b={opacity:0};switch(a){case 't':b.y=c[1]-f;break;case 'l':b.x=c[0]-g;break;case 'r':b.x=c[0]+g;break;case 'b':b.y=c[1]+f;break;case 'tl':b.x=c[0]-g;b.y=c[1]-f;break;case 'bl':b.x=c[0]-g;b.y=c[1]+f;break;case 'br':b.x=c[0]+g;b.y=c[1]+f;break;case 'tr':b.x=c[0]+g;b.y=c[1]-f;break;}this.to=b;this.on('afteranimate',function(){var b=Ext.fly(d,'_anim');if(b){b.hide();b.clearOpacity();b.setPositioning(i)}})};b.animate(Ext.applyIf(e||{},{duration:500,easing:'ease-out',listeners:{beforeanimate:c}}));return b},hide:function(a){if(typeof a==='string'){this.setVisible(!1,a);return this}this.setVisible(!1,this.anim(a));return this},highlight:function(k,b){var g=this,e=g.dom,j={},i,h,c,d,a,f;b=b||{};d=b.listeners||{};c=b.attr||'backgroundColor';j[c]=k||'ffff9c';if(!b.to){h={};h[c]=b.endColor||g.getColor(c,'ffffff','')}else {h=b.to}b.listeners=Ext.apply(Ext.apply({},d),{beforeanimate:function(){i=e.style[c];var g=Ext.fly(e,'_anim');g.clearOpacity();g.show();a=d.beforeanimate;if(a){f=a.fn||a;return f.apply(a.scope||d.scope||t,arguments)}},afteranimate:function(){if(e){e.style[c]=i}a=d.afteranimate;if(a){f=a.fn||a;f.apply(a.scope||d.scope||t,arguments)}}});g.animate(Ext.apply({},b,{duration:1000,easing:'ease-in',from:j,to:h}));return g},hover:function(d,e,c,b){var a=this;a.on('mouseenter',d,c||a.dom,b);a.on('mouseleave',e,c||a.dom,b);return a},initDD:function(c,b,a){var d=new Ext.dd.DD(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDProxy:function(c,b,a){var d=new Ext.dd.DDProxy(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDTarget:function(c,b,a){var d=new Ext.dd.DDTarget(Ext.id(this.dom),c,b);return Ext.apply(d,a)},isFocusable:function(){var a=this.dom,b=!1,c;if(a&&!a.disabled){c=a.nodeName;b=!!Ext.Element.naturallyFocusableTags[c]||(c==='A'||c==='LINK')&&!!a.href||a.getAttribute('tabIndex')!=null||a.contentEditable==='true';if(Ext.isIE8&&c==='INPUT'&&a.type==='hidden'){b=!1}b=b&&this.isVisible(!0)}return b},isInputField:function(){var a=this.dom,b=a.contentEditable;if(z[a.tagName]&&a.type!=='button'||(b===''||b==='true')){return !0}return !1},isTabbable:function(f){var c=this.dom,a=!1,e,d,b;if(c&&!c.disabled){e=c.nodeName;b=c.getAttribute('tabIndex');d=b!=null;b-=0;if(e==='A'||e==='LINK'){if(c.href){a=d&&b<0?!1:!0}else {if(c.contentEditable==='true'){a=!d||d&&b>=0?!0:!1}else {a=d&&b>=0?!0:!1}}}else {if(c.contentEditable==='true'||Ext.Element.naturallyTabbableTags[e]){a=d&&b<0?!1:!0}else {if(d&&b>=0){a=!0}}}if(Ext.isIE8&&e==='INPUT'&&c.type==='hidden'){a=!1}a=a&&(f||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))}return a},isMasked:function(g){var b=this,f=b.getData(),e=f.maskEl,d=f.maskMsg,c=!1,a;if(e&&e.isVisible()){if(d){d.center(b)}c=!0}else {if(g){a=b.findParentNode();if(a){return Ext.fly(a).isMasked(g)}}}return c},load:function(a){this.getLoader().load(a);return this},mask:function(h,f,i){var c=this,d=c.dom,g=c.getData(),a=g.maskEl,e;if(!(D.test(d.tagName)&&c.getStyle('position')==='static')){c.addCls(k)}if(a){a.destroy()}a=Ext.DomHelper.append(d,{role:'presentation',cls:'x-mask x-border-box',children:{role:'presentation',cls:f?m+' '+f:m,cn:{tag:'div',role:'presentation',cls:'x-mask-msg-inner',cn:{tag:'div',role:'presentation',cls:'x-mask-msg-text',html:h||''}}}},!0);e=Ext.get(a.dom.firstChild);g.maskEl=a;c.addCls(r);a.setDisplayed(!0);if(typeof h==='string'){e.setDisplayed(!0);e.center(c)}else {e.setDisplayed(!1)}if(d===b.body){a.addCls('x-mask-fixed')}c.saveTabbableState({skipSelf:d===b.body});if(Ext.isIE9m&&d!==b.body&&c.isStyle('height','auto')){a.setSize(undefined,i||c.getHeight())}return a},monitorMouseLeave:function(e,d,f){var c=this,b,a={mouseleave:function(a){if(Ext.isIE9m){a.enableIEAsync()}b=Ext.defer(d,e,f||c,[a])},mouseenter:function(){clearTimeout(b)}};c.on(a);return a},puff:function(a){var c=this,e=c.dom,d,b=c.getBox(),f=c.getStyle(['width','height','left','right','top','bottom','position','z-index','font-size','opacity'],!0);a=Ext.applyIf(a||{},{easing:'ease-out',duration:500,useDisplay:!1});d=function(){var c=Ext.fly(e,'_anim');c.clearOpacity();c.show();this.to={width:b.width*2,height:b.height*2,x:b.x-b.width/2,y:b.y-b.height/2,opacity:0,fontSize:'200%'};this.on('afteranimate',function(){var b=Ext.fly(e,'_anim');if(b){if(a.useDisplay){b.setDisplayed(!1)}else {b.hide()}b.setStyle(f);Ext.callback(a.callback,a.scope)}})};c.animate({duration:a.duration,easing:a.easing,listeners:{beforeanimate:{fn:d}}});return c},selectable:function(){var b=this;b.dom.unselectable='';b.removeCls(a.unselectableCls);b.addCls(a.selectableCls);return b},setCapture:function(){var a=this.dom;if(Ext.isIE9m&&a.setCapture){a.setCapture()}},setHeight:function(c,a){var b=this;if(!a||!b.anim){arguments.callee.$previous.apply(this,arguments)}else {if(!Ext.isObject(a)){a={}}b.animate(Ext.applyIf({to:{height:c}},a))}return b},setHorizontal:function(){var a=this,b=a.verticalCls;delete a.vertical;if(b){delete a.verticalCls;a.removeCls(b)}delete a.setWidth;delete a.setHeight;if(!Ext.isIE8){delete a.getWidth;delete a.getHeight}delete a.styleHooks},updateText:function(d){var e=this,c,a;if(c){a=c.firstChild;if(!a||(a.nodeType!==3||a.nextSibling)){a=b.createTextNode();e.empty();c.appendChild(a)}if(d){a.data=d}}},setHtml:function(c,i,g,d){var a=this,f,e,h;if(!a.dom){return a}c=c||'';e=a.dom;if(i!==!0){e.innerHTML=c;Ext.callback(g,a);return a}f=Ext.id();c+='<span id="'+f+'" role="presentation"></span>';h=Ext.interval(function(){var o,e,l,k,j,n,m;if(!(n=b.getElementById(f))){return !1}clearInterval(h);Ext.removeNode(n);o=Ext.getHead().dom;while(e=O.exec(c)){l=e[1];k=l?l.match(G):!1;if(k&&k[2]){m=b.createElement('script');m.src=k[2];j=l.match(E);if(j&&j[2]){m.type=j[2]}o.appendChild(m)}else {if(e[2]&&e[2].length>0){if(d){Ext.functionFactory(e[2]).call(d)}else {Ext.globalEval(e[2])}}}}Ext.callback(g,d||a)},20);e.innerHTML=c.replace(J,'');return a},setOpacity:function(c,b){var a=this;if(!a.dom){return a}if(!b||!a.anim){a.setStyle('opacity',c)}else {if(typeof b!='object'){b={duration:350,easing:'ease-in'}}a.animate(Ext.applyIf({to:{opacity:c}},b))}return a},setPositioning:function(a){return this.setStyle(a)},setVertical:function(e,d){var b=this,c=a.prototype;b.vertical=!0;if(d){b.addCls(b.verticalCls=d)}b.setWidth=c.setHeight;b.setHeight=c.setWidth;if(!Ext.isIE8){b.getWidth=c.getHeight;b.getHeight=c.getWidth}b.styleHooks=e===270?c.verticalStyleHooks270:c.verticalStyleHooks90},setSize:function(c,e,d){var b=this;if(Ext.isObject(c)){d=e;e=c.height;c=c.width}if(!d||!b.anim){b.dom.style.width=a.addUnits(c);b.dom.style.height=a.addUnits(e);if(b.shadow||b.shim){b.syncUnderlays()}}else {if(d===!0){d={}}b.animate(Ext.applyIf({to:{width:c,height:e}},d))}return b},setVisible:function(f,g){var b=this,h=b.dom,c=u(b);if(typeof g==='string'){switch(g){case d:c=a.DISPLAY;break;case o:c=a.VISIBILITY;break;case A:c=a.OFFSETS;break;case H:c=a.CLIP;break;}b.setVisibilityMode(c);g=!1}if(!g||!b.anim){if(c===a.DISPLAY){return b.setDisplayed(f)}else {if(c===a.OFFSETS){b[f?'removeCls':'addCls'](N)}else {if(c===a.CLIP){b[f?'removeCls':'addCls'](w)}else {if(c===a.VISIBILITY){b.fixDisplay();h.style.visibility=f?'':e}}}}}else {if(f){b.setOpacity(0.01);b.setVisible(!0)}if(!Ext.isObject(g)){g={duration:350,easing:'ease-in'}}b.animate(Ext.applyIf({callback:function(){if(!f){Ext.fly(h).setVisible(!1).setOpacity(1)}},to:{opacity:f?1:0}},g))}b.getData()[x]=f;if(b.shadow||b.shim){b.setUnderlaysVisible(f)}return b},setWidth:function(c,a){var b=this;if(!a||!b.anim){arguments.callee.$previous.apply(this,arguments)}else {if(!Ext.isObject(a)){a={}}b.animate(Ext.applyIf({to:{width:c}},a))}return b},setX:function(b,a){return this.setXY([b,this.getY()],a)},setXY:function(b,a){var c=this;if(!a||!c.anim){arguments.callee.$previous.call(this,b)}else {if(!Ext.isObject(a)){a={}}c.animate(Ext.applyIf({to:{x:b[0],y:b[1]}},a))}return this},setY:function(b,a){return this.setXY([this.getX(),b],a)},show:function(a){if(typeof a==='string'){this.setVisible(!0,a);return this}this.setVisible(!0,this.anim(a));return this},slideIn:function(a,c,d){var b=this,g=b.dom,h=g.style,j,e,f,i;a=a||'t';c=c||{};j=function(){var p=this,o=c.listeners,m=Ext.fly(g,'_anim'),j,n,l,k;if(!d){m.fixDisplay()}j=m.getBox();if((a=='t'||a=='b')&&j.height===0){j.height=g.scrollHeight}else {if((a=='l'||a=='r')&&j.width===0){j.width=g.scrollWidth}}n=m.getStyle(['width','height','left','right','top','bottom','position','z-index'],!0);m.setSize(j.width,j.height);if(c.preserveScroll){f=m.cacheScrollValues()}k=m.wrap({role:'presentation',id:Ext.id()+'-anim-wrap-for-'+m.dom.id,style:{visibility:d?'visible':'hidden'}});i=k.dom.parentNode;k.setPositioning(m.getPositioning());if(k.isStyle('position','static')){k.position('relative')}m.clearPositioning('auto');k.clip();if(f){f()}m.setStyle({visibility:'',position:'absolute'});if(d){k.setSize(j.width,j.height)}switch(a){case 't':l={from:{width:j.width+'px',height:'0px'},to:{width:j.width+'px',height:j.height+'px'}};h.bottom='0px';break;case 'l':l={from:{width:'0px',height:j.height+'px'},to:{width:j.width+'px',height:j.height+'px'}};b.anchorAnimX(a);break;case 'r':l={from:{x:j.x+j.width,width:'0px',height:j.height+'px'},to:{x:j.x,width:j.width+'px',height:j.height+'px'}};b.anchorAnimX(a);break;case 'b':l={from:{y:j.y+j.height,width:j.width+'px',height:'0px'},to:{y:j.y,width:j.width+'px',height:j.height+'px'}};break;case 'tl':l={from:{x:j.x,y:j.y,width:'0px',height:'0px'},to:{width:j.width+'px',height:j.height+'px'}};h.bottom='0px';b.anchorAnimX('l');break;case 'bl':l={from:{y:j.y+j.height,width:'0px',height:'0px'},to:{y:j.y,width:j.width+'px',height:j.height+'px'}};b.anchorAnimX('l');break;case 'br':l={from:{x:j.x+j.width,y:j.y+j.height,width:'0px',height:'0px'},to:{x:j.x,y:j.y,width:j.width+'px',height:j.height+'px'}};b.anchorAnimX('r');break;case 'tr':l={from:{x:j.x+j.width,width:'0px',height:'0px'},to:{x:j.x,width:j.width+'px',height:j.height+'px'}};h.bottom='0px';b.anchorAnimX('r');break;}k.show();e=Ext.apply({},c);delete e.listeners;e=new Ext.fx.Anim(Ext.applyIf(e,{target:k,duration:500,easing:'ease-out',from:d?l.to:l.from,to:d?l.from:l.to}));e.on('afteranimate',function(){var b=Ext.fly(g,'_anim');b.setStyle(n);if(d){if(c.useDisplay){b.setDisplayed(!1)}else {b.hide()}}if(k.dom){if(k.dom.parentNode){k.dom.parentNode.insertBefore(b.dom,k.dom)}else {i.appendChild(b.dom)}k.destroy()}if(f){f()}p.end()});if(o){e.on(o)}};b.animate({duration:c.duration?Math.max(c.duration,500)*2:1000,listeners:{beforeanimate:j}});return b},slideOut:function(a,b){return this.slideIn(a,b,!0)},swallowEvent:function(a,f){var b=this,c,d,e=function(b){b.stopPropagation();if(f){b.preventDefault()}};if(Ext.isArray(a)){d=a.length;for(c=0;c<d;c++){b.on(a[c],e)}return b}b.on(a,e);return b},switchOff:function(a){var c=this,b=c.dom,d;a=Ext.applyIf(a||{},{easing:'ease-in',duration:500,remove:!1,useDisplay:!1});d=function(){var c=Ext.fly(b,'_anim'),h=this,d=c.getSize(),g=c.getXY(),e,f;c.clearOpacity();c.clip();f=c.getPositioning();e=new Ext.fx.Animator({target:b,duration:a.duration,easing:a.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:g[1]+d.height/2},100:{width:1,x:g[0]+d.width/2}}});e.on('afteranimate',function(){var c=Ext.fly(b,'_anim');if(a.useDisplay){c.setDisplayed(!1)}else {c.hide()}c.clearOpacity();c.setPositioning(f);c.setSize(d);h.end()})};c.animate({duration:Math.max(a.duration,500)*2,listeners:{beforeanimate:{fn:d}},callback:a.callback,scope:a.scope});return c},syncContent:function(d){d=Ext.getDom(d);if(d==null){return}var i=d.childNodes,k=i.length,e=this.dom,j=e.childNodes,n=j.length,b,c,a,g,f,l,h,m=e._extData;if(Ext.isIE9m&&e.mergeAttributes){e.mergeAttributes(d,!0);e.src=d.src}else {f=d.attributes;l=f.length;for(b=0;b<l;b++){h=f[b].name;if(h!=='id'){e.setAttribute(h,f[b].value)}}}if(m){m.isSynchronized=!1}if(k!==n){e.innerHTML=d.innerHTML;return}for(b=0;b<k;b++){a=i[b];c=j[b];g=a.nodeType;if(g!==c.nodeType||g===1&&a.tagName!==c.tagName){e.innerHTML=d.innerHTML;return}if(g===3){c.data=a.data}else {if(a.id&&c.id!==a.id){c.id=a.id}c.style.cssText=a.style.cssText;c.className=a.className;Ext.fly(c,'_syncContent').syncContent(a)}}},toggle:function(b){var a=this;a.setVisible(!a.isVisible(),a.anim(b));return a},unmask:function(){var d=this,e=d.getData(),a=e.maskEl,c;if(a){c=a.dom.style;if(c.clearExpression){c.clearExpression('width');c.clearExpression('height')}if(a){a.destroy();delete e.maskEl}d.removeCls([r,k])}d.restoreTabbableState(d.dom===b.body)},unclip:function(){var b=this,c=b.getData(),a;if(c[g]){c[g]=!1;a=c[n];if(a.o){b.setStyle(j,a.o)}if(a.x){b.setStyle(h,a.x)}if(a.y){b.setStyle(i,a.y)}}return b},translate:function(a,b,c){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else {if(a!=null){this.dom.style.left=a+'px'}if(b!=null){this.dom.style.top=b+'px'}}},unselectable:function(){var b=this;if(Ext.isOpera){b.dom.unselectable='on'}b.removeCls(a.selectableCls);b.addCls(a.unselectableCls);return b},privates:{findTabbableElements:function(d){var l,k,a,h,g,e=this.dom,n=Ext.Element.tabbableSavedCounterAttribute,b=[],p=0,i,c,o,f,j,m;if(!e){return b}if(d){l=d.skipSelf;k=d.skipChildren;a=d.excludeRoot;h=d.includeSaved;g=d.includeHidden}a=a&&Ext.getDom(a);if(a&&a.contains(e)){return b}if(!l&&(h&&e.hasAttribute(n)||this.isTabbable(g))){b[p++]=e}if(k){return b}i=e.querySelectorAll(Ext.Element.tabbableSelector);j=i.length;if(!j){return b}o=new Ext.dom.Fly();for(f=0;f<j;f++){c=i[f];m=+c.getAttribute('tabIndex');if((h&&c.hasAttribute(n)||!(m<0)&&o.attach(c).isTabbable(g))&&!(a&&(a===c||a.contains(c)))){b[p++]=c}}return b},saveTabbableState:function(b){var e=Ext.Element.tabbableSavedCounterAttribute,g=Ext.Element.tabbableSavedValueAttribute,f,c,a,d,h;if(!b||b.includeSaved==null){b=Ext.Object.chain(b||null);b.includeSaved=!0}c=this.findTabbableElements(b);for(d=0,h=c.length;d<h;d++){a=c[d];f=+a.getAttribute(e);if(f>0){a.setAttribute(e,++f)}else {if(a.hasAttribute('tabIndex')){a.setAttribute(g,a.getAttribute('tabIndex'))}else {a.setAttribute(g,'none')}a.setAttribute('tabIndex','-1');a.setAttribute(e,'1')}}return c},restoreTabbableState:function(k,j){var g=this.dom,c=Ext.Element.tabbableSavedCounterAttribute,e=Ext.Element.tabbableSavedValueAttribute,b=[],h,f,b,a,d,i;if(!g){return this}if(!j){b=Ext.Array.from(g.querySelectorAll('['+c+']'))}if(!k){b.unshift(g)}for(d=0,i=b.length;d<i;d++){a=b[d];if(!a.hasAttribute(c)||!a.hasAttribute(e)){continue}f=+a.getAttribute(c);if(f>1){a.setAttribute(c,--f);continue}h=a.getAttribute(e);if(h==='none'){a.removeAttribute('tabIndex')}else {a.setAttribute('tabIndex',h)}a.removeAttribute(e);a.removeAttribute(c)}return b}},deprecated:{'4.0':{methods:{pause:function(b){var a=this;Ext.fx.Manager.setFxDefaults(a.id,{delay:b});return a},scale:function(c,a,b){this.animate(Ext.apply({},b,{width:c,height:a}));return this},shift:function(a){this.animate(a);return this}}},'4.2':{methods:{moveTo:function(b,c,a){return this.setXY([b,c],a)},setBounds:function(d,e,c,b,a){return this.setBox({x:d,y:e,width:c,height:b},a)},setLeftTop:function(d,e){var b=this,c=b.dom.style;c.left=a.addUnits(d);c.top=a.addUnits(e);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocation:function(b,c,a){return this.setXY([b,c],a)}}},'5.0':{methods:{getAttributeNS:function(a,b){return this.getAttribute(b,a)},getCenterXY:function(){return this.getAlignToXY(b,'c-c')},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(C))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(F))||0},getStyleSize:function(){var d=this,e=this.dom,h=e===b||e===b.body,c,g,f;if(h){return {width:a.getViewportWidth(),height:a.getViewportHeight()}}c=d.getStyle(['height','width'],!0);if(c.width&&c.width!=='auto'){g=parseFloat(c.width)}if(c.height&&c.height!=='auto'){f=parseFloat(c.height)}return {width:g||d.getWidth(!0),height:f||d.getHeight(!0)}},isBorderBox:function(){return !0},isDisplayed:function(){return !this.isStyle('display','none')},focusable:'isFocusable'}}}}}(),function(){var g=Ext.dom.Element,a=g.prototype,t=!Ext.isIE8,f=document,q=f.defaultView,p=/alpha\(opacity=(.*)\)/i,w=/^\s+|\s+$/g,d=a.styleHooks,e=Ext.supports,c,b,l,m,i,j,n;a._init(g);delete a._init;Ext.plainTableCls='x-table-plain';Ext.plainListCls='x-list-plain';if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!e.Opacity&&Ext.isIE){Ext.apply(d.opacity,{get:function(d){var c=d.style.filter,b,a;if(c.match){b=c.match(p);if(b){a=parseFloat(b[1]);if(!isNaN(a)){return a?a/100:0}}}return 1},set:function(d,a){var b=d.style,c=b.filter.replace(p,'').replace(w,'');b.zoom=1;if(typeof a==='number'&&a>=0&&a<1){a*=100;b.filter=c+(c.length?' ':'')+'alpha(opacity='+a+')'}else {b.filter=c}}})}if(!e.matchesSelector){var r=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,v=/\-/g,h,s=function(a,c){var b=new RegExp('(?:^|\\s+)'+c.replace(v,'\\-')+'(?:\\s+|$)');if(a&&a!=='*'){a=a.toUpperCase();return function(d){return d.tagName===a&&b.test(d.className)}}return function(d){return b.test(d.className)}},u=function(a){a=a.toUpperCase();return function(b){return b.tagName===a}},k={};a.matcherCache=k;a.is=function(a){if(!a){return !0}var b=this.dom,g,e,d,c,j,l,i;if(b.nodeType!==1){return !1}if(!(d=Ext.isFunction(a)?a:k[a])){if(!(e=a.match(r))){c=b.parentNode;if(!c){j=!0;c=h||(h=f.createDocumentFragment());h.appendChild(b)}l=Ext.Array.indexOf(Ext.fly(c,'_is').query(a),b)!==-1;if(j){h.removeChild(b)}return l}i=e[1];g=e[2];k[a]=d=g?s(i,g):u(i)}return d(b)}}if(!q||!q.getComputedStyle){a.getStyle=function(o,p){var j=this,e=j.dom,n=typeof o!=='string',a=o,i=a,r=1,m=p,l=j.styleHooks,q,h,d,c,f,b,k;if(n){d={};a=i[0];k=0;if(!(r=i.length)){return d}}if(!e||e.documentElement){return d||''}h=e.style;if(p){b=h}else {b=e.currentStyle;if(!b){m=!0;b=h}}do{c=l[a];if(!c){l[a]=c={name:g.normalize(a)}}if(c.get){f=c.get(e,j,m,b)}else {q=c.name;f=b[q]}if(!n){return f}d[a]=f;a=i[++k]}while(k<r);return d}}if(Ext.isIE8){n=function(c,d,b,a){if(a[this.styleName]==='none'){return '0px'}return a[this.name]};l=['Top','Right','Bottom','Left'];m=l.length;while(m--){i=l[m];j='border'+i+'Width';d['border-'+i.toLowerCase()+'-width']=d[j]={name:j,styleName:'border'+i+'Style',get:n}}var o='x-sync-repaint';a.syncRepaint=function(){this.addCls(o);this.getWidth();this.removeCls(o)}}if(Ext.isIE10m){Ext.override(g,{focus:function(c,a){var b=this,d;a=a||b.dom;if(Number(c)){Ext.defer(b.focus,c,b,[null,a])}else {Ext.GlobalEvents.fireEvent('beforefocus',a);if(a&&(a.tagName==='INPUT'||a.tagname==='TEXTAREA')){Ext.synchronouslyFocusing=document.activeElement}try{a.focus()}catch(x){d=x}if(Ext.synchronouslyFocusing&&document.activeElement!==a&&!d){a.focus()}Ext.synchronouslyFocusing=null}return b}})}Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getDetachedBody:function(){var a=Ext.detachedBodyEl;if(!a){a=f.createElement('div');Ext.detachedBodyEl=a=new Ext.dom.Fly(a);a.isDetachedBody=!0}return a},getElementById:function(c){var a=f.getElementById(c),b;if(!a&&(b=Ext.detachedBodyEl)){a=b.dom.querySelector(Ext.makeIdSelector(c))}return a},addBehaviors:function(e){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(e)})}else {var b={},c,d,a;for(d in e){if((c=d.split('@'))[1]){a=c[0];if(!b[a]){b[a]=Ext.fly(document).select(a,!0)}b[a].on(c[1],e[d])}}b=null}}});if(Ext.isIE9m){Ext.getElementById=function(c){var a=f.getElementById(c),b;if(!a&&(b=Ext.detachedBodyEl)){a=b.dom.all[c]}return a};a.getById=function(d,g){var e=this.dom,b=null,a,c;if(e){c=t&&f.getElementById(d)||e.all[d];if(c){if(g){b=c}else {a=Ext.cache[d];if(a){if(a.skipGarbageCollection||!Ext.isGarbage(a.dom)){b=a}else {a.destroy()}}b=b||new Ext.Element(c)}}}return b}}else {if(!f.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(a){return f.getElementById(a)};a.getById=function(c,b){var a=f.getElementById(c);return b?a:a?Ext.get(a):null}}}if(Ext.isIE&&!(Ext.isIE9p&&f.documentMode>=9)){a.getAttribute=function(a,c){var d=this.dom,b;if(c){b=typeof d[c+':'+a];if(b!=='undefined'&&b!=='unknown'){return d[c+':'+a]||null}return null}if(a==='for'){a='htmlFor'}return d[a]||null}}Ext.onInternalReady(function(){var o=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,h=[],p=a.setWidth,n=a.setHeight,m=a.setSize,q=/^\d+(?:\.\d*)?px$/i,i,l,k,j;if(e.FixedTableWidthBug){d.width={name:'width',set:function(c,e,f){var a=c.style,b=f._needsTableWidthFix,d=a.display;if(b){a.display='none'}a.width=e;if(b){c.scrollWidth;a.display=d}}};a.setWidth=function(g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;if(d&&!b){c.display='none'}p.call(a,g,b);if(d&&!b){e.scrollWidth;c.display=f}return a};a.setSize=function(h,g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;if(d&&!b){c.display='none'}m.call(a,h,g,b);if(d&&!b){e.scrollWidth;c.display=f}return a}}if(Ext.isIE8){d.height={name:'height',set:function(f,b,e){var a=e.component,d,c;if(a&&a._syncFrameHeight&&e===a.el){c=a.frameBody.dom.style;if(q.test(b)){d=a.getFrameInfo();if(d){c.height=parseInt(b,10)-d.height+'px'}}else {if(!b||b==='auto'){c.height=''}}}f.style.height=b}};a.setHeight=function(b,e){var a=this.component,d,c;if(a&&a._syncFrameHeight&&this===a.el){c=a.frameBody.dom.style;if(!b||b==='auto'){c.height=''}else {d=a.getFrameInfo();if(d){c.height=b-d.height+'px'}}}return n.call(this,b,e)};a.setSize=function(f,b,e){var a=this.component,d,c;if(a&&a._syncFrameHeight&&this===a.el){c=a.frameBody.dom.style;if(!b||b==='auto'){c.height=''}else {d=a.getFrameInfo();if(d){c.height=b-d.height+'px'}}}return m.call(this,f,b,e)}}Ext.getDoc().on('selectstart',function(h,a){var e=g.selectableCls,d=g.unselectableCls,b=a&&a.tagName;b=b&&b.toLowerCase();if(b==='input'||b==='textarea'){return}while(a&&a.nodeType===1&&a!==f.documentElement){var c=Ext.fly(a);if(c.hasCls(e)){return}if(c.hasCls(d)){h.stopEvent();return}a=a.parentNode}});function fixTransparent(d,e,c,b){var a=b[this.name]||'';return o.test(a)?'transparent':a}function makeSelectionRestoreFn(a,b,c){return function(){a.selectionStart=b;a.selectionEnd=c}}function getRightMarginFixCleaner(i){var h=e.DisplayChangeInputSelectionBug,f=e.DisplayChangeTextAreaSelectionBug,a,d,b,c;if(h||f){a=g.getActiveElement();d=a&&a.tagName;if(f&&d==='TEXTAREA'||h&&d==='INPUT'&&a.type==='text'){if(Ext.fly(i).isAncestor(a)){b=a.selectionStart;c=a.selectionEnd;if(Ext.isNumber(b)&&Ext.isNumber(c)){return makeSelectionRestoreFn(a,b,c)}}}}return Ext.emptyFn}function fixRightMargin(c,g,f,e){var b=e.marginRight,a,d;if(b!=='0px'){a=c.style;d=a.display;a.display='inline-block';b=(f?e:c.ownerDocument.defaultView.getComputedStyle(c,null)).marginRight;a.display=d}return b}function fixRightMarginAndInputFocus(b,h,g,f){var c=f.marginRight,a,d,e;if(c!=='0px'){a=b.style;d=getRightMarginFixCleaner(b);e=a.display;a.display='inline-block';c=(g?f:b.ownerDocument.defaultView.getComputedStyle(b,'')).marginRight;a.display=e;d()}return c}if(!e.RightMargin){d.marginRight=d['margin-right']={name:'marginRight',get:e.DisplayChangeInputSelectionBug||e.DisplayChangeTextAreaSelectionBug?fixRightMarginAndInputFocus:fixRightMargin}}if(!e.TransparentColor){i=['background-color','border-color','color','outline-color'];for(l=i.length;l--;){k=i[l];j=g.normalize(k);d[k]=d[j]={name:j,get:fixTransparent}}}a.verticalStyleHooks90=c=Ext.Object.chain(d);a.verticalStyleHooks270=b=Ext.Object.chain(d);c.width=d.height||{name:'height'};c.height=d.width||{name:'width'};c['margin-top']={name:'marginLeft'};c['margin-right']={name:'marginTop'};c['margin-bottom']={name:'marginRight'};c['margin-left']={name:'marginBottom'};c['padding-top']={name:'paddingLeft'};c['padding-right']={name:'paddingTop'};c['padding-bottom']={name:'paddingRight'};c['padding-left']={name:'paddingBottom'};c['border-top']={name:'borderLeft'};c['border-right']={name:'borderTop'};c['border-bottom']={name:'borderRight'};c['border-left']={name:'borderBottom'};b.width=d.height||{name:'height'};b.height=d.width||{name:'width'};b['margin-top']={name:'marginRight'};b['margin-right']={name:'marginBottom'};b['margin-bottom']={name:'marginLeft'};b['margin-left']={name:'marginTop'};b['padding-top']={name:'paddingRight'};b['padding-right']={name:'paddingBottom'};b['padding-bottom']={name:'paddingLeft'};b['padding-left']={name:'paddingTop'};b['border-top']={name:'borderRight'};b['border-right']={name:'borderBottom'};b['border-bottom']={name:'borderLeft'};b['border-left']={name:'borderTop'};if(!Ext.scopeCss){h.push('x-body')}if(e.Touch){h.push('x-touch')}if(Ext.isIE&&Ext.isIE9m){h.push('x-ie','x-ie9m');h.push('x-ie8p');if(Ext.isIE8){h.push('x-ie8')}else {h.push('x-ie9','x-ie9p')}if(Ext.isIE8m){h.push('x-ie8m')}}if(Ext.isIE10){h.push('x-ie10')}if(Ext.isIE10p){h.push('x-ie10p')}if(Ext.isIE11){h.push('x-ie11')}if(Ext.isGecko){h.push('x-gecko')}if(Ext.isOpera){h.push('x-opera')}if(Ext.isOpera12m){h.push('x-opera12m')}if(Ext.isWebKit){h.push('x-webkit')}if(Ext.isSafari){h.push('x-safari')}if(Ext.isChrome){h.push('x-chrome')}if(Ext.isMac){h.push('x-mac')}if(Ext.isLinux){h.push('x-linux')}if(!e.CSS3BorderRadius){h.push('x-nbr')}if(!e.CSS3LinearGradient){h.push('x-nlg')}if(e.Touch){h.push('x-touch')}Ext.getBody().addCls(h)},null,{priority:1500})});Ext.cmd.derive('Sch.util.Patch',Ext.Base,{target:null,minVersion:null,maxVersion:null,reportUrl:null,obsoleteTestName:null,description:null,applyFn:null,ieOnly:!1,macOnly:!1,overrides:null,onClassExtended:function(b,a){if(Sch.disableOverrides){return}if(a.ieOnly&&!Ext.isIE){return}if(a.macOnly&&!Ext.isMac){return}if((!a.minVersion||Ext.versions.extjs.equals(a.minVersion)||Ext.versions.extjs.isGreaterThan(a.minVersion))&&(!a.maxVersion||Ext.versions.extjs.equals(a.maxVersion)||Ext.versions.extjs.isLessThan(a.maxVersion))){Ext.require(a.target,function(){if(a.applyFn){a.applyFn()}else {if(a.overrides){Ext.ClassManager.get(a.target).override(a.overrides)}}})}}},0,0,0,0,0,0,[Sch.util,'Patch'],0);Ext.define('Ext.rtl.dom.Element',{override:'Ext.dom.Element',rtlXAnchors:{l:'r',r:'l'},_positionTopRight:['position','top','right'],pxRe:/^\d+(?:\.\d*)?px$/i,statics:{rtlParseBox:function(c){var a=Ext.Element.parseBox(c),b;b=a.left;a.left=a.right;a.right=b;return a},rtlUnitizeBox:function(e,a){var d=Ext.Element,b=d.addUnits,c=d.parseBox(e);return b(c.top,a)+' '+b(c.left,a)+' '+b(c.bottom,a)+' '+b(c.right,a)}},anchorAnimX:function(a){if(Ext.rootInheritedState.rtl){a=this.rtlXAnchors[a]}arguments.callee.$previous.apply(this,arguments)},getPositioning:function(d){var c=Ext.rootInheritedState.rtl?'right':'left',a=this.getStyle([c,'top','position','z-index']),b=this.dom;if(d){if(a[c]==='auto'){a[c]=c==='left'?b.offsetLeft+'px':b.offsetParent.offsetWidth-b.offsetLeft-b.offsetWidth}if(a.top==='auto'){a.top=b.offsetTop+'px'}}return a},getXY:function(){var a=document,f=Math.round,e=this.dom,d=0,g=0,c,b;if(e!==a&&e!==a.body){try{c=e.getBoundingClientRect()}catch(h){c={left:0,top:0}}a=Ext.fly(a,'_internal');if(Ext.rootInheritedState.rtl){b=a.rtlGetScroll();d=Ext.Element.getViewportWidth()-c.right+b.left}else {b=a.getScroll();d=c.left+b.left}d=f(d);g=f(c.top+b.top)}return [d,g]},rtlGetLocalX:function(){var b=this,c=b.dom.offsetParent,a=b.getStyle('right');if(!a||a==='auto'){a=0}else {if(b.pxRe.test(a)){a=parseFloat(a)}else {a=b.getX();if(c){a-=Ext.fly(c,'_internal').getX()}}}return a},rtlGetLocalXY:function(){var c=this,d=c.dom.offsetParent,e=c.getStyle(['right','top']),a=e.right,b=e.top;if(!a||a==='auto'){a=0}else {if(c.pxRe.test(a)){a=parseFloat(a)}else {a=c.getX();if(d){a-=Ext.fly(d,'_internal').getX()}}}if(!b||b==='auto'){b=0}else {if(c.pxRe.test(b)){b=parseFloat(b)}else {b=c.getY();if(d){b-=Ext.fly(d,'_internal').getY()}}}return [a,b]},rtlGetScroll:function(){var b=this,a=b.dom,g=document,f=g.body,d=b.getScroll(),e=Math.abs(d.left),c=a===g||a===f;if(c?3&b._rtlDocScrollFlag:b._rtlScrollFlag===1){if(c){a=f}e=a.scrollWidth-e-(c?Ext.Element.getViewportWidth():a.clientWidth)}d.left=e;return d},rtlGetScrollLeft:function(){return this.rtlGetScroll().left},rtlNormalizeScrollLeft:function(a){var c=this.dom,b=this._rtlScrollFlag;if(b===0){a=-a}else {if(b===1){a=c.scrollWidth-a-c.clientWidth}}return a},rtlScrollBy:function(a,c,d){var b=this,f=b.dom,e;if(a.length){d=c;c=a[1];a=a[0]}else {if(typeof a!=='number'){d=c;c=a.y;a=a.x}}if(a){e=b.rtlNormalizeScrollLeft(b.constrainScrollLeft(b.rtlGetScrollLeft()+a));b.scrollTo('left',e,d)}if(c){b.scrollTo('top',b.constrainScrollTop(f.scrollTop+c),d)}return b},rtlScrollIntoView:function(a,d,c,b){a=Ext.getDom(a)||Ext.getBody().dom;return this.doScrollIntoView(a,d,c,b,'rtlGetScrollLeft','rtlScrollTo')},rtlScrollTo:function(b,a,c){if(b==='left'){a=this.rtlNormalizeScrollLeft(a)}return this.scrollTo(b,a,c)},rtlSetLocalX:function(c){var a=this,b=a.dom.style;b.left='auto';b.right=c===null?'auto':c+'px';if(a.shadow||a.shim){a.syncUnderlays()}return a},rtlSetLocalXY:function(a,d){var c=this,b=c.dom.style;b.left='auto';if(a&&a.length){d=a[1];a=a[0]}if(a===null){b.right='auto'}else {if(a!==undefined){b.right=a+'px'}}if(d===null){b.top='auto'}else {if(d!==undefined){b.top=d+'px'}}if(c.shadow||c.shim){c.syncUnderlays()}return c},rtlSetScrollLeft:function(b){var a=this;a.dom.scrollLeft=a.rtlNormalizeScrollLeft(b);return a},rtlTranslatePoints:function(b,c){var a=this.rtlTranslateXY(b,c);return {right:a.x,top:a.y}},rtlTranslateXY:function(a,j){var c=this,f=c.getStyle(c._positionTopRight),m=f.position==='relative',b=parseFloat(f.right),e=parseFloat(f.top),l=c.getXY(),i=c.dom,h,g,k,d;if(a&&a.length){j=a[1];a=a[0]}if(isNaN(b)){h=document;g=h.body;if(i===g){b=0}else {d=i.offsetParent;k=d&&d!==g&&d!==h.documentElement?d.scrollWidth:Ext.Element.getViewportWidth();b=k-i.offsetLeft-c.getWidth()}}if(isNaN(e)){e=m?0:c.dom.offsetTop}b=typeof a==='number'?a-l[0]+b:undefined;e=typeof j==='number'?j-l[1]+e:undefined;return {x:b,y:e}},translatePoints:function(a,b){return Ext.rootInheritedState.rtl?this.rtlTranslatePoints(a,b):arguments.callee.$previous.apply(this,arguments)},translateXY:function(a,b){return Ext.rootInheritedState.rtl?this.rtlTranslateXY(a,b):arguments.callee.$previous.apply(this,arguments)},wrap:function(){var c=this.parent(),d='x-rtl',b='x-ltr',e=arguments.callee.$previous.apply(this,arguments),a;if(c.hasCls(d)){a=d}else {if(c.hasCls(b)){a=b}}if(a){Ext.fly(e,'_internal').addCls(a)}return e}},function(){var a=this;Ext.CompositeElementLite.importElementMethods();function cacheRtlScrollFlag(){var d=Ext.getBody().createChild({tag:'div',style:'direction:rtl;position:absolute;overflow:auto;height:100px;width:100px;',children:[{tag:'div',style:'height:30px;width:150px;'}]}),c=d.dom,b=2;if(c.scrollLeft===50){b=1}else {c.scrollLeft=-1;if(c.scrollLeft){b=0}}d.destroy();a.prototype._rtlScrollFlag=b}function cacheRtlDocScrollFlag(){var i=document,c=i.documentElement,h=i.body,d=4,b=h.style,e=b.direction,k=Ext.getBody().createChild('<div style="height:20000px;width:20000px;"></div>'),j=k.dom,f,g;b.direction='ltr';f=j.getBoundingClientRect().right;b.direction='rtl';g=j.getBoundingClientRect().right;a.prototype._rtlBodyScrollbarOnRight=f===g;if(c.scrollLeft>0){d=1}else {c.scrollLeft=-1;if(c.scrollLeft){d=0}else {c.scrollLeft=1;if(c.scrollLeft){d=2}}}k.destroy();if(!e){b.direction='ltr';h.scrollWidth}b.direction=e;a.prototype._rtlDocScrollFlag=d}Ext.onInternalReady(function(){cacheRtlDocScrollFlag();cacheRtlScrollFlag()})});Ext.cmd.derive('Ext.GlobalEvents',Ext.mixin.Observable,{alternateClassName:'Ext.globalEvents',observableType:'global',singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on('resize',this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on('mousedown',this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent('mousedown',a)},fireResize:function(){var a=this,d=Ext.Element,c=d.getViewportWidth(),b=d.getViewportHeight();if(a.curHeight!==b||a.curWidth!==c){a.curHeight=b;a.curWidth=c;a.fireEvent('resize',c,b)}}},1,0,0,0,0,0,[Ext,'GlobalEvents',Ext,'globalEvents'],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}});Ext.define('Ext.overrides.GlobalEvents',{override:'Ext.GlobalEvents',deprecated:{5:{methods:{addListener:function(a,d,i,f,h,g,e){var c,b;if(a==='ready'){b=d}else {if(typeof a!=='string'){for(c in a){if(c==='ready'){b=a[c]}}}}if(b){Ext.onReady(b)}this.callParent([a,d,i,f,h,g,e])}}}}});Ext.USE_NATIVE_JSON=!1;Ext.JSON=new function(){var me=this,hasNative=window.JSON&&JSON.toString()==='[object JSON]',useHasOwn=!!{}.hasOwnProperty,pad=function(a){return a<10?'0'+a:a},doDecode=function(json){return eval('('+json+')')},doEncode=function(a,b){if(a===null||a===undefined){return 'null'}else {if(Ext.isDate(a)){return me.encodeDate(a)}else {if(Ext.isString(a)){if(Ext.isMSDate(a)){return me.encodeMSDate(a)}else {return me.encodeString(a)}}else {if(typeof a==='number'){return isFinite(a)?String(a):'null'}else {if(Ext.isBoolean(a)){return String(a)}else {if(a.toJSON){return a.toJSON()}else {if(Ext.isArray(a)){return encodeArray(a,b)}else {if(Ext.isObject(a)){return encodeObject(a,b)}else {if(typeof a==='function'){return 'null'}}}}}}}}}return 'undefined'},m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\','\v':'\\u000b'},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(a){return '"'+a.replace(charToReplace,function(b){var c=m[b];return typeof c==='string'?c:'\\u'+('0000'+b.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(a){return '"'+a+'"'},encodeArrayPretty=function(e,d){var f=e.length,c=d+'   ',g=','+c,a=['[',c],b;for(b=0;b<f;b+=1){a.push(me.encodeValue(e[b],c),g)}a[a.length-1]=d+']';return a.join('')},encodeObjectPretty=function(e,f){var d=f+'   ',g=','+d,b=['{',d],c,a;for(c in e){a=e[c];if(!useHasOwn||e.hasOwnProperty(c)){if(typeof a==='function'||a===undefined){continue}b.push(me.encodeValue(c)+': '+me.encodeValue(a,d),g)}}b[b.length-1]=f+'}';return b.join('')},encodeArray=function(c,d){if(d){return encodeArrayPretty(c,d)}var a=['[',''],e=c.length,b;for(b=0;b<e;b+=1){a.push(me.encodeValue(c[b]),',')}a[a.length-1]=']';return a.join('')},encodeObject=function(d,e){if(e){return encodeObjectPretty(d,e)}var b=['{',''],c,a;for(c in d){a=d[c];if(!useHasOwn||d.hasOwnProperty(c)){if(typeof a==='function'||a===undefined){continue}b.push(me.encodeValue(c),':',me.encodeValue(a),',')}}b[b.length-1]='}';return b.join('')};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(a){return '"'+a.getFullYear()+'-'+pad(a.getMonth()+1)+'-'+pad(a.getDate())+'T'+pad(a.getHours())+':'+pad(a.getMinutes())+':'+pad(a.getSeconds())+'"'};me.encode=function(a){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(a)}return me.encodeValue(a)};me.decode=function(a,b){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(a)}return doDecode(a)}catch(c){if(b){return null}Ext.raise({sourceClass:'Ext.JSON',sourceMethod:'decode',msg:"You're trying to decode an invalid JSON String: "+a})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode}();Ext.cmd.derive('Ext.mixin.Inheritable',Ext.Mixin,{mixinConfig:{id:'inheritable'},getInherited:function(i){var a=this,b=i&&a.inheritedStateInner||a.inheritedState,h=a.getRefOwner(),f=a.isContainer,d,e,g,c;if(!b||b.invalid){d=a.getRefOwner();c=a.ownerLayout;if(h){g=c?c===h.layout:!0}a.inheritedState=b=Ext.Object.chain(d?d.getInherited(g):Ext.rootInheritedState);if(f){a.inheritedStateInner=e=Ext.Object.chain(b)}a.initInheritedState(b,e);b=f&&i?a.inheritedStateInner:a.inheritedState}return b},getInheritedConfig:function(b,e){var a=this.inheritedState,d,c;if(!a||a.invalid){a=this.getInherited()}c=a[b];if(e&&a.hasOwnProperty(b)){d=c;delete a[b];c=a[b];a[b]=d}return c},resolveListenerScope:function(f,d){var a=this,e=typeof d==='boolean',b=Ext._namedScopes[f],c;if(!b){c=a.getInheritedConfig('defaultListenerScope',e?d:!0)||f||a}else {if(b.isController){c=a.getInheritedConfig('controller',e?d:!b.isSelf)}else {if(b.isSelf){c=a.getInheritedConfig('defaultListenerScope',e&&d)||a}else {if(b.isThis){c=a}}}}return c||null},resolveSatelliteListenerScope:function(e,d){var c=this,b=Ext._namedScopes[d],a;if(!b){a=c.getInheritedConfig('defaultListenerScope')||d||c}else {if(b.isController){a=c.getInheritedConfig('controller')}else {if(b.isSelf){a=c.getInheritedConfig('defaultListenerScope')||e}else {if(b.isThis){a=e}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig('referenceHolder',a!==!1)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=!0;delete this.inheritedState}},privates:{fixReference:function(){var b=this,a;if(b.getReference()){a=b.lookupReferenceHolder();if(a){a.attachReference(b)}}},onInheritedAdd:function(c,b){var a=this;if(a.inheritedState&&b){a.invalidateInheritedState()}if(a.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(c){var a=this,b;if(a.getReference()){b=a.lookupReferenceHolder();if(b){b.clearReference(a)}}if(a.inheritedState&&!c){a.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,'Inheritable'],function(){Ext.rootInheritedState={}});Ext.cmd.derive('Ext.mixin.Bindable',Ext.Base,{mixinId:'bindable',config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},reference:null,session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(b){var a=this,f=a.getReference(),c=a.getController(),d=a.getConfig('viewModel',!0),e=a.getConfig('session',!0),g=a.getDefaultListenerScope();if(c){b.controller=c}if(g){b.defaultListenerScope=a}else {if(c){b.defaultListenerScope=c}}if(d){if(!d.isViewModel){d=a}b.viewModel=d}if(e){if(!e.isSession){e=a}b.session=e}if(f){a.referenceKey=(b.referencePath||'')+f;a.viewModelKey=(b.viewModelPath||'')+f}},lookupController:function(a){return this.getInheritedConfig('controller',a)||null},lookupSession:function(b){var a=b?null:this.getSession();if(!a){a=this.getInheritedConfig('session',b);if(a&&!a.isSession){a=a.getInherited().session=a.getSession()}}return a||null},lookupViewModel:function(b){var a=b?null:this.getViewModel();if(!a){a=this.getInheritedConfig('viewModel',b);if(a&&!a.isViewModel){a=a.getInherited().viewModel=a.getViewModel()}}return a||null},publishState:function(b,a){var c=this,d=c.publishedState,i=c.getBind(),e=i&&b&&i[b],j=0,f,h,k,g;if(e&&!e.syncing&&!e.isReadOnly()){if(!(e.calls===0&&(a==null||a===c.getInitialConfig()[b]))){e.setValue(a)}}if(!(h=c.getPublishes())){return}if(!(k=c.lookupViewModel())){return}if(!(g=c.viewModelKey)){return}if(b&&d){if(!h[b]){return}if(!(a&&a.constructor===Object)&&!(a instanceof Array)){if(d[b]===a){return}}g+='.';g+=b}else {d=d||(c.publishedState={});for(f in h){++j;if(f===b){d[f]=a}else {d[f]=c[f]}}if(!j){return}a=d}k.set(g,a)},privates:{addBindableUpdater:function(d){var b=this,e=b.self.$config.configs,a=e[d],c;if(a&&!b.hasOwnProperty(c=a.names.update)){b[c]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(b,e){if(!b){return b}var d=this,i=d.lookupViewModel(),g=d.getTwoWayBindable(),h=d._getBindTemplateScope,a,c,f;if(!e||typeof e==='string'){e={}}if(Ext.isString(b)){a=b;b={};b[d.defaultBindProperty]=a}for(c in b){f=b[c];a=e[c];if(a&&typeof a!=='string'){a.destroy();a=null}if(f){a=i.bind(f,d.onBindNotify,d);a._config=Ext.Config.get(c);a.getTemplateScope=h}e[c]=a;if(g&&g[c]&&!a.isReadOnly()){d.addBindableUpdater(c)}}return e},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(a){if(!a){return null}if(!a.isSession){var b=this.lookupSession(!0),c=a===!0?{}:a;if(b){a=b.spawn(c)}else {a=new Ext.data['Session'](c)}}return a},applyViewModel:function(a){var c=this,b,d;if(!a){return null}if(!a.isViewModel){b={parent:c.lookupViewModel(!0)};b.session=c.getSession();if(!d&&!b.parent){b.session=c.lookupSession()}if(a){if(a.constructor===Object){Ext.apply(b,a)}else {if(typeof a==='string'){b.type=a}}}a=Ext.Factory.viewModel(b)}return a},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var a=this,c=a.getConfig('viewModel',!0),b=a.getConfig('session',!0),d=a.getController();if(c&&c.isViewModel){c.destroy();a.setViewModel(null)}if(b&&b.isSession){if(b.getAutoDestroy()){b.destroy()}a.setSession(null)}if(d){a.setController(null);d.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(d,f){var c=this,e=c.self.prototype[b];if(e){e.call(c,d,f)}c.publishState(a.name,d)}},isSyncing:function(d){var b=this.getBind(),c=!1,a;if(b){a=b[d];if(a){c=a.syncing>0}}return c},onBindNotify:function(b,c,a){a.syncing=a.syncing+1||1;this[a._config.names.set](b);--a.syncing},removeBindings:function(){var c=this,a,d,b;if(!c.destroying){a=c.getBind();if(a&&typeof a!=='string'){for(d in a){b=a[d];b.destroy();b._config=b.getTemplateScope=null}}}c.setBind(null)},updateSession:function(a){var b=this.getInherited();if(a){b.session=a}else {delete b.session}},updateViewModel:function(a){var c=this.getInherited(),b=this.getController();if(a){c.viewModel=a;a.setView(this);if(b){b.initViewModel(a)}}else {delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,'Bindable'],0);Ext.cmd.derive('Ext.mixin.ComponentDelegation',Ext.Mixin,{mixinConfig:{id:'componentDelegation'},privates:{addDelegatedListener:function(c,k,j,a,d,i,h){var b=this,e,g,f;d=d||a.order;if(d){f=a&&a.priority;if(!f){a=a?Ext.Object.chain(a):{};a.priority=b.$orderToPriority[d]}}e=b.$delegatedEvents||(b.$delegatedEvents={});g=e[c]||(e[c]=new Ext.util.Event(b,c));if(g.addListener(k,j,a,i,h)){b.$hasDelegatedListeners._incr_(c)}},clearDelegatedListeners:function(){var e=this,a=e.$delegatedEvents,b,c,d;if(a){for(b in a){c=a[b];d=c.listeners.length;c.clearListeners();e.$hasDelegatedListeners._decr_(b,d);delete a[b]}}},doFireDelegatedEvent:function(f,g){var e=this,d=!0,a,b,c;if(e.$hasDelegatedListeners[f]){a=e.getRefOwner();while(a){b=a.$delegatedEvents;if(b){c=b[f];if(c){d=c.fireDelegated(e,g);if(d===!1){break}}}a=a.getRefOwner()}}return d},removeDelegatedListener:function(c,f,e){var d=this,b=d.$delegatedEvents,a;if(b){a=b[c];if(a&&a.removeListener(f,e)){d.$hasDelegatedListeners._decr_(c);if(a.listeners.length===0){delete b[c]}}}}},onClassMixedIn:function(a){function HasListeners(){}a.prototype.HasListeners=a.HasListeners=HasListeners;HasListeners.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,'ComponentDelegation'],function(a){function HasDelegatedListeners(){}a.HasDelegatedListeners=HasDelegatedListeners;HasDelegatedListeners.prototype=a.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()});Ext.cmd.derive('Ext.Widget',Ext.Evented,{isWidget:!0,element:{reference:'element'},observableType:'component',cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(c){var a=this,b;a.initId(c);a.initElement();a.mixins.observable.constructor.call(a,c);Ext.ComponentManager.register(a);b=a.getController();if(b){b.init(a)}},afterCachedConfig:function(){var c=this,j=c.self.prototype,f=c.referenceList,i=c.renderElement,d,h,a,b,g,e;j.renderTemplate=d=document.createDocumentFragment();d.appendChild(i.clone(!0,!0));e=d.querySelectorAll('[id]');for(a=0,b=e.length;a<b;a++){h=e[a];h.removeAttribute('id')}for(a=0,b=f.length;a<b;a++){g=f[a];c[g].dom.removeAttribute('reference')}},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var a=this,d=a.referenceList,c,e,b;for(c=0,e=d.length;c<e;c++){b=d[c];if(a.hasOwnProperty(b)){a[b].destroy();a[b]=null}}a.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(a)},doFireEvent:function(c,d,e){var a=this,b=a.mixins.observable.doFireEvent.call(a,c,d,e);if(b!==!1){b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)}return b},getElementConfig:function(){var b=this,a=b.element;if(!('children' in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return {width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var a=this,j=a.self.prototype,k=a.getId(),m=a.referenceList=a.referenceList=[],i=!0,c,d,f,h,g,l,b,e;if(j.hasOwnProperty('renderTemplate')){c=a.renderTemplate.cloneNode(!0);d=c.firstChild}else {i=!1;c=document.createDocumentFragment();d=Ext.Element.create(a.processElementConfig.call(j),!0);c.appendChild(d)}h=c.querySelectorAll('[reference]');for(g=0,l=h.length;g<l;g++){b=h[g];e=b.getAttribute('reference');if(i){b.removeAttribute('reference')}if(e==='element'){b.id=k;f=a.el=a.addElementReference(e,b);f.dom.setAttribute('data-componentid',k)}else {a.addElementReferenceOnDemand(e,b)}m.push(e)}if(d===f.dom){a.renderElement=f}else {a.addElementReferenceOnDemand('renderElement',d)}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(a,b){return b?Ext.Array.indexOf(this.xtypes,a)!==-1:!!this.xtypesMap[a]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(b,a){this.element.toggleCls(b,a)},resolveListenerScope:function(a,b){return this.mixins.inheritable.resolveListenerScope.call(this,a,b)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}},applyStyle:function(a,b){if(b&&a===b&&Ext.isObject(b)){a=Ext.apply({},a)}return a},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return !1},privates:{addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else {Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:!0})}},addElementReference:function(f,g){var b=this,c=b[f]=Ext.get(g),a=b._elementListeners[f],e,d;c.skipGarbageCollection=!0;c.component=b;if(a){a=Ext.clone(a);for(e in a){d=a[e];if(typeof d==='object'){d.scope=b}}a.scope=b;c.on(a)}return c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=!0},doAddListener:function(e,f,d,a,c,i,h){var b=this,g;if(a&&'element' in a){b[a.element].doAddListener(e,f,d||b,a,c)}if(a){g=a.delegate;if(g){b.mixins.componentDelegation.addDelegatedListener.call(b,e,f,d,a,c,i,h);return}}Ext.Evented.prototype.doAddListener.call(this,e,f,d,a,c,i,h)},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c);a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},filterLengthValue:function(a){if(a==='auto'||!a&&a!==0){return null}return a},getFocusEl:function(){return this.element},initElementListeners:function(a){var c=this,k=c.self.superclass,d=k._elementListeners,h=a.reference,i=a.children,f,b,g,j,e;if(c.hasOwnProperty('_elementListeners')){f=c._elementListeners}else {f=c._elementListeners=d?Ext.Object.chain(d):{}}if(h){b=a.listeners;if(b){if(d){g=d[h];if(g){b=Ext.Object.chain(g);Ext.apply(b,a.listeners)}}f[h]=b;a.listeners=null}}if(i){for(e=0,j=i.length;e<j;e++){c.initElementListeners(i[e])}}},initId:function(d){var a=this,c=a.config,b=d&&d.id||c&&c.id;if(b){a.setId(b);a.id=b}else {a.getId()}},processElementConfig:function(){var a=this,c=a.self.superclass,b;if(a.hasOwnProperty('_elementConfig')){b=a._elementConfig}else {b=a._elementConfig=a.getElementConfig();if(c.isWidget){a.processElementConfig.call(c)}a.initElementListeners(b)}return b},reattachToBody:function(){this.isDetached=!1},updateUserCls:function(a,b){this.element.replaceCls(b,a)}}},1,['widget'],['widget'],{'widget':!0},['widget.widget'],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,'Widget'],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1});Ext.define('Ext.overrides.Widget',{override:'Ext.Widget',$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},cachedConfig:{baseCls:'x-widget'},constructor:function(c){var b=this,a;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,c);b.getComponentLayout();a=b.getRenderTo();if(a){b.render(a)}},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();if(a){a.updateLayout()}},destroy:function(){var b=this,a=b.ownerCt;if(a&&a.remove){a.remove(b,!1)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=!1;this.initBindable()},getAnimationProps:function(){return {}},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getEl:function(){return this.element},getTdCls:function(){return 'x-'+this.getTdType()+'-'+(this.ui||'default')+'-cell'},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,e,c){var a=this,d=a.inheritedState;a.ownerCt=b;a.onInheritedAdd(a,c)},onRemoved:function(b){var a=this;if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(c,e){var d=this,a=d.element,f=Ext.Component.prototype,b;if(!d.ownerCt||d.floating){if(Ext.scopeCss){a.addCls(f.rootCls)}a.addCls(f.borderBoxCls)}if(e){b=c.childNodes[e];if(b){Ext.fly(c).insertBefore(a,b);return}}Ext.fly(c).appendChild(a)},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return a?a===b||a.isLayoutChild(b):!1}},function(b){var a=b.prototype;if(Ext.isIE9m){a.addElementReferenceOnDemand=a.addElementReference}});Ext.cmd.derive('Ext.ProgressBase',Ext.Base,{mixinId:'progressbase',config:{value:0,textTpl:null},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyValue:function(a){return a||0}},0,0,0,0,0,0,[Ext,'ProgressBase'],0);Ext.cmd.derive('Ext.util.Format',Ext.Base,function(){var a;return {singleton:!0,defaultDateFormat:'m/d/Y',thousandSeparator:',',decimalSeparator:'.',currencyPrecision:2,currencySign:'$',percentSign:'%',currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(a){return a!==undefined?a:''},defaultValue:function(a,b){return a!==undefined&&a!==''?a:b},substr:'ab'.substr(-1)!='b'?function(d,a,c){var b=String(d);return a<0?b.substr(Math.max(b.length+a,0),c):b.substr(a,c)}:function(c,b,a){return String(c).substr(b,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(b){return a.currency(b,'$',2)},currency:function(b,f,c,h){var d='',e=',0',g=0;b=b-0;if(b<0){b=-b;d='-'}c=Ext.isDefined(c)?c:a.currencyPrecision;e+=c>0?'.':'';for(;g<c;g++){e+='0'}b=a.number(b,e);if((h||a.currencyAtEnd)===!0){return Ext.String.format('{0}{1}{2}',d,b,f||a.currencySign)}else {return Ext.String.format('{0}{1}{2}',d,f||a.currencySign,b)}},date:function(a,b){if(!a){return ''}if(!Ext.isDate(a)){a=new Date(Date.parse(a))}return Ext.Date.dateFormat(a,b||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(c,b){var a=parseInt(c||0,10).toString(16);if(b){if(b<0){b=-b;if(a.length>b){a=a.substring(a.length-b)}}while(a.length<b){a='0'+a}}return a},or:function(b,a){return b||a},pick:function(a,d,c){if(Ext.isNumber(a)){var b=arguments[a+1];if(b){return b}}return a?c:d},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,'')},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,'')},fileSize:function(){var a=1024,b=1048576,c=1073741824;return function(d){var e;if(d<a){if(d===1){e='1 byte'}else {e=d+' bytes'}}else {if(d<b){e=Math.round(d*10/a)/10+' KB'}else {if(d<c){e=Math.round(d*10/b)/10+' MB'}else {e=Math.round(d*10/c)/10+' GB'}}}return e}}(),math:function(){var a={};return function(c,b){if(!a[b]){a[b]=Ext.functionFactory('v','return v '+b+';')}return a[b](c)}}(),round:function(c,a){var b=Number(c);if(typeof a==='number'){a=Math.pow(10,a);b=Math.round(c*a)/a}else {if(a===undefined){b=Math.round(b)}}return b},number:function(k,c){if(!c){return k}if(isNaN(k)){return ''}var j=a.formatFns[c];if(!j){var n=c,o=a.thousandSeparator,g=a.decimalSeparator,d=0,l='',h,e,i,f,b,m;if(c.substr(c.length-2)==='/i'){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==g){a.I18NFormatCleanRe=new RegExp('[^\\d\\'+g+'#]','g');a.lastDecimalSeparator=g}c=c.substr(0,c.length-2);h=c.indexOf(o)!==-1;e=c.replace(a.I18NFormatCleanRe,'').split(g)}else {h=c.indexOf(',')!==-1;e=c.replace(a.formatCleanRe,'').split('.')}i=c.replace(a.formatPattern,'');if(e.length>2){}else {if(e.length===2){d=e[1].length;f=e[1].match(a.hashRe);if(f){m=f[0].length;l='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+m+'}$")'}}}b=['var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts'+(h?',thousandSeparator,thousands=[],j,n,i':'')+(i?',formatString="'+c+'",formatPattern=/[\\d,\\.#]+/':'')+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;','absVal=Math.abs(v);','fnum=Ext.Number.toFixed(absVal, '+d+');',l,';'];if(h){if(d){b[b.length]='parts=fnum.split(".");';b[b.length]='fnum=parts[0];'}b[b.length]='if(absVal>=1000) {';b[b.length]='thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}';if(d){b[b.length]='fnum += utilFormat.decimalSeparator+parts[1];'}}else {if(d){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}b[b.length]='if(neg&&fnum!=="'+(d?'0.'+Ext.String.repeat('0',d):'0')+'") { fnum="-"+fnum; }';if(f){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]='return ';if(i){b[b.length]='formatString.replace(formatPattern, fnum);'}else {b[b.length]='fnum;'}b[b.length]='};';j=a.formatFns[n]=Ext.functionFactory('Ext',b.join(''))(Ext)}return j(k)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||'0')+a.percentSign},attributes:function(a){if(typeof a==='object'){var c=[],b;for(b in a){if(a.hasOwnProperty(b)){c.push(b,'="',b==='style'?Ext.DomHelper.generateStyles(a[b],null,!0):Ext.htmlEncode(a[b]),'" ')}}a=c.join('')}return a||''},plural:function(c,b,a){return c+' '+(c===1?b:a?a:b+'s')},nl2br:function(b){return Ext.isEmpty(b)?'':b.replace(a.nl2brRe,'<br/>')},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(b){b=b||0;if(typeof b==='number'){return {top:b,right:b,bottom:b,left:b}}var a=b.split(' '),c=a.length;if(c===1){a[1]=a[2]=a[3]=a[0]}else {if(c===2){a[2]=a[0];a[3]=a[1]}else {if(c===3){a[3]=a[1]}}}return {top:parseInt(a[0],10)||0,right:parseInt(a[1],10)||0,bottom:parseInt(a[2],10)||0,left:parseInt(a[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,'Format'],0);Ext.cmd.derive('Ext.Template',Ext.Base,{inheritableStatics:{from:function(a,b){a=Ext.getDom(a);return new this(a.value||a.innerHTML,b||'')}},useEval:Ext.isGecko,constructor:function(g){var d=this,c=arguments,f=[],e,b=c.length,a;d.initialConfig={};if(b===1&&Ext.isArray(g)){c=g;b=c.length}if(b>1){for(e=0;e<b;e++){a=c[e];if(typeof a==='object'){Ext.apply(d.initialConfig,a);Ext.apply(d,a)}else {f.push(a)}}}else {f.push(g)}d.html=f.join('')},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(b){var a=this;if(a.compiled){if(!a.fn){a.compile()}return a.fn(b).join('')}return a.evaluate(b)},evaluate:function(a){var b=this,e=!b.disableFormats,c=Ext.util.Format,d=b;function fn(i,h,b,g,f){if(b==null||b===''){b=h}if(g&&e){if(f){f=[a[b]].concat(Ext.functionFactory('return ['+f+'];')())}else {f=[a[b]]}if(g.substr(0,5)==='this.'){return d[g.substr(5)].apply(d,f)}else {if(c[g]){return c[g].apply(c,f)}else {return i}}}else {return a[b]!==undefined?a[b]:''}}return b.html.replace(b.tokenRe,fn)},applyOut:function(c,b){var a=this;if(a.compiled){if(!a.fn){a.compile()}b.push.apply(b,a.fn(c))}else {b.push(a.apply(c))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(c,b){var a=this;a.html=c;a.compiled=!!b;a.fn=null;return a},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var a=this,b;b=a.html.replace(a.compileARe,'\\\\').replace(a.compileBRe,'\\n').replace(a.compileCRe,"\\'").replace(a.tokenRe,a.regexReplaceFn.bind(a));b=(this.disableFormats!==!0?'var fm=Ext.util.Format;':'')+(a.useEval?'$=':'return')+" function(v){return ['"+b+"'];};";a.fn=a.useEval?a.evalCompiled(b):(new Function('Ext',b))(Ext);a.compiled=!0;return a},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,b,e,a,c){if(b==null||b===''){b='"'+e+'"'}else {if(this.stringFormat){b=parseInt(b)+1}}if(a&&this.disableFormats!==!0){c=c?','+c:'';if(a.substr(0,5)==='this.'){a=a+'('}else {if(Ext.util.Format[a]){a='fm.'+a+'('}else {return d}}return "',"+a+'v['+b+']'+c+"),'"}else {return "',v["+b+"] == undefined ? '' : v["+b+"],'"}},insertFirst:function(c,b,a){return this.doInsert('afterBegin',c,b,a)},insertBefore:function(c,b,a){return this.doInsert('beforeBegin',c,b,a)},insertAfter:function(c,b,a){return this.doInsert('afterEnd',c,b,a)},append:function(c,b,a){return this.doInsert('beforeEnd',c,b,a)},doInsert:function(d,e,c,b){var a=Ext.DomHelper.insertHtml(d,Ext.getDom(e),this.apply(c));return b?Ext.get(a):a},overwrite:function(d,c,b){var a=Ext.DomHelper.overwrite(Ext.getDom(d),this.apply(c));return b?Ext.get(a):a}},1,0,0,0,0,0,[Ext,'Template'],function(d){var e=/\{\d+\}/,b=function(a){if(e.test(a)){a=new d(a,c);return function(){return a.apply(arguments)}}else {return function(){return a}}},c={useFormat:!1,compiled:!0,stringFormat:!0},a={};Ext.String.format=Ext.util.Format.format=function(c){var e=a[c]||(a[c]=b(c));return e.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}});Ext.cmd.derive('Ext.util.XTemplateParser',Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(g){var b=this,q=g.length,s={elseif:'elif'},p=b.topRe,r=b.actionsRe,j,e,d,c,h,n,l,m,i,f,a,k,o;b.level=0;b.stack=e=[];for(j=0;j<q;j=f){p.lastIndex=j;c=p.exec(g);if(!c){b.doText(g.substring(j,q));break}i=c.index;f=p.lastIndex;if(j<i){d=g.substring(j,i);if(!(o&&Ext.String.trim(d)==='')){b.doText(d)}}o=!1;if(c[1]){f=g.indexOf('%}',i+2);b.doEval(g.substring(i+2,f));f+=2}else {if(c[2]){f=g.indexOf(']}',i+2);b.doExpr(g.substring(i+2,f));f+=2}else {if(c[3]){b.doTag(c[3])}else {if(c[4]){a=null;while((m=r.exec(c[4]))!==null){d=m[2]||m[3];if(d){d=Ext.String.htmlDecode(d);h=m[1];h=s[h]||h;a=a||{};n=a[h];if(typeof n=='string'){a[h]=[n,d]}else {if(n){a[h].push(d)}else {a[h]=d}}}}if(!a){if(b.elseRe.test(c[4])){b.doElse()}else {if(b.defaultRe.test(c[4])){b.doDefault()}else {b.doTpl();e.push({type:'tpl'})}}}else {if(a['if']){b.doIf(a['if'],a);e.push({type:'if'})}else {if(a['switch']){b.doSwitch(a['switch'],a);e.push({type:'switch'});o=!0}else {if(a['case']){b.doCase(a['case'],a)}else {if(a['elif']){b.doElseIf(a['elif'],a)}else {if(a['for']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doFor(a['for'],a);e.push({type:'for',actions:a})}else {if(a['foreach']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doForEach(a['foreach'],a);e.push({type:'foreach',actions:a})}else {if(a.exec){b.doExec(a.exec,a);e.push({type:'exec',actions:a})}}}}}}}}}else {if(c[0].length===5){e.push({type:'tpl'})}else {l=e.pop();b.doEnd(l.type,l.actions);if(l.type=='for'||l.type=='foreach'){--b.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,'XTemplateParser'],0);Ext.cmd.derive('Ext.util.XTemplateCompiler',Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(c){var a=this,b=a.generate(c);return a.useEval?a.evalTpl(b):(new Function('Ext',b))(Ext)},generate:function(d){var a=this,b='var fm=Ext.util.Format,ts=Object.prototype.toString;',c;a.maxLevel=0;a.body=['var c0=values, a0='+a.createArrayTest(0)+', p0=parent, n0=xcount, i0=xindex, k0, v;\n'];if(a.definitions){if(typeof a.definitions==='string'){a.definitions=[a.definitions,b]}else {a.definitions.push(b)}}else {a.definitions=[b]}a.switches=[];a.parse(d);a.definitions.push((a.useEval?'$=':'return')+' function ('+a.fnArgs+') {',a.body.join(''),'}');c=a.definitions.join('\n');a.definitions.length=a.body.length=a.switches.length=0;delete a.definitions;delete a.body;delete a.switches;return c},doText:function(a){var b=this,c=b.body;a=a.replace(b.aposRe,"\\'").replace(b.newLineRe,'\\n');if(b.useIndex){c.push("out[out.length]='",a,"'\n")}else {c.push("out.push('",a,"')\n")}},doExpr:function(b){var a=this.body;a.push('if ((v='+b+') != null) out');if(this.useIndex){a.push("[out.length]=v+''\n")}else {a.push(".push(v+'')\n")}},doTag:function(b){var a=this.parseTag(b);if(a){this.doExpr(a)}else {this.doText('{'+b+'}')}},doElse:function(){this.body.push('} else {\n')},doEval:function(a){this.body.push(a,'\n')},doIf:function(b,c){var a=this;if(b==='.'){a.body.push('if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('if (',a.parseTag(b),') {\n')}else {a.body.push('if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==='.'){a.body.push('else if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('} else if (',a.parseTag(b),') {\n')}else {a.body.push('} else if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(b){var a=this,c;if(b==='.'||b==='#'){c=b==='.'?'values':'xindex';a.body.push('switch (',c,') {\n')}else {if(a.propNameRe.test(b)){a.body.push('switch (',a.parseTag(b),') {\n')}else {a.body.push('switch (',a.addFn(b),a.callFn,') {\n')}}a.switches.push(0)},doCase:function(e){var a=this,c=Ext.isArray(e)?e:[e],d=a.switches.length-1,f,b;if(a.switches[d]){a.body.push('break;\n')}else {a.switches[d]++}for(b=0,d=c.length;b<d;++b){f=a.intRe.exec(c[b]);c[b]=f?f[1]:"'"+c[b].replace(a.aposRe,"\\'")+"'"}a.body.push('case ',c.join(': case '),':\n')},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push('break;\n')}else {a.switches[b]++}a.body.push('default:\n')},doEnd:function(c,d){var a=this,b=a.level-1;if(c=='for'||c=='foreach'){if(d.exec){a.doExec(d.exec)}a.body.push('}\n');a.body.push('parent=p',b,';values=r',b+1,';xcount=n'+b+';xindex=i',b,'+1;xkey=k',b,';\n')}else {if(c=='if'||c=='switch'){a.body.push('}\n')}}},doFor:function(c,d){var b=this,f,a=b.level,e=a-1,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c=='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=0,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','if (c',a,'){if(a',a,'){n',a,'=c',a,'.length;}else if (c',a,'.isMixedCollection){c',a,'=c',a,'.items;n',a,'=c',a,'.length;}else if(c',a,'.isStore){c',a,'=c',a,'.data.items;n',a,'=c',a,'.length;}else{c',a,'=[c',a,'];n',a,'=1;}}\n','for (xcount=n',a,';i',a,'<n'+a+';++i',a,'){\n','values=c',a,'[i',a,']');if(d.propName){b.body.push('.',d.propName)}b.body.push('\n','xindex=i',a,'+1\n');if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},doForEach:function(c,d){var b=this,f,a=b.level,e=a-1,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c=='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=-1,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','for(k',a,' in c',a,'){\n','xindex=++i',a,'+1;\n','xkey=k',a,';\n','values=c',a,'[k',a,'];');if(d.propName){b.body.push('.',d.propName)}if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},createArrayTest:'isArray' in Array?function(a){return 'Array.isArray(c'+a+')'}:function(a){return 'ts.call(c'+a+')==="[object Array]"'},doExec:function(d,e){var a=this,c='f'+a.definitions.length,b=a.guards[a.strict?0:1];a.definitions.push('function '+c+'('+a.fnArgs+') {',b.doTry,' var $v = values; with($v) {','  '+d,' }',b.doCatch,'}');a.body.push(c+a.callFn+'\n')},guards:[{doTry:'',doCatch:''},{doTry:'try { ',doCatch:' } catch(e) {\n}'}],addFn:function(c){var a=this,b='f'+a.definitions.length,d=a.guards[a.strict?0:1];if(c==='.'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return values','}')}else {if(c==='..'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return parent','}')}else {a.definitions.push('function '+b+'('+a.fnArgs+') {',d.doTry,' var $v = values; with($v) {','  return('+c+')',' }',d.doCatch,'}')}}return b},parseTag:function(h){var e=this,f=e.tagRe.exec(h),a,c,d,g,b;if(!f){return null}a=f[1];c=f[2];d=f[3];g=f[4];if(a=='.'){if(!e.validTypes){e.definitions.push('var validTypes={string:1,number:1,boolean:1};');e.validTypes=!0}b='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else {if(a=='#'){b='xindex'}else {if(a=='$'){b='xkey'}else {if(a.substr(0,7)=='parent.'){b=a}else {if(isNaN(a)&&a.indexOf('-')==-1&&a.indexOf('.')!=-1){b='values.'+a}else {b="values['"+a+"']"}}}}}if(g){b='('+b+g+')'}if(c&&e.useFormat){d=d?','+d:'';if(c.substr(0,5)!='this.'){c='fm.'+c+'('}else {c+='('}}else {return b}return c+b+d+')'},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,'XTemplateCompiler'],function(){var a=this.prototype;a.fnArgs='out,values,parent,xindex,xcount,xkey';a.callFn='.call(this,'+a.fnArgs+')'});Ext.cmd.derive('Ext.XTemplate',Ext.Template,{isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(b,a,d,c){return this.applyOut(b,[],a,d,c).join('')},applyOut:function(g,d,f,c,b){var a=this,e;if(!a.fn){e=new Ext.util.XTemplateCompiler({useFormat:a.disableFormats!==!0,definitions:a.definitions,strict:a.strict});a.fn=e.compile(a.html)}c=c||1;b=b||1;if(a.strict){a.fn(d,g,f||a.emptyObj,c,b)}else {try{a.fn(d,g,f||a.emptyObj,c,b)}catch(h){}}return d},compile:function(){return this},statics:{getTpl:function(c,d){var b=c[d],a;if(b&&!b.isTemplate){b=Ext.ClassManager.dynInstantiate('Ext.XTemplate',b);if(c.hasOwnProperty(d)){a=c}else {for(a=c.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=b;b.owner=a}return b||null}}},0,0,0,0,0,0,[Ext,'XTemplate'],0);Ext.cmd.derive('Ext.app.EventDomain',Ext.Base,{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(l,h,m){h=Ext.canonicalEventName(h);var j=this,n=j.bus,b=n[h],c,a,i,g,e,k,d,f;if(!b){return !0}for(c in b){if(b.hasOwnProperty(c)&&j.match(l,c,j.controller)){a=b[c];for(i in a){if(a.hasOwnProperty(i)){g=a[i];if(g.controller.isActive()){e=g.list;k=e.length;for(d=0;d<k;d++){f=e[d];if(f.fire.apply(f,m)===!1){return !1}}}}}}}return !0},listen:function(p,e){var i=this,r=i.bus,t=i.idProperty,n=i.monitoredClasses,s=n.length,o=e.getId(),m=i.type==='component',u=m?e.getRefMap():null,j,f,q,a,d,b,h,l,g,c,k;for(a in p){g=p[a];if(m){a=u[a]||a}if(g){if(t){a=a==='*'?a:a.substring(1)}for(c in g){d=null;b=g[c];h=e;c=Ext.canonicalEventName(c);l=new Ext.util.Event(e,c);if(Ext.isObject(b)){d=b;b=d.fn;h=d.scope||e;delete d.fn;delete d.scope}if(typeof b==='string'){b=h[b]}l.addListener(b,h,d);for(j=0;j<s;++j){k=n[j].hasListeners;if(k){k._incr_(c)}}f=r[c]||(r[c]={});f=f[a]||(f[a]={});q=f[o]||(f[o]={controller:e,list:[]});q.list.push(l)}}}},match:function(c,b){var a=this.idProperty;if(a){return b==='*'||c[a]===b}return !1},monitor:function(a){var c=this,b=a.isInstance?a:a.prototype,d=b.doFireEvent;c.monitoredClasses.push(a);b.doFireEvent=function(e,f){var b=d.apply(this,arguments);if(b!==!1&&!this.isSuspended(e)){b=c.dispatch(this,e,f)}return b}},unlisten:function(f){var k=this.bus,l=f,m=this.monitoredClasses,p=m.length,g,a,b,o,j,n,h,c,d,i,e;if(f.isController){l=f.getId()}for(a in k){a=Ext.canonicalEventName(a);if(k.hasOwnProperty(a)&&(h=k[a])){for(n in h){g=h[n];i=g[l];if(i){b=i.list;if(b){for(c=0,o=b.length;c<o;++c){j=b[c];j.clearListeners();for(d=0;d<p;++d){e=m[d].hasListeners;if(e){e._decr_(j.name)}}}delete g[l]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,'EventDomain'],0);Ext.cmd.derive('Ext.app.domain.Component',Ext.app.EventDomain,{singleton:!0,type:'component',constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(d,f,e){var a=d.lookupController(!1),b,c;while(a){b=a.compDomain;if(b){if(b.dispatch(d,f,e)===!1){return !1}}c=a.getView();a=c?c.lookupController(!0):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,'Component'],0);Ext.cmd.derive('Ext.util.ProtoElement',Ext.Base,function(){var a=Ext.String.splitWords,b=Ext.Array.toMap;return {isProtoEl:!0,clsProp:'cls',styleProp:'style',removedProp:'removed',styleIsText:!1,constructor:function(f){var c=this,e,d;if(f){Ext.apply(c,f);e=c.cls;d=c.style;delete c.cls}c.classList=e?a(e):[];c.classMap=e?b(c.classList):{};if(d){if(typeof d==='string'){c.style=Ext.Element.parseStyles(d)}else {if(Ext.isFunction(d)){c.styleFn=d;delete c.style}else {c.style=Ext.apply({},d)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(d){if(!d){return this}var c=this,g=typeof d==='string'?a(d):d,i=g.length,j=c.classList,h=c.classMap,f=c.flushClassList,e=0,b;for(;e<i;++e){b=g[e];if(!h[b]){h[b]=!0;j.push(b);if(f){f.push(b);delete c.removedClasses[b]}}}return c},hasCls:function(a){return a in this.classMap},removeCls:function(l){var d=this,g=d.classList,i=d.classList=[],k=b(a(l)),j=g.length,h=d.classMap,f=d.removedClasses,e,c;for(e=0;e<j;++e){c=g[e];if(k[c]){if(f){if(h[c]){f[c]=!0;Ext.Array.remove(d.flushClassList,c)}}delete h[c]}else {i.push(c)}}return d},setStyle:function(a,d){var b=this,c=b.style||(b.style={});if(typeof a==='string'){if(arguments.length===1){b.setStyle(Ext.Element.parseStyles(a))}else {c[a]=d}}else {Ext.apply(c,a)}return b},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=!0}},writeTo:function(d){var a=this,e=a.flushClassList||a.classList,c=a.removedClasses,b;if(a.styleFn){b=Ext.apply({},a.styleFn());Ext.apply(b,a.style)}else {b=a.style}d[a.clsProp]=e.join(' ');if(b){d[a.styleProp]=a.styleIsText?Ext.DomHelper.generateStyles(b,null,!0):b}if(c){c=Ext.Object.getKeys(c);if(c.length){d[a.removedProp]=c.join(' ')}}if(a.unselectableAttr){d.unselectable='on'}return d}}},1,0,0,0,0,0,[Ext.util,'ProtoElement'],0);Ext.cmd.derive('Ext.dom.CompositeElement',Ext.dom.CompositeElementLite,{alternateClassName:'Ext.CompositeElement',isLite:!1,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,'CompositeElement',Ext,'CompositeElement'],0);Ext.cmd.derive('Ext.scroll.Scroller',Ext.Evented,{factoryConfig:{defaultType:'dom'},isScroller:!0,_spacerCls:'x-domscroller-spacer',config:{direction:undefined,directionLock:!1,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:!0,y:!0,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?'touch':'dom')}},constructor:function(b){var a=this;a.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,b);a.onDomScrollEnd=Ext.Function.createBuffered(a.onDomScrollEnd,100,a)},destroy:function(){var a=this;a.setX(Ext.emptyString);a.setY(Ext.emptyString);a.setElement(null);a.onDomScrollEnd=a._partners=a.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(a,c){var b=this,e=b._partners||(b._partners={}),d=a._partners||(a._partners={});e[a.getId()]={scroller:a,axis:c};d[b.getId()]={scroller:b,axis:c}},applyElement:function(b,e){var c=this,a,d;if(e){c.scrollListener.destroy()}if(b){if(b.isElement){a=b}else {a=Ext.get(b)}if(a.dom===document.body){a=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));d=Ext.get(Ext.isIE9m?window:document)}else {d=a}c.scrollListener=d.on({scroll:c.onDomScroll,scope:c,destroyable:!0});return a}},getClientSize:function(){var a=this.getElement().dom;return {x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var c=this,j=0,i=0,b,a,d,e,g,h,f;if(c.isDomScroller||Ext.supports.touchScroll===1){b=c.getElement();if(b&&!b.destroyed){d=c.getX();e=c.getY();a=b.dom;if(d||e){f=Ext.getScrollbarSize()}if(d==='scroll'){g=!0}else {if(d){g=a.scrollWidth>a.clientWidth}}if(e==='scroll'){h=!0}else {if(e){h=a.scrollHeight>a.clientHeight}}if(g){i=f.height}if(h){j=f.width}}}return {width:j,height:i}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent('refresh',this);return this},removePartner:function(c){var b=this._partners,a=c._partners;if(b){delete b[c.getId()]}if(a){delete a[this.getId()]}},scrollBy:function(a,b,c){var d=this.getPosition();if(a){if(a.length){c=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){c=b;b=a.y;a=a.x}}}a=typeof a==='number'?a+d.x:null;b=typeof b==='number'?b+d.y:null;return this.doScrollTo(a,b,c)},scrollIntoView:function(d,i,h,e){var a=this,c=a.getPosition(),b,f,g,j=a.getElement();if(d){b=Ext.fly(d).getScrollIntoViewXY(j,c.x,c.y);f=i===!1?c.x:b.x;g=b.y;if(e){a.on({scrollend:'doHighlight',scope:a,single:!0,args:[d,e]})}a.doScrollTo(f,g,h)}},isInView:function(d){var f=this,c={x:!1,y:!1},b,e=f.getElement(),a;if(d&&e.contains(d)){a=e.getRegion();b=Ext.fly(d).getRegion();c.x=b.right>a.left&&b.left<a.right;c.y=b.bottom>a.top&&b.top<a.bottom}return c},scrollTo:function(a,b,d){var c;if(a){if(a.length){d=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){d=b;b=a.y;a=a.x}}}if(a<0||b<0){c=this.getMaxPosition();if(a<0){a+=c.x}if(b<0){b+=c.y}}this.doScrollTo(a,b,d)},updateDirection:function(a){var d=this,b,c;if(!a){b=d.getX();c=d.getY();if(b&&c){a=c==='scroll'&&b==='scroll'?'both':'auto'}else {if(c){a='vertical'}else {if(b){a='horizontal'}}}d._direction=a}else {if(a==='auto'){b=!0;c=!0}else {if(a==='vertical'){b=!1;c=!0}else {if(a==='horizontal'){b=!0;c=!1}else {if(a==='both'){b='scroll';c='scroll'}}}}d.setX(b);d.setY(c)}},updateSize:function(a){var e=this,f=e.getElement(),d,b,c;if(f){d=e.getSpacer();if(a==null){d.hide()}else {if(typeof a==='number'){b=a;c=a}else {b=a.x||0;c=a.y||0}if(b>0){b-=1}if(c>0){c-=1}e.setSpacerXY({x:b,y:c});d.show()}}},deprecated:{5:{methods:{getScroller:function(){return this}}},'5.1.0':{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{getSpacer:function(){var b=this,a=b._spacer,c;if(!a){c=b.getElement();a=b._spacer=c.createChild({cls:b._spacerCls,role:'presentation'});a.setVisibilityMode(2);c.position()}return a},applySpacerXY:function(a,b){if(b&&a.x===b.x&&a.y===b.y){a=undefined}return a},updateSpacerXY:function(a){this.getSpacer().setLocalXY(a.x,a.y)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==!0){Ext.fly(b).highlight(a)}else {Ext.fly(b).highlight()}},fireScrollStart:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScrollStart',b,c);if(a.hasListeners.scrollstart){a.fireEvent('scrollstart',a,b,c)}if(d&&d.onScrollStart){d.onScrollStart(b,c)}Ext.GlobalEvents.fireEvent('scrollstart',a,b,c)},fireScroll:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScroll',b,c);if(a.hasListeners.scroll){a.fireEvent('scroll',a,b,c)}if(d&&d.onScrollMove){d.onScrollMove(b,c)}Ext.GlobalEvents.fireEvent('scroll',a,b,c)},fireScrollEnd:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScrollEnd',b,c);if(a.hasListeners.scrollend){a.fireEvent('scrollend',a,b,c)}if(d&&d.onScrollEnd){d.onScrollEnd(b,c)}Ext.GlobalEvents.fireEvent('scrollend',a,b,c)},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-x',a)}},initYStyle:function(){var b=this.getElement(),a=this.getY();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-y',a)}},invokePartners:function(d,g,h){var b=this,c=b._partners,a,e,f=d==='onPartnerScrollEnd';if(!b.suspendSync&!b.isReflecting){for(e in c){a=c[e].scroller;a.isReflecting=!0;a[d](b,g,h);if(f){a.isReflecting=!1}}}},clearReflecting:function(){this.isReflecting=!1},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var a=this,d=a.getElement(),b,c=a.position;if(d&&!d.destroyed){b=a.getElementScroll(d);c.x=b.left;c.y=b.top}a.positionDirty=!1;return c},getElementScroll:function(a){return a.getScroll()},onDomScroll:function(){var a=this,b,d,e,c;if(a.isTouchScroller&&Ext.supports.touchScroll===2){c=a.getElement().dom;c.scrollTop=c.scrollLeft=0;return}b=a.updateDomScrollPosition();d=b.x;e=b.y;if(!a.isScrolling){a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(d,e)}a.fireScroll(d,e);a.onDomScrollEnd()},onDomScrollEnd:function(){var a=this,b=a.getPosition(),c=b.x,d=b.y;a.isScrolling=Ext.isScrolling=!1;a.trackingScrollLeft=c;a.trackingScrollTop=d;a.fireScrollEnd(c,d)},onPartnerScroll:function(d,b,c){var a=d._partners[this.getId()].axis;if(a){if(a==='x'){c=null}else {if(a==='y'){b=null}}}this.doScrollTo(b,c,!1,!0)},restoreState:function(){var a=this,c=a.getElement(),b;if(c){b=c.dom;if(a.trackingScrollTop!==undefined){b.scrollTop=a.trackingScrollTop;b.scrollLeft=a.trackingScrollLeft}}}}},1,0,0,0,['scroller.scroller'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,'Scroller'],0);Ext.define('Ext.rtl.scroll.Scroller',{override:'Ext.scroll.Scroller',config:{rtl:null},updateRtl:Ext.emptyFn,privates:{updateSpacerXY:function(a){var b=this.getSpacer();if(this.getRtl()){b.rtlSetLocalXY(a.x,a.y)}else {b.setLocalXY(a.x,a.y)}}}});Ext.cmd.derive('Ext.fx.easing.Abstract',Ext.Base,{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,'Abstract'],0);Ext.cmd.derive('Ext.fx.easing.Momentum',Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-b/10);this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,'Momentum'],0);Ext.cmd.derive('Ext.fx.easing.Bounce',Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),a=b/this.getAcceleration(),c=a*Math.pow(Math.E,-this.getSpringTension()*a);return this.getStartValue()+this.getStartVelocity()*c}},0,0,0,0,0,0,[Ext.fx.easing,'Bounce'],0);Ext.cmd.derive('Ext.fx.easing.BoundMomentum',Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(b,a){return Ext.factory(b,Ext.fx.easing.Momentum,a)},applyBounce:function(b,a){return Ext.factory(b,Ext.fx.easing.Bounce,a)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=!1;this.isOutOfBound=!1;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var d=this.getMomentum(),j=this.getBounce(),f=d.getStartVelocity(),b=f>0?1:-1,i=this.getMinMomentumValue(),h=this.getMaxMomentumValue(),g=b==1?h:i,c=this.lastValue,a,e;if(f===0){return this.getStartValue()}if(!this.isOutOfBound){a=d.getValue();e=d.getVelocity();if(Math.abs(e)<this.getMinVelocity()){this.isEnded=!0}if(a>=i&&a<=h){return a}this.isOutOfBound=!0;j.setStartTime(Ext.Date.now()).setStartVelocity(e).setStartValue(g)}a=j.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(c!==null){if(b==1&&a<c||b==-1&&a>c){this.isBouncingBack=!0}}}else {if(Math.round(a)==g){this.isEnded=!0}}}this.lastValue=a;return a}},0,0,0,0,0,0,[Ext.fx.easing,'BoundMomentum'],0);Ext.cmd.derive('Ext.fx.easing.Linear',Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=!0;return this.getEndValue()}else {return this.getStartValue()+a/b*this.distance}}},0,0,0,0,['easing.linear'],0,[Ext.fx.easing,'Linear'],0);Ext.cmd.derive('Ext.fx.easing.EaseOut',Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration(),d=this.getStartValue(),f=this.getEndValue(),e=this.distance,i=a/b,h=1-i,g=1-Math.pow(h,this.getExponent()),c=d+g*e;if(a>=b){this.isEnded=!0;return f}return c}},0,0,0,0,['easing.ease-out'],0,[Ext.fx.easing,'EaseOut'],0);Ext.cmd.derive('Ext.util.translatable.Abstract',Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,'easing')},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,b,c){if(c){return this.translateAnimated(a,b,c)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=='number'){this.x=a}if(!isNaN(b)&&typeof b=='number'){this.y=b}this.doTranslate(a,b)},translateAxis:function(e,a,d){var b,c;if(e=='x'){b=a}else {c=a}return this.translate(b,c,d)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(a,b){this.activeEasingX=a;this.activeEasingY=b;this.isAnimating=!0;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent('animationstart',this,this.x,this.y);return this},translateAnimated:function(g,h,a){var b=this;if(!Ext.isObject(a)){a={}}if(b.isAnimating){b.stopAnimation()}b.callback=a.callback;b.callbackScope=a.scope;var f=Ext.Date.now(),e=a.easing,c=typeof g=='number'?a.easingX||e||b.getEasingX()||!0:null,d=typeof h=='number'?a.easingY||e||b.getEasingY()||!0:null;if(c){c=b.factoryEasing(c);c.setStartTime(f);c.setStartValue(b.x);c.setEndValue(g);if('duration' in a){c.setDuration(a.duration)}}if(d){d=b.factoryEasing(d);d.setStartTime(f);d.setStartValue(b.y);d.setEndValue(h);if('duration' in a){d.setDuration(a.duration)}}return b.animate(c,d)},doAnimationFrame:function(){var a=this,d=a.activeEasingX,e=a.activeEasingY,f=Date.now(),b,c;if(!a.isAnimating){return}a.lastRun=f;if(d===null&&e===null){a.stopAnimation();return}if(d!==null){a.x=b=Math.round(d.getValue());if(d.isEnded){a.activeEasingX=null;a.fireEvent('axisanimationend',a,'x',b)}}else {b=a.x}if(e!==null){a.y=c=Math.round(e.getValue());if(e.isEnded){a.activeEasingY=null;a.fireEvent('axisanimationend',a,'y',c)}}else {c=a.y}if(a.lastX!==b||a.lastY!==c){a.doTranslate(b,c);a.lastX=b;a.lastY=c}a.fireEvent('animationframe',a,b,c)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=!1;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent('animationend',a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,'Abstract'],0);Ext.cmd.derive('Ext.util.translatable.Dom',Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,'Dom'],0);Ext.cmd.derive('Ext.util.translatable.CssTransform',Ext.util.translatable.Dom,{doTranslate:function(b,c){var a=this.getElement();if(!this.destroyed&&!a.destroyed){a.translate(b,c)}},destroy:function(){var a=this.getElement();if(a&&!a.destroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'CssTransform'],0);Ext.cmd.derive('Ext.util.translatable.ScrollPosition',Ext.util.translatable.Dom,{type:'scrollposition',config:{useWrapper:!0},getWrapper:function(){var a=this.wrapper,c=this.getElement(),b;if(!a){b=c.getParent();if(!b){return null}if(b.hasCls('x-translatable-hboxfix')){b=b.getParent()}if(this.getUseWrapper()){a=c.wrap()}else {a=b}c.addCls('x-translatable');a.addCls('x-translatable-container');this.wrapper=a;a.on('painted',function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return a},doTranslate:function(c,d){var b=this.getWrapper(),a;if(b){a=b.dom;if(typeof c=='number'){a.scrollLeft=500000-c}if(typeof d=='number'){a.scrollTop=500000-d}}},destroy:function(){var a=this,c=a.getElement(),b=a.wrapper;if(b){if(!c.destroyed){if(a.getUseWrapper()){b.doReplaceWith(c)}c.removeCls('x-translatable')}if(!b.destroyed){b.removeCls('x-translatable-container');b.un('painted','refresh',a)}delete a.wrapper;delete a._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'ScrollPosition'],0);Ext.cmd.derive('Ext.util.translatable.ScrollParent',Ext.util.translatable.Dom,{isScrollParent:!0,applyElement:function(b){var a=Ext.get(b);if(a){this.parent=a.parent()}return a},doTranslate:function(b,c){var a=this.parent;a.setScrollLeft(Math.round(-b));a.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,'ScrollParent'],0);Ext.cmd.derive('Ext.util.translatable.CssPosition',Ext.util.translatable.Dom,{doTranslate:function(b,c){var a=this.getElement().dom.style;if(typeof b=='number'){a.left=b+'px'}if(typeof c=='number'){a.top=c+'px'}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'CssPosition'],0);Ext.cmd.derive('Ext.util.Translatable',Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case 'scrollposition':return new b.ScrollPosition(a);case 'scrollparent':return new b.ScrollParent(a);case 'csstransform':return new b.CssTransform(a);case 'cssposition':return new b.CssPosition(a);}}},1,0,0,0,0,0,[Ext.util,'Translatable'],0);Ext.cmd.derive('Ext.scroll.Indicator',Ext.Widget,{config:{axis:null,hideAnimation:!0,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:'l',getSize:'getHeight',setLength:'setWidth',translate:'translateX'},y:{side:'t',getSize:'getWidth',setLength:'setHeight',translate:'translateY'}},oppositeAxis:{x:'y',y:'x'},cls:'x-scroll-indicator',applyHideAnimation:function(a){if(a){a=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)}return a},constructor:function(c){var a=this,b;Ext.Widget.prototype.constructor.call(this,c);b=a.getAxis();a.names=a.names[b];a.element.addCls(a.cls+' '+a.cls+'-'+b)},hide:function(){var a=this,b=a.getHideDelay();if(b){a._hideTimer=Ext.defer(a.doHide,b,a)}else {a.doHide()}},setValue:function(c){var a=this,o=a.element,l=a.names,m=a.getAxis(),k=a.getScroller(),f=k.getMaxUserPosition()[m],g=k.getElementSize()[m],b=a.length,j=a.getMinLength(),e=b,i=g-b-a.sizeAdjust,h=Math.round,n=Math.max,d;if(c<0){e=h(n(b+b*c/g,j));d=0}else {if(c>f){e=h(n(b-b*(c-f)/g,j));d=i+b-e}else {d=h(c/f*i)}}a[l.translate](d);o[l.setLength](e)},show:function(){var a=this,b=a.element,c=b.getActiveAnimation();if(c){c.end()}if(!a._inDom){a.getScroller().getElement().appendChild(b);a._inDom=!0;if(!a.size){a.cacheStyles()}}a.refreshLength();clearTimeout(a._hideTimer);b.setStyle('opacity','')},privates:{cacheStyles:function(){var a=this,c=a.element,b=a.names;a.size=c[b.getSize]();a.margin=c.getMargin(b.side)},doHide:function(){var a=this.getHideAnimation(),b=this.element;if(a){b.animate(a)}else {b.setStyle('opacity',0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle('opacity','0')},refreshLength:function(){var a=this,i=a.names,g=a.getAxis(),e=a.getScroller(),h=e.getSize()[g],c=e.getElementSize()[g],j=c/h,b=a.margin*2,d=a.hasOpposite()?b+a.size:b,f=Math.max(Math.round((c-d)*j),a.getMinLength());a.sizeAdjust=d;a.length=f;a.element[i.setLength](f)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}},1,['scrollindicator'],['widget','scrollindicator'],{'widget':!0,'scrollindicator':!0},['widget.scrollindicator'],0,[Ext.scroll,'Indicator'],0);Ext.define('Ext.rtl.scroll.Indicator',{override:'Ext.scroll.Indicator',privates:{translateX:function(a){if(this.getScroller().getRtl()){a=-a}arguments.callee.$previous.call(this,a)}}});Ext.cmd.derive('Ext.scroll.TouchScroller',Ext.scroll.Scroller,{isTouchScroller:!0,config:{autoRefresh:!0,bounceEasing:{duration:400},elementSize:undefined,indicators:!0,fps:'auto',maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:'auto',useWrapper:!1}},cls:'x-scroll-container',scrollerCls:'x-scroll-scroller',dragStartTime:0,dragEndTime:0,isDragging:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:'onTouchStart',touchmove:'onTouchMove',dragstart:'onDragStart',drag:'onDrag',dragend:'onDragEnd'},refreshCounter:0,constructor:function(c){var a=this,b='onEvent';a.elementListeners={touchstart:b,touchmove:b,dragstart:b,drag:b,dragend:b,scope:a};a.minPosition={x:0,y:0};a.startPosition={x:0,y:0};a.velocity={x:0,y:0};a.isAxisEnabledFlags={x:!1,y:!1};a.flickStartPosition={x:0,y:0};a.flickStartTime={x:0,y:0};a.lastDragPosition={x:0,y:0};a.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,c);a.refreshAxes();a.scheduleRefresh={idle:a.doRefresh,scope:a,single:!0,destroyable:!0}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(b){var e=this.getElement(),a,c,d;if(!e){return null}a=e.dom;if(!a){return}if(b==null){c=a.clientWidth;d=a.clientHeight}else {c=b.x;d=b.y}return {x:c,y:d}},applyIndicators:function(b,a){var g=this,c,d,e,f;if(b){if(b===!0){c=d={}}else {e=b.x;f=b.y;if(e||f){c=e==null||e===!0?{}:e;d=e==null||f===!0?{}:f}else {c=d=b}}if(a){if(c){a.x.setConfig(c)}else {a.x.destroy();a.x=null}if(d){a.y.setConfig(d)}else {a.y.destroy();a.y=null}b=a}else {b={x:null,y:null};if(c){b.x=new Ext.scroll.Indicator(Ext.applyIf({axis:'x',scroller:g},c))}if(d){b.y=new Ext.scroll.Indicator(Ext.applyIf({axis:'y',scroller:g},d))}}}else {if(a){if(a.x){a.x.destroy()}if(a.y){a.y.destroy()}a.x=a.y=null}}return b},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){if(a&&!a.isElement){a=Ext.get(a)}return a},applyMaxPosition:function(a,c){if(c&&a.x===c.x&&a.y===c.y){return}var d=this.getTranslatable(),b;if(d.isAnimating){b=d.activeEasingY;if(b&&b.getStartVelocity&&b.getStartVelocity()<0&&a.y<c.y){b.setMinMomentumValue(-a.y)}}return a},applyMaxUserPosition:function(b,a){if(a&&b.x===a.x&&b.y===a.y){return}return b},applySize:function(a){var f=this.getElement(),e,d,b,c;if(typeof a==='number'){b=a;c=a}else {if(a){b=a.x;c=a.y}}if(f&&(b==null||c==null)){e=f.dom;d=this.getInnerElement().dom;if(b==null){b=Math.max(d.scrollWidth,e.clientWidth)}if(c==null){c=Math.max(d.scrollHeight,e.clientHeight)}}return {x:b,y:c}},applySlotSnapOffset:function(a){if(typeof a==='number'){a={x:a,y:a}}return a},applySlotSnapSize:function(a){if(typeof a==='number'){a={x:a,y:a}}return a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var a=this,c=a.getElement(),b=a.getInnerElement(),d=a.sizeMonitors;if(d){d.element.destroy();d.container.destroy()}if(c&&!c.destroyed){c.removeCls(a.cls)}if(b&&!b.destroyed){b.removeCls(a.scrollerCls)}if(a._isWrapped){if(!c.destroyed){a.unwrapContent()}b.destroy()}a.setElement(null);a.setInnerElement(null);a.setIndicators(null);Ext.destroy(a.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(c,b){var a=this;++a.refreshCounter;if(c){a.doRefresh(b)}else {if(!a.refreshScheduled){a.scheduleRefresh.args=[b];a.refreshScheduled=Ext.on(a.scheduleRefresh)}}},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(a){if(!this.isConfiguring){if(a){this.detachListeners()}else {this.attachListeners()}}},updateElement:function(d,f){var a=this,b=a.getInnerElement(),e,c;if(!b){b=d.dom.firstChild;if(!b||b.nodeType!==1||!Ext.fly(b).hasCls(a.scrollerCls)){b=a.wrapContent(d)}a.setInnerElement(b)}d.addCls(a.cls);if(a.isConfiguring){if(!a.getTranslatable().isScrollParent){d.dom.style.overflowX=d.dom.style.overflowY='';e=a.elementListeners;e.mousewheel='onMouseWheel';e.scroll={fn:'onElementScroll',delegated:!1,scope:a}}}if(!a.getDisabled()){a.attachListeners()}if(!a.isConfiguring){c=a.getAutoRefresh();if(c!==!1){a.toggleResizeListeners(c);if(c){a.refresh()}else {if(c===null){a.setElementSize(null)}}}}},updateFps:function(a){if(a!=='auto'){this.getTranslatable().setFps(a)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){if(a){a.addCls(this.scrollerCls)}this.getTranslatable().setElement(a)},updateSize:function(a){if(!this.isConfiguring){if(Ext.supports.touchScroll===1){Ext.scroll.Scroller.prototype.updateSize.call(this,a)}this.refreshAxes()}},updateTranslatable:function(a){a.setElement(this.getInnerElement());if(!a.isScrollParent){a.on({animationframe:'onAnimationFrame',animationend:'onAnimationEnd',scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(b){var a=this,d,c;if(a.refreshScheduled){a.refreshScheduled=a.refreshScheduled.destroy()}if(a.refreshCounter&&a.getElement()){a.stopAnimation();a.getTranslatable().refresh();if(b){d=b.size;c=b.elementSize}a.setSize(d);a.setElementSize(c);a.fireEvent('refresh',a);a.refreshCounter=0}},doScrollTo:function(b,c,e,f){var a=this,m=a.isDragging,j=a.getTranslatable().isScrollParent,k=!a.isReflecting&&!j;if(a.destroyed||!a.getElement()){return a}f=f||a.isDragging;var l=a.getTranslatable(),d=a.position,g=!1,h,i;if(!m||a.isAxisEnabled('x')){if(isNaN(b)||typeof b!=='number'){b=d.x}else {if(!f){b=a.constrainX(b)}if(d.x!==b){d.x=b;g=!0}}h=a.convertX(-b)}if(!m||a.isAxisEnabled('y')){if(isNaN(c)||typeof c!=='number'){c=d.y}else {if(!f){c=a.constrainY(c)}if(d.y!==c){d.y=c;g=!0}}i=-c}if(g){if(k){a.onScrollStart()}if(e){l.translateAnimated(h,i,e)}else {if(!j){a.onScroll()}l.translate(h,i);if(k){a.onScrollEnd()}}}else {if(e&&e.callback){e.callback()}}return a},getAnimationEasing:function(b,m){if(!this.isAxisEnabled(b)){return null}var a=this,c=a.position[b],k=a.getMinUserPosition()[b],i=a.getMaxUserPosition()[b],g=a.getMaxAbsoluteVelocity(),d=null,j=a.dragEndTime,e=m.flick.velocity[b],l=b==='x',h,f;if(c<k){d=k}else {if(c>i){d=i}}if(l){c=a.convertX(c);d=a.convertX(d)}if(d!==null){f=a.getBounceEasing()[b];f.setConfig({startTime:j,startValue:-c,endValue:-d});return f}if(e===0){return null}if(e<-g){e=-g}else {if(e>g){e=g}}f=a.getMomentumEasing()[b];h={startTime:j,startValue:-c,startVelocity:e*1.5,minMomentumValue:-i,maxMomentumValue:0};if(l){a.convertEasingConfig(h)}f.setConfig(h);return f},getSnapPosition:function(d){var e=this,c=e.getSlotSnapSize()[d],f=null,b,h,g,a;if(c!==0&&e.isAxisEnabled(d)){b=e.position[d];h=e.getSlotSnapOffset()[d];g=e.getMaxUserPosition()[d];a=Math.floor((b-h)%c);if(a!==0){if(b!==g){if(Math.abs(a)>c/2){f=Math.min(g,b+(a>0?c-a:a-c))}else {f=b-a}}else {f=b-a}}}return f},hideIndicators:function(){var d=this,a=d.getIndicators(),b,c;if(a){if(d.isAxisEnabled('x')){b=a.x;if(b){b.hide()}}if(d.isAxisEnabled('y')){c=a.y;if(c){c.hide()}}}},isAxisEnabled:function(a){this.getX();this.getY();return this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(d,b,c){var a=this.position;a.x=this.convertX(-b);a.y=-c;this.onScroll()},onAxisDrag:function(a,k){if(k&&this.isAxisEnabled(a)){var b=this,o=b.flickStartPosition,g=b.flickStartTime,f=b.lastDragPosition,d=b.dragDirection,r=b.position[a],q=b.getMinUserPosition()[a],e=b.getMaxUserPosition()[a],p=b.startPosition[a],l=f[a],c=p-k,i=d[a],h=b.getOutOfBoundRestrictFactor(),n=b.getStartMomentumResetTime(),m=Ext.Date.now(),j;if(c<q){c*=h}else {if(c>e){j=c-e;c=e+j*h}}if(c>l){d[a]=1}else {if(c<l){d[a]=-1}}if(i!==0&&d[a]!==i||m-g[a]>n){o[a]=r;g[a]=m}f[a]=c;return !0}},onDomScroll:function(){var c=this,b,a;if(c.getTranslatable().isScrollParent){b=c.getElement().dom;a=c.position;a.x=b.scrollLeft;a.y=b.scrollTop}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(c){var a=this,b=a.lastDragPosition;if(!a.isDragging){return}if(a.onAxisDrag('x',a.convertX(c.deltaX))|a.onAxisDrag('y',c.deltaY)){a.doScrollTo(b.x,b.y)}},onDragEnd:function(d){var a=this,b,c;if(!a.isDragging){return}a.dragEndTime=Ext.Date.now();a.onDrag(d);a.isDragging=!1;b=a.getAnimationEasing('x',d);c=a.getAnimationEasing('y',d);if(b||c){a.getTranslatable().animate(b,c)}else {a.onScrollEnd()}},onDragStart:function(d){var a=this,b=a.getDirection(),m=d.absDeltaX,n=d.absDeltaY,o=a.getDirectionLock(),l=a.startPosition,g=a.flickStartPosition,j=a.flickStartTime,h=a.lastDragPosition,i=a.position,k=a.dragDirection,e=i.x,f=i.y,c=Ext.Date.now();if(o&&b!=='both'){if(b==='horizontal'&&m>n||b==='vertical'&&n>m){d.stopPropagation()}else {return}}h.x=e;h.y=f;g.x=e;g.y=f;l.x=e;l.y=f;j.x=c;j.y=c;k.x=0;k.y=0;a.dragStartTime=c;a.isDragging=!0;if(!a.isScrolling){a.onScrollStart()}},onElementResize:function(b,a){this.refresh(!0,{elementSize:{x:a.contentWidth,y:a.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(b,a){a.scrollTop=a.scrollLeft=0},onEvent:function(b){var a=this,c=b.browserEvent;if((!a.self.isTouching||a.isTouching)&&(!a.getTranslatable().isScrollParent||!a.isMouseEvent[c.type]&&c.pointerType!=='mouse')&&(a.getY()||a.getX())){a[a.listenerMap[b.type]](b)}},onInnerElementResize:function(b,a){this.refresh(!0,{size:{x:a.width,y:a.height}})},onMouseWheel:function(j){var a=this,g=j.getWheelDeltas(),c=-g.x,d=-g.y,b=a.position,e=a.getMaxUserPosition(),f=a.getMinUserPosition(),h=Math.max,i=Math.min,k=h(i(b.x+c,e.x),f.x),l=h(i(b.y+d,e.y),f.y);c=k-b.x;d=l-b.y;if(!c&&!d){return}j.stopEvent();a.onScrollStart();a.scrollBy(c,d);a.onScroll();a.onScrollEnd()},onPartnerScrollEnd:function(b,c){var a=this;if(!a.getTranslatable().isScrollParent){a.fireScrollEnd(b,c)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,b,c);a.isScrolling=!1;a.hideIndicators()},onPartnerScrollStart:function(b,c){var a=this;a.isScrolling=!0;if(!a.getTranslatable().isScrollParent){a.fireScrollStart(b,c)}a.showIndicators()},onScroll:function(){var a=this,e=a.position,f=e.x,g=e.y,b=a.getIndicators(),c,d;if(b){if(a.isAxisEnabled('x')){c=b.x;if(c){c.setValue(f)}}if(a.isAxisEnabled('y')){d=b.y;if(d){d.setValue(g)}}}a.fireScroll(f,g)},onScrollEnd:function(){var a=this,b=a.position;if(a.isScrolling&&!a.isTouching&&!a.snapToSlot()){a.hideIndicators();a.isScrolling=Ext.isScrolling=!1;a.fireScrollEnd(b.x,b.y)}},onScrollStart:function(){var a=this,b=a.position;if(!a.isScrolling){a.showIndicators();a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(b.x,b.y)}},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=!1;if(!a.isDragging&&a.snapToSlot()){a.onScrollStart()}},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(){var a=this;a.isTouching=a.self.isTouching=!0;Ext.getDoc().on({touchend:'onTouchEnd',scope:a,single:!0});a.stopAnimation()},refreshAxes:function(){var a=this,b=a.isAxisEnabledFlags,k=a.getSize(),h=a.getElementSize(),e=a.getIndicators(),f,g,c,d,i,j;if(!k||!h){return}f=Math.max(0,k.x-h.x);g=Math.max(0,k.y-h.y);c=a.getX();d=a.getY();a.setMaxPosition({x:f,y:g});if(c===!0||c==='auto'){b.x=!!f}else {if(c===!1){b.x=!1;i=e&&e.x;if(i){i.hide()}}else {if(c==='scroll'){b.x=!0}}}if(d===!0||d==='auto'){b.y=!!g}else {if(d===!1){b.y=!1;j=e&&e.y;if(j){j.hide()}}else {if(d==='scroll'){b.y=!0}}}a.setMaxUserPosition({x:b.x?f:0,y:b.y?g:0});if(Ext.supports.touchScroll===1){a.initXStyle();a.initYStyle()}},showIndicators:function(){var d=this,a=d.getIndicators(),b,c;if(a){if(d.isAxisEnabled('x')){b=a.x;if(b){b.show()}}if(d.isAxisEnabled('y')){c=a.y;if(c){c.show()}}}},snapToBoundary:function(){var a=this,d=a.getPosition();if(a.isConfiguring||!(d.x||d.y)){return}var f=a.getMinUserPosition(),e=a.getMaxUserPosition(),i=f.x,j=f.y,g=e.x,h=e.y,b=Math.round(d.x),c=Math.round(d.y);if(b<i){b=i}else {if(b>g){b=g}}if(c<j){c=j}else {if(c>h){c=h}}a.doScrollTo(b,c)},snapToSlot:function(){var a=this,c=a.getSnapPosition('x'),d=a.getSnapPosition('y'),b=a.getSlotSnapEasing();if(c!==null||d!==null){a.doScrollTo(c,d,{easingX:b.x,easingY:b.y});return !0}return !1},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(e){var c=this,f=c.getElement(),b,a,d;if(f){d=c.getInnerElement();if(e){b=a='on'}else {if(e===null){b='on';a='un'}else {b=a='un'}}f[b]('resize','onElementResize',c);d[a]('resize','onInnerElementResize',c)}},unwrapContent:function(){var a=this.getInnerElement().dom,c=this.getElement().dom,b;while(b=a.firstChild){c.insertBefore(b,a)}},wrapContent:function(d){var a=document.createElement('div'),c=d.dom,b;while(b=c.lastChild){a.insertBefore(b,a.firstChild)}c.appendChild(a);this.setInnerElement(a);this._isWrapped=!0;return this.getInnerElement()}}},1,0,0,0,['scroller.touch'],0,[Ext.scroll,'TouchScroller'],0);Ext.define('Ext.rtl.scroll.TouchScroller',{override:'Ext.scroll.TouchScroller',_rtlCls:'x-rtl',updateRtl:function(e){var a,b,c,d;if(e){a=this.getIndicators();if(a){d=this._rtlCls;b=a.x;c=a.y;if(b){b.element.addCls(d)}if(c){c.element.addCls(d)}}}},privates:{convertX:function(a){if(a&&this.getRtl()){a=-a}return a},convertEasingConfig:function(a){var c=a.minMomentumValue,b=a.maxMomentumValue;if(this.getRtl()){a.minMomentumValue=b;a.maxMomentumValue=-c}}}});Ext.cmd.derive('Ext.scroll.DomScroller',Ext.scroll.Scroller,{isDomScroller:!0,getMaxPosition:function(){var b=this.getElement(),c=0,d=0,a;if(b&&!b.destroyed){a=b.dom;c=a.scrollWidth-a.clientWidth;d=a.scrollHeight-a.clientHeight}return {x:c,y:d}},getMaxUserPosition:function(){var c=this,b=c.getElement(),d=0,e=0,a;if(b&&!b.destroyed){a=b.dom;if(c.getX()){d=a.scrollWidth-a.clientWidth}if(c.getY()){e=a.scrollHeight-a.clientHeight}}return {x:d,y:e}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var a=this.getElement(),b,c;if(a&&!a.destroyed){c=a.dom;b={x:c.scrollWidth,y:c.scrollHeight}}else {b={x:0,y:0}}return b},updateElement:function(b,a){this.initXStyle();this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(a,b,j){var e=this,d=e.getElement(),f,c,i,g,h,k;if(d&&!d.destroyed){c=d.dom;g=a===Infinity;h=b===Infinity;if(g||h){f=e.getMaxPosition();if(g){a=f.x}if(h){b=f.y}}a=e.convertX(a);if(j){i={};if(b!=null){i.scrollTop=b}if(a!=null){i.scrollLeft=a}d.animate(Ext.mergeIf({to:{scrollTop:b,scrollLeft:a}},j))}else {if(b!=null){c.scrollTop=b}if(a!=null){c.scrollLeft=a;if(Ext.isIE8){k=c.scrollLeft;c.scrollLeft=a}}}e.positionDirty=!0}},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();if(a){a.end()}}}},0,0,0,0,['scroller.dom'],0,[Ext.scroll,'DomScroller'],function(a){Ext.onDocumentReady(function(){a.document=new a({x:!0,y:!0,element:document.body})})});Ext.define('Ext.rtl.scroll.DomScroller',{override:'Ext.scroll.DomScroller',privates:{convertX:function(b){var a;if(this.getRtl()){a=this.getElement();if(a){b=a.rtlNormalizeScrollLeft(b)}}return b},getElementScroll:function(a){return this.getRtl()?a.rtlGetScroll():a.getScroll()}}});Ext.cmd.derive('Ext.util.Floating',Ext.Base,{mixinId:'floating',focusOnToFront:!0,shadow:'sides',animateShadow:!1,constrain:!1,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var a=this,e=a.el,d=a.shadow,c,b;if(d){b={mode:d===!0?'sides':d};c=a.shadowOffset;if(c){b.offset=c}b.animate=a.animateShadow;b.fixed=a.fixed;e.enableShadow(b,!1)}if(a.shim||Ext.useShims){e.enableShim({fixed:a.fixed},!1)}e.setVisibilityMode(a._visModeMap[a.hideMode]);a.el.on({mousedown:a.onMouseDown,scope:a,capture:!0});a.registerWithOwnerCt();a.initHierarchyEvents()},alignTo:function(b,d,f,e){var a=this,c;Ext.un('scroll',a.onAlignToScroll,a);if(b.isComponent){c=b.el}else {if(b.nodeType){c=Ext.fly(b)}else {c=b}}if(!c.contains(a.el)){Ext.on('scroll',a.onAlignToScroll,a)}a._lastAlignTarget=b;a._lastAlignToPos=d;a.mixins.positionable.alignTo.call(a,c,d,f,e)},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=!0}},registerWithOwnerCt:function(){var a=this,c=a.ownerCt,b=a.zIndexParent;if(b){b.unregisterFloatingItem(a)}b=a.zIndexParent=a.up('[floating]');a.floatParent=c||b;a.initFloatConstrain();delete a.ownerCt;if(b){b.registerFloatingItem(a)}else {Ext.WindowManager.register(a)}},onMouseDown:function(g){var b=this,f=b.focusTask,c=g.pointerType==='touch',a,d,e;if(b.floating&&(!f||!f.id)){a=g.target;d=b.el.dom;while(!c&&a&&a!==d){if(Ext.fly(a).isFocusable()){c=!0}a=a.parentNode}e=Ext.WindowManager.getActive()===b&&(a===d||c);if(!e){b.toFront(c)}}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var a=this.el;if(a.shadow||a.shim){a.setUnderlaysVisible(!0);a.syncUnderlays()}},syncHidden:function(){var a=this,d=a.hidden||!a.rendered,c=a.hierarchicallyHidden=a.isHierarchicallyHidden(),b=a.pendingShow;if(d!==c){if(c){a.hide();a.pendingShow=!0}else {if(b){delete a.pendingShow;if(b.length){a.show.apply(a,b)}else {a.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(c){var a=this,b=a.calculateConstrainedPosition(c,null,!0);if(b){a.setPosition(b)}},updateActiveCounter:function(b){var a=this.zIndexParent;if(a&&this.bringParentToFront!==!1){a.setActiveCounter(++Ext.ZIndexManager.activeCounter)}a=this.zIndexManager;if(a){a.onComponentUpdate(this)}},updateAlwaysOnTop:function(b){var a=this.zIndexManager;if(a){a.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent('tofront',a,a.el.getZIndex())}}return a},setActive:function(d,c){var a=this,b;if(d){if(a.el.shadow&&!a.maximized){a.el.enableShadow(null,!0)}if(c){b=Ext.ComponentManager.getActiveComponent();if(!b||!b.up(a)){a.focus()}}a.fireEvent('activate',a)}else {a.fireEvent('deactivate',a)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,'c-c');a.setPagePosition(b)}else {a.needsCenter=!0}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(f){var d=this,c=d.floatParent,a=c?c.getTargetEl():d.container,b=a.getViewSize(),e=c||a.dom!==document.body?[0,0]:a.getXY();b.x=e[0];b.y=e[1];d.setBox(b,f)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var a=this;if(a._lastAlignTarget){Ext.un('scroll',a.onAlignToScroll,a);a._lastAlignPos=a._lastAlignTarget=null}},onAlignToScroll:function(e){var b=this,a=b._lastAlignTarget,f=a.isFloating,c,d;if(a){if(a.isComponent){c=a.destroyed;a=a.el}else {if(a.nodeType){a=Ext.fly(a)}d=a.dom;c=!d||Ext.isGarbage(d)}if(c){b.clearAlignEl()}else {if((e.getElement().contains(a)||f)&&!e.getElement().contains(b.el)){b.alignTo(a,b._lastAlignToPos)}}}}}},1,0,0,0,0,0,[Ext.util,'Floating'],0);Ext.cmd.derive('Ext.util.ElementContainer',Ext.Base,{mixinId:'elementCt',config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(d,f,g,e){var c=f?Ext.Object.chain(f):{},b,a;if(d instanceof Array){for(b=d.length;b--;){a=d[b];if(!e||!(a in c)){if(typeof a==='string'){c[a]={name:a,itemId:a}}else {c[a.name]=a}}}}else {if(d){if(d.constructor===Object){for(b in d){if(!e||!(b in c)){a=d[b];if(a===!0){c[b]={itemId:b}}else {if(typeof a==='string'){c[b]={itemId:a}}else {c[b]=a;if(!('itemId' in a)){a.itemId=b}}}c[b].name=b}}}else {if(!e||!(d in c)){c[d]={name:d,itemId:d}}}}}return c}}},destroy:function(){var c=this,d=c.getChildEls(),a,b;for(b in d){a=c[b];if(a){if(a.destroy){a.component=null;a.destroy()}c[b]=null}}},privates:{addChildEl:function(a){var c=this,b=c.getChildEls();if(!c.hasOwnProperty('childEls')){c.childEls=b=Ext.Object.chain(b)}if(typeof a==='string'){a={name:a,itemId:a}}b[a.name]=a},afterClassMixedIn:function(a){var c=a.prototype,b=c.childEls;if(b){delete c.childEls;a.getConfigurator().add({childEls:b})}},attachChildEls:function(h,n){var i=this,k=i.getChildEls(),e=n||i,m=e.id+'-',l=!e.frame,f,g,b,j,c,a,d;for(f in k){b=k[f];if(l&&b.frame){continue}c=b.select;if(c){a=h.select(c,!0)}else {if(!(c=b.selectNode)){if(!(d=b.id)){d=m+b.itemId;a=Ext.cache[d]}else {a=Ext.cache[d]||h.getById(d)}}else {a=h.selectNode(c,!1)}}if(a){if(a.isElement){a.component=e}else {if(a.isComposite&&!a.isLite){g=a.elements;for(j=g.length;j--;){g[j].component=e}}}}i[f]=a||null}}}},0,0,0,0,0,0,[Ext.util,'ElementContainer'],0);Ext.cmd.derive('Ext.util.Renderable',Ext.Base,{mixinId:'renderable',frameCls:'x-frame',frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:['TL','TC','TR','ML','MC','MR','BL','BC','BR','Table'],frameTpl:['{%this.renderDockedItems(out,values,0);%}','<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','</tpl>','<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">','{%this.applyRenderTpl(out, values)%}','</div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','</tpl>','{%this.renderDockedItems(out,values,1);%}'],frameTableTpl:['{%this.renderDockedItems(out,values,0);%}','<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">','{%this.applyRenderTpl(out, values)%}','</td>','<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','</table>','{%this.renderDockedItems(out,values,1);%}'],_renderState:0,ariaEl:'el',_layerCls:'x-layer',_fixedLayerCls:'x-fixed-layer',ariaStaticRoles:{presentation:!0,article:!0,definition:!0,directory:!0,document:!0,img:!0,heading:!0,math:!0,note:!0,banner:!0,complementary:!0,contentinfo:!0,navigation:!0,search:!0,'undefined':!0,'null':!0},statics:{makeRenderSetter:function(c,b){var a=c.name;return function(g){var d=this,f=d.renderConfigs||(d.renderConfigs={}),e=f[b];if(d._renderState>=b){(c.setter||c.getSetter()).call(d,g)}else {if(!e){f[b]=e={}}if(!(a in e)){e[a]=d[a]}d[a]=g}return d}},processRenderConfig:function(g,e,c){var h=this.prototype,j=this.getConfigurator(),k=Ext.util.Renderable,l=k.makeRenderSetter,d=g[e],b,a,i,f;for(i in d){a=Ext.Config.get(i);if(!h[f=a.names.set]){b=a.renderSetter||(a.renderSetter={});h[f]=b[c]||(b[c]=l(a,c))}}delete g[e];j.add(d)}},onClassMixedIn:function(a){var e=a.override,c=this.processRenderConfig,d=function(b){if(b.beforeRenderConfig){this.processRenderConfig(b,'beforeRenderConfig',1)}if(b.renderConfig){this.processRenderConfig(b,'renderConfig',3)}e.call(this,b)},b=function(e,b){e.override=d;e.processRenderConfig=c;if(b.beforeRenderConfig){e.processRenderConfig(b,'beforeRenderConfig',1)}if(b.renderConfig){e.processRenderConfig(b,'renderConfig',3)}};b(a,a.prototype);a.onExtended(b)},afterRender:function(){var a=this,c={},i=a.protoEl,g=a.el,d,b,h,f,e;a.finishRenderChildren();a._renderState=4;if(a.contentEl){h='x-';f=h+'hidden-';e=a.contentEl=Ext.get(a.contentEl);e.component=a;e.removeCls([h+'hidden',f+'display',f+'offsets']);a.getContentTarget().appendChild(e.dom)}i.writeTo(c);b=c.removed;if(b){g.removeCls(b)}b=c.cls;if(b.length){g.addCls(b)}b=c.style;if(c.style){g.setStyle(b)}a.protoEl=null;if(!a.ownerCt&&!a.skipLayout){a.updateLayout()}if(!(a.x&&a.y)&&(a.pageX||a.pageY)){a.setPagePosition(a.pageX,a.pageY)}if(a.disableOnRender){a.onDisable()}d=a.controller;if(d&&d.afterRender){d.afterRender(a)}},afterFirstLayout:function(l,k){var a=this,g=a.x,h=a.y,j=a.defaultAlign,i=a.alignOffset,f,d,e,b,c;if(!a.ownerLayout){d=g!==undefined;e=h!==undefined}if(a.floating&&!a.preventDefaultAlign&&(!d||!e)){if(a.floatParent){b=a.floatParent.getTargetEl().getViewRegion();c=a.el.getAlignToXY(a.alignTarget||a.floatParent.getTargetEl(),j,i);b.x=c[0]-b.x;b.y=c[1]-b.y}else {c=a.el.getAlignToXY(a.alignTarget||a.container,j,i);b=a.el.translateXY(c[0],c[1])}g=d?g:b.x;h=e?h:b.y;d=e=!0}if(d||e){a.setPosition(g,h)}a.onBoxReady(l,k);f=a.controller;if(f&&f.boxReady){f.boxReady(a)}},beforeRender:function(){var a=this,d=a.floating,e=a.getComponentLayout(),b=a.userCls,c;a._renderState=1;a.ariaUsesMainElement=a.ariaEl==='el';c=a.controller;if(c&&c.beforeRender){c.beforeRender(a)}a.initBindable();if(a.renderConfigs){a.flushRenderConfigs()}if(a.reference){a.publishState()}if(b){a.addCls(b)}if(d){a.addCls(a.fixed?a._fixedLayerCls:a._layerCls);b=d.cls;if(b){a.addCls(b)}}a.frame=a.frame||a.alwaysFramed;if(!e.initialized){e.initLayout()}a.initOverflow();a.setUI(a.ui)},doApplyRenderTpl:function(d,a){var c=a.$comp,b;if(!c.rendered){b=c.initRenderTpl();b.applyOut(a.renderData,d)}},getElConfig:function(){var a=this,e=a.autoEl,c=a.getFrameInfo(),b={tag:'div',tpl:c?a.initFramingTpl(c.table):a.initRenderTpl()},g=a.layoutTargetCls,d=a.protoEl,f=a.ariaRole,h;a.initStyles(d);if(g&&!c){d.addCls(g)}d.writeTo(b);d.flush();if(e){if(Ext.isString(e)){b.tag=e}else {Ext.apply(b,e)}}if(f&&a.ariaUsesMainElement){b.role=f;if(!a.ariaStaticRoles[f]){b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.ariaLabel&&!a.ariaLabelledBy){b['aria-label']=a.ariaLabel}if(a.collapsible){b['aria-expanded']=!a.collapsed}if(a.ariaRenderAttributes){Ext.apply(b,a.ariaRenderAttributes)}if(a.config.ariaAttributes){Ext.apply(b,a.getAriaAttributes())}}}b.id=a.id;if(b.tpl){if(c){b.tplData=h=a.getFrameRenderData();h.renderData=a.initRenderData()}else {b.tplData=a.initRenderData()}}a.ariaRenderAttributes=null;return b},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else {a=Ext.getDom(a)}}return a},getRenderTree:function(){var a=this,b=null;if(!a.hasListeners.beforerender||a.fireEvent('beforerender',a)!==!1){a._renderState=1;a.beforeRender();a.rendering=!0;a._renderState=2;b=a.getElConfig();if(a.el){b.id=a.$pid=Ext.id(null,a.el.identifiablePrefix)}}return b},initRenderData:function(){var a=this,c=a.ariaRole,d,b;d=Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,renderScroller:a.touchScroll,scrollerCls:a.scrollerCls,childElCls:''},a.renderData);if(c&&!a.ariaUsesMainElement){b={role:c};if(!a.ariaStaticRoles[c]){b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.ariaLabel&&!a.ariaLabelledBy){b['aria-label']=a.ariaLabel}if(a.collapsible){b['aria-expanded']=!a.collapsed}if(a.ariaRenderAttributes){Ext.apply(b,a.ariaRenderAttributes)}if(a.config.ariaAttributes){Ext.apply(b,a.getAriaAttributes())}}d.ariaAttributes=b}return d},onRender:function(i,h){var a=this,e=a.x,f=a.y,b=null,g=a.el,d,c;a.applyRenderSelectors();a.rendering=null;a.rendered=!0;a._renderState=3;if(a.renderConfigs){a.flushRenderConfigs()}if(e!=null){b={x:e}}if(f!=null){(b=b||{}).y=f}if(!a.getFrameInfo()){d=a.width;c=a.height;if(typeof d==='number'){b=b||{};b.width=d}if(typeof c==='number'){b=b||{};b.height=c}}if(a.touchScroll===1){a.getOverflowEl().disableTouchScroll()}a.lastBox=g.lastBox=b},render:function(c,g){var a=this,b=a.el,f=a.ownerLayout,h,d,e;if(b&&!b.isElement){a.wrapPrimaryEl(b);b=a.el}if(!a.skipLayout){Ext.suspendLayouts()}c=a.initContainer(c);e=a.getInsertPosition(g);if(!b){d=a.getRenderTree();if(f&&f.transformItemRenderTree){d=f.transformItemRenderTree(d)}if(d){if(e){b=Ext.DomHelper.insertBefore(e,d)}else {b=Ext.DomHelper.append(c,d)}a.wrapPrimaryEl(b);a.cacheRefEls(b)}}else {if(!a.hasListeners.beforerender||a.fireEvent('beforerender',a)!==!1){a.beforeRender();a.needsRenderTpl=a.rendering=!0;a._renderState=2;a.initStyles(b);if(a.allowDomMove!==!1){if(e){c.dom.insertBefore(b.dom,e)}else {c.dom.appendChild(b.dom)}}}else {h=!0}}if(b&&!h){a.finishRender(g)}if(!a.skipLayout){Ext.resumeLayouts(!a.hidden&&!c.isDetachedBody)}},ensureAttachedToBody:function(c){var a=this,b;while(a.ownerCt){a=a.ownerCt}if(a.container.isDetachedBody){a.container=b=Ext.getBody();b.appendChild(a.el.dom);if(c){a.updateLayout()}if(typeof a.x==='number'||typeof a.y==='number'){a.setPosition(a.x,a.y)}}},privates:{applyRenderSelectors:function(){var a=this,b=a.renderSelectors,e=a.el,d,c;a.attachChildEls(e);a.ariaEl=a[a.ariaEl]||a.el;if(b){for(c in b){d=b[c];if(d){a[c]=e.selectNode(d,!1)}}}},cacheRefEls:function(a){a=a||this.el;var e=Ext.cache,h=Ext.dom.Element,f=a.isElement?a.dom:a,d=f.querySelectorAll('[data-ref]'),g=d.length,c,b;for(b=0;b<g;b++){c=d[b];if(!e[c.id]){new h(c)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else {a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(c,d){var a=d.$comp,b=a.data;if(a.html){Ext.DomHelper.generateMarkup(a.html,c);delete a.html}if(a.tpl){if(!a.tpl.isTemplate){a.tpl=new Ext.XTemplate(a.tpl)}if(b){a.data=b=b.isEntity?b.getData(!0):b;a.tpl.applyOut(b,c)}}},doRenderFramingDockedItems:function(d,a,c){var b=a.$comp;if(!b.rendered&&b.doRenderDockedItems){a.renderData.$skipDockedItems=!0;b.doRenderDockedItems.call(this,d,a,c)}},flushRenderConfigs:function(){var b=this,f=b.renderConfigs,h=b._renderState,e,c,a,d,g;if(f){for(c=0;c<=h;++c){e=f[c];if(e){f[c]=null;for(a in e){g=e[a];(d||(d={}))[a]=b[a];b[a]=g}}}if(d){b.setConfig(d)}}},finishRender:function(j){var a=this,g=Ext.cache,d,h,f,e,i,b,c;if(!a.el||a.$pid){if(a.container){c=g[a.id];b=c?c.dom:a.container.getById(a.id,!0)}else {f=a.$pid||a.id;c=g[f];b=c?c.dom:Ext.getDom(f)}if(!a.el){a.wrapPrimaryEl(b)}else {delete a.$pid;if(!a.el.dom){a.wrapPrimaryEl(a.el)}b.parentNode.insertBefore(a.el.dom,b);d=b;b=a.el.dom;h=b.firstChild;while(d.firstChild){b.insertBefore(d.firstChild,h)}a.el.addCls(d.className);Ext.removeNode(d)}}else {if(a.needsRenderTpl){e=a.initRenderTpl();if(e){i=a.initRenderData();e.insertFirst(a.getTargetEl(),i)}a.cacheRefEls()}}a.el.component=a;if(!a.container){a.container=Ext.get(a.el.dom.parentNode)}if(a.ctCls){a.container.addCls(a.ctCls)}a.onRender(a.container,j);if(!a.overflowInited){a.initOverflow()}a.el.setVisibilityMode(Ext.Element[a.hideMode.toUpperCase()]);if(a.overCls){a.el.hover(a.addOverCls,a.removeOverCls,a)}if(a.hasListeners.render){a.fireEvent('render',a)}a.afterRender();if(a.hasListeners.afterrender){a.fireEvent('afterrender',a)}a.initEvents();if(a.hidden){a.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var a=this,b=a.frameSize,c='';if(a._syncFrameHeight&&a.height){c='height:'+(a.height-b.height)+'px'}return {$comp:a,id:a.id,fgid:a.id+'-frame',ui:a.ui,uiCls:a.uiCls,frameCls:a.frameCls,frameBodyCls:a.layoutTargetCls||'',baseCls:a.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:c,frameElCls:''}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return !1}var c=this,q=c.frameInfoCache,p=c.getFramingInfoCls()+'-frameInfo',b=q[p],r,a,o,l,j,n,g,e,d,f,m,i,h,k;if(b==null){r=Ext.fly(c.getStyleProxy(p),'frame-style-el');a=r.getStyle('font-family');if(a){a=a.split('-');o=parseInt(a[1],10);l=parseInt(a[2],10);j=parseInt(a[3],10);n=parseInt(a[4],10);g=parseInt(a[5],10);e=parseInt(a[6],10);d=parseInt(a[7],10);f=parseInt(a[8],10);m=parseInt(a[9],10);i=parseInt(a[10],10);h=parseInt(a[11],10);k=parseInt(a[12],10);b={table:a[0].charAt(0)==='t',vertical:a[0].charAt(1)==='v',top:o,right:l,bottom:j,left:n,width:n+l,height:o+j,border:{top:g,right:e,bottom:d,left:f,width:f+e,height:g+d},padding:{top:m,right:i,bottom:h,left:k,width:k+i,height:m+h}}}else {b=!1}q[p]=b}c.frame=!!b;c.frameSize=b;return b},getFramingInfoCls:function(){return this.baseCls+'-'+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:'presentation',style:{position:'absolute',top:'-10000px'}},null,!0));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?'frameTableTpl':'frameTpl')},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=!1}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var a=this,e=a.getOverflowStyle(),d=a.scrollFlags,b=a.getOverflowEl(),c=d.y||d.x,f=a.touchScroll=c&&Ext.supports.touchScroll;if(!c||!b||!b.isElement){return}a.overflowInited=!0;if(f===2){b.setStyle('overflow','hidden')}else {b.setStyle(e)}},doRenderPadding:function(c,b){var a=b.$comp;if(a.touchScroll){c.push('padding:',a.unitizeBox(a.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl('renderTpl');if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var a=this,p=a.el.dom,l=a.frameTable,h=a.frameBody,g=h.dom,q=a.getFrameInfo(),j,b,c,f,d,m,n,o,k,e,i;c=document.createElement('div');m=a.getFrameRenderData();o=a.getFrameTpl(q.table);o.insertFirst(c,m);i=c.querySelectorAll('[data-ref]');e=c.querySelector('[data-ref="frameBody"]');for(d=g;d.parentNode!==p;){d=d.parentNode}while(c.firstChild){p.insertBefore(c.firstChild,d)}e.parentNode.replaceChild(g,e);g.className=e.className;h.setSize();j=a.getChildEls();if(l){l.destroy();a.frameTable=null}for(b in j){if(j[b].frame){f=a[b];if(f&&f!==h){f.destroy();a[b]=null}}}for(k=i.length;k--;){b=(n=i[k]).getAttribute('data-ref');if(b!=='frameBody'){a[b]=new Ext.dom.Element(n)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,'Renderable'],0);Ext.define('Ext.rtl.util.Renderable',{override:'Ext.util.Renderable',_rtlCls:'x-rtl',_ltrCls:'x-ltr',rtlFrameTableTpl:['{%this.renderDockedItems(out,values,0);%}','<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','<tr role="presentation">','<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">','{%this.applyRenderTpl(out, values)%}','</td>','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','<tpl if="bottom">','<tr role="presentation">','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','</table>','{%this.renderDockedItems(out,values,1);%}'],beforeRender:function(){var a=this.getInherited().rtl;if(a){this.addCls(this._rtlCls)}else {if(a===!1){this.addCls(this._ltrCls)}}arguments.callee.$previous.call(this)},initRenderData:function(){var c=this,a=arguments.callee.$previous.call(this),b=c._rtlCls;if(b&&c.getInherited().rtl){a.childElCls=' '+b}return a},privates:{getFrameTpl:function(a){return a&&this.getInherited().rtl?this.getTpl('rtlFrameTableTpl'):arguments.callee.$previous.apply(this,arguments)},getFrameRenderData:function(){var c=this,b=arguments.callee.$previous.call(this),a=c._rtlCls;if(a&&c.getInherited().rtl){b.frameElCls=' '+a}return b}}});Ext.cmd.derive('Ext.state.Provider',Ext.Base,{prefix:'ext-',constructor:function(b){var a=this;Ext.apply(a,b);a.state={};a.mixins.observable.constructor.call(a)},get:function(c,b){var a=this.state[c];return a===undefined?b:a},clear:function(b){var a=this;delete a.state[b];a.fireEvent('statechange',a,b,null)},set:function(c,b){var a=this;a.state[c]=b;a.fireEvent('statechange',a,c,b)},decodeValue:function(a){var i=this,j=/^(a|n|d|b|s|o|e)\:(.*)$/,e=j.exec(unescape(a)),d,h,g,c,f,b;if(!e||!e[1]){return}h=e[1];a=e[2];switch(h){case 'e':return null;case 'n':return parseFloat(a);case 'd':return new Date(Date.parse(a));case 'b':return a==='1';case 'a':d=[];if(a){c=a.split('^');f=c.length;for(b=0;b<f;b++){a=c[b];d.push(i.decodeValue(a))}};return d;case 'o':d={};if(a){c=a.split('^');f=c.length;for(b=0;b<f;b++){a=c[b];g=a.split('=');d[g[0]]=i.decodeValue(g[1])}};return d;default:return a;}},encodeValue:function(a){var c='',e=0,b,f,d;if(a==null){return 'e:1'}else {if(typeof a==='number'){b='n:'+a}else {if(typeof a==='boolean'){b='b:'+(a?'1':'0')}else {if(Ext.isDate(a)){b='d:'+a.toUTCString()}else {if(Ext.isArray(a)){for(f=a.length;e<f;e++){c+=this.encodeValue(a[e]);if(e!==f-1){c+='^'}}b='a:'+c}else {if(typeof a==='object'){for(d in a){if(typeof a[d]!=='function'&&a[d]!==undefined){c+=d+'='+this.encodeValue(a[d])+'^'}}b='o:'+c.substring(0,c.length-1)}else {b='s:'+a}}}}}}return escape(b)}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.state,'Provider'],0);Ext.cmd.derive('Ext.state.Manager',Ext.Base,{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(b,a){this.provider.set(b,a)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,'Manager'],0);Ext.cmd.derive('Ext.state.Stateful',Ext.Base,{mixinId:'state',stateful:!1,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==!1){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(f){var a=this,e,b,c,d;if(a.stateful&&a.getStateId()){d=typeof f==='string'?arguments:f;c=a.stateEventsByName||(a.stateEventsByName={});for(e=d.length;e--;){b=d[e];if(b&&!c[b]){c[b]=1;a.on(b,a.onStateChange,a)}}}},onStateChange:function(){var a=this,d=a.saveDelay,b,c;if(!a.stateful){return}if(d){if(!a.stateTask){b=Ext.state.Stateful;c=b.runner||(b.runner=new Ext.util.TaskRunner());a.stateTask=c.newTask({run:a.saveState,scope:a,interval:d,repeat:1,fireIdleEvent:!1})}a.stateTask.start()}else {a.saveState()}},saveState:function(){var a=this,i=a.stateful&&a.getStateId(),g=a.hasListeners,f,c,d,h,b,e;if(i){b=a.getState()||{};f=a.getPlugins()||[];for(d=0,h=f.length;d<h;d++){c=f[d];if(c&&c.getState){e=c.getState(b);if(e&&!b[c.ptype]){b[c.ptype]=e}}}if(!g.beforestatesave||a.fireEvent('beforestatesave',a,b)!==!1){Ext.state.Manager.set(i,b);if(g.statesave){a.fireEvent('statesave',a,b)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var a=this,j=a.stateful&&a.getStateId(),h=a.hasListeners,d,b,e,i,g,c,f;if(j){b=Ext.state.Manager.get(j);if(b){d=Ext.apply({},b);if(!h.beforestaterestore||a.fireEvent('beforestaterestore',a,b)!==!1){g=a.getPlugins()||[];for(e=0,i=g.length;e<i;e++){c=g[e];if(c){f=c.ptype;if(c.applyState){c.applyState(d[f],b)}delete d[f]}}a.applyState(d);if(h.staterestore){a.fireEvent('staterestore',a,b)}}}}},savePropToState:function(a,d,f){var b=this,e=b[a],c=b.initialConfig;if(b.hasOwnProperty(a)){if(!c||c[a]!==e){if(d){d[f||a]=e}return !0}}return !1},savePropsToState:function(a,c){var d=this,b,e;if(typeof a==='string'){d.savePropToState(a,c)}else {for(b=0,e=a.length;b<e;++b){d.savePropToState(a[b],c)}}return c},destroy:function(){var a=this,b=a.stateTask;if(b){b.destroy();a.stateTask=null}a.clearListeners()}},1,0,0,0,0,0,[Ext.state,'Stateful'],0);Ext.cmd.derive('Ext.util.Focusable',Ext.Base,{mixinId:'focusable',hasFocus:!1,focusable:!1,focusCls:'focus',initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners);a.focusListeners=a.focusEnterEvent=a.focusTask=null;a.focusEl=a.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var a=this,b,d=a.focusCls,c;if(a.hasFocus){b=a.findFocusTarget();if(b){b.focus()}}c=a.getFocusClsEl();if(d&&c){c.removeCls(a.removeClsWithUI(d,!0))}},isFocusable:function(c){var a=this,b;if(!a.focusable&&(!a.isContainer||!c)){return !1}b=a.getFocusEl();if(b&&a.canFocus()){return b.isFocusable(c)}return !1},canFocus:function(d,c){var a=this,b;b=(a.isContainer||a.focusable)&&a.rendered&&!a.destroying&&!a.destroyed&&!a.disabled&&(d||a.isVisible(!0));return b||c&&!!a.findFocusTarget()},focus:function(c,d,f,g){var a=this,b,e,h;if(!a.focusable&&!a.isContainer||a.destroyed||a.destroying){return}if(d){a.getFocusTask().delay(Ext.isNumber(d)?d:10,a.focus,a,[c,!1,f,g]);return a}a.cancelFocus();if(a.canFocus()){if(b=a.getFocusEl()){if(b.isComponent){return b.focus(c,d,f,g)}e=b.dom;if(e){if(a.floating){h=a.container.dom.scrollTop}b.focus();if(c){if(Ext.isArray(c)){if(a.selectText){a.selectText.apply(a,c)}}else {if(e.select){e.select()}else {if(a.selectText){a.selectText()}}}}Ext.callback(f,g)}if(a.floating){if(h!==undefined){a.container.dom.scrollTop=h}}}}else {b=a.findFocusTarget();if(b){return b.focus(c,d,f,g)}}return a},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(b){var a=this,c=a.focusableContainer,e=a.focusCls,d;if(!a.focusable||a.destroying){return}a.beforeBlur(b);if(c){c.beforeFocusableChildBlur(a,b)}d=a.getFocusClsEl();if(e&&d){d.removeCls(a.removeClsWithUI(e,!0))}if(a.validateOnBlur){a.validate()}a.hasFocus=!1;a.fireEvent('blur',a,b);a.postBlur(b);if(c){c.afterFocusableChildBlur(a,b)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(b){var a=this,c=a.focusableContainer,e=a.focusCls,d;if(!a.focusable){return}if(a.canFocus()){a.beforeFocus(b);if(c){c.beforeFocusableChildFocus(a,b)}d=a.getFocusClsEl();if(e&&d){d.addCls(a.addClsWithUI(e,!0))}if(!a.hasFocus){a.hasFocus=!0;a.fireEvent('focus',a,b)}a.postFocus(b);if(c){c.afterFocusableChildFocus(a,b)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var c=this,a,b;if(!c.focusable){return}a=c.rendered&&c.getFocusEl();if(a){if(a.isComponent){b=a.getTabIndex()}else {if(a.isElement){b=a.getAttribute('tabIndex')}else {return}}c.tabIndex=b}else {b=c.tabIndex}return b-0},setTabIndex:function(c,d){var b=this,a;if(!b.focusable){return}b.tabIndex=c;if(!b.rendered){return}a=d||b.getFocusEl();if(a){if(a.isComponent){a.setTabIndex(c)}else {if(a.isElement){a.set({tabIndex:c})}}}},onFocusEnter:function(b){var a=this;if(a.floating&&a!==a.zIndexManager.getActive()){a.toFront(!0)}a.focusEnterEvent=b;a.containsFocus=!0;a.fireEvent('focusenter',a,b)},onFocusLeave:function(b){var a=this;a.focusEnterEvent=null;a.containsFocus=!1;a.fireEvent('focusleave',a,b)},privates:{revertFocus:function(){var b=this,d=b.previousFocus,c=b.focusEnterEvent,a;b.previousFocus=null;if(b.preventRefocus||!b.el.contains(Ext.Element.getActiveElement())){return}a=d||c&&c.fromComponent;if(a){if(a.canFocus&&a.canFocus(!1,!0)){a.focus();return}else {if(a.nodeType){a=Ext.fly(a)}if(a.isFocusable&&a.isFocusable()){a.focus();return}}}if(c){a=Ext.fly(c.relatedTarget);if(Ext.isIE8||a.isFocusable&&a.isFocusable()){a.focus()}}},findFocusTarget:function(){var c=this,a,b;for(a=c.up(':not([disabled])');a;a=a.up(':not([disabled])')){b=Ext.ComponentQuery.query(':focusable:not([hasFocus])',a);if(b.length){return b[0]}if(a.isFocusable&&a.isFocusable()){return a}}},initFocusableElement:function(){var a=this,c=a.tabIndex,b=a.getFocusEl();if(b&&!b.isComponent){a.focusEl=b;if(c!=null&&a.canFocus(!0)){a.setTabIndex(c,b)}b.dom.setAttribute('data-componentid',a.id);if(a.config.keyHandlers){a.initKeyHandlers(b)}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(b){var a;if(this.isFocusing(b)){a=new Ext.event.Event(b.event);a.type='focus';a.relatedTarget=b.fromElement;a.target=b.toElement;this.onFocus(a)}},handleBlurEvent:function(b){var a;if(this.isBlurring(b)){a=new Ext.event.Event(b.event);a.type='blur';a.target=b.fromElement;a.relatedTarget=b.toElement;this.onBlur(a)}},isFocusing:function(d){var c=d.fromElement,b=d.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isFocusing(c,b)}else {return b===a.dom&&c!==b}}}return !1},isBlurring:function(d){var b=d.fromElement,c=d.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isBlurring(b,c)}else {return b===a.dom&&b!==c}}}return !1},blur:function(){var a=this,b;if(!a.focusable||!a.canFocus()){return}b=a.getFocusEl();if(b){a.blurring=!0;b.blur();delete a.blurring}return a},disableTabbing:function(){var c=this,b=c.el,a;if(b){b.saveTabbableState()}a=c.getFocusEl();if(a){if(a.isComponent){a.disableTabbing()}else {if(a.isElement&&b&&!b.contains(a)){a.saveTabbableState()}}}},enableTabbing:function(){var c=this,b=c.el,a;a=c.getFocusEl();if(a){if(a.isComponent){a.enableTabbing()}else {if(a.isElement&&b&&!b.contains(a)){a.restoreTabbableState()}}}if(b){b.restoreTabbableState()}}}},0,0,0,0,0,0,[Ext.util,'Focusable'],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}});Ext.cmd.derive('Ext.mixin.Accessible',Ext.Mixin,{mixinConfig:{id:'accessible'},config:{ariaAttributes:{$value:null,lazy:!0}},privates:{getAriaLabelEl:function(a){var e=[],c,b,f,d,g;if(a){if(Ext.isFunction(a)){return a.call(this)}else {if(!Ext.isArray(a)){a=[a]}c=this.lookupReferenceHolder();if(c){for(b=0,f=a.length;b<f;b++){d=c.lookupReference(a[b]);if(d){e.push(d.ariaEl.id)}}}}}return e.length?e.join(' '):null}}},0,0,0,0,0,0,[Ext.mixin,'Accessible'],0);Ext.cmd.derive('Ext.util.KeyboardInteractive',Ext.Mixin,{mixinConfig:{id:'keyboardinteractive'},config:{keyHandlers:{$value:null,lazy:!0}},initKeyHandlers:function(c){var a=this,b=a.getKeyHandlers(),d;for(d in b){c.on('keydown',a.handleKeydown,a);a.keydownListenerAttached=!0;break}},applyKeyHandlers:function(f){var a=this,d={},e,c,h,b,g;if(f){for(c in f){b=f[c];if(typeof b==='function'){d[c]=b}else {d[c]=a[b]}}if(a.focusable&&a.rendered&&!a.destroyed&&!a.destroying){e=a.getFocusEl();if(e&&!a.keydownListenerAttached){e.on('keydown',a.handleKeydown,a);a.keydownListenerAttached=!0}}}return d},handleKeydown:function(d){var c=this,b,a;b=d.getKeyName();if(b){a=c.getKeyHandlers()[b];if(a){a.call(c,d)}}}},0,0,0,0,0,0,[Ext.util,'KeyboardInteractive'],0);Ext.cmd.derive('Ext.Component',Ext.Base,{alternateClassName:'Ext.AbstractComponent',statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:'top',DIRECTION_RIGHT:'right',DIRECTION_BOTTOM:'bottom',DIRECTION_LEFT:'left',VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:'x-aria-highcontrast',cancelLayout:function(c,b){var a=this.runningLayoutContext||this.pendingLayouts;if(a){a.cancelComponent(c,!1,b)}},fromElement:function(c,b,a){return Ext.ComponentManager.fromElement(c,b,a)},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var a=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent('afterlayout')}return a}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent('resumelayouts')}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,e){var a=this,d=a.runningLayoutContext,c;if(d){d.queueInvalidate(b)}else {c=a.pendingLayouts||(a.pendingLayouts=new Ext.layout.Context());c.queueInvalidate(b);if(!e&&!a.layoutSuspendCount&&!b.isLayoutSuspended()){a.flushLayouts()}}}},$configPrefixed:!1,$configStrict:!1,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:'html',alignTarget:null,autoRender:!1,autoShow:!1,baseCls:'x-component',childEls:{frameTable:{frame:!0},frameTL:{frame:'tl'},frameTC:{frame:'tc'},frameTR:{frame:'tr'},frameML:{frame:'ml'},frameBody:{frame:'mc'},frameMR:{frame:'mr'},frameBL:{frame:'bl'},frameBC:{frame:'bc'},frameBR:{frame:'br'}},componentLayout:'autocomponent',defaultAlign:'c-c',disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var a=['input','select','textarea','optgroup','option','table'];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push('p')}return new RegExp('^(?:'+a.join('|')+')$','i')}(),disabledCls:'x-item-disabled',draggable:!1,floating:!1,hidden:!1,hideMode:'display',maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">','</tpl>','{%this.renderContent(out,values)%}','<tpl if="renderScroller"></div></tpl>'],resizeHandles:'all',shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:'overwrite',ui:'default',uiCls:[],userCls:null,weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:'x-border-box',componentLayoutCounter:0,contentPaddingProperty:'padding',deferLayouts:!1,frameSize:null,horizontalPosProp:'left',isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,offsetsCls:'x-hidden-offsets',rendered:!1,rootCls:'x-body',scrollerCls:'x-scroll-scroller',scrollerSelector:'.x-scroll-scroller',_scrollFlags:{auto:{auto:{overflowX:'auto',overflowY:'auto',x:!0,y:!0,both:!0},'false':{overflowX:'auto',overflowY:'hidden',x:!0,y:!1,both:!1},scroll:{overflowX:'auto',overflowY:'scroll',x:!0,y:!0,both:!0}},'false':{auto:{overflowX:'hidden',overflowY:'auto',x:!1,y:!0,both:!1},'false':{overflowX:'hidden',overflowY:'hidden',x:!1,y:!1,both:!1},scroll:{overflowX:'hidden',overflowY:'scroll',x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:'scroll',overflowY:'auto',x:!0,y:!0,both:!0},'false':{overflowX:'scroll',overflowY:'hidden',x:!0,y:!1,both:!1},scroll:{overflowX:'scroll',overflowY:'scroll',x:!0,y:!0,both:!0}},none:{overflowX:'',overflowY:'',x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},'true':{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(b){var a=this,e,j,i,h,g,c,d,f;b=b||{};if(b.initialConfig){if(b.isAction){a.baseAction=b}b=b.initialConfig}else {if(b.tagName||b.dom||Ext.isString(b)){b={applyTo:b,id:b.id||b}}}a.initialConfig=b;a.getId();a.protoEl=new Ext.util.ProtoElement();a.initConfig(b);if(a.scrollable==null){g=a.autoScroll;if(g){f=!!g}else {c=a.overflowX;d=a.overflowY;if(c||d){f={x:c&&c!=='hidden'?c:!1,y:d&&d!=='hidden'?d:!1}}}if(f){a.setScrollable(f)}}i=a.xhooks;if(i){delete a.xhooks;Ext.override(a,i)}a.mixins.elementCt.constructor.call(a);a.setupProtoEl();if(a.cls){a.initialCls=a.cls;a.protoEl.addCls(a.cls)}if(a.style){a.initialStyle=a.style;a.protoEl.setStyle(a.style)}a.renderData=a.renderData||{};a.initComponent();if(!a.preventRegister){Ext.ComponentManager.register(a)}a.mixins.state.constructor.call(a);a.addStateEvents('resize');h=a.getController();if(h){h.init(a)}if(a.plugins){for(e=0,j=a.plugins.length;e<j;e++){a.plugins[e]=a.initPlugin(a.plugins[e])}}a.loader=a.getLoader();if(a.disabled){a.disabled=!1;a.disable(!0)}if(a.renderTo){a.render(a.renderTo)}if(a.autoShow&&!a.$initParent){a.show()}if(a.baseAction){a.baseAction.addComponent(a)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;b.addCls.apply(b,arguments);return a},addClsWithUI:function(a,i){var b=this,d=[],e=0,h=b.uiCls=Ext.Array.clone(b.uiCls),f=b.activeUI,g,c;if(typeof a==='string'){a=a.indexOf(' ')<0?[a]:Ext.String.splitWords(a)}g=a.length;for(;e<g;e++){c=a[e];if(c&&!b.hasUICls(c)){h.push(c);if(f){d=d.concat(b.addUIClsToElement(c))}}}if(i!==!0&&f){b.addCls(d)}return d},afterComponentLayout:function(d,c,f,e){var a=this,b;if(++a.componentLayoutCounter===1){b=a.scrollable;if(b){if(a.touchScroll&&b.isTouchScroller){b.setInnerElement(a.getScrollerEl())}b.setElement(a.getOverflowEl());if(Ext.isIE){Ext.on('show',a.onGlobalShow,a)}}a.afterFirstLayout(d,c)}if(d!==f||c!==e){a.onResize(d,c,f,e)}if(a.floating){a.onAfterFloatLayout()}},addPlugin:function(a){var b=this;a=b.constructPlugin(a);if(b.plugins){b.plugins.push(a)}else {b.plugins=[a]}if(b.pluginsInitialized){b.initPlugin(a)}return a},addPropertyToState:function(b,a,c){var d=this,e=arguments.length;if(e===3||d.hasOwnProperty(a)){if(e<3){c=d[a]}if(c!==d.initialConfig[a]){(b||(b={}))[a]=c}}return b},addUIClsToElement:function(f){var a=this,d=a.baseCls+'-'+a.ui+'-'+f,h=['x-'+f,a.baseCls+'-'+f,d],e,c,g,b;if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){g=a[c];if(g){g.addCls(d+b)}}}}return h},removeUIClsFromElement:function(f){var a=this,d=a.baseCls+'-'+a.ui+'-'+f,h=['x-'+f,a.baseCls+'-'+f,d],e,c,g,b;if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){g=a[c];if(g){g.removeCls(d+b)}}}}return h},adjustPosition:function(c,d){var b=this,a;if(b.isContainedFloater()){a=b.floatParent.getTargetEl().getViewRegion();c+=a.left;d+=a.top}return {x:c,y:d}},afterHide:function(d,c){var a=this,b=a.focusableContainer;a.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:!1})}Ext.callback(d,c||a);a.fireHierarchyEvent('hide');a.fireEvent('hide',a);if(b){b.onFocusableChildHide(a)}},afterSetPosition:function(b,c){var a=this;a.onPosition(b,c);if(a.hasListeners.move){a.fireEvent('move',a,b,c)}},afterShow:function(b,h,g){var a=this,c=a.el,f,e,d;b=a.getAnimateTarget(b);if(!a.ghost){b=null}if(b){e={x:c.getX(),y:c.getY(),width:c.dom.offsetWidth,height:c.dom.offsetHeight};f={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight};c.addCls(a.offsetsCls);d=a.ghost();d.el.stopAnimation();d.setX(-10000);a.ghostBox=e;d.el.animate({from:f,to:e,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;a.unghost();delete a.ghostBox;c.removeCls(a.offsetsCls);a.onShowComplete(h,g)}}})}else {a.onShowComplete(h,g)}a.fireHierarchyEvent('show')},animate:function(b){var a=this,e,d,j,k,c,r,q,i,p,h,o,f,n,l,m,g;b=b||{};c=b.to||{};if(Ext.fx.Manager.hasFxBlock(a.id)){return a}e=Ext.isDefined(c.width);if(e){k=Ext.Number.constrain(c.width,a.minWidth,a.maxWidth)}d=Ext.isDefined(c.height);if(d){j=Ext.Number.constrain(c.height,a.minHeight,a.maxHeight)}if(!b.dynamic&&(e||d)){i=(b.from?b.from.width:undefined)||a.getWidth();p=i;h=(b.from?b.from.height:undefined)||a.getHeight();o=h;f=!1;if(d&&j>h){o=j;f=!0}if(e&&k>i){p=k;f=!0}if(d||e){g=a.el.getStyle('overflow');if(g!=='hidden'){a.el.setStyle('overflow','hidden')}}if(f){r=!Ext.isNumber(a.width);q=!Ext.isNumber(a.height);a.setSize(p,o);a.el.setSize(i,h);if(r){delete a.width}if(q){delete a.height}}if(e){c.width=k}if(d){c.height=j}}n=a.constrain;l=a.constrainHeader;if(n||l){a.constrain=a.constrainHeader=!1;m=b.callback;b.callback=function(){a.constrain=n;a.constrainHeader=l;if(m){m.call(b.scope||a,arguments)}if(g!=='hidden'){a.el.setStyle('overflow',g)}}}return a.mixins.animate.animate.apply(a,arguments)},applyScrollable:function(a,c){var b=this,f=b.rendered,e,d;if(a){if(a===!0||typeof a==='string'){e=b._scrollableCfg[a];a=e}if(c){c.setConfig(a);a=c}else {a=Ext.Object.chain(a);if(f){a.element=b.getOverflowEl();d=b.getScrollerEl();if(d){a.innerElement=d}}a.autoRefresh=!1;if(Ext.supports.touchScroll===1){a.translatable={translationMethod:'scrollparent'};a.indicators=!1}a=Ext.scroll.Scroller.create(a);a.component=b}}else {if(c){c.setConfig({x:!1,y:!1});c.destroy();a=null}}if(b.rendered&&!b.destroying&&!b.destroyed){if(a){b.getOverflowStyle()}else {b.scrollFlags=b._scrollFlags.none}b.updateLayout()}return a},beforeComponentLayout:function(){return !0},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(a,b,f){var d=this,c=null,e,g,h,i;if(a){if(Ext.isNumber(e=a[0])){f=b;b=a[1];a=e}else {if((e=a.x)!==undefined){f=b;b=a.y;a=e}}}if(d.constrain||d.constrainHeader){c=d.calculateConstrainedPosition(null,[a,b],!0);if(c){a=c[0];b=c[1]}}g=a!==undefined;h=b!==undefined;if(g||h){d.x=a;d.y=b;i=d.adjustPosition(a,b);c={x:i.x,y:i.y,anim:f,hasX:g,hasY:h}}return c},beforeShow:Ext.emptyFn,bubble:function(d,b,c){var a=this;while(a){if(d.apply(b||a,c||[a])===!1){break}a=a.getBubbleTarget()}return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(a){a=a||{};var d=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig),b;c.id=d;b=Ext.getClass(this);return new b(c)},destroy:function(){var a=this,d=a.renderSelectors,f=a.getConfig('viewModel',!0),g=a.getConfig('session',!0),b,c,e;if(!a.hasListeners.beforedestroy||a.fireEvent('beforedestroy',a)!==!1){a.isDestroying=a.destroying=!0;c=a.floatParent||a.ownerCt;if(a.floating){delete a.floatParent;if(a.zIndexManager){a.zIndexManager.unregister(a);a.zIndexManager=null}}a.removeBindings();a.beforeDestroy();a.destroyBindable();if(c&&c.remove){c.remove(a,!1)}a.stopAnimation();a.onDestroy();Ext.destroy(a.plugins);if(a.rendered){Ext.Component.cancelLayout(a,!0)}a.componentLayout=null;if(a.hasListeners.destroy){a.fireEvent('destroy',a)}if(!a.preventRegister){Ext.ComponentManager.unregister(a)}a.mixins.state.destroy.call(a);if(a.floating){a.onFloatDestroy()}a.clearListeners();if(a.rendered){if(!a.preserveElOnDestroy){a.el.destroy()}a.el.component=null;a.mixins.elementCt.destroy.call(a);if(d){for(b in d){if(d.hasOwnProperty(b)){e=a[b];if(e){delete a[b];e.destroy()}}}}a.data=a.el=a.frameBody=a.rendered=a.afterRenderEvents=null;a.tpl=a.renderTpl=a.renderData=null;a.focusableContainer=a.container=a.scrollable=null}a.isDestroying=a.destroying=!1;a.callParent()}},disable:function(e,d){var a=this,b=a.focusableContainer,c=a.getInherited();if(!d){c.disabled=!0;a.savedDisabled=!0}if(a.maskOnDisable){c.disableMask=!0}if(!a.disabled){if(b){b.beforeFocusableChildDisable(a)}a.addCls(a.disabledCls);if(a.rendered){a.onDisable()}else {a.disableOnRender=!0}a.disabled=!0;if(e!==!0){a.fireEvent('disable',a)}if(b){b.onFocusableChildDisable(a)}}return a},doFireEvent:function(c,d,e){var a=this,b=a.mixins.observable.doFireEvent.call(a,c,d,e);if(b!==!1){b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)}return b},enable:function(e,c){var a=this,b=a.focusableContainer,d=a.getInherited();if(!c){delete a.getInherited().disabled;a.savedDisabled=!1}if(a.maskOnDisable){delete d.disableMask}if(a.disabled){if(!(c&&d.hasOwnProperty('disabled'))){if(b){b.beforeFocusableChildEnable(a)}a.disableOnRender=!1;a.removeCls(a.disabledCls);if(a.rendered){a.onEnable()}a.disabled=!1;if(e!==!0){a.fireEvent('enable',a)}if(b){b.onFocusableChildEnable(a)}}}return a},findParentBy:function(b){var a;for(a=this.getRefOwner();a&&!b(a,this);a=a.getRefOwner()){}return a||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(c){var a,b=this.plugins,d=b&&b.length;for(a=0;a<d;a++){if(b[a].ptype===c){return b[a]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,'autocomponent'))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(b){var a=this,c=a.componentLayout;if(a.hidden){b.hidden=!0}if(a.collapseImmune){b.collapseImmune=!0}if(a.modelValidation!==undefined){b.modelValidation=a.modelValidation}if(a.savedDisabled){b.disabled=!0}a.mixins.bindable.initInheritedState.call(a,b);if(c&&c.initInheritedState){c.initInheritedState(b)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,'-')}else {b=Ext.name.toLowerCase()+'-comp'}a.id=b+'-'+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var a=this,b=a.loader;if(b){if(!b.isLoader){a.loader=new Ext.ComponentLoader(Ext.apply({target:a},b))}else {b.setTarget(a)}return a.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(c){var a,b=this.plugins,d=b&&b.length;for(a=0;a<d;a++){if(b[a].pluginId===c){return b[a]}}return null},getPosition:function(e){var a=this,b,d=a.isContainedFloater(),c;if(e===!0&&!d){return [a.getLocalX(),a.getLocalY()]}b=a.getXY();if(e===!0&&d){c=a.floatParent.getTargetEl().getViewRegion();b[0]-=c.left;b[1]-=c.top}return b},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(g){var c=this,a=Ext.layout.SizeModel,h=c.componentLayout.ownerContext,q=c.width,p=c.height,n,m,j,i,d,k,f,b,l,e,o=c.floating||c.floated;if(h){e=h.widthModel;d=h.heightModel}if(!e||!d){j=(n=typeof q)==='number';i=(m=typeof p)==='number';l=o||!(k=c.ownerLayout);if(l){f=Ext.layout.Layout.prototype.autoSizePolicy;b=o?3:c.shrinkWrap;if(j){e=a.configured}if(i){d=a.configured}}else {f=k.getItemSizePolicy(c,g);b=k.isItemShrinkWrap(c)}if(h){h.ownerSizePolicy=f}b=b===!0?3:b||0;if(l&&b){if(q&&n==='string'){b&=2}if(p&&m==='string'){b&=1}}if(b!==3){if(!g){g=c.ownerCt&&c.ownerCt.getSizeModel()}if(g){b|=(g.width.shrinkWrap?1:0)|(g.height.shrinkWrap?2:0)}}if(!e){if(!f.setsWidth){if(j){e=a.configured}else {e=b&1?a.shrinkWrap:a.natural}}else {if(f.readsWidth){if(j){e=a.calculatedFromConfigured}else {e=b&1?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else {e=a.calculated}}}if(!d){if(!f.setsHeight){if(i){d=a.configured}else {d=b&2?a.shrinkWrap:a.natural}}else {if(f.readsHeight){if(i){d=a.calculatedFromConfigured}else {d=b&2?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else {d=a.calculated}}}}return e.pairsByHeightOrdinal[d.ordinal]},getState:function(){var b=this,a=null,c=b.getSizeModel();if(c.width.configured){a=b.addPropertyToState(a,'width')}if(c.height.configured){a=b.addPropertyToState(a,'height')}return a},getUserCls:function(){return this.userCls},setUserCls:function(b){var a=this,c=a.userCls;if(b!==c){a.userCls=b;if(a.rendered){a.el.replaceCls(c,b)}}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,b,a,d;if(!c.xtypes){b=[];a=this;while(a){d=a.xtypes;if(d!==undefined){b.unshift.apply(b,d)}a=a.superclass}c.xtypeChain=b;c.xtypes=b.join('/')}return c.xtypes},hasCls:function(b){var a=this.rendered?this.el:this.protoEl;return a.hasCls.apply(a,arguments)},hasUICls:function(b){var c=this,a=c.uiCls||[];return Ext.Array.contains(a,b)},hide:function(b,d,c){var a=this;if(a.pendingShow){a.pendingShow=!1}if(!(a.rendered&&!a.isVisible())){if(!a.hasListeners.beforehide||a.fireEvent('beforehide',a)!==!1||a.hierarchicallyHidden){a.getInherited().hidden=a.hidden=!0;a.fireHierarchyEvent('beforehide');if(a.rendered){a.onHide.apply(a,arguments)}}}return a},initComponent:function(){var a=this,c=a.width,b=a.height;if(a.plugins&&!a.plugins.processed){a.plugins=a.constructPlugins()}a.pluginsInitialized=!0;if(c!=null||b!=null){a.setSize(c,b)}if(a.listeners){a.on(a.listeners);a.listeners=null}if(a.focusable){a.initFocusable()}},initEvents:function(){var a=this,d=a.afterRenderEvents,e,c,f,b,g;if(d){for(f in d){c=a[f];if(c&&c.on){e=d[f];for(b=0,g=e.length;b<g;++b){a.mon(c,e[b])}}}}if(a.focusable){a.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(b){var a;for(a=this.getRefOwner();a&&a!==b;a=a.getRefOwner()){}return a||null},isAncestor:function(a){while(a){if(a.getRefOwner()===this){return !0}a=a.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var a=this,b=!1,c,d;for(;c=a.ownerCt||a.floatParent;a=c){d=c.getInherited();if(d.hidden){b=!0;break}if(a.getInherited().collapseImmune){if(c.collapsed&&!a.collapseImmune){b=!0;break}}else {b=!!d.collapsed;break}}return b},isLayoutChild:function(a){return !this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return !0}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return !0}b=a.ownerLayout;if(!b){break}a=b.owner}return !1},isVisible:function(c){var a=this,b;if(a.hidden||!a.rendered||a.destroyed){b=!0}else {if(c){b=a.isHierarchicallyHidden()}}return !b},isXType:function(a,b){return b?Ext.Array.indexOf(this.xtypes,a)!==-1:!!this.xtypesMap[a]},isMasked:function(b){var a=this;return !!(a.masked||a.loadMask&&a.loadMask.isVisible()||b&&a.getInherited().masked)},setMasked:function(b){var a=this,c=a.focusableContainer;if(b){a.masked=!0;a.getInherited().masked=b}else {a.masked=!1;delete a.getInherited().masked}if(c){c.onFocusableChildMasked(a,b)}return a},mask:function(e,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(e,c,a);this.setMasked(!0)},nextNode:function(b,i){var c=this,f=c.ownerCt,g,d,h,e,a;if(i&&c.is(b)){return c}if(f){for(d=f.items.items,e=Ext.Array.indexOf(d,c)+1,h=d.length;e<h;e++){a=d[e];if(a.is(b)){return a}if(a.down){g=a.down(b);if(g){return g}}}return f.nextNode(b)}return null},nextSibling:function(c){var f=this.ownerCt,b,d,a,e;if(f){b=f.items;a=b.indexOf(this)+1;if(a){if(c){for(d=b.getCount();a<d;a++){if((e=b.getAt(a)).is(c)){return e}}}else {if(a<b.getCount()){return b.getAt(a)}}}}return null},onAdded:function(b,d,c){var a=this;a.ownerCt=b;a.onInheritedAdd(a,c);if(a.hasListeners&&a.hasListeners.added){a.fireEvent('added',a,b,d)}if(Ext.GlobalEvents.hasListeners.added){a.fireHierarchyEvent('added')}},onRemoved:function(b){var a=this,c;if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent('removed')}if(a.hasListeners.removed){a.fireEvent('removed',a,a.ownerCt)}if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},onBoxReady:function(d,c){var a=this,b;if(a.ariaLabelledBy||a.ariaDescribedBy){if(a.ariaLabelledBy){b=a.getAriaLabelEl(a.ariaLabelledBy);if(b){a.ariaEl.dom.setAttribute('aria-labelledby',b)}}if(a.ariaDescribedBy){b=a.getAriaLabelEl(a.ariaDescribedBy);if(b){a.ariaEl.dom.setAttribute('aria-describedby',b)}}}if(a.resizable){a.initResizable(a.resizable)}if(a.draggable){a.initDraggable()}if(a.hasListeners.boxready){a.fireEvent('boxready',a,d,c)}},onDestroy:function(){var a=this,b=a.focusableContainer;if(a.rendered){Ext.destroy(a.dd,a.resizer,a.proxy,a.proxyWrap,a.resizerComponent,a.scrollable,a.contentEl)}if(b){b.onFocusableChildDestroy(a)}if(a.focusable){a.destroyFocusable()}Ext.destroy(a.componentLayout,a.loadMask,a.floatingDescendants)},onDisable:function(){var a=this,c,b;if(a.focusable){a.disableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-disabled',!0)}if(a.maskOnDisable&&!a.getInheritedConfig('disableMask',!0)){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!0}if(!a.nonMaskableRe.test(b)){a.mask()}}},onEnable:function(){var a=this,c,b;if(a.focusable){a.enableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-disabled',!1)}if(a.maskOnDisable&&a.getInherited().hasOwnProperty('masked')){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!1}if(!a.nonMaskableRe.test(b)){a.unmask()}}},onGlobalShow:function(a){if(this.up(a)){this.getScrollable().restoreState()}},onHide:function(b,g,e){var a=this,c,d,f;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-hidden',!0)}a.revertFocus();b=a.getAnimateTarget(b);if(!a.ghost){b=null}if(b){f={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight};c=a.ghost();c.el.stopAnimation();d=a.getSize();c.el.animate({to:f,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(!0);c.el.setSize(d);a.afterHide(g,e)}}})}a.el.hide();if(!b){a.afterHide(g,e)}},onPosition:Ext.emptyFn,onResize:function(e,d,c,b){var a=this;if(a.floating&&a.constrain){a.doConstrain()}a.refreshScroll();if(a.hasListeners.resize){a.fireEvent('resize',a,e,d,c,b)}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-hidden',!1)}a.el.show();a.updateLayout({isRoot:!1});if(a.floating){if(a.maximized){a.fitContainer()}else {if(a.constrain){a.doConstrain()}}}},onShowComplete:function(d,c){var a=this,b=a.focusableContainer;if(a.floating){a.onFloatShow()}Ext.callback(d,c||a);a.fireEvent('show',a);if(b){b.onFocusableChildShow(a)}delete a.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(c,h){var d=this,f=d.ownerCt,a,g,e,b;if(h&&d.is(c)){return d}if(f){for(g=f.items.items,e=Ext.Array.indexOf(g,d)-1;e>-1;e--){b=g[e];if(b.query){a=b.query(c);a=a[a.length-1];if(a){return a}}if(b.is(c)){return b}}return f.previousNode(c,!0)}return null},previousSibling:function(c){var e=this.ownerCt,b,a,d;if(e){b=e.items;a=b.indexOf(this);if(a!==-1){if(c){for(--a;a>=0;a--){if((d=b.getAt(a)).is(c)){return d}}}else {if(a){return b.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;b.removeCls.apply(b,arguments);return a},removeClsWithUI:function(a,k){var b=this,d=[],e=0,g=Ext.Array,i=g.remove,j=b.uiCls=g.clone(b.uiCls),f=b.activeUI,h,c;if(typeof a==='string'){a=a.indexOf(' ')<0?[a]:Ext.String.splitWords(a)}h=a.length;for(e=0;e<h;e++){c=a[e];if(c&&b.hasUICls(c)){i(j,c);if(f){d=d.concat(b.removeUIClsFromElement(c))}}}if(k!==!0&&f){b.removeCls(d)}return d},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=!1;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(c,d,b){var a=this.getScrollable();if(a){a.scrollBy(c,d,b)}},scrollTo:function(c,d,b){var a=this.getScrollable();if(a){a.scrollTo(c,d,b)}},setAutoScroll:function(a){this.setScrollable(!!a);return this},setBorder:function(a,c){var b=this,d=!!c;if(b.rendered||d){if(!d){c=b.el}if(!a){a=0}else {if(a===!0){a='1px'}else {a=this.unitizeBox(a)}}c.setStyle('border-width',a);if(!d){b.updateLayout()}}b.border=a},setDock:function(c){var a=this,b=a.ownerCt;if(c!==a.dock){if(b&&b.moveDocked){b.moveDocked(a,c)}else {a.dock=c}}return a},setDisabled:function(a){return this[a?'disable':'enable']()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var a=this,b={target:a};if(a.rendered){if(c!==!1){if(Ext.isString(c)){b.msg=c}else {Ext.apply(b,c)}if(!a.loadMask||!a.loadMask.isLoadMask){if(d&&b.useTargetEl==null){b.useTargetEl=!0}a.loadMask=new Ext.LoadMask(b)}else {Ext.apply(a.loadMask,b)}if(a.loadMask.isVisible()){a.loadMask.syncMaskState()}else {a.loadMask.show()}}else {if(a.loadMask&&a.loadMask.isLoadMask){a.loadMask.hide()}}}return a.loadMask},setMargin:function(a,c){var b=this;if(b.rendered){if(!a&&a!==0){a=''}else {if(a===!0){a=5}a=this.unitizeBox(a)}b.margin=a;b.margin$=null;b.getEl().setStyle('margin',a);if(!c){b.updateLayout(b._notAsLayoutRoot)}}else {b.margin=a}},setOverflowXY:function(a,b){this.setScrollable({x:a&&a!=='hidden'?a:!1,y:b&&b!=='hidden'?b:!1});return this},setPagePosition:function(a,c,f){var b=this,d,e;if(Ext.isArray(a)){c=a[1];a=a[0]}b.pageX=a;b.pageY=c;if(b.floating){if(b.isContainedFloater()){e=b.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(e.left)){a-=e.left}if(Ext.isNumber(c)&&Ext.isNumber(e.top)){c-=e.top}}else {d=b.el.translateXY(a,c);a=d.x;c=d.y}b.setPosition(a,c,f)}else {d=b.el.translateXY(a,c);b.setPosition(d.x,d.y,f)}return b},setPosition:function(b,c,e){var a=this,d=a.beforeSetPosition.apply(a,arguments);if(d&&a.rendered){b=d.x;c=d.y;if(e){if(b!==a.getLocalX()||c!==a.getLocalY()){a.stopAnimation();a.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(a.afterSetPosition,a,[b,c])},to:{left:b,top:c}},e))}}else {a.setLocalXY(b,c);a.afterSetPosition(b,c)}}return a},setScrollX:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(c,null,b)}},setScrollY:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(null,c,b)}},setSize:function(b,c){var a=this,g=a.width,f=a.height,e,d;if(b&&typeof b==='object'){c=b.height;b=b.width}if(typeof b==='number'){a.width=Ext.Number.constrain(b,a.minWidth,a.maxWidth)}else {if(b===null){delete a.width}else {if(typeof b==='string'){e=!0;a.width=b}}}if(typeof c==='number'){a.height=Ext.Number.constrain(c,a.minHeight,a.maxHeight)}else {if(c===null){delete a.height}else {if(typeof c==='string'){d=!0;a.height=c}}}if(a.rendered&&a.isVisible()){if(g!==a.width||f!==a.height){if(a.liquidLayout||e||d){a.el.setSize(a.width,a.height)}a.updateLayout(a._notAsLayoutRoot)}}return a},setStyle:function(b,a){var c=this.el||this.protoEl;c.setStyle(b,a);return this},setUI:function(c){var a=this,e=a.uiCls,d=a.activeUI,b;if(c===d){return}if(d){b=a.removeClsWithUI(e,!0);if(b.length){a.removeCls(b)}a.removeUIFromElement()}else {a.uiCls=[]}a.ui=c;a.activeUI=c;a.addUIToElement();b=a.addClsWithUI(e,!0);if(b.length){a.addCls(b)}if(a.rendered){a.updateLayout()}},setVisible:function(a){return this[a?'show':'hide']()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(c,e,d){var a=this,b=a.rendered;if(a.hierarchicallyHidden||a.floating&&!b&&a.isHierarchicallyHidden()){if(!b){a.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;a.pendingShow=arguments}else {a.pendingShow=!0}}else {if(b&&a.isVisible()){if(a.floating){a.onFloatShow()}}else {if(a.fireEvent('beforeshow',a)!==!1){a.hidden=!1;delete this.getInherited().hidden;Ext.suspendLayouts();if(!b&&(a.autoRender||a.floating)){a.doAutoRender();b=a.rendered}if(b){a.beforeShow();Ext.resumeLayouts();a.onShow.apply(a,arguments);a.afterShow.apply(a,arguments)}else {Ext.resumeLayouts(!0)}}else {a.onShowVeto()}}}return a},showAt:function(b,c,d){var a=this;if(!a.rendered&&(a.autoRender||a.floating)){a.x=b;a.y=c;return a.show()}if(a.floating){a.setPosition(b,c,d)}else {a.setPagePosition(b,c,d)}return a.show()},showBy:function(b,d,c){var a=this;if(a.floating&&b){a.alignTarget=b;if(d){a.defaultAlign=d}if(c){a.alignOffset=c}a.show();if(!a.hidden){a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)}}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=!0}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(!1)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(c,b){var a=this.getRefOwner(),f=typeof b==='string',g=typeof b==='number',e=b&&b.isComponent,d=0;if(c){for(;a;a=a.getRefOwner()){d++;if(c.isComponent){if(a===c){return a}}else {if(Ext.ComponentQuery.is(a,c)){return a}}if(f&&a.is(b)){return}if(g&&d===b){return}if(e&&a===b){return}}}return a},update:function(b,i,k,j){var a=this,h=a.tpl&&!Ext.isString(b),g=a.getScrollable(),f=a.focusableContainer,e,c,d;if(h){a.data=b&&b.isEntity?b.getData(!0):b}else {a.html=Ext.isObject(b)?Ext.DomHelper.markup(b):b}if(a.rendered){e=a.getSizeModel();c=e.width.shrinkWrap||e.height.shrinkWrap;if(a.isContainer){d=a.layout.getRenderTarget();c=c||a.items.items.length>0}else {d=a.touchScroll?a.getScrollerEl():a.getTargetEl()}if(h){a.tpl[a.tplWriteMode](d,a.data||{})}else {d.setHtml(a.html,i,k,j||a)}if(c){a.updateLayout()}if(g){g.refresh(!0)}if(f){f.onFocusableChildUpdate(a)}}},setHtml:function(c,a,b){this.update(c,a,null,b)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(b){var a=this,e,d=a.lastBox,c=b&&b.isRoot;if(d){d.invalid=!0}if(!a.rendered||a.layoutSuspendCount||a.suspendLayout){return}if(a.hidden){Ext.Component.cancelLayout(a)}else {if(typeof c!=='boolean'){c=a.isLayoutRoot()}}if(c||!a.ownerLayout||!a.ownerLayout.onContentChange(a)){if(!a.isLayoutSuspended()){e=b&&b.hasOwnProperty('defer')?b.defer:a.deferLayouts;Ext.Component.updateLayout(a,e)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,'min','max-height','height')},updateMaxWidth:function(b,a){this.changeConstraint(b,a,'min','max-width','width')},updateMinHeight:function(b,a){this.changeConstraint(b,a,'max','min-height','height')},updateMinWidth:function(b,a){this.changeConstraint(b,a,'max','min-width','width')},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(b,a){this.el.setX(b,a)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var a=this,d=a.baseCls+'-'+a.ui,e,c,f,b;a.addCls(d);if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){f=a[c];if(f){f.addCls(d+b)}}}}},changeConstraint:function(b,g,f,c,d){var a=this,e=a[d];if(b!=null&&typeof e==='number'){a[d]=Math[f](e,b)}if(a.liquidLayout){if(b!=null){a.setStyle(c,b+'px')}else {if(g){a.setStyle(c,'')}}}if(a.rendered){a.updateLayout()}},constructPlugin:function(a){var b=this;if(typeof a==='string'){a=Ext.PluginManager.create({},a,b)}else {a=Ext.PluginManager.create(a,null,b)}return a},constructPlugins:function(){var d=this,a=d.plugins,c,b,e;if(a){c=[];c.processed=!0;if(!Ext.isArray(a)){a=[a]}for(b=0,e=a.length;b<e;b++){c[b]=d.constructPlugin(a[b])}}d.pluginsInitialized=!0;return c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=!0},doAddListener:function(h,e,i,b,n,m,l){var a=this,c,g,j,d,f,k;if(Ext.isObject(e)||b&&b.element){if(b.element){d=b.element;c={};c[h]=e;if(i){c.scope=i}j=a.$elementEventOptions;for(g in b){if(j[g]){c[g]=b[g]}}}else {c=e;d=h}f=a[d];if(f&&f.isObservable){a.mon(f,c)}else {a.afterRenderEvents=a.afterRenderEvents||{};if(!a.afterRenderEvents[d]){a.afterRenderEvents[d]=[]}a.afterRenderEvents[d].push(c)}return}if(b){k=b.delegate;if(k){a.mixins.componentDelegation.addDelegatedListener.call(a,h,e,i,b,n,m,l);return}}a.mixins.observable.doAddListener.call(a,h,e,i,b,n,m,l)},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c);a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=!0;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e=this,d=e.getScrollable(),f=e._scrollFlags,b,c,a;if(d){b=d.getX();if(b===!0){b='auto'}c=d.getY();if(c===!0){c='auto'}a=f[b][c]}else {a=f.none}e.scrollFlags=a;return {overflowX:a.overflowX,overflowY:a.overflowY}},getPlugins:function(){var a=this.plugins;a=a&&a.processed?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy('x-proxy-el',b,!0)}return a.proxy},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return 'x-'+this.getTdType()+'-'+this.ui+'-cell'},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var a=this,b=[a.baseCls],c=a.getComponentLayout().targetCls;if(c){b.push(c)}if(a.componentCls){b.push(a.componentCls)}else {a.componentCls=a.baseCls}return b},initDraggable:function(){var a=this,c=a.resizer&&a.resizer.el!==a.el?a.resizerComponent=new Ext.Component({el:a.resizer.el,rendered:!0,container:a.container}):a,b=Ext.applyIf({el:c.getDragEl(),constrainTo:a.constrain||a.draggable.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):undefined},a.draggable);if(a.constrain||a.constrainDelegate){b.constrain=a.constrain;b.constrainDelegate=a.constrainDelegate}a.dd=new Ext.util.ComponentDragger(c,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.touchScroll||a.layout&&a.layout.managePadding&&a.contentPaddingProperty==='padding'){c.setStyle('padding',0)}else {c.setStyle('padding',this.unitizeBox(b===!0?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(b){var a=this;b=Ext.apply({target:a,dynamic:!1,constrainTo:a.constrain||b&&b.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):undefined,handles:a.resizeHandles},b);b.target=a;a.resizer=new Ext.resizer.Resizer(b)},initStyles:function(b){var a=this,g=a.margin,j=a.border,i=a.cls,h=a.style,e=a.x,f=a.y,k=a.liquidLayout,d,c;a.initPadding(b);if(g!=null){b.setStyle('margin',this.unitizeBox(g===!0?5:g))}if(j!=null){a.setBorder(j,b)}if(i&&i!==a.initialCls){b.addCls(i);a.cls=a.initialCls=null}if(h&&h!==a.initialStyle){b.setStyle(h);a.style=a.initialStyle=null}if(e!=null){b.setStyle(a.horizontalPosProp,typeof e==='number'?e+'px':e)}if(f!=null){b.setStyle('top',typeof f==='number'?f+'px':f)}if(!a.ownerCt||a.floating){if(Ext.scopeCss){b.addCls(a.rootCls)}b.addCls(a.borderBoxCls)}if(k||!a.getFrameInfo()){d=a.width;c=a.height;if(d!=null){if(typeof d==='number'){b.setStyle('width',d+'px')}else {b.setStyle('width',d)}}if(c!=null){if(typeof c==='number'){b.setStyle('height',c+'px')}else {b.setStyle('height',c)}}}},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(b){if(b.isContainer){for(var a=this.ownerCt;a;a=a.ownerCt){if(a===b){return !0}}}return !1},owns:function(a){var c=!1,b;if(a.isEvent){a=a.target}else {if(a.isElement){a=a.dom}}b=Ext.Component.fromElement(a);if(b){c=b===this||!!b.up(this)}return c},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=!1},refreshScroll:function(){var a=this.getScrollable();if(a){a.refresh()}},removeManagedListenerItem:function(d,a,h,g,f,e){var c=this,b=a.options?a.options.element:null;if(b){b=c[b];if(b&&b.un){if(d||a.item===h&&a.ename===g&&(!f||a.fn===f)&&(!e||a.scope===e)){b.un(a.ename,a.fn,a.scope);if(!d){Ext.Array.remove(c.managedListeners,a)}}}}else {return c.mixins.observable.removeManagedListenerItem.apply(c,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var a=this,d=a.baseCls+'-'+a.ui,e,c,f,b;a.removeCls(d);if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){f=a[c];if(f){f.removeCls(d+b)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!==b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(d){var a=this,b=a.getInherited(),c=a.zIndexManager;a.hidden=d;if(d){b.hidden=!0}else {delete b.hidden}if(c){c.onComponentShowHide(a)}},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(c){var a=this,b=a.el;if(!b||!b.isElement){a.el=Ext.get(c)}if(a.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:'addCls',doComponentLayout:function(){this.updateLayout();return this},removeClass:'removeCls',forceComponentLayout:'updateLayout',setDocked:'setDock'}}}},1,['box','component'],['component','box'],{'component':!0,'box':!0},['widget.box','widget.component'],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext,'Component',Ext,'AbstractComponent'],function(a){var b=a.prototype;(b.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(b.$eventOptions=Ext.Object.chain(b.$eventOptions)).delegate=1;a.createAlias({on:'addListener',prev:'previousSibling',next:'nextSibling'});Ext.resumeLayouts=function(b){a.resumeLayouts(b)};Ext.suspendLayouts=function(){a.suspendLayouts()};Ext.batchLayouts=function(c,b){a.suspendLayouts();c.call(b);a.resumeLayouts(!0)};Ext.setGlyphFontFamily=function(b){Ext._glyphFontFamily=b};a.hierarchyEventSource=b.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(a.ariaHighContrastModeCls)}})});Ext.define('Ext.layout.container.border.Region',{override:'Ext.Component',initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=!0;a.addStateEvents(['changeregion','changeweight']);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,'region');b=a.addPropertyToState(b,'weight');return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return a&&a.isBorderLayout?a:null},setRegion:function(c){var a=this,f,g=a.region;if(c!==g){f=a.getOwningBorderLayout();if(f){var k=f.regionFlags[c],j=a.placeholder,b=a.splitter,i=f.owner,m=f.regionMeta,l=a.collapsed||a.floated,h,e,d;if(a.fireEventArgs('beforechangeregion',[a,c])===!1){return g}Ext.suspendLayouts();a.region=c;Ext.apply(a,k);if(a.updateCollapseTool){a.updateCollapseTool()}if(b){Ext.apply(b,k);b.updateOrientation();e=i.items;d=e.indexOf(a);if(d>=0){h=m[c].splitterDelta;if(e.getAt(d+h)!==b){e.remove(b);d=e.indexOf(a);if(h>0){++d}e.insert(d,b)}}}if(j){if(l){a.expand(!1)}i.remove(j);a.placeholder=null;if(l){a.collapse(null,!1)}}i.updateLayout();Ext.resumeLayouts(!0);a.fireEventArgs('changeregion',[a,g])}else {a.region=c}}return g},setWeight:function(b){var a=this,e=a.getOwningBorderContainer(),d=a.placeholder,c=a.weight;if(b!==c){if(a.fireEventArgs('beforechangeweight',[a,b])!==!1){a.weight=b;if(d){d.weight=b}if(e){e.updateLayout()}a.fireEventArgs('changeweight',[a,c])}}return c}},function(b){var a=b.prototype;a.setBorderRegion=a.setRegion;a.setRegionWeight=a.setWeight});Ext.define('Ext.rtl.Component',{override:'Ext.Component',applyScrollable:function(c,b){var a=arguments.callee.$previous.call(this,c,b);if(a&&this.getInherited().rtl){a.setRtl(!0)}return a},convertPositionSpec:function(a){if((Ext.rootInheritedState.rtl||!1)!==(this.getInherited().rtl||!1)){a=a.replace(/l/g,'tmp').replace(/r/g,'l').replace(/tmp/g,'r')}return a},getAnchorToXY:function(a,h,f,i){var g=document,e,d,b,c;if(a.dom===g.body||a.dom===g){d=Ext.rootInheritedState.rtl?a.rtlGetScroll():a.getScroll();b=d.left;c=d.top}else {e=a.getXY();b=f?0:e[0];c=f?0:e[1]}return a.calculateAnchorXY(h,b,c,i)},getBorderPadding:function(){var a=this.el.getBorderPadding(),b;if(this.isParentRtl()){b=a.xBegin;a.xBegin=a.xEnd;a.xEnd=b}return a},getLocalX:function(){return this.isLocalRtl()?this.el.rtlGetLocalX():this.el.getLocalX()},getLocalXY:function(){return this.isLocalRtl()?this.el.rtlGetLocalXY():this.el.getLocalXY()},unitizeBox:function(a){if(this.getInherited().rtl){return Ext.dom.Element.rtlUnitizeBox(a)}else {return arguments.callee.$previous.apply(this,arguments)}},initInheritedState:function(b){arguments.callee.$previous.apply(this,arguments);var a=this.rtl;if(a!==undefined){b.rtl=a}},isLocalRtl:function(){var a=this,c,b;if(a.floating){if(a._isOffsetParentRtl===undefined){b=this.el.dom.offsetParent||this.el.dom.parentNode;if(b){a._isOffsetParentRtl=Ext.fly(b,'_isLocalRtl').isStyle('direction','rtl')}}c=!!a._isOffsetParentRtl}else {c=this.isParentRtl()}return c},isParentRtl:function(){var d=this,a=d.getInherited(),c=!1,b;if(a.hasOwnProperty('rtl')){b=a.rtl;delete a.rtl}if(a.rtl){c=!0}if(b!==undefined){a.rtl=b}return c},setLocalX:function(a){return this.isLocalRtl()?this.el.rtlSetLocalX(a):this.el.setLocalX(a)},setLocalXY:function(a,b){return this.isLocalRtl()?this.el.rtlSetLocalXY(a,b):this.el.setLocalXY(a,b)},isOppositeRootDirection:function(){return !this.getInherited().rtl!==!Ext.rootInheritedState.rtl},privates:{initStyles:function(){if(this.getInherited().rtl){this.horizontalPosProp='right'}arguments.callee.$previous.apply(this,arguments)},parseBox:function(a){if(this.getInherited().rtl){return Ext.dom.Element.rtlParseBox(a)}else {return arguments.callee.$previous.apply(this,arguments)}}}},function(){Ext.onInternalReady(function(){if(Ext.fly(document.documentElement).isStyle('direction','rtl')||Ext.getBody().isStyle('direction','rtl')){Ext.rootInheritedState.rtl=!0}})});Ext.define('Ext.theme.neptune.Component',{override:'Ext.Component',initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=!1}},privates:{initStyles:function(){var a=this,b=a.hasOwnProperty('border'),c=a.border;if(a.dock){a.border=null}arguments.callee.$previous.apply(this,arguments);if(b){a.border=c}else {delete a.border}}}},function(){Ext.namespace('Ext.theme.is').Neptune=!0;Ext.theme.name='Neptune'});Ext.define('Ext.theme.triton.Component',{override:'Ext.Component'},function(){Ext.namespace('Ext.theme.is').Triton=!0;Ext.theme.name='Triton'});Ext.cmd.derive('Deft.log.Logger',Ext.Base,{alternateClassName:['Deft.Logger'],singleton:!0,log:function(b,a){if(a==null){a='info'}},verbose:function(a){this.log(a,'verbose')},info:function(a){this.log(a,'info')},deprecate:function(a){this.log(a,'deprecate')},warn:function(a){this.log(a,'warn')},error:function(a){this.log(a,'error')}},0,0,0,0,0,0,[Deft.log,'Logger',Deft,'Logger'],function(){if(Ext.getVersion('extjs')!=null){this.log=function(b,a){if(a==null){a='info'}if(a==='verbose'){a='info'}if(a==='deprecate'){a='warn'}Ext.log({msg:b,level:a})}}else {this.log=function(b,a){if(a==null){a='info'}if(Ext.Logger!=null&&Ext.isFunction(Ext.Logger.log)){Ext.Logger.log(b,a)}}}});Ext.cmd.derive('Ext.data.SortTypes',Ext.Base,{singleton:!0,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return a!=null?String(a).replace(this.stripTagsRe,''):'\x00'},asUCText:function(a){return a!=null?String(a).toUpperCase().replace(this.stripTagsRe,''):'\x00'},asUCString:function(a){return a!=null?String(a).toUpperCase():'\x00'},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(b){var a=parseFloat(String(b).replace(this.stripCommasRe,''));return isNaN(a)?0:a},asInt:function(b){var a=parseInt(String(b).replace(this.stripCommasRe,''),10);return isNaN(a)?0:a}},0,0,0,0,0,0,[Ext.data,'SortTypes'],0);Ext.cmd.derive('Ext.data.Types',Ext.Base,{singleton:!0},0,0,0,0,0,0,[Ext.data,'Types'],function(a){var b=Ext.data.SortTypes;Ext.apply(a,{stripRe:/[\$,%]/g,AUTO:{sortType:b.none,type:'auto'},STRING:{convert:function(b){var c=this.getAllowNull()?null:'';return b===undefined||b===null?c:String(b)},sortType:b.asUCString,type:'string'},INT:{convert:function(b){if(typeof b==='number'){return parseInt(b,10)}return b!==undefined&&b!==null&&b!==''?parseInt(String(b).replace(a.stripRe,''),10):this.getAllowNull()?null:0},sortType:b.none,type:'int'},FLOAT:{convert:function(b){if(typeof b==='number'){return b}return b!==undefined&&b!==null&&b!==''?parseFloat(String(b).replace(a.stripRe,''),10):this.getAllowNull()?null:0},sortType:b.none,type:'float'},BOOL:{convert:function(b){if(typeof b==='boolean'){return b}if(this.getAllowNull()&&(b===undefined||b===null||b==='')){return null}return b==='true'||b==1},sortType:b.none,type:'bool'},DATE:{convert:function(b){var d=this.getDateReadFormat()||this.getDateFormat(),c;if(!b){return null}if(b instanceof Date){return b}if(d){return Ext.Date.parse(b,d)}c=Date.parse(b);return c?new Date(c):null},sortType:b.asDate,type:'date'}});a.BOOLEAN=a.BOOL;a.INTEGER=a.INT;a.NUMBER=a.FLOAT});Ext.cmd.derive('Ext.form.Labelable',Ext.Mixin,{isLabelable:!0,mixinConfig:{id:'labelable',on:{beforeRender:'beforeLabelRender',onRender:'onLabelRender'}},config:{childEls:['labelEl','bodyEl','errorEl','errorWrapEl','ariaErrorEl']},labelableRenderTpl:['{beforeLabelTpl}','<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">','{beforeLabelTextTpl}','<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>','</tpl>','{afterLabelTextTpl}','</span>','</label>','{afterLabelTpl}','<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{beforeBodyEl}','{beforeSubTpl}','{[values.$comp.getSubTplMarkup(values)]}','{afterSubTpl}','{afterBodyEl}','<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="x-hidden-clip">','</div>','</div>','<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">','</div>','</div>','</tpl>',{disableFormats:!0}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>','</ul>','</tpl>'],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>','</tpl>'],isFieldLabelable:!0,formItemCls:'x-form-item',labelCls:'x-form-item-label',topLabelCls:'x-form-item-label-top',rightLabelCls:'x-form-item-label-right',labelInnerCls:'x-form-item-label-inner',topLabelSideErrorCls:'x-form-item-label-top-side-error',errorMsgCls:'x-form-error-msg',errorWrapCls:'x-form-error-wrap',errorWrapSideCls:'x-form-error-wrap-side',errorWrapUnderCls:'x-form-error-wrap-under',errorWrapUnderSideLabelCls:'x-form-error-wrap-under-side-label',baseBodyCls:'x-form-item-body',invalidIconCls:'x-form-invalid-icon',invalidUnderCls:'x-form-invalid-under',noLabelCls:'x-form-item-no-label',fieldBodyCls:'',invalidCls:'x-form-invalid',fieldLabel:undefined,labelAlign:'left',labelWidth:100,labelPad:5,labelSeparator:':',hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:'qtip',msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,labelableInsertions:['beforeBodyEl','afterBodyEl','beforeLabelTpl','afterLabelTpl','beforeSubTpl','afterSubTpl','beforeLabelTextTpl','afterLabelTextTpl','labelAttrTpl'],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:'ext-form-error-tip',ui:'form-invalid'};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor='top';a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create('Ext.tip.QuickTip',a);c=Ext.apply({},b.tagConfig);c.attribute='errorqtip';b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(Ext.isIE8){a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)}if(!a.activeErrorsTpl){if(a.msgTarget==='title'){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else {a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+'-'+a.ui]);a.lastActiveError='';a.enableBubble('errorchange')},trimLabelSeparator:function(){var b=this,c=b.labelSeparator,a=b.fieldLabel||'',d=a.substr(a.length-1);return d===c?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(b){b=b||'';var a=this,f=a.labelSeparator,h=a.labelEl,c=a.errorWrapEl,g=a.labelAlign!=='top',e=a.noLabelCls,d=a.errorWrapUnderSideLabelCls;a.fieldLabel=b;if(a.rendered){if(Ext.isEmpty(b)&&a.hideEmptyLabel){a.addCls(e);if(g&&c){c.removeCls(d)}}else {if(f){b=a.trimLabelSeparator()+f}h.dom.firstChild.innerHTML=b;a.removeCls(e);if(g&&c){c.addCls(d)}}a.updateLayout()}},setHideLabel:function(b){var a=this;if(b!==a.hideLabel){a.hideLabel=b;if(a.rendered){a[b?'addCls':'removeCls'](a.noLabelCls);a.updateLayout()}}},setHideEmptyLabel:function(b){var a=this,c;if(b!==a.hideEmptyLabel){a.hideEmptyLabel=b;if(a.rendered&&!a.hideLabel){c=b&&!a.getFieldLabel();a[c?'addCls':'removeCls'](a.noLabelCls);a.updateLayout()}}},getInsertionRenderData:function(c,d){var e=d.length,b,a;while(e--){b=d[e];a=this[b];if(a){if(typeof a!=='string'){if(!a.isTemplate){a=Ext.XTemplate.getTpl(this,b)}a=a.apply(c)}}c[b]=a||''}return c},getLabelableRenderData:function(){var a=this,l=a.labelAlign,o=l==='top',r=l==='right',c=a.msgTarget==='side',h=a.msgTarget==='under',q=a.errorMsgCls,b=a.labelPad,m=a.labelWidth,d=a.labelClsExtra||'',j=c?a.errorWrapSideCls:a.errorWrapUnderCls,g='',f='',p=a.hasVisibleLabel(),k=a.autoFitErrors,e=a.defaultBodyWidth,n,i;if(o){d+=' '+a.topLabelCls;if(b){f='padding-bottom:'+b+'px;'}if(c&&!k){d+=' '+a.topLabelSideErrorCls}}else {if(r){d+=' '+a.rightLabelCls}if(b){g+=a.getHorizontalPaddingStyle()+b+'px;'}g+='width:'+(m+(b?b:0))+'px;';f='width:'+m+'px'}if(p){if(!o&&h){j+=' '+a.errorWrapUnderSideLabelCls}}if(e){n='min-width:'+e+'px;max-width:'+e+'px;'}i={id:a.id,inputId:a.getInputId(),labelCls:a.labelCls,labelClsExtra:d,labelStyle:g+(a.labelStyle||''),labelInnerStyle:f,labelInnerCls:a.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:n,baseBodyCls:a.baseBodyCls,fieldBodyCls:a.fieldBodyCls,extraFieldBodyCls:a.extraFieldBodyCls,errorWrapCls:a.errorWrapCls,errorWrapExtraCls:j,renderError:c||h,invalidMsgCls:c?a.invalidIconCls:h?a.invalidUnderCls:'',errorMsgCls:q,growCls:a.grow?a.growCls:'',tipAnchorTarget:a.id+'-inputEl',errorWrapStyle:c&&!k?'visibility:hidden':'display:none',fieldLabel:a.getFieldLabel(),labelSeparator:a.labelSeparator};a.getInsertionRenderData(i,a.labelableInsertions);return i},getHorizontalPaddingStyle:function(){return 'padding-right:'},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls('x-'+a.ownerLayout.type+'-form-item')}if(!a.hasVisibleLabel()){a.addCls(a.noLabelCls)}},onLabelRender:function(){var a=this,f={},e=Ext.Element,d=a.errorWrapEl,c,b;if(d){d.setVisibilityMode(a.msgTarget==='side'&&!a.autoFitErrors?e.VISIBILITY:e.DISPLAY)}if(a.extraMargins){c=a.el.getMargin();for(b in c){if(c.hasOwnProperty(b)){f['margin-'+b]=c[b]+a.extraMargins[b]+'px'}}a.el.setStyle(f)}},hasVisibleLabel:function(){if(this.hideLabel){return !1}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return ''},getInputId:function(){return ''},getActiveError:function(){return this.activeError||''},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(c){var a=this,h=a.errorWrapEl,b=a.msgTarget,g=b==='side',i=b==='qtip',e,d,j,f;c=Ext.Array.from(c);j=a.getTpl('activeErrorsTpl');a.activeErrors=c;d=a.activeError=j.apply({fieldLabel:a.fieldLabel,errors:c,listCls:'x-list-plain'});a.renderActiveError();if(a.rendered){e=a.getActionEl();if(g){a.errorEl.dom.setAttribute('data-errorqtip',d)}else {if(i){e.dom.setAttribute('data-errorqtip',d)}else {if(b==='title'){e.dom.setAttribute('title',d)}}}if(b!=='title'){a.ariaErrorEl.dom.innerHTML=c.join('. ');e.dom.setAttribute('aria-describedby',a.ariaErrorEl.id)}if(g||i){Ext.form.Labelable.initTip()}if(!a.msgTargets[b]){f=Ext.get(b);if(f){f.dom.innerHTML=d}}}if(h){h.setVisible(c.length>0);if(g&&a.autoFitErrors){a.labelEl.addCls(a.topLabelSideErrorCls)}a.updateLayout()}},unsetActiveError:function(){var a=this,e=a.errorWrapEl,b=a.msgTarget,f=a.restoreDisplay,c,d;if(a.hasActiveError()){delete a.activeError;delete a.activeErrors;a.renderActiveError();if(a.rendered){c=a.getActionEl();if(b==='qtip'){c.dom.removeAttribute('data-errorqtip')}else {if(b==='title'){c.dom.removeAttribute('title')}}if(b!=='title'){a.ariaErrorEl.dom.innerHTML='';c.dom.removeAttribute('aria-describedby')}if(!a.msgTargets[b]){d=Ext.get(b);if(d){d.dom.innerHTML=''}}if(e){e.hide();if(b==='side'&&a.autoFitErrors){a.labelEl.removeCls(a.topLabelSideErrorCls)}a.updateLayout();if(f){a.el.dom.style.display='block';a.restoreDisplay()}}}}},doRestoreDisplay:function(){var a=this.el;if(a&&a.dom){a.dom.style.display=''}},renderActiveError:function(){var a=this,b=a.getActiveError(),c=!!b;if(b!==a.lastActiveError){a.lastActiveError=b;a.fireEvent('errorchange',a,b)}if(a.rendered&&!a.destroyed&&!a.preventMark){a.toggleInvalidCls(c);if(a.errorEl){a.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?'addCls':'removeCls'](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,'Labelable'],function(){if(Ext.supports.Touch){this.prototype.msgTarget='side'}});Ext.define('Ext.rtl.form.Labelable',{override:'Ext.form.Labelable',getHorizontalPaddingStyle:function(){return this.getInherited().rtl?'padding-left:':'padding-right:'}});Ext.cmd.derive('Ext.form.field.Field',Ext.Base,{mixinId:'field',isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:'change',suspendCheckChange:0,dirty:!1,initField:function(){var a=this,b=a.valuePublishEvent,d,c;a.initValue();if(Ext.isString(b)){a.on(b,a.publishValue,a)}else {for(c=0,d=b.length;c<d;++c){a.on(b[c],a.publishValue,a)}}},initValue:function(){var a=this;if('value' in a){a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--}a.initialValue=a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(a,b){return String(a)===String(b)},isEqualAsString:function(a,b){return String(Ext.valueFrom(a,''))===String(Ext.valueFrom(b,''))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=''+a.getValue()}return b},getModelData:function(d,c){var a=this,b=null;if(!a.disabled&&(a.submitValue||!c)){b={};b[a.getFieldIdentifier()]=a.getValue()}return b},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var a=this,b,c;if(!a.suspendCheckChange){b=a.getValue();c=a.lastValue;if(!a.destroyed&&a.didValueChange(b,c)){a.lastValue=b;a.fireEvent('change',a,b,c);a.onChange(b,c)}}},didValueChange:function(a,b){return !this.isEqual(a,b)},onChange:function(b){var a=this;if(a.validateOnChange){a.validate()}a.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState('value',a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent('dirtychange',a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(e){var b=[],d=this.getValidationField(),a=this.getValidation(),c;if(d){c=d.validate(e);if(c!==!0){b.push(c)}}if(a&&a!==!0){b.push(a)}return b},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(a){var b=this;if(a!==b.wasValid){b.wasValid=a;b.fireEvent('validitychange',b,a)}return a},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return !1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(b,a){if(a){this.validate()}},privates:{resetToInitialValue:function(){var a=this,b=a.originalValue;a.originalValue=a.initialValue;a.reset();a.originalValue=b}}},0,0,0,0,0,0,[Ext.form.field,'Field'],0);Ext.cmd.derive('Ext.form.field.Base',Ext.Component,{alternateClassName:['Ext.form.Field','Ext.form.BaseField'],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:'value',autoEl:{role:'presentation'},subTplInsertions:['inputAttrTpl'],childEls:['inputEl'],inputType:'text',isTextInput:!0,invalidText:'The value in this field is invalid',fieldCls:'x-form-field',focusCls:'form-focus',dirtyCls:'x-form-dirty',checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?['change','propertychange','keyup']:['change','input','textInput','keyup','dragdrop'],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:'x-form-readonly',validateOnBlur:!0,hasFocus:!1,baseCls:'x-field',fieldBodyCls:'x-field-body',maskOnDisable:!1,stretchInputElFixed:!0,ariaEl:'inputEl',initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();a.initDefaultName();if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls('x-form-type-'+a.inputType)},initDefaultName:function(){var a=this;if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+'-inputEl')},getSubTplData:function(f){var a=this,e=a.inputType,d=a.getInputId(),b,c;b=Ext.apply({ui:a.ui,id:d,cmpId:a.id,name:a.name||d,disabled:a.disabled,readOnly:a.readOnly,value:a.getRawValue(),type:e,fieldCls:a.fieldCls,fieldStyle:a.getFieldStyle(),childElCls:f.childElCls,tabIdx:a.tabIndex,inputCls:a.inputCls,typeCls:'x-form-'+(a.isTextInput?'text':e)},a.subTplData);if(a.ariaRole){c={role:a.ariaRole,'aria-hidden':!!a.hidden,'aria-disabled':!!a.disabled,'aria-readonly':!!a.readOnly,'aria-invalid':!1};if(a.ariaLabel){c['aria-label']=a.ariaLabel}if(a.format&&a.formatText&&!b.title){c.title=Ext.String.formatEncode(a.formatText,a.format)}b.inputElAriaAttributes=Ext.apply(c,a.getAriaAttributes())}a.getInsertionRenderData(b,a.subTplInsertions);return b},getSubTplMarkup:function(f){var b=this,c=b.getSubTplData(f),e=b.getTpl('preSubTpl'),d=b.getTpl('postSubTpl'),a='';if(e){a+=e.apply(c)}a+=b.getTpl('fieldSubTpl').apply(c);if(d){a+=d.apply(c)}return a},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(b){var c=this,a=c.inputEl;if(a){a.applyStyles(b)}c.fieldStyle=b},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,!0):a||''},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==='file'},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var a=this,b=a.inputEl?a.inputEl.getValue():Ext.valueFrom(a.rawValue,'');a.rawValue=b;return b},setRawValue:function(b){var a=this,c=a.rawValue;if(!a.transformRawValue.$nullFn){b=a.transformRawValue(b)}b=Ext.valueFrom(b,'');if(c===undefined||c!==b||a.valueContainsPlaceholder){a.rawValue=b;if(a.inputEl){a.bindChangeEvents(!1);a.inputEl.dom.value=b;a.bindChangeEvents(!0)}if(a.rendered&&a.reference){a.publishState('rawValue',b)}}return b},transformRawValue:Ext.identityFn,valueToRaw:function(a){return ''+Ext.valueFrom(a,'')},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=!0;if(a.hasActiveError()){a.clearInvalid();a.hadErrorOnDisable=!0}}if(a.wasValid===!1){a.checkValidityChange(!0)}},onEnable:function(){var a=this,b=a.inputEl,d=a.preventMark,c;Ext.Component.prototype.onEnable.call(this);if(b){b.dom.disabled=!1}if(a.wasValid!==undefined){a.forceValidation=!0;a.preventMark=!a.hadErrorOnDisable;c=a.isValid();a.forceValidation=!1;a.preventMark=d;a.checkValidityChange(c)}delete a.hadErrorOnDisable},setReadOnly:function(b){var a=this,c=a.inputEl,d=a.readOnly;b=!!b;a[b?'addCls':'removeCls'](a.readOnlyCls);a.readOnly=b;if(c){c.dom.readOnly=b;a.ariaEl.dom.setAttribute('aria-readonly',b)}else {if(a.rendering){a.setReadOnlyOnBoxReady=!0}}if(b!==d){a.fireEvent('writeablechange',a,b)}},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent('specialkey',this,a)}},initEvents:function(){var a=this,d=a.inputEl,f=a.onFieldMutation,e=a.checkChangeEvents,g=e.length,c,b;if(d){a.mon(d,Ext.supports.SpecialKeyDownRepeat?'keydown':'keypress',a.fireKey,a);for(c=0;c<g;++c){b=e[c];if(b==='propertychange'){a.usesPropertychange=!0}if(b==='textInput'){a.usesTextInput=!0}a.mon(d,b,f,a)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(a){if(!this.readOnly&&!(a.type==='propertychange'&&this.ignoreChangeRe.test(a.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var a=this,b=a.checkChangeTask;if(!b){a.checkChangeTask=b=new Ext.util.DelayedTask(a.doCheckChangeTask,a)}if(!a.bindNotifyListener){a.bindNotifyListener=Ext.on('beforebindnotify',a.onBeforeNotify,a,{destroyable:!0})}b.delay(a.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;if(a){a.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState('value',a.getValue())}},onDirtyChange:function(b){var a=this;a[b?'addCls':'removeCls'](a.dirtyCls);if(a.rendered&&a.reference){a.publishState('dirty',b)}},isValid:function(){var a=this,b=a.disabled,c=a.forceValidation||!b;return c?a.validateValue(a.processRawValue(a.getRawValue())):b},validateValue:function(d){var a=this,c=a.getErrors(d),b=Ext.isEmpty(c);if(!a.preventMark){if(b){a.clearInvalid()}else {a.markInvalid(c)}}return b},markInvalid:function(d){var a=this,c=a.ariaEl.dom,e=a.getActiveError(),b;a.setActiveErrors(Ext.Array.from(d));b=a.getActiveError();if(e!==b){a.setError(b);if(!a.ariaStaticRoles[a.ariaRole]&&c){c.setAttribute('aria-invalid',!0)}}},clearInvalid:function(){var a=this,b=a.ariaEl.dom,c=a.hasActiveError();delete a.hadErrorOnDisable;a.unsetActiveError();if(c){a.setError('');if(!a.ariaStaticRoles[a.ariaRole]&&b){b.setAttribute('aria-invalid',!1)}}},setError:function(d){var a=this,b=a.msgTarget,c;if(a.rendered){if(b==='title'||b==='qtip'){c=b==='qtip'?'data-errorqtip':'title';a.getActionEl().dom.setAttribute(c,d||'')}else {a.updateLayout()}}},renderActiveError:function(){var a=this,c=a.hasActiveError(),b=a.invalidCls+'-field';if(a.inputEl){a.inputEl[c?'addCls':'removeCls']([b,b+'-'+a.ui])}a.mixins.labelable.renderActiveError.call(a)},beforeDestroy:function(){var a=this,b=a.checkChangeTask;if(b){b.cancel()}a.checkChangeTask=a.bindNotifyListener=Ext.destroy(a.bindNotifyListener);Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(f,b){var d=this,e=b&&b.value,a,c;a=Ext.Component.prototype.applyBind.call(this,f,b);if(a){c=a.value;d.hasBindingValue=!!c;if(c!==e&&d.getInherited().modelValidation){d.updateValueBinding(a)}}return a},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},bindChangeEvents:function(c){var b=c?'resumeEvent':'suspendEvent',a=this.inputEl;if(this.usesPropertychange){a[b]('propertychange')}if(this.usesTextInput){a[b]('textInput')}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty('renderTpl')){a.renderTpl=a.getTpl('labelableRenderTpl')}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(b){var d=this,a=b.value,c=b.$fieldBinding;if(c){c.destroy();b.$fieldBinding=null}if(a&&a.bindValidationField){d.fieldBinding=a.bindValidationField('setValidationField',d)}}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1);this.callParent(arguments);this.bindChangeEvents(!0)}}}}},0,['field'],['component','box','field'],{'component':!0,'box':!0,'field':!0},['widget.field'],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,'Base',Ext.form,'Field',Ext.form,'BaseField'],0);Ext.cmd.derive('Ext.form.field.VTypes',Ext.Base,function(){var b=/^[a-zA-Z_]+$/,a=/^[a-zA-Z0-9_]+$/,c=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,d=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return {singleton:!0,alternateClassName:'Ext.form.VTypes','email':function(a){return c.test(a)},'emailText':'This field should be an e-mail address in the format "user@example.com"','emailMask':/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,'url':function(a){return d.test(a)},'urlText':'This field should be a URL in the format "http://www.example.com"','alpha':function(a){return b.test(a)},'alphaText':'This field should only contain letters and _','alphaMask':/[a-z_]/i,'alphanum':function(b){return a.test(b)},'alphanumText':'This field should only contain letters, numbers and _','alphanumMask':/[a-z0-9_]/i}}(),0,0,0,0,0,0,[Ext.form.field,'VTypes',Ext.form,'VTypes'],0);Ext.cmd.derive('Ext.util.ClickRepeater',Ext.util.Observable,{constructor:function(c,b){var a=this;a.el=Ext.get(c);a.el.unselectable();Ext.apply(a,b);Ext.util.Observable.prototype.constructor.call(this);if(!a.disabled){a.disabled=!0;a.enable()}if(a.handler){a.on('click',a.handler,a.scope||a)}},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){if(this.disabled){this.el.on('mousedown',this.handleMouseDown,this);if(Ext.isIE8){this.el.on('dblclick',this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on('click',this.eventOptions,this)}}this.disabled=!1},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un('mouseup',this.handleMouseUp,this);this.el.clearListeners()}this.disabled=!0},setDisabled:function(a){this[a?'disable':'enable']()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(!0);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(a){clearTimeout(this.timer);this.fireEvent('mousedown',this,a);this.fireEvent('click',this,a)},handleMouseDown:function(a){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on('mouseup',this.handleMouseUp,this);this.el.on('mouseout',this.handleMouseOut,this);this.fireEvent('mousedown',this,a);this.fireEvent('click',this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a]);if(this.mousedownPreventDefault){a.preventDefault()}if(this.mousedownStopEvent){a.stopEvent()}},click:function(a){this.fireEvent('click',this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(d,a,b,c){return d===c?a+b:b*(-Math.pow(2,-10*d/c)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on('mouseover',this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un('mouseover',this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un('mouseover',this.handleMouseReturn,this);this.el.un('mouseout',this.handleMouseOut,this);Ext.getDoc().un('mouseup',this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent('mouseup',this,a)}},1,0,0,0,0,0,[Ext.util,'ClickRepeater'],0);Ext.cmd.derive('Ext.form.trigger.Trigger',Ext.Base,{factoryConfig:{defaultType:'trigger'},repeatClick:!1,hidden:!1,hideOnReadOnly:undefined,weight:0,preventMouseDown:!0,baseCls:'x-form-trigger',focusCls:'x-form-trigger-focus',overCls:'x-form-trigger-over',clickCls:'x-form-trigger-click',validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>','{[values.$trigger.renderBody(values)]}','</div>'],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(c){var a=this,b;Ext.apply(a,c);if(a.compat4Mode){b=a.cls;a.focusCls=[a.focusCls,b+'-focus'];a.overCls=[a.overCls,b+'-over'];a.clickCls=[a.clickCls,b+'-click']}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el);a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=!0;if(a){a.hide()}},initEvents:function(){var a=this,b=a.isFieldEnabled,c=a.getStateEl(),d=a.el;c.addClsOnOver(a.overCls,b,a);c.addClsOnClick(a.clickCls,b,a);if(a.repeatClick){a.clickRepeater=new Ext.util.ClickRepeater(d,{preventDefault:!0,handler:a.onClick,listeners:{mousedown:a.onClickRepeaterMouseDown,scope:a},scope:a})}else {a.field.mon(d,{click:a.onClick,mousedown:a.onMouseDown,scope:a})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=!1;if(a.hidden||!c||!a.rendered||a.destroyed){b=!0}return !b},onClick:function(){var a=this,c=arguments,e=a.clickRepeater?c[1]:c[0],d=a.handler,b=a.field;if(d&&!b.readOnly&&a.isFieldEnabled()){Ext.callback(a.handler,a.scope,[b,a,e],0,b)}},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){if(a.pointerType!=='touch'&&!this.field.owns(Ext.Element.getActiveElement())){this.field.inputEl.focus()}if(this.preventMouseDown){a.preventDefault()}},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==='mousedown'){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var a=this,b=a.el=a.field.triggerWrap.selectNode('#'+a.domId,!1);b.setVisibilityMode(Ext.Element.DISPLAY);a.rendered=!0},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,'bodyTpl').apply(b):''},renderTrigger:function(b){var a=this,d=a.width,c=a.hidden?'display:none;':'';if(d){c+='width:'+d}return Ext.XTemplate.getTpl(a,'renderTpl').apply({$trigger:a,fieldData:b,ui:b.ui,childElCls:b.childElCls,triggerId:a.domId=a.field.id+'-trigger-'+a.id,cls:a.cls,triggerStyle:c,extraCls:a.extraCls,baseCls:a.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?'hide':'show']()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=!1;if(a){a.show()}}},1,0,0,0,['trigger.trigger'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,'Trigger'],0);Ext.cmd.derive('Ext.util.TextMetrics',Ext.Base,{statics:{shared:null,measure:function(d,e,c){var b=this,a=b.shared;if(!a){a=b.shared=new b(d,c)}a.bind(d);a.setFixedWidth(c||'auto');return a.getSize(e)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(c,b){var d=this,a=Ext.getBody().createChild({role:'presentation',cls:'x-textmetrics'});a.setVisibilityMode(1);d.measure=a;if(c){d.bind(c)}a.position('absolute');a.setLocalXY(-1000,-1000);a.hide();if(b){a.setWidth(b)}},getSize:function(c){var a=this.measure,b;a.setHtml(c);b=a.getSize();a.setHtml('');return b},bind:function(b){var a=this;a.el=Ext.get(b);a.measure.setStyle(a.el.getStyle(['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing','word-break']))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width='auto';return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure);a.callParent()}},1,0,0,0,0,0,[Ext.util,'TextMetrics'],function(){Ext.Element.override({getTextWidth:function(a,c,b){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(a,this.dom.innerHTML,!0)).width,c||0,b||1000000)}})});Ext.cmd.derive('Ext.form.field.Text',Ext.form.field.Base,{alternateClassName:['Ext.form.TextField','Ext.form.Text'],config:{hideTrigger:!1,triggers:undefined},renderConfig:{editable:!0},growMin:30,growMax:800,growAppend:'W',allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:'The minimum length for this field is {0}',maxLengthText:'The maximum length for this field is {0}',blankText:'This field is required',regexText:'',emptyText:'',emptyCls:'x-form-empty-field',requiredCls:'x-form-required-field',valueContainsPlaceholder:!1,ariaRole:'textbox',repeatTriggerClick:!1,triggerWrapCls:'x-form-trigger-wrap',triggerWrapFocusCls:'x-form-trigger-wrap-focus',triggerWrapInvalidCls:'x-form-trigger-wrap-invalid',fieldBodyCls:'x-form-text-field-body',inputWrapCls:'x-form-text-wrap',inputWrapFocusCls:'x-form-text-wrap-focus',inputWrapInvalidCls:'x-form-text-wrap-invalid',growCls:'x-form-text-grow',needArrowKeys:!0,squashMouseUp:{mouseup:function(){},translate:!1,single:!0,preventDefault:!0},childEls:['triggerWrap','inputWrap'],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:['</div>','<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>','</div>'],initComponent:function(){var a=this,b=a.emptyCls;if(a.allowOnlyWhitespace===!1){a.allowBlank=!1}if(a.size){a.defaultBodyWidth=a.size*6.5+20}if(!a.onTrigger1Click){a.onTrigger1Click=a.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(a.readOnly){a.setReadOnly(a.readOnly)}a.fieldFocusCls=a.baseCls+'-focus';a.emptyUICls=b+' '+b+'-'+a.ui;a.addStateEvents('change')},initEvents:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(a.selectOnFocus||a.emptyText){a.mon(b,'mousedown',a.onMouseDown,a)}if(a.maskRe||a.vtype&&a.disableKeyFilter!==!0&&(a.maskRe=Ext.form.field.VTypes[a.vtype+'Mask'])){a.mon(b,'keypress',a.filterKeys,a)}if(a.enableKeyEvents){a.mon(b,{scope:a,keyup:a.onKeyUp,keydown:a.onKeyDown,keypress:a.onKeyPress})}},isEqual:function(a,b){return this.isEqualAsString(a,b)},onChange:function(a,b){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(h){var a=this,c=a.getRawValue(),g=a.emptyText&&c.length<1,b=a.maxLength,e,f,d;if(a.enforceMaxLength){if(b===Number.MAX_VALUE){b=undefined}}else {b=undefined}if(g){if(Ext.supports.Placeholder){e=a.emptyText}else {c=a.emptyText;a.valueContainsPlaceholder=!0}}f=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,h),{triggerWrapCls:a.triggerWrapCls,inputWrapCls:a.inputWrapCls,triggers:a.orderedTriggers,maxLength:b,readOnly:!a.editable||a.readOnly,placeholder:e,value:c,fieldCls:a.fieldCls+(g&&(e||c)?' '+a.emptyUICls:'')+(a.allowBlank?'':' '+a.requiredCls)});d=f.inputElAriaAttributes;if(d){d['aria-required']=!a.allowBlank}return f},onRender:function(){var a=this,b=a.getTriggers(),c=[],d,e;if(Ext.supports.FixedTableWidthBug){a.el._needsTableWidthFix=!0}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(b){this.invokeTriggers('onFieldRender');for(d in b){c.push(b[d].el)}e=a.triggerEl=a.triggerCell=new Ext.CompositeElement(c,!0)}a.inputCell=a.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);a.invokeTriggers('afterFieldRender')},onMouseDown:function(){if(!this.hasFocus){Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(c){var a=this,j=a.getHideTrigger(),k=a.readOnly,f=a.orderedTriggers=[],i=a.repeatTriggerClick,e,b,h,g,d;if(!c){c={};if(a.triggerCls&&!a.trigger1Cls){a.trigger1Cls=a.triggerCls}for(d=1;g=a['trigger'+d+'Cls'];d++){c['trigger'+d]={cls:g,extraCls:'x-trigger-index-'+d,handler:'onTrigger'+d+'Click',compat4Mode:!0,scope:a}}}for(e in c){if(c.hasOwnProperty(e)){b=c[e];b.field=a;b.id=e;if(k&&b.hideOnReadOnly!==!1||j&&b.hidden!==!1){b.hidden=!0}if(i&&b.repeatClick!==!1){b.repeatClick=!0}h=c[e]=Ext.form.trigger.Trigger.create(b);f.push(h)}}Ext.Array.sort(f,Ext.form.trigger.Trigger.weightComparator);return c},invokeTriggers:function(d,e){var f=this,a=f.getTriggers(),c,b;if(a){for(c in a){if(a.hasOwnProperty(c)){b=a[c];b[d].apply(b,e||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){this.invokeTriggers(a?'hide':'show')},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(a){var b=this,d=b.getTriggers(),f=b.getHideTrigger(),c,e;a=!!a;Ext.form.field.Base.prototype.setReadOnly.call(this,a);if(b.rendered){b.setReadOnlyAttr(a||!b.editable)}if(d){for(e in d){c=d[e];if(c.hideOnReadOnly===!0||c.hideOnReadOnly!==!1&&!f){c.setVisible(!a)}}}},setReadOnlyAttr:function(c){var b=this,a='readonly',d=b.inputEl.dom;if(c){d.setAttribute(a,a)}else {d.removeAttribute(a)}if(b.ariaRole){b.ariaEl.dom.setAttribute('aria-readonly',!!c)}},processRawValue:function(c){var e=this,a=e.stripCharsRe,d,b;if(a){if(!a.global){d='g';d+=a.ignoreCase?'i':'';d+=a.multiline?'m':'';a=new RegExp(a.source,d)}b=c.replace(a,'');if(b!==c){e.setRawValue(b);c=b}}return c},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable='on'}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=''}},onKeyDown:function(a){this.fireEvent('keydown',this,a)},onKeyUp:function(a){this.fireEvent('keyup',this,a)},onKeyPress:function(a){this.fireEvent('keypress',this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var a=this,b=a.emptyText,c;if(a.rendered&&b){c=a.getRawValue().length<1&&!a.hasFocus;if(Ext.supports.Placeholder){a.inputEl.dom.placeholder=b}else {if(c){a.setRawValue(b);a.valueContainsPlaceholder=!0}}if(c){a.inputEl.addCls(a.emptyUICls)}else {a.inputEl.removeCls(a.emptyUICls)}a.autoSize()}},getEmptyText:function(){return this.emptyText},setEmptyText:function(e){var a=this,c=a.inputEl,b=c&&c.dom,d=e||'';if(e){a.emptyText=d;a.applyEmptyText()}else {if(b){if(Ext.supports.Placeholder){b.removeAttribute('placeholder')}else {if(b.value!==a.getRawValue()){b.value='';c.removeCls(a.emptyUICls)}}a.valueContainsPlaceholder=!1}}a.emptyText=d;return a},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable='on'}}},toggleInvalidCls:function(b){var a=b?'addCls':'removeCls';Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[a](this.triggerWrapInvalidCls);this.inputWrap[a](this.inputWrapInvalidCls)},beforeFocus:function(){var a=this,b=a.inputEl,c=a.emptyText,d;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if(c&&!Ext.supports.Placeholder&&(b.dom.value===a.emptyText&&a.valueContainsPlaceholder)){a.setRawValue('');d=!0;b.removeCls(a.emptyUICls);a.valueContainsPlaceholder=!1}else {if(Ext.supports.Placeholder){b.removeCls(a.emptyUICls)}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.selectOnFocus){a.inputEl.dom.select()}if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers('onFieldFocus',[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers('onFieldBlur',[b])},completeEdit:function(a){Ext.form.field.Base.prototype.completeEdit.call(this,a);this.applyEmptyText()},filterKeys:function(a){if(a.ctrlKey&&!a.altKey||a.isSpecialKey()){return}var b=String.fromCharCode(a.getCharCode());if(!this.maskRe.test(b)){a.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),'value')},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty('value')){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=''}return a},setValue:function(c){var a=this,b=a.inputEl;if(b&&a.emptyText&&!Ext.isEmpty(c)){b.removeCls(a.emptyUICls);a.valueContainsPlaceholder=!1}Ext.form.field.Base.prototype.setValue.apply(this,arguments);a.applyEmptyText();return a},getErrors:function(b){b=arguments.length?b==null?'':b:this.processRawValue(this.getRawValue());var a=this,c=Ext.form.field.Base.prototype.getErrors.call(this,b),f=a.validator,d=a.vtype,j=Ext.form.field.VTypes,k=a.regex,i=Ext.String.format,e,h,g;if(Ext.isFunction(f)){e=f.call(a,b);if(e!==!0){c.push(e)}}h=a.allowOnlyWhitespace?b:Ext.String.trim(b);if(h.length<1||b===a.emptyText&&a.valueContainsPlaceholder){if(!a.allowBlank){c.push(a.blankText)}if(!a.validateBlank){return c}g=!0}if(!g&&b.length<a.minLength){c.push(i(a.minLengthText,a.minLength))}if(b.length>a.maxLength){c.push(i(a.maxLengthText,a.maxLength))}if(d){if(!j[d](b,a)){c.push(a.vtypeText||j[d+'Text'])}}if(k&&!k.test(b)){c.push(a.regexText||a.invalidText)}return c},selectText:function(a,b){var f=this,g=f.getRawValue(),c=g.length,e=f.inputEl.dom,d;if(c>0){a=a===undefined?0:Math.min(a,c);b=b===undefined?c:Math.min(b,c);if(e.setSelectionRange){e.setSelectionRange(a,b)}else {if(e.createTextRange){d=e.createTextRange();d.moveStart('character',a);d.moveEnd('character',b-c);d.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var a=this,d,f,c,g,b,e;if(a.grow&&a.rendered&&a.getSizeModel().width.auto){g=a.inputEl;d=a.getTriggers();c=0;e=Ext.util.Format.htmlEncode(a.getGrowWidth()||(a.hasFocus?'':a.emptyText)||'');e+=a.growAppend;for(f in d){c+=d[f].el.getWidth()}b=g.getTextWidth(e)+c+a.inputWrap.getBorderWidth('lr')+a.triggerWrap.getBorderWidth('lr');b=Math.min(Math.max(b,a.growMin),a.growMax);a.bodyEl.setWidth(b);a.updateLayout();a.fireEvent('autosize',a,b)}},onDestroy:function(){var a=this;a.invokeTriggers('destroy');Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return 'textfield'}},deprecated:{5:{methods:{getTriggerWidth:function(){var a=this.getTriggers(),c=0,b;if(a&&this.rendered){for(b in a){if(a.hasOwnProperty(b)){c+=a[b].el.getWidth()}}}return c}}}}},0,['textfield'],['component','box','field','textfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0},['widget.textfield'],0,[Ext.form.field,'Text',Ext.form,'TextField',Ext.form,'Text'],0);Ext.cmd.derive('Ext.util.KeyMap',Ext.Base,{alternateClassName:'Ext.KeyMap',eventName:'keydown',constructor:function(b){var a=this;if(arguments.length!==1||typeof b==='string'||b.dom||b.tagName||b===document||b.isComponent){a.legacyConstructor.apply(a,arguments);return}Ext.apply(a,b);a.bindings=[];if(!a.target.isComponent){a.target=Ext.get(a.target)}if(a.binding){a.addBinding(a.binding)}else {if(b.key){a.addBinding(b)}}a.enable()},legacyConstructor:function(d,b,c){var a=this;Ext.apply(a,{target:Ext.get(d),eventName:c||a.eventName,bindings:[]});if(b){a.addBinding(b)}a.enable()},addBinding:function(b){var a=this,e=b.key,c,d;if(a.processing){a.bindings=a.bindings.slice(0)}if(Ext.isArray(b)){for(c=0,d=b.length;c<d;c++){a.addBinding(b[c])}return}a.bindings.push(Ext.apply({keyCode:a.processKeys(e)},b))},removeBinding:function(b){var c=this,e=c.bindings,g=e.length,d,a,f;if(c.processing){c.bindings=e.slice(0)}f=c.processKeys(b.key);for(d=0;d<g;++d){a=e[d];if((a.fn||a.handler)===(b.fn||b.handler)&&a.scope===b.scope){if(b.alt===a.alt&&b.crtl===a.crtl&&b.shift===a.shift){if(Ext.Array.equals(a.keyCode,f)){Ext.Array.erase(c.bindings,d,1);return}}}}},processKeys:function(a){var g=!1,f,e,d,c,b;if(a.test){return a}if(Ext.isString(a)){e=[];d=a.toUpperCase();for(b=0,c=d.length;b<c;++b){e.push(d.charCodeAt(b))}a=e;g=!0}if(!Ext.isArray(a)){a=[a]}if(!g){for(b=0,c=a.length;b<c;++b){f=a[b];if(Ext.isString(f)){a[b]=f.toUpperCase().charCodeAt(0)}}}return a},handleTargetEvent:function(b){var a=this,d,c,f,e;if(a.enabled){d=a.bindings;c=0;f=d.length;b=a.processEvent.apply(a.processEventScope||a,arguments);if(b){a.lastKeyEvent=b;if(a.ignoreInputFields&&Ext.fly(b.target).isInputField()){return}if(!b.getKey){return b}a.processing=!0;for(;c<f;++c){e=a.processBinding(d[c],b);if(e===!1){a.processing=!1;return e}}a.processing=!1}}},processEvent:Ext.identityFn,processBinding:function(c,b){if(this.checkModifiers(c,b)){var g=b.getKey(),h=c.fn||c.handler,i=c.scope||this,d=c.keyCode,e=c.defaultEventAction,f,j,a;if(d.test){if(d.test(String.fromCharCode(b.getCharCode()))){a=h.call(i,g,b);if(a!==!0&&e){b[e]()}if(a===!1){return a}}}else {if(d.length){for(f=0,j=d.length;f<j;++f){if(g===d[f]){a=h.call(i,g,b);if(a!==!0&&e){b[e]()}if(a===!1){return a}break}}}}}},checkModifiers:function(e,f){var d=['shift','ctrl','alt'],c=0,g=d.length,b,a;for(;c<g;++c){a=d[c];b=e[a];if(!(b===undefined||b===f[a+'Key'])){return !1}}return !0},on:function(a,g,f){var b,c,d,e;if(Ext.isObject(a)&&!Ext.isArray(a)){b=a.key;c=a.shift;d=a.ctrl;e=a.alt}else {b=a}this.addBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},un:function(a,g,f){var b,c,d,e;if(Ext.isObject(a)&&!Ext.isArray(a)){b=a.key;c=a.shift;d=a.ctrl;e=a.alt}else {b=a}this.removeBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority});a.enabled=!0}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=!1}},setDisabled:function(a){if(a){this.disable()}else {this.enable()}},destroy:function(b){var a=this,c=a.target;a.bindings=[];a.disable();if(b){c.destroy()}delete a.target;a.callParent()}},1,0,0,0,0,0,[Ext.util,'KeyMap',Ext,'KeyMap'],0);Ext.cmd.derive('Ext.util.KeyNav',Ext.Base,{alternateClassName:'Ext.KeyNav',disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:'keypress',statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(b){var a=this;if(arguments.length===2){a.legacyConstructor.apply(a,arguments);return}a.doConstruction(b)},legacyConstructor:function(b,a){this.doConstruction(Ext.apply({target:b},a))},doConstruction:function(a){var b=this,c={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:b.getKeyEvent('forceKeyDown' in a?a.forceKeyDown:b.forceKeyDown,a.eventName),capture:a.capture},d;if(b.map){b.map.destroy()}b.initConfig(a);if(a.processEvent){c.processEvent=a.processEvent;c.processEventScope=a.processEventScope||b}if(a.priority){c.priority=a.priority}if(a.keyMap){d=b.map=a.keyMap}else {d=b.map=new Ext.util.KeyMap(c);b.destroyKeyMap=!0}this.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(d){var c=this,b,a,h=c.map,g=Ext.util.KeyNav.keyOptions,e,f=d.scope||c;for(b in d){a=d[b];e=g[b];if(e!=null){b=e}if(a&&(b.length===1||!isNaN(b=parseInt(b,10)))){if(typeof a==='function'){a={handler:a,defaultEventAction:d.defaultEventAction!==undefined?d.defaultEventAction:c.defaultEventAction}}h.addBinding({key:b,ctrl:a.ctrl,shift:a.shift,alt:a.alt,handler:Ext.Function.bind(c.handleEvent,a.scope||f,[a.handler||a.fn,c],!0),defaultEventAction:a.defaultEventAction!==undefined?a.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,a,b,c){c.lastKeyEvent=a;return b.call(this,a)},destroy:function(b){var a=this;if(a.destroyKeyMap){a.map.destroy(b)}delete a.map;a.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=!1}},disable:function(){if(this.map){this.map.disable()}this.disabled=!0},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||Ext.supports.SpecialKeyDownRepeat&&!a){return 'keydown'}else {return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,'KeyNav',Ext,'KeyNav'],0);Ext.cmd.derive('Ext.form.field.Picker',Ext.form.field.Text,{alternateClassName:'Ext.form.Picker',config:{triggers:{picker:{handler:'onTriggerClick',scope:'this'}}},renderConfig:{editable:!0},isPickerField:!0,matchFieldWidth:!0,pickerAlign:'tl-bl?',openCls:'x-pickerfield-open',isExpanded:!1,applyTriggers:function(a){var c=this,b=a.picker;if(!b.cls){b.cls=c.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,a)},getSubTplData:function(c){var d=this,b,a;b=Ext.form.field.Text.prototype.getSubTplData.call(this,c);if(d.ariaRole){a=b.inputElAriaAttributes;if(a){a['aria-haspopup']=!0;a['aria-expanded']=!1}}return b},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:!1},scope:a,forceKeyDown:!0});if(Ext.isGecko){a.inputEl.dom.setAttribute('autocomplete','off')}},updateEditable:function(b,c){var a=this;if(!b){a.inputEl.on('click',a.onTriggerClick,a)}else {a.inputEl.un('click',a.onTriggerClick,a)}Ext.form.field.Text.prototype.updateEditable.call(this,b,c)},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(b){var a=this;if(b.time-a.lastDownArrow>150){delete a.lastDownArrow}if(!a.isExpanded){b.stopEvent();a.onTriggerClick();a.lastDownArrow=b.time}else {if(!b.isStopped&&b.time-a.lastDownArrow<150){delete a.lastDownArrow}}},expand:function(){var a=this,d,c,b,e;if(a.rendered&&!a.isExpanded&&!a.destroyed){d=a.bodyEl;b=a.getPicker();e=Ext.getDoc();b.setMaxHeight(b.initialConfig.maxHeight);if(a.matchFieldWidth){b.setWidth(a.bodyEl.getWidth())}b.show();a.isExpanded=!0;a.alignPicker();d.addCls(a.openCls);if(a.ariaRole){c=a.ariaEl.dom;c.setAttribute('aria-owns',b.listEl?b.listEl.id:b.el.id);c.setAttribute('aria-expanded',!0)}a.touchListeners=e.on({translate:!1,touchstart:a.collapseIf,scope:a,delegated:!1,destroyable:!0});a.scrollListeners=Ext.on({scroll:a.onGlobalScroll,scope:a,destroyable:!0});Ext.on('resize',a.alignPicker,a,{buffer:1});a.fireEvent('expand',a);a.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var a=this.getPicker();if(a.isVisible()&&a.isFloating()){this.doAlign()}}},doAlign:function(){var a=this,c=a.picker,d='-above',b;a.picker.alignTo(a.triggerWrap,a.pickerAlign,a.pickerOffset);b=c.el.getY()<a.inputEl.getY();a.bodyEl[b?'addCls':'removeCls'](a.openCls+d);c[b?'addCls':'removeCls'](c.baseCls+d)},collapse:function(){var a=this;if(a.isExpanded&&!a.destroyed&&!a.destroying){var d=a.openCls,b=a.picker,c='-above';b.hide();a.isExpanded=!1;a.bodyEl.removeCls([d,d+c]);b.el.removeCls(b.baseCls+c);if(a.ariaRole){a.ariaEl.dom.setAttribute('aria-expanded',!1)}a.touchListeners.destroy();a.scrollListeners.destroy();Ext.un('resize',a.alignPicker,a);a.fireEvent('collapse',a);a.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.destroyed&&!b.within(a.bodyEl,!1,!0)&&!a.owns(b.target)&&!Ext.fly(b.target).isFocusable()){a.collapse()}},getPicker:function(){var a=this,b=a.picker;if(!b){a.creatingPicker=!0;a.picker=b=a.createPicker();b.ownerCmp=a;delete a.creatingPicker}return a.picker},onFocusLeave:function(a){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,a)},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else {a.expand()}}},beforeDestroy:function(){var a=this,b=a.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un('resize',a.alignPicker,a);Ext.destroy(a.keyNav,b);if(b){a.picker=b.pickerField=null}},privates:{onGlobalScroll:function(c){var a,b,d=this.el;if(c.getElement().contains(d)){a=c.getPosition();b=d.getScrollIntoViewXY(c.getElement(),a.x,a.y);if(this.up('[fixed]')||b.y!==a.y||b.x!==a.x){this.collapse()}}}}},0,['pickerfield'],['component','box','field','textfield','pickerfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0},['widget.pickerfield'],0,[Ext.form.field,'Picker',Ext.form,'Picker'],0);Ext.cmd.derive('Ext.util.CollectionKey',Ext.Base,{isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(i,b){var j=this.map||this.getMap(),c=j[i],e=this.getCollection(),h=e.length,d,a,f,g;if(!c){return -1}if(b===undefined){b=-1}if(c instanceof Array){f=c;a=h;for(g=f.length;g-->0;){d=e.indexOf(f[g]);if(d<a&&d>b){a=d}}if(a===h){return -1}}else {a=e.indexOf(c)}return a>b?a:-1},updateKey:function(e,d){var f=this,c=f.map,a,b;if(c){a=c[d];if(a instanceof Array){b=Ext.Array.indexOf(a,e);if(b>=0){if(a.length>2){a.splice(b,1)}else {c[d]=a[1-b]}}}else {if(a){delete c[d]}}f.add([e])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(a,b){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(g,h){var a=this,f=a.map,d=h.items,c=d.length,b,i,e;if(f){if(a.getUnique()&&c<g.length/2){for(b=0;b<c;++b){e=a.getKey(i=d[b]);delete f[e]}}else {a.map=null}}},add:function(i){var f=this,c=f.map,b,d,e,a,g,h;g=i.length;h=f.getUnique();for(d=0;d<g;++d){a=f.getKey(e=i[d]);if(h||!(a in c)){c[a]=e}else {if(!((b=c[a]) instanceof Array)){c[a]=b=[b]}b.push(e)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else {this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return (a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,'CollectionKey'],0);Ext.cmd.derive('Ext.util.Grouper',Ext.util.Sorter,{isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(b){var a=this._groupFn(b);return a!=null?String(a):''},sortFn:function(d,e){var c=this,a=c._groupFn(d),b=c._groupFn(e),g=c._sortProperty,i=c._root,h=c._sorterFn,f=c._transform;if(a===b){return 0}if(g||h){if(h){return h.call(this,d,e)}if(i){d=d[i];e=e[i]}a=d[g];b=e[g];if(f){a=f(a);b=f(b)}}return a>b?1:a<b?-1:0},standardGroupFn:function(a){var b=this._root;return (b?a[b]:a)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,'Grouper'],0);Ext.cmd.derive('Ext.util.Collection',Ext.Base,{isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:'ASC',source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,constructor:function(b){var a=this;a.items=[];a.map={};a.length=0;if(b&&b.keyFn){a.getKey=b.keyFn}a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this,b=a._filters,c=a._sorters,d=a._groups;if(b){b.destroy();a._filters=null}if(c){c.destroy();a._sorters=null}if(d){d.destroy();a._groups=null}a.setSource(null);a.observers=a.items=a.map=null;a.callParent()},add:function(d){var b=this,a=b.decodeItems(arguments,0),c=a;if(a.length){b.requestedIndex=b.length;b.splice(b.length,0,a);delete b.requestedIndex;c=a.length===1?a[0]:a}return c},replaceAll:function(){var b=this,c,a;a=b.decodeItems(arguments,0);c=a;if(a.length){b.splice(0,b.length,a);c=a.length===1?a[0]:a}else {b.removeAll()}return c},aggregate:function(d,c,e,g,f){var a=this,b=Ext.Array.slice(arguments);b.unshift(a.items);return a.aggregateItems.apply(a,b)},aggregateByGroup:function(b,a,d){var c=this.getGroups();return this.aggregateGroups(c,b,a,d)},aggregateItems:function(a,m,b,c,d,p){var e=this,o=Ext.Number.clipIndices(a.length,[c,d]),k=c!==0&&d!==a.length,f,g,n,j,i,h,l;c=o[0];d=o[1];if(!Ext.isFunction(b)){b=e._aggregators[b];return b.call(e,a,c,d,m,e.getRootProperty())}j=e.getRootProperty();h=new Array(n);l=k?new Array(n):a;for(f=c,g=0;f<d;++f,g++){if(k){l[g]=i=a[f]}h[g]=(j?i[j]:i)[m]}return b.call(p||e,a,h,0)},aggregateGroups:function(i,e,c,j){var f=i.items,k=f.length,h=!Ext.isFunction(c),g={},b,a,d;for(b=0;b<k;++b){a=f[b];if(!h){d=this.aggregateItems(a.items,e,c,null,null,j)}else {d=a[c](e)}g[a.getGroupKey()]=d}return g},beginUpdate:function(){if(!this.updating++){this.notify('beginupdate')}},clear:function(){var a=this,c=a.generation,e=c?a.items:[],b,d;if(c){a.items=[];a.length=0;a.map={};a.indices={};a.generation++;b=a.getExtraKeys();if(b){for(d in b){b[d].clear()}}}return e},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(i,e,h){var d=this.items,j=d.length,f={},g=[],b,c,a;for(b=0;b<j;++b){a=d[b];a=(e?a[e]:a)[i];c=String(a);if((h||!Ext.isEmpty(a))&&!f[c]){f[c]=1;g.push(a)}}return g},contains:function(a){var c=!1,b;if(a!=null){b=this.getKey(a);c=this.map[b]===a}return c},containsKey:function(a){return a in this.map},createFiltered:function(a,j,n,l,m){var d=this,k=new d.self(d.initialConfig),h=d.getRootProperty(),g=d.items,e,b,c,i,f;if(Ext.isFunction(a)){i=a;f=j}else {if(Ext.isString(a)){c=[new Ext.util.Filter({property:a,value:j,root:h,anyMatch:n,caseSensitive:l,exactMatch:m})]}else {if(a instanceof Ext.util.Filter){c=[a];a.setRoot(h)}else {if(Ext.isArray(a)){c=a.slice(0);for(b=0,e=c.length;b<e;++b){c[b].setRoot(h)}}}}i=Ext.util.Filter.createFilterFn(c)}f=f||d;for(b=0,e=g.length;b<e;b++){if(i.call(f,g[b])){k.add(g[b])}}return k},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,c){var b=this.items,d=b.length,a,e;if(d){c=c||this;b=b.slice(0);for(a=0;a<d;a++){e=f.call(c,b[a],a,d);if(e===!1){break}}}return e},eachKey:function(i,c){var f=this,b=f.items,d=b.length,a,g,h,e;if(d){c=c||f;b=b.slice(0);for(a=0;a<d;a++){h=f.getKey(g=b[a]);e=i.call(c,h,g,a,d);if(e===!1){break}}}return e},endUpdate:function(){if(!--this.updating){this.notify('endupdate')}},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},findBy:function(i,c,g){var d=this,b=d.items,h=b.length,a,e,f;c=c||d;for(a=g||0;a<h;a++){f=d.getKey(e=b[a]);if(i.call(c,e,f)){return b[a]}}return null},findIndex:function(e,g,f,c,d,b){var a=this.find(e,g,f,c,d,b);return a?this.indexOf(a):-1},findIndexBy:function(d,b,c){var a=this.findBy(d,b,c);return a?this.indexOf(a):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'first'):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'last'):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(b){var a=b.id;return a===0||a?a:(a=b._id)===0||a?a:b.getId()},getRange:function(d,e){var c=this.items,b=c.length,a;if(!b){a=[]}else {a=Ext.Number.clipIndices(b,[d,e]);a=c.slice(a[0],a[1])}return a},getValues:function(h,f,i,c){var d=this.items,e=Ext.Number.clipIndices(d.length,[i,c]),g=[],b,a;for(b=e[0],c=e[1];b<c;++b){a=d[b];a=(f?a[f]:a)[h];g.push(a)}return g},indexOf:function(a){if(!a){return -1}var b=this.getKey(a);return this.indexOfKey(b)},indexOfKey:function(c){var b=this,a=b.indices;if(c in b.map){if(!a){a=b.getIndices()}return a[c]}return -1},insert:function(c,e){var b=this,a=b.decodeItems(arguments,1),d=a;if(a.length){b.requestedIndex=c;b.splice(c,0,a);delete b.requestedIndex;d=a.length===1?a[0]:a}return d},itemChanged:function(c,p,f,u){var a=this,j=f===0||!!f,s=a.filtered&&a.getAutoFilter(),n=!1,h=0,i=a.items,t=a.length-1,v=a.sorted&&t>0&&a.getAutoSort(),r=a.getSource(),q=0,g=!1,o=!1,e,l,k,m,b,d;if(r&&!r.updating){r.itemChanged(c,p,f,u)}else {l=a.getKey(c);if(s){b=a.indexOfKey(j?f:l);o=b<0;g=a.isItemFiltered(c);n=o!==g}if(n){if(g){q=[c];d=-1}else {m=[c];d=a.length}}else {if(v&&!g){if(!s){b=a.indexOfKey(j?f:l)}k=a.getSortFn();if(b!==-1){if(b&&k(i[b-1],i[b])>0){h=-1;d=Ext.Array.binarySearch(i,c,0,b,k)}else {if(b<t&&k(i[b],i[b+1])>0){h=1;d=Ext.Array.binarySearch(i,c,b+1,k)}}if(h){m=[c]}}}}e={item:c,key:l,index:d,filterChanged:n,keyChanged:j,indexChanged:!!h,filtered:g,oldIndex:b,newIndex:d,wasFiltered:o,meta:u};if(j){e.oldKey=f}if(p){e.modified=p}a.beginUpdate();a.notify('beforeitemchange',[e]);if(j){a.updateKey(c,f)}if(m||q){a.splice(d,q,m)}if(h>0){e.newIndex--}else {if(h<0){e.oldIndex++}}a.notify(g?'filtereditemchange':'itemchange',[e]);a.endUpdate()}},remove:function(d){var a=this,c=a.decodeRemoveItems(arguments,0),b=a.length;a.splice(0,c);return b-a.length},removeAll:function(){var a=this,b=a.length;if(a.generation&&b){a.splice(0,b)}return a},removeAt:function(j,f){var a=this,e=a.length,i=Ext.Number,g=i.clipIndices(e,[j,f===undefined?1:f],i.Clip.COUNT),c=g[0],d=g[1]-c,h=d===1&&a.getAt(c),b;a.splice(c,d);b=a.length-e;return h&&b?h:b},removeByKey:function(b){var a=this.getByKey(b);if(!a||!this.remove(a)){return !1}return a},replace:function(a){var b=this.indexOf(a);if(b===-1){this.add(a)}else {this.insert(b,a)}},splice:function(K,E,L){var b=this,D=b.sorted&&b.getAutoSort(),F=b.map,o=b.items,r=b.length,n=E instanceof Array?b.decodeRemoveItems(E):null,G=!n,J=Ext.Number,I=J.clipIndices(r,[K,G?E:0],J.Clip.COUNT),m=I[0],v=I[1],x=v-m,p=b.decodeItems(arguments,2),h=p?p.length:0,c,A,C,d=m,k=b.indices||(h||n?b.getIndices():null),e=null,i=x?[m]:null,l=null,t=b.getSource(),j,B,z,a,u,g,w,f,s,q,y,H,v;if(t&&!t.updating){if(G){n=[];for(a=0;a<x;++a){n.push(o[m+a])}}if(m<r){a=t.indexOf(o[m])}else {a=t.length}t.splice(a,n,p);return b}if(h){c=p;l=[];A={};if(D){H=b.getSorters();if(h>1){if(!c.$cloned){p=c=c.slice(0)}b.sortData(c)}}for(a=0;a<h;++a){f=b.getKey(u=p[a]);if((w=A[f])!==undefined){(y||(y={}))[w]=1}else {g=k[f];if(g<m||v<=g){(i||(i=[])).push(g)}}A[f]=a;l.push(f)}if(y){s=l;c=[];l=[];c.$cloned=!0;for(a=0;a<h;++a){if(!y[a]){u=p[a];c.push(u);l.push(s[a])}}h=c.length}e={items:c,keys:l}}for(a=n?n.length:0;a-->0;){f=b.getKey(n[a]);if((g=k[f])!==undefined){(i||(i=[])).push(g)}}if(!e&&!i){return b}b.beginUpdate();if(i){j=null;z=[];C={};if(i.length>1){i.sort(Ext.Array.numericSortFn)}for(a=0,q=i.length;a<q;++a){f=b.getKey(u=o[g=i[a]]);if(!(f in F)){continue}delete F[f];if(!j||g>j.at+B.length){z.push(j={at:g,items:B=[],keys:s=[],map:C,next:j,replacement:e});if(e){e.replaced=j}}B.push(C[f]=u);s.push(f);if(g<d){--d}if(x>1&&g===m){--x;i[a--]=++m}}if(e){e.at=d}for(w=z.length;w-->0;){j=z[w];a=j.at;q=j.items.length;if(a+q<r){b.indices=k=null}b.length=r-=q;o.splice(a,q);if(k){s=j.keys;for(a=0;a<q;++a){delete k[s[a]]}}++b.generation;b.notify('remove',[j])}}if(e){if(D&&h>1&&r){b.spliceMerge(c,l)}else {if(D){if(h>1){d=0;b.indices=k=null}else {d=H.findInsertionIndex(e.items[0],o,b.getSortFn())}}if(d===r){v=d;for(a=c.length-1;a>=0;--a){o[v+a]=c[a]}k=b.indices;if(k){for(a=0;a<h;++a){k[l[a]]=d+a}}}else {b.indices=null;Ext.Array.insert(o,d,c)}for(a=0;a<h;++a){F[l[a]]=c[a]}b.length+=h;e.at=d;e.atItem=d===0?null:o[d-1];++b.generation;b.notify('add',[e])}}b.endUpdate();return b},update:function(c,b){var a=this;a.beginUpdate();try{return c.call(b||a,a)}catch(d){throw d}finally{a.endUpdate()}},updateKey:function(d,b){var a=this,f=a.map,e=a.indices,g=a.getSource(),c;if(g&&!g.updating){g.updateKey(d,b)}else {if((c=a.getKey(d))!==b){if(f[b]===d&&!(c in f)){delete f[b];a.updating++;a.generation++;f[c]=d;if(e){e[c]=e[b];delete e[b]}a.notify('updatekey',[{item:d,newKey:c,oldKey:b}]);a.updating--}}}},findInsertIndex:function(f){var d=this.getSource(),e=d.items,b=d.indexOf(f)-1,c,a;while(b>-1){c=e[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(l,i){var a=this,j=i.atItem,d=i.items,h=a.requestedIndex,c,b,e,f,g,k;if(!a.sorted){if(h!==undefined){b=h}else {if(j){b=a.indexOf(j);if(b===-1){b=a.findInsertIndex(d[0])}else {++b}}else {b=0}}}if(a.getAutoFilter()&&a.filtered){for(f=0,k=d.length;f<k;++f){g=d[f];if(a.isItemFiltered(g)){if(!e){e=d.slice(0,f)}if(!c){c=[]}c.push(g)}else {if(e){e.push(g)}}}}a.splice(b<0?a.length:b,0,e||d);if(c){a.notify('filteradd',[c])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(i){var a=this,h={},e={},c,g,b,d,f;b=i.items;b=a.filtered&&a.getAutoFilter()?Ext.Array.filter(b,a.getFilterFn()):b.slice(0);if(a.sorted){a.sortData(b)}a.items=b;a.length=f=b.length;a.map=h;a.indices=e;for(c=0;c<f;++c){d=a.getKey(g=b[c]);h[d]=g;e[d]=c}a.notify('refresh')},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(e,a,b,d,f){var c=b-a;return c&&this._aggregators.sum.call(this,e,a,b,d,f)/c},bounds:function(h,g,i,f,e){for(var a,b,c,d=g;d<i;++d){a=h[d];a=(e?a[e]:a)[f];if(!(a<b)){b=a}if(!(a>c)){c=a}}return [c,b]},count:function(a){return a.length},extremes:function(k,j,l,i,f){var e=null,d=null,c,b,g,h,a;for(c=j;c<l;++c){b=k[c];a=(f?b[f]:b)[i];if(!(a<g)){g=a;e=b}if(!(a>h)){h=a;d=b}}return [d,e]},max:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[1]},maxItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[1]},min:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[0]},minItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[0]},sum:function(g,f,h,e,c){for(var a,d=0,b=f;b<h;++b){a=g[b];a=(c?a[c]:a)[e];d+=a}return d}},_eventToMethodMap:{add:'onCollectionAdd',beforeitemchange:'onCollectionBeforeItemChange',beginupdate:'onCollectionBeginUpdate',endupdate:'onCollectionEndUpdate',itemchange:'onCollectionItemChange',filtereditemchange:'onCollectionFilteredItemChange',refresh:'onCollectionRefresh',remove:'onCollectionRemove',beforesort:'beforeCollectionSort',sort:'onCollectionSort',filter:'onCollectionFilter',filteradd:'onCollectionFilterAdd',updatekey:'onCollectionUpdateKey'},addObserver:function(c){var b=this,a=b.observers;if(!a){b.observers=a=[]}a.push(c);if(a.length>1){Ext.Array.sort(a,b.prioritySortFn)}},prioritySortFn:function(a,b){var c=a.observerPriority||0,d=b.observerPriority||0;return c-d},applyExtraKeys:function(e,g){var d=this,f=g||{},b,c,a;for(c in e){a=e[c];if(!a.isCollectionKey){b={collection:d};if(Ext.isString(a)){b.property=a}else {b=Ext.apply(b,a)}a=new Ext.util.CollectionKey(b)}else {a.setCollection(d)}f[c]=d[c]=a;a.name=c}return f},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,'Ext.util.Grouper')}return a},decodeItems:function(e,d){var g=this,a=d===undefined?e:e[d],b,f,c;if(!a||!a.$cloned){b=e.length>d+1||!Ext.isIterable(a);if(b){a=Ext.Array.slice(e,d);if(a.length===1&&a[0]===undefined){a.length=0}}f=g.getDecoder();if(f){if(!b){a=a.slice(0);b=!0}for(c=a.length;c-->0;){if((a[c]=f.call(g,a[c]))===!1){a.splice(c,1)}}}if(b){a.$cloned=!0}}return a},getIndices:function(){var a=this,c=a.indices,d=a.items,f=d.length,b,e;if(!c){a.indices=c={};++a.indexRebuilds;for(b=0;b<f;++b){e=a.getKey(d[b]);c[e]=b}}return c},notify:function(d,b){var a=this,e=a.observers,g=a._eventToMethodMap[d],j=0,c,i,f,h;b=b||[];if(e&&g){for(c=0,i=e.length;c<i;++c){f=(h=e[c])[g];if(f){if(!j++){b.unshift(a)}f.apply(h,b)}}}if(!a.hasListeners){return}if(a.hasListeners[d]){if(!j){b.unshift(a)}a.fireEventArgs(d,b)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==!1){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(f){var a=this,b=a.getSource(),c,d,e;if(!b){c=a.getExtraKeys();if(c){d={};for(e in c){d[e]=c[e].clone(a)}}b=new Ext.util.Collection({keyFn:a.getKey,extraKeys:d,rootProperty:a.getRootProperty()});if(a.length){b.add(a.items)}a.setSource(b);a.autoSource=b}else {if(b.length||a.length){a.onCollectionRefresh(b)}}a.notify('filter')},applyFilters:function(a,b){if(a==null||a&&a.isFilterCollection){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(b,c){var a=this;if(c){c.un('endupdate','onEndUpdateFilters',a)}if(b){b.on({endupdate:'onEndUpdateFilters',scope:a,priority:a.$endUpdatePriority});b.$filterable=a}a.onEndUpdateFilters(b)},onEndUpdateFilters:function(a){var b=this,d=b.filtered,c=!!a&&a.length>0;if(d||c){b.filtered=c;b.onFilterChange(a)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==!1){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(c,b,d){var a=this.getSorters();a.addSort.apply(a,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify('beforesort',[a.getSorters(!1)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify('sort')},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,b,a){if(!b){b=this.items}if(!a){a=this.getSortFn()}return Ext.Array.binarySearch(b,c,a)},applySorters:function(a,b){if(a==null||a&&a.isSorterCollection){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var d=this,b=d.getGrouper(),c=d.getSorters(!1),a=c?c.getSortFn():null;if(!b){return a}return function(d,e){var c=b.sort(d,e);if(!c&&a){c=a(d,e)}return c}},updateGrouper:function(c){var a=this,b=a.getGroups(),e=a.getSorters(),d;a.onSorterChange();a.grouped=!!c;if(c){if(a.getTrackGroups()){if(!b){b=new Ext.util.GroupCollection({itemRoot:a.getRootProperty()});b.$groupable=a;a.setGroups(b)}b.setGrouper(c);d=!0}}else {if(b){a.removeObserver(b);b.destroy()}a.setGroups(null)}if(!e.updating){a.onEndUpdateSorters(e)}if(d){b.onCollectionRefresh(a)}},updateSorters:function(b,c){var a=this;if(c){c.un('endupdate','onEndUpdateSorters',a)}if(b){b.on({endupdate:'onEndUpdateSorters',scope:a,priority:a.$endUpdatePriority});b.$sortable=a}a.onSorterChange();a.onEndUpdateSorters(b)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(b){var a=this,d=a.sorted,c=a.grouped&&a.getAutoGroup()||b&&b.length>0;if(d||c){a.sorted=!!c;a.onSortChange(b)}},removeObserver:function(b){var a=this.observers;if(a){Ext.Array.remove(a,b)}},spliceMerge:function(i,q){var f=this,r=f.map,k=i.length,g=0,n=f.items,m=n.length,h=[],c=0,a=[],p=f.getSortFn(),l,j,d,b,o,e;f.items=a;for(e=0;e<k;e=j){b=i[e];for(;g<m;++g){if(p(b,o=n[g])<0){break}a.push(o)}if(g===m){h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[]};if(c>1){h[c-2].next=h[c-1]}for(;e<k;++e){l.push(b=i[e]);a.push(b)}break}h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[b]};if(c>1){h[c-2].next=h[c-1]}a.push(b);for(j=e+1;j<k;++j){if(p(b=i[j],o)>=0){break}a.push(b);l.push(b)}}for(;g<m;++g){a.push(n[g])}for(d=0;d<k;++d){r[q[d]]=i[d]}f.length=a.length;++f.generation;f.indices=null;for(d=0;d<c;++d){f.notify('add',[h[d]])}},getGroups:function(){return (arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(a,b){var c=this.autoSource;if(b){b.removeObserver(this);if(b===c){c.destroy();this.autoSource=null}}if(a){a.addObserver(this);if(a.length||this.length){this.onCollectionRefresh(a)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'Collection'],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(a,c,d){return this.aggregate(a,b,c,d)};a[b+'ByGroup']=function(a){return this.aggregateByGroup(a,b)}})});Ext.cmd.derive('Ext.util.ObjectTemplate',Ext.Base,{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(a,b){return a.isObjectTemplate?a:new Ext.util.ObjectTemplate(a,b)}},constructor:function(a,b){Ext.apply(this,b);this.template=a},apply:function(b){var a=this;delete a.apply;a.apply=a.compile(a.template);return a.apply(b)},privates:{compile:function(a){var e=this,g=e.excludeProperties,d,b,f,c;if(Ext.isString(a)){if(a.indexOf('{')<0){c=function(){return a}}else {if(e.valueRe.test(a)){a=a.substring(1,a.length-1).split('.');c=function(d){for(var b=d,c=0;b&&c<a.length;++c){b=b[a[c]]}return b}}else {a=new Ext.XTemplate(a);c=function(b){return a.apply(b)}}}}else {if(!a||Ext.isPrimitive(a)||Ext.isFunction(a)){c=function(){return a}}else {if(a instanceof Array){d=[];for(b=0,f=a.length;b<f;++b){d[b]=e.compile(a[b])}c=function(e){var c=[],b;for(b=0;b<f;++b){c[b]=d[b](e)}return c}}else {d={};for(b in a){if(!g[b]){d[b]=e.compile(a[b])}}c=function(f){var e={},b,c;for(b in a){c=g[b]?a[b]:d[b](f);if(c!==undefined){e[b]=c}}return e}}}}return c}}},1,0,0,0,0,0,[Ext.util,'ObjectTemplate'],0);Ext.cmd.derive('Ext.data.schema.Role',Ext.Base,{isRole:!0,left:!0,owner:!1,side:'left',isMany:!1,defaultReaderType:'json',_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(b,d){var a=this,c=d.extra;Ext.apply(a,d);if(c){delete c.type;Ext.apply(a,c);delete a.extra}a.association=b;if(b.owner===a.side){b.owner=a;a.owner=!0}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(d,b,a,c){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(c,b){var a=this.getAssociatedItem(c);if(a){b.adopt(a)}},createAssociationStore:function(e,k,i,l){var a=this,g=a.association,d=g.getFieldName(),j=g.isManyToMany,h=a.storeConfig,f=k.getId(),c={asynchronousLoad:!1,model:a.cls,role:a,session:e,associatedEntity:k,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e},b;if(j){c.filters=[{property:a.inverse.field,value:f,exactMatch:!0}]}else {if(d){c.filters=[{property:d,value:f,exactMatch:!0}];c.foreignKeyName=d}}if(h){Ext.apply(c,h)}b=Ext.Factory.store(c);a.onStoreCreate(b,e,f);if(d||j&&e){b.on({scope:a,add:'onAddToMany',remove:'onRemoveFromMany',clear:'onRemoveFromMany'})}if(i){b.loadData(i);b.complete=!!l}return b},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(f,a,c,b,t){var j=this,m=j.getStoreName(),e=f[m],i=f.session,n=a&&a.reload,g=f.$source,h=!1,r,d,k,s,o,p,q,l;if(!e){if(i){if(!b&&g){g=g[m];if(g&&!g.isLoading()){q=g;b=[];o=g.getData().items;for(k=0,s=o.length;k<s;++k){p=o[k];b.push(i.getRecord(p.self,p.id))}h=!!g.complete;r=!0}}if(!r){l=!!b;b=j.findRecords(i,f,b,t);if(!l&&(!b||!b.length)){b=null}h=l}}else {h=!!(b&&b.length>0)}e=j.createAssociationStore(i,f,b,h);e.$source=q;if(!b&&(j.autoLoad||a)){n=!0}f[m]=e}if(a){if(n||e.isLoading()){e.on('load',function(h,i,e,g){d=[h,g];c=c||a.scope||f;if(e){Ext.callback(a.success,c,d)}else {Ext.callback(a.failure,c,d)}d.push(e);Ext.callback(a,c,d);Ext.callback(a.callback,c,d)},null,{single:!0})}else {d=[e,null];c=c||a.scope||f;Ext.callback(a.success,c,d);d.push(!0);Ext.callback(a,c,d);Ext.callback(a.callback,c,d)}}if(n&&!e.isLoading()){e.load()}return e},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var b=this,a=b.reader,d=b.cls,c=!b.associationKey,e=this.getReaderRoot();if(a&&!a.isReader){if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:d,rootProperty:e,useSimpleAccessors:c,type:b.defaultReaderType});a=b.reader=Ext.createByAlias('reader.'+a.type,a)}return a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName='$old'+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(h){var b=this,a=b.getReader(),e=b.cls,g=!b.associationKey,f=b.getReaderRoot(),c,d;if(!a){d=e.getProxy();if(d){c=d.getReader();a=new c.self();a.copyFrom(c);a.setRootProperty(f)}else {a=new h.self({model:e,useSimpleAccessors:g,rootProperty:f})}b.reader=a}return a},read:function(f,e,d,c){var a=this.constructReader(d),b=a.getRoot(e);if(b){return a.readRecords(b,c,this._internalReadOptions)}},getCallbackOptions:function(a,c,b){if(typeof a==='function'){a={callback:a,scope:c||b}}else {if(a){a=Ext.apply({},a);a.scope=c||a.scope||b}}return a},doGetFK:function(d,b,f){var i=this,l=i.cls,j=i.association.getFieldName(),h=i.getInstanceName(),a=d[h],m=b&&b.reload,e=a!==undefined&&!m,k=d.session,c,g;if(!e){if(k){c=d.get(j);if(c||c===0){e=k.peekRecord(l,c,!0)&&!m;a=k.getRecord(l,c,!1)}else {e=!0;d[h]=a=null}}else {if(j){c=d.get(j);if(!c&&c!==0){e=!0;d[h]=a=null}else {if(!a){a=l.createWithId(c)}}}else {e=!0}}}else {if(a){e=!a.isLoading()}}if(e){if(b){g=[a,null];f=f||b.scope||d;Ext.callback(b.success,f,g);g.push(!0);Ext.callback(b,f,g);Ext.callback(b.callback,f,g)}}else {d[h]=a;b=i.getCallbackOptions(b,f,d);a.load(b)}return a},doSetFK:function(a,c,e,l){var f=this,i=f.association.getFieldName(),h=f.getInstanceName(),b=a[h],d=f.inverse,j=d.setterName,m=a.session,k,g;if(c&&c.isEntity){if(b!==c){g=f.getOldInstanceName();a[g]=b;a[h]=c;if(b&&b.isEntity){b[d.getInstanceName()]=undefined}if(i){a.set(i,c.getId())}delete a[g];if(j){c[j](a)}}}else {k=a.changingKey&&!d.isMany||a.set(i,c);if(k&&b&&b.isEntity&&!b.isEqual(b.getId(),c)){a[h]=undefined;if(!d.isMany){b[d.getInstanceName()]=undefined}}}if(e){if(Ext.isFunction(e)){e={callback:e,scope:l||a}}return a.save(e)}}},1,0,0,0,0,0,[Ext.data.schema,'Role'],0);Ext.cmd.derive('Ext.data.schema.Association',Ext.Base,{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(d){var a=this,c,b;Ext.apply(a,d);a.left=c=new a.Left(a,a.left);a.right=b=new a.Right(a,a.right);c.inverse=b;b.inverse=c},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:''}},1,0,0,0,0,0,[Ext.data.schema,'Association'],0);Ext.cmd.derive('Ext.data.schema.OneToOne',Ext.data.schema.Association,{isOneToOne:!0,isToOne:!0,kind:'one-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',onDrop:function(a,c){var b=this.getAssociatedItem(a);a[this.getInstanceName()]=null;if(b){b[this.inverse.getInstanceName()]=null}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var c=this.getInstanceName(),b=a[c],d=a.session;if(!b&&d){}return b||null},doSet:function(a,b){var d=this.getInstanceName(),e=a[d],c=this.inverse.setterName;if(e!==b){a[d]=b;if(c){b[c](a)}}return e},read:function(a,g,f,e){var c=this,d=c.callParent([a,g,f,e]),b;if(d){b=d[0];if(b){b[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=b;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(c,f){var b=this,e=b.association.field,a=b.getAssociatedItem(c),d;if(b.inverse.owner){if(f){d=c.get(e.name);if(d||d===0){a=f.getEntry(b.cls,d).record;if(a){a.drop()}}}else {if(a){a.drop()}}}if(e){c.set(e.name,null)}c[b.getInstanceName()]=null;if(a){a[b.inverse.getInstanceName()]=null}},onValueChange:function(b,f,c){var a=this,e=b[a.getOldInstanceName()]||a.getAssociatedItem(b),h=c||c===0,d=a.getInstanceName(),g=a.cls;b.changingKey=!0;a.doSetFK(b,c);if(!h){b[d]=null}else {if(f&&g){b[d]=f.peekRecord(g,c)||undefined}}if(a.inverse.owner&&e){a.association.schema.queueKeyCheck(e,a)}b.changingKey=!1},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(a,o,n,m){var f=this,l=f.callParent([a,o,n,m]),b,d,g,c,k,h,j,i,e;if(l){b=l[0];d=f.association.field;if(d){g=d.name}c=a.session;e=a.data;if(b){if(c){k=c.getRefs(b,this.inverse,!0);i=k&&k[a.id]||e[g]===undefined}else {i=!0}if(i){if(d){j=e[g];h=b.id;if(j!==h){e[g]=h;if(c){c.updateReference(a,d,h,j)}}}b[f.inverse.getInstanceName()]=a;a[f.getInstanceName()]=b}delete e[f.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,'OneToOne'],0);Ext.cmd.derive('Ext.data.schema.ManyToOne',Ext.data.schema.Association,{isManyToOne:!0,isToOne:!0,kind:'many-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,onDrop:function(d,f){var b=this,e=b.getAssociatedItem(d),a,g,c,i,h;if(e){a=e.removeAll();if(a&&b.inverse.owner){for(c=0,g=a.length;c<g;++c){a[c].drop()}}e.destroy();d[b.getStoreName()]=null}else {if(f){a=f.getRefs(d,b);if(a){for(h in a){a[h].drop()}}}}},processUpdate:function(f,i){var d=this,h=d.inverse.cls,g=i.R,c,a,b,e;if(g){for(c in g){a=f.peekRecord(h,c);if(a){e=f.getEntityList(d.cls,g[c]);b=d.getAssociatedItem(a);if(b){b.loadData(e);b.complete=!0}else {a[d.getterName](null,null,e)}}else {f.onInvalidAssociationEntity(h,c)}}}},findRecords:function(k,f,e,i){var d=e,b=k.getRefs(f,this,!0),l=this.association.field,j=l.name,a,c,h,m,g;if(!f.phantom){d=[];if(b||i){if(e){g={};for(h=0,m=e.length;h<m;++h){a=e[h];c=a.id;if(b&&b[c]){d.push(a)}else {if(i&&a.data[j]===undefined){d.push(a);a.data[j]=f.id;k.updateReference(a,l,f.id,undefined)}}g[c]=!0}}if(b){for(c in b){if(!g||!g[c]){d.push(b[c])}}}}}return d},processLoad:function(e,d,c,a){var b=c;if(a){b=this.findRecords(a,d,c,!0)}this.onLoadMany(d,b,a);return b},adoptAssociated:function(f,d){var c=this.getAssociatedItem(f),b,a,e;if(c){c.setSession(d);b=c.getData().items;for(a=0,e=b.length;a<e;++a){d.adopt(b[a])}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,a,!0)}},createSetter:null,onAddToMany:function(b,a){this.syncFK(a,b.getAssociatedEntity(),!1)},onLoadMany:function(i,h,j){var l=this.inverse.getInstanceName(),g=i.getId(),b=this.association.field,c,k,a,d,e,f;if(b){for(c=0,k=h.length;c<k;++c){a=h[c];a[l]=i;if(b){f=b.name;e=a.data;d=e[f];if(d!==g){e[f]=g;if(j){j.updateReference(a,b,g,d)}}}}}},onRemoveFromMany:function(b,a){this.syncFK(a,b.getAssociatedEntity(),!0)},read:function(b,j,i,h){var c=this,g=c.inverse.getInstanceName(),a=c.callParent([b,j,i,h]),e,f,d;if(a){e=b[c.getterName](null,null,a);delete b.data[c.role];a=e.getData().items;for(d=0,f=a.length;d<f;++d){a[d][g]=b}}},syncFK:function(c,d,f){var i=this.association.getFieldName(),g=this.inverse,k=g.setterName,j=g.getInstanceName(),h=c.length,l=d.getId(),e,a,b;while(h-->0){a=c[h];e=!a.isEqual(l,a.get(i));b=f?null:d;if(e!==f){a.changingKey=!0;a[k](b);a.changingKey=!1}else {a[j]=b}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',onDrop:function(a,c){var b=this.association.field;if(b){a.set(b.name,null)}a[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,b){var d=this.association.field,a;a=this.getSessionStore(c,b.get(d.name));if(a&&!a.contains(b)){a.add(b)}},onValueChange:function(b,f,d,l){var c=this,j=c.getInstanceName(),m=c.cls,i,g,a,h,n,e,k;if(!b.changingKey){i=d||d===0;if(!i){b[j]=null}if(f){a=c.getSessionStore(f,l);if(a){a.remove(b)}if(i){a=c.getSessionStore(f,d);if(a&&!a.isLoading()){a.add(b)}if(m){k=f.peekRecord(m,d)}b[j]=k||undefined}}else {g=b.joined;if(g){for(h=0,n=g.length;h<n;++h){a=g[h];if(a.isStore){e=a.getAssociatedEntity();if(e&&e.self===c.cls&&e.getId()===l){a.remove(b)}}}}}}if(c.owner&&d===null){c.association.schema.queueKeyCheck(b,c)}},checkKeyForDrop:function(a){var b=this.association.field;if(a.get(b.name)===null){a.drop()}},getSessionStore:function(c,d){var b=this.cls,a;if(b){a=c.peekRecord(b,d);if(a){return this.inverse.getAssociatedItem(a)}}},read:function(b,f,e,d){var c=this.callParent([b,f,e,d]),a;if(c){a=c[0];if(a){b[this.getInstanceName()]=a;delete b.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,'ManyToOne'],0);Ext.cmd.derive('Ext.data.schema.ManyToMany',Ext.data.schema.Association,{isManyToMany:!0,isToMany:!0,kind:'many-to-many',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,digitRe:/^\d+$/,findRecords:function(i,k,f){var l=i.getMatrixSlice(this.inverse,k.id),g=l.members,h=[],m=this.cls,d,e,j,a,c,b;if(f){d={};for(e=0,j=f.length;e<j;++e){b=f[e];a=b.id;c=g[a];if(!(c&&c[2]===-1)){h.push(b)}d[a]=!0}}for(a in g){c=g[a];if(!d||!d[a]&&(c&&c[2]!==-1)){b=i.peekRecord(m,a);if(b){h.push(b)}}}return h},processLoad:function(e,d,b,c){var a=b;if(c){a=this.findRecords(c,d,b);this.onAddToMany(e,a,!0)}return a},processUpdate:function(b,f){var a=this,i=a.inverse.cls,h=f.R,e,c,d,g;if(h){for(e in h){c=b.peekRecord(i,e);if(c){g=b.getEntityList(a.cls,h[e]);d=a.getAssociatedItem(c);if(d){d.loadData(g);d.complete=!0}else {c[a.getterName](null,null,g)}}else {b.onInvalidAssociationEntity(i,e)}}}a.processMatrixBlock(b,f.C,1);a.processMatrixBlock(b,f.D,-1)},checkMembership:function(l,i){var d=l.getMatrix(this.association,!0),g,j,k,f,e,h,c,m,b,a;if(!d){return}g=this.left?d.right:d.left;j=g.inverse.role.cls;k=this.inverse;e=g.slices;if(e){f=e[i.id];if(f){c=f.members;for(h in c){m=c[h];if(m[2]!==-1){b=l.peekRecord(j,h);if(b){a=k.getAssociatedItem(b);if(a){a.matrixUpdate=1;a.add(i);a.matrixUpdate=0}}}}}}},onStoreCreate:function(d,c,e){var b=this,a;if(c){a=c.getMatrixSlice(b.inverse,e);a.attach(d);a.notify=b.onMatrixUpdate;a.scope=b}},processMatrixBlock:function(f,b,g){var e=this.inverse,d=this.digitRe,c,a;if(b){for(a in b){if(d.test(a)){a=parseInt(a,10)}c=f.getMatrixSlice(e,a);c.update(b[a],g)}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,!1)}},onAddToMany:function(a,b,c){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,c===!0?0:1);a.matrixUpdate=0}},onRemoveFromMany:function(a,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,-1);a.matrixUpdate=0}},read:function(a,f,e,d){var b=this,c=b.callParent([a,f,e,d]);if(c){a[b.getterName](null,null,c);delete a.data[b.role]}},onMatrixUpdate:function(f,e,g){var a=f.store,b,c,d;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(e);if(g<0){if(b>=0){a.remove([b])}}else {if(b<0){d=a.getSession().getEntry(this.type,e);c=d&&d.record;if(c){a.add(c)}}}a.matrixUpdate=0}},adoptAssociated:function(e,d){var a=this.getAssociatedItem(e),c,b,f;if(a){a.setSession(d);this.onStoreCreate(a,d,e.getId());c=a.getData().items;for(b=0,f=c.length;b<f;++b){d.adopt(c[b])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:!1,side:'right'})},null,'Ext.data.schema.ManyToMany')})},0,0,0,0,0,0,[Ext.data.schema,'ManyToMany'],0);Ext.cmd.derive('Ext.util.Inflector',Ext.Base,{singleton:!0,plurals:[[/(quiz)$/i,'$1zes'],[/^(ox)$/i,'$1en'],[/([m|l])ouse$/i,'$1ice'],[/(matr|vert|ind)ix|ex$/i,'$1ices'],[/(x|ch|ss|sh)$/i,'$1es'],[/([^aeiouy]|qu)y$/i,'$1ies'],[/(hive)$/i,'$1s'],[/(?:([^f])fe|([lr])f)$/i,'$1$2ves'],[/sis$/i,'ses'],[/([ti])um$/i,'$1a'],[/(buffal|tomat|potat)o$/i,'$1oes'],[/(bu)s$/i,'$1ses'],[/(alias|status|sex)$/i,'$1es'],[/(octop|vir)us$/i,'$1i'],[/(ax|test)is$/i,'$1es'],[/^(p)erson$/i,'$1eople'],[/^(m)an$/i,'$1en'],[/(.*)(child)(ren)?$/i,'$1$2ren'],[/s$/i,'s'],[/$/,'s']],singulars:[[/(address)$/i,'$1'],[/(quiz)zes$/i,'$1'],[/(matr)ices$/i,'$1ix'],[/(vert|ind)ices$/i,'$1ex'],[/^(ox)en/i,'$1'],[/(alias|status)es$/i,'$1'],[/(octop|vir)i$/i,'$1us'],[/(cris|ax|test)es$/i,'$1is'],[/(shoe)s$/i,'$1'],[/(o)es$/i,'$1'],[/(bus)es$/i,'$1'],[/([m|l])ice$/i,'$1ouse'],[/(x|ch|ss|sh)es$/i,'$1'],[/(m)ovies$/i,'$1ovie'],[/(s)eries$/i,'$1eries'],[/([^aeiouy]|qu)ies$/i,'$1y'],[/([lr])ves$/i,'$1f'],[/(tive)s$/i,'$1'],[/(hive)s$/i,'$1'],[/([^f])ves$/i,'$1fe'],[/(^analy)ses$/i,'$1sis'],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,'$1$2sis'],[/([ti])a$/i,'$1um'],[/(n)ews$/i,'$1ews'],[/(p)eople$/i,'$1erson'],[/s$/i,'']],uncountable:['sheep','fish','series','species','money','rice','information','equipment','grass','mud','offspring','deer','means'],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(a){if(this.isTransnumeral(a)){return a}var e=this.plurals,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},singularize:function(a){if(this.isTransnumeral(a)){return a}var e=this.singulars,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(a){var c=parseInt(a,10),d=c%10,b=c%100;if(11<=b&&b<=13){return a+'th'}else {switch(d){case 1:return a+'st';case 2:return a+'nd';case 3:return a+'rd';default:return a+'th';}}}},0,0,0,0,0,0,[Ext.util,'Inflector'],function(){var b={alumnus:'alumni',cactus:'cacti',focus:'foci',nucleus:'nuclei',radius:'radii',stimulus:'stimuli',ellipsis:'ellipses',paralysis:'paralyses',oasis:'oases',appendix:'appendices',index:'indexes',beau:'beaux',bureau:'bureaux',tableau:'tableaux',woman:'women',child:'children',man:'men',corpus:'corpora',criterion:'criteria',curriculum:'curricula',genus:'genera',memorandum:'memoranda',phenomenon:'phenomena',foot:'feet',goose:'geese',tooth:'teeth',antenna:'antennae',formula:'formulae',nebula:'nebulae',vertebra:'vertebrae',vita:'vitae'},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}});Ext.cmd.derive('Ext.data.schema.Namer',Ext.Base,{isNamer:!0,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(a){var b=a.match(this.endsWithIdRe,'');if(b){a=a.substr(0,a.length-(b[1]||b[2]).length)}return this.apply('uncapitalize',a)},idField:function(a){return this.apply('uncapitalize,singularize',a)+'Id'},instanceName:function(a){return this.apply('underscore',a)},multiRole:function(a){return this.apply('undotted,uncapitalize,pluralize',a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply('uncapitalize',a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply('underscore',a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return '_'+a},uniRole:function(a){return this.apply('undotted,uncapitalize,singularize',a)},undotted:function(c){if(c.indexOf('.')<0){return c}var a=c.split('.'),b=a.length;while(b-->1){a[b]=this.apply('capitalize',a[b])}return a.join('')},getterName:function(a){var b=a.role;if(a&&a.isMany){return b}return 'get'+this.apply('capitalize',b)},inverseFieldRole:function(e,f,c,d){var a=this,b=a.apply(f?'uniRole':'multiRole',e),g=a.apply('pluralize',c),h=a.apply('undotted,pluralize',d);if(g.toLowerCase()!==h.toLowerCase()){b=c+a.apply('capitalize',b)}return b},manyToMany:function(c,e,d){var b=this,a=b.apply('undotted,capitalize,singularize',e)+b.apply('undotted,capitalize,pluralize',d);if(c){a=b.apply('capitalize',c+a)}return a},manyToOne:function(d,b,a,c){return this.apply('capitalize,singularize',a)+this.apply('capitalize',b)},matrixRole:function(a,c){var b=this.apply(a?'multiRole,capitalize':'multiRole',c);return a?a+b:b},oneToOne:function(d,b,a,c){return this.apply('undotted,capitalize,singularize',a)+this.apply('capitalize',b)},setterName:function(a){return 'set'+this.apply('capitalize',a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(b,c){var e=this,h=e.cache,i=h[c]||(h[c]={}),a=i[b],d,g,f;if(!a){if(b.indexOf(',')<0){a=e[b](c)}else {g=(f=b.split(',')).length;a=c;for(d=0;d<g;++d){a=e.apply(f[d],a)}}i[b]=a}return a}},0,0,0,0,['namer.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,'Namer'],0);Ext.cmd.derive('Ext.data.schema.Schema',Ext.Base,{aliasPrefix:'schema.',isSchema:!0,type:'default',statics:{instances:{},get:function(a){var f=this,g=f.instances,c='default',e=a&&Ext.isString(a),b,d;if(a){if(a.isSchema){return a}c=e?a:a.id||c}if(!(b=g[c])){g[c]=b=f.create(a);b.id=c}else {if(a&&!e){d=Ext.merge({},b.config);Ext.merge(d,a);b.setConfig(d);b.config=d}}return b},lookupEntity:function(b){var a=null,e=this.instances,c,d,f;if(b){if(b.isEntity){a=b.self}else {if(Ext.isFunction(b)){a=b}else {if(Ext.isString(b)){a=Ext.ClassManager.get(b);if(a&&(!a.prototype||!a.prototype.isEntity)){a=null}if(!a){for(d in e){f=e[d];c=f.getEntity(b);if(c){if(a){Ext.raise('Ambiguous entity name "'+b+'". Defined by schema "'+a.schema.type+'" and "'+d+'"')}a=c}}}if(!a){Ext.raise('No such Entity "'+b+'".')}}}}}return a}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:'default',namespace:null,proxy:{type:'ajax',url:'{prefix}/{entityName}'},urlPrefix:''},onClassExtended:function(c,b){var a=b.alias;if(a&&!b.type){if(!Ext.isString(a)){a=a[0]}c.prototype.type=a.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(a){if(a){var b=a.length-1;if(a.charAt(b)!=='.'){a+='.'}}return a},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===!1){break}}}},eachEntity:function(d,c){var b=this.entities,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a].cls)===!1){break}}}},getAssociation:function(b){var a=this.associations[b];return a||null},getEntity:function(b){var a=this.entityClasses[b]||this.entities[b];return a&&a.cls||null},getEntityName:function(c){var d=this.getNamespace(),b,a;if(typeof c==='string'){a=c}else {a=c.$className||null}if(a){if(d){b=d.length;if(a.substring(0,b)!==d){return a}}if(b){a=a.substring(b)}}return a},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(b){var a=this.getEntityName(b);return !!(this.entities[a]||this.entityClasses[a])},addMatrix:function(n,k,l,j,i){var a=this,h=a.getNamer(),m=a.associations,g=a.entities,c=j.type,b=i.type,p=j.field||h.apply('idField',c),o=i.field||h.apply('idField',b),r=j.role||h.matrixRole(l,c),q=i.role||h.matrixRole(l,b),d,f,e;f=g[c]||(g[c]={cls:null,name:c,associations:{}});e=g[b]||(g[b]={cls:null,name:b,associations:{}});++a.assocCount;m[k]=d=new Ext.data.schema.ManyToMany({name:k,schema:a,definedBy:n,left:{cls:f.cls,type:c,role:r,field:p,associationKey:j.associationKey},right:{cls:e.cls,type:b,role:q,field:o,associationKey:i.associationKey}});f.associations[d.right.role]=d.right;e.associations[d.left.role]=d.left;if(f.cls){a.associationEntityMap[f.cls.entityName]=!0}if(e.cls){a.associationEntityMap[e.cls.entityName]=!0}a.decorateModel(d)},addReference:function(g,f,b,m){var e=this,j=e.getNamer(),o=e.entities,s=e.associations,k=g.entityName,a=b.association,t=!!b.legacy,q=b.child,p=b.parent,c=b.role,d=b.type||p||q,l=b.inverse,n=Ext.isString(l)?{role:l}:l,h=n&&n.role,i,r;if(!c){if(t){c=j.apply('uncapitalize',d)}else {c=j.apply('fieldRole',f.name)}}if(!h){h=j.inverseFieldRole(k,m,c,d)}if(!a){if(m){a=j.oneToOne(g,h,d,c)}else {a=j.manyToOne(g,h,d,c)}}i=o[d]||(o[d]={cls:null,name:d,associations:{}});r=m?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;a=new r({name:a,owner:q?'left':p?'right':null,definedBy:g,schema:e,field:f,nullable:f?!!f.allowBlank:!0,legacy:b.legacy,left:{cls:g,type:k,role:h,extra:n},right:{cls:i.cls,type:d,role:c,extra:b}});g.associations[c]=a.right;i.associations[h]=a.left;if(f){f.reference=a.right;g.references.push(f)}++e.assocCount;e.associationEntityMap[k]=!0;if(i.cls){e.associationEntityMap[i.cls.entityName]=!0}s[a.name]=a;if(a.right.cls){e.decorateModel(a)}},privates:{addEntity:function(a){var c=this,i=c.entities,e=a.entityName,b=i[e],j=a.fields,d,g,f,k,h;if(!b){i[e]=b={name:e,associations:{}}}else {d=b.associations;for(h in d){d[h].inverse.cls=a;c.associationEntityMap[e]=!0;c.decorateModel(d[h].association)}}b.cls=a;a.prototype.associations=a.associations=b.associations;c.entityClasses[a.$className]=b;++c.entityCount;for(f=0,k=j.length;f<k;++f){g=j[f];if(g.reference){c.addReferenceDescr(a,g)}}},addMatrices:function(c,a){var e=this,b,f,d;if(Ext.isString(a)){e.addMatrixDescr(c,null,a)}else {if(a[0]){for(b=0,f=a.length;b<f;++b){e.addMatrixDescr(c,null,a[b])}}else {for(d in a){e.addMatrixDescr(c,d,a[d])}}}},addMatrixDescr:function(i,f,a){var h=this,d=i.entityName,k=h.associations,e=h.getNamer(),c=a.left,b=a.right,j,g;if(Ext.isString(a)){if(a.charAt(0)==='#'){c={type:d};b={type:a.substring(1)}}else {if(a.charAt(j=a.length-1)==='#'){c={type:a.substring(0,j)};b={type:d}}else {if(e.apply('multiRole',d)<e.apply('multiRole',a)){c={type:d};b={type:a}}else {c={type:a};b={type:d}}}}}else {g=a.relation;if(c||!b&&e.apply('multiRole',d)<e.apply('multiRole',a.type)){if(!c||c===!0){c={type:d}}else {c=Ext.apply({type:d},c)}b=a}else {if(!b||b===!0){b={type:d}}else {b=Ext.apply({type:d},b)}c=a}}if(!f){f=e.manyToMany(g,c.type,b.type)}if(!(f in k)){h.addMatrix(i,f,g,c,b)}},addReferenceDescr:function(c,b){var d=this,a=b.$reference;if(Ext.isString(a)){a={type:a}}else {a=Ext.apply({},a)}if(a.legacy){if(a.single){d.addLegacySingle(c,a)}else {d.addLegacyHasMany(c,a)}}else {d.addReference(c,b,a,b.unique)}},addPending:function(b,c,d,e){var a=this.pending;if(!a[b]){a[b]=[]}a[b].push([c,d,e])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,a){var d,e,b;a=this.constructLegacyAssociation(c,a);a.single=!0;e=a.type;d=a.foreignKey||e.toLowerCase()+'_id';b=c.getField(d);if(b){b.$reference=a}this.addReference(c,b,a,!0)},addLegacyHasMany:function(g,a){var j=this,l=j.entities,h=j.pending,f=a.associationKey,i,b,c,e,k,d;a=this.constructLegacyAssociation(g,a);b=a.type;e=l[b];if(e&&e.cls){a.type=g.entityName;k=a.foreignKey||a.type.toLowerCase()+'_id';i=e.cls;c=i.getField(k);a.inverse=a||{};d=a.name;if(d||f){if(d){a.inverse.role=d}if(f){a.inverse.associationKey=f}}if(c){c.$reference=a}j.addReference(i,c,a,!1)}else {if(!h[b]){h[b]=[]}h[b].push([g,a])}},constructLegacyAssociation:function(c,a){if(Ext.isString(a)){a={model:a}}a.legacy=!0;a.type=this.getEntityName(a.model);var b=a.associatedName||a.name;if(b){a.role=b}return a},afterLegacyAssociations:function(f){var c=this.pending,d=f.entityName,b=c[d],a,e;if(b){for(a=0,e=b.length;a<e;++a){this.addLegacyHasMany.apply(this,b[a])}delete c[d]}},clear:function(c){var a=this,b=a.timer;delete a.setConfig;if(b){window.clearTimeout(b);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(c){a.setNamespace(null)}},constructProxy:function(c){var b=this,a=Ext.Object.chain(c),d=b.getProxy();a.schema=b;a.prefix=b.getUrlPrefix();return d.apply(a)},applyDecoration:function(a){var g=this,f=a.inverse.cls,e=g.getNamer(),b,c,d;if(f&&!a.decorated){a.decorated=!0;d=f.prototype;if(!(b=a.getterName)){a.getterName=b=e.getterName(a)}d[b]=a.createGetter();if(a.createSetter){if(!(c=a.setterName)){a.setterName=c=e.setterName(a)}d[c]=a.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(g){var a=this,b=a.keyCheckQueue,e=a.timer,f,c,d;if(e){window.clearTimeout(e);a.timer=null}if(!b){return}do{b=a.keyCheckQueue;a.keyCheckQueue=[];for(c=0,f=b.length;c<f;++c){d=b[c];d.role.checkKeyForDrop(d.record)}}while(g&&a.keyCheckQueue.length)},queueKeyCheck:function(d,e){var a=this,b=a.keyCheckQueue,c=a.timer;if(!b){a.keyCheckQueue=b=[]}b.push({record:d,role:e});if(!c){a.timer=c=Ext.Function.defer(a.processKeyChecks,a.getKeyCheckDelay(),a)}},rankEntities:function(){var d=this,e=d.entities,b=Ext.Object.getKeys(e),f=b.length,c,a;d.nextRank=1;b.sort();for(a=0;a<f;++a){c=e[b[a]].cls;if(!c.rank){d.rankEntity(c)}}},rankEntity:function(d){var c=d.associations,b,a,e;for(e in c){a=c[e];if(!a.left&&a.association.field){b=a.cls;if(!b.rank){this.rankEntity(b)}}}d.rank=this.nextRank++}}},1,0,0,0,['schema.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,'Schema'],0);Ext.cmd.derive('Ext.data.AbstractStore',Ext.Base,{factoryConfig:{defaultType:'store',type:'store'},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:undefined,groupDir:'ASC',grouper:null,pageSize:25},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(c){var a=this,b;a.isInitializing=!0;a.mixins.observable.constructor.call(a,c);a.isInitializing=!1;b=a.getStoreId();if(!b&&(c&&c.id)){a.setStoreId(b=c.id)}if(b){Ext.data.StoreManager.register(a)}},getCount:function(){return this.getData().getCount()},rangeCached:function(a,b){return this.getData().getCount()>=Math.max(a,b)},find:function(g,h,d,e,b,c){var a=!e,f=!!(a&&c);return this.getData().findIndex(g,h,d,a,f,!b)},findRecord:function(){var a=this,b=a.find.apply(a,arguments);return b!==-1?a.getAt(b):null},findExact:function(a,c,b){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(a),c)},this,b)},findBy:function(c,a,b){return this.getData().findIndexBy(c,a,b)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,a){var c=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(a&&a.callback){a.callback.call(a.scope||this,c,d,b,a)}return c},getFilters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!a&&b!==!1){this.setFilters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return a},applyFilters:function(c,a){var b;if(!a){a=this.createFiltersCollection();b=!0}a.add(c);if(b){this.onRemoteFilterSet(a,this.getRemoteFilter())}return a},getSorters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!a&&b!==!1){this.setSorters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return a},applySorters:function(c,a){var b;if(!a){a=this.createSortersCollection();b=!0}a.add(c);if(b){this.onRemoteSortSet(a,this.getRemoteSort())}return a},filter:function(a,c,b){if(Ext.isString(a)){a={property:a,value:c}}this.suppressNextFilter=!!b;this.getFilters().add(a);this.suppressNextFilter=!1},removeFilter:function(a,d){var b=this,c=b.getFilters();b.suppressNextFilter=!!d;if(a instanceof Ext.util.Filter){c.remove(a)}else {c.removeByKey(a)}b.suppressNextFilter=!1},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(!1),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(!1),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=!1},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(!1);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=!1},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(!1);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(b){if(b.getTransform()){return}var e=b.getProperty(),d=this.getModel(),c,a;if(d){c=d.getField(e);a=c?c.getSortType():null}if(a&&a!==Ext.identityFn){b.setTransform(a)}},beginUpdate:function(){if(!this.updating++){this.fireEvent('beginupdate')}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent('endupdate');this.onEndUpdate()}},getState:function(){var c=this,e=[],g=c.getFilters(),f=c.getGrouper(),a,d,b;c.getSorters().each(function(a){e[e.length]=a.getState();d=!0});if(c.statefulFilters&&c.saveStatefulFilters){d=!0;a=[];g.each(function(b){a[a.length]=b.getState()})}if(f){d=!0}if(d){b={};if(e.length){b.sorters=e}if(a){b.filters=a}if(f){b.grouper=f.getState()}}return b},applyState:function(b){var a=this,e=b.sorters,c=b.filters,d=b.grouper;if(e){a.getSorters().replaceAll(e)}if(c){a.saveStatefulFilters=!0;a.getFilters().replaceAll(c)}if(d){a.setGrouper(d)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.callParent();a.onDestroy()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.load()}else {a.forceLocalSort()}}else {a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(b,a){if(a){this.fireEvent('beforesort',this,a.getRange())}},onSorterEndUpdate:function(){var a=this,b;b=a.getSorters(!1);if(a.settingGroups||!b){return}b=b.getRange();if(b.length){if(a.getRemoteSort()){a.load({callback:function(){a.fireEvent('sort',a,b)}})}else {a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('sort',a,b)}}else {a.fireEvent('sort',a,b)}},onFilterEndUpdate:function(){var a=this,b=a.suppressNextFilter;if(a.getRemoteFilter()){a.currentPage=1;if(!b){a.load()}}else {if(!b){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}if(a.trackStateChanges){a.saveStatefulFilters=!0}a.fireEvent('filterchange',a,a.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else {this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(b,d){var a=this,c=a.getSorters(!1),e=b||c&&c.length;if(b&&typeof b==='string'){b={property:b,direction:d||a.getGroupDir()}}a.settingGroups=!0;a.getData().setGrouper(b);delete a.settingGroups;if(e){if(a.getRemoteSort()){a.load({scope:a,callback:a.fireGroupChange})}else {a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireGroupChange()}}else {a.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent('groupchange',this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b='';if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?'on':'un']('endupdate',this.onFilterEndUpdate,this)}},onRemoteSortSet:function(c,b){var a=this;if(c){c[b?'on':'un']('endupdate',a.onSorterEndUpdate,a);a.getData()[b?'un':'on']('beforesort',a.onBeforeCollectionSort,a)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,'AbstractStore'],0);Ext.cmd.derive('Ext.data.Error',Ext.Base,{isError:!0,$configPrefixed:!1,config:{field:null,message:''},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,'Error'],0);Ext.cmd.derive('Ext.data.ErrorCollection',Ext.util.MixedCollection,{alternateClassName:'Ext.data.Errors',init:function(d){var b=this,h=d.fields,k=d.data,g,a,l,c,i,f,j,e;for(c=0,i=h.length;c<i;++c){a=h[c];e=a.name;j=k[e];if(a.validate&&!a.validate.$nullFn){g=b.length;f=a.validate(j,null,b,d);if(g===b.length&&f!==!0){b.add(e,f)}}}return b},add:function(b,f){var e=this,d=Ext.data.field.Field.defaultInvalidMessage,a=b,c;if(Ext.isString(b)){a=new Ext.data.Error({field:b,message:f||d})}else {if(!a.isError){a=new Ext.data.Error({field:a.field||a.name,message:a.error||a.message||a.msg||d})}b=a.field}c=e.get(b);if(c){if(Ext.isArray(c)){c.push(a);return c}e.removeAtKey(b);a=[c,a];a.field=b;a=[a]}return Ext.util.MixedCollection.prototype.add.call(this,a)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,'ErrorCollection',Ext.data,'Errors'],0);Ext.cmd.derive('Ext.data.operation.Operation',Ext.Base,{alternateClassName:'Ext.data.Operation',isOperation:!0,config:{synchronous:!1,url:'',params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,idPrefix:'ext-operation-',constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var a=this,b;delete a.error;delete a.success;a.complete=a.exception=!1;a.setStarted();a.request=b=a.doExecute();if(b){b.setOperation(a)}return b},doExecute:Ext.emptyFn,abort:function(){var a=this,b=a.request;if(a.running&&b){a.getProxy().abort(b);a.request=null}},process:function(c,e,d,b){var a=this;b=b!==!1;a.setResponse(d);a.setResultSet(c);if(c.getSuccess()){a.doProcess(c,e,d);a.setSuccessful(b)}else {if(b){a.setException(c.getMessage())}}},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(l,n,m){var j=this,i=j._commitSetOptions,e=j.getRecords(),k=e.length,g=e[0].clientIdProperty,f=l.getRecords(),h=f?f.length:0,d,c,b,a;if(h&&g){d=Ext.Array.toValueMap(e,'id');for(a=0;a<h;++a){c=f[a];b=d[c[g]];if(b){delete d[b.id];delete c[g];b.set(c,i)}}for(a in d){d[a].commit()}}else {for(a=0;a<k;++a){b=e[a];if(h===0||!(c=f[a])){b.commit()}else {b.set(c,i)}}}},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var a=this,b=a.getProxy();a.complete=!0;a.running=!1;a.triggerCallbacks();if(b){b.completeOperation(a)}},setSuccessful:function(a){this.success=!0;if(a){this.setCompleted()}},setException:function(b){var a=this;a.exception=!0;a.success=a.running=!1;a.error=b;a.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===!0},allowWrite:function(){return !0}},1,0,0,0,0,0,[Ext.data.operation,'Operation',Ext.data,'Operation'],0);Ext.cmd.derive('Ext.data.operation.Create',Ext.data.operation.Operation,{action:'create',isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,['data.operation.create'],0,[Ext.data.operation,'Create'],0);Ext.cmd.derive('Ext.data.operation.Destroy',Ext.data.operation.Operation,{action:'destroy',isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var b=this.getRecords(),c=b.length,a;for(a=0;a<c;++a){b[a].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,e){var b={},d=a.idField,c=this.getNameProperty()||'name';b[d[c]]=a.id;return b}},0,0,0,0,['data.operation.destroy'],0,[Ext.data.operation,'Destroy'],0);Ext.cmd.derive('Ext.data.operation.Read',Ext.data.operation.Operation,{action:'read',isReadOperation:!0,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return !1}},0,0,0,0,['data.operation.read'],0,[Ext.data.operation,'Read'],0);Ext.cmd.derive('Ext.data.operation.Update',Ext.data.operation.Operation,{action:'update',isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,['data.operation.update'],0,[Ext.data.operation,'Update'],0);Ext.cmd.derive('Ext.data.validator.Validator',Ext.Base,{isValidator:!0,type:'base',statics:{all:{},register:function(a,c){var b=this.all;b[a.toUpperCase()]=b[a.toLowerCase()]=b[a]=c.prototype}},onClassExtended:function(b,a){if(a.type){Ext.data.validator.Validator.register(a.type,b)}},constructor:function(a){if(typeof a==='function'){this.fnOnly=!0;this.validate=a}else {this.initConfig(a)}},validate:function(){return !0},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,['data.validator.base'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,'Validator'],function(){this.register(this.prototype.type,this)});Ext.cmd.derive('Ext.data.field.Field',Ext.Base,{alternateClassName:'Ext.data.Field',aliasPrefix:'data.field.',type:'auto',factoryConfig:{defaultProperty:'name'},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:'This field is invalid',defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:!1,rank:null,stripRe:/[\$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(f,d){var b=d.sortType,c=f.prototype,e=c.validators,a=d.validators;if(b&&Ext.isString(b)){c.sortType=Ext.data.SortTypes[b]}if(a){if(!Ext.isArray(a)){a=[a]}delete d.validators;if(e){a=e.concat(a)}c.validators=a}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var a=this,n=a.calculateRe,c,l,f,h,b,j,e,m,k,i,g;if(d){if(Ext.isString(d)){a.name=d}else {g=d.validators;if(g){delete d.validators;a.instanceValidators=g}Ext.apply(a,d)}}if(!a.allowNull){a.allowNull=!!a.reference}c=a.calculate;b=a.depends;if(c){a.convert=a.doCalculate;if(!b){if(!(b=c.$depends)){j={};k=c.toString();c.$depends=b=[];e=a.argumentNamesRe.exec(k);m=e?e[1]:'data';while(e=n.exec(k)){if(m===e[1]&&!j[i=e[2]]){j[i]=1;b.push(i)}}}a.depends=b}}f=a.defaultValue;if(a.convert){a.calculated=l=a.convert.length>1;a.evil=l&&!b}if(a.persist===null){a.persist=!c}h=a.sortType;if(!a.sortType){a.sortType=Ext.data.SortTypes.none}else {if(Ext.isString(h)){a.sortType=Ext.data.SortTypes[h]}}if(b&&typeof b==='string'){a.depends=[b]}a.cloneDefaultValue=f!==undefined&&(Ext.isDate(f)||Ext.isArray(f)||Ext.isObject(f))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var d=a.length,e=this._validators,c,b;for(c=0;c<d;++c){b=a[c];if(b.fn){b=b.fn}e.push(Ext.Factory.dataValidator(b))}}},collate:function(d,e){var c=this,a=d,b=e;if(c.sortType){a=c.sortType(a);b=c.sortType(b)}return a===b?0:a<b?-1:1},compare:function(a,b){return a===b?0:a<b?-1:1},isEqual:function(a,b){return this.compare(a,b)===0},convert:null,serialize:null,validate:function(k,f,h,j){var c=this,b='',a,g,e,i,d;if(!c._validators){c.compileValidators()}e=c._validators;for(d=0,i=e.length;d<i;++d){g=e[d];a=g.validate(k,j);if(a!==!0){a=a||c.defaultInvalidMessage;if(h){h.add(c.name,a);b=b||a}else {if(f){if(b){b+=f}b+=a}else {b=a;break}}}}return b||!0},doCalculate:function(b,a){return a?this.calculate(a.data):b},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return 'auto'},deprecated:{'5.1':{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,['data.field.auto'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,'Field',Ext.data,'Field'],0);Ext.cmd.derive('Ext.data.field.Boolean',Ext.data.field.Field,{isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==='boolean'){return a}if(this.allowNull&&(a===undefined||a===null||a==='')){return null}return this.trueRe.test(String(a))},getType:function(){return 'bool'}},0,0,0,0,['data.field.bool','data.field.boolean'],0,[Ext.data.field,'Boolean'],0);Ext.cmd.derive('Ext.data.field.Date',Ext.data.field.Field,{sortType:'asDate',isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(d,e){var b=d instanceof Date,c=e instanceof Date,a;if(c&&b){a=d.getTime()-e.getTime();if(a===0){a=0}else {a=a<0?-1:1}}else {if(b===c){a=0}else {a=b?1:-1}}return a},convert:function(a){if(!a){return null}if(a instanceof Date){return a}var c=this.dateReadFormat||this.dateFormat,b;if(c){return Ext.Date.parse(a,c)}b=Date.parse(a);return b?new Date(b):null},serialize:function(b){var c=null,a;if(Ext.isDate(b)){a=this.getDateWriteFormat();c=a?Ext.Date.format(b,a):b}return c},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty('dateWriteFormat')){return a.dateWriteFormat}if(a.hasOwnProperty('dateFormat')){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||'timestamp'},getType:function(){return 'date'}},0,0,0,0,['data.field.date'],0,[Ext.data.field,'Date'],0);Ext.define('CGA.field.DateExt',{override:'Ext.data.field.Date',adjustMilestones:!1,convert:function(b){if(!b){return null}if(b instanceof Date){return b}var c=this.dateReadFormat||this.dateFormat,a;if(c){a=Ext.Date.parse(b,c)}else {a=Date.parse(b)}if(a){var d=0;if(this.name=='StartDate'||this.name=='StartedDate'||this.name=='BaselineStartDate'){a=CGA.utils.date.resetStart(a)}else {if(this.name=='EndDate'||this.name=='CompletedDate'||this.name=='BaselineEndDate'||this.name=='ExternalDueDate'||this.name=='InternalDueDate'){a=CGA.utils.date.resetEnd(a)}else {if(this.name=='issueDueDate'||this.name=='WeeklyStartDate'||this.name=='WeeklyEndDate'||this.name=='MonthlyStartDate'||this.name=='MonthlyEndDate'||this.name=='BaseLinePlanedStartDate'||this.name=='BaseLinePlanedEndDate'||this.name=='stageDate'){a=b}else {throw 'Unknown Date field: '+this.name}}}return a}return null}});Ext.cmd.derive('Ext.data.field.Integer',Ext.data.field.Field,{isNumeric:!0,isIntegerField:!0,numericType:'int',convert:function(a){if(typeof a==='number'){return this.getNumber(a)}var d=a===undefined||a===null||a==='',c=this.allowNull,b;if(d){b=c?null:0}else {b=this.parse(a);if(c&&isNaN(b)){b=null}}return b},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,''),10)},sortType:function(a){if(a==null){a=Infinity}return a}},0,0,0,0,['data.field.int','data.field.integer'],0,[Ext.data.field,'Integer'],0);Ext.cmd.derive('Ext.data.field.Number',Ext.data.field.Integer,{isIntegerField:!1,isNumberField:!0,numericType:'float',getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,''))}},0,0,0,0,['data.field.float','data.field.number'],0,[Ext.data.field,'Number'],0);Ext.cmd.derive('Ext.data.field.String',Ext.data.field.Field,{sortType:'asUCString',isStringField:!0,convert:function(a){var b=this.allowNull?null:'';return a===undefined||a===null?b:String(a)},getType:function(){return 'string'}},0,0,0,0,['data.field.string'],0,[Ext.data.field,'String'],0);Ext.cmd.derive('Ext.data.identifier.Generator',Ext.Base,{'abstract':!0,factoryConfig:{defaultType:'sequential'},isGenerator:!0,config:{id:null},constructor:function(a){var c=this,d,b;c.initConfig(a);b=c.getId();if(b){d=a&&a.cache||Ext.data.identifier.Generator.all;d[b]=c}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,['data.identifier.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,'Generator'],function(){var b=this,a=Ext.Factory,c=a.dataIdentifier;a.dataIdentifier=function(a){var d=Ext.isString(a)?a:a&&a.id,e=d&&(a&&a.cache||b.all)[d];return e||c(a)}});Ext.cmd.derive('Ext.data.identifier.Sequential',Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var a=this,c=a._seed,b=a._prefix;a._seed+=a._increment;return b!==null?b+c:c}},0,0,0,0,['data.identifier.sequential'],0,[Ext.data.identifier,'Sequential'],0);Ext.cmd.derive('Ext.data.Model',Ext.Base,{alternateClassName:'Ext.data.Record',isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,observableType:'record',constructor:function(b,e){var a=this,c=a.self,g=c.identifier,n=Ext.data.Model,k=n.identifier,l=a.idField.name,j,d,h,m,o,f,i;a.data=a.data=b||(b={});a.session=e||null;a.internalId=m=k.generate();if((j=b) instanceof Array){a.data=b={};i=a.getFields();o=Math.min(i.length,j.length);for(f=0;f<o;++f){b[i[f].name]=j[f]}}if(!(h=c.initializeFn)){c.initializeFn=h=n.makeInitializeFn(c)}if(!h.$nullFn){c.initializeFn(a)}if(!(a.id=d=b[l])&&d!==0){if(e){g=e.getIdentifier(c);d=g.generate()}else {if(k===g){d=m}else {d=g.generate()}}b[l]=a.id=d;a.phantom=!0}if(e){e.add(a)}if(a.init&&Ext.isFunction(a.init)){a.init()}},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:'id',manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:'default',versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var a=this,c=a.modified,b=a.previousValues;if(!a.editing){a.editing=!0;a.editMemento={dirty:a.dirty,data:Ext.apply({},a.data),generation:a.generation,modified:c&&Ext.apply({},c),previousValues:b&&Ext.apply({},b)}}},cancelEdit:function(){var a=this,b=a.editMemento;if(b){a.editing=!1;Ext.apply(a,b);a.editMemento=null}},endEdit:function(d,b){var a=this,c=a.editMemento;if(c){a.editing=!1;a.editMemento=null;a.previousValues=c.previousValues;if(!d){if(!b){b=a.getModifiedFieldNames(c.data)}if(a.dirty||b&&b.length){a.callJoined('afterEdit',[b])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(a){var b;if(this.isModified(a)){b=this.modified[a]}return b},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(i,E,I){var a=this,A=a.self,t=a.data,f=a.modified,F=a.previousValues,r=a.session,n=Ext.isString(i),e=n?I:E,C=e?e.convert!==!1:a.convertOnSet,H=a.fieldsMap,x=e&&e.silent,w=e&&e.commit,G=!(e&&e.refs===!1)&&r,y=!(e&&e.dirty===!1&&!w),k=null,j,b,D,B,c,z,o,u,p,v,d=0,q,s,l,m,h,g;if(n){g=a._singleProp;g[i]=E}else {g=i}if(!(l=A.rankedFields)){l=A.rankFields()}q=l.length;do{for(c in g){h=g[c];j=t[c];o=a;b=H[c];if(b){if(C&&b.convert){h=b.convert(h,a)}o=b;m=b.reference}else {m=null}if(o.isEqual(j,h)){continue}t[c]=h;(k||(k=[])).push(c);(F||(a.previousValues=F={}))[c]=j;if(m&&m.cls){if(G){r.updateReference(a,b,h,j)}m.onValueChange(a,r,h,j)}v=(p=b&&b.dependents)&&p.length;while(v-->0){(u=p[v]).dirty=!0;d=d?Math.min(d,u.rank):u.rank}if(!b||b.persist){if(f&&f.hasOwnProperty(c)){if(!y||o.isEqual(f[c],h)){delete f[c];a.dirty=-1}}else {if(y){if(!f){a.modified=f={}}a.dirty=!0;f[c]=j}}}if(c===a.idField.name){D=!0;z=j;s=h}}if(!d){break}b=l[d-1];b.dirty=!1;if(n){delete g[i]}else {g=a._singleProp;n=!0}i=b.name;g[i]=t[i];C=!0;for(;d<q;++d){if(l[d].dirty){break}}if(d<q){++d}else {d=0}}while(1);if(a.dirty<0){a.dirty=!1;for(B in f){if(f.hasOwnProperty(B)){a.dirty=!0;break}}}if(n){delete g[i]}++a.generation;if(D){a.id=s;a.callJoined('onIdChanged',[z,s])}if(w){a.commit(x,k)}else {if(!x&&!a.editing&&k){a.callJoined('afterEdit',[k])}}return k},reject:function(c){var a=this,b=a.modified;if(b){a.set(b,a._rejectOptions)}a.dropped=!1;a.clearState();if(!c){a.callJoined('afterReject')}},commit:function(f,e){var a=this,b=a.versionProperty,d=a.data,c;a.clearState();if(b&&!a.phantom&&!isNaN(d[b])){++d[b]}a.phantom=!1;if(a.dropped){a.erased=c=!0}if(!f){if(c){a.callJoined('afterErase')}else {a.callJoined('afterCommit',[e])}}},clearState:function(){var a=this;a.dirty=a.editing=!1;a.editMemento=a.modified=null},drop:function(d){var a=this,b=a.associations,e=a.session,c;if(a.erased||a.dropped){return}a.dropped=!0;if(b&&d!==!1){for(c in b){b[c].onDrop(a,e)}}a.callJoined('afterDrop');if(a.phantom){a.setErased()}},join:function(b){var c=this,a=c.joined;if(!a){a=c.joined=[b]}else {if(!a.length){a[0]=b}else {Ext.Array.include(a,b)}}if(b.isStore&&!c.store){c.store=b}},unjoin:function(b){var f=this,a=f.joined,d=a&&a.length,c=f.store,e;if(d===1&&a[0]===b){a.length=0}else {if(d){Ext.Array.remove(a,b)}}if(c===b){c=null;if(a){for(e=0,d=a.length;e<d;++e){b=a[e];if(b.isStore){c=b;break}}}f.store=c}},clone:function(d){var a=this,c=a.modified,b=a.copy(a.id,d);if(c){b.modified=Ext.apply({},c)}b.dirty=a.dirty;b.dropped=a.dropped;b.phantom=a.phantom;return b},copy:function(a,e){var c=this,b=Ext.apply({},c.data),d=c.idProperty,f=c.self;if(a||a===0){b[d]=a}else {if(a===null){delete b[d]}}return new f(b,e)},getProxy:function(){return this.self.getProxy()},getValidation:function(c){var b=this,a=b.validation;if(!a){b.validation=a=new Ext.data.Validation();a.attach(b)}if(c===!0||c!==!1&&a.syncGeneration!==b.generation){a.refresh(c)}return a},validate:function(){return (new Ext.data.ErrorCollection()).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var a=this.$className.split('.'),b=a[a.length-1].toLowerCase();return b+'/'+this.getId()},erase:function(b){var a=this;a.erasing=!0;a.drop();a.erasing=!1;return a.save(b)},setErased:function(){this.erased=!0;this.callJoined('afterErase')},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(g,a){var c=this,n=c.associations,i,j,b,m,f,o,e,p,l,d,h,k;g=g||{};c.$gathering=1;if(a){a=Ext.Object.chain(a)}for(l in n){p=n[l];b=p.getAssociatedItem(c);if(!b||b.$gathering){continue}if(b.isStore){b.$gathering=1;m=b.getData().items;o=m.length;f=[];for(j=0;j<o;++j){e=m[j];i=!e.$gathering;e.$gathering=1;if(a){k=a.associated;if(k===undefined){a.associated=i;h=!0}else {if(!i){a.associated=!1;h=!0}}d=a}else {d=i?c._getAssociatedOptions:c._getNotAssociatedOptions}f.push(e.getData(d));if(h){a.associated=k;h=!1}delete e.$gathering}delete b.$gathering}else {d=a||c._getAssociatedOptions;if(a&&a.associated===undefined){d.associated=!0}f=b.getData(d)}g[l]=f}delete c.$gathering;return g},getData:function(m){var a=this,f={},e=m===!0?a._getAssociatedOptions:m||f,h=a.data,n=e.associated,k=e.changes,p=k&&e.critical,l=k?a.modified:h,o=a.fieldsMap,q=e.persist,j=e.serialize,g,b,i,d,c;if(l){for(d in l){c=h[d];b=o[d];if(b){if(q&&!b.persist){continue}if(j&&b.serialize){c=b.serialize(c,a)}}f[d]=c}}if(p){g=a.self.criticalFields||a.getCriticalFields();for(i=g.length;i-->0;){d=(b=g[i]).name;if(!(d in f)){c=h[d];if(j&&b.serialize){c=b.serialize(c,a)}f[d]=c}}}if(n){a.getAssociatedData(f,e)}return f},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(a){a=Ext.apply({},a);var b=this,d=a.scope||b,g=b.getProxy(),f=a.callback,c=b.loadOperation,h=b.getId(),e;if(c){e=c.extraCalls;if(!e){e=c.extraCalls=[]}e.push(a);return c}a.id=h;a.recordCreator=function(e,f,c){var d=b.session;if(c){c.recordCreator=d?d.recordCreator:null}b.set(e,b._commitOptions);return b};a.internalCallback=function(e){var h=e.wasSuccessful()&&e.getRecords().length>0,l=b.loadOperation,i=l.extraCalls,c=[b,e],j=[b,e,h],g,k;b.loadOperation=null;if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(f,d,j);if(i){for(g=0,k=i.length;g<k;++g){a=i[g];if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(a.callback,d,j)}}b.callJoined('afterLoad')};delete a.callback;b.loadOperation=c=g.createOperation('read',a);c.execute();return c},save:function(a){a=Ext.apply({},a);var b=this,f=b.phantom,e=b.dropped,h=e?'destroy':f?'create':'update',d=a.scope||b,g=a.callback,i=b.getProxy(),c;a.records=[b];a.internalCallback=function(e){var c=[b,e],f=e.wasSuccessful();if(f){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}c.push(f);Ext.callback(g,d,c)};delete a.callback;c=i.createOperation(h,a);if(e&&f){c.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);b.setErased();c.setSuccessful(!0)}else {c.execute()}return c},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(k,i){var c=this,m=c.prototype,n=Ext.data.field.Field,f=c.fields,j=c.fieldsMap,e=c.fieldOrdinals,d,a,g,h,b,l;if(i===!0){f.length=0;c.fieldsMap=j={};c.fieldOrdinals=e={}}else {if(i){for(a=i.length;a-->0;){b=i[a];if(b in e){delete e[b];delete j[b]}}for(a=0,h=f.length;a<h;++a){b=(d=f[a]).name;if(b in e){e[b]=a}else {f.splice(a,1);--a;--h}}}}for(a=0,h=k?k.length:0;a<h;a++){b=(d=k[a]).name;if(!(b in e)){e[b]=l=f.length;f.push(d=n.create(d));j[b]=d;d.ordinal=l;d.definedBy=d.owner=this}}c.idField=m.idField=g=j[m.idProperty];g.allowNull=g.critical=g.identifier=!0;g.defaultValue=null;c.initializeFn=c.rankedFields=c.transientFields=c.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(b){var c=this,a=c.idField,d=a.calculated?(new c(b)).id:b[a.name];return d},createWithId:function(c,b,e){var a=b,d=this;if(c||c===0){a={};if(b){Ext.apply(a,b)}a[d.idField.name]=c}return new d(a,e)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==='string'){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(a){var b=this,c;if(a){if(!a.isProxy){a=Ext.Factory.proxy(a)}else {c=a.getModel();if(c&&c!==b){a=a.clone()}}a.setModel(b)}return b.prototype.proxy=b.proxy=a},load:function(e,c,d){var b={},a;b[this.prototype.idProperty]=e;a=new this(b,d);a.load(c);return a}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(c,d){var f=this,b=f.stores,e=b.length,a;for(a=0;a<e;++a){c.call(d,b[a])}},join:function(b){var a=this,d=a.stores,c=a.joined;if(!c){c=a.joined=[b]}else {c.push(b)}if(b.isStore){a.store=a.store||b;if(!d){d=a.stores=[]}d.push(b)}},unjoin:function(b){var c=this,d=c.stores,a=c.joined;if(a.length===1){a.length=0}else {Ext.Array.remove(a,b)}if(b.isStore){Ext.Array.remove(d,b);c.store=d[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},copyFrom:function(c){var a=this,i=a.fields,k=i.length,g=[],j,f=0,e,h,l=a.idProperty,b,d;if(c){e=a.data;h=c.data;for(;f<k;f++){j=i[f];b=j.name;if(b!==l){d=h[b];if(d!==undefined&&!a.isEqual(e[b],d)){e[b]=d;g.push(b)}}}if(a.phantom&&!c.phantom){a.beginEdit();a.setId(c.getId());a.endEdit(!0);a.commit(!0)}}return g},callJoined:function(h,a){var f=this,d=f.joined,c=f.session,g,i,b,e;if(!d&&!c){return}if(a){a.unshift(f)}else {a=[f]}if(d){for(g=0,i=d.length;g<i;++g){e=d[g];if(e&&(b=e[h])){b.apply(e,a)}}}b=c&&c[h];if(b){b.apply(c,a)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(f){var c=this,b=c.data,d=[],e=f||c.editMemento.data,a;for(a in b){if(b.hasOwnProperty(a)){if(!c.isEqual(b[a],e[a],a)){d.push(a)}}}return d},isEqual:function(b,c,a){var d;if(a){d=a.isField?a:this.fieldsMap[a];if(d){return d.isEqual(b,c)}}if(b instanceof Date&&c instanceof Date){return b.getTime()===c.getTime()}return b===c},statics:{EDIT:'edit',REJECT:'reject',COMMIT:'commit',defaultProxy:'memory',rankFields:function(){var d=this,g=d.prototype,h=d.fields,f=h.length,c=[],j=[],i=[],e,a,b;d.rankedFields=g.rankedFields=c;d.criticalFields=g.criticalFields=j;d.transientFields=g.transientFields=i;for(b=0;b<f;++b){a=h[b];if(a.critical){j.push(a)}if(!a.persist){i.push(a)}if(a.evil){(e||(e=[])).push(a)}else {if(!a.depends){c.push(a);a.rank=c.length}}}for(b=0;b<f;++b){if(!(a=h[b]).rank&&!a.evil){d.topoAdd(a)}}if(e){for(b=0,f=e.length;b<f;++b){c.push(a=e[b]);a.rank=c.length}}return c},topoAdd:function(b){var d=this,e=b.depends,g=e?e.length:0,f=d.rankedFields,c,a;for(c=0;c<g;++c){a=d.fieldsMap[e[c]];(a.dependents||(a.dependents=[])).push(b);if(!a.rank){d.topoAdd(a)}}f.push(b);b.rank=f.length},initFields:function(u,g,j){var t=Ext.data.field.Field,q=u.fields,e=[],h={},f={},v=[],r=j.fields,p=u.versionProperty||j.versionProperty,l=g.idProperty,d,a,b,n,k,c,m,i,o,s;g.fields=j.fields=e;g.fieldOrdinals=j.fieldOrdinals=h;g.fieldsMap=j.fieldsMap=f;g.references=j.references=v;if(r){for(b=0,n=r.length;b<n;++b){e[b]=a=Ext.Object.chain(r[b]);a.dependents=null;a.owner=g;h[k=a.name]=b;f[k]=a;a.rank=null;if(a.generated){i=a;o=a.name}}}if(q){delete u.fields;for(b=0,n=q.length;b<n;++b){a=q[b];m=a.reference;if(m&&typeof m!=='string'){m=Ext.merge({},m)}a.$reference=m;a=t.create(q[b]);k=a.name;c=h[k];if(c===undefined){h[k]=c=e.length}f[k]=a;e[c]=a;a.definedBy=a.owner=g;a.ordinal=c;if(k===l){s=a}}}d=f[l];if(!d){if(i&&i.generated){c=i.ordinal}else {c=e.length}delete f[o];delete h[o];d=new t(l);e[c]=d;h[l]=c;f[l]=d;d.definedBy=g;d.ordinal=c;d.generated=!0}else {if(s&&i&&i.generated){Ext.Array.remove(e,i);delete f[o];delete h[o];f[l]=s;for(b=0,n=e.length;b<n;++b){a=e[b];e.ordinal=b;h[a.name]=b}}}d.allowNull=d.critical=d.identifier=!0;d.defaultValue=null;g.idField=j.idField=d;if(p){a=f[p];if(!a){c=e.length;a=new t({name:p,type:'int'});e[c]=a;h[p]=c;f[p]=a;a.definedBy=g;a.ordinal=c;a.generated=!0}a.defaultValue=1;a.critical=!0}},initValidators:function(j,n,m){var i=m.validators,b,e,g,c,h,l,d,a,k,f;if(i){b={};for(e in i){b[e]=Ext.Array.clone(i[e])}}c=j.validators||j.validations;if(c){delete j.validators;b=b||{};if(Ext.isArray(c)){g={};for(h=0,l=c.length;h<l;++h){f=c[h];a=f.field;if(!g[a]){g[a]=[]}f=f.fn||f;g[a].push(f)}c=g}for(a in c){d=c[a];if(!Ext.isArray(d)){d=[d]}k=b[a];if(b[a]){Ext.Array.push(k,d)}else {b[a]=d}}}if(b){for(a in b){e=n.getField(a);if(e){e.setModelValidators(b[a])}}}n.validators=m.validators=b},initAssociations:function(d,b,e){var f=b.associations,g=b.belongsTo,h=b.hasMany,i=b.hasOne,k=b.manyToMany,a,c,j;delete b.manyToMany;if(k){d.addMatrices(e,k)}delete b.associations;delete b.belongsTo;delete b.hasMany;delete b.hasOne;if(f){f=Ext.isArray(f)?f:[f];for(a=0,c=f.length;a<c;++a){j=f[a];switch(j.type){case 'belongsTo':d.addLegacyBelongsTo(e,j);break;case 'hasMany':d.addLegacyHasMany(e,j);break;case 'hasOne':d.addLegacyHasOne(e,j);break;}}}if(g){g=Ext.isArray(g)?g:[g];for(a=0,c=g.length;a<c;++a){d.addLegacyBelongsTo(e,g[a])}}if(h){h=Ext.isArray(h)?h:[h];for(a=0,c=h.length;a<c;++a){d.addLegacyHasMany(e,h[a])}}if(i){i=Ext.isArray(i)?i:[i];for(a=0,c=i.length;a<c;++a){d.addLegacyHasOne(e,i[a])}}d.afterLegacyAssociations(e)},initIdentifier:function(d,e,f){var a=d.identifier||d.idgen,b=f.identifier||e.schema._defaultIdentifier,c;if(a){delete d.identifier;delete d.idgen;a=Ext.Factory.dataIdentifier(a)}else {if(b){if(b.clone&&!b.getId()){a=b.clone()}else {if(b.isGenerator){a=b}else {a=Ext.Factory.dataIdentifier(b)}}}}e.identifier=f.identifier=a;if(!a){c=e.entityName;if(!c){c=Ext.id(null,'extModel')}e.identifier=Ext.Factory.dataIdentifier({type:'sequential',prefix:c+'-'})}},findValidator:function(f,g,d){var h=d.type||d,b=f[g],e,a,c;if(b){for(a=0,e=b.length;a<e;++a){c=b[a];if(c.type===h){return c}}}return null},makeInitializeFn:function(o){var a=['var '],g=['\nreturn function (e) {\n    var data = e.data, v;\n'],p=[],n=0,i,j,h,c,l,f,e,d,k,b,m;if(!(e=o.rankedFields)){e=o.rankFields()}for(b=0,m=e.length;b<m;++b){f=e[b];p[b]=d='f'+b;h=f.convert;if(b){a.push(',  \n    ')}a.push(d,' = $fields['+b+']');if((k=f.defaultValue!==undefined)||h){c='data["'+f.name+'"]';++n;i=j='';if(f.cloneDefaultValue){i='Ext.clone(';j=')'}g.push('\n');if(h&&k){g.push('    v = ',c,';\n    if (v !== undefined) {\n        v = ',d,'.convert(v, e);\n    }\n    if (v === undefined) {\n        v = ',i,d,'.defaultValue',j,';\n    }\n    ',c,' = v;')}else {if(h){g.push('    v = ',d,'.convert(',c,',e);\n    if (v !== undefined) {\n        ',c,' = v;\n    }\n')}else {if(k){g.push('    if (',c,' === undefined) {\n        ',c,' = ',i,d,'.defaultValue',j,';\n    }\n')}}}}}if(!n){return Ext.emptyFn}a.push(';\n');a.push.apply(a,g);a.push('}');a=a.join('');l=new Function('$fields','Ext',a);return l(e,Ext)}}}},1,0,0,0,0,0,[Ext.data,'Model',Ext.data,'Record'],function(){var a=this,b=a.prototype,c=Ext.data.schema.Schema,d;a.proxyConfig=b.proxy;delete b.proxy;a.fields=[];a.fieldsMap=b.fieldsMap={};a.schema=b.schema=c.get(b.schema);b.idField=new Ext.data.field.Field(b.idProperty);a.identifier=new Ext.data.identifier.Sequential();a.onExtended(function(b,e){var f=b.prototype,k=e.schema,j=f.superclass.self,g,h,i;b.idProperty=e.idProperty||f.idProperty;if(k){delete e.schema;g=c.get(k)}else {if(!(g=f.schema)){g=d||(d=c.get('default'))}}b.rankFields=a.rankFields;b.topoAdd=a.topoAdd;f.schema=b.schema=g;if(!(h=e.entityName)){f.entityName=h=g.getEntityName(b)}b.entityName=h;b.fieldExtractors={};a.initIdentifier(e,b,f);a.initFields(e,b,f);a.initValidators(e,b,f);b.fields.items=b.fields;if(h){g.addEntity(b);a.initAssociations(g,e,b)}i=e.proxy;if(i){delete e.proxy}else {if(j!==a){i=j.proxyConfig||j.proxy}}b.proxyConfig=i})});Ext.cmd.derive('Ext.data.ResultSet',Ext.Base,{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,success:!1,records:null,message:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}},1,0,0,0,0,0,[Ext.data,'ResultSet'],0);Ext.cmd.derive('Ext.data.reader.Reader',Ext.Base,{alternateClassName:['Ext.data.Reader','Ext.data.DataReader'],factoryConfig:{defaultType:null},config:{totalProperty:'total',successProperty:'success',rootProperty:'',messageProperty:'',typeProperty:'',implicitIncludes:!0,readRecordsOnFailure:!0,model:null,proxy:null,transform:null,keepRawData:null},isReader:!0,constructor:function(a){if(a&&a.hasOwnProperty('root')){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else {if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(!0)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:a.msg})}else {c=this.readRecords(a,d)}}else {c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return {__$isError:!0,msg:a}},readRecords:function(b,l,f){var a=this,m=f&&f.recordsOnly,n=f&&f.asRoot,h,g,d,e,j,c,k,i;i=this.getTransform();if(i){b=i(b)}a.buildExtractors();if(a.getKeepRawData()){a.rawData=b}if(a.hasListeners.rawdata){a.fireEventArgs('rawdata',[b])}b=a.getData(b);h=!0;g=0;d=[];if(a.getSuccessProperty()){c=a.getSuccess(b);if(c===!1||c==='false'){h=!1}}if(a.getMessageProperty()){k=a.getMessage(b)}if(h||a.getReadRecordsOnFailure()){e=n||Ext.isArray(b)?b:a.getRoot(b);if(e){j=e.length}if(a.getTotalProperty()){c=parseInt(a.getTotal(b),10);if(!isNaN(c)){j=c}}if(e){d=a.extractData(e,l);g=d.length}}return m?d:new Ext.data.ResultSet({total:j||g,count:g,records:d,success:h,message:k})},extractData:function(f,c){var b=this,h=c&&c.model?Ext.data.schema.Schema.lookupEntity(c.model):b.getModel(),k=h.schema,o=k.hasAssociations(h)&&b.getImplicitIncludes(),n=b.getFieldExtractorInfo(h.fieldExtractors),i=f.length,m=new Array(i),l=b.getTypeProperty(),j,e,d,a,g;if(!i&&Ext.isObject(f)){f=[f];i=1}for(g=0;g<i;g++){a=f[g];if(!a.isModel){e=a;if(l&&(d=b.getChildType(k,e,l))){j=d.getProxy().getReader();a=j.extractRecord(e,c,d,k.hasAssociations(d)&&j.getImplicitIncludes(),j.getFieldExtractorInfo(d.fieldExtractors))}else {a=b.extractRecord(e,c,h,o,n)}if(a.isModel&&a.isNode){a.raw=e}}if(a.onLoad){a.onLoad()}m[g]=a}return m},getChildType:function(d,c,a){var b;switch(typeof a){case 'string':return d.getEntity(c[a]);case 'object':b=a.namespace;return d.getEntity((b?b+'.':'')+c[a.name]);case 'function':return d.getEntity(a(c));}},extractRecordData:function(d,a){var b=a&&a.model?Ext.data.schema.Schema.lookupEntity(a.model):this.getModel(),c=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(d,a,b,!1,c)},extractRecord:function(e,b,g,i,f){var a=this,h=b&&b.recordCreator||a.defaultRecordCreator,d,c;d=a.extractModelData(e,f);c=h.call(a,d,g||a.getModel(),b);if(i&&c.isModel){a.readAssociated(c,e,b)}return c},getFieldExtractorInfo:function(a){if(!a){return}var c=this.$className,b=a[c];if(b===undefined){a[c]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var f=this.getFields(),j=f.length,c=[],e=[],i=null,h=0,d,g,a,b;for(a=0;a<j;++a){d=f[a];b=this.createFieldAccessor(d);if(b){g=d.name;c.push('val = extractors['+h+"](raw); if (val !== undefined) { data['"+g+"'] = val; }");e.push(b);++h}}if(c.length){i={extractors:e,fn:new Function('raw','data','extractors','var val;'+c.join(''))}}return i},defaultRecordCreator:function(c,b){var a=new b(c);a.phantom=!1;return a},getModelData:function(a){return {}},extractModelData:function(c,a){var b=this.getModelData(c),d;if(a){d=a.fn;d(c,b,a.extractors)}return b},readAssociated:function(d,f,e){var a=d.associations,c,b;for(c in a){if(a.hasOwnProperty(c)){b=a[c];if(b.cls){b.read(d,f,this,e)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(a){var b=this,g=a.fields,e,d,c,f;b.metaData=a;if(a.root){b.setRootProperty(a.root)}if(a.totalProperty){b.setTotalProperty(a.totalProperty)}if(a.successProperty){b.setSuccessProperty(a.successProperty)}if(a.messageProperty){b.setMessageProperty(a.messageProperty)}c=a.clientIdProperty;if(g){d=Ext.define(null,{extend:'Ext.data.Model',fields:g,clientIdProperty:c});b.setModel(d);f=b.getProxy();if(f){f.setModel(d)}}else {if(c){e=b.getModel();if(e){e.self.prototype.clientIdProperty=c}}}},buildExtractors:function(e){var a=this,d,c,b;if(e||!a.hasExtractors){d=a.getTotalProperty();c=a.getSuccessProperty();b=a.getMessageProperty();if(d){a.getTotal=a.getAccessor(d)}if(c){a.getSuccess=a.getAccessor(c)}if(b){a.getMessage=a.getAccessor(b)}a.hasExtractors=!0;return !0}},getAccessor:function(b){var c=this,e=c.extractorCache,a,d;if(typeof b==='string'){d=c.getAccessorKey(b);a=e.get(d);if(!a){a=c.createAccessor(b);e.add(d,a)}}else {a=c.createAccessor(b)}return a},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(b){var a=this;b.buildExtractors();a.getTotal=b.getTotal;a.getSuccess=b.getSuccess;a.getMessage=b.getMessage;++a.duringInit;a.setConfig(b.getConfig());--a.duringInit;a.hasExtractors=!0}}},1,0,0,0,['reader.base'],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,'Reader',Ext.data,'Reader',Ext.data,'DataReader'],function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:''})});a.extractorCache=new Ext.util.LruCache()});Ext.cmd.derive('Ext.data.writer.Writer',Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:['Ext.data.DataWriter','Ext.data.Writer'],config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:'name',writeRecordId:!0,transform:null},isWriter:!0,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(d){var b=d.getOperation(),c=b.getRecords()||[],f=c.length,e=[],a;for(a=0;a<f;a++){e.push(this.getRecordData(c[a],b))}return this.writeRecords(d,e)},writeRecords:Ext.emptyFn,getRecordData:function(e,p){var d=this,j=d.getNameProperty(),l=j!=='name',h=e.self.idField,b=h[j]||h.name,a=e.id,q=d.getWriteAllFields(),c,k,n,m,i,o,f,g;if(h.serialize){a=h.serialize(a)}if(!q&&p&&p.isDestroyOperation){c={};c[b]=a}else {k=d.getDateFormat();n=e.phantom;m=n||q?d.getAllDataOptions():d.getPartialDataOptions();i=n&&d.getClientIdProperty();o=e.getFieldsMap();m.serialize=!1;f=e.getData(m);c=l?{}:f;if(i){c[i]=a;delete f[b]}else {if(!d.getWriteRecordId()){delete f[b]}}for(b in f){a=f[b];if(!(g=o[b])){if(l){c[b]=a}}else {if(g.isDateField&&k&&Ext.isDate(a)){a=Ext.Date.format(a,k)}else {if(g.serialize){a=g.serialize(a,e)}}if(l){b=g[j]||b}c[b]=a}}}return c}},1,0,0,0,['writer.base'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,'Writer',Ext.data,'DataWriter',Ext.data,'Writer'],0);Ext.cmd.derive('Ext.data.proxy.Proxy',Ext.Base,{$configPrefixed:!1,alternateClassName:['Ext.data.DataProxy','Ext.data.Proxy'],config:{batchOrder:'create,update,destroy',batchActions:!0,model:undefined,reader:{type:'json'},writer:{type:'json'}},isProxy:!0,isSynchronous:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=!0}return Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();if(!b){b=a.getModel();if(b){c.setModel(b)}}else {a.setModel(b)}if(a.onMetaChange){a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c)}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent('metachange',this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(a,l){var c=this,m=c.getBatchActions(),b,d,h,j,e,f,g,k,i;if(a.operations===undefined){a={operations:a,listeners:l}}if(a.batch){if(Ext.isDefined(a.batch.runOperation)){b=Ext.applyIf(a.batch,{proxy:c,listeners:{}})}}else {a.batch={proxy:c,listeners:a.listeners||{}}}if(!b){b=new Ext.data.Batch(a.batch)}b.on('complete',Ext.bind(c.onBatchComplete,c,[a],0));h=c.getBatchOrder().split(',');j=h.length;for(f=0;f<j;f++){e=h[f];d=a.operations[e];if(d){if(m){b.add(c.createOperation(e,{records:d,params:a.params}))}else {k=d.length;for(g=0;g<k;g++){i=d[g];b.add(c.createOperation(e,{records:[i],params:a.params}))}}}}b.start();return b},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else {if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(b,c){var a=Ext.createByAlias('data.operation.'+b,c);a.setProxy(this);this.pendingOperations[a._internalId]=a;return a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var c=this.pendingOperations,b,a;for(b in c){a=c[b];if(a&&a.isRunning()){a.abort()}}this.pendingOperations=null}},1,0,0,0,['proxy.proxy'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,'Proxy',Ext.data,'DataProxy',Ext.data,'Proxy'],0);Ext.cmd.derive('Ext.data.proxy.Client',Ext.data.proxy.Proxy,{alternateClassName:'Ext.data.ClientProxy',isSynchronous:!0,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,'Client',Ext.data,'ClientProxy'],0);Ext.cmd.derive('Ext.data.proxy.Memory',Ext.data.proxy.Client,{alternateClassName:'Ext.data.MemoryProxy',isMemoryProxy:!0,config:{enablePaging:!1,data:{$value:null,merge:function(a,b,d,c){if(Ext.isArray(a)){return Ext.Array.clone(a)}else {return Ext.clone(a)}}}},finishOperation:function(b){var a=0,c=b.getRecords(),d=c.length;for(a;a<d;a++){c[a].commit()}b.setSuccessful(!0)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(b){var g=this,a=g.getReader().read(g.getData()),d=a.getRecords(),c=b.getSorters(),h=b.getGrouper(),f=b.getFilters(),e=b.getStart(),i=b.getLimit();if(b.process(a,null,null,!1)!==!1){if(f&&f.length){a.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(f)));a.setTotal(d.length)}if(h){c=c?c.concat(h):c}if(c&&c.length){a.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(c)))}if(g.getEnablePaging()&&e!==undefined&&i!==undefined){if(e>=a.getTotal()){a.setConfig({success:!1,records:[],total:0})}else {a.setRecords(Ext.Array.slice(d,e,e+i))}}b.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,['proxy.memory'],0,[Ext.data.proxy,'Memory',Ext.data,'MemoryProxy'],0);Ext.cmd.derive('Ext.data.ProxyStore',Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:!1,batchUpdateMode:'operation',sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:undefined},onClassExtended:function(e,d,b){var c=d.model,a;if(typeof c==='string'){a=b.onBeforeCreated;b.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){a.apply(g,f)})}}},implicitModel:'Ext.data.Model',autoSyncSuspended:0,constructor:function(b){var a=this;a.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(a.getAsynchronousLoad()===!1){a.flushLoad()}},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else {this.getFields();a=this.getModel()||this.createImplicitModel()}return a},applyProxy:function(a){var b=this.getModel();if(a!==null){if(a){if(a.isProxy){a.setModel(b)}else {if(Ext.isString(a)){a={type:a,model:b}}else {if(!a.model){a=Ext.apply({model:b},a)}}a=Ext.createByAlias('proxy.'+a.type,a);a.autoCreated=!0}}else {if(b){a=b.getProxy()}}if(!a){a=Ext.createByAlias('proxy.memory');a.autoCreated=!0}}return a},applyState:function(b){var a=this;Ext.data.AbstractStore.prototype.applyState.call(this,b);if(a.getAutoLoad()||a.isLoaded()){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(b,a){this.fireEvent('metachange',this,a)},create:function(f,a){var b=this,e=b.getModel(),d=new e(f),c;a=Ext.apply({},a);if(!a.records){a.records=[d]}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('create',a);return c.execute()},read:function(){return this.load.apply(this,arguments)},update:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getUpdatedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('update',a);return c.execute()},onProxyWrite:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords();switch(a.getAction()){case 'create':b.onCreateRecords(d,a,c);break;case 'update':b.onUpdateRecords(d,a,c);break;case 'destroy':b.onDestroyRecords(d,a,c);break;}if(c){b.fireEvent('write',b,a);b.fireEvent('datachanged',b)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(c,b,a){if(a){this.cleanRemoved()}},erase:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getRemovedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('destroy',a);return c.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(e,f){var a=this,c=e.operations,d=c.length,b;if(a.batchUpdateMode!=='operation'){a.suspendEvents();for(b=0;b<d;b++){a.onProxyWrite(c[b])}a.resumeEvents()}a.isSyncing=!1;a.fireEvent('datachanged',a)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===!0&&a.isValid()},getNewRecords:function(){return []},getUpdatedRecords:function(){return []},getModifiedRecords:function(){return [].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===!0&&a.phantom!==!0&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):a},sync:function(d){var a=this,b={},f=a.getNewRecords(),g=a.getUpdatedRecords(),e=a.getRemovedRecords(),c=!1;a.needsSync=!1;if(f.length>0){b.create=f;c=!0}if(g.length>0){b.update=g;c=!0}if(e.length>0){b.destroy=e;c=!0}if(c&&a.fireEvent('beforesync',b)!==!1){a.isSyncing=!0;d=d||{};a.proxy.batch(Ext.apply(d,{operations:b,listeners:a.getBatchListeners()}))}return a},getBatchListeners:function(){var a=this,b={scope:a,exception:a.onBatchException,complete:a.onBatchComplete};if(a.batchUpdateMode==='operation'){b.operationcomplete=a.onBatchOperationComplete}return b},save:function(){return this.sync.apply(this,arguments)},load:function(b){var a=this;if(typeof b==='function'){b={callback:b}}else {b=b?Ext.Object.chain(b):{}}a.pendingLoadOptions=b;if(a.getAsynchronousLoad()){if(!a.loadTimer){a.loadTimer=Ext.asap(a.flushLoad,a)}}else {a.flushLoad()}return a},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b;a.clearLoadTask();if(!c){return}a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent('beforesort',a,c.sorters)}b=Ext.apply({internalScope:a,internalCallback:a.onProxyLoad,scope:a},c);a.lastOptions=b;b=a.createOperation('read',b);if(a.fireEvent('beforeload',a,b)!==!1){a.onBeforeLoad(b);a.loading=!0;b.execute()}},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null)}},afterCommit:function(c,a){var b=this;if(!a){a=null}if(b.contains(c)){b.onUpdate(c,Ext.data.Model.COMMIT,a);b.fireEvent('update',b,c,Ext.data.Model.COMMIT,a)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var a=this,b=a.getProxy();a.clearLoadTask();a.getData().destroy();a.data=null;a.setProxy(null);if(b.autoCreated){b.destroy()}a.setModel(null)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var a=this.getRawRemovedRecords(),c,b;if(a){for(b=0,c=a.length;b<c;++b){a[b].unjoin(this)}a.length=0}},createOperation:function(e,d){var a=this,c=a.getProxy(),b;if(!a.proxyListeners){b={scope:a,destroyable:!0,beginprocessresponse:a.beginUpdate,endprocessresponse:a.endUpdate};if(!a.disableMetaChangeEvent){b.metachange=a.onMetaChange}a.proxyListeners=c.on(b)}return c.createOperation(e,d)},createImplicitModel:function(e){var b=this,d={extend:b.implicitModel,statics:{defaultProxy:'memory'}},c,a;if(e){d.fields=e}a=Ext.define(null,d);b.setModel(a);c=b.getProxy();if(c){a.setProxy(c)}else {b.setProxy(a.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(b){var a=this.getRawRemovedRecords();if(a){Ext.Array.remove(a,b);b.unjoin(this)}},setLoadOptions:function(d){var c=this,a,b;if(c.getRemoteFilter()){a=c.getFilters(!1);if(a&&a.getCount()){d.filters=a.getRange()}}if(c.getRemoteSort()){b=c.getSorters(!1);if(b&&b.getCount()){d.sorters=b.getRange()}}}}},1,0,0,0,0,0,[Ext.data,'ProxyStore'],0);Ext.cmd.derive('Ext.data.LocalStore',Ext.Mixin,{mixinConfig:{id:'localstore'},config:{extraKeys:null},applyExtraKeys:function(a){var b,c=this.getData();c.setExtraKeys(a);a=c.getExtraKeys();for(b in a){this[b]=a[b]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:'data'})},createModel:function(a){var c=this.getSession(),b;if(!a.isModel){b=this.getModel();a=new b(a,c)}return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(f,e){var c=this.data.items,d=c.length,b,a;for(a=0;a<d;++a){b=c[a];if(f.call(e||b,b,a,d)===!1){break}}},collect:function(d,c,b){var e=this,a=e.getData();if(b===!0&&a.filtered){a=a.getSource()}return a.collect(d,'data',c)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(c){var a=this.getData(),b;if(a.filtered){if(!a.$hasExtraKeys){b=this.makeInternalKeyCfg();a.setExtraKeys(b);a.$hasExtraKeys=!0}a=a.getSource()}if(!a.$hasExtraKeys){a.setExtraKeys(b||this.makeInternalKeyCfg());a.$hasExtraKeys=!0}return a.byInternalId.get(c)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(e,a){var d=this,c,b;if(a){if(!Ext.isIterable(a)){a=[a]}else {a=Ext.Array.clone(a)}c=a.length}if(!c){return []}for(b=0;b<c;++b){a[b]=d.createModel(a[b])}d.getData().insert(e,a);return a},queryBy:function(c,b){var a=this.getData();return (a.getSource()||a).createFiltered(c,b)},query:function(e,f,d,b,c){var a=this.getData();return (a.getSource()||a).createFiltered(e,f,d,b,c)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.sumByGroup(a):b.sum(a)},count:function(b){var a=this.getData();return b&&this.isGrouped()?a.countByGroup():a.count()},min:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.minByGroup(a):b.min(a)},max:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.maxByGroup(a):b.max(a)},average:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.averageByGroup(a):b.average(a)},aggregate:function(i,g,j,f){var a=this,c,h,e,d,b;if(j&&a.isGrouped()){c=a.getGroups().items;h=c.length;e={};for(b=0;b<h;++b){d=c[b];e[d.getGroupKey()]=a.getAggregate(i,g||a,d.items,f)}return e}else {return a.getAggregate(i,g,a.getData().items,f)}},getAggregate:function(g,e,b,d){var c=[],f=b.length,a;for(a=0;a<f;++a){c[a]=b[a].get(d)}return g.call(e||this,b,c)},addObserver:function(b){var a=this.observers;if(!a){this.observers=a=new Ext.util.Collection()}a.add(b)},removeObserver:function(b){var a=this.observers;if(a){a.remove(b)}},callObservers:function(h,a){var f=this.observers,g,e,c,d,b;if(f){e=f.items;if(a){a.unshift(this)}else {a=[this]}for(c=0,g=e.length;c<g;++c){b=e[c];d='onSource'+h;if(b[d]){b[d].apply(b,a)}}}},queryRecordsBy:function(g,d){var a=this.getData(),e=[],f,b,c;a=(a.getSource()||a).items;d=d||this;for(b=0,f=a.length;b<f;++b){c=a[b];if(g.call(d,c)===!0){e.push(c)}}return e},queryRecords:function(f,g){var a=this.getData(),d=[],e,b,c;a=(a.getSource()||a).items;for(b=0,e=a.length;b<e;++b){c=a[b];if(c.get(f)===g){d.push(c)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return {byInternalId:{property:'internalId',rootProperty:''}}}}},0,0,0,0,0,0,[Ext.data,'LocalStore'],0);Ext.cmd.derive('Ext.data.proxy.Server',Ext.data.proxy.Proxy,{alternateClassName:'Ext.data.ServerProxy',isRemote:!0,config:{url:'',pageParam:'page',startParam:'start',limitParam:'limit',groupParam:'group',groupDirectionParam:'groupDir',sortParam:'sort',filterParam:'filter',directionParam:'dir',idParam:'id',simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:'_dc',timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(c,b){var a=this.getExtraParams();a[c]=b;this.fireEvent('extraparamschanged',a)},updateExtraParams:function(a,b){this.fireEvent('extraparamschanged',a)},buildRequest:function(a){var c=this,g=Ext.apply({},a.getParams()),d=Ext.applyIf(g,c.getExtraParams()||{}),b,e,f;Ext.applyIf(d,c.getParams(a));e=a.getId();f=c.getIdParam();if(e!==undefined&&d[f]===undefined){d[f]=e}b=new Ext.data.Request({params:d,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:c});b.setUrl(c.buildUrl(b));a.setRequest(b);return b},processResponse:function(h,b,g,c){var a=this,d,f,e;a.fireEvent('beginprocessresponse',a,c,b);if(h===!0){f=a.getReader();if(c.status===204){e=f.getNullResultSet()}else {e=f.read(a.extractResponseData(c),{recordCreator:b.getRecordCreator()})}b.process(e,g,c);d=!b.wasSuccessful()}else {a.setException(b,c);d=!0}if(d){a.fireEvent('exception',a,c,b)}a.afterRequest(g,h);a.fireEvent('endprocessresponse',a,c,b)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(c,d){var b=[],e=c.length,a;for(a=0;a<e;a++){b[a]=c[a].serialize()}return this.applyEncoding(d?b[0]:b)},encodeFilters:function(b){var c=[],d=b.length,a,e;for(a=0;a<d;a++){c[a]=b[a].serialize()}return this.applyEncoding(c)},getParams:function(c){if(!c.isReadOperation){return {}}var a=this,b={},e=c.getGrouper(),d=c.getSorters(),j=c.getFilters(),q=c.getPage(),k=c.getStart(),p=c.getLimit(),u=a.getSimpleSortMode(),s=a.getSimpleGroupMode(),o=a.getPageParam(),n=a.getStartParam(),m=a.getLimitParam(),g=a.getGroupParam(),r=a.getGroupDirectionParam(),i=a.getSortParam(),l=a.getFilterParam(),t=a.getDirectionParam(),h,f;if(o&&q){b[o]=q}if(n&&(k||k===0)){b[n]=k}if(m&&p){b[m]=p}h=g&&e;if(h){if(s){b[g]=e.getProperty();b[r]=e.getDirection()}else {b[g]=a.encodeSorters([e],!0)}}if(i&&d&&d.length>0){if(u){f=0;if(d.length>1&&h){f=1}b[i]=d[f].getProperty();b[t]=d[f].getDirection()}else {b[i]=a.encodeSorters(d)}}if(l&&j&&j.length>0){b[l]=a.encodeFilters(j)}return b},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format('{0}={1}',b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(a){var b;if(a){b=a.getUrl()||this.getApi()[a.getAction()]}return b?b:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,['proxy.server'],0,[Ext.data.proxy,'Server',Ext.data,'ServerProxy'],0);Ext.cmd.derive('Ext.data.proxy.Ajax',Ext.data.proxy.Server,{alternateClassName:['Ext.data.HttpProxy','Ext.data.AjaxProxy'],isAjaxProxy:!0,defaultActionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'},config:{binary:!1,headers:undefined,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'}},doRequest:function(e){var a=this,g=a.getWriter(),b=a.buildRequest(e),f=a.getMethod(b),c,d;if(g&&e.allowWrite()){b=g.write(b)}b.setConfig({binary:a.getBinary(),headers:a.getHeaders(),timeout:a.getTimeout(),scope:a,callback:a.createRequestCallback(b,e),method:f,useDefaultXhrHeader:a.getUseDefaultXhrHeader(),disableCaching:!1});if(f.toUpperCase()!=='GET'&&a.getParamsAsJson()){d=b.getParams();if(d){c=b.getJsonData();if(c){c=Ext.Object.merge({},c,d)}else {c=d}b.setJsonData(c);b.setParams(undefined)}}if(a.getWithCredentials()){b.setWithCredentials(!0);b.setUsername(a.getUsername());b.setPassword(a.getPassword())}return a.sendRequest(b)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(d){var a=this.getActionMethods(),b=d.getAction(),c;if(a){c=a[b]}return c||this.defaultActionMethods[b]},createRequestCallback:function(b,c){var a=this;return function(f,e,d){if(b===a.lastRequest){a.lastRequest=null}a.processResponse(e,c,b,d)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,['proxy.ajax'],0,[Ext.data.proxy,'Ajax',Ext.data,'HttpProxy',Ext.data,'AjaxProxy'],0);Ext.cmd.derive('Ext.data.reader.Json',Ext.data.reader.Reader,{alternateClassName:'Ext.data.JsonReader',config:{record:null,metaProperty:'metaData',useSimpleAccessors:!1,preserveRawData:!1},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(a,e,d){var b=this,c;if(b.getMeta){c=b.getMeta(a);if(c){b.onMetaChange(c)}}else {if(a.metaData){b.onMetaChange(a.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,a,e,d)},getResponseData:function(b){var a;try{return Ext.decode(b.responseText)}catch(c){a=this.createReadError(c.message);Ext.Logger.warn('Unable to parse the JSON returned by the server');this.fireEvent('exception',this,b,a);return a}},buildExtractors:function(){var a=this,b,c;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){b=a.getMetaProperty();c=a.getRootProperty();if(c){a.getRoot=a.getAccessor(c)}else {a.getRoot=Ext.identityFn}if(b){a.getMeta=a.getAccessor(b)}}},extractData:function(a,f){var e=this.getRecord(),d=[],c,b;if(e){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][e]}}else {d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,f)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:function(){var a=/[\[\.]/;return function(c){var r=this,o=r.getUseSimpleAccessors(),n,f,j,m,b,e,p,l,g,k,d,h,i,q;if(!(c||c===0)){return}if(typeof c==='function'){return c}if(!o){n=String(c).search(a)}if(o===!0||n<0){f=function(a){return a[c]}}else {j='raw';m=[];b='';e=0;q=c.length;for(h=0;h<=q;++h){d=c[h];p=d==='.';l=d==='[';g=d===']';k=p||l||g||!d;if(!k||e>1||e&&!g){b+=d}else {if(k){i=!1;if(l){++e}else {if(g){--e;i=!0}}if(b){if(i){b='['+b+']'}else {b='.'+b}j+=b;m.push(''+j);b=''}}}}f=m.join(' && ');f=Ext.functionFactory('raw','return '+f)}return f}}(),createFieldAccessor:function(b){var e=this,a=b.mapping,c=a||a===0,d=c?a:b.name;if(c){if(typeof d==='function'){return function(a){return b.mapping(a,e)}}else {return e.createAccessor(d)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?'simple':'';return this.$className+a+b},privates:{copyFrom:function(a){Ext.data.reader.Reader.prototype.copyFrom.call(this,a);this.getRoot=a.getRoot}}},0,0,0,0,['reader.json'],0,[Ext.data.reader,'Json',Ext.data,'JsonReader'],0);Ext.cmd.derive('Ext.data.writer.Json',Ext.data.writer.Writer,{alternateClassName:'Ext.data.JsonWriter',config:{rootProperty:undefined,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(f){var h=f.length,g=0,a,c,b,d,e,i=function(c,b){var a={};a[c]=b;return a};for(;g<h;g++){a=f[g];for(c in a){if(a.hasOwnProperty(c)){b=c.split('.');d=b.length-1;if(d>0){e=a[c];for(;d>0;d--){e=i(b[d],e)}a[b[0]]=a[b[0]]||{};Ext.Object.merge(a[b[0]],e);delete a[c]}}}}return f},writeRecords:function(b,a){var c=this,e=c.getRootProperty(),d,g,f;if(c.getExpandData()){a=c.getExpandedData(a)}if(c.getAllowSingle()&&a.length===1){a=a[0];g=!0}f=this.getTransform();if(f){a=f(a,b)}if(c.getEncode()){if(e){b.setParam(e,Ext.encode(a))}else {}}else {if(g||a&&a.length){d=b.getJsonData()||{};if(e){d[e]=a}else {d=a}b.setJsonData(d)}}return b}},0,0,0,0,['writer.json'],0,[Ext.data.writer,'Json',Ext.data,'JsonWriter'],0);Ext.cmd.derive('Ext.util.Group',Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,'Group'],0);Ext.cmd.derive('Ext.util.SorterCollection',Ext.util.Collection,{isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(b){var a=this;a.sortFn=Ext.util.Sorter.createComparator(a);Ext.util.Collection.prototype.constructor.call(this,b);a.setDecoder(a.decodeSorter)},addSort:function(b,c,d){var a=this,f,j,k,g,h,i,e;if(!b){a.beginUpdate();a.endUpdate()}else {g=a.getOptions();if(b instanceof Array){e=b;d=c;c=null}else {if(Ext.isString(b)){if(!(i=a.get(b))){e=[{property:b,direction:c||g.getDefaultSortDirection()}]}else {e=[i]}}else {if(Ext.isFunction(b)){e=[{sorterFn:b,direction:c||g.getDefaultSortDirection()}]}else {e=[b];d=c;c=null}}}d=a._sortModes[d||'replace'];h=a.getAt(0);f=a.length;j=d.append?f:0;a.beginUpdate();a.splice(j,d.replace?f:0,e);if(d.multi){f=a.length;k=g.getMultiSortLimit();if(f>k){a.removeAt(k,f)}}if(i&&c){i.setDirection(c)}else {if(j===0&&h&&h===a.getAt(0)){h.toggle()}}a.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(d){var c=this.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.getProperty()===d){return b}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(a,i){var c=this,g=c.getOptions(),h=g.getRootProperty(),f=c.getSorterOptionsFn(),d,b,e;if(a.isSorter){if(!a.getRoot()){a.setRoot(h)}}else {b={direction:g.getDefaultSortDirection(),root:h};e=typeof a;if(e==='string'){d=c.get(a);if(d){return d}b.property=a}else {if(e==='function'){b.sorterFn=a}else {b=Ext.apply(b,a);if(b.fn){b.sorterFn=b.fn;delete b.fn}}}a=Ext.create(i||'Ext.util.Sorter',b)}if(f){f.call(c.getSorterOptionsScope()||c,a)}return a},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(e,d){var k=this,b=d===undefined?e:e[d];if(!b||!b.$cloned){if(e.length>d+1||!Ext.isIterable(b)){b=Ext.Array.slice(e,d)}var j=k.items,l=b.length,c=[],f,g,i,a,h;for(f=0;f<l;f++){a=b[f];if(a&&a.isSorter){c.push(a)}else {h=typeof a;if(h==='string'){a=k.get(a);if(a){c.push(a)}}else {if(h==='function'){for(i=j.length;i-->0;){g=j[i];if(g.getSorterFn()===a){c.push(g)}}}}}}b=c;b.$cloned=!0}return b},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,'SorterCollection'],0);Ext.cmd.derive('Ext.util.FilterCollection',Ext.util.Collection,{isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(b){var a=this;a.filterFn=Ext.util.Filter.createFilterFn(a);Ext.util.Collection.prototype.constructor.call(this,b);a.setDecoder(a.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(b){var d=this.getOptions(),c=d.getRootProperty(),a;if(b.isFilter){if(!b.getRoot()){b.setRoot(c)}}else {a={root:c};if(Ext.isFunction(b)){a.filterFn=b}else {a=Ext.apply(a,b);if(a.fn){a.filterFn=a.fn;delete a.fn}if(Ext.util.Filter.isInvalid(a)){return !1}}b=new Ext.util.Filter(a)}return b},decodeRemoveItems:function(f,e){var p=this,b=e===undefined?f:f[e];if(!b.$cloned){if(f.length>e+1||!Ext.isIterable(b)){b=Ext.Array.slice(f,e)}var k=p.items,o=b.length,h=[],a,g,l,n,m,c,d,j,i;for(g=0;g<o;g++){a=b[g];if(a&&a.isFilter){h.push(a)}else {i=typeof a;l=i==='function';n=a.property!==undefined&&a.value!==undefined;m=i==='string';for(j=k.length;j-->0;){c=k[j];d=!1;if(m){d=c.getProperty()===a}else {if(l){d=c.getFilterFn()===a}else {if(n){d=c.getProperty()===a.property&&c.getValue()===a.value}}}if(d){h.push(c)}}}}b=h;b.$cloned=!0}return b},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,'FilterCollection'],0);Ext.cmd.derive('Ext.util.GroupCollection',Ext.util.Collection,{isGroupCollection:!0,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){var c=a.item;if(!a.indexChanged){this.syncItemGrouping(b,c,b.getKey(c),a.oldKey,a.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(k,j){var d=this,g=d.changeDetails,b,h,a,e,i,c,f;if(g){f=g.item;a=d.findGroupForItem(f);b=[];if(a){b.push({group:a,items:[f]})}}else {b=d.groupItems(k,j.items,!1)}for(e=0,i=b.length;e<i;++e){a=(h=b[e]).group;if(a){a.remove(h.items);if(!a.length){(c||(c=[])).push(a)}}}if(c){d.remove(c)}},onCollectionSort:function(g){var f=this,b=g.getSorters(!1),e,d,a,c;if(b){e=f.items;d=f.length;for(a=0;a<d;++a){c=e[a];if(c.getSorters()!==b){c.setSorters(b)}}}},onCollectionUpdateKey:function(b,a){var c=a.index,d=a.item;if(!a.indexChanged){c=b.indexOf(d);this.syncItemGrouping(b,d,a.newKey,a.oldKey,c)}},addItemsToGroups:function(a,b){this.groupItems(a,b,!0)},groupItems:function(j,o,n){var d=this,m={},g=[],p=j.getGrouper(),e=d.itemGroupKeys,c,k,b,a,l,i,h,f;for(a=0,h=o.length;a<h;++a){b=p.getGroupString(l=o[a]);i=j.getKey(l);if(n){(e||(d.itemGroupKeys=e={}))[i]=b}else {if(e){delete e[i]}}if(!(c=m[b])){if(!(k=d.getByKey(b))&&n){(f||(f=[])).push(k=d.createGroup(j,b))}g.push(m[b]=c={group:k,items:[]})}c.items.push(l)}for(a=0,h=g.length;a<h;++a){c=g[a];c.group.add(c.items)}if(f){d.add(f)}return g},syncItemGrouping:function(i,d,m,n,o){var b=this,f=b.itemGroupKeys||(b.itemGroupKeys={}),p=i.getGrouper(),h=p.getGroupString(d),g=0,j=-1,l,a,e,c,k;if(n){c=f[n];delete f[n]}else {c=f[m]}f[m]=h;if(!(a=b.get(h))){a=b.createGroup(i,h);l=[a]}if(a.get(m)!==d){if(a.getCount()>0&&i.getSorters().getCount()===0){k=i.indexOf(a.items[0]);if(o<k){j=0}else {j=o-k}}if(j===-1){a.add(d)}else {a.insert(j,d)}}else {a.itemChanged(d)}if(h!==c&&(c===0||c)){e=b.get(c);if(e){e.remove(d);if(!e.length){g=[e]}}}if(l){b.splice(0,g,l)}else {if(g){b.splice(0,g)}}},createGroup:function(a,c){var b=new Ext.util.Group({groupKey:c,rootProperty:this.getItemRoot(),sorters:a.getSorters()});return b},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var c=this,b=c.getGrouper(),a=c.getSorters().getSortFn();if(!b){return a}return function(c,d){return b.sort(c.items[0],d.items[0])||a(c,d)}},updateGrouper:function(b){var a=this;a.grouped=!!(b&&a.$groupable.getAutoGroup());a.onSorterChange();a.onEndUpdateSorters(a.getSorters())},destroy:function(){this.$groupable=null;Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(d){var c=this.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.contains(d)){return b}}}}},0,0,0,0,0,0,[Ext.util,'GroupCollection'],0);Ext.cmd.derive('Ext.data.Store',Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(b){var a=this,c;if(b){if(b.buffered){return new Ext.data.BufferedStore(b)}}Ext.data.ProxyStore.prototype.constructor.call(this,b);a.getData().addObserver(a);c=a.inlineData;if(c){delete a.inlineData;a.loadInlineData(c)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(a,c){var b=this;b.getFields();b.getModel();if(a&&a.isCollection){c=a}else {if(!c){c=b.constructDataCollection()}if(a){if(b.isInitializing){b.inlineData=a}else {b.loadData(a)}}}return c},loadInlineData:function(c){var a=this,b=a.getProxy();if(b&&b.isMemoryProxy){b.setData(c);a.suspendEvents();a.read();a.resumeEvents()}else {a.removeAll(!0);a.suspendEvents();a.loadData(c);a.resumeEvents()}},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(a,b){this.onCollectionAddItems(a,b)},onCollectionAddItems:function(n,g,b){var a=this,m=g.length,k=b?!b.next:!1,h=a.removed,j=a.ignoreCollectionAdd,l=a.getSession(),e=b&&b.replaced,f,i,c,d;for(f=0;f<m;++f){c=g[f];if(l){l.adopt(c)}if(!j){c.join(a);if(h&&h.length){Ext.Array.remove(h,c)}i=i||c.phantom||c.dirty}}if(j){return}if(e){d=[];do{Ext.Array.push(d,e.items);e=e.next}while(e);a.setMoving(d,!0)}if(b){if(b.replaced){if(k){a.fireEvent('refresh',a)}}else {a.fireEvent('add',a,g,b.at);if(k){a.fireEvent('datachanged',a)}}}if(d){a.setMoving(d,!1)}a.needsSync=a.needsSync||i},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,a){var b=this,c=a.item,d=a.modified||null,e=a.meta;if(b.fireChangeEvent(c)){b.onUpdate(c,e,d,a);b.fireEvent('update',b,c,e,d,a)}},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(b,a,c){this.getData().itemChanged(b,a||null,undefined,c)},afterCommit:function(b,a){this.afterChange(b,a,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(c){var a=this,d=a.getRemoteSort(),b=a.getData(),e;if(d){b.setSorters(a.getSorters())}e=b.findInsertionIndex(c);if(d){b.setSorters(null)}return a.insert(e,c)},remove:function(c,h,i){var f=this,e=f.getDataSource(),d,g,b,a;if(c){if(c.isModel){if(e.indexOf(c)>-1){b=[c];d=1}else {d=0}}else {b=[];for(g=0,d=c.length;g<d;++g){a=c[g];if(a&&a.isEntity){if(!e.contains(a)){continue}}else {if(!(a=e.getAt(a))){continue}}b.push(a)}d=b.length}}if(!d){return []}f.removeIsMove=h===!0;f.removeIsSilent=i;e.remove(b);f.removeIsSilent=!1;return b},onCollectionRemove:function(n,f){var a=this,g=a.removed,e=f.items,m=e.length,i=f.at,b=f.replacement,h=a.removeIsMove||b&&Ext.Array.equals(e,b.items),k=a.removeIsSilent,j=!f.next,l=a.getDataSource(),d,c;if(a.ignoreCollectionRemove){return}if(b){a.setMoving(b.items,!0)}for(d=0;d<m;++d){c=e[d];if(!l.contains(c)){if(g&&!h&&!c.phantom&&!c.erasing){c.removedFrom=i+d;g.push(c);a.needsSync=!0}else {c.unjoin(a)}}}if(!k){if(!b||!b.items.length){a.fireEvent('remove',a,e,i,h);if(j){a.fireEvent('datachanged',a)}}}if(b){a.setMoving(b.items,!1)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers('Filter')},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else {if(!b){return}}c.removeAt(a,b)}},removeAll:function(d){var a=this,b=a.getData(),e=a.hasListeners.clear,c=b.getRange();if(b.length){a.removeIsSilent=!0;a.callObservers('BeforeRemoveAll');b.removeAll();a.removeIsSilent=!1;if(!d){a.fireEvent('clear',a,c);a.fireEvent('datachanged',a)}a.callObservers('AfterRemoveAll',[!!d])}return c},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else {this.add(a)}},splice:function(b,a,c){return this.getData().splice(b,a,c)},onProxyLoad:function(b){var a=this,e=b.getResultSet(),c=b.getRecords(),d=b.wasSuccessful();if(a.destroyed){return}if(e){a.totalCount=e.getTotal()}if(d){c=a.processAssociation(c);a.loadRecords(c,b.getAddRecords()?{addRecords:!0}:undefined)}else {a.loading=!1}if(a.hasListeners.load){a.fireEvent('load',a,c,d,b)}a.callObservers('AfterLoad',[c,d,b])},filterDataSource:function(f){var c=this.getDataSource(),b=c.items,e=b.length,d=[],a;for(a=0;a<e;a++){if(f.call(c,b[a])){d.push(b[a])}}return d},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(d,e){var b=this,f=d.length,a=[],c;for(c=0;c<f;c++){a.push(b.createModel(d[c]))}a=b.processAssociation(a);b.loadRecords(a,e?b.addRecordsOptions:undefined)},loadRawData:function(g,f){var a=this,c=a.getSession(),b=a.getProxy().getReader().read(g,c?{recordCreator:c.recordCreator}:undefined),e=b.getRecords(),d=b.getSuccess();if(d){a.totalCount=b.getTotal();a.loadRecords(e,f?a.addRecordsOptions:undefined)}return d},loadRecords:function(c,g){var a=this,h=c.length,d=a.getData(),e,b,f;if(g){e=g.addRecords}if(!a.getRemoteSort()&&!a.getSortOnLoad()){f=!0;d.setAutoSort(!1)}if(!e){a.clearData(!0)}a.loading=!1;a.ignoreCollectionAdd=!0;a.callObservers('BeforePopulate');d.add(c);a.ignoreCollectionAdd=!1;if(f){d.setAutoSort(!0)}for(b=0;b<h;b++){c[b].join(a)}++a.loadCount;a.complete=!0;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.callObservers('AfterPopulate')},loadPage:function(c,b){var a=this,d=a.getPageSize();a.currentPage=c;b=Ext.apply({page:c,start:(c-1)*d,limit:d,addRecords:!a.getClearOnPageLoad()},b);a.read(b)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(h){var a=this,b=a.removed,f=a.getDataSource(),g=a.getClearRemovedOnLoad(),j=b&&h&&!g,d,e,c,i;if(f){d=f.items;for(c=0,i=d.length;c<i;++c){e=d[c];if(j&&Ext.Array.contains(b,e)){continue}e.unjoin(a)}a.ignoreCollectionRemove=!0;a.callObservers('BeforeClear');f.removeAll();a.ignoreCollectionRemove=!1;a.callObservers('AfterClear')}if(b&&(!h||g)){b.length=0}},onIdChanged:function(b,a,c){this.getData().updateKey(b,a);this.fireEvent('idchanged',this,b,a,c)},commitChanges:function(){var a=this,c=a.getModifiedRecords(),d=c.length,b=0;Ext.suspendLayouts();a.beginUpdate();for(;b<d;b++){c[b].commit()}a.cleanRemoved();a.endUpdate();Ext.resumeLayouts(!0)},filterNewOnly:function(a){return a.phantom===!0},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var b=this,c=b.getRejectRecords(),f=c.length,a,d,e,g,h,i;Ext.suspendLayouts();b.beginUpdate();for(a=0;a<f;a++){d=c[a];if(d.phantom){e=e||[];e.push(d)}else {d.reject()}}if(e){b.remove(e);for(a=0,f=e.length;a<f;++a){e[a].reject()}}c=b.getRawRemovedRecords();if(c){f=c.length;g=!b.getRemoteSort()&&b.isSorted();if(g){h=b.getData();i=h.getAutoSort();h.setAutoSort(!1)}for(a=f-1;a>=0;a--){d=c[a];d.reject();if(!g){b.insert(d.removedFrom||0,d)}}if(g){h.setAutoSort(i);b.add(c)}c.length=0}b.endUpdate();Ext.resumeLayouts(!0)},onDestroy:function(){var a=this,c=a.loadTask,d=a.getData(),b=d.getSource();a.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);a.setSession(null);a.observers=null;if(c){c.cancel();a.loadTask=null}if(b){b.destroy()}},privates:{fetch:function(a){a=Ext.apply({},a);this.setLoadOptions(a);var b=this.createOperation('read',a);b.execute()},onBeforeLoad:function(a){this.callObservers('BeforeLoad',[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,a,b)},onRemoteSortSet:function(b,a){var c=this.getData();if(b){c.setSorters(a?null:b)}c.setAutoGroup(!a);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,b,a)},isMoving:function(a,f){var c=this.moveMap,b=0,e,d;if(c){if(a){if(Ext.isArray(a)){for(d=0,e=a.length;d<e;++d){b+=c[a[d].id]?1:0}}else {if(c[a.id]){++b}}}else {b=f?c:this.moveMapCount}}return b},setLoadOptions:function(a){var b=this,c=b.getPageSize(),e,d;if(b.getRemoteSort()&&!a.grouper){d=b.getGrouper();if(d){a.grouper=d}}if(c||'start' in a||'limit' in a||'page' in a){a.page=a.page!=null?a.page:b.currentPage;a.start=a.start!==undefined?a.start:(a.page-1)*c;a.limit=a.limit!=null?a.limit:c;b.currentPage=a.page}a.addRecords=a.addRecords||!1;if(!a.recordCreator){e=b.getSession();if(e){a.recordCreator=e.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,a)},setMoving:function(e,f){var b=this,c=b.moveMap||(b.moveMap={}),g=e.length,d,a;for(d=0;d<g;++d){a=e[d].id;if(f){if(c[a]){++c[a]}else {c[a]=1;++b.moveMapCount}}else {if(--c[a]===0){delete c[a];--b.moveMapCount}}}if(b.moveMapCount===0){b.moveMap=null}},processAssociation:function(b){var a=this,c=a.getAssociatedEntity();if(c){b=a.getRole().processLoad(a,c,b,a.getSession())}return b}}},1,0,0,0,['store.store'],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,'Store'],0);Ext.cmd.derive('Ext.data.reader.Array',Ext.data.reader.Json,{alternateClassName:'Ext.data.ArrayReader',config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(a){var b=a.mapping,d=a.hasMapping()?b:a.ordinal,c;a.mapping=d;c=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);a.mapping=b;return c},getModelData:function(a){return {}}},0,0,0,0,['reader.array'],0,[Ext.data.reader,'Array',Ext.data,'ArrayReader'],0);Ext.cmd.derive('Ext.data.ArrayStore',Ext.data.Store,{alternateClassName:['Ext.data.SimpleStore'],config:{proxy:{type:'memory',reader:'array'}},loadData:function(a,d){if(this.expandData){var c=[],b=0,e=a.length;for(;b<e;b++){c[c.length]=[a[b]]}a=c}Ext.data.Store.prototype.loadData.call(this,a,d)}},0,0,0,0,['store.array'],0,[Ext.data,'ArrayStore',Ext.data,'SimpleStore'],0);Ext.cmd.derive('Ext.data.StoreManager',Ext.util.MixedCollection,{alternateClassName:['Ext.StoreMgr','Ext.data.StoreMgr','Ext.StoreManager'],singleton:!0,register:function(){for(var a=0,b;b=arguments[a];a++){this.add(b)}},unregister:function(){for(var a=0,b;b=arguments[a];a++){this.remove(this.lookup(b))}},lookup:function(a,g){if(Ext.isArray(a)){var f=['field1'],e=!Ext.isArray(a[0]),d=a,b,c;if(e){d=[];for(b=0,c=a.length;b<c;++b){d.push([a[b]])}}else {for(b=2,c=a[0].length;b<=c;++b){f.push('field'+b)}}return new Ext.data.ArrayStore({data:d,fields:f,autoDestroy:!0,autoCreated:!0,expanded:e})}if(Ext.isString(a)){return this.get(a)}else {return Ext.Factory.store(a,g)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,'StoreManager',Ext,'StoreMgr',Ext.data,'StoreMgr',Ext,'StoreManager'],function(){Ext.regStore=function(b,a){var c;if(Ext.isObject(b)){a=b}else {if(Ext.data.StoreManager.containsKey(b)){return Ext.data.StoreManager.lookup(b)}a.storeId=b}if(a instanceof Ext.data.Store){c=a}else {c=new Ext.data.Store(a)}Ext.data.StoreManager.register(c);return c};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)};var a=Ext.regStore('ext-empty-store',{proxy:'memory',useModelWarning:!1});a.isEmptyStore=!0});Ext.cmd.derive('Ext.util.StoreHolder',Ext.Base,{mixinId:'storeholder',bindStore:function(d,e,b){b=b||'store';var a=this,c=e?null:a[b];if(d!==c){if(c){a.onUnbindStore(c,e,b);if(a.isComponent&&b==='store'&&c.autoDestroy){c.destroy()}else {a.unbindStoreListeners(c)}}if(d){a[b]=d=Ext.data.StoreManager.lookup(d);a.bindStoreListeners(d);a.onBindStore(d,c)}else {a[b]=null}}return a},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(b){var a=this.storeListeners;if(a){b.un(a)}},bindStoreListeners:function(b){var a=this.getStoreListeners(b);if(a){a=Ext.apply({},a);if(!a.scope){a.scope=this}this.storeListeners=a;b.on(a)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,'StoreHolder'],0);Ext.cmd.derive('Ext.LoadMask',Ext.Component,{isLoadMask:!0,msg:'Loading...',msgCls:'x-mask-loading',msgWrapCls:'x-mask-msg',useMsg:!0,useTargetEl:!1,cls:'x-mask',componentCls:'x-border-box',ariaRole:'status',focusable:!0,tabIndex:0,autoEl:{tag:'div',role:'status'},childEls:['msgWrapEl','msgEl','msgTextEl'],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ','x-','mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="','x-','mask-msg-text','{childElCls}">{msg}</div>','</div>','</div>'],maskOnDisable:!1,skipLayout:!0,constructor:function(c){var a=this,b;if(arguments.length===2){b=a.target=c;c=arguments[1]}else {b=c.target}Ext.Component.prototype.constructor.call(this,c);if(b.isComponent){a.ownerCt=b;a.hidden=!0;a.renderTo=a.getMaskTarget();a.external=a.renderTo===Ext.getBody();a.bindComponent(b)}else {b=Ext.get(b);a.isElement=!0;a.renderTo=a.target}a.render(a.renderTo);if(a.store){a.bindStore(a.store,!0)}},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||'';return a},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(b){var a=this,c={scope:this,resize:a.sizeMask};if(a.external){c.added=a.onComponentAdded;c.removed=a.onComponentRemoved;if(b.floating){c.move=a.sizeMask;a.activeOwner=b}else {if(b.ownerCt){a.onComponentAdded(b.ownerCt)}}}a.mon(b,c);if(a.external){a.mon(Ext.GlobalEvents,{show:a.onContainerShow,hide:a.onContainerHide,expand:a.onContainerExpand,collapse:a.onContainerCollapse,scope:a})}},onComponentAdded:function(b){var a=this;delete a.activeOwner;a.floatParent=b;if(!b.floating){b=b.up('[floating]')}if(b){a.activeOwner=b;a.mon(b,'move',a.sizeMask,a);a.mon(b,'tofront',a.onOwnerToFront,a)}else {a.preventBringToFront=!0}b=a.floatParent.ownerCt;if(a.rendered&&a.isVisible()&&b){a.floatOwner=b;a.mon(b,'afterlayout',a.sizeMask,a,{single:!0})}},onComponentRemoved:function(d){var a=this,b=a.activeOwner,c=a.floatOwner;if(b){a.mun(b,'move',a.sizeMask,a);a.mun(b,'tofront',a.onOwnerToFront,a)}if(c){a.mun(c,'afterlayout',a.sizeMask,a)}delete a.activeOwner;delete a.floatOwner},afterRender:function(){var a=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){a.el.on('mousedown',a.onMouseDown,a)}this.el.skipGarbageCollection=!0},onMouseDown:function(b){var a=this.el;if(b.within(a)){b.preventDefault();a.focus()}},onOwnerToFront:function(b,a){this.el.setStyle('zIndex',a+1)},onContainerShow:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=!0}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var a=this,b=a.activeOwner||a.target,c=a.external?a.getOwner().el:a.getMaskTarget();if(a.rendered&&a.isVisible()){if(a.external){if(!a.isElement&&b.floating){a.onOwnerToFront(b,b.el.getZIndex())}a.el.setSize(c.getSize()).alignTo(c,'tl-tl')}a.msgWrapEl.center(a.el)}},bindStore:function(a,c){var b=this;Ext.destroy(b.proxyListeners);b.mixins.storeholder.bindStore.apply(b,arguments);a=b.store;if(a){while(a.getSource){a=a.getSource()}if(!a.loadsSynchronously()){b.proxyListeners=a.getProxy().on({exception:b.onLoad,scope:b,destroyable:!0})}if(a.isLoading()){b.onBeforeLoad()}}},getStoreListeners:function(d){var c=this.onLoad,b=this.onBeforeLoad,a={cachemiss:b,cachefilled:{fn:c,buffer:100}};if(!d.loadsSynchronously()){a.beforeload=b;a.load=c}return a},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():a.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var b=this,a=b.getOwner(),c;if(!b.disabled){b.loading=!0;if(a.componentLayoutCounter){b.maybeShow()}else {c=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=c;c.apply(a,arguments);b.maybeShow()}}}},maybeShow:function(){var a=this,b=a.getOwner();if(!b.isVisible(!0)){a.showNext=!0}else {if(a.loading&&b.rendered){a.show()}}},hide:function(){var b=this,a=b.ownerCt;if(b.isElement){a.unmask();b.fireEvent('hide',this);return}if(a){a.enableTabbing();a.setMasked(!1)}delete b.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:'',this.msgCls);a.fireEvent('show',this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var a=this,b=a.ownerCt;a.loading=!0;Ext.Component.prototype.afterShow.apply(this,arguments);b.disableTabbing();b.setMasked(!0);a.el.restoreTabbableState();a.syncMaskState()},syncMaskState:function(){var a=this,c=a.ownerCt,b=a.el;if(a.isVisible()){if(a.hasOwnProperty('msgWrapCls')){b.dom.className=a.msgWrapCls}if(a.useMsg){a.msgTextEl.setHtml(a.msg)}else {a.msgEl.hide()}if(a.shim||Ext.useShims){b.enableShim(null,!0)}else {b.disableShim()}if(c.el.contains(Ext.Element.getActiveElement())){a.focus()}a.sizeMask()}},onLoad:function(){this.loading=!1;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.Component.prototype.onDestroy.call(this)}},1,['loadmask'],['component','box','loadmask'],{'component':!0,'box':!0,'loadmask':!0},['widget.loadmask'],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,'LoadMask'],0);Ext.cmd.derive('Ext.selection.Model',Ext.mixin.Observable,{alternateClassName:'Ext.AbstractSelectionModel',factoryConfig:{defaultType:'dataviewmodel'},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:undefined,toggleOnClick:!0,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(b){var a=this;a.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0};Ext.mixin.Observable.prototype.constructor.call(this,b);a.setSelectionMode(a.mode);if(a.selectionMode!=='SINGLE'){a.allowDeselect=!0}},updateStore:function(b,a){this.bindStore(b,!a)},applySelected:function(a){if(!a.isCollection){a=new Ext.util.Collection(Ext.apply({rootProperty:'data'},a))}return a},getStoreListeners:function(){var a=this;return {add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh,pageadd:a.onPageAdd,pageremove:a.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(b){var a=this,c=a.store.getRange(),d=a.getSelection().length;a.suspendChanges();a.doSelect(c,!0,b);a.resumeChanges();if(!b&&!a.destroyed){a.maybeFireSelectionChange(a.getSelection().length!==d)}},deselectAll:function(f){var a=this,b=a.getSelection(),d={},i=a.store,h=b.length,c,g,e;for(c=0,g=b.length;c<g;c++){e=b[c];d[e.id]=i.indexOf(e)}b=Ext.Array.sort(b,function(c,e){var a=d[c.id],b=d[e.id];return a<b?-1:1});a.suspendChanges();a.doDeselect(b,f);a.resumeChanges();if(!f&&!a.destroyed){a.maybeFireSelectionChange(a.getSelection().length!==h)}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(b,c){var a=this,d=a.isSelected(b),e=c.shiftKey;switch(a.selectionMode){case 'MULTI':a.selectWithEventMulti(b,c,d);break;case 'SIMPLE':a.selectWithEventSimple(b,c,d);break;case 'SINGLE':a.selectWithEventSingle(b,c,d);break;}if(!e){if(a.isSelected(b)){a.selectionStart=b}else {a.selectionStart=null}}},vetoSelection:function(a){if(a.stopSelection){return !0}else {if(a.type!=='keydown'&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return !0}}else {return a.type==='mousedown'}}},onNavigate:function(d){if(!d.record||this.vetoSelection(d.keyEvent)){return}this.onBeforeNavigate(d);var a=this,b=d.keyEvent,f=b.ctrlKey||d.ctrlKey,g=d.recordIndex,c=d.record,j=d.previousRecord,k=a.isSelected(c),h=a.selectionStart&&a.isSelected(d.previousRecord)?a.selectionStart:a.selectionStart=d.previousRecord,l=d.previousRecordIndex,e=b.getCharCode(),m=e===b.SPACE,i=e===b.UP||e===b.PAGE_UP||e===b.HOME?'up':e===b.DOWN||e===b.PAGE_DOWN||e===b.END?'down':null;switch(a.selectionMode){case 'MULTI':a.setSelectionStart(d.selectionStart);if(e===b.A&&f){a.selected.beginUpdate();a.selectRange(0,a.store.getCount()-1);a.selected.endUpdate()}else {if(m){if(b.shiftKey){a.selectRange(h,c,f)}else {if(k){if(a.allowDeselect){a.doDeselect(c)}}else {a.doSelect(c,f)}}}else {if(b.shiftKey&&h){if(i==='up'&&l<=g){a.deselectRange(j,g+1)}else {if(i==='down'&&l>=g){a.deselectRange(j,g-1)}else {if(h!==c){a.selectRange(h,c,f)}}}a.lastSelected=c}else {if(e){if(!f){a.doSelect(c,!1)}}else {a.selectWithEvent(c,b)}}}};break;case 'SIMPLE':if(e===b.A&&f){a.selected.beginUpdate();a.selectRange(0,a.store.getCount()-1);a.selected.endUpdate()}else {if(k){a.doDeselect(c)}else {a.doSelect(c,!0)}};break;case 'SINGLE':if(!f){if(i){a.doSelect(c,!1)}else {if(m||!e){a.selectWithEvent(c,b)}}};}if(!b.shiftKey&&!a.destroyed&&a.isSelected(c)){a.selectionStart=c;a.selectionStartIdx=g}},selectRange:function(d,f,m){var b=this,i=b.store,l=b.selected.items,h,a,g,e,c,j,k;if(b.isLocked()){return}h=b.normalizeRowRange(d,f);d=h[0];f=h[1];e=[];for(a=d;a<=f;a++){if(!b.isSelected(i.getAt(a))){e.push(i.getAt(a))}}if(!m){c=[];b.suspendChanges();for(a=0,g=l.length;a<g;++a){k=l[a];j=i.indexOf(k);if(j<d||j>f){c.push(k)}}for(a=0,g=c.length;a<g;++a){b.doDeselect(c[a])}b.resumeChanges()}if(!b.destroyed){if(e.length){b.doMultiSelect(e,!0)}else {if(c){b.maybeFireSelectionChange(c.length>0)}}}},deselectRange:function(d,e){var a=this,h=a.store,g,c,b,f;if(a.isLocked()){return}g=a.normalizeRowRange(d,e);d=g[0];e=g[1];b=[];for(c=d;c<=e;c++){f=h.getAt(c);if(a.isSelected(f)){b.push(f)}}if(b.length){a.doDeselect(b)}},normalizeRowRange:function(a,b){var c=this.store,d;if(!Ext.isNumber(a)){a=c.indexOf(a)}a=Math.max(0,a);if(!Ext.isNumber(b)){b=c.indexOf(b)}b=Math.min(b,c.getCount()-1);if(a>b){d=b;b=a;a=d}return [a,b]},select:function(a,c,b){if(Ext.isDefined(a)&&!(Ext.isArray(a)&&!a.length)){this.doSelect(a,c,b)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(a,e,d){var b=this,c;if(b.locked||a==null){return}if(typeof a==='number'){c=b.store.getAt(a);if(!c){return}a=[c]}if(b.selectionMode==='SINGLE'){if(a.isModel){a=[a]}if(a.length){b.doSingleSelect(a[0],d)}}else {b.doMultiSelect(a,e,d)}},doMultiSelect:function(b,k,d){var a=this,g=a.selected,h=!1,e,f,j,c,i;if(a.locked){return}b=!Ext.isArray(b)?[b]:b;j=b.length;if(!k&&g.getCount()>0){e=a.deselectDuringSelect(b,d);if(a.destroyed){return}if(e[0]){a.maybeFireSelectionChange(e[1]>0&&!d);return}else {h=e[1]>0}}i=function(){if(!g.getCount()){a.selectionStart=c}g.add(c);h=!0};for(f=0;f<j;f++){c=b[f];if(a.isSelected(c)){continue}a.onSelectChange(c,!0,d,i);if(a.destroyed){return}}a.lastSelected=c;a.maybeFireSelectionChange(h&&!d)},deselectDuringSelect:function(h,g){var a=this,f=a.selected.getRange(),i=f.length,c=0,d=!1,e,b;a.suspendChanges();a.deselectingDuringSelect=!0;for(b=0;b<i;++b){e=f[b];if(!Ext.Array.contains(h,e)){if(a.doDeselect(e,g)){++c}else {d=!0}}if(a.destroyed){d=!0;c=0;break}}a.deselectingDuringSelect=!1;a.resumeChanges();return [d,c]},doDeselect:function(c,f){var a=this,h=a.selected,e=0,j,b,g=0,d=0,i;if(a.locked||!a.store){return !1}if(typeof c==='number'){b=a.store.getAt(c);if(!b){return !1}c=[b]}else {if(!Ext.isArray(c)){c=[c]}}i=function(){++d;h.remove(b);if(b===a.selectionStart){a.selectionStart=null}};j=c.length;a.suspendChanges();for(;e<j;e++){b=c[e];if(a.isSelected(b)){if(a.lastSelected===b){a.lastSelected=h.last()}++g;a.onSelectChange(b,!1,f,i);if(a.destroyed){return !1}}}a.resumeChanges();a.maybeFireSelectionChange(d>0&&!f);return d===g},doSingleSelect:function(b,c){var a=this,e=!1,d=a.selected,f;if(a.locked){return}if(a.isSelected(b)){return}f=function(){if(d.getCount()){a.suspendChanges();var f=a.deselectDuringSelect([b],c);if(a.destroyed){return}a.resumeChanges();if(f[0]){return !1}}a.lastSelected=b;if(!d.getCount()){a.selectionStart=b}d.add(b);e=!0};a.onSelectChange(b,!0,c,f);if(e&&!a.destroyed){a.maybeFireSelectionChange(!c)}},maybeFireSelectionChange:function(b){var a=this;if(b&&!a.suspendChange){a.fireEvent('selectionchange',a,a.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():'SINGLE';this.selectionMode=this.modes[a]?a:'SINGLE'},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(b,c){var e=this,f=e.store,a,d;d=e.normalizeRowRange(b,c);b=d[0];c=d[1];for(a=b;a<=c;a++){if(!e.isSelected(f.getAt(a))){return !1}}return !0},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){var a=this.getSelected();return !!(a&&a.getCount())},refresh:function(){var a=this,l=a.store,e=[],c=[],k=a.getSelection(),m=k.length,b=a.getSelected(),h,j,d,g,i,f;if(!l||!(b.isCollection||b.isRows)||!b.getCount()){return}d=l.getData();if(d.getSource){j=d.getSource();if(j){d=j}}a.refreshing=!0;b.beginUpdate();a.suspendChanges();for(f=0;f<m;f++){g=k[f];i=d.get(g.getId());if(i){e.push(i)}else {if(!a.pruneRemoved){c.push(g)}}if(a.mode==='SINGLE'&&c.length){break}}if(b.getCount()!==e.length+c.length){h=!0}a.clearSelections();if(e.length){a.doSelect(e,!1,!0)}if(c.length){b.add(c);if(!a.lastSelected){a.lastSelected=c[c.length-1]}}a.resumeChanges();if(h){b.endUpdate()}else {b.updating--}a.refreshing=!1;a.maybeFireSelectionChange(h)},clearSelections:function(){var a=this.getSelected();if(a){a.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(!this.store.isLoading()&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(!0)}},onStoreRemove:function(i,c,j,h){var a=this,b=c,d,g,f,e;if(a.selectionStart&&Ext.Array.contains(c,a.selectionStart)){a.selectionStart=null}if(h||a.locked||!a.pruneRemoved){return}e=i.isMoving(null,!0);if(e){b=null;for(d=0,g=c.length;d<g;++d){f=c[d];if(!e[f.id]){(b||(b=[])).push(f)}}}if(b){a.deselect(b)}},onPageRemove:function(c,b,a){this.onStoreRemove(this.store,a)},onPageAdd:function(f,e,c){var d=c.length,a,b;for(a=0;a<d;a++){b=c[a];if(this.selected.get(b.id)){this.selected.replace(b)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections();a.bindStore(null);a.selected=Ext.destroy(a.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(d,b,a,c){this.selected.updateKey(b,a)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(f){var a=this,h=a.getStore(),e=a.lastSelected,j=0,l=a.pruneRemovedOnRefresh(),g,k,d,b,c,i;if(h.isBufferedStore){return}g=f.getRange();k=g.length;if(e){a.lastSelected=h.getById(e.id);i=a.lastSelected!==e}a.refreshing=!0;for(d=0;d<k;++d){b=g[d];c=h.getById(b.id);if(c){if(c!==b){f.replace(c)}}else {if(l){f.remove(b);++j}}}a.refreshing=!1;a.maybeFireSelectionChange(j>0);if(i){a.fireEvent('lastselectedchanged',a,a.getSelection(),a.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(d,e,b,f){var a=this,c=e?'select':'deselect';if((b||a.fireEvent('before'+c,a,d))!==!1&&f()!==!1){if(!b){a.fireEvent(c,a,d)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(a){var c=this.view,b;if(c){b=c.resolveSatelliteListenerScope(this,a)}return b||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,a)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(b,l,e){var a=this,g=l.shiftKey,c=l.ctrlKey,j=g?a.getSelectionStart():null,i=a.getSelection(),k=i.length,f,d,h;if(g&&j){a.selectRange(j,b,c)}else {if(c&&e){if(a.allowDeselect){a.doDeselect(b,!1)}}else {if(c){a.doSelect(b,!0,!1)}else {if(e&&!g&&!c&&k>1){if(a.allowDeselect){f=[];for(d=0;d<k;++d){h=i[d];if(h!==b){f.push(h)}}a.doDeselect(f)}}else {if(!e){a.doSelect(b,!1)}}}}}},selectWithEventSimple:function(a,c,b){if(b){this.doDeselect(a)}else {this.doSelect(a,!0)}},selectWithEventSingle:function(c,e,d){var a=this,b=a.allowDeselect;if(b&&!e.ctrlKey){b=a.toggleOnClick}if(b&&d){a.doDeselect(c)}else {a.doSelect(c,!1)}}}},1,0,0,0,['selection.abstract'],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,'Model',Ext,'AbstractSelectionModel'],0);Ext.cmd.derive('Ext.selection.DataViewModel',Ext.selection.Model,{deselectOnContainerClick:!0,bindComponent:function(b){var a=this,c;if(a.view!==b){if(a.view){a.navigationModel=null;Ext.destroy(a.viewListeners,a.navigationListeners)}a.view=b;if(b){c=a.getViewListeners();c.scope=a;c.destroyable=!0;a.navigationModel=b.getNavigationModel();a.viewListeners=b.on(c);a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0})}}},getViewListeners:function(){var b=this,a={};a[b.view.triggerCtEvent]=b.onContainerClick;return a},onUpdate:function(a){var b=this.view;if(b&&this.isSelected(a)){b.onItemSelect(a)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,f,d,h){var a=this,c=a.view,g=f?'select':'deselect',e=a.store.indexOf(b);if((d||a.fireEvent('before'+g,a,b,e))!==!1&&h()!==!1){if(c){if(f){c.onItemSelect(b)}else {c.onItemDeselect(b)}}if(!d){a.fireEvent(g,a,b,e)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,['selection.dataviewmodel'],0,[Ext.selection,'DataViewModel'],0);Ext.cmd.derive('Ext.view.NavigationModel',Ext.Base,{config:{store:null},focusCls:'x-view-item-focused',constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){if(this.view!==a){this.view=a;this.bindView(a)}},bindView:function(c){var a=this,d=c.dataSource,b;a.initKeyNav(c);if(!d.isEmptyStore){a.setStore(d)}b=a.getViewListeners();b.destroyable=!0;a.viewListeners=a.viewListeners||[];a.viewListeners.push(c.on(b))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return {containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(b){var a=this;a.keyNav=new Ext.util.KeyNav({target:b,ignoreInputFields:!0,eventName:'itemkeydown',defaultEventAction:'stopEvent',processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a})},processViewEvent:function(e,b,d,c,a){return a},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=!1},disable:function(){this.keyNav.disable();this.disabled=!0},onContainerMouseDown:function(b,a){if(a.pointerType==='mouse'&&Ext.getScrollbarSize().width){if(!b.el.getClientRegion().contains(a.getPoint())){a.preventDefault()}}},onItemMouseDown:function(e,c,d,b,a){if(a.pointerType!=='touch'){this.setPosition(b)}},onItemClick:function(e,b,d,c,a){if(this.record===b){this.fireNavigateEvent(a)}else {this.setPosition(c,a)}},setPosition:function(d,h,j,g){var a=this,f=a.view,i=f.getSelectionModel(),e=f.dataSource,b,c;if(d==null||!f.all.getCount()){a.record=a.recordIndex=null}else {if(typeof d==='number'){c=Math.max(Math.min(d,e.getCount()-1),0);b=e.getAt(d)}else {if(d.isEntity){b=e.getById(d.id);c=e.indexOf(b);if(c===-1){b=e.getAt(0);c=0}}else {if(d.tagName){b=f.getRecord(d);c=e.indexOf(b)}else {b=c=null}}}}if(b===a.record){a.recordIndex=c;return a.focusPosition(c)}if(a.item){a.item.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.recordIndex=c;a.record=b;g=g||a.record===a.lastFocused;if(b){a.focusPosition(a.recordIndex)}else {a.item=null}if(!j){i.fireEvent('focuschange',i,a.previousRecord,a.record)}if(!g&&h){a.fireNavigateEvent(h)}},focusPosition:function(b){var a=this;if(b!=null&&b!==-1){if(b.isEntity){b=a.view.dataSource.indexOf(b)}a.item=a.view.all.item(b);if(a.item){a.lastFocused=a.record;a.lastFocusedIndex=a.recordIndex;a.focusItem(a.item)}else {a.record=null}}else {a.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent();a.view.fireEvent('itemclick',a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent('navigate',{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){var a=this;a.setStore(null);Ext.destroy(a.viewListeners,a.keyNav);a.keyNav=a.viewListeners=a.dataSource=a.lastFocused=null;a.callParent()}},1,0,0,0,['view.navigation.default'],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,'NavigationModel'],0);Ext.define('Ext.rtl.view.NavigationModel',{override:'Ext.view.NavigationModel',initKeyNav:function(c){var a=this,b=a.self.prototype;if(c.getInherited().rtl){a.onKeyLeft=b.onKeyRight;a.onKeyRight=b.onKeyLeft}arguments.callee.$previous.call(this,c)}});Ext.cmd.derive('Ext.view.AbstractView',Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute('data-boundView'))}},defaultBindProperty:'store',renderBuffer:document.createElement('div'),statics:{updateDelay:200,queueRecordChange:function(n,o,d,m,f){var a=this,g=a.changeQueue||(a.changeQueue={}),i=d.internalId,h,b,l,e,c,j,k;h=g[i]||(g[i]={operation:m,record:d,data:{},views:[]});b=h.data;Ext.Array.include(h.views,n);if(f&&(l=f.length)){for(e=0;e<l;e++){c=f[e];j=d.data[c];if(b.hasOwnProperty(c)){if(d.isEqual(b[c],j)){delete b[c];k=!0}}else {b[c]=j}}if(k&&!Ext.Object.getKeys(b).length){delete g[i]}}else {Ext.apply(b,d.data)}if(!a.flushQueueTask){a.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(a.onFlushTick,a):Ext.Function.bind(a.onFlushTick,a),interval:Ext.view.AbstractView.updateDelay,repeat:1})}a.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var c=this,f,h,e,a,g,d,b;if(Ext.isScrolling){c.flushQueueTask.start();return}e=c.changeQueue;this.changeQueue={};for(g in e){a=e[g];f=a.views;h=f.length;for(d=0;d<h;d++){b=f[d];if(!b.destroyed){b.handleUpdate(b.dataSource,a.record,a.operation,Ext.Object.getKeys(a.data))}}}Ext.AnimationQueue.stop(c.flushChangeQueue,c)}},config:{selection:null,store:'ext-empty-store',navigationModel:{type:'default'},selectionModel:{type:'dataviewmodel'}},publishes:['selection'],twoWayBindable:['selection'],throttledUpdate:!1,deferInitialRefresh:!1,itemCls:'x-dataview-item',loadingText:'Loading...',loadMask:!0,loadingUseMsg:!0,selectedItemCls:'x-item-selected',emptyText:'',deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,preserveScrollOnReload:!1,ariaRole:'listbox',itemAriaRole:'option',last:!1,focusable:!0,tabIndex:0,triggerEvent:'itemclick',triggerCtEvent:'containerclick',refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){if(a&&a.selModel){a.selectionModel=a.selModel}Ext.Component.prototype.constructor.call(this,a)},initComponent:function(){var a=this,e=Ext.isDefined,b=a.itemTpl,c={},d;if(b){if(Ext.isArray(b)){if(typeof b[b.length-1]!=='string'){b=b.slice(0);c=b.pop()}b=b.join('')}else {if(Ext.isObject(b)){c=Ext.apply(c,b.initialConfig);b=b.html}}if(!a.itemSelector){a.itemSelector='.'+a.itemCls}b=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',a.itemCls,b,a.itemAriaRole);a.tpl=new Ext.XTemplate(b,c)}Ext.Component.prototype.initComponent.call(this);a.tpl=a.getTpl('tpl');if(a.overItemCls){a.trackOver=!0}a.addCmpEvents();d=a.store=Ext.data.StoreManager.lookup(a.store||'ext-empty-store');if(!a.dataSource){a.dataSource=d}a.bindStore(d,!0);a.getNavigationModel().bindComponent(this);if(!a.all){a.all=new Ext.CompositeElementLite()}a.scrollState={top:0,left:0};a.savedTabIndexAttribute='data-savedtabindex-'+a.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var a=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments);if(a){this.createMask(a)}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else {a.doFirstRefresh(a.dataSource)}}},onMaskBeforeShow:function(){var a=this,b=a.loadingHeight;if(b&&b>a.getHeight()){a.hasLoadingHeight=!0;a.oldMinHeight=a.minHeight;a.minHeight=b;a.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var a=this.loadMask,b=[];if(a&&a.isComponent){b.push(a)}return b},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(c){var a=this,b;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;b=a.getSelectionModel();if(c){b.select(c)}else {b.deselectAll()}a.ignoreNextSelection=!1}},updateBindSelection:function(d,c){var a=this,b=null;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(c.length){b=d.getLastSelected();a.hasHadSelection=!0}if(a.hasHadSelection){a.setSelection(b)}a.ignoreNextSelection=!1}},applySelectionModel:function(b,e){var a=this,g=a.grid,c,f,d;if(e){e.un({scope:a,selectionchange:a.updateBindSelection,lastselectedchanged:a.updateBindSelection,select:a.ariaSelect,deselect:a.ariaDeselect});Ext.destroy(a.selModelRelayer);b=Ext.Factory.selection(b)}else {if(b&&b.isSelectionModel){b.locked=a.disableSelection}else {if(a.simpleSelect){c='SIMPLE'}else {if(a.multiSelect){c='MULTI'}else {c='SINGLE'}}if(typeof b==='string'){b={type:b}}b=Ext.Factory.selection(Ext.apply({allowDeselect:a.allowDeselect||a.multiSelect,mode:c,locked:a.disableSelection},b))}}if(b.mode!=='SINGLE'){d=(g||a).ariaEl.dom;if(d){d.setAttribute('aria-multiselectable',!0)}else {if(!g){f=a.ariaRenderAttributes||(a.ariaRenderAttributes={});f['aria-multiselectable']=!0}}}a.selModelRelayer=a.relayEvents(b,['selectionchange','beforeselect','beforedeselect','select','deselect','focuschange']);b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection,select:a.ariaSelect,deselect:a.ariaDeselect});return b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(d){var a=this,b=a.getNavigationModel(),c;a.toggleChildrenTabbability(!1);if(!a.itemFocused&&a.all.getCount()){c=b.getLastFocused();b.setPosition(c||0,d.event,null,!c);a.itemFocused=b.getPosition()!=null}if(a.itemFocused){this.el.dom.setAttribute('tabIndex','-1')}Ext.Component.prototype.onFocusEnter.call(this,d)},onFocusLeave:function(b){var a=this;if(a.itemFocused&&!a.refreshing){a.getNavigationModel().setPosition(null,b.event,null,!0);a.itemFocused=!1;a.el.dom.setAttribute('tabIndex',0)}Ext.Component.prototype.onFocusLeave.call(this,b)},ariaSelect:function(c,b){var a=this.getNode(b);if(a){a.setAttribute('aria-selected',!0)}},ariaDeselect:function(c,b){var a=this.getNode(b);if(a){a.removeAttribute('aria-selected')}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);if(!a){this.onFocusLeave({})}},refresh:function(){var a=this,c=a.all,i=c.getCount(),g=a.refreshCounter,e,k,f,j=a.getSelectionModel(),h,d=g&&c.getCount()&&a.preserveScrollOnRefresh&&a.getScrollable(),b;if(!a.rendered||a.destroyed){return}if(!a.hasListeners.beforerefresh||a.fireEvent('beforerefresh',a)!==!1){a.refreshing=!0;h=a.saveFocusState();e=a.getTargetEl();f=a.getViewRange();k=e.dom;if(d){b=d.getPosition();if(!(b.x||b.y)){b=null}}if(g){a.clearViewEl();a.refreshCounter++}else {a.refreshCounter=1}a.tpl.append(e,a.collectData(f,c.startIndex||0));if(f.length<1){a.addEmptyText();c.clear()}else {a.collectNodes(e.dom);a.updateIndexes(0)}h();if(a.refreshSelmodelOnRefresh!==!1){j.refresh()}a.refreshNeeded=!1;a.refreshSize(c.getCount()!==i);a.fireEvent('refresh',a,f);if(d){d.scrollTo(b)}if(!a.viewReady){a.viewReady=!0;a.fireEvent('viewready',a)}a.refreshing=!1;a.refreshScroll();a.cleanupData()}},addEmptyText:function(){var a=this,b=a.getStore();if(a.emptyText&&!b.isLoading()&&(!a.deferEmptyText||a.refreshCounter>1||b.isLoaded())){a.emptyEl=Ext.core.DomHelper.insertHtml('beforeEnd',a.getTargetEl().dom,a.emptyText)}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var a=this,b=a.getSizeModel(),c=a.getScrollable();if(b.height.shrinkWrap||b.width.shrinkWrap||d){a.updateLayout()}else {if(a.touchScroll&&!a.bufferedRenderer){if(c){c.refresh()}else {a.on({boxready:a.refreshScroll,scope:a,single:!0})}}}},afterFirstLayout:function(d,c){var a=this,b=a.getScrollable();if(b){b.on({scroll:a.onViewScroll,scrollend:a.onViewScrollEnd,scope:a,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,d,c)},clearViewEl:function(){var a=this,c=a.getTargetEl(),b=a.getNodeContainer()===c;a.clearEmptyEl();a.all.clear(!b);if(b){c.dom.innerHTML=''}},clearEmptyEl:function(){var a=this.emptyEl;if(a){Ext.removeNode(a)}this.emptyEl=null},onViewScroll:function(c,a,b){this.fireEvent('scroll',this,a,b)},onViewScrollEnd:function(c,a,b){this.fireEvent('scrollend',this,a,b)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(c,f,e){var a,b,d;if(e){a=e.getAssociatedData();for(b in a){if(a.hasOwnProperty(b)){if(!d){c=Ext.Object.chain(c);d=!0}c[b]=a[b]}}}return c},collectData:function(c,e){var d=[],a=0,f=c.length,b;for(;a<f;a++){b=c[a];d[a]=this.prepareData(b.data,e+a,b)}return d},cleanupData:Ext.emptyFn,bufferRender:function(g,h){var b=this,e=b.renderBuffer,d=document.createDocumentFragment(),a,f,c;b.tpl.overwrite(e,b.collectData(g,h));a=Ext.fly(e).query(b.getItemSelector());for(c=0,f=a.length;c<f;c++){d.appendChild(a[c])}return {fragment:d,children:a}},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,!0):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(g,c,f,d,b){var a=this,e=b&&b.filtered;if(!e&&a.getNode(c)){if(a.throttledUpdate){a.statics().queueRecordChange(a,g,c,f,d)}else {a.handleUpdate.apply(a,arguments)}}},handleUpdate:function(f,b){var a=this,c,d,e=a.getSelectionModel();if(a.viewReady){c=a.dataSource.indexOf(b);if(c>-1){if(a.getNode(b)){d=a.bufferRender([b],c).children[0];a.all.replaceElement(c,d,!0);a.updateIndexes(c,c);e.onUpdate(b);a.refreshSizePending=!0;if(e.isSelected(b)){a.onItemSelect(b)}if(a.hasListeners.itemupdate){a.fireEvent('itemupdate',b,c,d)}return d}}}},onReplace:function(o,b,e,d){var a=this,c=a.all,n=a.getSelectionModel(),j=b,h,m,g,f,l,k,i;if(a.rendered){h=a.bufferRender(d,b,!0);g=h.fragment;f=h.children;m=c.item(b);if(m){c.item(b).insertSibling(g,'before',!0)}else {a.appendNodes(g)}c.insert(b,f);if(e.length){i=a.saveFocusState()}b+=d.length;k=b+e.length-1;l=c.removeRange(b,k,!0);if(a.refreshSelmodelOnRefresh!==!1){n.refresh()}a.updateIndexes(b);if(a.hasListeners.itemremove){a.fireEvent('itemremove',e,j,l,a)}if(a.hasListeners.itemadd){a.fireEvent('itemadd',d,j,f)}i();a.refreshSize()}},onAdd:function(f,d,b){var a=this,c,e=a.getSelectionModel();if(a.rendered){if(a.all.getCount()===0){a.refresh();c=a.all.slice()}else {c=a.doAdd(d,b);if(a.refreshSelmodelOnRefresh!==!1){e.refresh()}a.updateIndexes(b);a.refreshSizePending=!0}if(a.hasListeners.itemadd){a.fireEvent('itemadd',d,b,c)}}},appendNodes:function(a){var b=this.all,c=b.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(a)}else {b.item(c-1).insertSibling(a,'after')}},doAdd:function(j,b){var d=this,g=d.bufferRender(j,b,!0),f=g.fragment,c=g.children,a=d.all,h=a.getCount(),e=a.startIndex||0,i=a.endIndex||h-1;if(h===0||b>i){d.appendNodes(f)}else {if(b<=e){a.item(e).insertSibling(f,'before',!0)}else {a.item(b).insertSibling(c,'before',!0)}}a.insert(b,c);return c},onRemove:function(l,d,b){var a=this,i=a.all,g=a.hasListeners.itemremove,e,c,k,f,h,j;if(i.getCount()){if(a.dataSource.getCount()===0){if(g){a.fireEvent('itemremove',d,b,a.getNodes(b,b+d.length-1))}a.refresh()}else {j=a.saveFocusState();if(g){f=[]}for(c=d.length-1;c>=0;--c){k=d[c];e=b+c;if(f){h=i.item(e);f[c]=h?h.dom:undefined}if(i.item(e)){a.doRemove(k,e)}}if(g){a.fireEvent('itemremove',d,b,f,a)}j();a.updateIndexes(b)}a.refreshSizePending=!0}},doRemove:function(b,a){this.all.removeElement(a,!0)},saveFocusState:function(){var a=this,e=a.dataSource||a.store,c=a.getNavigationModel(),b=c.recordIndex,d=c.record;if(a.el.contains(Ext.Element.getActiveElement())){a.el.dom.focus();return function(){if(e.getCount()){b=Math.min(b,a.all.getCount()-1);c.setPosition(e.contains(d)?d:b,null,null,!0)}}}return Ext.emptyFn},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(d,b){var e=this.all.elements,c,f=this.getViewRange(),a,g=this.id;d=d||0;b=b||(b===0?0:e.length-1);for(a=d;a<=b;a++){c=e[a];c.setAttribute('data-recordIndex',a);c.setAttribute('data-recordId',f[a].internalId);c.setAttribute('data-boundView',g)}},bindStore:function(b,e){var a=this,c=a.getSelectionModel(),d=a.getNavigationModel();c.bindStore(b);c.bindComponent(b?a:null);a.mixins.storeholder.bindStore.apply(a,arguments);d.setStore(b);if(b&&a.componentLayoutCounter){a.doFirstRefresh(b,!e)}},doFirstRefresh:function(b,c){var a=this;if(a.deferInitialRefresh&&!c){Ext.defer(a.doFirstRefresh,1,a,[b,!0])}else {if(b&&!b.isLoading()){a.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null);if(this.dataSource===a){this.dataSource=null}},onBindStore:function(c,b){var a=this;if(a.store.isBufferedStore){a.store.preserveScrollOnReload=a.preserveScrollOnReload}if(b&&b.isBufferedStore){delete b.preserveScrollOnReload}a.setMaskBind(c);if(!a.dataSource){a.dataSource=c}},setMaskBind:function(b){var a=this.loadMask;if(this.rendered&&a&&b&&!a.bindStore){a=this.createMask()}if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return {refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var a=this;if(a.updateSuspendCounter){--a.updateSuspendCounter}Ext.resumeLayouts(!0);if(a.refreshSizePending){a.refreshSize(!0);a.refreshSizePending=!1}},onDataRefresh:function(b){var a=this,c=a.preserveScrollOnRefresh;if(b.loadCount>a.lastRefreshLoadCount){a.preserveScrollOnRefresh=a.preserveScrollOnReLoad}a.refreshView();a.preserveScrollOnRefresh=c;a.lastRefreshLoadCount=b.loadCount},refreshView:function(){var a=this,b=a.blockRefresh||!a.rendered||a.up('[collapsed],[isCollapsingOrExpanding],[hidden]');if(b){a.refreshNeeded=!0}else {if(a.bufferedRenderer){a.bufferedRenderer.refreshView()}else {a.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var c=[],b=this.getSelectionModel().getSelection(),d=b.length,a=0;for(;a<d;a++){c.push(this.getNode(b[a]))}return c},getRecords:function(c){var a=[],b=0,e=c.length,d=this.dataSource.data;for(;b<e;b++){a[a.length]=d.getByKey(c[b].getAttribute('data-recordId'))}return a},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).getAttribute('data-recordId'))},isSelected:function(a){var b=this.getRecord(a);return this.getSelectionModel().isSelected(b)},select:function(c,b,a){this.getSelectionModel().select(c,b,a)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(a){var c=this,b;if(c.rendered&&(a||a===0)){if(Ext.isString(a)){b=document.getElementById(a)}else {if(a.isModel){b=c.getNodeByRecord(a)}else {if(Ext.isNumber(a)){b=c.all.elements[a]}else {if(a.target&&a.target.nodeType){a=a.target}b=Ext.fly(a).findParent(c.itemSelector,c.getTargetEl())}}}}return b||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(b,a){var c=this.all;if(a!==undefined){a++}return c.slice(b,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(a.getAttribute('data-recordIndex')){return Number(a.getAttribute('data-recordIndex'))}return this.all.indexOf(a)},onDestroy:function(){var a=this,b=a.updateSuspendCounter;a.all.clear();a.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);a.bindStore(null);a.store=a.dataSource=a.storeListeners=null;if(a.selModelRelayer){a.selModelRelayer.destroy();a.selModelRelayer=null}Ext.destroy(a.navigationModel,a.selectionModel);a.navigationModel=a.selectionModel=a.selModel=null;a.loadMask=null;while(b--){Ext.resumeLayouts(!0)}},onItemSelect:function(b){var a=this.getNode(b);if(a){Ext.fly(a).addCls(this.selectedItemCls)}},onItemDeselect:function(b){var a=this.getNode(b);if(a){Ext.fly(a).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,c){var a=this.getNode(b);if(a){Ext.fly(a).addCls(c)}},removeItemCls:function(b,c){var a=this.getNode(b);if(a){Ext.fly(a).removeCls(c)}},setStore:function(b){var a=this;if(a.store!==b){if(a.isConfiguring){a.store=b}else {a.bindStore(b,!1)}}},privates:{toggleChildrenTabbability:function(b){var a=this.getTargetEl();if(b){a.restoreTabbableState(!0)}else {a.saveTabbableState({skipSelf:!0,includeSaved:!1})}},collectNodes:function(c){var a=this.all,b={role:this.itemAriaRole};a.fill(Ext.fly(c).query(this.getItemSelector()),a.startIndex||0);if(this.focusable){b.tabindex='-1'}a.set(b)},createMask:function(d){var a=this,c=a.getStore(),b;if(c&&!c.isEmptyStore&&!c.loadsSynchronously()){b={target:a,msg:a.loadingText,useMsg:a.loadingUseMsg,store:c};if(a.loadingCls){b.msgCls=a.loadingCls}if(Ext.isObject(d)){b=Ext.apply(b,d)}a.loadMask=new Ext.LoadMask(b);a.loadMask.on({scope:a,beforeshow:a.onMaskBeforeShow,hide:a.onMaskHide})}return a.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,['component','box'],{'component':!0,'box':!0},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,'AbstractView'],function(){Ext.deprecate('extjs','4.0',function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn('DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel')}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn('DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel')}return this.selModel.getSelection()},select:function(d,c,b){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var a=this.getSelectionModel();return a.select.apply(a,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})});Ext.cmd.derive('Ext.view.View',Ext.view.AbstractView,{alternateClassName:'Ext.DataView',inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:'LongPress',mousedown:'MouseDown',mouseup:'MouseUp',click:'Click',dblclick:'DblClick',contextmenu:'ContextMenu',mouseover:'MouseOver',mouseout:'MouseOut',mouseenter:'MouseEnter',mouseleave:'MouseLeave',keydown:'KeyDown',keyup:'KeyUp',keypress:'KeyPress',focus:'Focus'},TouchEventMap:{touchstart:'mousedown',touchend:'mouseup',tap:'click',doubletap:'dblclick'}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(b){var a=this,d=a.getTargetSelector(),c=b.getTarget(d);if(!a.destroyed){if(c){if(a.mouseOverItem!==c&&a.el.contains(c)){a.mouseOverItem=b.item=c;b.newType='mouseenter';a.handleEvent(b)}}else {a.handleEvent(b)}}},handleMouseOut:function(a){var c=this,f=c.getTargetSelector(),b=a.getTarget(f),e=a.getRelatedTarget(f),d;if(b===e&&!(b===null&&e===null)){return}if(!c.destroyed){if(b&&(d=c.self.getBoundView(b))){a.item=b;a.newType='mouseleave';d.handleEvent(a);d.mouseOverItem=null}else {c.handleEvent(a)}}},handleEvent:function(a){var b=this,c=b.keyEventRe.test(a.type);a.view=b;a.item=a.getTarget(b.itemSelector);if(a.item){a.record=b.getRecord(a.item)}if(b.processUIEvent(a)!==!1){b.processSpecialEvent(a)}if(c&&!Ext.fly(a.target).isInputField()){if(a.getKey()===a.SPACE||a.isNavKeyPress(!0)){a.preventDefault()}}a.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(b){if(!Ext.getBody().isAncestor(b.target)){return}var a=this,f=b.item,j=a.self,h=j.EventMap,i=j.TouchEventMap,g,e=b.record,d=b.type,c=d;if(b.newType){c=b.newType}if(f){c=i[c]||c;g=b.recordIndex=a.indexInStore?a.indexInStore(e):a.indexOf(f);if(!e||a.processItemEvent(e,f,g,b)===!1){return !1}if(a['onBeforeItem'+h[c]](e,f,g,b)===!1||a.fireEvent('beforeitem'+c,a,e,f,g,b)===!1||a['onItem'+h[c]](e,f,g,b)===!1){return !1}a.fireEvent('item'+c,a,e,f,g,b)}else {d=i[d]||d;if(a.processContainerEvent(b)===!1||a['onBeforeContainer'+h[d]](b)===!1||a.fireEvent('beforecontainer'+d,a,b)===!1||a['onContainer'+h[d]](b)===!1){return !1}a.fireEvent('container'+d,a,b)}return !0},onItemMouseEnter:function(b,a,c,d){if(this.trackOver){this.highlightItem(a)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var a=this,b=a.highlightedItem,d=a.overItemCls;if(b!==c){if(b){Ext.fly(b).removeCls(d);if(Ext.isIE8){a.repaintBorder(b);a.repaintBorder(b.nextSibling)}if(a.hasListeners.unhighlightitem){a.fireEvent('unhighlightitem',a,b)}}a.highlightedItem=c;if(c){Ext.fly(c).addCls(a.overItemCls);if(Ext.isIE8){a.repaintBorder(c.nextSibling)}if(a.hasListeners.highlightitem){a.fireEvent('highlightitem',a,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(f,e){var a=this,d,c,b;if(a.viewReady){d=a.getNode(e);c=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);b=a.highlightedItem;if(b&&b===d){delete a.highlightedItem;if(c){a.highlightItem(c)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(h){var g=this,e=Ext.fly(g.getNode(h)),f=g.el,d=0,c=0,a=f.getRegion(),b;a.bottom=a.top+f.dom.clientHeight;a.right=a.left+f.dom.clientWidth;if(e){b=e.getRegion();if(b.top<a.top){d=b.top-a.top}else {if(b.bottom>a.bottom){d=b.bottom-a.bottom}}if(b.left<a.left){c=b.left-a.left}else {if(b.right>a.right){c=b.right-a.right}}if(c||d){g.scrollBy(c,d,!1)}e.set({tabIndex:-1});e.focus()}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,['dataview'],['component','box','dataview'],{'component':!0,'box':!0,'dataview':!0},['widget.dataview'],0,[Ext.view,'View',Ext,'DataView'],0);Ext.cmd.derive('Ext.view.BoundListKeyNav',Ext.view.NavigationModel,{navigateOnSpace:!0,initKeyNav:function(c){var a=this,b=c.pickerField;if(!a.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,c);a.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:a.onKeyEsc,scope:a})}if(!b){return}if(!b.rendered){b.on('render',Ext.Function.bind(a.initKeyNav,a,[c],0),a,{single:!0});return}a.fieldKeyNav=new Ext.util.KeyNav({disabled:!0,target:b.inputEl,forceKeyDown:!0,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,tab:a.onKeyTab,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},priority:1001,scope:a})},processViewEvent:function(b,c,e,d,a){if(a.within(b.listWrap)){return a}if(a.getKey()===a.ESC){if(Ext.fly(a.target).isInputField()){a.target=a.target.parentNode}return a}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(e,b,d,c,a){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,e,b,d,c,a);a.preventDefault()},onKeyUp:function(g){var d=this,a=d.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=b>0?b-1:f.getCount()-1;d.setPosition(e);g.preventDefault()},onKeyDown:function(g){var d=this,a=d.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=b<f.getCount()-1?b+1:0;d.setPosition(e);g.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(c){var b=this.view,a=b.pickerField;if(b.isVisible()){if(a.selectOnTab){this.selectHighlighted(c)}if(a.collapse){a.collapse()}}return !0},onKeyEnter:function(d){var c=this.view,b=c.getSelectionModel(),a=c.pickerField,e=b.getCount();d.stopEvent();this.selectHighlighted(d);if(!a.multiSelect&&e===b.getCount()&&a.collapse){a.collapse()}return !1},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return !0},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(a){var c=this,b=c.view;if(typeof a==='number'){a=b.all.item(a)}if(a){a=a.dom;b.highlightItem(a);b.getScrollable().scrollIntoView(a,!1)}},selectHighlighted:function(d){var c=this,b=c.view,e=b.getSelectionModel(),a,f=c.recordIndex;if(b.all.getCount()){a=c.getRecord();if(a){if(d.getKey()===d.ENTER||!e.isSelected(a)){e.selectWithEvent(a,d);if(!b.store.data.contains(a)){c.setPosition(Math.min(f,b.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,['view.navigation.boundlist'],0,[Ext.view,'BoundListKeyNav'],0);Ext.cmd.derive('Ext.layout.SizeModel',Ext.Base,{constructor:function(e){var a=this,b=a.self,d=b.sizeModelsArray,c;Ext.apply(a,e);a[c=a.name]=!0;a.fixed=!(a.auto=a.natural||a.shrinkWrap);d[a.ordinal=d.length]=b[c]=b.sizeModels[c]=a},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},1,0,0,0,0,0,[Ext.layout,'SizeModel'],function(){var a=this,d=a.sizeModelsArray,b,c,f,g,e;new a({name:'calculated'});new a({name:'configured',names:{width:'width',height:'height'}});new a({name:'natural'});new a({name:'shrinkWrap'});new a({name:'calculatedFromConfigured',configured:!0,calculatedFrom:!0,names:{width:'width',height:'height'}});new a({name:'calculatedFromNatural',natural:!0,calculatedFrom:!0});new a({name:'calculatedFromShrinkWrap',shrinkWrap:!0,calculatedFrom:!0});new a({name:'constrainedMax',configured:!0,constrained:!0,names:{width:'maxWidth',height:'maxHeight'}});new a({name:'constrainedMin',configured:!0,constrained:!0,names:{width:'minWidth',height:'minHeight'}});new a({name:'constrainedDock',configured:!0,constrained:!0,constrainedByMin:!0,names:{width:'dockConstrainedWidth',height:'dockConstrainedHeight'}});for(b=0,f=d.length;b<f;++b){e=d[b];e.pairsByHeightOrdinal=g=[];for(c=0;c<f;++c){g.push({width:e,height:d[c]})}}});Ext.cmd.derive('Ext.layout.Layout',Ext.Base,{factoryConfig:{type:'layout'},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(b){var a=this;a.id=Ext.id(null,a.type+'-');a.initConfig(b);delete a.type;a.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(b){var a=this,d=a.context,c;if(a.lastWidthModel!==b.widthModel){if(a.lastWidthModel){c=!0}a.lastWidthModel=b.widthModel}if(a.lastHeightModel!==b.heightModel){if(a.lastWidthModel){c=!0}a.lastHeightModel=b.heightModel}if(c){(d=b.context).clearTriggers(a,!1);d.clearTriggers(a,!0);a.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return !1},isItemLayoutRoot:function(d){var a=d.getSizeModel(),c=a.width,b=a.height;if(!d.componentLayout.lastComponentSize&&(c.calculated||b.calculated)){return !1}return !c.shrinkWrap&&!b.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(g,c){var f=g.length,d,a,b,e;if(f){e=[];for(d=0;d<f;++d){a=g[d];if(!a.rendered){if(c&&c[a.id]!==undefined){b=c[a.id]}else {this.configureItem(a);b=a.getRenderTree();if(c){c[a.id]=b}}if(b){e.push(b)}}}}return e},finishRender:Ext.emptyFn,finishRenderItems:function(e,c){var d=c.length,a,b;for(a=0;a<d;a++){b=c[a];if(b.rendering){b.finishRender(a)}}},renderChildren:function(){var a=this,c=a.getLayoutItems(),b=a.getRenderTarget();a.renderItems(c,b)},renderItems:function(e,d){var c=this,f=e.length,b=0,a;if(f){Ext.suspendLayouts();for(;b<f;b++){a=e[b];if(a&&!a.rendered){c.renderItem(a,d,b)}else {if(!c.isValidParent(a,d,b)){c.moveItem(a,d,b)}else {c.configureItem(a)}}}Ext.resumeLayouts(!0)}},isValidParent:function(e,d,a){var b=d&&d.dom||d,c=this.getItemLayoutEl(e);if(c&&b){if(typeof a==='number'){a=this.getPositionOffset(a);return c===b.childNodes[a]}return c.parentNode===b}return !1},getItemLayoutEl:function(c){var a=c.el?c.el.dom:Ext.getDom(c),d=a.parentNode,b;if(d){b=d.className;if(b&&b.indexOf('x-resizable-wrap')!==-1){a=a.parentNode}}return a},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(a,c,b){var d=this;if(!a.rendered){d.configureItem(a);a.render(c,b)}},moveItem:function(c,a,b){a=a.dom||a;if(typeof b==='number'){b=a.childNodes[b]}a.insertBefore(c.el.dom,b||null);c.container=Ext.get(a);this.configureItem(c)},onContentChange:function(){this.owner.updateLayout();return !0},initLayout:function(){this.initialized=!0},setOwner:function(a){this.owner=a},getLayoutItems:function(){return []},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(b){var d=this,e=b.el,c=d.owner,a;if(b.rendered){a=[].concat(d.itemCls||[]);if(c.itemCls){a=Ext.Array.push(a,c.itemCls)}if(a.length){e.removeCls(a)}}delete b.ownerLayout},afterCollapse:function(b,a){if(a){this.onContentChange(b)}},afterExpand:function(b,a){if(a){this.onContentChange(b)}},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy();a.callParent()},sortWeightedItems:function(b,d){for(var a=0,c=b.length;a<c;++a){b[a].$i=a}Ext.Array.sort(b,function(c,e){var a=e.weight-c.weight;if(!a){a=c.$i-e.$i;if(c[d]){a=-a}}return a});for(a=0;a<c;++a){delete b[a].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,'Layout'],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels});Ext.cmd.derive('Ext.layout.component.Component',Ext.layout.Layout,{type:'component',isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(a,j){var c=this,f=c.owner,p=a.ownerCtContext,g=a.heightModel,h=a.widthModel,o=f.el.dom===document.body,e=f.lastBox||c.nullBox,d=f.el.lastBox||c.nullBox,m=!o,k=a.isTopLevel,i,b,n,l;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,a,j);if(j){if(c.usesContentWidth){++a.consumersContentWidth}if(c.usesContentHeight){++a.consumersContentHeight}if(c.usesWidth){++a.consumersWidth}if(c.usesHeight){++a.consumersHeight}if(p&&!p.hasRawContent){i=f.ownerLayout;if(i){if(i.usesWidth){++a.consumersWidth}if(i.usesHeight){++a.consumersHeight}}}}if(h.configured){n=f[h.names.width];if(k&&h.calculatedFrom){n=e.width}if(!o){m=c.setWidthInDom||(j?n!==d.width:h.constrained)}a.setWidth(n,m)}else {if(k){if(h.calculated){b=e.width;a.setWidth(b,b!==d.width)}b=e.x;a.setProp('x',b,b!==d.x)}}if(g.configured){l=f[g.names.height];if(k&&g.calculatedFrom){l=e.height}if(!o){m=j?l!==d.height:g.constrained}a.setHeight(l,m)}else {if(k){if(g.calculated){b=e.height;a.setHeight(b,b!==d.height)}b=e.y;a.setProp('y',b,b!==d.y)}}},finishedLayout:function(c){var h=this,e=c.children,g=h.owner,i,d,f,a,b;if(e){i=e.length;for(d=0;d<i;d++){f=e[d];f.el.lastBox=f.props}}c.previousSize=h.lastComponentSize;h.lastComponentSize=g.el.lastBox=b=c.props;a=g.lastBox||(g.lastBox={});a.x=b.x;a.y=b.y;a.width=b.width;a.height=b.height;a.invalid=!1;Ext.layout.Layout.prototype.finishedLayout.call(this,c)},notifyOwner:function(d){var c=this,b=c.lastComponentSize,a=d.previousSize;c.owner.afterComponentLayout(b.width,b.height,a?a.width:undefined,a?a.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(d){var c=this,a=c.targetInfo,b;if(!a){b=d.getEl('getTarget',c);c.targetInfo=a={padding:b.getPaddingInfo(),border:b.getBorderInfo()}}return a},measureAutoDimensions:function(a,w){var h=this,u=h.owner,i=u.layout,t=a.heightModel,s=a.widthModel,g=a.boxParent,n=a.isBoxParent,j=a.target,q=a.props,r,b={gotWidth:!1,gotHeight:!1,isContainer:r=!a.hasRawContent},v=w||3,p,o,m=0,d=0,c,e,f,l,k;if(s.shrinkWrap&&a.consumersContentWidth){++m;p=!(v&1);if(r){if(p){b.contentWidth=0;b.gotWidth=!0;++d}else {if((b.contentWidth=a.getProp('contentWidth'))!==undefined){b.gotWidth=!0;++d}}}else {e=q.contentWidth;if(typeof e==='number'){b.contentWidth=e;b.gotWidth=!0;++d}else {if(p){c=!0}else {if(!a.hasDomProp('containerChildrenSizeDone')){c=!1}else {if(n||!g||g.widthModel.shrinkWrap){c=!0}else {c=g.hasDomProp('width')}}}if(c){if(p){f=0}else {if(i&&i.measureContentWidth){f=i.measureContentWidth(a)}else {if(j.cacheWidth){l=j.xtype+'-'+j.ui;k=h.widthCache;f=k[l]||(k[l]=h.measureContentWidth(a))}else {f=h.measureContentWidth(a)}}}if(!isNaN(b.contentWidth=f)){a.setContentWidth(f,!0);b.gotWidth=!0;++d}}}}}else {if(s.natural&&a.consumersWidth){++m;e=q.width;if(typeof e==='number'){b.width=e;b.gotWidth=!0;++d}else {if(n||!g){c=!0}else {c=g.hasDomProp('width')}if(c){if(!isNaN(b.width=h.measureOwnerWidth(a))){a.setWidth(b.width,!1);b.gotWidth=!0;++d}}}}}if(t.shrinkWrap&&a.consumersContentHeight){++m;o=!(v&2);if(r){if(o){b.contentHeight=0;b.gotHeight=!0;++d}else {if((b.contentHeight=a.getProp('contentHeight'))!==undefined){b.gotHeight=!0;++d}}}else {e=q.contentHeight;if(typeof e==='number'){b.contentHeight=e;b.gotHeight=!0;++d}else {if(o){c=!0}else {if(!a.hasDomProp('containerChildrenSizeDone')){c=!1}else {if(u.noWrap){c=!0}else {if(!s.shrinkWrap){c=(a.bodyContext||a).hasDomProp('width')}else {if(n||!g||g.widthModel.shrinkWrap){c=!0}else {c=g.hasDomProp('width')}}}}}if(c){if(o){f=0}else {if(i&&i.measureContentHeight){f=i.measureContentHeight(a)}else {if(j.cacheHeight){l=j.xtype+'-'+j.ui;k=h.heightCache;f=k[l]||(k[l]=h.measureContentHeight(a))}else {f=h.measureContentHeight(a)}}}if(!isNaN(b.contentHeight=f)){a.setContentHeight(f,!0);b.gotHeight=!0;++d}}}}}else {if(t.natural&&a.consumersHeight){++m;e=q.height;if(typeof e==='number'){b.height=e;b.gotHeight=!0;++d}else {if(n||!g){c=!0}else {c=g.hasDomProp('width')}if(c){if(!isNaN(b.height=h.measureOwnerHeight(a))){a.setHeight(b.height,!1);b.gotHeight=!0;++d}}}}}if(g){a.onBoxMeasured()}b.gotAll=d===m;return b},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,'Component'],0);Ext.cmd.derive('Ext.layout.component.Auto',Ext.layout.component.Component,{type:'autocomponent',setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(d,f){var a=this,c=a.lastWidthModel,b=a.lastHeightModel,e=a.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(c&&c.fixed&&d.widthModel.shrinkWrap){e.setWidth(null)}if(b&&b.fixed&&d.heightModel.shrinkWrap){e.setHeight(null)}},calculate:function(b){var a=this,c=a.measureAutoDimensions(b),f=b.heightModel,g=b.widthModel,e,d;if(c.gotWidth){if(g.shrinkWrap){a.publishOwnerWidth(b,c.contentWidth)}else {if(a.publishInnerWidth){a.publishInnerWidth(b,c.width)}}}else {if(!g.auto&&a.publishInnerWidth){e=a.waitForOuterWidthInDom?b.getDomProp('width'):b.getProp('width');if(e===undefined){a.done=!1}else {a.publishInnerWidth(b,e)}}}if(c.gotHeight){if(f.shrinkWrap){a.publishOwnerHeight(b,c.contentHeight)}else {if(a.publishInnerHeight){a.publishInnerHeight(b,c.height)}}}else {if(!f.auto&&a.publishInnerHeight){d=a.waitForOuterHeightInDom?b.getDomProp('height'):b.getProp('height');if(d===undefined){a.done=!1}else {a.publishInnerHeight(b,d)}}}if(!c.gotAll){a.done=!1}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(b,h){var c=this,g=c.owner,a=c.calculateOwnerHeightFromContentHeight(b,h),d,f,e;if(isNaN(a)){c.done=!1}else {d=Ext.Number.constrain(a,g.minHeight,g.maxHeight);if(d===a){f=c.setHeightInDom}else {e=c.sizeModels[d<a?'constrainedMax':'constrainedMin'];a=d;if(b.heightModel.calculatedFromShrinkWrap){b.heightModel=e}else {b.invalidate({heightModel:e})}}b.setHeight(a,f)}},publishOwnerWidth:function(b,h){var c=this,g=c.owner,a=c.calculateOwnerWidthFromContentWidth(b,h),d,f,e;if(isNaN(a)){c.done=!1}else {d=Ext.Number.constrain(a,g.minWidth,g.maxWidth);if(d===a){f=c.setWidthInDom}else {e=c.sizeModels[d<a?'constrainedMax':'constrainedMin'];a=d;if(b.widthModel.calculatedFromShrinkWrap){b.widthModel=e}else {b.invalidate({widthModel:e})}}b.setWidth(a,f)}}},0,0,0,0,['layout.autocomponent'],0,[Ext.layout.component,'Auto'],0);Ext.cmd.derive('Ext.layout.component.BoundList',Ext.layout.component.Auto,{type:'component',beginLayout:function(a){var d=this,b=d.owner,c=b.pagingToolbar;d.scrollPos=b.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(b.floating){a.savedXY=b.getXY();b.setXY([0,-9999])}if(c){a.toolbarContext=a.context.getCmp(c)}a.listContext=a.getEl('listWrap')},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight('auto');a.listWrap.setHeight('auto')}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return !0},finishedLayout:function(e){var a=this,d=e.savedXY,f=a.owner,c=f.listWrap,b=a.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(d){a.owner.setXY(d)}c.setScrollLeft(b.left);c.setScrollTop(b.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(b,d){var c=b.toolbarContext,a=0;if(c){a=c.getProp('height')}if(a===undefined){this.done=!1}else {b.listContext.setHeight(d-b.getFrameInfo().height-a)}},calculateOwnerHeightFromContentHeight:function(c){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),a=c.toolbarContext;if(a){b+=a.getProp('height')}return b}},0,0,0,0,['layout.boundlist'],0,[Ext.layout.component,'BoundList'],0);Ext.cmd.derive('Ext.layout.container.Container',Ext.layout.Layout,{alternateClassName:'Ext.layout.ContainerLayout',type:'container',beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:['{%this.renderBody(out,values)%}'],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl('getTarget',this);this.cacheChildItems(a)},beginLayoutCycle:function(a,c){var b=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(c){if(b.usesContainerHeight){++a.consumersContainerHeight}if(b.usesContainerWidth){++a.consumersContainerWidth}}},cacheChildItems:function(b){var d=this,f,e,c,g,a;if(d.needsItemSize||d.setsItemSize){f=b.context;e=b.childItems=[];c=b.visibleItems=d.getVisibleItems();g=c.length;for(a=0;a<g;++a){e.push(f.getCmp(c[a]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(a){var b=a.props,c=a.el;if(a.widthModel.shrinkWrap&&isNaN(b.width)){a.setContentWidth(c.getWidth())}if(a.heightModel.shrinkWrap&&isNaN(b.height)){a.setContentHeight(c.getHeight())}},configureItem:function(f){var c=this,b=c.itemCls,d=c.owner.itemCls,e,a;f.ownerLayout=c;if(b){if(typeof b==='string'){a=[b]}else {a=b;e=!!a}}if(d){if(e){a=Ext.Array.clone(a)}a=Ext.Array.push(a||[],d)}if(a){f.addCls(a)}},doRenderBody:function(b,a){this.renderItems(b,a);this.renderContent(b,a)},doRenderContainer:function(d,b){var a=b.$comp.layout,e=a.getRenderTpl(),c=a.getRenderData();e.applyOut(c,d)},doRenderItems:function(c,b){var d=b.$layout,a=d.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,c)}},finishRender:function(){var a=this,b,c;Ext.layout.Layout.prototype.finishRender.call(this);a.cacheElements();b=a.getRenderTarget();c=a.getLayoutItems();a.finishRenderItems(b,c)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(d,k){var c=d.targetContext,i=c.getFrameInfo(),j=d.paddingContext.getPaddingInfo(),f=0,e=0,h,g,b,a;if(!d.widthModel.shrinkWrap){++e;b=k?c.getDomProp('width'):c.getProp('width');h=typeof b==='number';if(h){++f;b-=i.width+j.width;if(b<0){b=0}}}if(!d.heightModel.shrinkWrap){++e;a=k?c.getDomProp('height'):c.getProp('height');g=typeof a==='number';if(g){++f;a-=i.height+j.height;if(a<0){a=0}}}return {width:b,height:a,needed:e,got:f,gotAll:f===e,gotWidth:h,gotHeight:g}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var b=this.owner,a=b&&b.items;return a&&a.items||[]},getRenderData:function(){var a=this.owner;return {$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var c=this,f=c.getRenderTarget(),e=c.getLayoutItems(),g=e.length,d=[],a,b;for(a=0;a<g;a++){b=e[a];if(b.rendered&&c.isValidParent(b,f,a)){d.push(b)}}return d},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var b=this,a=Ext.XTemplate.getTpl(this,'renderTpl');if(!a.renderContent){b.owner.setupRenderTpl(a)}return a},getRenderTree:function(){var b,c=this.owner.items,a,d={};do{a=c.generation;b=this.getItemsRenderTree(this.getLayoutItems(),d)}while(c.generation!==a);return b},renderChildren:function(){var a=this,b=a.owner.items,e=a.getRenderTarget(),c,d;do{c=b.generation;d=a.getLayoutItems();a.renderItems(d,e)}while(b.generation!==c)},getScrollbarsNeeded:function(d,b,h,e){var c=Ext.getScrollbarSize(),i=typeof d==='number',f=typeof b==='number',g=0,a=0;if(!c.width){return 0}if(f&&b<e){a=2;d-=c.width}if(i&&d<h){g=1;if(!a&&f){b-=c.height;if(b<e){a=2}}}return a+g},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var e=this.getRenderTarget(),d=this.getLayoutItems(),f=d.length,c=[],b,a;for(b=0;b<f;b++){a=d[b];if(a.rendered&&this.isValidParent(a,e,b)&&a.hidden!==!0&&!a.floated){c.push(a)}}return c},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(b,c){var f=this.owner,d=f.items,e=d.indexOf(b),a;if(b===c){return b}if(c){a=d.indexOf(c);if(e>-1&&e<a){--a}}else {a=d.length}return f.insert(a,b)},setupRenderTpl:function(a){a.renderBody=this.doRenderBody;a.renderContainer=this.doRenderContainer;a.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(a,b){if(!a.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,a,b)}},1,0,0,0,['layout.container'],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,'Container',Ext.layout,'ContainerLayout'],0);Ext.cmd.derive('Ext.layout.container.Auto',Ext.layout.container.Container,{type:'autocontainer',childEls:['outerCt','innerCt'],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:'x-autocontainer-outerCt',innerCtCls:'x-autocontainer-innerCt',renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">','{%this.renderBody(out,values)%}','</div>','</div>'],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var a=this.owner,c=a.inheritedState,b=a.inheritedStateInner;if(!c||c.invalid){c=a.getInherited();b=a.inheritedStateInner}if(d.widthModel.shrinkWrap){b.inShrinkWrapTable=!0}else {delete b.inShrinkWrapTable}},beginLayoutCycle:function(e){var a=this,g=a.outerCt,l=a.lastOuterCtWidth||'',k=a.lastOuterCtHeight||'',j=a.lastOuterCtTableLayout||'',i=e.state,f,d,c,b,h;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);d=c=b='';if(!e.widthModel.shrinkWrap){d='100%';h=a.owner.inheritedStateInner;f=a.getOverflowXStyle(e);b=h.inShrinkWrapTable||f==='auto'||f==='scroll'?'':'fixed'}if(!e.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){c='100%'}if(d!==l||a.hasOuterCtPxWidth){g.setStyle('width',d);a.lastOuterCtWidth=d;a.hasOuterCtPxWidth=!1}if(b!==j){g.setStyle('table-layout',b);a.lastOuterCtTableLayout=b}if(c!==k||a.hasOuterCtPxHeight){g.setStyle('height',c);a.lastOuterCtHeight=c;a.hasOuterCtPxHeight=!1}if(a.hasInnerCtPxHeight){a.innerCt.setStyle('height','');a.hasInnerCtPxHeight=!1}i.overflowAdjust=i.overflowAdjust||a.lastOverflowAdjust},calculate:function(b){var a=this,d=b.state,c=a.getContainerSize(b,!0),e=d.calculatedItems||(d.calculatedItems=a.calculateItems?a.calculateItems(b,c):!0);a.setCtSizeIfNeeded(b,c);if(e&&b.hasDomProp('containerChildrenSizeDone')){a.calculateContentSize(b);if(c.gotAll){if(a.manageOverflow&&!b.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(b,c)}return}}a.done=!1},calculateContentSize:function(a){var b=this,f=(a.widthModel.shrinkWrap?1:0)|(a.heightModel.shrinkWrap?2:0),d=f&1||undefined,c=f&2||undefined,e=0,g=a.props;if(d){if(isNaN(g.contentWidth)){++e}else {d=undefined}}if(c){if(isNaN(g.contentHeight)){++e}else {c=undefined}}if(e){if(d&&!a.setContentWidth(b.measureContentWidth(a))){b.done=!1}if(c&&!a.setContentHeight(b.measureContentHeight(a))){b.done=!1}}},calculateOverflow:function(d){var c=this,g,f,e,a,h,i,b;h=c.getOverflowXStyle(d)==='auto';i=c.getOverflowYStyle(d)==='auto';if(h||i){e=Ext.getScrollbarSize();b=d.overflowContext.el.dom;a=0;if(b.scrollWidth>b.clientWidth){a|=1}if(b.scrollHeight>b.clientHeight){a|=2}g=i&&a&2?e.width:0;f=h&&a&1?e.height:0;if(g!==c.lastOverflowAdjust.width||f!==c.lastOverflowAdjust.height){c.done=!1;d.invalidate({state:{overflowAdjust:{width:g,height:f},overflowState:a,secondPass:!0}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(b,a){var c=a.$layout,d=Ext.XTemplate,e=c.beforeBodyTpl,f=c.afterBodyTpl;if(e){d.getTpl(c,'beforeBodyTpl').applyOut(a,b)}this.renderItems(b,a);this.renderContent(b,a);if(f){d.getTpl(c,'afterBodyTpl').applyOut(a,b)}},doRenderPadding:function(d,b){var e=b.$layout,a=b.$layout.owner,c=a[a.contentPaddingProperty];if(e.managePadding&&c){d.push('padding:',a.unitizeBox(c))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle('position','relative');a.dom.scrollWidth;a.setStyle('position','')}},getContainerSize:function(c,d){var b=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),a=c.state.overflowAdjust;if(a){b.width-=a.width;b.height-=a.height}return b},getRenderData:function(){var b=this,a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.innerCtCls=b.innerCtCls;a.outerCtCls=b.outerCtCls;return a},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle('overflow-x'))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle('overflow-y'))},initContextItems:function(a){var b=this,d=a.target,c=b.owner.getOverflowEl();a.outerCtContext=a.getEl('outerCt',b);a.innerCtContext=a.getEl('innerCt',b);a.overflowContext=c===a.el?a:a.getEl(c);if(d[d.contentPaddingProperty]!==undefined){a.paddingContext=a.innerCtContext}},initLayout:function(){var a=this,b=Ext.getScrollbarSize().width,c=a.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(b&&a.manageOverflow&&!a.hasOwnProperty('lastOverflowAdjust')){if(c.scrollable||a.reserveScrollbar){a.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&c[c.contentPaddingProperty]===undefined){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(f){var a,b,e,c,d;if(this.chromeCellMeasureBug){a=this.innerCt.dom;b=a.style;e=b.display;if(e==='table-cell'){b.display='';a.offsetWidth;b.display=e}}if(Ext.isSafari){a=this.outerCt.dom;b=a.style;b.display='table-cell';a.offsetWidth;a.style.display=''}c=this.outerCt.getWidth();d=f.target;if(this.managePadding&&d[d.contentPaddingProperty]===undefined){c+=f.targetContext.getPaddingInfo().width}return c},setCtSizeIfNeeded:function(a,h){var c=this,b=h.height,k=a.paddingContext.getPaddingInfo(),g=c.getTarget(),f=c.getOverflowXStyle(a),j=f==='auto'||f==='scroll',i=Ext.getScrollbarSize(),e,d;if(b&&!a.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){e=!0}if(Ext.isIE8){d=!0}if((e||d)&&j&&g.dom.scrollWidth>g.dom.clientWidth){b=Math.max(b-i.height,0)}if(e){a.outerCtContext.setProp('height',b+k.height);c.hasOuterCtPxHeight=!0}if(d){a.innerCtContext.setProp('height',b);c.hasInnerCtPxHeight=!0}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,['layout.auto','layout.autocontainer'],0,[Ext.layout.container,'Auto'],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26});Ext.cmd.derive('Ext.ZIndexManager',Ext.Base,{alternateClassName:'Ext.WindowGroup',statics:{zBase:9000,activeCounter:0},constructor:function(b){var a=this;a.id=Ext.id(null,'zindex-mgr-');a.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(c,d){var a=(c.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!a){a=c.getActiveCounter()-d.getActiveCounter()}return a}},filters:{filterFn:function(a){return a.isVisible()}}});a.zIndexStack.addObserver(a);a.front=null;a.globalListeners=Ext.GlobalEvents.on({beforehide:a.onComponentShowHide,show:a.onComponentShowHide,scope:a,destroyable:!0});if(b){if(b.isContainer){b.on('resize',a.onContainerResize,a);a.zseed=Ext.Number.from(a.rendered?b.getEl().getStyle('zIndex'):undefined,a.getNextZSeed());a.targetEl=b.getTargetEl();a.container=b}else {Ext.on('resize',a.onContainerResize,a);a.zseed=a.getNextZSeed();a.targetEl=Ext.get(b)}}else {a.zseed=a.getNextZSeed();Ext.onInternalReady(function(){Ext.on('resize',a.onContainerResize,a);a.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=10000},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var d=this,b=d.front,k=b&&b.containsFocus,g=d.zseed,i=d.zIndexStack.getRange(),j=i.length,e,c,f,a,h=!1;for(e=0;e<j;e++){c=i[e];g=c.setZIndex(g);if(!c.hidden){a=c;if(c.modal){f=c}}}if(a!==b){if(b&&!b.destroying){b.setActive(!1)}if(a){h=a.isFocusable(!0)&&(a.modal||a.focusOnToFront&&!a.preventFocusOnActivate);a.setActive(!0,h)}}d.front=a;if(f){d.showModalMask(f)}else {d.hideModalMask()}return g},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentRender:function(a){this.zIndexStack.itemChanged(a,'hidden')},onComponentShowHide:function(b){var a=this.zIndexStack;if(b.isFloating()&&!this.hidingAll&&(a.getSource()||a).contains(b)){a.itemChanged(b,'hidden');a.sort()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;if(!a.rendered){a.on('render',b.onComponentRender,b,{single:!0})}b.zIndexStack.add(a)},unregister:function(b){var a=this;delete b.zIndexManager;b.un('render',a.onComponentRender,a);a.zIndexStack.remove(b);a.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(a,f){var e=this,b=e.zIndexStack,g=b.last(),c,d;a=e.get(a);if(!a||b.find('alwaysOnTop',!0)){return !1}d=a.preventFocusOnActivate;a.preventFocusOnActivate=f;a.setActiveCounter(++Ext.ZIndexManager.activeCounter);a.preventFocusOnActivate=d;c=b.last();return c===a&&c!==g},sendToBack:function(a){a=this.get(a);if(a){a.setActiveCounter(0)}return a||null},hideAll:function(){var b=this.zIndexStack.getRange(),c=b.length,a;this.hidingAll=!0;for(a=0;a<c;a++){b[a].hide()}this.hidingAll=!1},hide:function(){var b=this,d=Ext.Element.getActiveElement(),e=b.tempHidden=b.zIndexStack.getRange(),f=e.length,c,a;b.focusRestoreElement=null;for(c=0;c<f;c++){a=e[c];if(a.el.contains(d)){b.focusRestoreElement=d}a.el.hide();a.hidden=!0}},show:function(){var b=this,c,d=b.tempHidden,e=d?d.length:0,a;for(c=0;c<e;c++){a=d[c];a.el.show();a.hidden=!1;a.setPosition(a.x,a.y)}b.tempHidden=null;if(b.focusRestoreElement){b.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(f,d){var c=this.zIndexStack.getRange(),b,e=c.length,a;for(b=0;b<e;b++){a=c[b];if(a.isComponent&&f.call(d||a,a)===!1){return}}},eachTopDown:function(e,d){var c=this.zIndexStack.getRange(),b,a;for(b=c.length;b-->0;){a=c[b];if(a.isComponent&&e.call(d||a,a)===!1){return}}},destroy:function(){var a=this,c=a.zIndexStack.getRange(),d=c.length,b;for(b=0;b<d;b++){Ext.destroy(c[b])}if(a.container){a.container.un('resize',a.onContainerResize,a)}else {if(a.targetEl){Ext.un('resize',a.onContainerResize,a)}}Ext.destroy(a.mask,a.maskShim,a.zIndexStack,a.globalListeners);a.zIndexStack=a.container=a.targetEl=a.globalListeners=null;a.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return {height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else {return a.getBox()}},onContainerResize:function(){var d=this,b=d.mask,a=d.maskShim,c;if(b&&b.isVisible()){b.hide();if(a){a.hide()}c=d.getMaskBox();if(a){a.setSize(c);a.show()}b.setSize(c);b.show()}},onMaskClick:function(){if(this.front){this.front.focus()}},showModalMask:function(c){var b=this,g=c.el,h=g.getStyle('zIndex')-4,f=c.floatParent?c.floatParent.getTargetEl():c.container,a=b.mask,d=b.maskShim,e;if(!a){b.mask=a=Ext.getBody().createChild({role:'presentation',cls:'x-mask x-border-box',style:'height:0;width:0'});a.setVisibilityMode(Ext.Element.DISPLAY);a.on('click',b.onMaskClick,b)}else {b.hideModalMask()}a.maskTarget=f;e=b.getMaskBox();if(d){d.setStyle('zIndex',h);d.show();d.setBox(e)}a.setStyle('zIndex',h);f.saveTabbableState({excludeRoot:g});a.show();a.setBox(e)},hideModalMask:function(){var a=this.mask,b=this.maskShim;if(a&&a.isVisible()){a.maskTarget.restoreTabbableState();a.maskTarget=undefined;a.hide();if(b){b.hide()}}}}},1,0,0,0,0,0,[Ext,'ZIndexManager',Ext,'WindowGroup'],function(){Ext.WindowManager=Ext.WindowMgr=new this()});Ext.cmd.derive('Ext.util.ItemCollection',Ext.util.MixedCollection,{alternateClassName:'Ext.ItemCollection',getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}},0,0,0,0,0,0,[Ext.util,'ItemCollection',Ext,'ItemCollection'],0);Ext.cmd.derive('Ext.mixin.Queryable',Ext.Base,{mixinId:'queryable',isQueryable:!0,query:function(a){a=a||'*';return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,e){var d=[],c=this.getQueryRoot().getRefItems(!0),b=0,f=c.length,a;for(;b<f;++b){a=c[b];if(g.call(e||a,a)!==!1){d.push(a)}}return d},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(b){var a=this.getQueryRoot().getRefItems();if(b&&b.isComponent){return this.matchById(a,b.getItemId())}if(b){a=Ext.ComponentQuery.query(b,a)}if(a.length){return a[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(!0),a.getItemId())}a=a||'';return this.query(a)[0]||null},visitPreOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!0,b,this.getQueryRoot(),d,c,a)},visitPostOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!1,b,this.getQueryRoot(),d,c,a)},getRefItems:function(){return []},getQueryRoot:function(){return this},privates:{matchById:function(c,e){var d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.getItemId()===e){return b}}return null}}},0,0,0,0,0,0,[Ext.mixin,'Queryable'],0);Ext.cmd.derive('Ext.mixin.Container',Ext.Mixin,{mixinConfig:{id:'container'},isContainer:!0,config:{referenceHolder:!1},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(b){var a=this.getReferences();return a&&a[b]||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(b){var a=this,d,c;if(a.destroying||a.destroyed){return}c=a.refs||(a.refs={});d=b.referenceKey;c[d]=b},clearReference:function(a){var b=this.refs,c=a.referenceKey;if(b&&c){a.viewModelKey=a.referenceKey=b[c]=null}},containerOnAdded:function(b,a){if(a){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(b){var a;if(!b){a=this.lookupReferenceHolder();if(a){Ext.ComponentManager.markReferencesDirty();a.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(b,h){var a=this,d=a.getController(),f=a.getSession(),g=a.getConfig('viewModel',!0),e=a.getReference(),c=a.getReferenceHolder();if(d){b.referenceHolder=d;c=!0}else {if(c){b.referenceHolder=a}}if(c){b.referencePath=''}else {if(e&&a.isParentReference){b.referencePath=a.referenceKey+'.'}}if(f){b.session=f}if(g){b.viewModelPath=''}else {if(e&&a.isParentReference){b.viewModelPath=a.viewModelKey+'.'}}},setupReference:function(a){var b;if(a&&a.charAt(b=a.length-1)==='>'){this.isParentReference=!0;a=a.substring(0,b)}return a}}},0,0,0,0,0,0,[Ext.mixin,'Container'],0);Ext.cmd.derive('Ext.container.Container',Ext.Component,{alternateClassName:['Ext.Container','Ext.AbstractContainer'],renderTpl:'{%this.renderContainer(out,values)%}',autoDestroy:!0,defaultType:'panel',detachOnRemove:!0,items:undefined,layout:'auto',suspendLayout:!1,_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:'presentation',baseCls:'x-container',layoutCounter:0,add:function(){var a=this,e=Ext.Array.slice(arguments),l=typeof e[0]==='number'?e.shift():-1,m=a.getLayout(),k=!1,j,d,f,h,b,c,i,g;if(e.length===1&&Ext.isArray(e[0])){d=e[0];j=!0}else {d=e}if(a.rendered){Ext.suspendLayouts()}i=d=a.prepareItems(d,!0);h=d.length;if(!j&&h===1){i=d[0]}for(f=0;f<h;f++){b=d[f];c=l<0?a.items.length:l+f;g=!!b.instancedCmp;delete b.instancedCmp;if(b.floating){(a.floatingItems||(a.floatingItems=new Ext.util.ItemCollection())).add(b);b.onAdded(a,c,g);delete b.$initParent;if(a.hasListeners.add){a.fireEvent('add',a,b,c)}}else {if((!a.hasListeners.beforeadd||a.fireEvent('beforeadd',a,b,c)!==!1)&&a.onBeforeAdd(b)!==!1){a.items.insert(c,b);b.onAdded(a,c,g);delete b.$initParent;a.onAdd(b,c);m.onAdd(b,c);k=!0;if(a.hasListeners.add){a.fireEvent('add',a,b,c)}}}}if(k){a.updateLayout()}if(a.rendered){Ext.resumeLayouts(!0)}return i},onAdded:function(a,c,b){Ext.Component.prototype.onAdded.call(this,a,c,b);this.containerOnAdded(a,b)},onRemoved:function(a){this.containerOnRemoved(a);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var a=this.floatingItems,d,c,b;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(a){a=a.items;d=a.length;for(c=0;c<d;c++){b=a[c];if(!b.rendered&&b.autoShow){b.show()}}}},afterLayout:function(c){var a=this,b=a.getScrollable();++a.layoutCounter;if(b&&a.layoutCounter>1){b.refresh()}if(a.hasListeners.afterlayout){a.fireEvent('afterlayout',a,c)}},beforeDestroy:function(){var a=this,d=a.items,c=a.floatingItems,b;if(d){while(b=d.first()){a.doRemove(b,!0)}}if(c){while(b=c.first()){a.doRemove(b,!0)}}Ext.destroy(a.layout);Ext.Component.prototype.beforeDestroy.call(this)},destroy:function(){var a=this;Ext.Component.prototype.destroy.call(this);if(a.items){a.items.destroy()}if(a.floatingItems){a.floatingItems.destroy()}a.refs=a.items=a.floatingItems=a.layout=null},beforeRender:function(){var a=this,c=a.getLayout(),b;a.preventChildDisable=!0;Ext.Component.prototype.beforeRender.call(this);a.preventChildDisable=!1;if(!c.initialized){c.initLayout()}b=c.targetCls;if(b){a.applyTargetCls(b)}},cascade:function(f,e,d){var a=this,h=a.items?a.items.items:[],j=h.length,g=0,b,c=d?d.concat(a):[a],i=c.length-1;if(f.apply(e||a,c)!==!1){for(;g<j;g++){b=h[g];if(b.cascade){b.cascade(f,e,d)}else {c[i]=b;f.apply(e||b,c)}}}return this},contains:function(a,c){var b=!1;if(c){this.cascade(function(d){if(d.contains&&d.contains(a)){b=!0;return !1}});return b}else {return this.items.contains(a)||this.floatingItems&&this.floatingItems.contains(a)}},disable:function(e,d){var a=this,g=a.disabled,c,f,b;Ext.Component.prototype.disable.call(this,e,d);if(!d&&!a.preventChildDisable&&!g){c=a.getChildItemsToDisable();f=c.length;for(b=0;b<f;b++){c[b].disable(e,!0)}}return a},enable:function(d,g){var c=this,f=c.disabled,b,e,a;Ext.Component.prototype.enable.call(this,d,g);if(f){b=c.getChildItemsToDisable();e=b.length;for(a=0;a<e;a++){b[a].enable(d,!0)}}return c},getChildByElement:function(b,e){var a,c,d=0,f=this.getRefItems(),g=f.length;b=Ext.getDom(b);for(;d<g;d++){a=f[d];c=a.getEl();if(c&&(c.dom===b||c.contains(b))){return e&&a.getChildByElement?a.getChildByElement(b,e):a}}return null},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}var b=this.items.get(a),c=this.floatingItems;if(!b&&c&&typeof a!=='number'){b=c.get(a)}return b},getFocusEl:function(){var a=this.getDefaultFocus();if(a){return a}else {if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(g){var f=this,d=f.items.items,e=d.length,c=0,b,a=[];for(;c<e;c++){b=d[c];a[a.length]=b;if(g&&b.getRefItems){a.push.apply(a,b.getRefItems(!0))}}if(f.floatingItems){d=f.floatingItems.items;e=d.length;for(c=0;c<e;c++){b=d[c];a[a.length]=b;if(g&&b.getRefItems){a.push.apply(a,b.getRefItems(!0))}}}return a},getDefaultFocus:function(){var a=this.defaultFocus,b;if(a){b=this.down(a)}return b},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=!0;a.initItems();if(a.disabled){a.disabled=!1;a.disable(!0)}delete a.constructing},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.ItemCollection();if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(b,c){var a=this,f=a.controller,d=a.layout,i=a.session,h=a.viewModel,g=a.reference,e=a.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,b,c);if(a.collapsed){b.collapsed=!0}a.initContainerInheritedState(b,c);if(d&&d.initInheritedState){d.initInheritedState(b,c)}},insert:function(c,a){var b;if(a&&a.isComponent){b=this.items.indexOf(a);if(b!==-1){return this.move(b,c)}}return this.add(c,a)},lookupComponent:function(a){if(!a.isComponent){if(typeof a==='string'){a=Ext.ComponentManager.get(a)}else {a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(a,c){var d=this,e=d.items,b;if(a.isComponent){a=e.indexOf(a)}b=e.getAt(a);if(a!==c){b=e.removeAt(a);if(b===!1){return !1}c=Math.min(c,e.getCount());e.insert(c,b);d.onMove(b,a,c);if(d.hasListeners.childmove){d.fireEvent('childmove',d,b,a,c)}d.updateLayout()}return b},moveBefore:function(a,b){if(a!==b){a=this.layout.moveItemBefore(a,b)}return a},moveAfter:function(a,b){var c=this.layout,d;if(a!==b){d=b?c.getMoveAfterIndex(b):0;a=c.moveItemBefore(a,this.items.getAt(d))}return a},nextChild:function(f,e){var h=this,b=h.items,c=b.indexOf(f),d=0,g=b.length,a;if(c!==-1){if(e){for(;d<g;d++){a=b.getAt(c+d);if(!a||Ext.ComponentQuery.is(a,e)){break}}}else {a=b.getAt(c+1)}}return a||null},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,!1)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(f,e){var h=this,b=h.items,c=b.indexOf(f),d=0,g=b.length,a;if(c!==-1){if(e){for(;d<g;d++){a=b.getAt(c-d);if(!a||Ext.ComponentQuery.is(a,e)){break}}}else {a=b.getAt(c-1)}}return a||null},remove:function(d,c){var a=this,b;if(a.destroyed||a.destroying){return}b=a.getComponent(d);if(b&&(!a.hasListeners.beforeremove||a.fireEvent('beforeremove',a,b)!==!1)){a.doRemove(b,c);if(a.hasListeners.remove){a.fireEvent('remove',a,b)}if(!a.destroying&&!b.floating){a.updateLayout()}}return b},removeAll:function(h){var a=this,b,f=a.floatingItems,g=[],e=0,d,c;if(f){b=a.items.items.concat(f.items)}else {b=a.items.items.slice()}d=b.length;Ext.suspendLayouts();a.removingAll=!0;for(;e<d;e++){c=b[e];a.remove(c,h);if(c.ownerCt!==a){g.push(c)}}a.removingAll=!1;Ext.resumeLayouts(!!d);return g},setLayout:function(a){var e=this,b=e.layout,f=b&&b.isLayout,c,d;if(typeof a==='string'){a={type:a}}d=a.type;if(f&&(!d||d===b.type)){delete a.type;b.setConfig(a)}else {if(f){b.setOwner(null)}c=e.self.prototype.layout;if(typeof c==='string'){a.type=d||c}else {Ext.merge(Ext.merge({},c),a)}a=this.layout=Ext.Factory.layout(a);a.setOwner(this)}if(e.rendered){e.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var c=this,b=c.defaults;if(b){if(Ext.isFunction(b)){b=b.call(c,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(b,null,c._applyDefaultsOptions)}else {a=c.getConfigurator().merge(c,Ext.Object.fork(b),a)}}return a},applyReference:function(a){return this.setupReference(a)},applyTargetCls:function(a){this.layoutTargetCls=a},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(a,c){c=c===!0||c!==!1&&this.autoDestroy;var b=this,e=b.layout,g=e&&b.rendered,d=a.destroying||c,f=a.floating;if(f){b.floatingItems.remove(a)}else {b.items.remove(a)}if(g&&!f){if(e.running){Ext.Component.cancelLayout(a,d)}e.onRemove(a,d)}a.onRemoved(d);b.onRemove(a,d);if(c){a.destroy()}else {if(g&&!f){e.afterRemove(a)}if(b.detachOnRemove&&a.rendered){b.detachComponent(a)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query('[isFormField],[isFocusableContainer],button')},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(a,f){if(Ext.isArray(a)){a=a.slice()}else {a=[a]}var e=this,c=0,d=a.length,b;for(;c<d;c++){b=a[c];if(b==null){Ext.Array.erase(a,c,1);--c;--d}else {if(f){b=this.applyDefaults(b)}b.$initParent=e;if(b.isComponent){b.instancedCmp=!0}a[c]=e.lookupComponent(b);delete b.$initParent}}return a},repositionFloatingItems:function(){var b=this.floatingItems,d,c,a;if(b){b=b.items;d=b.length;for(c=0;c<d;c++){a=b[c];if(a.el&&!a.hidden){a.setPosition(a.x,a.y)}}}},_noMargin:{'margin-top':'','margin-right':'','margin-bottom':'','margin-left':''},resetItemMargins:function(){var b=this.items.items,c=b.length,d=this._noMargin,a;while(c--){a=b[c];a.margin$=null;a.el.setStyle(d)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,['container'],['component','box','container'],{'component':!0,'box':!0,'container':!0},['widget.container'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,'Container',Ext,'Container',Ext,'AbstractContainer'],0);Ext.cmd.derive('Ext.layout.container.boxOverflow.None',Ext.Base,{alternateClassName:'Ext.layout.boxOverflow.None',factoryConfig:{defaultType:'none'},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var c=this,d=b.state.boxPlan,a;if(d&&d.tooNarrow){a=c.handleOverflow(b);if(a){if(a.reservedSpace){c.layout.publishInnerCtSize(b,a.reservedSpace)}}}else {c.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(e){var b=this,d=b.layout.owner,c,a;if(d.hasListeners.overflowchange){c=d.query('>[hidden]');a=c.length;if(a!==b.lastHiddenCount){d.fireEvent('overflowchange',b.lastHiddenCount,a,c);b.lastHiddenCount=a}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(b){var a;if(b.isToolbar){a='toolbar'}else {if(b.isTabBar){a='tab-bar'}else {if(b.isMenu){a='menu'}else {if(b.isBreadcrumb){a='breadcrumb'}else {a=b.getXType()}}}}return a},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return ''},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}},1,0,0,0,['box.overflow.None','box.overflow.none'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,'None',Ext.layout.boxOverflow,'None'],0);Ext.cmd.derive('Ext.layout.container.boxOverflow.Scroller',Ext.layout.container.boxOverflow.None,{alternateClassName:'Ext.layout.boxOverflow.Scroller',animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:'x-box-scroller',beforeSuffix:'-before-scroller',afterSuffix:'-after-scroller',constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.scrollPosition=0;a.scrollSize=0},getPrefixConfig:function(){return {role:'presentation',id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls('beforeX'),style:'display:none'}},getSuffixConfig:function(){return {role:'presentation',id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls('afterX'),style:'display:none'}},createScrollerCls:function(g){var c=this,d=c.layout,b=d.owner,e=c.getOwnerType(b),a=c.scrollerCls,f=a+' '+a+'-'+d.names[g]+' '+a+'-'+e+' '+a+'-'+e+'-'+b.ui;if(b.plain){f+=' '+a+'-plain'}return f},getOverflowCls:function(a){return this.scrollerCls+'-body-'+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(a){var b=this,f=a.state.boxPlan,e=b.layout,d=e.names,g=Math.min(b.getMaxScrollPosition(),a.innerCtScrollPos),c;if(f&&f.tooNarrow){c=a.childItems[a.childItems.length-1].props;b.scrollSize=c[d.x]+c[d.width];b.updateScrollButtons();e.innerCt[d.setScrollLeft](g)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,a)},handleOverflow:function(i){var a=this,d=a.layout.names,h=d.getWidth,f=d.parallelMargins,g,e,b,c;a.showScrollers();b=a.getBeforeScroller();c=a.getAfterScroller();g=b[h]()+c[h]()+b.getMargin(f)+c.getMargin(f);e=i.targetContext.getPaddingInfo()[d.width];return {reservedSpace:Math.max(g-e,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,'beforeRepeater','scrollLeft'))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,'afterRepeater','scrollRight'))},createScroller:function(g,f,e){var b=this,d=b.layout.owner,c=b.scrollerCls,a;a=d.el.getById(d.id+g);a.addClsOnOver(c+'-hover');a.addClsOnClick(c+'-pressed');a.setVisibilityMode(Ext.Element.DISPLAY);b[f]=new Ext.util.ClickRepeater(a,{interval:b.scrollRepeatInterval,handler:e,scope:b});return a},createWheelListener:function(){var a=this;a.wheelListener=a.layout.innerCt.on('mousewheel',a.onMouseWheel,a,{destroyable:!0})},onMouseWheel:function(a){a.stopEvent();this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement*-1,!1)},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;if(!a.wheelListener){a.createWheelListener()}a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==='vertical'?'vertical-scroller':'scroller')},hideScrollers:function(){var a=this,b=a.getBeforeScroller(),c=a.getAfterScroller();if(b){b.hide();c.hide();a.layout.owner.removeClsWithUI(a.layout.direction==='vertical'?'vertical-scroller':'scroller')}},destroy:function(){Ext.destroyMembers(this,'beforeRepeater','afterRepeater','_beforeScroller','_afterScroller','wheelListener');this.callParent()},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return {duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var a=this,c=a.getBeforeScroller(),d=a.getAfterScroller(),b;if(!c||!d){return}b=a.scrollerCls+'-disabled';c[a.atExtremeBefore()?'addCls':'removeCls'](b);d[a.atExtremeAfter()?'addCls':'removeCls'](b);a.scrolling=!1},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var b=this,c=b.layout,a;if(isNaN(b.scrollPosition)){a=c.innerCt[c.names.getScrollLeft]()}else {a=b.scrollPosition}return a},getMaxScrollPosition:function(){var c=this,b=c.layout,a=c.scrollSize-b.innerCt.lastBox[b.names.width];return a<0?0:a},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),e=c.getAfterScroller(),b=c.layout.names,a=c.scrollerCls;d.removeCls(a+'-'+b.beforeY);e.removeCls(a+'-'+b.afterY);d.addCls(a+'-'+b.beforeX);e.addCls(a+'-'+b.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(g,b){var a=this,d=a.layout,e=d.names,f=a.getScrollPosition(),c=Ext.Number.constrain(g,0,a.getMaxScrollPosition());if(c!==f&&!a.scrolling){a.scrollPosition=NaN;if(b===undefined){b=a.animateScroll}d.innerCt[e.scrollTo](e.beforeScrollX,c,b?a.getScrollAnim():!1);if(b){a.scrolling=!0}else {a.updateScrollButtons()}a.fireEvent('scroll',a,c,b?a.getScrollAnim():!1)}},scrollToItem:function(a,i){var c=this,e=c.layout,h=e.owner,f=e.names,j=e.innerCt,d,g,b;a=c.getItem(a);if(a!==undefined){if(a===h.items.first()){b=0}else {if(a===h.items.last()){b=c.getMaxScrollPosition()}else {d=c.getItemVisibility(a);if(!d.fullyVisible){g=a.getBox(!1,!0);b=g[f.x];if(d.hiddenEnd){b-=j[f.getWidth]()-g[f.width]}}}}if(b!==undefined){c.scrollTo(b,i)}}},getItemVisibility:function(i){var d=this,h=d.getItem(i).getBox(!0,!0),g=d.layout,c=g.names,b=h[c.x],f=b+h[c.width],a=d.getScrollPosition(),e=a+g.innerCt[c.getWidth]();return {hiddenStart:b<a,hiddenEnd:f>e,fullyVisible:b>=a&&f<=e}}},1,0,0,0,['box.overflow.Scroller','box.overflow.scroller'],[['observable',Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,'Scroller',Ext.layout.boxOverflow,'Scroller'],0);Ext.define('Ext.rtl.layout.container.boxOverflow.Scroller',{override:'Ext.layout.container.boxOverflow.Scroller',getWheelDelta:function(c){var b=this.layout,a=c.getWheelDelta();if(b.direction==='horizontal'&&b.owner.getInherited().rtl){a=-a}return a}});Ext.cmd.derive('Ext.dd.DragDropManager',Ext.Base,{singleton:!0,alternateClassName:['Ext.dd.DragDropMgr','Ext.dd.DDM'],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:'x-dd-drag-current',_execOnAll:function(f,g){var c=this.ids,d,e,b,a;for(d in c){if(c.hasOwnProperty(d)){a=c[d];for(e in a){if(a.hasOwnProperty(e)){b=a[e];if(!this.isTypeOfDD(b)){continue}b[f].apply(b,g)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:!1},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:!0,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll('resetConstraints',[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(b,f){var a=this,d=a.ids,e=b.groups,c;if(a.clearingAll){return}if(a.dragCurrent===b){a.dragCurrent=null}for(c in e){if(e.hasOwnProperty(c)){if(f){delete d[c]}else {if(d[c]){delete d[c][b.id]}}}}delete a.handleIds[b.id];delete a.locationCache[b.id]},regHandle:function(a,b){if(!this.handleIds[a]){this.handleIds[a]={}}this.handleIds[a][b]=b},isDragDrop:function(a){return this.getDDById(a)?!0:!1},getRelated:function(f,e){var b=[],c,d,a;for(c in f.groups){for(d in this.ids[c]){a=this.ids[c][d];if(!this.isTypeOfDD(a)){continue}if(!e||a.isTarget){b[b.length]=a}}}return b},isLegalTarget:function(e,d){var b=this.getRelated(e,!0),a,c;for(a=0,c=b.length;a<c;++a){if(b[a].id===d.id){return !0}}return !1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(b,e){var a=this,d,c;a.isMouseDown=!0;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}a.currentPoint=b.getPoint();if(a.dragCurrent){a.handleMouseUp(b)}a.mousedownEvent=b;a.currentTarget=b.getTarget();a.dragCurrent=e;c=e.getEl();Ext.fly(c).setCapture();d=b.getXY();a.startX=d[0];a.startY=d[1];a.offsetX=a.offsetY=0;a.deltaX=a.startX-c.offsetLeft;a.deltaY=a.startY-c.offsetTop;a.dragThreshMet=!1},startDrag:function(d,e){var b=this,a=b.dragCurrent,c;clearTimeout(b.clickTimeout);if(a){a.b4StartDrag(d,e);a.startDrag(d,e);c=a.getDragEl();if(c){Ext.fly(c).addCls(b.dragCls)}}b.dragThreshMet=!0},handleMouseUp:function(b){var a=this;a.isMouseDown=!1;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,!0)}a.stopDrag(b);a.stopEvent(b);a.mousedownEvent=a.currentTarget=null},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(d){var a=this,b=a.dragCurrent,c;if(b){if(a.dragThreshMet){c=b.getDragEl();if(c){Ext.fly(c).removeCls(a.dragCls)}b.b4EndDrag(d);b.endDrag(d)}a.dragCurrent.onMouseUp(d)}a.dragCurrent=null;a.dragOvers={}},handleMouseMove:function(b){var a=this,c=a.dragCurrent,f=a.currentPoint=b.getPoint(),g=f.x,h=f.y,d,e;a.offsetX=g-a.startX;a.offsetY=h-a.startY;if(!c){return !0}if(!a.dragThreshMet){d=Math.abs(a.offsetX);e=Math.abs(a.offsetY);if(d>a.clickPixelThresh||e>a.clickPixelThresh){a.startDrag(a.startX,a.startY)}}if(a.dragThreshMet){c.b4Drag(b);c.onDrag(b);if(!c.moveOnly){a.fireEvents(b,!1)}}a.stopEvent(b);return !0},fireEvents:function(e,t){var d=this,s=Ext.supports.Touch,c=d.dragCurrent,l=d.currentPoint,v=l.x,w=l.y,j=[],r=[],h=[],i=[],g=[],k=[],u=s?document.documentElement.clientWidth/window.innerWidth:1,p,b,o,q,a,f,n,m;if(!c||c.isLocked()){return}m=!(c.deltaX<0||c.deltaY<0);if(s||!d.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&m){p=c.getDragEl();if(m){p.style.visibility='hidden'}e.target=document.elementFromPoint(v/u,w/u);if(m){p.style.visibility='visible'}}for(a in d.dragOvers){b=d.dragOvers[a];delete d.dragOvers[a];if(!d.isTypeOfDD(b)||b.destroyed){continue}if(d.notifyOccluded){if(!this.isOverTarget(l,b,d.mode)){h.push(b)}}else {if(!e.within(b.getEl())){h.push(b)}}r[a]=!0}for(n in c.groups){if('string'!==typeof n){continue}for(a in d.ids[n]){b=d.ids[n][a];if(d.isTypeOfDD(b)&&(o=b.getEl())&&b.isTarget&&!b.isLocked()&&Ext.fly(o).isVisible(!0)&&(b!==c||c.ignoreSelf===!1)){if(d.notifyOccluded){if((b.zIndex=d.getZIndex(o))!==-1){q=!0}j.push(b)}else {if(e.within(b.getEl())){j.push(b);break}}}}}if(q){Ext.Array.sort(j,d.byZIndex)}for(a=0,f=j.length;a<f;a++){b=j[a];if(d.isOverTarget(l,b,d.mode)){if(t){g.push(b)}else {if(!r[b.id]){k.push(b)}else {i.push(b)}d.dragOvers[b.id]=b}if(!d.notifyOccluded){break}}}if(d.mode){if(h.length){c.b4DragOut(e,h);c.onDragOut(e,h)}if(k.length){c.onDragEnter(e,k)}if(i.length){c.b4DragOver(e,i);c.onDragOver(e,i)}if(g.length){c.b4DragDrop(e,g);c.onDragDrop(e,g)}}else {for(a=0,f=h.length;a<f;++a){c.b4DragOut(e,h[a].id);c.onDragOut(e,h[a].id)}for(a=0,f=k.length;a<f;++a){c.onDragEnter(e,k[a].id)}for(a=0,f=i.length;a<f;++a){c.b4DragOver(e,i[a].id);c.onDragOver(e,i[a].id)}for(a=0,f=g.length;a<f;++a){c.b4DragDrop(e,g[a].id);c.onDragDrop(e,g[a].id)}}if(t&&!g.length){c.onInvalidDrop(e)}},getZIndex:function(a){var d=document.body,c,b=-1;a=Ext.getDom(a);while(a!==d){if(!isNaN(c=Number(Ext.fly(a).getStyle('zIndex')))){b=c}a=a.parentNode}return b},byZIndex:function(a,b){return a.zIndex<b.zIndex},getBestMatch:function(d){var a=null,e=d.length,c,b;if(e===1){a=d[0]}else {for(c=0;c<e;++c){b=d[c];if(b.cursorIsOver){a=b;break}else {if(!a||a.overlap.getArea()<b.overlap.getArea()){a=b}}}}return a},refreshCache:function(e){var b,d,a,c;for(b in e){if('string'!==typeof b){continue}for(d in this.ids[b]){a=this.ids[b][d];if(this.isTypeOfDD(a)){c=this.getLocation(a);if(c){this.locationCache[a.id]=c}else {delete this.locationCache[a.id]}}}}},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(a){if(!this.isTypeOfDD(a)){return null}if(a.getRegion){return a.getRegion()}var c=a.getEl(),b,d,f,e,g,k,j,h,i;try{b=Ext.fly(c).getXY()}catch(l){}if(!b){return null}d=b[0];f=d+c.offsetWidth;e=b[1];g=e+c.offsetHeight;k=e-a.padding[0];j=f+a.padding[1];h=g+a.padding[2];i=d-a.padding[3];return new Ext.util.Region(k,j,h,i)},isOverTarget:function(g,a,i){var c=this.locationCache[a.id],b,d,f,h,e;if(!c||!this.useCache){c=this.getLocation(a);this.locationCache[a.id]=c}if(!c){return !1}a.cursorIsOver=c.contains(g);b=this.dragCurrent;if(!b||!b.getTargetCoord||!i&&!b.constrainX&&!b.constrainY){return a.cursorIsOver}a.overlap=null;d=b.getTargetCoord(g.x,g.y);f=b.getDragEl();h=new Ext.util.Region(d.y,d.x+f.offsetWidth,d.y+f.offsetHeight,d.x);e=h.intersect(c);if(e){a.overlap=e;return i?!0:a.cursorIsOver}else {return !1}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var a=this,b=a.elementCache,c;if(a.dragCurrent){a.stopDrag();a.dragCurrent=null}a.clearingAll=!0;a._execOnAll('unreg',[]);delete a.clearingAll;for(c in b){delete b[c]}a.elementCache={};a.ids={};a.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return a?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(a,b){if(a.swapNode){a.swapNode(b)}else {var c=b.parentNode,d=b.nextSibling;if(d===a){c.insertBefore(a,b)}else {if(b===a.nextSibling){c.insertBefore(b,a)}else {a.parentNode.replaceChild(b,a);c.insertBefore(a,d)}}}},getScroll:function(){var e=window.document,a=e.documentElement,b=e.body,d=0,c=0;if(a&&(a.scrollTop||a.scrollLeft)){d=a.scrollTop;c=a.scrollLeft}else {if(b){d=b.scrollTop;c=b.scrollLeft}}return {top:d,left:c}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(c,a){var b=Ext.fly(a).getXY();Ext.fly(c).setXY(b)},numericSort:function(a,b){return a-b},handleWasClicked:function(b,c){if(this.isHandle(c,b.id)){return !0}else {var a=b.parentNode;while(a){if(this.isHandle(c,a.id)){return !0}else {a=a.parentNode}}}return !1}},0,0,0,0,0,0,[Ext.dd,'DragDropManager',Ext.dd,'DragDropMgr',Ext.dd,'DDM'],function(a){Ext.onInternalReady(function(){a.addListeners()})});Ext.cmd.derive('Ext.resizer.Splitter',Ext.Component,{childEls:['collapseEl'],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="','x-','collapse-el ','x-','layout-split-{collapseDir}{childElCls}">','</div>','</tpl>'],isSplitter:!0,baseCls:'x-splitter',collapsedClsInternal:'x-splitter-collapsed',canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:'next',horizontal:!1,vertical:!1,size:5,tracker:null,ariaRole:'separator',focusable:!0,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:'Ext.resizer.SplitterTracker',el:this.el,splitter:this},this.tracker)},beforeRender:function(){var a=this,c=a.getCollapseTarget(),b=a.collapsible,d;Ext.Component.prototype.beforeRender.call(this);if(c.collapsed){a.addCls(a.collapsedClsInternal)}if(!a.canResize){a.addCls(a.baseCls+'-noresize')}Ext.applyIf(a.renderData,{collapseDir:a.getCollapseDirection(),collapsible:b!==null?b:c.collapsible});a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-orientation']=a.orientation;a.protoEl.unselectable()},onRender:function(){var a=this,b;Ext.Component.prototype.onRender.apply(this,arguments);if(a.performCollapse!==!1){if(a.renderData.collapsible){a.mon(a.collapseEl,'click',a.toggleTargetCmp,a)}if(a.collapseOnDblClick){a.mon(a.el,'dblclick',a.toggleTargetCmp,a)}}a.getCollapseTarget().on({collapse:a.onTargetCollapse,expand:a.onTargetExpand,beforeexpand:a.onBeforeTargetExpand,beforecollapse:a.onBeforeTargetCollapse,scope:a});if(a.canResize){a.tracker=Ext.create(a.getTrackerConfig());a.relayEvents(a.tracker,['beforedragstart','dragstart','dragend'])}b=a.collapseEl;if(b){b.lastCollapseDirCls=a.collapseDirProps[a.collapseDirection].cls}},getCollapseDirection:function(){var b=this,a=b.collapseDirection,c,f,d,e;if(!a){c=b.collapseTarget;if(c.isComponent){a=c.collapseDirection}if(!a){e=b.ownerCt.layout.type;if(c.isComponent){d=b.ownerCt.items;f=Number(d.indexOf(c)===d.indexOf(b)-1)<<1|Number(e==='hbox')}else {f=Number(b.collapseTarget==='prev')<<1|Number(e==='hbox')}a=['bottom','right','top','left'][f]}b.collapseDirection=a}b.setOrientation(a==='top'||a==='bottom'?'horizontal':'vertical');return a},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==='prev'?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl('none')},onBeforeTargetCollapse:function(){this.setCollapseEl('none')},onTargetCollapse:function(b){var a=this;if(b===a.getCollapseTarget()&&b[a.orientation==='vertical'?'collapsedHorizontal':'collapsedVertical']()){a.el.addCls(a.collapsedClsInternal+' '+(a.collapsedCls||''))}a.setCollapseEl('')},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+' '+(a.collapsedCls||''));a.setCollapseEl('')},collapseDirProps:{top:{cls:'x-layout-split-top'},right:{cls:'x-layout-split-right'},bottom:{cls:'x-layout-split-bottom'},left:{cls:'x-layout-split-left'}},orientationProps:{horizontal:{opposite:'vertical',fixedAxis:'height',stretchedAxis:'width'},vertical:{opposite:'horizontal',fixedAxis:'width',stretchedAxis:'height'}},applyCollapseDirection:function(){var c=this,a=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],b;if(a){b=a.lastCollapseDirCls;if(b){a.removeCls(b)}a.addCls(a.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var a=this,e=a.orientation,b=a.orientationProps[e],f=a.size,d=b.fixedAxis,c=b.stretchedAxis,g=a.baseCls+'-';a[e]=!0;a[b.opposite]=!1;if(!a.hasOwnProperty(d)||a[d]==='100%'){a[d]=f}if(!a.hasOwnProperty(c)||a[c]===f){a[c]='100%'}a.removeCls(g+b.opposite);a.addCls(g+e)},setOrientation:function(b){var a=this;if(a.orientation!==b){a.orientation=b;a.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,e){var a=this.getCollapseTarget(),c=a.placeholder,b;if(Ext.isFunction(a.expand)&&Ext.isFunction(a.collapse)){if(c&&!c.hidden){b=!0}else {b=!a.hidden}if(b){if(a.collapsed){a.expand()}else {if(a.collapseDirection){a.collapse()}else {a.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,['splitter'],['component','box','splitter'],{'component':!0,'box':!0,'splitter':!0},['widget.splitter'],0,[Ext.resizer,'Splitter'],0);Ext.define('Ext.theme.neptune.resizer.Splitter',{override:'Ext.resizer.Splitter',size:8});Ext.define('Ext.theme.triton.resizer.Splitter',{override:'Ext.resizer.Splitter',size:5});Ext.cmd.derive('Ext.layout.container.Box',Ext.layout.container.Container,{alternateClassName:'Ext.layout.BoxLayout',type:'box',config:{align:'begin',constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(a,b){if(typeof a==='string'){a={type:a}}return Ext.merge(b?Ext.Object.chain(b):{},a)}},padding:0,pack:'start',stretchMaxPartner:undefined,vertical:!1,alignRoundingMethod:'round'},itemCls:'x-box-item',targetCls:'x-box-layout-ct',targetElCls:'x-box-target',innerCls:'x-box-inner',manageMargins:!0,createsInnerCt:!0,childEls:['innerCt','targetEl'],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:!0,definitions:'var dh=Ext.DomHelper;'}],constructor:function(c){var a=this,b;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);a.setVertical(a.vertical);a.flexSortFn=a.flexSort.bind(a);b=typeof a.padding;if(b==='string'||b==='number'){a.padding=Ext.util.Format.parseBox(a.padding);a.padding.height=a.padding.top+a.padding.bottom;a.padding.width=a.padding.left+a.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(h,b){var a=this,f=a.sizePolicy,g=a.align,p=h.flex,c=g,o=a.names,e=o.height,m=o.width,q=h[m],n=h[e],d=a._percentageRe,i=d.test(q),l=g==='stretch',j=g==='stretchmax',k=a.constrainAlign;if(!b&&(l||p||i||k&&!j)){b=a.owner.getSizeModel()}if(l){if(!d.test(n)&&b[e].shrinkWrap){c='stretchmax'}}else {if(!j){if(d.test(n)){c='stretch'}else {if(k&&!b[e].shrinkWrap){c='stretchmax'}else {c=''}}}}if(p||i){if(!b[m].shrinkWrap){f=f.flex}}return f[c]},flexSort:function(o,p){var k=this.names.maxWidth,l=this.names.minWidth,j=Infinity,c=o.target,d=p.target,m=c.flex,n=d.flex,a=0,g,i,f,h,e,b;f=c[k]||j;h=d[k]||j;g=c[l]||0;i=d[l]||0;e=isFinite(g)||isFinite(i);b=isFinite(f)||isFinite(h);if(e||b){if(b){a=f-h}if(a===0&&e){a=i-g}if(a===0){if(b){a=n-m}else {a=m-n}}}return a},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(a){var b=this;if(b.direction==='vertical'&&a.collapsedVertical()){a.collapseMemento.capture(['flex']);delete a.flex}else {if(b.direction==='horizontal'&&a.collapsedHorizontal()){a.collapseMemento.capture(['flex']);delete a.flex}}},beginExpand:function(a){a.collapseMemento.restore(['flex'])},beginLayout:function(a){var c=this,f=c.owner,b=f.stretchMaxPartner,h=c.innerCt.dom.style,i=c.names,g=c.overflowHandler,e=f.getScrollable(),d;a.boxNames=i;if(g){g.beginLayout(a)}if(typeof b==='string'){b=Ext.getCmp(b)||f.query(b)[0]}a.stretchMaxPartner=b&&a.context.getCmp(b);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);a.innerCtContext=a.getEl('innerCt',c);a.targetElContext=a.getEl('targetEl',c);if(e){a.ownerScrollable=e;d=e.getPosition();if(d.x||d.y){a.scrollRestore=d}}h.width=h.height=''},beginLayoutCycle:function(a,l){var c=this,i=a.state,g=a.ownerScrollable,b=c.align,e=a.boxNames,d=c.pack,k=c._centerRe,j=c.overflowHandler,m=a.state.canScroll,h,f;if(j){j.beginLayoutCycle(a,l)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);a.parallelSizeModel=h=a[e.widthModel];a.perpendicularSizeModel=f=a[e.heightModel];a.boxOptions={align:b={stretch:b==='stretch',stretchmax:b==='stretchmax',center:k.test(b),bottom:c._endRe.test(b)},pack:d={center:k.test(d),end:d==='end'}};if(g){if(!m){i.canScroll={parallel:!h.shrinkWrap&&g[e.getX](),perpendicular:!f.shrinkWrap&&g[e.getY]()}}if(!i.actualScroll){i.actualScroll={parallel:!1,perpendicular:!1}}}if(b.stretch&&f.shrinkWrap){b.stretchmax=!0;b.stretch=!1}b.nostretch=!(b.stretch||b.stretchmax);if(h.shrinkWrap){d.center=d.end=!1}c.cacheFlexes(a);c.targetEl.setWidth(20000)},cacheFlexes:function(a){var u=this,d=a.boxNames,x=d.widthModel,w=d.heightModel,z=a.boxOptions.align.nostretch,s=0,r=a.childItems,v=r.length,h=[],t=0,g=0,o=0,p=d.minWidth,y=d.minHeight,q=u._percentageRe,n=0,m=0,b,c,l,f,i,j,k,e;while(v--){c=r[v];b=c.target;j=c[x];if(j.calculated){c.flex=l=b.flex;if(l){s+=l;h.push(c);t+=b[p]||0}else {f=q.exec(b[d.width]);c.percentageParallel=parseFloat(f[1])/100;++n}}if(j.configured){k=b[d.width]}else {k=b[p]||0}o+=k;i=c[w];if(z&&i.calculated){f=q.exec(b[d.height]);c.percentagePerpendicular=parseFloat(f[1])/100;++m}if(i.configured){e=b[d.height]}else {e=b[y]||0}if(e>g){g=e}}a.flexedItems=h;a.flexedMinWidth=t;a.smallestWidth=o;a.smallestHeight=g;a.totalFlex=s;a.percentageWidths=n;a.percentageHeights=m;Ext.Array.sort(h,u.flexSortFn)},calculate:function(b){var c=this,f=b.boxNames,a=b.state,h=a.actualScroll,g=a.needsScroll,e=a.canScroll,d=a.boxPlan||(a.boxPlan={}),i=c.overflowHandler;d.targetSize=c.getContainerSize(b);if(e&&!g){a.needsScroll=g={parallel:e.parallel&&d.targetSize[f.width]<b.smallestWidth,perpendicular:e.perpendicular&&d.targetSize[f.height]<b.smallestHeight}}if(!a.parallelDone){a.parallelDone=c.calculateParallel(b,f,d)}if(!a.perpendicularDone){a.perpendicularDone=c.calculatePerpendicular(b,f,d)}if(a.parallelDone&&a.perpendicularDone){if(e&&!a.scrollPass){if(g.parallel!==h.parallel||g.perpendicular!==h.perpendicular){b.invalidate({state:{scrollPass:!0,canScroll:e,needsScroll:h}});c.done=!1;return}}c.publishInnerCtSize(b);if(c.done&&b.boxOptions.align.stretchmax&&!a.stretchMaxDone){c.calculateStretchMax(b,f,d);a.stretchMaxDone=!0}if(i){i.calculate(b)}}else {c.done=!1}},calculateParallel:function(c,d,p){var D=this,s=c.parallelSizeModel.shrinkWrap,m=d.width,o=c.childItems,G=d.beforeX,y=d.afterX,K=d.setWidth,q=o.length,x=c.flexedItems,H=x.length,C=c.boxOptions.pack,B=D.padding,z=p.targetSize,E=z[m],v=c.state,n=v.needsScroll,A=v.canScroll,u=0,e=B[G],h=e+B[y],F=Ext.getScrollbarSize(),J=F[d.width],I=F[d.height],b,k,f,t,a,w,l,g,i,r,j;if(!s&&!z[d.gotWidth]){return !1}for(b=0;b<q;++b){a=o[b];k=a.marginInfo||a.getMarginInfo();u+=k[m];if(!a[d.widthModel].calculated){i=a.getProp(m);h+=i;if(isNaN(h)){return !1}}}h+=u;if(c.percentageWidths){r=E-u;if(isNaN(r)){return !1}for(b=0;b<q;++b){a=o[b];if(a.percentageParallel){i=Math.ceil(r*a.percentageParallel);i=a.setWidth(i);h+=i}}}if(s){j=0;p.tooNarrow=!1}else {j=E-h;if(n&&n.perpendicular){j-=I}p.tooNarrow=j<c.flexedMinWidth;if(p.tooNarrow&&A&&A.parallel){v.actualScroll.parallel=!0}}g=h;f=j;t=c.totalFlex;for(b=0;b<H;b++){a=x[b];w=a.flex;l=D.roundFlex(w/t*f);l=a[K](l);g+=l;f=Math.max(0,f-l);t-=w}if(C.center){e+=f/2;if(e<0){e=0}}else {if(C.end){e+=f}}for(b=0;b<q;++b){a=o[b];k=a.marginInfo;e+=k[G];a.setProp(d.x,e);e+=k[y]+a.props[m]}g+=c.targetContext.getPaddingInfo()[m];c.state.contentWidth=g;if(n&&n.perpendicular){if(s){g+=J}c[d.hasOverflowY]=!0;c.target.componentLayout[d.setWidthInDom]=!0;c[d.invalidateScrollY]=Ext.isIE8}c[d.setContentWidth](g);return !0},calculatePerpendicular:function(c,d,t){var l=this,C=c.state,G=C.needsScroll,H=C.canScroll,h=c.perpendicularSizeModel.shrinkWrap,y=t.targetSize,x=c.childItems,E=x.length,o=Math.max,e=d.height,N=d.setHeight,F=d.beforeY,M=d.y,J=l.padding,u=J[F],j=y[e]-u-J[d.afterY],r=c.boxOptions.align,z=r.stretch,O=r.stretchmax,B=r.center,A=r.bottom,I=l.constrainAlign,b=0,D=0,K=l.onBeforeConstrainInvalidateChild,L=l.onAfterConstrainInvalidateChild,q=Ext.getScrollbarSize().height,n,k,g,i,s,f,a,p,w,v,m;if(!h&&!y[d.gotHeight]){return !1}if(z||(B||A)&&!h){if(isNaN(j)){return !1}}if(G&&G.parallel){if(h){v=!0}else {j-=q;t.targetSize[e]-=q}}if(z){f=j;b=o(f,c.smallestHeight)}else {for(k=0;k<E;k++){a=x[k];i=(a.marginInfo||a.getMarginInfo())[e];if(!(m=a.percentagePerpendicular)){g=a.getProp(e)}else {++D;if(h){continue}else {g=m*j-i;g=a[d.setHeight](g)}}if(!h&&I&&a[d.heightModel].shrinkWrap&&g>j){a.invalidate({before:K,after:L,layout:l,childHeight:j,names:d});c.state.parallelDone=!1}if(isNaN(b=o(b,g+i,a.target[d.minHeight]||0))){return !1}}}if(v){b+=q;c[d.hasOverflowX]=!0;c.target.componentLayout[d.setHeightInDom]=!0;c[d.invalidateScrollX]=Ext.isIE8}p=c.stretchMaxPartner;if(p){c.setProp('maxChildHeight',b);w=p.childItems;if(w&&w.length){b=o(b,p.getProp('maxChildHeight'));if(isNaN(b)){return !1}}}c[d.setContentHeight](b+l.padding[e]+c.targetContext.getPaddingInfo()[e]);if(v){b-=q}if(b>y[e]&&H&&H.perpendicular){C.actualScroll.perpendicular=!0}t.maxSize=b;if(O){f=b}else {if(B||A||D){if(I){f=h?b:j}else {f=h?b:o(j,b)}f-=c.innerCtContext.getBorderInfo()[e]}}for(k=0;k<E;k++){a=x[k];i=a.marginInfo||a.getMarginInfo();n=u+i[F];if(z){a[N](f-i[e])}else {m=a.percentagePerpendicular;if(h&&m){i=a.marginInfo||a.getMarginInfo();g=m*f-i[e];g=a.setHeight(g)}if(B){s=f-a.props[e];if(s>0){n=u+Math[l.alignRoundingMethod](s/2)}}else {if(A){n=o(0,f-n-a.props[e])}}}a.setProp(M,n)}return !0},onBeforeConstrainInvalidateChild:function(b,c){var a=c.names.heightModel;if(!b[a].constrainedMin){b[a]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(a,c){var b=c.names;a.setProp(b.beforeY,0);if(a[b.heightModel].calculated){a[b.setHeight](c.childHeight)}},calculateStretchMax:function(k,c,o){var f=this,h=c.height,l=c.width,g=k.childItems,n=g.length,m=o.maxSize,i=f.onBeforeStretchMaxInvalidateChild,j=f.onAfterStretchMaxInvalidateChild,a,b,d,e;for(d=0;d<n;++d){a=g[d];b=a.props;e=m-a.getMarginInfo()[h];if(e!==b[h]||a[c.heightModel].constrained){a.invalidate({before:i,after:j,layout:f,childWidth:b[l],childHeight:e,childX:b.x,childY:b.y,names:c})}}},onBeforeStretchMaxInvalidateChild:function(b,c){var a=c.names.heightModel;if(!b[a].constrainedMax){b[a]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(a,b){var c=b.names,d=b.childHeight,e=b.childWidth;a.setProp('x',b.childX);a.setProp('y',b.childY);if(a[c.heightModel].calculated){a[c.setHeight](d)}if(a[c.widthModel].calculated){a[c.setWidth](e)}},completeLayout:function(d){var k=this,b=d.invalidateScrollX,c=d.invalidateScrollY,j=k.overflowHandler,h=d.scrollRestore,i,g,e,f,a;if(j){j.completeLayout(d)}if(b||c){g=k.getTarget();i=g.dom;a=i.style;if(b){e=g.getStyle('overflowX');if(e==='auto'){e=a.overflowX;a.overflowX='scroll'}else {b=!1}}if(c){f=g.getStyle('overflowY');if(f==='auto'){f=a.overflowY;a.overflowY='scroll'}else {c=!1}}if(b||c){i.scrollWidth;if(b){a.overflowX=e}if(c){a.overflowY=f}}}if(h){d.ownerScrollable.scrollTo(h.x,h.y)}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var h=Ext.layout.container.Container.prototype.getLayoutItems.call(this),i=h.length,e,c,g,f,b,d,a;for(g=0;g<i;++g){if((f=h[g]).isSplitter){continue}a=f.splitter;if(f.hidden){if(a){if(!a.hidden){a.hidden=!0;if(a.el){a.el.hide()}}}continue}if(a){d=a.collapseTarget==='next'}else {d=!1}c=null;if(e&&b){if(b.hidden){b.hidden=!1;if(b.el){b.el.show()}}if(d){c=!0}}else {if(d){c=!e}}if(c!==null&&a.hidden!==c){a.hidden=c;if(a.el){a.el.setVisible(!c)}}b=!d&&a;e=f}if(e&&b&&!b.hidden){b.hidden=!0;if(b.el){b.el.hide()}}return h},getScrollerEl:function(){return this.innerCt},insertSplitter:function(c,e,d,a){var b={xtype:'splitter',id:c.id+'-splitter',hidden:d,splitterFor:c,synthetic:!0},f=e+(a.collapseTarget==='prev'?1:0);b[this.names.height]='100%';if(a){Ext.apply(b,a)}c.splitter=this.owner.add(f,b)},publishInnerCtSize:function(a,f){f=f||0;var h=this,g=a.state,d=a.boxNames,m=d.height,j=d.width,k=a.boxOptions.align,o=h.padding,e=g.boxPlan,n=e.targetSize,p=e.maxSize,l=g.needsScroll,i=a.innerCtContext,c,b;if(a.parallelSizeModel.shrinkWrap||e.tooNarrow&&g.canScroll){c=g.contentWidth-a.targetContext.getPaddingInfo()[j]}else {c=n[j];if(l&&l.perpendicular){c-=Ext.getScrollbarSize()[j]}}c-=f;h.owner.tooNarrow=e.tooNarrow;if(k.stretch){b=p}else {b=e.maxSize+o[d.beforeY]+o[d.afterY]+i.getBorderInfo()[m];if(!a.perpendicularSizeModel.shrinkWrap&&(k.center||k.bottom)){b=Math.max(n[m],b)}}i[d.setWidth](c);i[d.setHeight](b);a.targetElContext.setWidth(a.innerCtContext.props.width-(h.vertical?0:f||0));if(isNaN(c+b)){h.done=!1}},onAdd:function(b,d){var c=this,a=c.enableSplitters&&b.split&&!b.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(a){if(a===!0){a={collapseTarget:'next'}}else {if(Ext.isString(a)){a={collapseTarget:a==='before'?'next':'prev'}}else {a=Ext.apply({collapseTarget:a.side==='before'?'next':'prev'},a)}}c.insertSplitter(b,d,!!b.hidden,a)}},onRemove:function(a,h){var c=this,g=c.names,e=c.owner,d=a.splitter,f=c.overflowHandler,b;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(d&&e.contains(d)){e.doRemove(d,!0);a.splitter=null}if(f){f.onRemove(a)}if(a.layoutMarginCap===c.id){delete a.layoutMarginCap}if(!e.destroying&&!h&&a.rendered){b=a.getEl();if(b){b.setStyle(g.beforeY,'');b.setStyle(g.beforeX,'');b.setStyle('margin','')}}},applyOverflowHandler:function(a,b){var c;if(typeof a==='string'){a={type:a}}c=a.type;if(b&&b.type===a.type){delete a.type;b.setConfig(a);return b}a.layout=this;return Ext.Factory.boxOverflow(a)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(c){var a=this,b=a.overflowHandler,d=a.owner,e=a._props;Ext.apply(a,c?e.vbox:e.hbox);if(b&&d&&d.rendered){b.setVertical(c)}},_props:{'hbox':{direction:'horizontal',oppositeDirection:'vertical',horizontal:!0,vertical:!1,names:{beforeX:'left',beforeScrollX:'left',leftCap:'Left',afterX:'right',width:'width',contentWidth:'contentWidth',minWidth:'minWidth',maxWidth:'maxWidth',widthCap:'Width',widthModel:'widthModel',widthIndex:0,x:'x',getX:'getX',setX:'setX',scrollLeft:'scrollLeft',overflowX:'overflowX',hasOverflowX:'hasOverflowX',invalidateScrollX:'invalidateScrollX',parallelMargins:'lr',center:'middle',beforeY:'top',afterY:'bottom',height:'height',contentHeight:'contentHeight',minHeight:'minHeight',maxHeight:'maxHeight',heightCap:'Height',heightModel:'heightModel',heightIndex:1,y:'y',getY:'getY',setY:'setY',overflowY:'overflowY',hasOverflowY:'hasOverflowY',invalidateScrollY:'invalidateScrollY',perpendicularMargins:'tb',getWidth:'getWidth',getHeight:'getHeight',setWidth:'setWidth',setHeight:'setHeight',gotWidth:'gotWidth',gotHeight:'gotHeight',setContentWidth:'setContentWidth',setContentHeight:'setContentHeight',setWidthInDom:'setWidthInDom',setHeightInDom:'setHeightInDom',getScrollLeft:'getScrollLeft',setScrollLeft:'setScrollLeft',scrollTo:'scrollTo'},sizePolicy:{flex:{'':{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},'':{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},'vbox':{direction:'vertical',oppositeDirection:'horizontal',horizontal:!1,vertical:!0,names:{beforeX:'top',beforeScrollX:'top',leftCap:'Top',afterX:'bottom',width:'height',contentWidth:'contentHeight',minWidth:'minHeight',maxWidth:'maxHeight',widthCap:'Height',widthModel:'heightModel',widthIndex:1,x:'y',getX:'getY',setX:'setY',scrollLeft:'scrollTop',overflowX:'overflowY',hasOverflowX:'hasOverflowY',invalidateScrollX:'invalidateScrollY',parallelMargins:'tb',center:'center',beforeY:'left',afterY:'right',height:'width',contentHeight:'contentWidth',minHeight:'minWidth',maxHeight:'maxWidth',heightCap:'Width',heightModel:'widthModel',heightIndex:0,y:'x',getY:'getX',setY:'setX',overflowY:'overflowX',hasOverflowY:'hasOverflowX',invalidateScrollY:'invalidateScrollX',perpendicularMargins:'lr',getWidth:'getHeight',getHeight:'getWidth',setWidth:'setHeight',setHeight:'setWidth',gotWidth:'gotHeight',gotHeight:'gotWidth',setContentWidth:'setContentHeight',setContentHeight:'setContentWidth',setWidthInDom:'setHeightInDom',setHeightInDom:'setWidthInDom',getScrollLeft:'getScrollTop',setScrollLeft:'setScrollTop',scrollTo:'scrollTo'},sizePolicy:{flex:{'':{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},'':{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,['layout.box'],0,[Ext.layout.container,'Box',Ext.layout,'BoxLayout'],0);Ext.define('Ext.rtl.layout.container.Box',{override:'Ext.layout.container.Box',initLayout:function(){var a=this;if(a.owner.getInherited().rtl){a.names=Ext.Object.chain(a.names);Ext.apply(a.names,a.rtlNames)}(arguments.callee.$previous||Ext.layout.container.Container.prototype.initLayout).apply(this,arguments)},getRenderData:function(){var a=(arguments.callee.$previous||Ext.layout.container.Container.prototype.getRenderData).call(this);if(this.owner.getInherited().rtl){a.targetElCls=(a.targetElCls||'')+' x-rtl'}return a}});Ext.cmd.derive('Ext.layout.container.HBox',Ext.layout.container.Box,{alternateClassName:'Ext.layout.HBoxLayout',type:'hbox',vertical:!1},0,0,0,0,['layout.hbox'],0,[Ext.layout.container,'HBox',Ext.layout,'HBoxLayout'],0);Ext.define('Ext.rtl.layout.container.HBox',{override:'Ext.layout.container.HBox',rtlNames:{beforeX:'right',afterX:'left',getScrollLeft:'rtlGetScrollLeft',setScrollLeft:'rtlSetScrollLeft',scrollTo:'rtlScrollTo',beforeScrollerSuffix:'-after-scroller',afterScrollerSuffix:'-before-scroller'}});Ext.cmd.derive('Ext.layout.container.VBox',Ext.layout.container.Box,{alternateClassName:'Ext.layout.VBoxLayout',type:'vbox',vertical:!0},0,0,0,0,['layout.vbox'],0,[Ext.layout.container,'VBox',Ext.layout,'VBoxLayout'],0);Ext.define('Ext.rtl.layout.container.VBox',{override:'Ext.layout.container.VBox',rtlNames:{beforeY:'right',afterY:'left',scrollTo:'rtlScrollTo'}});Ext.cmd.derive('Ext.util.FocusableContainer',Ext.Mixin,{mixinConfig:{id:'focusablecontainer',before:{onAdd:'onFocusableChildAdd',onRemove:'onFocusableChildRemove',destroy:'destroyFocusableContainer',onFocusEnter:'onFocusEnter'},after:{afterRender:'initFocusableContainer',onFocusLeave:'onFocusLeave',afterShow:'activateFocusableContainerEl'}},isFocusableContainer:!0,enableFocusableContainer:!0,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(a){var c,b,d;if(this.enableFocusableContainer){a=a!=null?a:!0;this.doInitFocusableContainer(a)}else {c=this.getFocusables();for(b=0,d=c.length;b<d;b++){c[b].focusableContainer=null}}},doInitFocusableContainer:function(d){var a=this,b,c;b=a.getFocusableContainerEl();if(d){a.clearFocusables()}c=a.findNextFocusableChild({step:1,beforeRender:!0});if(c){a.activateFocusableContainerEl(b)}a.focusableContainerMouseListener=a.mon(b,'mousedown',a.onFocusableContainerMousedown,a);a.focusableKeyNav=a.createFocusableContainerKeyNav(b)},createFocusableContainerKeyNav:function(b){var a=this;return new Ext.util.KeyNav(b,{eventName:'keydown',ignoreInputFields:!0,scope:a,tab:a.onFocusableContainerTabKey,enter:a.onFocusableContainerEnterKey,space:a.onFocusableContainerSpaceKey,up:a.onFocusableContainerUpKey,down:a.onFocusableContainerDownKey,left:a.onFocusableContainerLeftKey,right:a.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){var a=this;if(a.keyNav){a.keyNav.destroy()}if(a.focusableContainerMouseListener){a.focusableContainerMouseListener.destroy()}a.focusableKeyNav=a.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(h){var c=this,i=c.activeChildTabIndex,g=!1,b,a,d,f,e;b=c.getFocusables();f=b.length;if(!f){return}for(d=0;d<f;d++){a=b[d];if(a.focusable&&!a.disabled){g=!0;e=a.getTabIndex();if(e!=null&&e>=i){return a}}}if(!g){return}a=c.findNextFocusableChild({beforeRender:h,items:b,step:!0});if(a){c.activateFocusable(a)}return a},clearFocusables:function(){var d=this,c=d.getFocusables(),e=c.length,a,b;for(b=0;b<e;b++){a=c[b];if(a.focusable&&!a.disabled){d.deactivateFocusable(a)}}},activateFocusable:function(c,a){var b=a!=null?a:this.activeChildTabIndex;c.setTabIndex(b)},deactivateFocusable:function(c,a){var b=a!=null?a:this.inactiveChildTabIndex;c.setTabIndex(b)},onFocusableContainerTabKey:function(){return !0},onFocusableContainerEnterKey:function(){return !0},onFocusableContainerSpaceKey:function(){return !0},onFocusableContainerUpKey:function(a){a.preventDefault();return this.moveChildFocus(a,!1)},onFocusableContainerDownKey:function(a){a.preventDefault();return this.moveChildFocus(a,!0)},onFocusableContainerLeftKey:function(a){a.preventDefault();return this.moveChildFocus(a,!1)},onFocusableContainerRightKey:function(a){a.preventDefault();return this.moveChildFocus(a,!0)},getFocusableFromEvent:function(b){var a=Ext.Component.fromElement(b.getTarget());return a},moveChildFocus:function(a,b){var c=this.getFocusableFromEvent(a);return this.focusChild(c,b,a)},focusChild:function(c,b){var a=this.findNextFocusableChild({child:c,step:b});if(a){a.focus()}return a},findNextFocusableChild:function(f){var i=f.beforeRender,g,c,h,b,d,a,e;g=f.items||this.getFocusables();b=f.step!=null?f.step:1;h=f.child;d=Ext.Array.indexOf(g,h);b=b===!0?1:b===!1?-1:b;e=g.length;a=b>0?d<e?d+b:0:d>0?d+b:e-1;for(;;a+=b){if(d<0&&(a>=e||a<0)){return null}else {if(a>=e){a=-1;continue}else {if(a<0){a=e;continue}else {if(a===d){return null}}}}c=g[a];if(!c||!c.focusable||c.disabled){continue}if(i||c.isFocusable&&c.isFocusable()){return c}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){if(this.enableFocusableContainer){return this.doFocusableChildAdd(a)}},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:this.activeChildTabIndex})}},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:undefined})}},isFocusableContainerActive:function(){var e=this,d=!1,c,b,a;c=e.getFocusableContainerEl();if(c&&c.isTabbable&&c.isTabbable()){d=!0}else {b=e.lastFocusedChild;a=b&&b.getFocusEl&&b.getFocusEl();if(a&&a.isTabbable&&a.isTabbable()){d=!0}}return d},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this}},onFocusableChildRemove:function(a){if(this.enableFocusableContainer){return this.doFocusableChildRemove(a)}a.focusableContainer=null},doFocusableChildRemove:function(a){if(a===this.lastFocusedChild){this.lastFocusedChild=null;this.activateFocusableContainerEl()}},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);this.mousedownTimestamp=a===this?Ext.Date.now():0;if(a===this){c.preventDefault()}},onFocusEnter:function(f){var a=this,d=f.toComponent,c=a.mousedownTimestamp,e=50,b;if(!a.enableFocusableContainer){return null}a.mousedownTimestamp=0;if(d===a){if(!c||Ext.Date.now()-c>e){b=a.initDefaultFocusable();if(b){a.deactivateFocusableContainerEl();b.focus()}}}else {a.deactivateFocusableContainerEl()}return d},onFocusLeave:function(c){var a=this,b=a.lastFocusedChild;if(!a.enableFocusableContainer){return}if(!a.destroyed&&!a.destroying){a.clearFocusables();if(b&&!b.disabled){a.activateFocusable(b)}else {a.activateFocusableContainerEl()}}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;if(!a.enableFocusableContainer){return}a.clearFocusables();a.activateFocusable(b);if(b.needArrowKeys){a.guardFocusableChild(b)}},guardFocusableChild:function(c){var b=this,d=b.activeChildTabIndex,a;a=b.findNextFocusableChild({child:c,step:-1});if(a){a.setTabIndex(d)}a=b.findNextFocusableChild({child:c,step:1});if(a){a.setTabIndex(d)}},afterFocusableChildFocus:function(a){if(!this.enableFocusableContainer){return}this.lastFocusedChild=a},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this;if(!a.enableFocusableContainer){return}if(b!==a.lastFocusedChild){a.deactivateFocusable(b);if(!a.isFocusableContainerActive()){a.activateFocusableContainerEl()}}},beforeFocusableChildDisable:function(c){var a=this,b;if(!a.enableFocusableContainer||a.destroying||a.destroyed){return}if(c.hasFocus){b=a.findNextFocusableChild({child:c})||c.findFocusTarget();if(b){b.focus()}}},onFocusableChildDisable:function(d){var a=this,c=a.lastFocusedChild,b;if(!a.enableFocusableContainer||a.destroying||a.destroyed){return}if(d===c){a.activateFocusableContainerEl()}b=a.findNextFocusableChild({step:1});if(!b){a.deactivateFocusableContainerEl()}},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,'FocusableContainer'],0);Ext.define('Ext.rtl.util.FocusableContainer',{override:'Ext.util.FocusableContainer',privates:{moveChildFocus:function(c,a){var b=this.getInherited().rtl?!a:a;return arguments.callee.$previous.call(this,c,b)}}});Ext.cmd.derive('Ext.toolbar.Toolbar',Ext.container.Container,{alternateClassName:'Ext.Toolbar',isToolbar:!0,baseCls:'x-toolbar',ariaRole:'toolbar',defaultType:'button',layout:undefined,vertical:undefined,enableOverflow:!1,overflowHandler:null,defaultButtonUI:'default-toolbar',defaultFieldUI:'default',defaultFooterButtonUI:'default',defaultFooterFieldUI:'default',trackMenus:!0,itemCls:'x-toolbar-item',statics:{shortcuts:{'-':'tbseparator',' ':'tbspacer'},shortcutsHV:{0:{'->':{xtype:'tbfill',height:0}},1:{'->':{xtype:'tbfill',width:0}}}},initComponent:function(){var a=this,b=a.layout,c=a.vertical;if(c===undefined){a.vertical=c=a.dock==='right'||a.dock==='left'}a.layout=b=Ext.applyIf(Ext.isString(b)?{type:b}:b||{},{type:c?'vbox':'hbox',align:c?'stretchmax':'middle'});if(a.overflowHandler){b.overflowHandler=a.overflowHandler}else {if(a.enableOverflow){b.overflowHandler='menu'}}if(c){a.addClsWithUI('vertical')}if(a.ui==='footer'){a.ignoreBorderManagement=!0}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(d){var c=this,b=Ext.container.Container.prototype.getRefItems.apply(this,arguments),e=c.layout,a;if(d&&(c.enableOverflow||c.overflowHandler==='menu')){a=e.overflowHandler;if(a&&a.menu){b=b.concat(a.menu.getRefItems(d))}}return b},lookupComponent:function(a){var d=arguments,b,c;if(typeof a==='string'){c=Ext.toolbar.Toolbar;b=c.shortcutsHV[this.vertical?1:0][a]||c.shortcuts[a];if(typeof b==='string'){a={xtype:b}}else {if(b){a=Ext.apply({},b)}else {a={xtype:'tbtext',text:a}}}this.applyDefaults(a);d=[a]}return Ext.container.Container.prototype.lookupComponent.apply(this,d)},onBeforeAdd:function(a){var b=this,d=b.ui==='footer',c=d?b.defaultFooterButtonUI:b.defaultButtonUI;if(a.isSegmentedButton){if(a.getDefaultUI()==='default'&&!a.config.hasOwnProperty('defaultUI')){a.setDefaultUI(c)}}else {if(a.ui==='default'&&!a.hasOwnProperty('ui')){if(a.isButton){a.ui=c}else {if(a.isFormField){a.ui=d?b.defaultFooterFieldUI:b.defaultFieldUI}}}}if(a instanceof Ext.toolbar.Separator){a.setUI(b.vertical?'vertical':'horizontal')}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){if(a.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=!1}Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,!0)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(b,c){var a=this;if(a.trackMenus&&b.menu){b[c?'un':'on']({mouseover:a.onButtonOver,menushow:a.onButtonMenuShow,menuhide:a.onButtonMenuHide,scope:a})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(a,c){var b=this.activeMenuBtn;if(b&&b!==a){b.hideMenu();a.focus();a.showMenu(c);this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}},0,['toolbar'],['component','box','container','toolbar'],{'component':!0,'box':!0,'container':!0,'toolbar':!0},['widget.toolbar'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,'Toolbar',Ext,'Toolbar'],0);Ext.define('Ext.theme.neptune.toolbar.Toolbar',{override:'Ext.toolbar.Toolbar',usePlainButtons:!1,border:!1});Ext.cmd.derive('Ext.toolbar.Item',Ext.Component,{alternateClassName:'Ext.Toolbar.Item',enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,['tbitem'],['component','box','tbitem'],{'component':!0,'box':!0,'tbitem':!0},['widget.tbitem'],0,[Ext.toolbar,'Item',Ext.Toolbar,'Item'],0);Ext.cmd.derive('Ext.toolbar.TextItem',Ext.toolbar.Item,{alternateClassName:'Ext.Toolbar.TextItem',text:'',baseCls:'x-toolbar-text',ariaRole:null,beforeRender:function(){var a=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(a){this.html=a}},setText:function(a){this.update(a)}},0,['tbtext'],['component','box','tbitem','tbtext'],{'component':!0,'box':!0,'tbitem':!0,'tbtext':!0},['widget.tbtext'],0,[Ext.toolbar,'TextItem',Ext.Toolbar,'TextItem'],0);Ext.cmd.derive('Ext.form.trigger.Spinner',Ext.form.trigger.Trigger,{cls:'x-form-trigger-spinner',spinnerCls:'x-form-spinner',spinnerUpCls:'x-form-spinner-up',spinnerDownCls:'x-form-spinner-down',focusCls:'x-form-spinner-focus',overCls:'x-form-spinner-over',clickCls:'x-form-spinner-click',focusFieldOnClick:!0,vertical:!0,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var a=this;if(a.spinnerEl){a.spinnerEl.destroy();a.spinnerEl=a.upEl=a.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var a=this;return {vertical:a.vertical,upDisabledCls:a.upEnabled?'':a.spinnerUpCls+'-disabled',downDisabledCls:a.downEnabled?'':a.spinnerDownCls+'-disabled',spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var a=this,d=arguments,c=a.clickRepeater?d[1]:d[0],b=a.field;if(!b.readOnly&&!b.disabled){if(a.upEl.contains(c.target)){Ext.callback(a.upHandler,a.scope,[b,a,c],0,b)}else {if(a.downEl.contains(c.target)){Ext.callback(a.downHandler,a.scope,[b,a,c],0,b)}}}b.inputEl.focus()},onFieldRender:function(){var a=this,d=a.vertical,c,b;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);c=a.spinnerEl=a.el.select('.'+a.spinnerCls,!0);b=c.elements;a.upEl=d?b[0]:b[1];a.downEl=d?b[1]:b[0]},setUpEnabled:function(a){this.upEl[a?'removeCls':'addCls'](this.spinnerUpCls+'-disabled')},setDownEnabled:function(a){this.downEl[a?'removeCls':'addCls'](this.spinnerDownCls+'-disabled')}},0,0,0,0,['trigger.spinner'],0,[Ext.form.trigger,'Spinner'],0);Ext.cmd.derive('Ext.form.field.Spinner',Ext.form.field.Text,{alternateClassName:'Ext.form.Spinner',config:{triggers:{spinner:{type:'spinner',upHandler:'onSpinnerUpClick',downHandler:'onSpinnerDownClick',scope:'this'}}},spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:'spinbutton',applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},onRender:function(){var a=this,b=a.getTrigger('spinner');(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(a.keyNavEnabled){a.spinnerKeyNav=new Ext.util.KeyNav(a.inputEl,{scope:a,up:a.spinUp,down:a.spinDown})}if(a.mouseWheelEnabled){a.mon(a.bodyEl,'mousewheel',a.onMouseWheel,a)}a.spinUpEl=b.upEl;a.spinDownEl=b.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent('spin',a,'up');a.fireEvent('spinup',a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent('spin',a,'down');a.fireEvent('spindown',a);a.onSpinDown()}},setSpinUpEnabled:function(b){var a=this,c=a.spinUpEnabled;a.spinUpEnabled=b;if(c!==b&&a.rendered){a.getTrigger('spinner').setUpEnabled(b)}},setSpinDownEnabled:function(b){var a=this,c=a.spinDownEnabled;a.spinDownEnabled=b;if(c!==b&&a.rendered){a.getTrigger('spinner').setDownEnabled(b)}},onMouseWheel:function(c){var b=this,a;if(b.hasFocus){a=c.getWheelDelta();if(a>0){b.spinUp()}else {if(a<0){b.spinDown()}}c.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,'spinnerKeyNav');Ext.form.field.Text.prototype.onDestroy.call(this)}},0,['spinnerfield'],['component','box','field','textfield','spinnerfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0},['widget.spinnerfield'],0,[Ext.form.field,'Spinner',Ext.form,'Spinner'],0);Ext.cmd.derive('Ext.form.field.Number',Ext.form.field.Spinner,{alternateClassName:['Ext.form.NumberField','Ext.form.Number'],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:'The minimum value for this field is {0}',maxText:'The maximum value for this field is {0}',nanText:'{0} is not a valid number',negativeText:'The value cannot be negative',baseChars:'0123456789',autoStripChars:!1,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getSubTplData:function(g){var f=this,e=f.minValue,d=f.maxValue,c,a,b;c=Ext.form.field.Spinner.prototype.getSubTplData.call(this,g);a=c.inputElAriaAttributes;if(a){if(e>Number.NEGATIVE_INFINITY){a['aria-valuemin']=e}if(d<Number.MAX_VALUE){a['aria-valuemax']=d}b=f.getValue();if(b!=null&&b>=e&&b<=d){a['aria-valuenow']=b}}return c},setValue:function(d){var a=this,c,b;if(a.hasFocus){c=a.getBind();b=c&&c.value;if(b&&b.syncing&&d===a.value){return a}}return Ext.form.field.Spinner.prototype.setValue.call(this,d)},getErrors:function(b){b=arguments.length>0?b:this.processRawValue(this.getRawValue());var a=this,c=Ext.form.field.Spinner.prototype.getErrors.call(this,b),e=Ext.String.format,d;if(b.length<1){return c}b=String(b).replace(a.decimalSeparator,'.');if(isNaN(b)){c.push(e(a.nanText,b))}d=a.parseValue(b);if(a.minValue===0&&d<0){c.push(this.negativeText)}else {if(d<a.minValue){c.push(e(a.minText,a.minValue))}}if(d>a.maxValue){c.push(e(a.maxText,a.maxValue))}return c},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(a){var b=this,c=b.decimalSeparator;a=b.parseValue(a);a=b.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,'.'));a=isNaN(a)?'':String(a).replace('.',c);return a},getSubmitValue:function(){var b=this,a=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!b.submitLocaleSeparator){a=a.replace(b.decimalSeparator,'.')}return a},onChange:function(a){var b=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(b){if(Ext.isNumber(a)&&isFinite(a)){b.setAttribute('aria-valuenow',a)}else {b.removeAttribute('aria-valuenow')}}},toggleSpinners:function(){var a=this,c=a.getValue(),d=c===null,b;if(a.spinUpEnabled||a.spinUpDisabledByToggle){b=d||c<a.maxValue;a.setSpinUpEnabled(b,!0)}if(a.spinDownEnabled||a.spinDownDisabledByToggle){b=d||c>a.minValue;a.setSpinDownEnabled(b,!0)}},setMinValue:function(e){var a=this,c=a.ariaEl.dom,d,b,c;a.minValue=d=Ext.Number.from(e,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(c){if(d>Number.NEGATIVE_INFINITY){c.setAttribute('aria-valuemin',d)}else {c.removeAttribute('aria-valuemin')}}if(a.disableKeyFilter!==!0){b=a.baseChars+'';if(a.allowExponential){b+=a.decimalSeparator+'e+-'}else {if(a.allowDecimals){b+=a.decimalSeparator}if(a.minValue<0){b+='-'}}b=Ext.String.escapeRegex(b);a.maskRe=new RegExp('['+b+']');if(a.autoStripChars){a.stripCharsRe=new RegExp('[^'+b+']','gi')}}},setMaxValue:function(c){var b=this.ariaEl.dom,a;this.maxValue=a=Ext.Number.from(c,Number.MAX_VALUE);if(b){if(a<Number.MAX_VALUE){b.setAttribute('aria-valuemax',a)}else {b.removeAttribute('aria-valuemax')}}this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,'.'));return isNaN(a)?null:a},fixPrecision:function(a){var d=this,c=isNaN(a),b=d.decimalPrecision;if(c||!a){return c?'':a}else {if(!d.allowDecimals||b<=0){b=0}}return parseFloat(Ext.Number.toFixed(parseFloat(a),b))},onBlur:function(c){var a=this,b=a.rawToValue(a.getRawValue());if(!Ext.isEmpty(b)){a.setValue(b)}Ext.form.field.Spinner.prototype.onBlur.call(this,c)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else {this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else {this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,['numberfield'],['component','box','field','textfield','spinnerfield','numberfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0},['widget.numberfield'],0,[Ext.form.field,'Number',Ext.form,'NumberField',Ext.form,'Number'],0);Ext.cmd.derive('Ext.toolbar.Paging',Ext.toolbar.Toolbar,{alternateClassName:'Ext.PagingToolbar',displayInfo:!1,prependButtons:!1,displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display',beforePageText:'Page',afterPageText:'of {0}',firstText:'First Page',prevText:'Previous Page',nextText:'Next Page',lastText:'Last Page',refreshText:'Refresh',inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:'store',getPagingItems:function(){var a=this,b={scope:a,blur:a.onPagingBlur};b[Ext.supports.SpecialKeyDownRepeat?'keydown':'keypress']=a.onPagingKeyDown;return [{itemId:'first',tooltip:a.firstText,overflowText:a.firstText,iconCls:'x-tbar-page-first',disabled:!0,handler:a.moveFirst,scope:a},{itemId:'prev',tooltip:a.prevText,overflowText:a.prevText,iconCls:'x-tbar-page-prev',disabled:!0,handler:a.movePrevious,scope:a},'-',a.beforePageText,{xtype:'numberfield',itemId:'inputItem',name:'inputItem',cls:'x-tbar-page-number',allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:a.inputItemWidth,margin:'-1 2 3 2',listeners:b},{xtype:'tbtext',itemId:'afterTextItem',html:Ext.String.format(a.afterPageText,1)},'-',{itemId:'next',tooltip:a.nextText,overflowText:a.nextText,iconCls:'x-tbar-page-next',disabled:!0,handler:a.moveNext,scope:a},{itemId:'last',tooltip:a.lastText,overflowText:a.lastText,iconCls:'x-tbar-page-last',disabled:!0,handler:a.moveLast,scope:a},'-',{itemId:'refresh',tooltip:a.refreshText,overflowText:a.refreshText,iconCls:'x-tbar-loading',disabled:a.store.isLoading(),handler:a.doRefresh,scope:a}]},initComponent:function(){var a=this,c=a.items||a.buttons||[],b;a.bindStore(a.store||'ext-empty-store',!0);b=a.getPagingItems();if(a.prependButtons){a.items=c.concat(b)}else {a.items=b.concat(c)}delete a.buttons;if(a.displayInfo){a.items.push('->');a.items.push({xtype:'tbtext',itemId:'displayItem'})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},updateBarInfo:function(){var a=this;if(!a.store.isLoading()){a.calledInternal=!0;a.onLoad();a.calledInternal=!1}},updateInfo:function(){var a=this,d=a.child('#displayItem'),f=a.store,b=a.getPageData(),e,c;if(d){e=f.getCount();if(e===0){c=a.emptyMsg}else {c=Ext.String.format(a.displayMsg,b.fromRecord,b.toRecord,b.total)}d.setText(c)}},onLoad:function(){var a=this,f,c,b,g,h,d,e;h=a.store.getCount();d=h===0;if(!d){f=a.getPageData();c=f.currentPage;b=f.pageCount;if(c>b){if(b>0){a.store.loadPage(b)}else {a.getInputItem().reset()}return}g=Ext.String.format(a.afterPageText,isNaN(b)?1:b)}else {c=0;b=0;g=Ext.String.format(a.afterPageText,0)}Ext.suspendLayouts();e=a.child('#afterTextItem');if(e){e.update(g)}e=a.getInputItem();if(e){e.setDisabled(d).setValue(c)}a.setChildDisabled('#first',c===1||d);a.setChildDisabled('#prev',c===1||d);a.setChildDisabled('#next',c===b||d);a.setChildDisabled('#last',c===b||d);a.setChildDisabled('#refresh',!1);a.updateInfo();Ext.resumeLayouts(!0);if(!a.calledInternal){a.fireEvent('change',a,f||a.emptyPageData)}},setChildDisabled:function(c,b){var a=this.child(c);if(a){a.setDisabled(b)}},getPageData:function(){var a=this.store,b=a.getTotalCount();return {total:b,currentPage:a.currentPage,pageCount:Math.ceil(b/a.pageSize),fromRecord:(a.currentPage-1)*a.pageSize+1,toRecord:Math.min(a.currentPage*a.pageSize,b)}},onLoadError:function(){this.setChildDisabled('#refresh',!1)},getInputItem:function(){return this.child('#inputItem')},readPageFromInput:function(d){var a=this.getInputItem(),b=!1,c;if(a){c=a.getValue();b=parseInt(c,10);if(!c||isNaN(b)){a.setValue(d.currentPage);return !1}}return b},onPagingBlur:function(c){var a=this.getInputItem(),b;if(a){b=this.getPageData().currentPage;a.setValue(b)}},onPagingKeyDown:function(a,b){this.processKeyEvent(a,b)},processKeyEvent:function(g,b){var e=this,c=b.getKey(),d=e.getPageData(),f=b.shiftKey?10:1,a;if(c===b.RETURN){b.stopEvent();a=e.readPageFromInput(d);if(a!==!1){a=Math.min(Math.max(1,a),d.pageCount);if(a!==d.currentPage&&e.fireEvent('beforechange',e,a)!==!1){e.store.loadPage(a)}}}else {if(c===b.HOME||c===b.END){b.stopEvent();a=c===b.HOME?1:d.pageCount;g.setValue(a)}else {if(c===b.UP||c===b.PAGE_UP||c===b.DOWN||c===b.PAGE_DOWN){b.stopEvent();a=e.readPageFromInput(d);if(a){if(c===b.DOWN||c===b.PAGE_DOWN){f*=-1}a+=f;if(a>=1&&a<=d.pageCount){g.setValue(a)}}}}}},beforeLoad:function(){this.setChildDisabled('#refresh',!0)},moveFirst:function(){if(this.fireEvent('beforechange',this,1)!==!1){this.store.loadPage(1);return !0}return !1},movePrevious:function(){var a=this,b=a.store,c=b.currentPage-1;if(c>0){if(a.fireEvent('beforechange',a,c)!==!1){b.previousPage();return !0}}return !1},moveNext:function(){var a=this,b=a.store,d=a.getPageData().pageCount,c=b.currentPage+1;if(c<=d){if(a.fireEvent('beforechange',a,c)!==!1){b.nextPage();return !0}}return !1},moveLast:function(){var a=this,b=a.getPageData().pageCount;if(a.fireEvent('beforechange',a,b)!==!1){a.store.loadPage(b);return !0}return !1},doRefresh:function(){var a=this,c=a.store,b=c.currentPage;if(a.fireEvent('beforechange',a,b)!==!1){c.loadPage(b);return !0}return !1},getStoreListeners:function(){return {beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,['pagingtoolbar'],['component','box','container','toolbar','pagingtoolbar'],{'component':!0,'box':!0,'container':!0,'toolbar':!0,'pagingtoolbar':!0},['widget.pagingtoolbar'],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,'Paging',Ext,'PagingToolbar'],0);Ext.define('Ext.theme.neptune.toolbar.Paging',{override:'Ext.toolbar.Paging',defaultButtonUI:'plain-toolbar',inputItemWidth:40});Ext.define('Ext.theme.triton.toolbar.Paging',{override:'Ext.toolbar.Paging',inputItemWidth:50});Ext.cmd.derive('Ext.view.BoundList',Ext.view.View,{alternateClassName:'Ext.BoundList',pageSize:0,baseCls:'x-boundlist',itemCls:'x-boundlist-item',listItemCls:'',shadow:!1,trackOver:!0,preserveScrollOnRefresh:!0,enableInitialSelection:!1,refreshSelmodelOnRefresh:!0,componentLayout:'boundlist',navigationModel:'boundlist',scrollable:!0,ariaEl:'listEl',tabIndex:-1,childEls:['listWrap','listEl'],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="','x-','list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>','>','</ul>','</div>','{%','var pagingToolbar=values.$comp.pagingToolbar;','if (pagingToolbar) {','Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);','}','%}',{disableFormats:!0}],focusOnToFront:!1,initComponent:function(){var a=this,b=a.baseCls,c=a.itemCls;a.selectedItemCls=b+'-selected';if(a.trackOver){a.overItemCls=b+'-item-over'}a.itemSelector='.'+c;a.scrollerSelector='ul.x-list-plain';if(a.floating){a.addCls(b+'-floating')}if(!a.tpl){a.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+a.getInnerTpl(a.displayField)+'</li>','</tpl>')}else {if(!a.tpl.isTemplate){a.tpl=new Ext.XTemplate(a.tpl)}}if(a.pageSize){a.pagingToolbar=a.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var b=Ext.view.View.prototype.getRefItems.call(this),a=this.pagingToolbar;if(a){b.push(a)}return b},createPagingToolbar:function(){return Ext.widget('pagingtoolbar',{id:this.id+'-paging-toolbar',pageSize:this.pageSize,store:this.dataSource,border:!1,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var b=this,a=b.tpl;a.field=b.pickerField;a.store=b.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null},bindStore:function(c,b){var a=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(a){a.bindStore(c,b)}},getInnerTpl:function(a){return '{'+a+'}'},onShow:function(){var a=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(a&&a.rendered&&!a.hasFocus){a.focus()}},afterComponentLayout:function(e,d,c,b){var a=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,e,d,c,b);if(a&&a.alignPicker){a.alignPicker()}},onItemClick:function(e){var d=this,b=d.pickerField,c,a;if(!b){return}c=b.valueField;a=d.getSelectionModel().getSelection();if(!b.multiSelect&&a.length){a=a[0];if(a&&b.isEqual(e.get(c),a.get(c))&&b.collapse){b.collapse()}}},onContainerClick:function(b){var a=this.pagingToolbar;if(a&&a.rendered&&b.within(a.el)){return !1}},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,'pagingToolbar','listWrap','listEl')},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,['boundlist'],['component','box','dataview','boundlist'],{'component':!0,'box':!0,'dataview':!0,'boundlist':!0},['widget.boundlist'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,'BoundList',Ext,'BoundList'],0);Ext.cmd.derive('Ext.form.field.ComboBox',Ext.form.field.Picker,{alternateClassName:'Ext.form.ComboBox',config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:!1,delimiter:', ',displayField:'text'},publishes:['selection'],twoWayBindable:['selection'],triggerCls:'x-form-arrow-trigger',hiddenName:'',collapseOnSelect:!1,hiddenDataCls:'x-hidden-display x-form-data-hidden',ariaRole:'combobox',childEls:{'hiddenDataEl':!0},filtered:!1,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:!1,triggerAction:'all',allQuery:'',queryParam:'query',queryMode:'remote',queryCaching:!0,autoLoadOnValue:!1,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelect:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:'sides'},transformInPlace:!0,clearValueOnEmpty:!0,getGrowWidth:function(){var a=this,i=a.inputEl.dom.value,h,e,g,c,b,f,d;if(a.growToLongestValue){h=a.displayField;e=a.store;g=e.data.length;c=0;for(b=0;b<g;b++){f=e.getAt(b).data[h];d=f.length;if(d>c){c=d;i=f}}}return i},initComponent:function(){var a=this,d=Ext.isDefined,f=a.store,e=a.transform,b,c;if('pinList' in a){a.collapseOnSelect=!a.pinList}if(e){b=Ext.getDom(e);if(b){if(!a.store){f=Ext.Array.map(Ext.Array.from(b.options),function(a){return [a.value,a.text]})}if(!a.name){a.name=b.name}if(!('value' in a)){a.value=b.value}}}a.bindStore(f||'ext-empty-store',!0,!0);c=a.queryMode==='local';if(!d(a.queryDelay)){a.queryDelay=c?10:500}if(!d(a.minChars)){a.minChars=c?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);a.doQueryTask=new Ext.util.DelayedTask(a.doRawQuery,a);if(b){if(a.transformInPlace){a.render(b.parentNode,b);delete a.renderTo}Ext.removeNode(b)}},getSubTplData:function(c){var b,a;b=Ext.form.field.Picker.prototype.getSubTplData.call(this,c);a=b.inputElAriaAttributes;if(a){a['aria-autocomplete']='list'}return b},getSubTplMarkup:function(c){var b=this,a='',d=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(b.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+b.hiddenDataCls+'" role="presentation"></div>'}return a+d},applyDisplayTpl:function(a){var b=this;if(!a){a=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+b.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+b.getDelimiter()+'</tpl></tpl>');a.auto=!0}else {if(!a.isTemplate){a=new Ext.XTemplate(a)}}return a},applyFilters:function(b,a){var c=this;if(b===null||b.isFilterCollection){return b}if(b){if(!a){a=this.getFilters()}a.beginUpdate();a.splice(0,a.length,b);a.each(function(d){d.ownerId=c.id});a.endUpdate()}return a},applyValueNotFoundText:function(b){var a=this,c=a.valueNotFoundRecord||(a.valueNotFoundRecord=new Ext.data.Model());c.set(a.displayField,b);if(a.valueField&&a.displayField!==a.valueField){c.set(a.valueField,b)}return b},getFilters:function(b){var a=this.filters;if(!a&&b!==!1){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,c){var b=this;if(c){c.un('endupdate','onEndUpdateFilters',b)}if(a){a.on('endupdate','onEndUpdateFilters',b)}b.onEndUpdateFilters(a)},onEndUpdateFilters:function(a){var b=this,f=b.filtered,e=!!a&&a.length>0,d,c;if(f||e){b.filtered=e;d=[];c=b.store.getFilters();c.each(function(c){if(c.ownerId===b.id&&!a.contains(c)){d.push(c)}});c.splice(0,d,a.items)}},completeEdit:function(c){var a=this,b=a.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,c);a.doQueryTask.cancel();a.assertValue();if(b&&a.queryMode==='local'&&a.clearFilterOnBlur){a.getStore().getFilters().remove(b)}},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(a.triggerAction!=='all'&&a.queryFilter&&a.queryMode==='local'&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var a=this,e=a.getRawValue(),c=a.getDisplayValue(),d=a.lastSelectedRecords,b;if(a.forceSelection){if(a.multiSelect){if(e!==c){a.setRawValue(c)}}else {b=a.findRecordByDisplay(e);if(b){if(a.getDisplayValue([a.getRecordDisplayData(b)])!==c){a.select(b,!0)}}else {if(d&&(!a.allowBlank||a.rawValue)){a.setValue(d)}else {if(d){delete a.lastSelectedRecords}a.setRawValue('')}}}}a.collapse()},onTypeAhead:function(){var a=this,e=a.displayField,d=a.store.findRecord(e,a.getRawValue()),f=a.getPicker(),b,g,c;if(d){b=d.get(e);g=b.length;c=a.getRawValue().length;f.highlightItem(f.getNode(d));if(c!==0&&c!==g){a.setRawValue(b);a.selectText(c,b.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var a=this,c=a.picker,b=a.queryFilter;if(b&&!a.store.destroyed){a.changingFilters=!0;a.getStore().removeFilter(b,!0);a.changingFilters=!1}a.pickerSelectionModel.destroy();if(c){c.bindStore(null)}},onBindStore:function(b,f){var a=this,d=a.picker,c,e;if(b){if(b.autoCreated){a.queryMode='local';a.valueField=a.displayField='field1';if(!b.expanded){a.displayField='field2'}if(a.getDisplayTpl().auto){a.setDisplayTpl(null)}}if(!Ext.isDefined(a.valueField)){a.valueField=a.displayField}c={byValue:{rootProperty:'data',unique:!1}};c.byValue.property=a.valueField;b.setExtraKeys(c);if(a.displayField===a.valueField){b.byText=b.byValue}else {c.byText={rootProperty:'data',unique:!1};c.byText.property=a.displayField;b.setExtraKeys(c)}e={rootProperty:'data',extraKeys:{byInternalId:{property:'internalId'},byValue:{property:a.valueField,rootProperty:'data'}},listeners:{beginupdate:a.onValueCollectionBeginUpdate,endupdate:a.onValueCollectionEndUpdate,scope:a}};a.valueCollection=new Ext.util.Collection(e);a.pickerSelectionModel=new Ext.selection.DataViewModel({mode:a.multiSelect?'SIMPLE':'SINGLE',deselectOnContainerClick:!1,enableInitialSelection:!1,pruneRemoved:!1,selected:a.valueCollection,store:b,listeners:{scope:a,lastselectedchanged:a.updateBindSelection}});if(!f){a.resetToDefault()}if(d){d.setSelectionModel(a.pickerSelectionModel);if(d.getStore()!==b){d.bindStore(b)}}}},bindStore:function(a,e,c){var b=this,d=b.queryFilter;b.mixins.storeholder.bindStore.call(b,a,c);a=b.getStore();if(a&&d&&!e){a.getFilters().add(d)}if(!c&&a&&!a.isEmptyStore){b.setValueOnData()}},getStoreListeners:function(c){if(!c.isEmptyStore){var a=this,b={datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,update:a.onStoreUpdate,remove:a.checkValueOnChange};if(!c.getRemoteFilter()){b.filterchange=a.checkValueOnChange}return b}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var a=this;if(!a.destroying&&a.getStore().isLoaded()){if(a.multiSelect){}else {if(a.forceSelection&&!a.changingFilters&&!a.findRecordByValue(a.value)){a.setValue(null)}}}},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.collapse()},onLoad:function(b,e,d){var a=this,c=!a.valueCollection.byValue.get(a.value);if(d&&c&&!(b.lastOptions&&'rawQuery' in b.lastOptions)){a.setValueOnData()}a.checkValueOnChange()},setValueOnData:function(){var a=this;a.setValue(a.value);if(a.isExpanded&&a.getStore().getCount()){a.doAutoSelect()}},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;if(a.multiSelect){b=b.split(a.delimiter).pop()}a.doQuery(b,!1,!0)},doQuery:function(c,f,g){var a=this,d=a.getStore(),e=d.filters&&!d.filters.length&&!!c,b=a.beforeQuery({query:c||'',rawQuery:g,forceAll:f,combo:a,cancel:!1});if(b!==!1&&!b.cancel){if(a.queryCaching&&!e&&b.query===a.lastQuery){a.getPicker().refresh();a.expand()}else {a.lastQuery=b.query;if(a.queryMode==='local'){a.doLocalQuery(b)}else {a.doRemoteQuery(b)}}}return !0},beforeQuery:function(a){var b=this;if(b.fireEvent('beforequery',a)===!1){a.cancel=!0}else {if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=!0}}}return a},doLocalQuery:function(d){var a=this,c=d.query,e=a.getStore(),b=a.queryFilter;a.queryFilter=null;a.changingFilters=!0;if(b){e.removeFilter(b,!0)}if(c){b=a.queryFilter=new Ext.util.Filter({id:a.id+'-filter',anyMatch:a.anyMatch,caseSensitive:a.caseSensitive,root:'data',property:a.displayField,value:a.enableRegEx?new RegExp(c):c});e.addFilter(b,!0)}a.changingFilters=!1;if(a.store.getCount()||a.getPicker().emptyText){a.getPicker().refresh();a.expand()}else {a.collapse()}a.afterQuery(d)},doRemoteQuery:function(b){var a=this,c=function(){if(!a.destroyed){a.afterQuery(b)}};a.expand();if(a.pageSize){a.loadPage(1,{rawQuery:b.rawQuery,callback:c})}else {a.store.load({params:a.getParams(b.query),rawQuery:b.rawQuery,callback:c})}},afterQuery:function(b){var a=this;if(a.store.getCount()){if(a.typeAhead){a.doTypeAhead()}if(b.rawQuery){if(a.picker&&!a.picker.getSelectionModel().hasSelection()){a.doAutoSelect()}}else {a.doAutoSelect()}}a.startCheckChangeTask()},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return !1},getParams:function(c){var a={},b=this.queryParam;if(b){a[b]=c}return a},doAutoSelect:function(){var b=this,d=b.picker,a,c=0;if(d&&b.autoSelect&&b.store.getCount()>0){a=b.picker.getSelectionModel();if(a.lastSelected&&a.selected.length){c=a.lastSelected}d.getNavigationModel().setPosition(c)}},doTypeAhead:function(){var a=this,b=Ext.event.Event;if(!a.typeAheadTask){a.typeAheadTask=new Ext.util.DelayedTask(a.onTypeAhead,a)}if(a.lastKey!==b.BACKSPACE&&a.lastKey!==b.DELETE){a.typeAheadTask.delay(a.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else {if(a.triggerAction==='all'){a.doQuery(a.allQuery,!0)}else {if(a.triggerAction==='last'){a.doQuery(a.lastQuery,!0)}else {a.doQuery(a.getRawValue(),!1,!0)}}}}},onFieldMutation:function(b){var a=this,c=b.getKey(),d=c===b.BACKSPACE||c===b.DELETE,e=a.inputEl.dom.value,f=e.length;if(!a.readOnly&&(e!==a.lastMutatedValue||d)&&c!==b.TAB){a.lastMutatedValue=e;a.lastKey=c;if(f&&(b.type!=='keyup'||(!b.isSpecialKey()||d))){a.doQueryTask.delay(a.queryDelay)}else {if(!f&&(!c||d)){++a.suspendCheckChange;if(!a.multiSelect){a.value=null;a.displayTplData=undefined}if(a.clearValueOnEmpty){a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.removeAll();a.valueCollection.endUpdate()}a.collapse();if(a.queryFilter){a.changingFilters=!0;a.store.removeFilter(a.queryFilter,!0);a.changingFilters=!1}--a.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,b)}}},onDestroy:function(){var a=this;a.doQueryTask.cancel();if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);a.valueCollection=Ext.destroy(a.valueCollection);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up('[floating]');a.picker.registerWithOwnerCt()}},createPicker:function(){var a=this,b,c=Ext.apply({xtype:'boundlist',id:a.pickerId,pickerField:a,selectionModel:a.pickerSelectionModel,floating:!0,hidden:!0,store:a.getPickerStore(),displayField:a.displayField,preserveScrollOnRefresh:!0,pageSize:a.pageSize,tpl:a.tpl},a.listConfig,a.defaultListConfig);b=a.picker=Ext.widget(c);if(a.pageSize){b.pagingToolbar.on('beforechange',a.onPageChange,a)}if(!b.initialConfig.maxHeight){b.on({beforeshow:a.onBeforePickerShow,scope:a})}b.getSelectionModel().on({beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,focuschange:a.onFocusChange,scope:a});b.getNavigationModel().navigateOnSpace=!1;return b},getPickerStore:function(){return this.store},onBeforePickerShow:function(d){var b=this,a=b.getPosition()[1]-Ext.getBody().getScroll().top,c=Ext.Element.getViewportHeight()-a-b.getHeight();d.maxHeight=Math.max(a,c)-5},onBeforeSelect:function(c,b,a){return this.fireEvent('beforeselect',this,b,a)},onBeforeDeselect:function(c,b,a){return this.fireEvent('beforedeselect',this,b,a)},onFocusChange:function(e,d,b){var c=this.picker,a;if(b){a=Ext.get(c.getNodeByRecord(b));if(a){this.ariaEl.dom.setAttribute('aria-activedescendant',a.id)}}},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(c){var a=this,b;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;b=a.getPicker().getSelectionModel();if(c){b.select(c);a.hasHadSelection=!0}else {b.deselectAll()}a.ignoreNextSelection=!1}},updateBindSelection:function(d,c){var a=this,b=null;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(c.length){b=d.getLastSelected();a.hasHadSelection=!0}if(a.hasHadSelection){a.setSelection(b)}a.ignoreNextSelection=!1}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var a=this,e=a.store,b=a.valueCollection.getRange(),d=b[0],c=b.length;a.updateBindSelection(a.pickerSelectionModel,b);if(a.isSelectionUpdating()){return}Ext.suspendLayouts();a.lastSelection=b;if(c){a.lastSelectedRecords=b}a.updateValue();if(c&&(!a.multiSelect&&e.contains(d)||a.collapseOnSelect||!e.getCount())){a.updatingValue=!0;a.collapse();a.updatingValue=!1}Ext.resumeLayouts(!0);if(c&&!a.suspendCheckChange){if(!a.multiSelect){b=d}a.fireEvent('select',a,b)}},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var a=this.getPicker().getNavigationModel();if(a){a.enable()}this.doAutoSelect()},onCollapse:function(){var a=this.getPicker().getNavigationModel();if(a){a.disable()}if(this.updatingValue){this.doQueryTask.cancel()}},select:function(b,e){var a=this,d=a.picker,c;if(b&&b.isModel&&e===!0&&d){c=!d.getSelectionModel().isSelected(b)}if(!c){a.suspendEvent('select')}a.setValue(b);a.resumeEvent('select')},findRecord:function(c,d){var b=this.store,a=b.findExact(c,d);return a!==-1?b.getAt(a):!1},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(c){var a=this.store.byValue.get(c),b=!1;if(a){b=a[0]||a}return b},findRecordByDisplay:function(c){var a=this.store.byText.get(c),b=!1;if(a){b=a[0]||a}return b},addValue:function(a){if(a!=null){return this.doSetValue(a,!0)}},setValue:function(b){var a=this;if(b!=null){return a.doSetValue(b)}else {a.suspendEvent('select');a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.endUpdate();a.lastSelectedRecords=null;a.resumeEvent('select')}},setRawValue:function(a){Ext.form.field.Picker.prototype.setRawValue.call(this,a);this.lastMutatedValue=a},doSetValue:function(c,p){var a=this,f=a.getStore(),v=f.getModel(),e=[],u=[],r=a.autoLoadOnValue,m=f.getCount()>0||f.isLoaded(),l=f.hasPendingLoad(),o=r&&!m&&!l,t=a.forceSelection,n=a.pickerSelectionModel,s=a.displayField===a.valueField,j=f.isEmptyStore,k=a.lastSelection,d,h,b,i,g,q;if(l||o||!m||j){if(!c.isModel){if(p){a.value=Ext.Array.from(a.value).concat(c)}else {a.value=c}a.setHiddenValue(a.value);a.setRawValue(s?c:'')}if(o&&!j){f.load()}if(!c.isModel||j){return a}}c=p?Ext.Array.from(a.value).concat(c):Ext.Array.from(c);for(d=0,h=c.length;d<h;d++){b=c[d];if(!b||!b.isModel){b=a.findRecordByValue(q=b);if(!b){b=a.valueCollection.find(a.valueField,q)}}if(!b){if(!t){if(!b&&c[d]){i={};i[a.displayField]=c[d];if(a.valueField&&a.displayField!==a.valueField){i[a.valueField]=c[d]}b=new v(i)}}else {if(a.valueNotFoundRecord){b=a.valueNotFoundRecord}}}if(b){e.push(b);u.push(b.get(a.valueField))}}if(k){h=k.length;if(h===e.length){for(d=0;!g&&d<h;d++){if(Ext.Array.indexOf(a.lastSelection,e[d])===-1){g=!0}}}else {g=!0}}else {g=e.length}if(g){a.suspendEvent('select');a.valueCollection.beginUpdate();if(e.length){n.select(e,!1)}else {n.deselectAll()}a.valueCollection.endUpdate();a.resumeEvent('select')}else {a.updateValue()}if(a.inputEl&&a.emptyText){a.inputEl.removeCls(a.emptyCls);a.valueContainsPlaceholder=!1}a.applyEmptyText();return a},updateValue:function(){var a=this,f=a.valueCollection.getRange(),h=f.length,b=[],e=a.displayTplData||(a.displayTplData=[]),g=a.inputEl,d,c;e.length=0;for(d=0;d<h;d++){c=f[d];e.push(a.getRecordDisplayData(c));if(c!==a.valueNotFoundRecord){b.push(c.get(a.valueField))}}a.setHiddenValue(b);a.value=a.multiSelect?b:b[0];if(!Ext.isDefined(a.value)){a.value=undefined}a.displayTplData=e;if(g&&a.emptyText&&!Ext.isEmpty(a.value)){g.removeCls(a.emptyCls)}a.setRawValue(a.getDisplayValue());a.checkChange();a.applyEmptyText()},setHiddenValue:function(f){var h=this,i=h.hiddenName,e,d,b,g,c,a;if(!h.hiddenDataEl||!i){return}f=Ext.Array.from(f);d=h.hiddenDataEl.dom;b=d.childNodes;g=b[0];c=f.length;a=b.length;if(!g&&c>0){h.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:'input',type:'hidden',name:i}));a=1;g=d.firstChild}while(a>c){d.removeChild(b[0]);--a}while(a<c){d.appendChild(g.cloneNode(!0));++a}for(e=0;e<c;e++){b[e].value=f[e]}},getDisplayValue:function(a){a=a||this.displayTplData;return this.getDisplayTpl().apply(a)},getRecordDisplayData:function(a){return a.data},getValue:function(){var a=this,e=a.getStore(),d=a.picker,c=a.getRawValue(),b=a.value;if(!e.isEmptyStore&&a.getDisplayValue()!==c){a.displayTplData=undefined;if(d){a.valueCollection.suspendEvents();d.getSelectionModel().deselectAll();a.valueCollection.resumeEvents();a.lastSelection=null}if(e.isLoaded()&&(a.multiSelect||a.forceSelection)){b=a.value=undefined}else {b=a.value=c}}a.value=b==null?null:b;return a.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=''}return a},isEqual:function(b,c){var e=Ext.Array.from,a,d;b=e(b);c=e(c);d=b.length;if(d!==c.length){return !1}for(a=0;a<d;a++){if(c[a]!==b[a]){return !1}}return !0},clearValue:function(){this.setValue(null)}},0,['combo','combobox'],['component','box','field','textfield','pickerfield','combobox','combo'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0},['widget.combo','widget.combobox'],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,'ComboBox',Ext.form,'ComboBox'],0);Ext.cmd.derive('Ext.container.Monitor',Ext.Base,{target:null,selector:'',scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on('beforedestroy',a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un('beforedestroy',a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(e,b){var a=this,d=a.items,c=a.addHandler;if(!a.disabled){if(c){c.call(a.scope||b,b)}if(d){d.add(b)}}},onItemRemove:function(e,b){var a=this,d=a.items,c=a.removeHandler;if(!a.disabled){if(c){c.call(a.scope||b,b)}if(d){d.remove(b)}}},onContainerAdd:function(c,i){var a=this,d,e,h=a.handleAdd,g=a.handleRemove,b,f;if(c.isContainer){c.on('add',h,a);c.on('dockedadd',h,a);c.on('remove',g,a);c.on('dockedremove',g,a)}if(i!==!0){d=c.query(a.selector);for(b=0,e=d.length;b<e;++b){f=d[b];a.onItemAdd(f.ownerCt,f)}}d=c.query('>container');for(b=0,e=d.length;b<e;++b){a.onContainerAdd(d[b],!0)}},handleRemove:function(c,a){var b=this;if(!b.disabled){if(a.is(b.selector)){b.onItemRemove(c,a)}if(a.isQueryable){b.onContainerRemove(c,a)}}},onContainerRemove:function(g,c){var d=this,b,a,e,f;if(!c.destroyed&&!c.destroying&&c.isContainer){d.removeCtListeners(c);b=c.query(d.selector);for(a=0,e=b.length;a<e;++a){f=b[a];d.onItemRemove(f.ownerCt,f)}b=c.query('container');for(a=0,e=b.length;a<e;++a){d.removeCtListeners(b[a])}}else {d.invalidateItems(!0)}},removeCtListeners:function(b){var a=this;b.un('add',a.handleAdd,a);b.un('dockedadd',a.handleAdd,a);b.un('remove',a.handleRemove,a);b.un('dockedremove',a.handleRemove,a)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var a=this,b=a.invalidateHandler;if(c&&b){b.call(a.scope||a,a)}a.items=null}},1,0,0,0,0,0,[Ext.container,'Monitor'],0);Ext.cmd.derive('Ext.form.FieldAncestor',Ext.Mixin,{mixinConfig:{id:'fieldAncestor',after:{initInheritedState:'initFieldInheritedState'},before:{destroy:'onBeforeDestroy'}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:'[isFormField]:not([excludeForm])',addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(a){var c=a.fieldDefaults,b=this.fieldDefaults;if(b){if(c){a.fieldDefaults=Ext.apply(Ext.Object.chain(c),b)}else {a.fieldDefaults=b}}},onChildFieldAdd:function(b){var a=this;a.mon(b,'errorchange',a.handleFieldErrorChange,a);a.mon(b,'validitychange',a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,'errorchange',a.handleFieldErrorChange,a);a.mun(b,'validitychange',a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(b,c){var a=this;if(b!==a){a.fireEvent('fieldvaliditychange',a,b,c);a.onFieldValidityChange(b,c)}},handleFieldErrorChange:function(b,c){var a=this;if(b!==a){a.fireEvent('fielderrorchange',a,b,c);a.onFieldErrorChange(b,c)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,'FieldAncestor'],0);Ext.cmd.derive('Ext.layout.component.field.FieldContainer',Ext.layout.component.Auto,{type:'fieldcontainer',waitForOuterHeightInDom:!0,waitForOuterWidthInDom:!0,beginLayout:function(a){var b=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.hasRawContent=!0;b.setStyle('width','');b.setStyle('height','');a.containerElContext=a.getEl('containerEl')},measureContentHeight:function(a){return a.hasDomProp('containerLayoutDone')?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp('containerLayoutDone')?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(c,b){var a=this.owner;if(a.labelAlign==='top'&&a.hasVisibleLabel()){b-=a.labelEl.getHeight()}if(a.msgTarget==='under'&&a.hasActiveError()){b-=a.errorWrapEl.getHeight()}b-=a.bodyEl.getPadding('tb');c.containerElContext.setHeight(b)},publishInnerWidth:function(c,b){var a=this.owner;if(a.labelAlign!=='top'&&a.hasVisibleLabel()){b-=a.labelWidth+(a.labelPad||0)}if(a.msgTarget==='side'&&a.hasActiveError()){b-=a.errorWrapEl.getWidth()}b-=a.bodyEl.getPadding('lr');c.containerElContext.setWidth(b)}},0,0,0,0,['layout.fieldcontainer'],0,[Ext.layout.component.field,'FieldContainer'],0);Ext.cmd.derive('Ext.form.FieldContainer',Ext.container.Container,{componentLayout:'fieldcontainer',componentCls:'x-form-fieldcontainer',shrinkWrap:!0,autoEl:{tag:'div',role:'presentation'},childEls:['containerEl'],combineLabels:!1,labelConnector:', ',combineErrors:!1,maskOnDisable:!1,invalidCls:'',fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>','>','{%this.renderContainer(out,values)%}','</div>'],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(b){var a=this;if(b.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&a.layout.type==='absolute'&&!a.hideLabel&&a.labelAlign!=='top'){b.x+=a.labelWidth+a.labelPad}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(b.isLabelable&&a.combineLabels){b.oldHideLabel=b.hideLabel;b.hideLabel=!0}a.updateLabel()},onRemove:function(a,c){var b=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!c){if(a.isLabelable&&b.combineLabels){a.hideLabel=a.oldHideLabel}b.updateLabel()}},initRenderData:function(){var b=this,a=Ext.container.Container.prototype.initRenderData.call(this);a.containerElCls=b.containerElCls;a=Ext.applyIf(a,b.getLabelableRenderData());a.tipAnchorTarget=b.id+'-containerEl';return a},getFieldLabel:function(){var a=this.fieldLabel||'';if(!a&&this.combineLabels){a=Ext.Array.map(this.query('[isFieldLabelable]'),function(a){return a.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(d){var b=this,a=b.getTpl('fieldSubTpl'),c;if(!a.renderContent){b.setupRenderTpl(a)}c=a.apply(b.getSubTplData(d));return c},updateLabel:function(){var a=this,b=a.labelEl;if(b){a.setFieldLabel(a.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var a=this,d=a.getActiveError(),c=Ext.Array.filter(a.query('[isFormField]'),function(a){return a.hasActiveError()}),b=a.getCombinedErrors(c);if(b){a.setActiveErrors(b)}else {a.unsetActiveError()}if(d!==a.getActiveError()){a.updateLayout()}}},getCombinedErrors:function(f){var g=[],b,j=f.length,d,c,a,i,h,e;for(b=0;b<j;b++){d=f[b];c=d.getActiveErrors();i=c.length;for(a=0;a<i;a++){h=c[a];e=d.getFieldLabel();g.push((e?e+': ':'')+h)}}return g},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+' '+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty('renderTpl')){a.renderTpl=a.getTpl('labelableRenderTpl')}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,['fieldcontainer'],['component','box','container','fieldcontainer'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0},['widget.fieldcontainer'],[['labelable',Ext.form.Labelable],['fieldAncestor',Ext.form.FieldAncestor]],[Ext.form,'FieldContainer'],0);Ext.cmd.derive('Ext.panel.Bar',Ext.container.Container,{vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var a=this,b=a.vertical;a.dock=a.dock||(b?'left':'top');a.layout=Ext.apply(b?{type:'vbox',align:'middle',alignRoundingMethod:'ceil'}:{type:'hbox',align:'middle',alignRoundingMethod:'floor'},a.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(a,c,b){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,a,c,b)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){var a=this;if(a.forceOrientation||!a.ownerCt){a.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(d){var a=this,c,b;if(d!==a.dock){Ext.suspendLayouts();a.clearOrientation();Ext.container.Container.prototype.setDock.call(this,d);a.initOrientation();b=a.vertical;c=a.layout;c.setVertical(b);c.setAlignRoundingMethod(b?'ceil':'floor');Ext.resumeLayouts(!0)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?'vertical':'horizontal',this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var a=this,b=a.dock,c=a.vertical=b?b in a._verticalSides:a.vertical;a.addClsWithUI([c?'vertical':'horizontal',a.getDockName()])}}},0,0,['component','box','container'],{'component':!0,'box':!0,'container':!0},0,0,[Ext.panel,'Bar'],0);Ext.define('Ext.rtl.panel.Bar',{override:'Ext.panel.Bar',rtlPositions:{top:'top',right:'left',bottom:'bottom',left:'right'},_rtlRotationClasses:{1:'x-title-rotate-left',2:'x-title-rotate-right'},_rtlRotationAngles:{1:270,2:90},onAdded:function(b,d,c){var a=this;if(a.isParentRtl()){a._rotationClasses=a._rtlRotationClasses;a._rotationAngles=a._rtlRotationAngles}(arguments.callee.$previous||Ext.container.Container.prototype.onAdded).call(this,b,d,c)},privates:{getDockName:function(){var a=this,b=a.dock;return a.isParentRtl()?a.rtlPositions[b]:b}}});Ext.cmd.derive('Ext.panel.Title',Ext.Component,{isTitle:!0,noWrap:!0,textAlign:'left',iconAlign:'left',rotation:0,text:'&#160;',beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:'presentation',unselectable:'on'},textElRole:'presentation',tabIndex:0,childEls:['textEl','iconEl','iconWrapEl'],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:'x-title-align-left',center:'x-title-align-center',right:'x-title-align-right'},_iconAlignClasses:{top:'x-title-icon-top',right:'x-title-icon-right',bottom:'x-title-icon-bottom',left:'x-title-icon-left'},_rotationClasses:{0:'x-title-rotate-none',1:'x-title-rotate-right',2:'x-title-rotate-left'},_rotationAngles:{1:90,2:270},baseCls:'x-title',_titleSuffix:'-title',_glyphCls:'x-title-glyph',_iconWrapCls:'x-title-icon-wrap',_baseIconCls:'x-title-icon',_itemCls:'x-title-item',_textCls:'x-title-text',afterComponentLayout:function(){var b=this,c=b.getRotation(),a,d,e;if(c&&!Ext.isIE8){e=b.el;a=b.lastBox;d=a.x;e.setStyle(b._getVerticalAdjustDirection(),d+(c===1?a.width:-a.height)+'px')}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var a=this,b=a.getRotation(),c=a.el;Ext.Component.prototype.onRender.call(this);if(b){c.setVertical(a._rotationAngles[b])}if(Ext.supports.FixedTableWidthBug){c._needsTableWidthFix=!0}},applyText:function(a){if(!a){a='&#160;'}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl('iconTpl').apply(this.getIconRenderData())},getIconRenderData:function(){var a=this,g=a.getIcon(),f=a.getIconCls(),b=a.getGlyph(),d=Ext._glyphFontFamily,e=a.getIconAlign(),c;if(typeof b==='string'){c=b.split('@');b=c[0];d=c[1]}return {id:a.id,ui:a.ui,itemCls:a._itemCls,iconUrl:g,iconCls:f,iconWrapCls:a._iconWrapCls,baseIconCls:a._baseIconCls,iconAlignCls:a._iconAlignClasses[e],glyph:b,glyphCls:b?a._glyphCls:'',glyphFontFamily:d}},initRenderData:function(){var a=this,c,b;b=Ext.apply({text:a.getText(),textElRole:a.textElRole,id:a.id,ui:a.ui,itemCls:a._itemCls,textCls:a._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(a._hasIcon()){c=a.getIconAlign();b.iconMarkup=a.getIconMarkup();b.iconBeforeTitle=c==='top'||c==='left'}return b},onAdded:function(a,f,e){var d=this,c=d._titleSuffix,b=a.baseCls;d.addCls([b+c,b+c+'-'+a.ui]);Ext.Component.prototype.onAdded.call(this,a,f,e)},updateGlyph:function(a,g){a=a||0;var b=this,f=b._glyphCls,c,d,e;b.glyph=a;if(b.rendered){b._syncIconVisibility();c=b.iconEl;if(typeof a==='string'){e=a.split('@');a=e[0];d=e[1]||Ext._glyphFontFamily}if(!a){c.dom.innerHTML='';c.removeCls(f)}else {if(g!==a){c.dom.innerHTML='&#'+a+';';c.addCls(f)}}if(d){c.setStyle('font-family',d)}if(b._didIconStateChange(g,a)){b.updateLayout()}}},updateIcon:function(a,c){a=a||'';var b=this,d;if(b.rendered&&a!==c){b._syncIconVisibility();d=b.iconEl;d.setStyle('background-image',a?'url('+a+')':'');if(b._didIconStateChange(c,a)){b.updateLayout()}}},updateIconAlign:function(d,f){var a=this,b=a.iconWrapEl,e,c;if(a.iconWrapEl){e=a.el;c=a._iconAlignClasses;if(f){b.removeCls(c[f])}b.addCls(c[d]);if(d==='top'||d==='left'){e.insertFirst(b)}else {e.appendChild(b)}a.updateLayout()}},updateIconCls:function(a,c){a=a||'';var b=this,d;if(b.rendered&&c!==a){b._syncIconVisibility();d=b.iconEl;if(c){d.removeCls(c)}d.addCls(a);if(b._didIconStateChange(c,a)){b.updateLayout()}}},updateRotation:function(d,e){var a=this,b,c;if(a.rendered){b=a.el;c=a._rotationClasses;a.removeCls(c[e]);a.addCls(c[d]);b.setHorizontal();if(d){b.setVertical(a._rotationAngles[d])}b.setStyle({right:'',left:'',top:'',height:'',width:''});a.lastBox=null;a.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a);this.updateLayout()}},updateTextAlign:function(d,c){var a=this,b=a._textAlignClasses;if(a.rendered){if(c){a.removeCls(b[c])}a.addCls(b[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return 'left'},_didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var a=this,f=a.el,e=a._hasIcon(),b=a.iconWrapEl,d,c;if(e&&!b){c=a.iconAlign;d=c==='left'||c==='top';f.dom.insertAdjacentHTML(d?'afterbegin':'beforeend',a.getIconMarkup());b=a.iconWrapEl=f[d?'first':'last']();a.iconEl=b.first()}if(b){b.setDisplayed(e)}}}},0,['title'],['component','box','title'],{'component':!0,'box':!0,'title':!0},['widget.title'],0,[Ext.panel,'Title'],0);Ext.define('Ext.rtl.panel.Title',{override:'Ext.panel.Title',getIconRenderData:function(){var c=this,b=arguments.callee.$previous.call(this),a=c.ownerCt;if(a&&a.isParentRtl()){b.childElCls=' '+c._rtlCls}return b},privates:{_getVerticalAdjustDirection:function(){var a=this.ownerCt;return a&&a.isParentRtl()?'right':'left'}}});Ext.cmd.derive('Ext.panel.Tool',Ext.Component,{isTool:!0,baseCls:'x-tool',disabledCls:'x-tool-disabled',toolPressedCls:'x-tool-pressed',toolOverCls:'x-tool-over',childEls:['toolEl'],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:'qtip',stopEvent:!0,ariaRole:'button',focusable:!0,tabIndex:0,keyHandlers:{SPACE:'onClick',ENTER:'onClick'},cacheHeight:!0,cacheWidth:!0,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:'data-qtip'},setTooltip:function(b,d){var a=this,g=a.tooltip,f=a.tooltipType,h=a.id,e=a.el,c;if(g&&Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.unregister(h)}a.tooltip=b;if(d){a.tooltipType=d}if(b){if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:h},b))}else {if(e){if(d&&f&&d!==f){c=a.tipAttrs[f]||'title';e.dom.removeAttribute(c)}c=a.tipAttrs[d||f]||'title';e.dom.setAttribute(c,b)}}if(c!=='title'&&a.ariaRole&&a.ariaRole!=='presentation'){if(e){e.dom.setAttribute('aria-label',b)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-label']=b}}}},setType:function(b){var a=this,c=a.type;a.type=b;if(a.rendered){if(c){a.toolEl.removeCls(a.baseCls+'-'+c)}a.toolEl.addCls(a.baseCls+'-'+b)}else {a.renderData.type=b}return a},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{onClick:function(b,c){var a=this;if(a.disabled){return !1}if(b.type!=='keydown'){a.el.removeCls(a.toolPressedCls+' '+a.toolOverCls)}if(a.stopEvent!==!1){b.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[b,c,a.ownerCt,a],0,a)}else {if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,b],0,a)}}a.fireEvent('click',a,b,a.toolOwner||a.ownerCt);return !0},onMouseDown:function(a){a.preventDefault();if(this.disabled){return !1}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return !1}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,['tool'],['component','box','tool'],{'component':!0,'box':!0,'tool':!0},['widget.tool'],0,[Ext.panel,'Tool'],0);Ext.cmd.derive('Ext.panel.Header',Ext.panel.Bar,{isHeader:!0,defaultType:'tool',indicateDrag:!1,weight:-1,shrinkWrap:3,iconAlign:'left',titleAlign:'left',titlePosition:0,titleRotation:'default',autoEl:{role:'presentation'},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:'title',flex:1},merge:function(a,b){if(typeof a!=='object'){a={text:a}}return Ext.merge(b?Ext.Object.chain(b):{},a)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:'x-header',initComponent:function(){var a=this,b=a.items,d=a.itemPosition,c=[a.headerCls];a.tools=a.tools||[];a.items=b=b?b.slice():[];if(d!==undefined){a._userItems=b.slice();a.items=b=[]}a.indicateDragCls=a.headerCls+'-draggable';if(a.indicateDrag){c.push(a.indicateDragCls)}a.addCls(c);a.syncNoBorderCls();a.enableFocusableContainer=!a.isAccordionHeader&&a.tools.length>0;if(a.enableFocusableContainer){a.ariaRole='toolbar'}Ext.Array.push(b,a.tools);a.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);a.on({dblclick:a.onDblClick,click:a.onClick,element:'el',scope:a})},addTool:function(b){var a=this;a.add(Ext.ComponentManager.create(b,'tool'));if(!a.isAccordionHeader&&a.tools.length>0&&!a.enableFocusableContainer){a.enableFocusableContainer=!0;a.ariaRole='toolbar';if(a.rendered){a.ariaEl.dom.setAttribute('role','toolbar');a.initFocusableContainer(!0)}}},afterLayout:function(){var a=this,e,b,c,d;if(a.vertical){b=a.frameTR;if(b){e=a.frameBR;c=a.frameTL;d=a.getWidth()-b.getPadding('r')-(c?c.getPadding('l'):a.el.getBorderWidth('l'))+'px';e.setStyle('background-position-x',d);b.setStyle('background-position-x',d)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(a,d){var b=this,c,e;a=a||'';c=typeof a==='string';if(c){a={text:a}}if(d){Ext.suspendLayouts();d.setConfig(a);Ext.resumeLayouts(!0);a=d}else {if(c){a.xtype='title'}a.ui=b.ui;e='rotation' in a;a.id=b.id+'-title';if(b.isAccordionHeader){a.ariaRole='tab';a.textElRole=null;a.focusable=!0}a=Ext.create(a);if(!e&&b.vertical&&b.titleRotation==='default'){a.rotation=1}}return a},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var a=this,b=a.itemPosition;a.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(b!==undefined){a.insert(b,a._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(a,c){var b=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,a,c);if(a.isTool){b.push(a);b[a.type]=a}},onAdded:function(a,c,b){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,a,c,b)},onRemoved:function(a,c,b){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,a,c,b)},setDock:function(e){var a=this,c=a.getTitle(),b=a.getTitleRotation(),d=c.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,e);if(b==='default'){b=a.vertical?1:0;if(b!==d){c.setRotation(b)}if(a.rendered){a.resetItemMargins()}}Ext.resumeLayouts(!0)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(a,b){this.getTitle().setIconAlign(a)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(a,b){if(!b){this.insert(this.getTitlePosition(),a);this._titleInItems=!0}this.titleCmp=a},updateTitleAlign:function(a,b){this.getTitle().setTextAlign(a)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==='default'){a=this.vertical?1:0}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(c,a){var b='.'+Ext.panel.Tool.prototype.baseCls;if(!a.getTarget(b)){this.fireEvent(c,this,a)}},getFramingInfoCls:function(){var a=this,c=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),b=a.ownerCt;if(!a.expanding&&b&&(b.collapsed||a.isCollapsedExpander)){c+='-'+b.collapsedCls}return c+'-'+a.dock},onClick:function(a){this.fireClickEvent('click',a)},onDblClick:function(a){this.fireClickEvent('dblclick',a)},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);if(a===this){c.preventDefault()}else {this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(l){var c=this,j=c.items,i=j.items,h=c.getTitlePosition(),k=i.length,g=j.generation,f=c.syncBeforeAfterGen,e,d,b,a;if(!l&&f===g){return}c.syncBeforeAfterGen=g;for(b=0;b<k;++b){a=i[b];e=a.afterTitleCls||(a.afterTitleCls=a.baseCls+'-after-title');d=a.beforeTitleCls||(a.beforeTitleCls=a.baseCls+'-before-title');if(!c.title||b<h){if(f){a.removeCls(e)}a.addCls(d)}else {if(b>h){if(f){a.removeCls(d)}a.addCls(e)}}}},syncNoBorderCls:function(){var a=this,b=this.ownerCt,c=a.headerCls+'-noborder';if(b?b.border===!1&&!b.frame:a.border===!1){a.addCls(c)}else {a.removeCls(c)}}}},0,['header'],['component','box','container','header'],{'component':!0,'box':!0,'container':!0,'header':!0},['widget.header'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,'Header'],0);Ext.cmd.derive('Ext.dd.DragDrop',Ext.Base,{constructor:function(a,c,b){if(a){this.init(a,c,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:'mousedown',b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(b,a){},b4DragOver:function(a){},onDragOver:function(b,a){},b4DragOut:function(a){},onDragOut:function(b,a){},b4DragDrop:function(a){},onDragDrop:function(b,a){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(j,a,k){if(Ext.isNumber(a)){a={left:a,right:a,top:a,bottom:a}}a=a||this.defaultPadding;var c=Ext.get(this.getEl()).getBox(),e=Ext.get(j),i=e.getScroll(),b,d=e.dom,h,g,f;if(d===document.body){b={x:i.left,y:i.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else {h=e.getXY();b={x:h[0],y:h[1],width:d.clientWidth,height:d.clientHeight}}g=c.y-b.y;f=c.x-b.x;this.resetConstraints();this.setXConstraint(f-(a.left||0),b.width-f-c.width-(a.right||0),this.xTickSize);this.setYConstraint(g-(a.top||0),b.height-g-c.height-(a.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,d,c){var a=this;a.el=a.el||Ext.get(b);a.initTarget(b,d,c);Ext.get(a.id).on(a.triggerEvent,a.handleMouseDown,a)},initTarget:function(a,b,c){this.config=c||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof a!=='string'){a=Ext.id(a)}this.id=a;this.addToGroup(b?b:'default');this.handleElId=a;this.setDragElId(a);this.invalidHandleTypes={A:'A'};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==!1;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0;this.resetConstraints();this.onAvailable()},setPadding:function(a,b,c,d){if(!b&&0!==b){this.padding=[a,a,a,a]}else {if(!c&&0!==c){this.padding=[a,b,a,b]}else {this.padding=[a,b,c,d]}}},setInitPosition:function(e,f){var d=this.getEl(),b,c,a;if(!this.DDMInstance.verifyEl(d)){return}b=e||0;c=f||0;a=Ext.fly(d).getXY();this.initPageX=a[0]-b;this.initPageY=a[1]-c;this.lastPageX=a[0];this.lastPageY=a[1];this.setStartPosition(a)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=!0;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=='string'){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=='string'){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=!0},unreg:function(){var a=this,b;if(a._domRef){b=Ext.fly(a.id);if(b){b.un(a.triggerEvent,a.handleMouseDown,a)}}a._domRef=null;a.DDMInstance._remove(a,a.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(b,c){var a=this;if(a.primaryButtonOnly&&b.button||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(b.getPoint(),a)){if(a.clickValidator(b)){a.setStartPosition();a.b4MouseDown(b);a.onMouseDown(b);a.DDMInstance.handleMouseDown(b,a);a.DDMInstance.stopEvent(b)}}},clickValidator:function(b){var a=b.getTarget();return this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id))},addInvalidHandleType:function(b){var a=b.toUpperCase();this.invalidHandleTypes[a]=a},addInvalidHandleId:function(a){if(typeof a!=='string'){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=='string'){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(c){var b=this.invalidHandleClasses,d=b.length,a;for(a=0;a<d;++a){if(b[a]===c){delete b[a]}}},isValidHandleChild:function(b){var a=!0,d,c,e;try{d=b.nodeName.toUpperCase()}catch(f){d=b.nodeName}a=a&&!this.invalidHandleTypes[d];a=a&&!this.invalidHandleIds[b.id];for(c=0,e=this.invalidHandleClasses.length;a&&c<e;++c){a=!Ext.fly(b).hasCls(this.invalidHandleClasses[c])}return a},setXTicks:function(d,c){this.xTicks=[];this.xTickSize=c;var b={},a;for(a=this.initPageX;a>=this.minX;a=a-c){if(!b[a]){this.xTicks[this.xTicks.length]=a;b[a]=!0}}for(a=this.initPageX;a<=this.maxX;a=a+c){if(!b[a]){this.xTicks[this.xTicks.length]=a;b[a]=!0}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,c){this.yTicks=[];this.yTickSize=c;var b={},a;for(a=this.initPageY;a>=this.minY;a=a-c){if(!b[a]){this.yTicks[this.yTicks.length]=a;b[a]=!0}}for(a=this.initPageY;a<=this.maxY;a=a+c){if(!b[a]){this.yTicks[this.yTicks.length]=a;b[a]=!0}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=!0},clearConstraints:function(){this.constrainX=!1;this.constrainY=!1;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(c,b,a){this.topConstraint=c;this.bottomConstraint=b;this.minY=this.initPageY-c;this.maxY=this.initPageY+b;if(a){this.setYTicks(this.initPageY,a)}this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var a=this.maintainOffset?this.lastPageX-this.initPageX:0,b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else {this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(d,a){if(!a){return d}else {if(a[0]>=d){return a[0]}else {var b,g,c,e,f;for(b=0,g=a.length;b<g;++b){c=b+1;if(a[c]&&a[c]>=d){e=d-a[b];f=a[c]-d;return f>e?a[b]:a[c]}}return a[a.length-1]}}},toString:function(){return 'DragDrop '+this.id}},3,0,0,0,0,0,[Ext.dd,'DragDrop'],0);Ext.cmd.derive('Ext.dd.DD',Ext.dd.DragDrop,{constructor:function(a,c,b){if(a){this.init(a,c,b)}},scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a;this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(d,j,k){var a=this.getTargetCoord(j,k),c=d.dom?d:Ext.fly(d,'_dd'),e=c.getSize(),i=Ext.Element,b,g,f,h;if(!this.deltaSetXY){b=this.cachedViewportSize={width:i.getDocumentWidth(),height:i.getDocumentHeight()};g=[Math.max(0,Math.min(a.x,b.width-e.width)),Math.max(0,Math.min(a.y,b.height-e.height))];c.setXY(g);f=this.getLocalX(c);h=c.getLocalY();this.deltaSetXY=[f-a.x,h-a.y]}else {b=this.cachedViewportSize;this.setLocalXY(c,Math.max(0,Math.min(a.x+this.deltaSetXY[0],b.width-e.width)),Math.max(0,Math.min(a.y+this.deltaSetXY[1],b.height-e.height)))}this.cachePosition(a.x,a.y);this.autoScroll(a.x,a.y,d.offsetHeight,d.offsetWidth);return a},cachePosition:function(b,c){if(b){this.lastPageX=b;this.lastPageY=c}else {var a=Ext.fly(this.getEl()).getXY();this.lastPageX=a[0];this.lastPageY=a[1]}},autoScroll:function(e,f,m,n){if(this.scroll){var g=Ext.Element.getViewportHeight(),h=Ext.Element.getViewportWidth(),b=this.DDMInstance.getScrollTop(),a=this.DDMInstance.getScrollLeft(),l=m+f,j=n+e,k=g+b-f-this.deltaY,i=h+a-e-this.deltaX,d=40,c=document.all?80:30;if(l>g&&k<d){window.scrollTo(a,b+c)}if(f<b&&b>0&&f-b<d){window.scrollTo(a,b-c)}if(j>h&&i<d){window.scrollTo(a+c,b)}if(e<a&&a>0&&e-a<d){window.scrollTo(a-c,b)}}},getTargetCoord:function(c,d){var a=c-this.deltaX,b=d-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(b<this.minY){b=this.minY}if(b>this.maxY){b=this.maxY}}a=this.getTick(a,this.xTicks);b=this.getTick(b,this.yTicks);return {x:a,y:b}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=this.config.scroll!==!1},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return 'DD '+this.id},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(a,b,c){a.setLocalXY(b,c)}},3,0,0,0,0,0,[Ext.dd,'DD'],0);Ext.define('Ext.rtl.dd.DD',{override:'Ext.dd.DD',getLocalX:function(a){return Ext.rootInheritedState.rtl?a.rtlGetLocalX():a.getLocalX()},setLocalXY:function(a,b,c){if(Ext.rootInheritedState.rtl){a.rtlSetLocalXY(b,c)}else {a.setLocalXY(b,c)}}});Ext.cmd.derive('Ext.dd.DDProxy',Ext.dd.DD,{statics:{dragElId:'ygddfdiv'},constructor:function(a,c,b){if(a){this.init(a,c,b);this.initFrame()}},resizeFrame:!0,centerFrame:!1,createFrame:function(){var d=this,c=document.body,a,b;if(!c||!c.firstChild){Ext.defer(function(){d.createFrame()},50);return}a=this.getDragEl();if(!a){a=document.createElement('div');a.id=this.dragElId;a.setAttribute('role','presentation');b=a.style;b.position='absolute';b.visibility='hidden';b.cursor='move';b.border='2px solid #aaa';b.zIndex=999;c.insertBefore(a,c.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==!1;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(d,e){var a=this,b=a.getDragEl(),c=b.style;a._resizeProxy();if(a.centerFrame){a.setDelta(Math.round(parseInt(c.width,10)/2),Math.round(parseInt(c.height,10)/2))}a.setDragElPos(d,e);Ext.fly(b).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(d){var a=d.getXY(),b=a[0],c=a[1];this.autoOffset(b,c);this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility='';this.beforeMove();b.style.visibility='hidden';Ext.dd.DDM.moveToEl(b,a);a.style.visibility='hidden';b.style.visibility='';this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return 'DDProxy '+this.id}},3,0,0,0,0,0,[Ext.dd,'DDProxy'],0);Ext.cmd.derive('Ext.dd.StatusProxy',Ext.Component,{animRepair:!1,childEls:['ghost'],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:'x-dd-drag-repair',ariaRole:'presentation',skipLayout:!0,constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:'visibility',hidden:!0,floating:!0,id:b.id||Ext.id(),cls:'x-dd-drag-proxy '+this.dropNotAllowed,shadow:a.shadow||!1,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:'x-dd-drop-ok',dropNotAllowed:'x-dd-drop-nodrop',setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!==a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(c){var a=this,b='x-dd-drag-proxy ';a.el.replaceCls(b+a.dropAllowed,b+a.dropNotAllowed);a.dropStatus=a.dropNotAllowed;if(c){a.ghost.setHtml('')}},update:function(a){if(typeof a==='string'){this.ghost.setHtml(a)}else {this.ghost.setHtml('');a.style.margin='0';this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle('float','none')}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(!0)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(b,c,d){var a=this;a.callback=c;a.scope=d;if(b&&a.animRepair!==!1){a.el.addCls(a.repairCls);a.el.setUnderlaysVisible(!1);a.anim=a.el.animate({duration:a.repairDuration||500,easing:'ease-out',to:{x:b[0],y:b[1]},stopAnimation:!0,callback:a.afterRepair,scope:a})}else {a.afterRepair()}},afterRepair:function(){var a=this;a.hide(!0);a.el.removeCls(a.repairCls);if(typeof a.callback==='function'){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,['component','box'],{'component':!0,'box':!0},0,0,[Ext.dd,'StatusProxy'],0);Ext.cmd.derive('Ext.dd.DragSource',Ext.dd.DDProxy,{dropAllowed:'x-dd-drop-ok',dropNotAllowed:'x-dd-drop-nodrop',animRepair:!0,repairHighlightColor:'c3daf9',constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+'-drag-status-proxy',animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0});this.dragging=!1},getDragData:function(a){return this.dragData},onDragEnter:function(c,b){var a=Ext.dd.DragDropManager.getDDById(b),d;this.cachedTarget=a;if(this.beforeDragEnter(a,c,b)!==!1){if(a.isNotifyTarget){d=a.notifyEnter(this,c,this.dragData);this.proxy.setStatus(d)}else {this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(a,c,b)}}},beforeDragEnter:function(a,c,b){return !0},onDragOver:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b),d;if(this.beforeDragOver(a,c,b)!==!1){if(a.isNotifyTarget){d=a.notifyOver(this,c,this.dragData);this.proxy.setStatus(d)}if(this.afterDragOver){this.afterDragOver(a,c,b)}}},beforeDragOver:function(a,c,b){return !0},onDragOut:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);if(this.beforeDragOut(a,c,b)!==!1){if(a.isNotifyTarget){a.notifyOut(this,c,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,c,b)}}this.cachedTarget=null},beforeDragOut:function(a,c,b){return !0},onDragDrop:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);if(this.beforeDragDrop(a,c,b)!==!1){if(a.isNotifyTarget){if(a.notifyDrop(this,c,this.dragData)!==!1){this.onValidDrop(a,c,b)}else {this.onInvalidDrop(a,c,b)}}else {this.onValidDrop(a,c,b)}if(this.afterDragDrop){this.afterDragDrop(a,c,b)}}delete this.cachedTarget},beforeDragDrop:function(a,c,b){return !0},onValidDrop:function(a,c,b){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(a,c,b)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==!1){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=!1},beforeInvalidDrop:function(a,c,b){return !0},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==!1){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return !0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(!0);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=!1;this.dragging=!0;this.proxy.update('');this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(b,c){var a=this.el.dom.cloneNode(!0);a.id=Ext.id();this.proxy.update(a);this.onStartDrag(b,c);return !0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(!0);this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,'DragSource'],0);Ext.cmd.derive('Ext.panel.Proxy',Ext.Base,{alternateClassName:'Ext.dd.PanelProxy',moveOnDrag:!0,constructor:function(c,b){var a=this;a.panel=c;a.id=a.panel.id+'-ddproxy';Ext.apply(a,b)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var a=this,b;if(!a.ghost){b=a.panel.getSize();a.panel.el.setVisibilityMode(Ext.Element.DISPLAY);a.ghost=a.panel.ghost();if(a.insertProxy){a.proxy=a.panel.el.insertSibling({role:'presentation',cls:'x-panel-dd-spacer'});a.proxy.setSize(b)}}},repair:function(c,a,b){this.hide();Ext.callback(a,b||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,'Proxy',Ext.dd,'PanelProxy'],0);Ext.cmd.derive('Ext.panel.DD',Ext.dd.DragSource,{constructor:function(b,c){var a=this;a.panel=b;a.dragData={panel:b};a.panelProxy=new Ext.panel.Proxy(b,c);a.proxy=a.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,b.el,c);a.setupEl(b)},setupEl:function(c){var a=this,b=c.header,d=c.body;if(b){a.setHandleElId(b.id);d=b.el}if(d){d.setStyle('cursor','move');a.scroll=!1}else {c.on('boxready',a.setupEl,a,{single:!0})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(b){var a=b.getXY(),c=a[0],d=a[1];this.autoOffset(c,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return !0},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(d,b,c){var a=this;if(a.beforeInvalidDrop(d,b,c)!==!1){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,c)}}}},1,0,0,0,0,0,[Ext.panel,'DD'],0);Ext.cmd.derive('Ext.layout.component.Dock',Ext.layout.component.Component,{alternateClassName:'Ext.layout.component.AbstractDock',type:'dock',horzAxisProps:{name:'horz',oppositeName:'vert',dockBegin:'left',dockEnd:'right',horizontal:!0,marginBegin:'margin-left',maxSize:'maxWidth',minSize:'minWidth',pos:'x',setSize:'setWidth',shrinkWrapDock:'shrinkWrapDockWidth',size:'width',sizeModel:'widthModel'},vertAxisProps:{name:'vert',oppositeName:'horz',dockBegin:'top',dockEnd:'bottom',horizontal:!1,marginBegin:'margin-top',maxSize:'maxHeight',minSize:'minHeight',pos:'y',setSize:'setHeight',shrinkWrapDock:'shrinkWrapDockHeight',size:'height',sizeModel:'heightModel'},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var a=this,b,c;Ext.layout.component.Component.prototype.finishRender.call(this);b=a.getRenderTarget();c=a.getDockedItems();a.finishRenderItems(b,c)},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},noBorderClasses:['x-docked-noborder-top','x-docked-noborder-right','x-docked-noborder-bottom','x-docked-noborder-left'],noBorderClassesSides:{top:'x-docked-noborder-top',right:'x-docked-noborder-right',bottom:'x-docked-noborder-bottom',left:'x-docked-noborder-left'},borderWidthProps:{top:'border-top-width',right:'border-right-width',bottom:'border-bottom-width',left:'border-left-width'},_itemCls:'x-docked',handleItemBorders:function(){var c=this,b=c.owner,a,l,k=c.lastDockedItems,j=c.borders,m=b.dockedItems.generation,i=c.noBorderClassesSides,n=c.borderWidthProps,f,h,d,g,e,o=c.collapsed;if(c.initializedBorders===m||b.border&&!b.manageBodyBorders||b.collapsed&&b.collapseMode==='mini'){return}c.initializedBorders=m;c.collapsed=!1;c.lastDockedItems=l=c.getLayoutItems();c.collapsed=o;a={top:[],right:[],bottom:[],left:[]};for(f=0,h=l.length;f<h;f++){d=l[f];g=d.dock;if(d.ignoreBorderManagement){continue}if(!a[g].satisfied){a[g].push(d);a[g].satisfied=!0}if(!a.top.satisfied&&g!=='bottom'){a.top.push(d)}if(!a.right.satisfied&&g!=='left'){a.right.push(d)}if(!a.bottom.satisfied&&g!=='top'){a.bottom.push(d)}if(!a.left.satisfied&&g!=='right'){a.left.push(d)}}if(k){for(f=0,h=k.length;f<h;f++){d=k[f];if(!d.destroyed&&!d.ignoreBorderManagement&&!b.manageBodyBorders){d.removeCls(c.noBorderClasses)}}}if(j){for(e in j){if(b.manageBodyBorders&&j[e].satisfied){b.setBodyStyle(n[e],'')}}}for(e in a){h=a[e].length;if(!b.manageBodyBorders){for(f=0;f<h;f++){a[e][f].addCls(i[e])}if(!a[e].satisfied&&!b.bodyBorder||b.bodyBorder===!1){b.addBodyCls(i[e])}else {b.removeBodyCls(i[e])}}else {if(a[e].satisfied){b.setBodyStyle(n[e],'1px')}}}c.borders=a},beforeLayoutCycle:function(a){var g=this,e=g.owner,f=g.sizeModels.shrinkWrap,b=e.shrinkWrapDock,c,d;if(e.collapsed){if(e.collapsedVertical()){d=!0;a.measureDimensions=1}else {c=!0;a.measureDimensions=2}}a.collapsedVert=d;a.collapsedHorz=c;if(d){a.heightModel=f}else {if(c){a.widthModel=f}}b=b===!0?3:b||0;a.shrinkWrapDockHeight=b&1&&a.heightModel.shrinkWrap;a.shrinkWrapDockWidth=b&2&&a.widthModel.shrinkWrap},beginLayout:function(a){var c=this,e=c.owner,l=c.getLayoutItems(),n=a.context,m=l.length,j=c.lastCollapsedState,k,g,f,d,b,h,i;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);h=e.getCollapsed();if(h!==j&&j!==undefined){if(c.owner.collapsed){a.isCollapsingOrExpanding=1;e.addClsWithUI(e.collapsedCls)}else {a.isCollapsingOrExpanding=2;e.removeClsWithUI(e.collapsedCls);a.lastCollapsedState=c.lastCollapsedState}}c.lastCollapsedState=h;a.dockedItems=k=[];for(g=0;g<m;g++){f=l[g];if(f.rendered){i=f.dock;d=n.getCmp(f);d.dockedAt={x:0,y:0};d.offsets=b=Ext.Element.parseBox(f.offsets||0);d.horizontal=i==='top'||i==='bottom';b.width=b.left+b.right;b.height=b.top+b.bottom;k.push(d)}}a.bodyContext=a.getEl('body')},beginLayoutCycle:function(a){var c=this,i=a.dockedItems,j=i.length,b=c.owner,d=b.frameBody,h=c.lastHeightModel,e,g,f;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(c.owner.manageHeight){if(c.lastBodyDisplay){b.body.dom.style.display=c.lastBodyDisplay=''}}else {if(c.lastBodyDisplay!=='inline-block'){b.body.dom.style.display=c.lastBodyDisplay='inline-block'}if(h&&h.shrinkWrap&&!a.heightModel.shrinkWrap){b.body.dom.style.marginBottom=''}}if(a.widthModel.auto){if(a.widthModel.shrinkWrap){b.el.setWidth(null)}b.body.setWidth(null);if(d){d.setWidth(null)}}if(a.heightModel.auto){b.body.setHeight(null);if(d){d.setHeight(null)}}if(a.collapsedVert){a.setContentHeight(0)}else {if(a.collapsedHorz){a.setContentWidth(0)}}for(e=0;e<j;e++){g=i[e].target;f=g.dock;if(f==='right'){g.setLocalX(0)}else {if(f!=='left'){continue}}}},calculate:function(a){var b=this,l=b.measureAutoDimensions(a,a.measureDimensions),j=a.state,e=j.horzDone,f=j.vertDone,g=a.bodyContext,k,c,d,i,h;a.borderInfo||a.getBorderInfo();a.paddingInfo||a.getPaddingInfo();a.frameInfo||a.getFrameInfo();g.borderInfo||g.getBorderInfo();g.paddingInfo||g.getPaddingInfo();if(!a.frameBorder){if(!(k=a.framing)){a.frameBorder=a.borderInfo;a.framePadding=a.paddingInfo}else {a.frameBorder=k.border;a.framePadding=k.padding}}c=!e&&b.createAxis(a,l.contentWidth,a.widthModel,b.horzAxisProps,a.collapsedHorz);d=!f&&b.createAxis(a,l.contentHeight,a.heightModel,b.vertAxisProps,a.collapsedVert);for(i=0,h=a.dockedItems.length;h--;++i){if(c){b.dockChild(a,c,h,i)}if(d){b.dockChild(a,d,h,i)}}if(c&&b.finishAxis(a,c)){j.horzDone=e=c}if(d&&b.finishAxis(a,d)){j.vertDone=f=d}if(e&&f&&b.finishConstraints(a,e,f)){b.finishPositions(a,e,f)}else {b.done=!1}},createAxis:function(b,s,d,a,k){var r=this,e=0,q=r.owner,n=q[a.maxSize],o=q[a.minSize]||0,f=a.dockBegin,h=a.dockEnd,p=a.pos,g=a.size,m=n!=null,t=d.shrinkWrap,l,i,j,c;if(t){if(k){c=0}else {l=b.bodyContext;c=s+l.borderInfo[g]}}else {i=b.frameBorder;j=b.framePadding;e=i[f]+j[f];c=b.getProp(g)-(i[h]+j[h])}return {shrinkWrap:d.shrinkWrap,sizeModel:d,initialBegin:e,begin:e,end:c,collapsed:k,horizontal:a.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:c-e,maxChildSize:0,hasMinMaxConstraints:(o||m)&&d.shrinkWrap,minSize:o,maxSize:m?n:1000000000,bodyPosProp:r.owner.manageHeight?p:a.marginBegin,dockBegin:f,dockEnd:h,posProp:p,sizeProp:g,setSize:a.setSize,shrinkWrapDock:b[a.shrinkWrapDock],sizeModelName:a.sizeModel,dockedPixelsEnd:0}},dockChild:function(c,a,j,k){var f=this,b=c.dockedItems[a.shrinkWrap?j:k],d=b.target,h=d.dock,g=a.sizeProp,e,i;if(d.ignoreParentFrame&&c.isCollapsingOrExpanding){b.clearMarginCache()}if(!b.marginInfo){b.getMarginInfo()}if(h===a.dockBegin){if(a.shrinkWrap){e=f.dockOutwardBegin(c,b,d,a)}else {e=f.dockInwardBegin(c,b,d,a)}}else {if(h===a.dockEnd){if(a.shrinkWrap){e=f.dockOutwardEnd(c,b,d,a)}else {e=f.dockInwardEnd(c,b,d,a)}}else {if(a.shrinkWrapDock){i=b.getProp(g)+b.marginInfo[g];a.maxChildSize=Math.max(a.maxChildSize,i);e=0}else {e=f.dockStretch(c,b,d,a)}}}b.dockedAt[a.posProp]=e},dockInwardBegin:function(g,b,e,a){var j=a.begin,h=a.sizeProp,f=e.ignoreParentFrame,c,i,d;if(f){a.ignoreFrameBegin=b;d=e.dock;c=g.frameBorder[d];j-=c+g.framePadding[d]}if(!e.overlay){i=b.getProp(h)+b.marginInfo[h];a.begin+=i;if(f){a.begin-=c}}return j},dockInwardEnd:function(f,c,b,a){var g=a.sizeProp,h=c.getProp(g)+c.marginInfo[g],e=a.end-h,d;if(!b.overlay){a.end=e}if(b.ignoreParentFrame){a.ignoreFrameEnd=c;d=f.frameBorder[b.dock];e+=d+f.framePadding[b.dock];a.end+=d}return e},dockOutwardBegin:function(g,b,e,a){var c=a.begin,d=a.sizeProp,f;if(a.collapsed){a.ignoreFrameBegin=a.ignoreFrameEnd=b}else {if(e.ignoreParentFrame){a.ignoreFrameBegin=b}}if(!e.overlay){f=b.getProp(d)+b.marginInfo[d];c-=f;a.begin=c}return c},dockOutwardEnd:function(g,b,e,a){var f=a.end,d=a.sizeProp,c;c=b.getProp(d)+b.marginInfo[d];if(a.collapsed){a.ignoreFrameBegin=a.ignoreFrameEnd=b}else {if(e.ignoreParentFrame){a.ignoreFrameEnd=b}}if(!e.overlay){a.end=f+c;a.dockedPixelsEnd+=c}return f},dockStretch:function(h,c,f,a){var n=f.dock,e=a.sizeProp,i=n==='top'||n==='bottom',l=h.frameBorder,j=c.offsets,k=h.framePadding,o=i?'right':'bottom',d=i?'left':'top',g=a.begin+j[d],m,b;if(f.stretch!==!1){b=a.end-g-j[o];if(f.ignoreParentFrame){g-=k[d]+l[d];b+=k[e]+l[e]}m=c.marginInfo;b-=m[e];c[a.setSize](b)}return g},finishAxis:function(h,a){if(isNaN(a.maxChildSize)){return !1}var g=a.begin,e=a.end-g,l=a.collapsed,v=a.setSize,k=a.dockBegin,s=a.dockEnd,n=h.framePadding,t=h.frameBorder,b=t[k],i=h.framing,j=i&&i[k],f=l?0:n[k],w=a.sizeProp,p=a.ignoreFrameBegin,q=a.ignoreFrameEnd,r=h.bodyContext,o=Math.max(b+f-j,0),c,m,d,u;if(a.shrinkWrap){m=a.initialSize;if(i){d=-g+b+f;c=d-j-o}else {c=-g;d=c+f}if(!l){e+=n[w]}if(p){d-=b;c-=b;p.dockedAt[a.posProp]-=f}else {e+=b}if(l){}else {if(q){q.dockedAt[a.posProp]+=n[s]}else {e+=t[s]}}a.size=e;if(!a.horizontal&&!this.owner.manageHeight){u=!1}}else {if(i){d=0;c=g-j-o}else {d=-b;c=g-f-b}m=e}a.delta=d;r[v](m,u);r.setProp(a.bodyPosProp,c);return !isNaN(e)},beforeInvalidateShrinkWrapDock:function(b,c){var a=c.axis.sizeModelName;if(!b[a].constrainedMin){b[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(a,c){var b=c.axis,e=c.layout,d;if(a[b.sizeModelName].calculated){d=e.dockStretch(c.ownerContext,a,a.target,b);a.setProp(b.posProp,b.delta+d)}},finishConstraints:function(a,g,e){var o=this,i=o.sizeModels,q=g.shrinkWrap,p=e.shrinkWrap,n=o.owner,r,l,m,c,b,d,k,j,f,h;if(q){d=g.size;k=g.collapsed?0:g.minSize;j=g.maxSize;f=g.maxChildSize;h=Math.max(d,f);if(h>j){b=i.constrainedMax;m=j}else {if(h<k){b=i.constrainedMin;m=k}else {if(d<f){b=i.constrainedDock;n.dockConstrainedWidth=m=f}else {m=d}}}}if(p){d=e.size;k=e.collapsed?0:e.minSize;j=e.maxSize;f=e.maxChildSize;h=Math.max(d,f+d-e.initialSize);if(h>j){c=i.constrainedMax;l=j}else {if(h<k){c=i.constrainedMin;l=k}else {if(d<f){c=i.constrainedDock;n.dockConstrainedHeight=l=f}else {if(!a.collapsedVert&&!n.manageHeight){r=!1;a.bodyContext.setProp('margin-bottom',e.dockedPixelsEnd)}l=d}}}}if(b||c){if(b&&c&&b.constrainedMax&&c.constrainedByMin){a.invalidate({widthModel:b});return !1}if(!a.widthModel.calculatedFromShrinkWrap&&!a.heightModel.calculatedFromShrinkWrap){a.invalidate({widthModel:b,heightModel:c});return !1}}else {o.invalidateAxes(a,g,e)}if(q){a.setWidth(m);if(b){a.widthModel=b}}if(p){a.setHeight(l,r);if(c){a.heightModel=c}}return !0},invalidateAxes:function(l,b,a){var p=this.beforeInvalidateShrinkWrapDock,q=this.afterInvalidateShrinkWrapDock,m=b.end-b.begin,n=a.initialSize,k=b.shrinkWrapDock&&b.maxChildSize<=m,h=a.shrinkWrapDock&&a.maxChildSize<=n,i,o,g,c,e,j,d,f;if(k||h){if(h){a.begin=a.initialBegin;a.end=a.begin+a.initialSize}i=l.dockedItems;for(g=0,o=i.length;g<o;++g){c=i[g];j=c.horizontal;d=null;if(k&&j){f=b.sizeProp;e=m;d=b}else {if(h&&!j){f=a.sizeProp;e=n;d=a}}if(d){e-=c.getMarginInfo()[f];if(e!==c.props[f]){c.invalidate({before:p,after:q,axis:d,ownerContext:l,layout:this})}}}}},finishPositions:function(d,h,i){var c=d.dockedItems,g=c.length,e=h.delta,f=i.delta,b,a;for(b=0;b<g;++b){a=c[b];a.setProp('x',e+a.dockedAt.x);a.setProp('y',f+a.dockedAt.y)}},finishedLayout:function(a){var c=this,b=a.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!a.animatePolicy){if(a.isCollapsingOrExpanding===1){b.afterCollapse(!1)}else {if(a.isCollapsingOrExpanding===2){b.afterExpand(!1)}}}},getAnimatePolicy:function(b){var d=this,a,c;if(b.isCollapsingOrExpanding===1){a=d.lastCollapsedState}else {if(b.isCollapsingOrExpanding===2){a=b.lastCollapsedState}}if(a==='left'||a==='right'){c=d.horizontalCollapsePolicy}else {if(a==='top'||a==='bottom'){c=d.verticalCollapsePolicy}}return c},getDockedItems:function(c,k){var d=this,i=c==='visual',a=i?Ext.ComponentQuery.query('[rendered]',d.owner.dockedItems.items):d.owner.dockedItems.items,f=a&&a.length&&c!==!1,j,h,b,e,g,l;if(k==null){b=f&&!i?a.slice():a}else {b=[];for(e=0,l=a.length;e<l;++e){h=a[e].dock;g=h==='top'||h==='left';if(k?g:!g){b.push(a[e])}}f=f&&b.length}if(f){j=(c=c||'render')==='render';Ext.Array.sort(b,function(e,f){var a,b;if(j&&(a=d.owner.dockOrder[e.dock])!==(b=d.owner.dockOrder[f.dock])){if(!(a+b)){return a-b}}a=d.getItemWeight(e,c);b=d.getItemWeight(f,c);if(a!==undefined&&b!==undefined){return a-b}return 0})}return b||[]},getItemWeight:function(b,c){var a=b.weight||this.owner.defaultDockWeights[b.dock];return a[c]||a},getLayoutItems:function(){var e=this,c,f,d,b,a;if(e.owner.collapsed){a=e.owner.getCollapsedDockedItems()}else {c=e.getDockedItems('visual');f=c.length;a=[];for(b=0;b<f;b++){d=c[b];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(b){var a=b.bodyContext;return a.el.getWidth()-a.getBorderInfo().width},measureContentHeight:function(b){var a=b.bodyContext;return a.el.getHeight()-a.getBorderInfo().height},redoLayout:function(b){var c=this,a=c.owner;if(b.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);b.redo(!0)}else {if(b.isCollapsingOrExpanding===2){a.removeClsWithUI(a.collapsedCls);b.bodyContext.redo()}}},renderChildren:function(){var a=this,c=a.getDockedItems(),b=a.getRenderTarget();a.handleItemBorders();a.renderItems(c,b)},renderItems:function(m,l){var f=this,g=f.owner,p={},h=m.length,k=g.body,r=!!g.frameSize,q=g.bodyContainer,j,i,o,c,n,a,b,e,d;if(h){for(a=0;a<h;a++){b=m[a];p[b.id]=b}i=f.getRenderTarget().dom.childNodes;o=i.length;n=0;for(a=0;a<o;++a){c=i[a];if(r){d=c===k.dom||c===q;if(!d&&Ext.fly(c).contains(k)){d=!0;g.bodyContainer=c}}else {d=c===k.dom}if(d){j=a;break}if(p[c.id]){++n}}j-=n;for(a=0;a<h;++a){b=m[a];e=j+a;if(b.dock==='right'||b.dock==='bottom'){++e}if(!b.rendered){f.renderItem(b,l,e)}else {if(!f.isValidParent(b,l,e)){f.moveItem(b,l,e)}}}}},undoLayout:function(b){var c=this,a=c.owner;if(b.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);b.undo(!0)}else {if(b.isCollapsingOrExpanding===2){a.addClsWithUI(a.collapsedCls);b.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(g,c){var f=this,b=f.sizePolicy,a=f.owner.shrinkWrapDock,e,d;if(g.stretch===!1){return b.nostretch}e=g.dock;d=e==='left'||e==='right';a=a===!0?3:a||0;if(d){b=b.vert;a=a&1}else {b=b.horz;a=a&2}if(a){if(!c){c=f.owner.getSizeModel()}if(c[d?'height':'width'].shrinkWrap){return b.shrinkWrap}}return b.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return 'docked-'+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var f=this,b=f.borderCollapseMap,e=f.owner,a=e.baseCls,d=e.ui,c;b=b[a]||(b[a]={});c=b[d];if(!c){a+='-'+d+'-outer-border-';b[d]=c=[0,a+'l',a+'b',a+'bl',a+'r',a+'rl',a+'rb',a+'rbl',a+'t',a+'tl',a+'tb',a+'tbl',a+'tr',a+'trl',a+'trb',a+'trbl']}return c}},0,0,0,0,['layout.dock'],0,[Ext.layout.component,'Dock',Ext.layout.component,'AbstractDock'],0);Ext.define('Ext.rtl.layout.component.Dock',{override:'Ext.layout.component.Dock',rtlPositions:{top:'top',right:'left',bottom:'bottom',left:'right'},getDockCls:function(a){return 'docked-'+(this.owner.getInherited().rtl?this.rtlPositions[a]:a)},getBorderClassTable:function(){var a=this;if(!a.borderTablesInited){a.initBorderTables()}return a.owner.getInherited().rtl?a.noBorderClassTableRtl:a.noBorderClassTableLtr},getBorderCollapseTable:function(){var b=this,a=arguments.callee.$previous.call(this);if(!a.rtl){b.setupBorderTable(a,a.rtl=[])}return b.owner.getInherited().rtl?a.rtl:a},initBorderTables:function(){var a=Ext.layout.component.Dock.prototype,b=a.noBorderClassTable,c=[];a.setupBorderTable(b,c);a.noBorderClassTableLtr=b;a.noBorderClassTableRtl=c;a.borderTablesInited=!0},setupBorderTable:function(a,b){b[0]=a[0];b[1]=a[4];b[2]=a[2];b[3]=a[6];b[4]=a[1];b[5]=a[5];b[6]=a[3];b[7]=a[7];b[8]=a[8];b[9]=a[12];b[10]=a[10];b[11]=a[14];b[12]=a[9];b[13]=a[13];b[14]=a[11];b[15]=a[15]}});Ext.define('Ext.theme.neptune.layout.component.Dock',{override:'Ext.layout.component.Dock',noBorderClassTable:[0,'x-noborder-l','x-noborder-b','x-noborder-bl','x-noborder-r','x-noborder-rl','x-noborder-rb','x-noborder-rbl','x-noborder-t','x-noborder-tl','x-noborder-tb','x-noborder-tbl','x-noborder-tr','x-noborder-trl','x-noborder-trb','x-noborder-trbl'],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var d=this,i=0,o=8,n=4,l=2,m=1,r=d.owner,s=r.bodyBorder,j=r.border,x=d.collapsed,y=d.edgeMasks,k=d.noBorderClassTable,v=r.dockedItems.generation,a,q,u,b,t,w,g,p,h,c,f,e;if(d.initializedBorders===v){return}f=[];e=[];q=d.getBorderCollapseTable();k=d.getBorderClassTable?d.getBorderClassTable():k;d.initializedBorders=v;d.collapsed=!1;u=d.getDockedItems('visual');d.collapsed=x;for(t=0,w=u.length;t<w;t++){g=u[t];if(g.ignoreBorderManagement){continue}p=g.dock;c=b=0;f.length=0;e.length=0;if(p!=='bottom'){if(i&o){a=g.border}else {a=j;if(a!==!1){b+=o}}if(a===!1){c+=o}}if(p!=='left'){if(i&n){a=g.border}else {a=j;if(a!==!1){b+=n}}if(a===!1){c+=n}}if(p!=='top'){if(i&l){a=g.border}else {a=j;if(a!==!1){b+=l}}if(a===!1){c+=l}}if(p!=='right'){if(i&m){a=g.border}else {a=j;if(a!==!1){b+=m}}if(a===!1){c+=m}}if((h=g.lastBorderMask)!==c){g.lastBorderMask=c;if(h){e[0]=k[h]}if(c){f[0]=k[c]}}if((h=g.lastBorderCollapse)!==b){g.lastBorderCollapse=b;if(h){e[e.length]=q[h]}if(b){f[f.length]=q[b]}}if(e.length){g.removeCls(e)}if(f.length){g.addCls(f)}i|=y[p]}c=b=0;f.length=0;e.length=0;if(i&o){a=s}else {a=j;if(a!==!1){b+=o}}if(a===!1){c+=o}if(i&n){a=s}else {a=j;if(a!==!1){b+=n}}if(a===!1){c+=n}if(i&l){a=s}else {a=j;if(a!==!1){b+=l}}if(a===!1){c+=l}if(i&m){a=s}else {a=j;if(a!==!1){b+=m}}if(a===!1){c+=m}if((h=d.lastBodyBorderMask)!==c){d.lastBodyBorderMask=c;if(h){e[0]=k[h]}if(c){f[0]=k[c]}}if((h=d.lastBodyBorderCollapse)!==b){d.lastBodyBorderCollapse=b;if(h){e[e.length]=q[h]}if(b){f[f.length]=q[b]}}if(e.length){r.removeBodyCls(e)}if(f.length){r.addBodyCls(f)}},onRemove:function(a){var d=this,c=a.lastBorderMask,b=a.lastBorderCollapse;if(!a.destroyed&&!a.ignoreBorderManagement){if(c){a.lastBorderMask=0;a.removeCls(d.noBorderClassTable[c])}if(b){a.lastBorderCollapse=0;a.removeCls(d.getBorderCollapseTable()[b])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,a)}});Ext.cmd.derive('Ext.util.Memento',Ext.Base,function(){function captureOne(d,c,a,b){d[b?b+a:a]=c[a]}function removeOne(b,c,a){delete b[a]}function restoreOne(e,f,a,b){var d=b?b+a:a,c=e[d];if(c||e.hasOwnProperty(d)){restoreValue(f,a,c)}}function restoreValue(a,c,b){if(Ext.isDefined(b)){a[c]=b}else {delete a[c]}}function doMany(f,c,e,a,d){if(c){if(Ext.isArray(a)){var b,g=a.length;for(b=0;b<g;b++){f(c,e,a[b],d)}}else {f(c,e,a,d)}}}return {data:null,target:null,constructor:function(a,b){this.data={};if(a){this.target=a;if(b){this.capture(b)}}},capture:function(d,c,b){var a=this;doMany(captureOne,a.data||(a.data={}),c||a.target,d,b)},remove:function(a){doMany(removeOne,this.data,null,a)},restore:function(a,d,c,b){doMany(restoreOne,this.data,c||this.target,a,b);if(d!==!1){this.remove(a)}},restoreAll:function(c,d){var e=this,f=d||this.target,b=e.data,a;c=c!==!1;for(a in b){if(b.hasOwnProperty(a)){restoreValue(f,a,b[a]);if(c){delete b[a]}}}}}}(),1,0,0,0,0,0,[Ext.util,'Memento'],0);Ext.cmd.derive('Ext.container.DockingContainer',Ext.Base,{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:!1,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="x-tab-guard x-tab-guard-{tabGuard}" ></div>',addDocked:function(c,d){var b=this,k=b.rendered,f=0,g=b.dockedItems,i=g.getCount(),e,h,a,j;c=b.prepareItems(c);j=c.length;if(k){Ext.suspendLayouts()}if(d===undefined){d=i}else {d=Math.min(d,i)}for(;f<j;f++){a=c[f];a.dock=a.dock||'top';if(a.dock==='left'||a.dock==='right'){b.horizontalDocks++}e=d+f;g.insert(e,a);h=!!a.instancedCmp;delete a.instancedCmp;a.onAdded(b,e,h);delete a.$initParent;if(b.onDockedAdd!==Ext.emptyFn){b.onDockedAdd(a)}if(b.hasListeners.dockedadd){b.fireEvent('dockedadd',b,a,e)}}if(b.rendered){b.updateLayout();Ext.resumeLayouts(!0)}return c},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while(b=a.first()){this.removeDocked(b,!0)}}},doRenderDockedItems:function(h,a,e){var b=a.$comp,d=b.componentLayout,c=b.tabGuard&&b.getTpl('tabGuardTpl'),f,g;if(d.getDockedItems&&!a.$skipDockedItems){if(c&&!e){a.tabGuard='before';b.addChildEl(a.tabGuardEl='tabGuardBeforeEl');c.applyOut(a,h)}f=d.getDockedItems('render',!e);g=f&&d.getItemsRenderTree(f);if(g){Ext.DomHelper.generateMarkup(g,h)}if(c&&e){a.tabGuard='after';b.addChildEl(a.tabGuardEl='tabGuardAfterEl');c.applyOut(a,h)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(b,c){var a=this.getComponentLayout().getDockedItems('render',c);if(b&&a.length){a=Ext.ComponentQuery.query(b,a)}return a},getDockingRefItems:function(e,d){var b=e&&'*,* *',a=this.getDockedItems(b,!0),c;a.push.apply(a,d);c=this.getDockedItems(b,!1);a.push.apply(a,c);return a},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.ItemCollection();if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(a,c){var b=this,d,e;c=c===!0||c!==!1&&b.autoDestroy;if(!b.dockedItems.contains(a)){return a}if(a.dock==='left'||a.dock==='right'){b.horizontalDocks--}d=b.componentLayout;e=d&&b.rendered;if(e){d.onRemove(a)}b.dockedItems.remove(a);a.onRemoved(a.destroying||c);b.onDockedRemove(a);if(c){a.destroy()}else {if(e){d.afterRemove(a)}}if(b.hasListeners.dockedremove){b.fireEvent('dockedremove',b,a)}if(!b.destroying){b.updateLayout()}return a},moveDocked:function(a,c){var b=this;if(b.rendered){Ext.suspendLayouts()}b.removeDocked(a,!1);a.dock=c;b.addDocked(a);if(b.rendered){if(a.frame){Ext.getDetachedBody().appendChild(a.el);a.updateFrame()}Ext.resumeLayouts(!0)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,'DockingContainer'],0);Ext.cmd.derive('Ext.panel.Panel',Ext.container.Container,{alternateClassName:'Ext.Panel',childEls:['body'],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="','x-','hidden-clip" style="height:0">','{headingText}','</div>','</tpl>','{% this.renderDockedItems(out,values,0); %}','<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{%this.renderContainer(out,values);%}','</div>','{% this.renderDockedItems(out,values,1); %}'],headerPosition:'top',iconAlign:'left',titleAlign:'left',titleRotation:'default',beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:'destroy',closeToolText:'Close panel',collapsed:!1,collapsedCls:'collapsed',collapseFirst:!0,collapsible:undefined,collapseToolText:'Collapse panel',expandToolText:'Expand panel',constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:'el',minButtonWidth:75,preventHeader:!1,shrinkWrapDock:!1,titleCollapse:undefined,baseCls:'x-panel',bodyPosProps:{x:'x',y:'y'},componentLayout:'dock',contentPaddingProperty:'bodyPadding',emptyArray:[],isPanel:!0,defaultBindProperty:'title',addBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.addCls(c);return a},addTool:function(b){if(!Ext.isArray(b)){b=[b]}var c=this,a=c.header,g=b.length,f=c.tools,e,d;if(!a||!a.isHeader){a=null;if(!f){c.tools=f=[]}}for(e=0;e<g;e++){d=b[e];d.toolOwner=c;if(a){a.addTool(d)}else {f.push(d)}}c.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else {if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var a=this,c=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);a.addBodyCls(['x-'+b,a.baseCls+'-body-'+b,a.baseCls+'-body-'+a.ui+'-'+b]);return c},afterCollapse:function(c){var a=this,d=a.ariaEl.dom,b=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(c){a.removeCls('x-animating-size')}if(b){b.afterCollapse(a,c)}if(d){d.setAttribute('aria-expanded',!1)}if(a.isAccordionPanel){a.body.dom.setAttribute('aria-hidden',!0)}a.setHiddenDocked();a.fireEvent('collapse',a)},afterExpand:function(c){var a=this,d=a.ariaEl.dom,b=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(c){a.removeCls('x-animating-size')}if(b){b.afterExpand(a,c)}if(d){d.setAttribute('aria-expanded',!0)}if(a.isAccordionPanel){a.body.dom.setAttribute('aria-hidden',!1)}a.fireEvent('expand',a);a.fireHierarchyEvent('expand')},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionKeyNav,a.defaultButtonKeyNav);a.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},destroy:function(){Ext.container.Container.prototype.destroy.call(this);this.dockedItems=this.bodyContainer=null},beforeRender:function(){var a=this,b;a.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);a.initTools();if(!(a.preventHeader||a.header===!1)||a.isViewportBorderChild){a.updateHeader()}a.afterHeaderInit=!0;if(a.collapsed){if(a.isPlaceHolderCollapse()){if(!a.hidden){a.setHiddenState(!0);a.preventCollapseFire=!0;a.placeholderCollapse();delete a.preventCollapseFire;b=a.collapsed;a.collapsed=!1}}else {a.beginCollapse();a.addClsWithUI(a.collapsedCls)}}if(b){a.collapsed=b}},getMemento:function(a){var b=this;if(a&&typeof a==='string'){a+='Memento';return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var a=this,g=a.lastBox,f=a.rendered,d=a.getMemento('collapse'),e=a.getSizeModel(),b=a.header,c;d.capture(['height','minHeight','width','minWidth']);if(g){d.capture(a.restoreDimension(),g,'last.')}if(a.collapsedVertical()){if(e.width.shrinkWrap){a.width=f?a.getWidth():a.width||a.minWidth||100}delete a.height;a.minHeight=0}else {if(a.collapsedHorizontal()){if(e.height.shrinkWrap){a.height=f?a.getHeight():a.height||a.minHeight||100}delete a.width;a.minWidth=0}}if(a.ownerCt){a.ownerCt.getLayout().beginCollapse(a)}if(!a.isPlaceHolderCollapse()&&b!==!1){if(b===(c=a.getReExpander())){b.collapseImmune=!0;b.getInherited().collapseImmune=!0;b.addClsWithUI(a.getHeaderCollapsedClasses(b));if(b.rendered){b.updateFrame()}}else {if(c.el){c.el.show();c.hidden=!1}}}if(a.resizer){a.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var a=this,f=a.lastBox,c=a.getMemento('collapse'),e=a.restoreDimension(),b=a.header,d;if(c){c.restore(['minHeight','minWidth',e]);if(f){c.restore(e,!0,f,'last.')}}if(a.ownerCt){a.ownerCt.getLayout().beginExpand(a)}if(!a.isPlaceHolderCollapse()&&b!==!1){if(b===(d=a.getReExpander())){delete b.collapseImmune;delete b.getInherited().collapseImmune;b.removeClsWithUI(a.getHeaderCollapsedClasses(b));if(b.rendered){b.expanding=!0;b.updateFrame();delete b.expanding}}else {d.hidden=!0;d.el.hide()}}if(a.resizer){a.resizer.enable()}},bridgeToolbars:function(){var a=this,b=[],d=a.minButtonWidth,c,e;function initToolbar(b,d,c){if(Ext.isArray(b)){b={xtype:'toolbar',items:b}}else {if(!b.xtype){b.xtype='toolbar'}}b.dock=d;if(c){b.layout=Ext.applyIf(b.layout||{},{pack:{left:'start',center:'center'}[a.buttonAlign]||'end'})}return b}if(a.tbar){b.push(initToolbar(a.tbar,'top'));a.tbar=null}if(a.bbar){b.push(initToolbar(a.bbar,'bottom'));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=initToolbar(a.fbar,'bottom',!0);c.ui='footer';if(d){e=c.defaults;c.defaults=function(c){var a=e||{},b=!c.xtype||c.isButton,f;if(!b){f=Ext.ClassManager.getByAlias('widget.'+c.xtype);if(f){b=f.prototype.isButton}}if(b&&!('minWidth' in a)){a=Ext.apply({minWidth:d},a)}return a}}b.push(c);a.fbar=null}if(a.lbar){b.push(initToolbar(a.lbar,'left'));a.lbar=null}if(a.rbar){b.push(initToolbar(a.rbar,'right'));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(b)}else {if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(b)}}else {a.dockedItems=b}},close:function(){if(this.fireEvent('beforeclose',this)!==!1){this.doClose()}},collapse:function(c,b){var a=this,f=c||a.collapseDirection,g=a.ownerCt,e=a.ownerLayout,d=a.rendered;if(a.isCollapsingOrExpanding){return a}if(arguments.length<2){b=a.animCollapse}if(a.collapsed||a.fireEvent('beforecollapse',a,c,b)===!1){return a}if(e&&e.onBeforeComponentCollapse){if(e.onBeforeComponentCollapse(a)===!1){return a}}if(d&&g&&a.isPlaceHolderCollapse()){return a.placeholderCollapse(c,b)}a.collapsed=f;if(d){a.beginCollapse()}a.getInherited().collapsed=!0;a.fireHierarchyEvent('collapse');if(d){a.doCollapseExpand(1,b)}return a},collapsedHorizontal:function(){var a=this.getCollapsed();return a==='left'||a==='right'},collapsedVertical:function(){var a=this.getCollapsed();return a==='top'||a==='bottom'},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(d){var a=this,b=a.header,c=a.frame&&!a.alwaysFramed;return {xtype:'panel',hidden:!1,header:b?{titleAlign:b.getTitleAlign()}:null,ui:c?a.ui.replace(/-framed$/,''):a.ui,id:a.id+'-ghost',renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,focusable:!1,floating:!0,shadow:!1,frame:c,shim:a.shim,alwaysFramed:a.alwaysFramed,overlapHeader:a.overlapHeader,headerPosition:a.getHeaderPosition(),titleRotation:a.getTitleRotation(),baseCls:a.baseCls,getRefOwner:function(){return a.getRefOwner()},cls:a.baseCls+'-ghost '+(d||'')}},createReExpander:function(c,h){var a=this,g=c==='left',e=c==='right',d=g||e,f=a.ownerCt,b=Ext.apply({hideMode:'offsets',title:a.getTitle(),titleAlign:a.getTitleAlign(),vertical:d,textCls:a.headerTextCls,icon:a.getIcon(),iconCls:a.getIconCls(),iconAlign:a.getIconAlign(),glyph:a.getGlyph(),baseCls:a.self.prototype.baseCls+'-header',ui:a.ui,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,indicateDrag:a.draggable,collapseImmune:!0,ariaRole:a.ariaRole,preventRefocus:!0,ownerCt:f&&a.collapseMode==='placeholder'?f:a,ownerLayout:a.componentLayout,forceOrientation:!0,margin:a.margin},h);if(a.collapseMode==='mini'){if(d){b.width=1}else {b.height=1}}if(!a.hideCollapseTool){if(g||e&&a.isPlaceHolderCollapse()){b.titlePosition=1}b.tools=[{xtype:'tool',type:'expand-'+a.getOppositeDirection(c),isDefaultExpandTool:!0,uiCls:['top'],handler:a.toggleCollapse,scope:a,tooltip:a.expandToolText}]}b=new Ext.panel.Header(b);b.addClsWithUI(a.getHeaderCollapsedClasses(b));b.expandTool=b.down('tool[isDefaultExpandTool=true]');return b},doClose:function(){this.fireEvent('close',this);this[this.closeAction]()},doCollapseExpand:function(e,b){var a=this,d=a.animCollapse,c=a.ownerLayout;a.animCollapse=b;a.isCollapsingOrExpanding=e;if(b){a.addCls('x-animating-size')}if(c&&!b){c.onContentChange(a)}else {a.updateLayout({isRoot:!0})}a.animCollapse=d;return a},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(b){var a=this,c=a.ownerLayout,d=a.rendered;if(a.isCollapsingOrExpanding){return a}if(!arguments.length){b=a.animCollapse}if(!a.collapsed&&!a.floatedFromCollapse){return a}if(a.fireEvent('beforeexpand',a,b)===!1){return a}if(c&&c.onBeforeComponentExpand){if(c.onBeforeComponentExpand(a)===!1){return a}}delete a.getInherited().collapsed;if(d&&a.isPlaceHolderCollapse()){return a.placeholderExpand(b)}a.restoreHiddenDocked();if(d){a.beginExpand()}a.collapsed=!1;if(a.rendered){a.doCollapseExpand(2,b)}return a},findReExpander:function(g){var f=this,c=Ext.Component,d=f.dockedItems.items,e=d.length,a,b;if(f.collapseMode==='mini'){return}switch(g){case c.DIRECTION_TOP:case c.DIRECTION_BOTTOM:for(b=0;b<e;b++){a=d[b];if(!a.hidden){if(a.isHeader&&(!a.dock||a.dock==='top'||a.dock==='bottom')){return a}}};break;case c.DIRECTION_LEFT:case c.DIRECTION_RIGHT:for(b=0;b<e;b++){a=d[b];if(!a.hidden){if(a.isHeader&&(a.dock==='left'||a.dock==='right')){return a}}};break;default:throw 'Panel#findReExpander must be passed a valid collapseDirection';}},floatCollapsedPanel:function(){var a=this,c=a.placeholder,d=c.getSize(),i=Ext.panel.Panel.floatCls,h=a.collapsed,g=a.ownerCt||a,f,e,b;if(a.isSliding){return}if(a.el.hasCls(i)){a.slideOutFloatedPanel();return}a.isSliding=!0;c.el.hide();c.hidden=!0;a.el.show();a.setHiddenState(!1);a.collapsed=!1;g.updateLayout();c.el.show();c.hidden=!1;a.el.hide();a.setHiddenState(!0);a.collapsed=h;g.updateLayout();b=a.getBox(!1,!0);a.slideOutTask=a.slideOutTask||new Ext.util.DelayedTask(a.slideOutFloatedPanel,a);if(Ext.supports.Touch){Ext.on('mousedown',e=function(b){if(!b.within(a.el)){Ext.un('mousedown',e);a.slideOutFloatedPanel()}})}if(!a.placeholderListener){a.placeholderListener=c.on({resize:a.onPlaceholderResize,scope:a,destroyable:!0})}c.el.on('mouseleave',a.onMouseLeaveFloated,a);a.el.on('mouseleave',a.onMouseLeaveFloated,a);c.el.on('mouseenter',a.onMouseEnterFloated,a);a.el.on('mouseenter',a.onMouseEnterFloated,a);a.el.addCls(i);a.floated=h;if(a.collapseTool){a.collapseTool.el.hide()}switch(a.collapsed){case 'top':a.width=d.width;a.setLocalXY(b.x,b.y+d.height);break;case 'right':a.height=d.height;a.setLocalXY(b.x-d.width,b.y);break;case 'bottom':a.width=d.width;a.setLocalXY(b.x,b.y-d.height);break;case 'left':a.height=d.height;a.setLocalXY(b.x+d.width,b.y);break;}f=a.convertCollapseDir(a.collapsed);a.floatedFromCollapse=a.collapsed;a.collapsed=!1;a.setHiddenState(!1);a.el.slideIn(f,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){a.isSliding=!1;a.fireEvent('float',a)}}})},onPlaceholderResize:function(f,d,c){var a=this,e=a.getBox(!1,!0),b=f.getBox(!1,!0);switch(a.floated){case 'top':a.width=d;a.setLocalY(b.y+b.height);break;case 'right':a.height=c;a.setLocalX(b.x-e.width);break;case 'bottom':a.width=d;a.setLocalY(b.y-e.height);break;case 'left':a.height=c;a.setLocalX(b.x+b.width);break;}a.updateLayout({isRoot:!0})},getAnimationProps:function(){var c=this,b=c.animCollapse,a;a=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof b==='number'){a.duration=b}return a},getCollapsed:function(){var a=this;if(a.collapsed===!0){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===!1||a.collapseMode==='placeholder'?a.emptyArray:[a.getReExpander()]},getComponent:function(b){var a=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(a===undefined&&!Ext.isNumber(b)){a=this.getDockedComponent(b)}return a},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var a=this,c=a.collapsedCls,b;b=[c,c+'-'+d.getDockName()];if(a.border&&(!a.frame||a.frame&&Ext.supports.CSS3BorderRadius)){b.push(c+'-border-'+d.getDockName())}return b},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(b){var a=Ext.Component;switch(b){case a.DIRECTION_TOP:return a.DIRECTION_BOTTOM;case a.DIRECTION_RIGHT:return a.DIRECTION_LEFT;case a.DIRECTION_BOTTOM:return a.DIRECTION_TOP;case a.DIRECTION_LEFT:return a.DIRECTION_RIGHT;}},getPlaceholder:function(g){var a=this,d=g||a.collapseDirection,f=null,b=a.placeholder,e=a.floatable,c=a.titleCollapse;if(!b){if(e||a.collapsible&&c){f={click:{fn:!c&&e?a.floatCollapsedPanel:a.toggleCollapse,element:'el',scope:a}}}a.placeholder=b=Ext.widget(a.createReExpander(d,{id:a.id+'-placeholder',listeners:f}))}if(!b.placeholderFor){if(!b.isComponent){a.placeholder=b=a.lookupComponent(b)}Ext.applyIf(b,{margin:a.margin,placeholderFor:a,synthetic:!0});b.addCls(['x-region-collapsed-placeholder','x-region-collapsed-'+d+'-placeholder',a.collapsedCls])}return b},getProtoBody:function(){var a=this,b=a.protoBody;if(!b){a.protoBody=b=new Ext.util.ProtoElement({cls:a.bodyCls,style:a.bodyStyle,clsProp:'bodyCls',styleProp:'bodyStyle',styleIsText:!0})}return b},getReExpander:function(d){var a=this,b=d||a.collapseDirection,c=a.reExpander||a.findReExpander(b);a.expandDirection=a.getOppositeDirection(b);if(!c){a.reExpander=c=a.createReExpander(b,{dock:b,cls:'x-docked '+a.baseCls+'-'+a.ui+'-collapsed',isCollapsedExpander:!0});a.dockedItems.insert(0,c)}return c},getRefItems:function(b){var a=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(b,a)},getState:function(){var b=this,a=Ext.container.Container.prototype.getState.call(this)||{},e=b.collapsed,d=b.floated,c;if(d){b.collapsed=d}a=b.addPropertyToState(a,'collapsed');if(d){b.collapsed=e}if(b.getCollapsed()){c=b.getMemento('collapse').data;a=b.addPropertyToState(a,'collapsed',c);if(b.collapsedVertical()){delete a.height;if(c){a=b.addPropertyToState(a,'height',c.height)}}else {delete a.width;if(c){a=b.addPropertyToState(a,'width',c.width)}}}return a},applyState:function(b){var d=this,c={},a;if(b){a=b.collapsed;if(a){c=d.getMemento('collapse');Ext.Object.merge(c.data,a);b.collapsed=!0}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(k){var b=this,a=b.ghostPanel,d=b.getBox(),j=b.header,c,g,h,e,f,i;if(!a){b.ghostPanel=a=Ext.widget(b.createGhost(k));a.el.dom.removeAttribute('tabIndex')}else {a.el.show()}a.setHiddenState(!1);a.floatParent=b.floatParent;a.toFront();if(j&&!b.preventHeader){c=a.header;c.suspendLayouts();g=c.query('tool');for(i=g.length;i--;){c.remove(g[i])}c.setTitlePosition(0);a.addTool(b.ghostTools());a.setTitle(b.getTitle());c.setTitlePosition(j.titlePosition);e=b.getIconCls();if(e){a.setIconCls(e)}else {h=b.getIcon();if(h){a.setIcon(h)}else {f=b.getGlyph();if(f){a.setGlyph(f)}}}c.addCls('x-header-ghost');c.resumeLayouts()}a.setPagePosition(d.x,d.y);a.setSize(d.width,d.height);b.el.hide();return a},ghostTools:function(){var c=[],e=this.header,b=e?e.query('tool[hidden=false]'):[],a,f,d;if(b.length){a=0;f=b.length;for(;a<f;a++){d=b[a];c.push({type:d.type,tooltip:d.tooltip})}}else {c=[{type:'placeholder'}]}return c},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle('border-width',this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var a=this,b=a.getProtoBody();if(a.bodyPadding!==undefined){if(a.layout.managePadding){b.setStyle('padding',0)}else {b.setStyle('padding',this.unitizeBox(a.bodyPadding===!0?5:a.bodyPadding))}}a.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=!1}if(a.frame&&a.border&&(a.bodyBorder===!1||a.bodyBorder===0)){a.manageBodyBorders=!0}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(['expand','collapse'])}if(a.unstyled){a.setUI('plain')}if(a.frame){a.setUI(a.ui+'-framed')}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;if(a.headingText){b.headingText=a.headingText;a.addChildEl('headingEl')}if(a.bodyAriaRole){b.bodyAriaAttributes={role:a.bodyAriaRole};if(!a.ariaStaticRoles[a.bodyAriaRole]&&a.bodyAriaRenderAttributes){Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)}}return b},calculateConstrainedPosition:function(d,g,h,a){var c=this,f=c.header,b,e;if(c.constrainHeader){b=f.lastBox;if(a){if(!f.vertical){a=[a[0],b?b.height:a[1]]}else {a=[b?b.width:a[0],a[1]]}}else {if(b){a=[b.width,b.height]}}e=c.floatParent;d=d||c.constrainTo||(e?e.getTargetEl():null)||c.container||c.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,d,g,h,a)},initTools:function(){var a=this,d=a.tools,b,c,e;a.tools=[];for(b=d&&d.length;b;){--b;a.tools[b]=e=d[b];e.toolOwner=a}if(a.collapsible&&!(a.hideCollapseTool||a.header===!1||a.preventHeader)){a.updateCollapseTool();if(a.collapseFirst){a.tools.unshift(a.collapseTool)}}a.addTools();if(a.pinnable){a.initPinnable()}if(a.closable){a.addClsWithUI('closable');c={xtype:'tool',type:'close',scope:a,handler:a.close,tooltip:a.closeToolText};if(a.isAccordionPanel){c.focusable=!1;c.ariaRole='presentation'}a.addTool(c)}if(a.collapseTool&&!a.collapseFirst){a.addTool(a.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return !0}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==='placeholder'},isVisible:function(b){var a=this;if(a.collapsed&&a.placeholder){return a.placeholder.isVisible(b)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var a=this,b;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(a.collapsed){a.setHiddenDocked()}if(a.isAccordionPanel){a.ariaEl=a.header.titleCmp.el;a.ariaEl.dom.setAttribute('aria-expanded',!a.collapsed);a.body.dom.setAttribute('aria-labelledby',a.header.titleCmp.id);a.body.dom.setAttribute('aria-hidden',!!a.collapsed);a.accordionKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,left:a.navigateAccordion,right:a.navigateAccordion,left:a.navigateAccordion,up:a.navigateAccordion,down:a.navigateAccordion,home:a.navigateAccordion,end:a.navigateAccordion,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:!0,fn:a.maybeClose}})}if(a.defaultButton){b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body;a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:'stopEvent',enter:a.fireDefaultButton})}},onHide:function(c,e,d){var a=this,b=a.dd;if(a.floatedFromCollapse){a.slideOutFloatedPanel(!0)}if(a.draggable&&b){b.endDrag()}if(a.collapsed&&a.placeholder){if(a.splitter){Ext.suspendLayouts();a.splitter.hide();Ext.resumeLayouts()}a.placeholder.hide()}else {Ext.container.Container.prototype.onHide.call(this,c,e,d)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,!1)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){if(a.splitter){Ext.suspendLayouts();a.splitter.show();Ext.resumeLayouts()}a.setHiddenState(!0);a.placeholderCollapse()}else {Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(i,h){var a=this,e=a.ownerCt,d=i||a.collapseDirection,g=Ext.panel.Panel.floatCls,f=a.collapseTool,b=a.getPlaceholder(d),c;a.isCollapsingOrExpanding=1;a.setHiddenState(!0);a.collapsed=d;if(b.rendered){if(b.el.dom.parentNode!==a.el.dom.parentNode){a.el.dom.parentNode.insertBefore(b.el.dom,a.el.dom)}b.hidden=!1;b.setHiddenState(!1);b.el.show();e.updateLayout()}else {e.insert(e.items.indexOf(a),b)}if(a.rendered){if(f&&Ext.ComponentManager.getActiveComponent()===f){a.focusPlaceholderExpandTool=!0}a.el.setVisibilityMode(a.placeholderCollapseHideMode);if(h){a.el.addCls(g);b.el.hide();c=a.convertCollapseDir(d);a.el.slideOut(c,{preserveScroll:!0,duration:Ext.Number.from(h,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this;a.el.removeCls(g);a.placeholder.el.show().setStyle('display','none').slideIn(c,{easing:'linear',duration:100,listeners:{afteranimate:a.doPlaceholderCollapse,scope:a}})}}})}else {a.el.hide();a.doPlaceholderCollapse()}}else {a.isCollapsingOrExpanding=0;if(!a.preventCollapseFire){a.fireEvent('collapse',a)}}return a},doPlaceholderCollapse:function(){var a=this,b=a.placeholder,c=b.expandTool;if(a.focusPlaceholderExpandTool&&c){c.focus()}else {b.focus()}a.focusPlaceholderExpandTool=!1;b.setHiddenState(!1);b.ariaEl.dom.setAttribute('aria-hidden',!1);b.ariaEl.dom.setAttribute('aria-expanded',!1);a.ariaEl.dom.setAttribute('aria-hidden',!0);a.ariaEl.dom.setAttribute('aria-expanded',!1);a.isCollapsingOrExpanding=0;a.fireEvent('collapse',a)},placeholderExpand:function(d){var a=this,h=a.collapsed,b=a.placeholder.expandTool,g=Ext.panel.Panel.floatCls,f=a.ownerLayout?a.ownerLayout.centerRegion:null,e,c;if(Ext.Component.layoutSuspendCount){d=!1}if(a.floatedFromCollapse){c=a.getPosition(!0);a.slideOutFloatedPanelBegin();a.slideOutFloatedPanelEnd();a.floated=!1}if(b&&Ext.ComponentManager.getActiveComponent()===b){a.focusHeaderCollapseTool=!0;b._ariaRole=b.ariaEl.dom.getAttribute('role');b._ariaLabel=b.ariaEl.dom.getAttribute('aria-label');b.ariaEl.dom.setAttribute('role','presentation');b.ariaEl.dom.removeAttribute('aria-label')}if(d){Ext.suspendLayouts();a.placeholder.hide();a.el.show();a.collapsed=!1;a.setHiddenState(!1);if(f&&!c){f.hidden=!0}Ext.resumeLayouts(!0);f.hidden=!1;a.el.addCls(g);a.isCollapsingOrExpanding=2;if(c){e=a.getXY();a.setLocalXY(c[0],c[1]);a.setXY([e[0],e[1]],{duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this;a.el.removeCls(g);a.isCollapsingOrExpanding=0;a.fireEvent('expand',a)}}})}else {a.el.hide();a.placeholder.el.show();a.placeholder.hidden=!1;a.setHiddenState(!1);a.el.slideIn(a.convertCollapseDir(h),{preserveScroll:!0,duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:a.doPlaceholderExpand,scope:a}})}}else {a.floated=a.collapsed=!1;a.doPlaceholderExpand(!0)}return a},doPlaceholderExpand:function(e){var a=this,c=a.placeholder,d=a.collapseTool,b=c.expandTool;if(e){Ext.suspendLayouts();a.show()}a.el.removeCls(Ext.panel.Panel.floatCls);c.hide();if(e){Ext.resumeLayouts(!0)}else {a.updateLayout()}if(a.focusHeaderCollapseTool&&d){d.focus()}a.focusHeaderCollapseTool=!1;c.ariaEl.dom.setAttribute('aria-expanded',!0);a.ariaEl.dom.setAttribute('aria-expanded',!0);if(b&&b._ariaRole){b.ariaEl.dom.setAttribute('role',b._ariaRole);b.ariaEl.dom.setAttribute('aria-label',b._ariaLabel);b._ariaRole=b._ariaLabel=null}a.isCollapsingOrExpanding=0;a.fireEvent('expand',a)},remove:function(a,b){var c=this.dockedItems;if(c&&c.contains(a)){this.removeDocked(a,b)}else {Ext.container.Container.prototype.remove.call(this,a,b)}return a},removeBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.removeCls(c);return a},removeUIClsFromElement:function(b){var a=this,c=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);a.removeBodyCls(['x-'+b,a.baseCls+'-body-'+b,a.baseCls+'-body-'+a.ui+'-'+b]);return c},restoreDimension:function(){var a=this.collapseDirection;return a==='top'||a==='bottom'?'height':'width'},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,!0)},setBodyStyle:function(a,d){var b=this,c=b.rendered?b.body:b.getProtoBody();if(Ext.isFunction(a)){a=a()}if(arguments.length===1){if(Ext.isString(a)){a=Ext.Element.parseStyles(a)}c.setStyle(a)}else {c.setStyle(a,d)}return b},setBorder:function(a,d){if(d){return}var b=this,c=b.header;if(!a){a=0}else {if(a===!0){a='1px'}else {a=b.unitizeBox(a)}}if(c){if(c.isHeader){c.setBorder(a)}else {c.border=a}}if(b.rendered&&b.bodyBorder!==!1){b.body.setStyle('border-width',a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?'collapse':'expand']()},setDockedItemsVisibility:function(b,g){var c=this,f=c.getDockedItems(),h=f.length,d=0,a,e;if(c.header!==!1){e=c.getReExpander()}for(;d<h;d++){a=f[d];if(a&&a!==e&&a.el){b.add(a.el)}}b.setStyle('visibility',g?'':'hidden');b.clear()},setGlyph:function(b){var a=this,e=a.glyph,c=a.header,d=a.placeholder;if(b!==e){a.glyph=b;if(c){if(c.isHeader){c.setGlyph(b)}else {c.glyph=b}}else {if(a.rendered||a.afterHeaderInit){a.updateHeader()}}if(d&&d.setGlyph){d.setGlyph(b)}a.fireEvent('glyphchange',a,b,e)}},setIcon:function(b){var a=this,e=a.icon,c=a.header,d=a.placeholder;if(b!==e){a.icon=b;if(c){if(c.isHeader){c.setIcon(b)}else {c.icon=b}}else {if(a.rendered||a.afterHeaderInit){a.updateHeader()}}if(d&&d.setIcon){d.setIcon(b)}a.fireEvent('iconchange',a,b,e)}},setIconCls:function(b){var a=this,e=a.iconCls,c=a.header,d=a.placeholder;if(b!==e){a.iconCls=b;if(c){if(c.isHeader){c.setIconCls(b)}else {c.iconCls=b}}else {if(a.rendered||a.afterHeaderInit){a.updateHeader()}}if(d&&d.setIconCls){d.setIconCls(b)}a.fireEvent('iconclschange',a,b,e)}},setTitle:function(b){var a=this,f=a.title,d=a.header,e=a.reExpander,c=a.placeholder;if(b!==f){a.title=b;if(d){if(d.isHeader){d.setTitle(b)}}else {if(a.rendered||a.afterHeaderInit){a.updateHeader()}}if(a.headingEl){a.headingEl.setHtml(b)}if(e){e.setTitle(b)}if(c&&c.setTitle){c.setTitle(b)}a.fireEvent('titlechange',a,b,f)}},setHiddenDocked:function(){var a=this,b=new Ext.dom.CompositeElement();a.hiddenOnCollapse.add(a.body);b.add(a.body);a.setDockedItemsVisibility(b,!1)},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var a=this,b=a.collapseTool,c;if(!b&&a.collapsible){a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||'top';c={xtype:'tool',handler:a.toggleCollapse,scope:a};if(a.isAccordionPanel){c.focusable=!1;c.ariaRole='presentation'}a.collapseTool=a.expandTool=b=Ext.widget(c)}if(b){if(a.collapsed&&!a.isPlaceHolderCollapse()){b.setType('expand-'+a.getOppositeDirection(a.collapseDirection));b.setTooltip(a.expandToolText)}else {b.setType('collapse-'+a.collapseDirection);b.setTooltip(a.collapseToolText)}}},navigateAccordion:function(c){var b=this,g=b.accordionWrapOver,d='[isAccordionPanel]',e=d+':first',f=d+':last',h,a;h=c.getKey();switch(h){case c.UP:case c.LEFT:a=b.prev(d);if(!a&&g){a=b.ownerCt.child(f)};break;case c.DOWN:case c.RIGHT:a=b.next(d);if(!a&&g){a=b.ownerCt.child(e)};break;case c.HOME:a=b.ownerCt.child(e);break;case c.END:a=b.ownerCt.child(f);break;case c.DELETE:a=b.prev(d)||b.next(d);if(!a){c.doNotClose=!0};break;}if(a&&a!==b){a.header.titleCmp.focus()}},fireDefaultButton:function(d){var b=this,c,a;c=b.lookupReferenceHolder(!1)||b;a=c.lookupReference(b.defaultButton);if(a&&a.click){a.click(d);d.stopEvent();return !1}},maybeClose:function(b){var a=this;if(a.closable){a.navigateAccordion(b);if(!b.doNotClose){a.close()}}},onFocusEnter:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,c);if(b.isAccordionPanel&&a){a.setAttribute('aria-selected',!0)}},onFocusLeave:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,c);if(b.isAccordionPanel&&a){a.removeAttribute('aria-selected')}},updateHeaderPosition:function(b){var a=this.header;if(a&&a.isHeader){a.setDock(b)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleRotation(b)}},unghost:function(e,c,d){var a=this,b=a.ghostPanel;if(!b){return}if(e!==!1){a.el.show();if(c!==!1){a.setPagePosition(b.getXY());if(a.hideMode==='offsets'){delete a.el.hideModeStyles}}if(d){a.focus(!1,10)}}b.el.hide();b.setHiddenState(!0)},updateHeader:function(n){var a=this,c=a.header,e=a.getTitle(),g=a.tools,k=a.getIcon(),j=a.getGlyph(),i=a.getIconCls(),m=j||k||i,d=a.ariaEl.dom,h=a.getHeaderPosition(),l=h==='left'||h==='right',f,b;if(Ext.isObject(c)||c!==!1&&(n||(e||m)||g&&g.length||a.collapsible&&!a.titleCollapse)){if(c&&c.isHeader){c.show()}else {c=a.header=Ext.widget(Ext.merge({xtype:'header',title:e,titleAlign:a.getTitleAlign(),vertical:l,dock:a.getHeaderPosition()||'top',titleRotation:a.getTitleRotation(),textCls:a.headerTextCls,iconCls:i,iconAlign:a.getIconAlign(),icon:k,glyph:j,baseCls:a.baseCls+'-header',tools:g,ui:a.ui,id:a.id+'_header',overCls:a.headerOverCls,indicateDrag:a.draggable,frame:(a.frame||a.alwaysFramed)&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,isAccordionHeader:a.isAccordionPanel,ownerCt:a,synthetic:!0,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null},a.header));a.addDocked(c,0)}if(a.isAccordionPanel){if(d){d.setAttribute('aria-labelledby',c.id+'-title');d.removeAttribute('aria-label')}else {b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-labelledby']=c.id+'-title';delete b['aria-label']}}else {if(e){if(a.ariaRole!=='tabpanel'){if(d){d.setAttribute('aria-labelledby',c.id+'-title-textEl');d.removeAttribute('aria-label')}else {b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-labelledby']=c.id+'-title-textEl';delete b['aria-label']}}}else {if(a.ariaRenderAttributes){delete a.ariaRenderAttributes['aria-label']}}}}else {if(c){c.hide()}e=Ext.util.Format.stripTags(e);if(d){if(!d.hasAttribute('aria-labelledby')){if(e){d.setAttribute('aria-label',e)}else {d.removeAttribute('aria-label')}}}else {b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});if(!b['aria-labelledby']){if(e){b['aria-label']=e}else {delete b['aria-label']}}}}if(a.isViewportBorderChild&&!a.hasOwnProperty('ariaRole')){a.ariaRole='region'}if(e&&a.ariaRole==='region'){f=a.headingEl;if(f){f.setHtml(e)}else {if(a.rendered){a.headingEl=Ext.dom.Helper.insertFirst(a.el,{tag:'div',id:a.id+'-headingEl',role:'heading','class':'x-hidden-clip',style:'height:0',html:e},!0);d.removeAttribute('aria-label');d.setAttribute('aria-labelledby',a.id+'-headingEl')}else {a.headingText=a.title;b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-labelledby']=a.id+'-headingEl';delete b['aria-label']}}}else {if(a.headingEl){a.headingEl.destroy();a.headingEl=null}}},statics:{floatCls:'x-border-region-slide-in'},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+'-body-'+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else {a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var a=this,b,c;if(!a.header){a.updateHeader(!0)}if(a.header){b=Ext.applyIf({el:a.el,delegate:'#'+a.header.id},a.draggable);if(a.constrain||a.constrainHeader){b.constrain=a.constrain;b.constrainDelegate=a.constrainHeader;b.constrainTo=a.constrainTo||a.container}c=a.dd=new Ext.util.ComponentDragger(a,b);a.relayEvents(c,['dragstart','drag','dragend']);if(a.maximized){c.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+'-body-'+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(e){var a=this,d=a.el,b,c=function(){a.slideOutFloatedPanelEnd();a.el.removeCls('x-border-region-slide-in')};if(a.isSliding||a.destroyed){return}a.isSliding=!0;a.floated=!1;a.slideOutFloatedPanelBegin();if(e){d.hide();return c()}if(typeof a.collapsed==='string'){b=a.convertCollapseDir(a.collapsed)}d.slideOut(b,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:c}})},slideOutFloatedPanelBegin:function(){var a=this,b=a.placeholder.el,c=a.el;a.collapsed=a.floatedFromCollapse;a.setHiddenState(!0);a.floatedFromCollapse=null;b.un('mouseleave',a.onMouseLeaveFloated,a);c.un('mouseleave',a.onMouseLeaveFloated,a);b.un('mouseenter',a.onMouseEnterFloated,a);c.un('mouseenter',a.onMouseEnterFloated,a)},slideOutFloatedPanelEnd:function(b){var a=this;if(a.collapseTool){a.collapseTool.el.show()}a.slideOutTask.cancel();a.isSliding=!1;if(!b){a.fireEvent('unfloat',a)}}}},0,['panel'],['component','box','container','panel'],{'component':!0,'box':!0,'container':!0,'panel':!0},['widget.panel'],[['docking',Ext.container.DockingContainer]],[Ext.panel,'Panel',Ext,'Panel'],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY});Ext.define('Ext.rtl.panel.Panel',{override:'Ext.panel.Panel',rtlCollapseDirs:{top:'top',right:'left',bottom:'bottom',left:'right'},convertCollapseDir:function(a){if(!!Ext.rootInheritedState.rtl!==this.isLocalRtl()){a=this.rtlCollapseDirs[a]}return arguments.callee.$previous.apply(this,arguments)}});Ext.define('Ext.theme.neptune.panel.Panel',{override:'Ext.panel.Panel',border:!1,bodyBorder:!1,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==!0){arguments.callee.$previous.call(this)}}});Ext.cmd.derive('Ext.tip.Tip',Ext.panel.Panel,{alternateClassName:'Ext.Tip',minWidth:40,maxWidth:500,shadow:'sides',defaultAlign:'tl-bl?',constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:'x-tip',focusOnToFront:!1,maskOnDisable:!1,closeAction:'hide',alwaysFramed:!0,frameHeader:!1,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(!0)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,['tip'],['component','box','container','panel','tip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0},['widget.tip'],0,[Ext.tip,'Tip',Ext,'Tip'],0);Ext.cmd.derive('Ext.tip.ToolTip',Ext.tip.Tip,{alternateClassName:'Ext.ToolTip',autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:'hide',fadeOutDuration:1000,ariaRole:'tooltip',initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(c,b){var a=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);a.anchorCls='x-tip-anchor-'+a.getAnchorPosition();a.anchorEl=a.el.createChild({role:'presentation',cls:'x-tip-anchor '+a.anchorCls})},setTarget:function(d){var a=this,b=Ext.get(d),c;if(a.target){c=Ext.get(a.target);if(Ext.supports.Touch){a.mun(c,'tap',a.onTargetOver,a)}else {a.mun(c,{mouseover:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})}}a.target=b;if(b){if(Ext.supports.Touch){a.mon(b,{tap:a.onTargetOver,scope:a})}else {a.mon(b,{mouseover:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})}}if(a.anchor){a.anchorTarget=a.target}},onMouseMove:function(c){var a=this,d,b;if(!a.target||a.target.contains(c.target)){d=a.delegate?c.getTarget(a.delegate):a.triggerElement=!0;if(d){a.targetXY=c.getXY();if(d===a.triggerElement){if(!a.hidden&&a.trackMouse){b=a.getTargetXY();if(a.constrainPosition){b=a.el.adjustForConstraints(b,a.el.parent())}a.setPagePosition(b)}}else {a.hide();a.lastActive=new Date(0);a.onTargetOver(c)}}else {if(!a.closable&&a.isVisible()&&a.autoHide!==!1){a.delayHide()}}}},getTargetXY:function(){var a=this,c,d,h,m,l,f,e,j,k,b,g,i;if(a.delegate){a.anchorTarget=a.triggerElement}if(a.anchor){a.targetCounter++;d=a.getOffsets();h=a.anchorToTarget&&!a.trackMouse?a.getAlignToXY(a.anchorTarget,a.getAnchorAlign()):a.targetXY;m=Ext.Element.getViewportWidth()-5;l=Ext.Element.getViewportHeight()-5;f=document.documentElement;e=document.body;j=(f.scrollLeft||e.scrollLeft||0)+5;k=(f.scrollTop||e.scrollTop||0)+5;b=[h[0]+d[0],h[1]+d[1]];g=a.getSize();i=a.constrainPosition;a.anchorEl.removeCls(a.anchorCls);if(a.targetCounter<2&&i){if(b[0]<j){if(a.anchorToTarget){a.defaultAlign='l-r';if(a.mouseOffset){a.mouseOffset[0]*=-1}}a.anchor='left';return a.getTargetXY()}if(b[0]+g.width>m){if(a.anchorToTarget){a.defaultAlign='r-l';if(a.mouseOffset){a.mouseOffset[0]*=-1}}a.anchor='right';return a.getTargetXY()}if(b[1]<k){if(a.anchorToTarget){a.defaultAlign='t-b';if(a.mouseOffset){a.mouseOffset[1]*=-1}}a.anchor='top';return a.getTargetXY()}if(b[1]+g.height>l){if(a.anchorToTarget){a.defaultAlign='b-t';if(a.mouseOffset){a.mouseOffset[1]*=-1}}a.anchor='bottom';return a.getTargetXY()}}a.anchorCls='x-tip-anchor-'+a.getAnchorPosition();a.anchorEl.addCls(a.anchorCls);a.targetCounter=0;return b}else {c=a.getMouseOffset();return a.targetXY?[a.targetXY[0]+c[0],a.targetXY[1]+c[1]]:c}},calculateConstrainedPosition:function(e){var a=this,d,b,c;if(!e&&a.isContainedFloater()){d=a.isVisible();if(!d){a.el.show()}b=a.getTargetXY();if(!d){a.el.hide()}c=a.floatParent.getTargetEl().getViewRegion();b[0]-=c.left;b[1]-=c.top}else {b=a.callOverridden(arguments)}return b},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity('')}})},getAnchorPosition:function(){var a=this,b;if(a.anchor){a.tipAnchor=a.anchor.charAt(0)}else {b=a.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);a.tipAnchor=b[1].charAt(0)}switch(a.tipAnchor){case 't':return 'top';case 'b':return 'bottom';case 'r':return 'right';}return 'left'},getAnchorAlign:function(){switch(this.anchor){case 'top':return 'tl-bl';case 'left':return 'tl-tr';case 'right':return 'tr-tl';default:return 'bl-tl';}},getOffsets:function(){var b=this,c,a,d=b.getAnchorPosition().charAt(0);if(b.anchorToTarget&&!b.trackMouse){switch(d){case 't':a=[0,9];break;case 'b':a=[0,-13];break;case 'r':a=[-13,0];break;default:a=[9,0];break;}}else {switch(d){case 't':a=[-15-b.anchorOffset,30];break;case 'b':a=[-19-b.anchorOffset,-13-b.el.dom.offsetHeight];break;case 'r':a=[-15-b.el.dom.offsetWidth,-13-b.anchorOffset];break;default:a=[25,-13-b.anchorOffset];break;}}c=b.getMouseOffset();a[0]+=c[0];a[1]+=c[1];return a},onTargetOver:function(b){var a=this,d=a.delegate,c;if(a.disabled||b.within(a.target.dom,!0)){return}c=d?b.getTarget(d):!0;if(c){a.triggerElement=c;a.triggerEvent=b;a.clearTimer('hide');a.targetXY=b.getXY();a.delayShow()}},delayShow:function(c){var a=this,b=a.el&&(c===!1||!a.trackMouse)&&a.getTargetXY();if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else {a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b])}}else {if(!a.hidden&&a.autoHide!==!1){a.show(b)}}},showFromDelay:function(b){var a=this;if(a.disabled){return}a.fromDelayShow=!0;a.show(b);delete a.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer('show')},onTargetOut:function(d){var a=this,b=a.triggerElement,c=b===!0?a.target:b;if(a.disabled||!b||d.within(c,!0)){return}if(a.showTimer){a.clearTimer('show');a.triggerElement=null}if(a.autoHide!==!1){a.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer('dismiss');a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===!1){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=!0;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(!0);a.el.syncUnderlays();if(a.dismissDelay&&a.autoHide!==!1){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}}delete a.calledFromShowAt},syncAnchor:function(){var a=this,b,c,d;switch(a.tipAnchor.charAt(0)){case 't':b='b';c='tl';d=[20+a.anchorOffset,1];break;case 'r':b='l';c='tr';d=[-1,12+a.anchorOffset];break;case 'b':b='t';c='bl';d=[20+a.anchorOffset,-1];break;default:b='r';c='tl';d=[1,12+a.anchorOffset];break;}a.anchorEl.alignTo(a.el,b+'-'+c,d);a.anchorEl.setStyle('z-index',parseInt(a.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(b,c){var a=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments);if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else {a.anchorEl.hide()}},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+'Timer'),e=b[c];if(e){clearTimeout(e);b[c]=null}},clearTimers:function(){var a=this;a.clearTimer('show');a.clearTimer('dismiss');a.clearTimer('hide')},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),'mousedown',a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),'mousedown',a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un('mousedown',this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,['tooltip'],['component','box','container','panel','tip','tooltip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0},['widget.tooltip'],0,[Ext.tip,'ToolTip',Ext,'ToolTip'],0);Ext.cmd.derive('Ext.tip.QuickTip',Ext.tip.ToolTip,{alternateClassName:'Ext.QuickTip',interceptTitles:!1,title:'&#160;',tagConfig:{namespace:'data-',attribute:'qtip',width:'qwidth',target:'target',title:'qtitle',hide:'hide',cls:'qclass',align:'qalign',anchor:'anchor',showDelay:'qshowDelay',hideAction:'hideAction',anchorTarget:'anchorTarget'},isQuickTip:!0,shrinkWrapDock:!0,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},text:null,register:function(a){var f=Ext.isArray(a)?a:arguments,d=0,g=f.length,b,c,e;for(;d<g;d++){a=f[d];b=a.target;if(b){if(Ext.isArray(b)){for(c=0,e=b.length;c<e;c++){this.targets[Ext.id(b[c])]=a}}else {this.targets[Ext.id(b)]=a}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(b){var c=this,a=c.activeTarget;b=Ext.get(b).dom;if(c.isVisible()){if(a&&a.el===b){c.hide()}}else {if(a&&a.el===b){c.clearTimer('show')}}},getTipCfg:function(a,f){var b=a.title,c=this.tagConfig,d=c.attr||(c.attr=c.namespace+c.attribute),e;if(this.interceptTitles&&b&&Ext.isString(b)){a.setAttribute(d,b);a.removeAttribute('title');return {text:b}}else {a=Ext.fly(a).findParent(function(b){return e=b.getAttribute(d)});if(a){return {target:a,text:e}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(b,p,l){var a=this,f,n,j,c,d,e,g,k,i,h,o,m;if(a.disabled){return}if(typeof b==='string'){b=Ext.getDom(b)}a.targetXY=p||(l?l.getXY():Ext.fly(b).getXY());if(!b||b.nodeType!==1||b===document.documentElement||b===document.body){return}if(a.activeTarget&&(b===a.activeTarget.el||Ext.fly(a.activeTarget.el).contains(b))){if(a.targetTextEmpty()){a.onShowVeto();delete a.activeTarget}else {a.clearTimer('hide');a.show()}return}if(b){i=a.targets;for(m in i){if(i.hasOwnProperty(m)){o=i[m];h=Ext.fly(o.target);if(h&&(h.dom===b||h.contains(b))){c=h.dom;break}}}if(c){a.activeTarget=a.targets[c.id];a.activeTarget.el=b;a.anchor=a.activeTarget.anchor;if(a.anchor){a.anchorTarget=b}f=parseInt(a.activeTarget.showDelay,10);if(f){j=a.showDelay;a.showDelay=f}a.delayShow();if(f){a.showDelay=j}if(!(n=a.activeTarget.hideAction)){delete a.hideAction}else {a.hideAction=n}return}}c=Ext.fly(b,'_quicktip-target');d=a.tagConfig;e=d.namespace;g=a.getTipCfg(b,l);if(g){if(g.target){b=g.target;c=Ext.fly(b,'_quicktip-target')}k=c.getAttribute(e+d.hide);a.activeTarget={el:b,text:g.text,width:+c.getAttribute(e+d.width)||null,autoHide:k!=='user'&&k!=='false',title:c.getAttribute(e+d.title),cls:c.getAttribute(e+d.cls),align:c.getAttribute(e+d.align),showDelay:parseInt(c.getAttribute(e+d.showDelay)||0,10),hideAction:c.getAttribute(e+d.hideAction),anchorTarget:c.getAttribute(e+d.anchorTarget)};if(!a.initialConfig.hasOwnProperty('anchor')){a.anchor=c.getAttribute(e+d.anchor)}if(a.anchor&&!a.initialConfig.hasOwnProperty('anchorTarget')){a.anchorTarget=a.activeTarget.anchorTarget||b}f=parseInt(a.activeTarget.showDelay,10);if(f){j=a.showDelay;a.showDelay=f}a.delayShow();if(f){a.showDelay=j}}},onTargetOut:function(d){var a=this,c=a.activeTarget,b,e;if(c&&d.within(a.activeTarget.el)&&!a.getTipCfg(d.getTarget(),d)){return}a.clearTimer('show');delete a.activeTarget;if(a.autoHide!==!1){b=c&&parseInt(c.hideDelay,10);if(b){e=a.hideDelay;a.hideDelay=b}a.delayHide();if(b){a.hideDelay=e}}},targetTextEmpty:function(){var c=this,a=c.activeTarget,e=c.tagConfig,b,d;if(a){b=a.el;if(b){d=b.getAttribute(e.namespace+e.attribute);if(!d&&!c.targets[Ext.id(a.target)]){return !0}}}return !1},show:function(){var a=this,b=a.fromDelayShow;if(b&&a.targetTextEmpty()){a.onShowVeto();delete a.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(d){var a=this,b=a.activeTarget,f=a.header,e,c;if(b){if(!a.rendered){a.render(Ext.getBody());a.activeTarget=b}a.suspendLayouts();if(b.title){a.setTitle(b.title);f.show()}else {if(f){f.hide()}}a.update(b.text);a.autoHide=b.autoHide;e=b.dismissDelay;a.dismissDelay=Ext.isNumber(e)?e:a.dismissDelay;if(b.mouseOffset){d[0]+=b.mouseOffset[0];d[1]+=b.mouseOffset[1]}c=a.lastCls;if(c){a.removeCls(c);delete a.lastCls}c=b.cls;if(c){a.addCls(c);a.lastCls=c}a.setWidth(b.width);if(a.anchor){a.constrainPosition=!1}else {if(b.align){d=a.getAlignToXY(b.el,b.align);a.constrainPosition=!1}else {a.constrainPosition=!0}}a.resumeLayouts(!0)}Ext.tip.ToolTip.prototype.showAt.call(this,d)},showByTarget:function(b){var a=this,c,e,d,f,g;c=a.targets[b.id];if(c){a.activeTarget=c;a.activeTarget.el=Ext.get(b).dom;a.anchor=a.activeTarget.anchor;e=b.getSize();d=b.getXY();a.showAt([d[0],d[1]+e.height])}},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,['quicktip'],['component','box','container','panel','tip','tooltip','quicktip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0,'quicktip':!0},['widget.quicktip'],0,[Ext.tip,'QuickTip',Ext,'QuickTip'],0);Ext.cmd.derive('Ext.tip.QuickTipManager',Ext.Base,{singleton:!0,alternateClassName:'Ext.QuickTips',disabled:!1,init:function(d,e){var c=this;if(!c.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(d,e)});return !1}var a=Ext.apply({disabled:c.disabled,id:'ext-quicktips-tip'},e),b=a.className,f=a.xtype;if(b){delete a.className}else {if(f){b='widget.'+f;delete a.xtype}}if(d!==!1){a.renderTo=document.body}c.tip=Ext.create(b||'Ext.tip.QuickTip',a);Ext.quickTipsActive=!0}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var b=this,a=b.tip;if(a&&!b.disabled){a.disable()}},ddEnable:function(){var b=this,a=b.tip;if(a&&!b.disabled){a.enable()}},enable:function(){var b=this,a=b.tip;if(a){a.enable()}b.disabled=!1},disable:function(){var b=this,a=b.tip;if(a){a.disable()}b.disabled=!0},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,'QuickTipManager',Ext,'QuickTips'],0);Ext.define('Ext.rtl.tip.QuickTipManager',{override:'Ext.tip.QuickTipManager',init:function(){var a=this;if(a.callParent(arguments)!==!1){a.tip.on('beforeshow',a.onBeforeFirstShow,a,{single:!0})}},onBeforeFirstShow:function(a){a._isOffsetParentRtl=undefined}});Ext.cmd.derive('Ext.picker.Color',Ext.Component,{alternateClassName:'Ext.ColorPalette',focusable:!0,componentCls:'x-color-picker',selectedCls:'x-color-picker-selected',itemCls:'x-color-picker-item',value:null,clickEvent:'click',allowReselect:!1,colors:['000000','993300','333300','003300','003366','000080','333399','333333','800000','FF6600','808000','008000','008080','0000FF','666699','808080','FF0000','FF9900','99CC00','339966','33CCCC','3366FF','800080','969696','FF00FF','FFCC00','FFFF00','00FF00','00FFFF','00CCFF','993366','C0C0C0','FF99CC','FFCC99','FFFF99','CCFFCC','CCFFFF','99CCFF','CC99FF','FFFFFF'],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>','</a>','</tpl>'],initComponent:function(){var a=this;Ext.Component.prototype.initComponent.apply(this,arguments);if(a.handler){a.on('select',a.handler,a.scope,!0)}},initRenderData:function(){var a=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var a=this,b=a.clickEvent;Ext.Component.prototype.onRender.apply(this,arguments);a.mon(a.el,b,a.handleClick,a,{delegate:'a'});if(b!=='click'){a.mon(a.el,'click',Ext.emptyFn,a,{delegate:'a',stopEvent:!0})}},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);if(a.value){b=a.value;a.value=null;a.select(b,!0)}},handleClick:function(c){var a=this,b;c.stopEvent();if(!a.disabled){b=c.currentTarget.className.match(a.colorRe)[1];a.select(b.toUpperCase())}},select:function(b,g){var a=this,e=a.selectedCls,f=a.value,d,c;b=b.replace('#','');if(!a.rendered){a.value=b;return}if(b!==f||a.allowReselect){d=a.el;if(a.value){c=d.down('a.color-'+f,!0);Ext.fly(c).removeCls(e)}c=d.down('a.color-'+b,!0);Ext.fly(c).addCls(e);a.value=b;if(g!==!0){a.fireEvent('select',a,b)}}},clear:function(){var a=this,b=a.value,c;if(b&&a.rendered){c=a.el.down('a.color-'+b,!0);Ext.fly(c).removeCls(a.selectedCls)}a.value=null},getValue:function(){return this.value||null}},0,['colorpicker'],['component','box','colorpicker'],{'component':!0,'box':!0,'colorpicker':!0},['widget.colorpicker'],0,[Ext.picker,'Color',Ext,'ColorPalette'],0);Ext.cmd.derive('Ext.layout.component.field.HtmlEditor',Ext.layout.component.field.FieldContainer,{type:'htmleditor',naturalHeight:150,naturalWidth:300,beginLayout:function(a){var b=this.owner,c;if(Ext.isGecko){c=b.textareaEl.dom;this.lastValue=c.value;c.value=''}Ext.layout.component.field.FieldContainer.prototype.beginLayout.apply(this,arguments);a.toolbarContext=a.context.getCmp(b.toolbar);a.inputCmpContext=a.context.getCmp(b.inputCmp);a.bodyCellContext=a.getEl('bodyEl');a.textAreaContext=a.getEl('textareaEl');a.iframeContext=a.getEl('iframeEl')},beginLayoutCycle:function(a){var b=this,e=a.widthModel,c=a.heightModel,h=b.owner,f=h.iframeEl,d=h.textareaEl,g=c.natural||c.shrinkWrap?b.naturalHeight:'';Ext.layout.component.field.FieldContainer.prototype.beginLayoutCycle.apply(this,arguments);if(e.shrinkWrap){f.setStyle('width','');d.setStyle('width','')}else {if(e.natural){a.bodyCellContext.setWidth(b.naturalWidth)}}f.setStyle('height',g);d.setStyle('height',g)},finishedLayout:function(){var a=this.owner;Ext.layout.component.field.FieldContainer.prototype.finishedLayout.apply(this,arguments);if(Ext.isGecko){a.textareaEl.dom.value=this.lastValue}}},0,0,0,0,['layout.htmleditor'],0,[Ext.layout.component.field,'HtmlEditor'],0);Ext.cmd.derive('Ext.util.TaskManager',Ext.util.TaskRunner,{alternateClassName:['Ext.TaskManager'],singleton:!0},0,0,0,0,0,0,[Ext.util,'TaskManager',Ext,'TaskManager'],0);Ext.cmd.derive('Ext.toolbar.Separator',Ext.toolbar.Item,{alternateClassName:'Ext.Toolbar.Separator',baseCls:'x-toolbar-separator',ariaRole:'separator'},0,['tbseparator'],['component','box','tbitem','tbseparator'],{'component':!0,'box':!0,'tbitem':!0,'tbseparator':!0},['widget.tbseparator'],0,[Ext.toolbar,'Separator',Ext.Toolbar,'Separator'],0);Ext.cmd.derive('Ext.dom.ButtonElement',Ext.dom.Element,{setSize:function(b,a,e){var d=this,c=d.component;Ext.dom.Element.prototype.setSize.call(this,b,a,e);c.btnWrap.setStyle('table-layout',!b||b==='auto'?'':'fixed');c.btnEl.setStyle('height',!a||a==='auto'?'':'auto');return d},setStyle:function(a,c){var f=this,e=f.component,d,b;Ext.dom.Element.prototype.setStyle.call(this,a,c);if(a){if(a==='width'||typeof a!=='string'&&'width' in a){d=c||a.width;e.btnWrap.setStyle('table-layout',!d||d==='auto'?'':'fixed')}if(a==='height'||typeof a!=='string'&&'height' in a){b=c||a.height;e.btnEl.setStyle('height',!b||b==='auto'?'':'auto')}}return f},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle('height',!a||a==='auto'?'':'auto');return this},setWidth:function(a,b){Ext.dom.Element.prototype.setWidth.call(this,a,b);this.component.btnWrap.setStyle('table-layout',!a||a==='auto'?'':'fixed');return this}},0,0,0,0,0,0,[Ext.dom,'ButtonElement'],0);Ext.cmd.derive('Ext.button.Manager',Ext.Base,{singleton:!0,alternateClassName:'Ext.ButtonToggleManager',groups:{},pressedButton:null,init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a});a.initialized=!0}},onButtonMousedown:function(b,c){var a=this.pressedButton;if(a){a.onMouseUp(c)}this.pressedButton=b},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(c,e){if(e){var b=this.groups[c.toggleGroup],d=b.length,a;for(a=0;a<d;a++){if(b[a]!==c){b[a].toggle(!1)}}}},register:function(a){var c=this,d=this.groups,b=d[a.toggleGroup];c.init();if(!a.toggleGroup){return}if(!b){b=d[a.toggleGroup]=[]}b.push(a);a.on('toggle',c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un('toggle',b.toggleGroup,b)}},getPressed:function(d){var a=this.groups[d],b=0,c;if(a){for(c=a.length;b<c;b++){if(a[b].pressed===!0){return a[b]}}}return null}},0,0,0,0,0,0,[Ext.button,'Manager',Ext,'ButtonToggleManager'],0);Ext.cmd.derive('Ext.menu.Manager',Ext.Base,{singleton:!0,alternateClassName:'Ext.menu.MenuMgr',groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){delete a.onShow;Ext.on('mousedown',a.checkActiveMenus,a);return a.onShow.apply(a,arguments)}},checkActiveMenus:function(f){var a=this.visible,e=a.length,c,b,d=Ext.Component.fromElement(f.target);if(e){a=a.slice();for(c=0;c<e;++c){b=a[c];if(!(b.owns(f)||d&&d.isMenuCheckItem&&d.menu===b)){b.hide()}}}},onShow:function(a){if(a.floating){Ext.Array.include(this.visible,a)}},onHide:function(a){if(a.floating){Ext.Array.remove(this.visible,a)}},hideAll:function(){var a=this.visible,d=a.length,c=!1,b;if(d){a=a.slice();for(b=0;b<d;b++){a[b].hide();c=!0}}return c},get:function(a,b){var c;if(typeof a==='string'){c=Ext.getCmp(a);if(c instanceof Ext.menu.Menu){a=c}}else {if(Ext.isArray(a)){b=Ext.apply({items:a},b);a=new Ext.menu.Menu(b)}else {if(!a.isComponent){b=Ext.apply({},a,b);a=Ext.ComponentManager.create(b,'menu')}}}return a},registerCheckable:function(c){var b=this.groups,a=c.group;if(a){if(!b[a]){b[a]=[]}b[a].push(c)}},unregisterCheckable:function(a){var c=this.groups,b=a.group;if(b){Ext.Array.remove(c[b],a)}},onCheckChange:function(d,h){var g=this.groups,e=d.group,c=0,a,f,b;if(e&&h){a=g[e];f=a.length;for(;c<f;c++){b=a[c];if(b!==d){b.setChecked(!1)}}}}},1,0,0,0,0,0,[Ext.menu,'Manager',Ext.menu,'MenuMgr'],0);Ext.cmd.derive('Ext.button.Button',Ext.Component,{alternateClassName:'Ext.Button',config:{iconAlign:'left',text:null,textAlign:'center',arrowVisible:!0},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:'tl-bl?',showEmptyMenu:!1,clickEvent:'click',preventDefault:!0,handleMouseEvents:!0,tooltipType:'qtip',baseCls:'x-btn',hrefTarget:'_blank',destroyMenu:!0,focusable:!0,ariaRole:'button',keyHandlers:{SPACE:'onEnterKey',ENTER:'onEnterKey',DOWN:'onDownKey'},defaultBindProperty:'text',childEls:['btnEl','btnWrap','btnInnerEl','btnIconEl','arrowEl'],publishes:{pressed:1},_btnWrapCls:'x-btn-wrap',_btnCls:'x-btn-button',_baseIconCls:'x-btn-icon-el',_glyphCls:'x-btn-glyph',_innerCls:'x-btn-inner',_textCls:'x-btn-text',_noTextCls:'x-btn-no-text',_hasIconCls:'x-btn-icon',_pressedCls:'x-btn-pressed',overCls:'x-btn-over',_disabledCls:'x-btn-disabled',_menuActiveCls:'x-btn-menu-active',_arrowElCls:'x-btn-arrow-el',_focusCls:'x-btn-focus',_arrowFocusCls:'x-arrow-focus',renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:'small',allowedScales:['small','medium','large'],arrowAlign:'right',arrowCls:'arrow',maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:'a',hidefocus:'on',unselectable:'on'},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==='_blank'){window.open(this.getHref(),this.hrefTarget)}else {location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls('x-unselectable');Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=!0;a.setMenu(a.menu,!1,!0)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty('preventDefault');if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=!1}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==''){a.enableToggle=!0}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var a=this,b=Ext.Component.prototype.getElConfig.call(this),d=a.getHref(),c=a.hrefTarget;if(b.tag==='a'){if(!a.disabled){b.tabIndex=a.tabIndex}if(d){if(!a.disabled){b.href=d;if(c){b.target=c}}}}if(!a.ariaStaticRoles[a.ariaRole]){if(a.menu&&!a.isSplitButton){b['aria-haspopup']=!0}if(a.enableToggle){b['aria-pressed']=!!a.pressed}}return b},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(b,g,h){var a=this,e=a.menu,d=a.isSplitButton?a.arrowEl&&a.arrowEl.dom:a.ariaEl.dom,f,c;if(e&&!h){if(g!==!1&&a.destroyMenu){e.destroy()}e.ownerCmp=null}if(b){f=b.isMenu;b=Ext.menu.Manager.get(b,{ownerCmp:a});b.setOwnerCmp(a,f);b.menuClickBuffer=250;a.mon(b,{scope:a,show:a.onMenuShow,hide:a.onMenuHide});if(!e&&a.getArrowVisible()){a.split=!0;if(a.rendered){a._addSplitCls();a.updateLayout()}}a.menu=b;if(d){d.setAttribute('aria-haspopup',!0);d.setAttribute('aria-owns',b.id)}else {c=a.isSplitButton?a.ariaArrowElAttributes||(a.ariaArrowElAttributes={}):a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-haspopup']=!0;c['aria-owns']=b.id}}else {if(a.rendered){d.removeAttribute('aria-haspopup');d.removeAttribute('aria-owns');a._removeSplitCls();a.updateLayout()}else {c=a.isSplitButton?a.ariaArrowElAttributes:a.ariaRenderAttributes;if(c){delete c['aria-haspopup'];delete c['aria-owns']}}a.split=!1;a.menu=null}},onRender:function(){var a=this,d,c,b;Ext.Component.prototype.onRender.apply(this,arguments);c=a.el;if(a.tooltip){a.setTooltip(a.tooltip,!0)}if(a.handleMouseEvents){b={scope:a,mouseover:a.onMouseOver,mouseout:a.onMouseOut,mousedown:a.onMouseDown};if(a.split){b.mousemove=a.onMouseMove}}else {b={scope:a}}if(Ext.supports.Touch){b.touchstart=a.onTouchStart}if(a.repeat){a.mon(new Ext.util.ClickRepeater(c,Ext.isObject(a.repeat)?a.repeat:{}),'click',a.onRepeatClick,a)}else {if(b[a.clickEvent]){d=!0}else {b[a.clickEvent]=a.onClick}}a.mon(c,b);if(a.hasFrameTable()){a.mon(a.frameTable,'click',a.frameTableListener,a)}if(d){a.mon(c,a.clickEvent,a.onClick,a)}Ext.button.Manager.register(a)},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var a=this,i=a._btnCls,j=a._baseIconCls,d=a.getIconAlign(),b=a.glyph,f=Ext._glyphFontFamily,e=a.text,h=a._hasIcon(),g=a._hasIconCls,c;if(typeof b==='string'){c=b.split('@');b=c[0];f=c[1]}return {split:a.isSplitButton,innerCls:a._innerCls,splitCls:a.getArrowVisible()?a.getSplitCls():'',iconUrl:a.icon,iconCls:a.iconCls,glyph:b,glyphCls:b?a._glyphCls:'',glyphFontFamily:f,text:e||'&#160;',closeText:a.closeText,textCls:e?a._textCls:'',noTextCls:e?'':a._noTextCls,hasIconCls:h?g:'',btnWrapCls:a._btnWrapCls,btnWrapStyle:a.width?'table-layout:fixed;':'',btnElStyle:a.height?'height:auto;':'',btnCls:i,baseIconCls:j,iconBeforeText:d==='left'||d==='top',iconAlignCls:h?g+'-'+d:'',textAlignCls:i+'-'+a.getTextAlign(),arrowElCls:a._arrowElCls,tabIndex:a.tabIndex}},renderIcon:function(a){return this.getTpl('iconTpl').apply(a)},setHref:function(c){var a=this,d=a.hrefTarget,b;a.href=c;if(!a.configuredWithPreventDefault){a.preventDefault=!c}if(a.rendered){b=a.el.dom;if(!c||a.disabled){b.removeAttribute('href');b.removeAttribute('hrefTarget')}else {b.href=a.getHref();if(d){b.target=d}}}},getHref:function(){var a=this,b=a.href;return b?Ext.urlAppend(b,Ext.Object.toQueryString(Ext.apply({},a.params,a.baseParams))):!1},setParams:function(c){var a=this,b;a.params=c;if(a.rendered){b=a.el.dom;if(a.disabled){b.removeAttribute('href')}else {b.href=a.getHref()||''}}},getSplitCls:function(){var a=this;return a.split?a.baseCls+'-'+a.arrowCls+' '+(a.baseCls+'-'+a.arrowCls+'-'+a.arrowAlign):''},setIcon:function(b){b=b||'';var a=this,d=a.btnIconEl,c=a.icon||'';a.icon=b;if(b!==c){if(d){d.setStyle('background-image',b?'url('+b+')':'');a._syncHasIconCls();if(a.didIconStateChange(c,b)){a.updateLayout()}}a.fireEvent('iconchange',a,c,b)}return a},setIconCls:function(b){b=b||'';var a=this,d=a.btnIconEl,c=a.iconCls||'';a.iconCls=b;if(c!==b){if(d){d.removeCls(c);d.addCls(b);a._syncHasIconCls();if(a.didIconStateChange(c,b)){a.updateLayout()}}a.fireEvent('iconchange',a,c,b)}return a},setGlyph:function(b){b=b||0;var a=this,c=a.btnIconEl,f=a.glyph,g=a._glyphCls,d,e;a.glyph=b;if(c){if(typeof b==='string'){e=b.split('@');b=e[0];d=e[1]||Ext._glyphFontFamily}if(!b){c.dom.innerHTML='';c.removeCls(g)}else {if(f!==b){c.dom.innerHTML='&#'+b+';';c.addCls(g)}}if(d){c.setStyle('font-family',d)}a._syncHasIconCls();if(a.didIconStateChange(f,b)){a.updateLayout()}}a.fireEvent('glyphchange',a,a.glyph,f);return a},setTooltip:function(b,c){var a=this;if(a.rendered){if(!c||!b){a.clearTip()}if(b){if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:a.el.id},b));a.tooltip=b}else {a.el.dom.setAttribute(a.getTipAttr(),b)}}}else {a.tooltip=b}return a},updateIconAlign:function(e,f){var b=this,a,d,c;if(b.rendered){a=b.btnEl;d=b.btnIconEl;c=b._hasIconCls;if(f){a.removeCls(c+'-'+f)}a.addCls(c+'-'+e);if(e==='top'||e==='left'){a.insertFirst(d)}else {a.appendChild(d)}b.updateLayout()}},updateTextAlign:function(e,d){var a=this,c=a.btnEl,b=a._btnCls;if(a.rendered){c.removeCls(b+'-'+d);c.addCls(b+'-'+e)}},getTipAttr:function(){return this.tooltipType==='qtip'?'data-qtip':'title'},getRefItems:function(c){var b=this.menu,a;if(b){a=b.getRefItems(c);a.unshift(b)}return a||[]},clearTip:function(){var a=this,b=a.el;if(Ext.quickTipsActive&&Ext.isObject(a.tooltip)){Ext.tip.QuickTipManager.unregister(b)}else {b.dom.removeAttribute(a.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this,b=a.menu;if(a.rendered){Ext.destroy(a.keyMap);delete a.keyMap}if(b&&a.destroyMenu){a.menu=Ext.destroy(b)}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(a,b){this.handler=a;if(arguments.length>1){this.scope=b}return this},updateText:function(b,c){b=b==null?'':String(b);c=c||'';var a=this,e=a.btnInnerEl,d=a.btnEl;if(a.rendered){e.setHtml(b||'&#160;');d[b?'addCls':'removeCls'](a._textCls);d[b?'removeCls':'addCls'](a._noTextCls);a.updateLayout()}a.fireEvent('textchange',a,c,b)},didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(a!==!1)},toggle:function(b,d){var a=this,c=a.ariaEl.dom;b=b===undefined?!a.pressed:!!b;if(a.fireEvent('beforetoggle',a,b)!==!1){if(b!==a.pressed){a[b?'addCls':'removeCls'](a._pressedCls);a.pressed=b;if(c){c.setAttribute('aria-pressed',b)}if(!d){a.fireEvent('toggle',a,b);Ext.callback(a.toggleHandler,a.scope,[a,b],0,a);if(a.reference&&a.publishState){a.publishState('pressed',b)}}}}return a},maybeShowMenu:function(a){if(this.menu){this.showMenu(a)}},showMenu:function(c){var a=this,b=a.menu,d=!c||c.pointerType;if(b&&a.rendered){if(a.tooltip&&Ext.quickTipsActive&&a.getTipAttr()!=='title'){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el)}if(b.isVisible()){if(d){b.hide()}else {b.focus()}}else {if(!c||a.showEmptyMenu||b.items.getCount()>0){b.autoFocus=!d;b.showBy(a.el,a.menuAlign)}}}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(b,a){this.onClick(a)},onTouchStart:function(a){this.doPreventDefault(a)},onEnterKey:function(a){this.onClick(a);a.stopEvent();return !1},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=='keydown'&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu(b);a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||this.disabled&&this.getHref())){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent('click',a,b)!==!1&&!a.destroyed){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==!1||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,!0,!0)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,!0,!0)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(b){var a=this,c=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(b)){if(!c){a.onMenuTriggerOver(b)}}else {if(c){a.onMenuTriggerOut(b)}}}},isWithinTrigger:function(d){var a=this,e=a.el,c,b;c=a.arrowAlign==='right'?d.getX()-a.getX():d.getY()-e.getY();b=a.getTriggerRegion();return c>b.begin&&c<b.end},getTriggerRegion:function(){var a=this,b=a._triggerRegion,d=a.arrowAlign==='right',e=d?'getRight':'getBottom',c=d?a.getWidth():a.getHeight();b.begin=c-(a.el[e]()-a.btnEl[e]());b.end=c;return b},onMouseEnter:function(a){this.fireEvent('mouseover',this,a)},onMouseLeave:function(a){this.fireEvent('mouseout',this,a)},onMenuTriggerOver:function(c){var a=this,b=a.arrowTooltip;a.overMenuTrigger=!0;if(a.split&&b){a.btnWrap.dom.setAttribute(a.getTipAttr(),b)}a.fireEvent('menutriggerover',a,a.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),'')}a.fireEvent('menutriggerout',a,a.menu,b)},onEnable:function(){var a=this,d=a.href,c=a.hrefTarget,b=a.el.dom;Ext.Component.prototype.onEnable.call(this);a.removeCls(a._disabledCls);b.setAttribute('tabIndex',a.tabIndex);if(d){b.href=d}if(c){b.target=c}},onDisable:function(){var a=this,b=a.el.dom;Ext.Component.prototype.onDisable.call(this);a.addCls(a._disabledCls);a.removeCls(a.overCls);b.removeAttribute('tabIndex');if(a.href){b.removeAttribute('href')}if(a.hrefTarget){b.removeAttribute('target')}},setScale:function(b){var a=this,c=a.ui.replace('-'+a.scale,'');if(!Ext.Array.contains(a.allowedScales,b)){throw '#setScale: scale must be an allowed scale ('+a.allowedScales.join(', ')+')'}a.scale=b;a.setUI(c)},setUI:function(a){var b=this;if(b.scale&&!a.match(b.scale)){a=a+'-'+b.scale}Ext.Component.prototype.setUI.call(this,a)},onMouseDown:function(b){var a=this;if(Ext.isIE||b.pointerType==='touch'){Ext.defer(function(){var c=a.getFocusEl();if(c&&!b.defaultPrevented){c.focus()}},1)}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.destroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls);a.fireEvent('menushow',a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls);a.fireEvent('menuhide',a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled){a.showMenu(b);b.stopEvent();return !1}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=!0;a._addSplitCls()}}else {a._removeSplitCls();a.split=!1}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls())},getTdCls:function(){return 'x-button-'+this.ui+'-'+this.scale+'-cell'},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls())},_syncHasIconCls:function(){var a=this,c=a.btnEl,b=a._hasIconCls;if(c){c[a._hasIcon()?'addCls':'removeCls']([b,b+'-'+a.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a);Ext.Component.prototype.wrapPrimaryEl.call(this,a)}}},0,['button'],['component','box','button'],{'component':!0,'box':!0,'button':!0},['widget.button'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext.button,'Button',Ext,'Button'],0);Ext.cmd.derive('Ext.ux.mixin.Badge',Ext.Mixin,{mixinConfig:{id:'badge',after:{onRender:'renderBadgeText'}},config:{badgeText:null},renderBadgeText:function(){var a=this.getBadgeText();if(a){this.updateBadgeText(a)}},updateBadgeText:function(b,d){var a=this,c=a.el;if(a.rendered){c.set({'data-abp-badge':b});c.toggleCls('abp-badge',!!b);a.fireEvent('badgetextchange',a,b,d)}}},0,0,0,0,0,0,[Ext.ux.mixin,'Badge'],function(a){Ext.override(Ext.button.Button,{mixins:[a]})});Ext.define('Ext.rtl.button.Button',{override:'Ext.button.Button',getTriggerRegion:function(){var b=this,a=b._triggerRegion;if(!Ext.rootInheritedState.rtl!==!this.getInherited().rtl&&b.arrowAlign==='right'){a.begin=0;a.end=b.btnEl.getX()-b.el.getX()}else {a=arguments.callee.$previous.call(this)}return a}});Ext.cmd.derive('Ext.layout.container.boxOverflow.Menu',Ext.layout.container.boxOverflow.None,{alternateClassName:'Ext.layout.boxOverflow.Menu',noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:'x-box-menu',constructor:function(a){var b=this;Ext.layout.container.boxOverflow.None.prototype.constructor.call(this,a);b.menuItems=[]},beginLayout:function(a){Ext.layout.container.boxOverflow.None.prototype.beginLayout.call(this,a);this.clearOverflow(a)},beginLayoutCycle:function(a,b){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.call(this,a,b);if(!b){this.clearOverflow(a);this.layout.cacheChildItems(a)}},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},clearItem:function(a){var b=a.menu;if(a.isButton&&b){a.setMenu(b,!1)}},getSuffixConfig:function(){var a=this,c=a.layout,b=c.owner,d=b.id;a.menu=new Ext.menu.Menu({listeners:{scope:a,beforeshow:a.beforeMenuShow}});a.menuTrigger=new Ext.button.Button({id:d+'-menu-trigger',cls:a.menuCls+'-after x-toolbar-item',plain:b.usePlainButtons,ownerCt:b,ownerLayout:c,iconCls:'x-'+a.getOwnerType(b)+'-more-icon',ui:b.defaultButtonUI||'default',menu:a.menu,showEmptyMenu:!0,getSplitCls:function(){return ''}});return a.menuTrigger.getRenderTree()},getOverflowCls:function(a){return this.menuCls+'-body-'+a},handleOverflow:function(b){var a=this,c=a.layout;a.showTrigger(b);if(c.direction!=='vertical'){a.menuTrigger.setLocalY((b.state.boxPlan.maxSize-a.menuTrigger[c.names.getHeight]())/2)}return {reservedSpace:a.triggerTotalWidth}},captureChildElements:function(){var b=this,a=b.menuTrigger,c=b.layout.names;if(a.rendering){a.finishRender();b.triggerTotalWidth=a[c.getWidth]()+a.el.getMargin(c.parallelMargins)}},clearOverflow:function(h){var b=this,d=b.menuItems,g=d.length,e=b.layout.owner,f=e._asLayoutRoot,a,c;e.suspendLayouts();b.captureChildElements();b.hideTrigger();e.resumeLayouts();for(c=0;c<g;c++){a=d[c];a.suspendLayouts();a.show();b.clearItem(a);a.resumeLayouts(f)}d.length=0},showTrigger:function(i){var b=this,m=b.layout,o=m.owner,n=m.names,p=n.x,l=n.width,q=i.state.boxPlan,k=q.targetSize[l],j=i.childItems,e=b.menuTrigger,f=b.menuItems,d,h,a,g,c;e.suspendLayouts();e.show();e.resumeLayouts(b._asLayoutRoot);k-=b.triggerTotalWidth;o.suspendLayouts();for(a=0,c=f.length;a<c;++a){b.clearItem(f[a])}f.length=0;for(a=0,c=j.length;a<c;a++){d=j[a];g=d.props;if(g[p]+g[l]>k){h=d.target;b.menuItems.push(h);h.hide()}}o.resumeLayouts()},hideTrigger:function(){var a=this.menuTrigger;if(a){a.hide()}},beforeMenuShow:function(a){var e=this,g=e.menuItems,d=0,h=g.length,b,c,f=function(b,c){return b.isXType('buttongroup')&&!(c instanceof Ext.toolbar.Separator)};a.suspendLayouts();a.removeAll(!1);for(;d<h;d++){b=g[d];if(!d&&b instanceof Ext.toolbar.Separator){continue}if(c&&(f(b,c)||f(c,b))){a.add('-')}e.addComponentToMenu(a,b);c=b}if(a.items.length<1){a.add(e.noItemsMenuText)}a.resumeLayouts()},createMenuConfig:function(a,d){var b=Ext.apply({},a.initialConfig),c=a.toggleGroup;Ext.copy(b,a,['iconCls','icon','itemId','disabled','handler','scope','menu','tabIndex']);Ext.applyIf(b,{text:a.overflowText||a.text,hideOnClick:d,destroyMenu:!1,listeners:null});b.masterComponent=a;if(a.isFormField){b.value=a.getValue();b.listeners={change:function(c,b,e){c.masterComponent.setValue(b)}};a.on('change',function(c,b,e){c.overflowClone.setValue(b)})}else {if(c||a.enableToggle){Ext.apply(b,{hideOnClick:!1,group:c,checked:a.pressed,handler:function(b,c){b.masterComponent.onClick(c)}})}}if(a.isButton&&!a.changeListenersAdded){a.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});a.changeListenersAdded=!0}delete b.margin;delete b.ownerCt;delete b.xtype;delete b.id;delete b.itemId;return b},onButtonAttrChange:function(b){var a=b.overflowClone;a.suspendLayouts();a.setText(b.text);a.setIcon(b.icon);a.setIconCls(b.iconCls);a.resumeLayouts(!0)},onButtonToggle:function(b,a){if(b.overflowClone.checked!==a){b.overflowClone.setChecked(a)}},addComponentToMenu:function(b,a){var c=this,d,e,f;if(a instanceof Ext.toolbar.Fill){return}else {if(a instanceof Ext.toolbar.Separator){b.add('-')}else {if(a.overflowClone){b.add(a.overflowClone)}else {if(a.isComponent){if(a.isXType('splitbutton')){a.overflowClone=b.add(c.createMenuConfig(a,!0))}else {if(a.isXType('button')){a.overflowClone=b.add(c.createMenuConfig(a,!a.menu))}else {if(a.isXType('buttongroup')){e=a.items.items;f=e.length;for(d=0;d<f;d++){c.addComponentToMenu(b,e[d])}}else {a.overflowClone=b.add(Ext.create(Ext.getClassName(a),c.createMenuConfig(a)))}}}}}}}},destroy:function(){var a=this,b=a.menuTrigger;if(b&&!a.layout.owner.items.contains(b)){delete b.ownerCt}a.menu=a.menuTrigger=Ext.destroy(a.menu,b);a.callParent()}},1,0,0,0,['box.overflow.Menu','box.overflow.menu'],0,[Ext.layout.container.boxOverflow,'Menu',Ext.layout.boxOverflow,'Menu'],0);Ext.define('Ext.rtl.layout.container.boxOverflow.Menu',{override:'Ext.layout.container.boxOverflow.Menu',getPrefixConfig:function(a){if(a||!this.layout.owner.getInherited().rtl){return (arguments.callee.$previous||Ext.layout.container.boxOverflow.None.prototype.getPrefixConfig).call(this)}else {return this.getSuffixConfig(!0)}},getSuffixConfig:function(a){if(a||!this.layout.owner.getInherited().rtl){return (arguments.callee.$previous||Ext.layout.container.boxOverflow.None.prototype.getSuffixConfig).call(this)}else {return this.getPrefixConfig(!0)}}});Ext.cmd.derive('Ext.form.field.HtmlEditor',Ext.form.FieldContainer,{alternateClassName:'Ext.form.HtmlEditor',focusable:!0,componentLayout:'htmleditor',textareaCls:'x-htmleditor-textarea',componentTpl:['{beforeTextAreaTpl}','<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">','{[Ext.util.Format.htmlEncode(values.value)]}','</textarea>','{afterTextAreaTpl}','{beforeIFrameTpl}','<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>','{afterIFrameTpl}',{disableFormats:!0}],stretchInputElFixed:!0,subTplInsertions:['beforeTextAreaTpl','afterTextAreaTpl','beforeIFrameTpl','afterIFrameTpl','iframeAttrTpl','inputAttrTpl'],enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:'Please enter the URL for the link:',defaultLinkValue:'http://',fontFamilies:['Arial','Courier New','Tahoma','Times New Roman','Verdana'],defaultValue:Ext.isOpera?'&#160;':'&#8203;',extraFieldBodyCls:'x-html-editor-wrap',defaultButtonUI:'default-toolbar',initialized:!1,activated:!1,sourceEditMode:!1,iframePad:3,hideMode:'offsets',maskOnDisable:!0,containerElCls:'x-html-editor-container',reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){var a=this;a.items=[a.createToolbar(),a.createInputCmp()];a.layout={type:'vbox',align:'stretch'};if(a.value==null){a.value=''}Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);a.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var a=this,c=a.id+'-inputCmp',b={id:c,name:a.name,textareaCls:a.textareaCls+' x-hidden',value:a.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:'x-htmleditor-iframe'};a.getInsertionRenderData(b,a.subTplInsertions);return {flex:1,xtype:'component',tpl:a.getTpl('componentTpl'),childEls:['iframeEl','textareaEl'],id:c,cls:'x-html-editor-input',data:b}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var a=this,b=[],e,f=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),c='x-',g,d;function btn(b,g,e){return {itemId:b,cls:c+'btn-icon',iconCls:c+'edit-'+b,enableToggle:g!==!1,scope:a,handler:e||a.relayBtnCmd,clickEvent:'mousedown',tooltip:f?a.buttonTips[b]||d:d,overflowText:a.buttonTips[b].title||d,tabIndex:-1}}if(a.enableFont&&!Ext.isSafari2){g=Ext.widget('component',{itemId:'fontSelect',renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+c+'font-select">','</select>'],childEls:['selectEl'],afterRender:function(){a.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var a=this.selectEl;if(a){a.dom.disabled=!0}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var a=this.selectEl;if(a){a.dom.disabled=!1}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){a.win.focus();a.relayCmd('fontName',a.fontSelect.dom.value);a.deferFocus()},element:'selectEl'}});b.push(g,'-')}if(a.enableFormat){b.push(btn('bold'),btn('italic'),btn('underline'))}if(a.enableFontSize){b.push('-',btn('increasefontsize',!1,a.adjustFont),btn('decreasefontsize',!1,a.adjustFont))}if(a.enableColors){b.push('-',{itemId:'forecolor',cls:c+'btn-icon',iconCls:c+'edit-forecolor',overflowText:a.buttonTips.forecolor.title,tooltip:f?a.buttonTips.forecolor||d:d,tabIndex:-1,menu:Ext.widget('menu',{plain:!0,items:[{xtype:'colorpicker',allowReselect:!0,focus:Ext.emptyFn,value:'000000',plain:!0,clickEvent:'mousedown',handler:function(c,b){a.relayCmd('forecolor',Ext.isWebKit||Ext.isIE?'#'+b:b);this.up('menu').hide()}}]})},{itemId:'backcolor',cls:c+'btn-icon',iconCls:c+'edit-backcolor',overflowText:a.buttonTips.backcolor.title,tooltip:f?a.buttonTips.backcolor||d:d,tabIndex:-1,menu:Ext.widget('menu',{plain:!0,items:[{xtype:'colorpicker',focus:Ext.emptyFn,value:'FFFFFF',plain:!0,allowReselect:!0,clickEvent:'mousedown',handler:function(c,b){if(Ext.isGecko){a.execCmd('useCSS',!1);a.execCmd('hilitecolor','#'+b);a.execCmd('useCSS',!0);a.deferFocus()}else {a.relayCmd(Ext.isOpera?'hilitecolor':'backcolor',Ext.isWebKit||Ext.isIE||Ext.isOpera?'#'+b:b)}this.up('menu').hide()}}]})})}if(a.enableAlignments){b.push('-',btn('justifyleft'),btn('justifycenter'),btn('justifyright'))}if(!Ext.isSafari2){if(a.enableLinks){b.push('-',btn('createlink',!1,a.createLink))}if(a.enableLists){b.push('-',btn('insertorderedlist'),btn('insertunorderedlist'))}if(a.enableSourceEdit){b.push('-',btn('sourceedit',!0,function(){a.toggleSourceEdit(!a.sourceEditMode)}))}}for(e=0;e<b.length;e++){if(b[e].itemId!=='sourceedit'){b[e].disabled=!0}}return {xtype:'toolbar',defaultButtonUI:a.defaultButtonUI,cls:'x-html-editor-tb',enableOverflow:!0,items:b,listeners:{click:function(a){a.preventDefault()},element:'el'}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(b){var a=this,d=a.textareaEl,e=a.iframeEl,c;a.readOnly=b;if(d){d.dom.readOnly=b}if(a.initialized){c=a.getEditorBody();if(Ext.isIE){e.setDisplayed(!1);c.contentEditable=!b;e.setDisplayed(!0)}else {a.setDesignMode(!b)}if(c){c.style.cursor=b?'default':'text'}a.disableItems(b)}},getDocMarkup:function(){var a=this,b=a.iframeEl.getHeight()-a.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?'p{margin:0;}':'')+'body{border:0;margin:0;padding:{0}px;direction:'+(a.rtl?'rtl;':'ltr;')+(Ext.isIE8?Ext.emptyString:'min-')+'height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;'+(Ext.isIE?'':'font-size:12px;font-family:{2}')+'}</style></head><body></body></html>',a.iframePad,b,a.defaultFont)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var b=this,h=0,c,a,f,e,d,i,g;if(!b.defaultFont){a=b.textareaEl.getStyle('font-family');a=Ext.String.capitalize(a.split(',')[0]);c=Ext.Array.clone(b.fontFamilies);Ext.Array.include(c,a);c.sort();b.defaultFont=a;f=b.down('#fontSelect').selectEl.dom;for(d=0,i=c.length;d<i;++d){a=c[d];g=a.toLowerCase();e=new Option(a,g);if(a===b.defaultFont){h=d}e.style.fontFamily=g;if(Ext.isIE){f.add(e)}else {f.options.add(e)}}f.options[h].selected=!0}},isEqual:function(a,b){return this.isEqualAsString(a,b)},afterRender:function(){var a=this,b=a.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);a.iframeEl=b.iframeEl;a.textareaEl=b.textareaEl;a.inputEl=a.iframeEl;if(a.enableFont){a.initDefaultFont()}a.monitorTask=Ext.TaskManager.start({run:a.checkDesignMode,scope:a,interval:100})},initFrameDoc:function(){var a=this,b,c;Ext.TaskManager.stop(a.monitorTask);b=a.getDoc();a.win=a.getWin();b.open();b.write(a.getDocMarkup());b.close();c={run:function(){var b=a.getDoc();if(b.body||b.readyState==='complete'){Ext.TaskManager.stop(c);a.setDesignMode(!0);Ext.defer(a.initEditor,10,a)}},interval:10,duration:10000,scope:a};Ext.TaskManager.start(c)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=='on')){a.initFrameDoc()}},setDesignMode:function(a){var c=this,b=c.getDoc();if(b){if(c.readOnly){a=!1}b.designMode=/on|true/i.test(String(a).toLowerCase())?'on':'off'}},getDesignMode:function(){var a=this.getDoc();return !a?'':String(a.designMode).toLowerCase()},disableItems:function(d){var c=this.getToolbar().items.items,a,e=c.length,b;for(a=0;a<e;a++){b=c[a];if(b.getItemId()!=='sourceedit'){b.setDisabled(d)}}},toggleSourceEdit:function(b){var a=this,e=a.iframeEl,c=a.textareaEl,d='x-hidden',f=a.getToolbar().getComponent('sourceedit');if(!Ext.isBoolean(b)){b=!a.sourceEditMode}a.sourceEditMode=b;if(f.pressed!==b){f.toggle(b)}if(b){a.disableItems(!0);a.syncValue();e.addCls(d);c.removeCls(d);c.dom.removeAttribute('tabIndex');c.focus();a.inputEl=c}else {if(a.initialized){a.disableItems(a.readOnly)}a.pushValue();e.removeCls(d);c.addCls(d);c.dom.setAttribute('tabIndex',-1);a.deferFocus();a.inputEl=e}a.fireEvent('editmodechange',a,b);a.updateLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=='http://'){this.relayCmd('createlink',a)}},clearInvalid:Ext.emptyFn,setValue:function(b){var a=this,c=a.textareaEl;if(b===null||b===undefined){b=''}if(a.value!==b){if(c){c.dom.value=b}a.pushValue();if(!a.rendered&&a.inputCmp){a.inputCmp.data.value=b}a.mixins.field.setValue.call(a,b)}return a},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(this.safariNonsenseRE,'')}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,''),10)){a=a.substring(1)}return a},syncValue:function(){var b=this,e,g,a,f,d,c;if(b.initialized){e=b.getEditorBody();a=e.innerHTML;c=b.textareaEl.dom;if(Ext.isWebKit){f=e.getAttribute('style');d=f.match(b.textAlignRE);if(d&&d[1]){a='<div style="'+d[0]+'">'+a+'</div>'}}a=b.cleanHtml(a);if(b.fireEvent('beforesync',b,a)!==!1){if(Ext.isGecko&&c.value===''&&a==='<br>'){a=''}if(c.value!==a){c.value=a;g=!0}b.fireEvent('sync',b,a);if(g){b.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var a=this,b;if(a.initialized){b=a.textareaEl.dom.value||'';if(!a.activated&&b.length<1){b=a.defaultValue}if(a.fireEvent('beforepush',a,b)!==!1){a.getEditorBody().innerHTML=b;if(Ext.isGecko){a.setDesignMode(!1);a.setDesignMode(!0)}a.fireEvent('push',a,b)}}},focus:function(e,c){var a=this,d,b;if(c){if(!a.focusTask){a.focusTask=new Ext.util.DelayedTask(a.focus)}a.focusTask.delay(Ext.isNumber(c)?c:10,null,a,[e,!1])}else {if(e){if(a.textareaEl&&a.textareaEl.dom){d=a.textareaEl.dom.value}if(d&&d.length){a.execCmd('selectall',!0)}}b=a.getFocusEl();if(b&&b.focus){b.focus()}}return a},initEditor:function(){var a=this,e,f,d,c,b;if(a.destroying||a.destroyed){return}e=a.getEditorBody();if(!e){setTimeout(function(){a.initEditor()},10);return}f=a.textareaEl.getStyle(['font-size','font-family','background-image','background-repeat','background-color','color']);f['background-attachment']='fixed';e.bgProperties='fixed';Ext.DomHelper.applyStyles(e,f);d=a.getDoc();c=Ext.get(d);if(c){try{c.clearListeners()}catch(g){}b=a.onEditorEvent.bind(a);c.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:!1,buffer:100});b=a.onRelayedEvent;c.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:!1,scope:a});if(Ext.isGecko){c.on('keypress',a.applyCommand,a)}if(a.fixKeys){c.on('keydown',a.fixKeys,a,{delegated:!1})}if(a.fixKeysAfter){c.on('keyup',a.fixKeysAfter,a,{delegated:!1})}if(Ext.isIE9){Ext.get(d.documentElement).on('focus',a.focus,a)}if(Ext.isIE8){c.on('focusout',function(){a.savedSelection=d.selection.type!=='None'?d.selection.createRange():null},a);c.on('focusin',function(){if(a.savedSelection){a.savedSelection.select()}},a)}Ext.getWin().on('beforeunload',a.beforeDestroy,a);d.editorInitialized=!0;a.initialized=!0;a.pushValue();a.setReadOnly(a.readOnly);a.fireEvent('initialize',a)}},beforeDestroy:function(){var a=this,d=a.monitorTask,b,c;if(d){Ext.TaskManager.stop(d)}if(a.rendered){Ext.getWin().un(a.beforeDestroy,a);b=a.getDoc();if(b){Ext.get(b).destroy();if(b.hasOwnProperty){for(c in b){try{if(b.hasOwnProperty(c)){delete b[c]}}catch(e){}}}}delete a.iframeEl;delete a.textareaEl;delete a.toolbar;delete a.inputCmp}Ext.form.FieldContainer.prototype.beforeDestroy.call(this)},onRelayedEvent:function(a){var b=this.iframeEl,c=Ext.fly(b).getTrueXY(),e=a.getXY(),d=a.getXY();a.xy=[c[0]+d[0],c[1]+d[1]];a.injectEvent(b);a.xy=e},onFirstFocus:function(){var a=this,b,c;a.activated=!0;a.disableItems(a.readOnly);if(Ext.isGecko){a.win.focus();b=a.win.getSelection();if(b.focusNode&&!a.getValue().length){c=b.getRangeAt(0);c.selectNodeContents(a.getEditorBody());c.collapse(!0);a.deferFocus()}try{a.execCmd('useCSS',!0);a.execCmd('styleWithCSS',!1)}catch(d){}}a.fireEvent('activate',a)},adjustFont:function(e){var b=e.getItemId()==='increasefontsize'?1:-1,a=this.getDoc().queryCommandValue('FontSize')||'2',d=Ext.isString(a)&&a.indexOf('px')!==-1,c;a=parseInt(a,10);if(d){if(a<=10){a=1+b}else {if(a<=13){a=2+b}else {if(a<=16){a=3+b}else {if(a<=18){a=4+b}else {if(a<=24){a=5+b}else {a=6+b}}}}}a=Ext.Number.constrain(a,1,6)}else {c=Ext.isSafari;if(c){b*=2}a=Math.max(1,a+b)+(c?'px':0)}this.relayCmd('FontSize',a)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var a=this,c,i,h,g,b,d,f,e;if(a.readOnly){return}if(!a.activated){a.onFirstFocus();return}h=a.getToolbar().items.map;g=a.getDoc();if(a.enableFont&&!Ext.isSafari2){d=g.queryCommandValue('fontName');b=(d?d.split(',')[0].replace(a.reStripQuotes,''):a.defaultFont).toLowerCase();f=a.fontSelect.dom;if(b!==f.value||b!==d){f.value=b}}function updateButtons(){var a;for(c=0,i=arguments.length,b;c<i;c++){b=arguments[c];try{a=g.queryCommandState(b)}catch(j){a=!1}h[b].toggle(a)}}if(a.enableFormat){updateButtons('bold','italic','underline')}if(a.enableAlignments){updateButtons('justifyleft','justifycenter','justifyright')}if(!Ext.isSafari2&&a.enableLists){updateButtons('insertorderedlist','insertunorderedlist')}e=a.toolbar.query('menu');for(c=0;c<e.length;c++){e[c].hide()}a.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;if(!this.destroyed){c.win.focus();c.execCmd(b,a);c.updateToolbar()}},10,this)},execCmd:function(c,a){var b=this,d=b.getDoc();d.execCommand(c,!1,a===undefined?null:a);b.syncValue()},applyCommand:function(d){if(d.ctrlKey){var c=this,b=d.getCharCode(),a;if(b>0){b=String.fromCharCode(b);switch(b){case 'b':a='bold';break;case 'i':a='italic';break;case 'u':a='underline';break;}if(a){c.win.focus();c.execCmd(a);c.deferFocus();d.preventDefault()}}}},insertAtCursor:function(j){var e=this,g=e.getWin(),d=e.getDoc(),b,a,h,c,i,f,k;if(e.activated){g.focus();if(g.getSelection){b=g.getSelection();if(b.getRangeAt&&b.rangeCount){a=b.getRangeAt(0);a.deleteContents();h=d.createElement('div');h.innerHTML=j;c=d.createDocumentFragment();while(i=h.firstChild){f=c.appendChild(i)}k=c.firstChild;a.insertNode(c);if(f){a=a.cloneRange();a.setStartAfter(f);a.collapse(!0);b.removeAllRanges();b.addRange(a)}}}else {if(d.selection&&b.type!=='Control'){b=d.selection;a=b.createRange();a.collapse(!0);b.createRange().pasteHTML(j)}}e.deferFocus()}},fixKeys:function(){var a;if(Ext.isIE10m){return function(c){var b=this,f=c.getKey(),e=b.getDoc(),d=b.readOnly,a,g;if(f===c.TAB){c.stopEvent();if(!d){a=e.selection.createRange();if(a){if(a.collapse){a.collapse(!0);a.pasteHTML('&#160;&#160;&#160;&#160;')}b.deferFocus()}}}}}if(Ext.isOpera){return function(b){var a=this,d=b.getKey(),c=a.readOnly;if(d===b.TAB){b.stopEvent();if(!c){a.win.focus();a.execCmd('InsertHTML','&#160;&#160;&#160;&#160;');a.deferFocus()}}}}return null}(),fixKeysAfter:function(){if(Ext.isIE){return function(b){var d=this,e=b.getKey(),c=d.getDoc(),f=d.readOnly,a;if(!f&&(e===b.BACKSPACE||e===b.DELETE)){a=c.body.innerHTML;if(a==='<p>&nbsp;</p>'||a==='<P>&nbsp;</P>'){c.body.innerHTML=''}}}}return null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:'Bold (Ctrl+B)',text:'Make the selected text bold.',cls:'x-html-editor-tip'},italic:{title:'Italic (Ctrl+I)',text:'Make the selected text italic.',cls:'x-html-editor-tip'},underline:{title:'Underline (Ctrl+U)',text:'Underline the selected text.',cls:'x-html-editor-tip'},increasefontsize:{title:'Grow Text',text:'Increase the font size.',cls:'x-html-editor-tip'},decreasefontsize:{title:'Shrink Text',text:'Decrease the font size.',cls:'x-html-editor-tip'},backcolor:{title:'Text Highlight Color',text:'Change the background color of the selected text.',cls:'x-html-editor-tip'},forecolor:{title:'Font Color',text:'Change the color of the selected text.',cls:'x-html-editor-tip'},justifyleft:{title:'Align Text Left',text:'Align text to the left.',cls:'x-html-editor-tip'},justifycenter:{title:'Center Text',text:'Center text in the editor.',cls:'x-html-editor-tip'},justifyright:{title:'Align Text Right',text:'Align text to the right.',cls:'x-html-editor-tip'},insertunorderedlist:{title:'Bullet List',text:'Start a bulleted list.',cls:'x-html-editor-tip'},insertorderedlist:{title:'Numbered List',text:'Start a numbered list.',cls:'x-html-editor-tip'},createlink:{title:'Hyperlink',text:'Make the selected text a hyperlink.',cls:'x-html-editor-tip'},sourceedit:{title:'Source Edit',text:'Switch to source editing mode.',cls:'x-html-editor-tip'}},privates:{deferFocus:function(){this.focus(!1,!0)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}},0,['htmleditor'],['component','box','container','fieldcontainer','htmleditor'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0,'htmleditor':!0},['widget.htmleditor'],[['field',Ext.form.field.Field]],[Ext.form.field,'HtmlEditor',Ext.form,'HtmlEditor'],0);Ext.define('Ext.theme.neptune.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',defaultButtonUI:'plain-toolbar'});Ext.onReady(function(){if(Ext.data&&Ext.data.Types){Ext.data.Types.stripRe=/[\$,%]/g}if(Ext.Date){Ext.Date.monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];Ext.Date.getShortMonthName=function(a){return Ext.Date.monthNames[a].substring(0,3)};Ext.Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)};Ext.Date.parseCodes.S.s='(?:st|nd|rd|th)'}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:',',decimalSeparator:'.',currencySign:'$',dateFormat:'m/d/Y'})}});Ext.define('Ext.locale.en.data.validator.Bound',{override:'Ext.data.validator.Bound',emptyMessage:'Must be present'});Ext.define('Ext.locale.en.data.validator.Email',{override:'Ext.data.validator.Email',message:'Is not a valid email address'});Ext.define('Ext.locale.en.data.validator.Exclusion',{override:'Ext.data.validator.Exclusion',message:'Is a value that has been excluded'});Ext.define('Ext.locale.en.data.validator.Format',{override:'Ext.data.validator.Format',message:'Is in the wrong format'});Ext.define('Ext.locale.en.data.validator.Inclusion',{override:'Ext.data.validator.Inclusion',message:'Is not in the list of acceptable values'});Ext.define('Ext.locale.en.data.validator.Length',{override:'Ext.data.validator.Length',minOnlyMessage:'Length must be at least {0}',maxOnlyMessage:'Length must be no more than {0}',bothMessage:'Length must be between {0} and {1}'});Ext.define('Ext.locale.en.data.validator.Presence',{override:'Ext.data.validator.Presence',message:'Must be present'});Ext.define('Ext.locale.en.data.validator.Range',{override:'Ext.data.validator.Range',minOnlyMessage:'Must be must be at least {0}',maxOnlyMessage:'Must be no more than than {0}',bothMessage:'Must be between {0} and {1}',nanMessage:'Must be numeric'});Ext.define('Ext.locale.en.view.View',{override:'Ext.view.View',emptyText:''});Ext.define('Ext.locale.en.grid.plugin.DragDrop',{override:'Ext.grid.plugin.DragDrop',dragText:'{0} selected row{1}'});Ext.define('Ext.locale.en.view.AbstractView',{override:'Ext.view.AbstractView',loadingText:'Loading...'});Ext.define('Ext.locale.en.picker.Date',{override:'Ext.picker.Date',todayText:'Today',minText:'This date is before the minimum date',maxText:'This date is after the maximum date',disabledDaysText:'',disabledDatesText:'',nextText:'Next Month (Control+Right)',prevText:'Previous Month (Control+Left)',monthYearText:'Choose a month (Control+Up/Down to move years)',todayTip:'{0} (Spacebar)',format:'m/d/y',startDay:0});Ext.define('Ext.locale.en.picker.Month',{override:'Ext.picker.Month',okText:'&#160;OK&#160;',cancelText:'Cancel'});Ext.define('Ext.locale.en.toolbar.Paging',{override:'Ext.PagingToolbar',beforePageText:'Page',afterPageText:'of {0}',firstText:'First Page',prevText:'Previous Page',nextText:'Next Page',lastText:'Last Page',refreshText:'Refresh',displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display'});Ext.define('Ext.locale.en.form.Basic',{override:'Ext.form.Basic',waitTitle:'Please Wait...'});Ext.define('Ext.locale.en.form.field.Base',{override:'Ext.form.field.Base',invalidText:'The value in this field is invalid'});Ext.define('Ext.locale.en.form.field.Text',{override:'Ext.form.field.Text',minLengthText:'The minimum length for this field is {0}',maxLengthText:'The maximum length for this field is {0}',blankText:'This field is required',regexText:'',emptyText:null});Ext.define('Ext.locale.en.form.field.Number',{override:'Ext.form.field.Number',decimalPrecision:2,minText:'The minimum value for this field is {0}',maxText:'The maximum value for this field is {0}',nanText:'{0} is not a valid number'});Ext.define('Ext.locale.en.form.field.Date',{override:'Ext.form.field.Date',disabledDaysText:'Disabled',disabledDatesText:'Disabled',minText:'The date in this field must be after {0}',maxText:'The date in this field must be before {0}',invalidText:'{0} is not a valid date - it must be in the format {1}',format:'m/d/y',altFormats:'m/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d'});Ext.define('Ext.locale.en.form.field.ComboBox',{override:'Ext.form.field.ComboBox',valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:'Loading...'})});Ext.define('Ext.locale.en.form.field.VTypes',{override:'Ext.form.field.VTypes',emailText:'This field should be an e-mail address in the format "user@example.com"',urlText:'This field should be a URL in the format "http://www.example.com"',alphaText:'This field should only contain letters and _',alphanumText:'This field should only contain letters, numbers and _'});Ext.define('Ext.locale.en.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',createLinkText:'Please enter the URL for the link:'},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:'Bold (Ctrl+B)',text:'Make the selected text bold.',cls:'x-html-editor-tip'},italic:{title:'Italic (Ctrl+I)',text:'Make the selected text italic.',cls:'x-html-editor-tip'},underline:{title:'Underline (Ctrl+U)',text:'Underline the selected text.',cls:'x-html-editor-tip'},increasefontsize:{title:'Grow Text',text:'Increase the font size.',cls:'x-html-editor-tip'},decreasefontsize:{title:'Shrink Text',text:'Decrease the font size.',cls:'x-html-editor-tip'},backcolor:{title:'Text Highlight Color',text:'Change the background color of the selected text.',cls:'x-html-editor-tip'},forecolor:{title:'Font Color',text:'Change the color of the selected text.',cls:'x-html-editor-tip'},justifyleft:{title:'Align Text Left',text:'Align text to the left.',cls:'x-html-editor-tip'},justifycenter:{title:'Center Text',text:'Center text in the editor.',cls:'x-html-editor-tip'},justifyright:{title:'Align Text Right',text:'Align text to the right.',cls:'x-html-editor-tip'},insertunorderedlist:{title:'Bullet List',text:'Start a bulleted list.',cls:'x-html-editor-tip'},insertorderedlist:{title:'Numbered List',text:'Start a numbered list.',cls:'x-html-editor-tip'},createlink:{title:'Hyperlink',text:'Make the selected text a hyperlink.',cls:'x-html-editor-tip'},sourceedit:{title:'Source Edit',text:'Switch to source editing mode.',cls:'x-html-editor-tip'}}})});Ext.define('Ext.locale.en.grid.header.Container',{override:'Ext.grid.header.Container',sortAscText:'Sort Ascending',sortDescText:'Sort Descending',columnsText:'Columns'});Ext.define('Ext.locale.en.grid.GroupingFeature',{override:'Ext.grid.feature.Grouping',emptyGroupText:'(None)',groupByText:'Group by this field',showGroupsText:'Show in Groups'});Ext.define('Ext.locale.en.grid.PropertyColumnModel',{override:'Ext.grid.PropertyColumnModel',nameText:'Name',valueText:'Value',dateFormat:'m/j/Y',trueText:'true',falseText:'false'});Ext.define('Ext.locale.en.grid.BooleanColumn',{override:'Ext.grid.BooleanColumn',trueText:'true',falseText:'false',undefinedText:'&#160;'});Ext.define('Ext.locale.en.grid.NumberColumn',{override:'Ext.grid.NumberColumn',format:'0,000.00'});Ext.define('Ext.locale.en.grid.DateColumn',{override:'Ext.grid.DateColumn',format:'m/d/Y'});Ext.define('Ext.locale.en.form.field.Time',{override:'Ext.form.field.Time',minText:'The time in this field must be equal to or after {0}',maxText:'The time in this field must be equal to or before {0}',invalidText:'{0} is not a valid time',format:'g:i A',altFormats:'g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H'});Ext.define('Ext.locale.en.form.field.File',{override:'Ext.form.field.File',buttonText:'Browse...'});Ext.define('Ext.locale.en.form.CheckboxGroup',{override:'Ext.form.CheckboxGroup',blankText:'You must select at least one item in this group'});Ext.define('Ext.locale.en.form.RadioGroup',{override:'Ext.form.RadioGroup',blankText:'You must select one item in this group'});Ext.define('Ext.locale.en.window.MessageBox',{override:'Ext.window.MessageBox',buttonText:{ok:'OK',cancel:'Cancel',yes:'Yes',no:'No'}});Ext.define('Ext.locale.en.grid.filters.Filters',{override:'Ext.grid.filters.Filters',menuFilterText:'Filters'});Ext.define('Ext.locale.en.grid.filters.filter.Boolean',{override:'Ext.grid.filters.filter.Boolean',yesText:'Yes',noText:'No'});Ext.define('Ext.locale.en.grid.filters.filter.Date',{override:'Ext.grid.filters.filter.Date',fields:{lt:{text:'Before'},gt:{text:'After'},eq:{text:'On'}},dateFormat:null});Ext.define('Ext.locale.en.grid.filters.filter.List',{override:'Ext.grid.filters.filter.List',loadingText:'Loading...'});Ext.define('Ext.locale.en.grid.filters.filter.Number',{override:'Ext.grid.filters.filter.Number',emptyText:'Enter Number...'});Ext.define('Ext.locale.en.grid.filters.filter.String',{override:'Ext.grid.filters.filter.String',emptyText:'Enter Filter Text...'});Ext.define('Ext.locale.en.Component',{override:'Ext.Component'});Ext.define('Ext.overrides.app.domain.Component',{override:'Ext.app.domain.Component'},function(a){a.monitor(Ext.Component)});Ext.cmd.derive('Ext.app.EventBus',Ext.Base,{singleton:!0,constructor:function(){var a=this,b=Ext.app.EventDomain.instances;a.callParent();a.domains=b;a.bus=b.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(b,c){var d=this.domains,a;for(a in b){if(b.hasOwnProperty(a)){d[a].listen(b[a],c)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,'EventBus'],0);Ext.cmd.derive('Ext.app.domain.Global',Ext.app.EventDomain,{singleton:!0,type:'global',constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,'Global'],0);Ext.cmd.derive('Ext.app.BaseController',Ext.Base,{isController:!0,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(b){var a=this;Ext.apply(a,b);delete a.control;delete a.listen;a.eventbus=Ext.app.EventBus;a.mixins.observable.constructor.call(a,b);a.ensureId()},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.ensureId();if(a){this.control(a)}},updateListen:function(a){this.ensureId();if(a){this.listen(a)}},updateRoutes:function(b){if(b){var e=this,f=e.getBefore()||{},g=Ext.app.route.Router,c,a,d;for(c in b){a=b[c];if(Ext.isString(a)){a={action:a}}d=a.action;if(!a.before){a.before=f[d]}g.connect(c,a,e)}}},isActive:function(){return !0},control:function(b,c,f){var e=this,d=f,a;if(Ext.isString(b)){a={};a[b]=c}else {a=b;d=c}e.eventbus.control(a,d||e)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var a=this,b=a.eventbus;Ext.app.route.Router.disconnectAll(a);if(b){b.unlisten(a);a.eventbus=null}a.callParent()},redirectTo:function(a,c){if(a.isModel){a=a.toUrl()}if(!c){var b=Ext.util.History.getToken();if(b===a){return !1}}else {Ext.app.route.Router.onStateChange(a)}Ext.util.History.add(a);return !0}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,'BaseController'],0);Ext.cmd.derive('Ext.app.Util',Ext.Base,{},0,0,0,0,0,0,[Ext.app,'Util'],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(a){var d=Ext.app.namespaces,b,c;if(!Ext.isArray(a)){a=[a]}for(b=0,c=a.length;b<c;b++){d[a[b]]=!0}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var c=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),b='',a;for(a in c){if(c.hasOwnProperty(a)&&a.length>b.length&&a+'.'===d.substring(0,a.length+1)){b=a}}return b===''?undefined:b},setupPaths:function(e,b,c){var a=Ext.manifest,d;if(e&&b!==null){a=a&&a.paths;if(!a||b!==undefined){Ext.Loader.setPath(e,b===undefined?'app':b)}}if(c){for(d in c){if(c.hasOwnProperty(d)){Ext.Loader.setPath(d,c[d])}}}}});Ext.getNamespace=Ext.app.getNamespace});Ext.cmd.derive('Ext.app.domain.Store',Ext.app.EventDomain,{singleton:!0,type:'store',prefix:'store.',idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(this.idMatchRe.test(a)){b=c.getStoreId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}return b}},1,0,0,0,0,0,[Ext.app.domain,'Store'],0);Ext.cmd.derive('Ext.app.route.Queue',Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var c=this.queue,a=c.removeAt(0),b;if(a){b=a&&a.route;b.execute(this.token,a.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else {this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,'Queue'],0);Ext.cmd.derive('Ext.app.route.Route',Ext.Base,{action:null,conditions:null,controller:null,allowInactive:!1,url:null,before:null,caseInsensitive:!1,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(c){var a=this,b;Ext.apply(a,c,{conditions:{}});b=a.url;a.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);a.paramsInMatchString=b.match(a.paramMatchingRegex)||[];a.matcherRegex=a.createMatcherRegex(b)},recognize:function(b){var a=this,d=a.controller,e,c;if((a.allowInactive||d.isActive())&&a.recognizes(b)){e=a.matchesFor(b);c=b.match(a.matcherRegex);c.shift();return Ext.applyIf(e,{controller:d,action:a.action,historyUrl:b,args:c})}return !1},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(h,d,f,g){var e=d.args||[],a=this.before,c=this.controller,b=this.createCallback(d,f,g);if(a){e.push(b);if(Ext.isString(a)){a=this.before=c[a]}if(a){a.apply(c,e)}}else {b.resume()}},matchesFor:function(f){var b={},d=this.paramsInMatchString,c=f.match(this.matcherRegex),a=0,e=d.length;c.shift();for(;a<e;a++){b[d[a].replace(':','')]=c[a]}return b},createMatcherRegex:function(b){var d=this.paramsInMatchString,g=this.conditions,c=0,j=d.length,i=Ext.util.Format.format,h=this.caseInsensitive?'i':'',a,f,e;for(;c<j;c++){a=d[c];f=g[a];e=i('{0}',f||'([%a-zA-Z0-9\\-\\_\\s,]+)');b=b.replace(new RegExp(a),e)}return new RegExp('^'+b+'$',h)},createCallback:function(a,b,c){var d=this;c=c||d;return {resume:function(){var g=d.controller,e=d.action,f;if(Ext.isString(e)){e=g[e]}a=a&&a.args?a.args:[];f=a.pop();if(f&&!Ext.isObject(f)){a.push(f)}if(e){d.action=e;e.apply(g,a)}if(b){b.call(c)}},stop:function(d){if(b){b.call(c,d)}}}}},1,0,0,0,0,0,[Ext.app.route,'Route'],0);Ext.cmd.derive('Ext.util.History',Ext.Base,{singleton:!0,alternateClassName:'Ext.History',useTopWindow:!1,constructor:function(){var a=this;a.hiddenField=null;a.ready=!1;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(a){try{this.win.location.hash=a;this.currentToken=a}catch(b){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent('change',a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on('hashchange',a.onHashChange,a)}else {Ext.TaskManager.start({fireIdleEvent:!1,run:a.onHashChange,interval:50,scope:a})}a.ready=!0;a.fireEvent('ready',a)},onHashChange:function(){var a=this,b=a.getHash();if(b!==a.hash){a.hash=b;a.handleStateChange(b)}},init:function(b,c){var a=this;if(a.ready){Ext.callback(b,c,[a]);return}if(!Ext.isReady){Ext.onInternalReady(function(){a.init(b,c)});return}a.win=a.useTopWindow?window.top:window;a.hash=a.getHash();if(b){a.on('ready',b,c,{single:!0})}a.startUp()},add:function(a,d){var c=this,b=!1;if(d===!1||c.getToken()!==a){c.setHash(a);b=!0}return b},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.util,'History',Ext,'History'],0);Ext.cmd.derive('Ext.app.route.Router',Ext.Base,{singleton:!0,multipleToken:'|',queueRoutes:!0,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on('change',this.onStateChange,this);this.clear()},onStateChange:function(a){var d=this,l=d.application,j=d.routes,n=j.length,f=d.queueRoutes,k=a.split(d.multipleToken),i=0,m=k.length,e,h,b,c,g;for(;i<m;i++){a=k[i];g=!1;if(f){h=new Ext.app.route.Queue({token:a})}for(e=0;e<n;e++){b=j[e];c=b.recognize(a);if(c){g=!0;if(f){h.queueAction(b,c)}else {b.execute(a,c)}}}if(f){h.runQueue()}if(!g&&l){l.fireEvent('unmatchedroute',a)}}},connect:function(d,a,c){var b={url:d,action:a,controller:c};if(Ext.isObject(a)){Ext.merge(b,a)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(e){var d=this.routes,f=d.length,c=[],a,b;for(a=0;a<f;++a){b=d[a];if(b.controller!==e){c.push(b)}}this.routes=c},recognize:function(f){var d=this.routes||[],c=0,e=d.length,a,b;for(;c<e;c++){a=d[c];b=a.recognize(f);if(b){return {route:a,args:b}}}return !1},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,'Router'],0);Ext.cmd.derive('Ext.app.Controller',Ext.app.BaseController,{statics:{strings:{model:{getter:'getModel',upper:'Model'},view:{getter:'getView',upper:'View'},controller:{getter:'getController',upper:'Controller'},store:{getter:'getStore',upper:'Store'},profile:{getter:'getProfile',upper:'Profiles'}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(f,d){var b='get',c=f.split('.'),e=c.length,a;for(a=0;a<e;a++){b+=Ext.String.capitalize(c[a])}b+=d;return b},resolveNamespace:function(f,e){var b=Ext.app.Controller,g=f.prototype.isProfile?b.profileRegex:b.controllerRegex,a,c,d;a=Ext.getClassName(f);c=e.$namespace||e.namespace||Ext.app.getNamespace(a)||(d=g.exec(a))&&d[1];return c},processDependencies:function(m,p,o,f,a,n){if(!a||!a.length){return}var c=this,k=c.strings[f],h,i,j,g,b,l,d,e;if(!Ext.isArray(a)){a=[a]}for(b=0,l=a.length;b<l;b++){g=a[b];h=c.getFullName(g,f,o,n);a[b]=i=h.absoluteName;j=h.shortName;p.push(i);d=c.getGetterName(j,k.upper);if(!m[d]){m[d]=e=c.createGetter(k.getter,g)}if(e&&f!=='controller'){e['Ext.app.getter']=!0}}},getFullName:function(a,g,f,e){var c=a,d,b;if((d=a.indexOf('@'))>0){c=a.substring(0,d);b=a.substring(d+1)+'.'+c}else {if(a.indexOf('.')>0&&(Ext.ClassManager.isCreated(a)||this.hasRegisteredPrefix(a))){b=a}else {if(f){b=f+'.'+g+'.'+(e?e+'.'+a:a);c=a}else {b=a}}}return {absoluteName:b,shortName:c}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(d,c,a){var b=a.onBeforeCreated;a.onBeforeCreated=function(j,i){var g=Ext.app.Controller,h=[],e,f;f=j.prototype;e=g.resolveNamespace(j,i);if(e){f.$namespace=e}g.processDependencies(f,h,e,'model',i.models);g.processDependencies(f,h,e,'view',i.views);g.processDependencies(f,h,e,'store',i.stores);g.processDependencies(f,h,e,'controller',i.controllers);Ext.require(h,Ext.Function.pass(b,arguments,this))}},constructor:function(a){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(a){var c=this,b=[];if(a){if(Ext.isObject(a)){Ext.Object.each(a,function(d,c){if(Ext.isString(c)){c={selector:c}}c.ref=d;b.push(c)})}else {if(Ext.isArray(a)){b=Ext.Array.merge(b,a)}}}a=c.refs;if(a){c.refs=null;a=c.normalizeRefs(a);if(a){b=Ext.Array.merge(b,a)}}return b},getRefMap:function(){var e=this,a=e._refMap,b,d,f,c;if(!a){b=e.getRefs();a=e._refMap={};if(b){for(c=0,f=b.length;c<f;c++){d=b[c];a[d.ref]=d.selector}}}return a},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a['Ext.app.getter']){a.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=!0}},finishInit:function(f){var c=this,a=c.controllers,d,b,e;if(c._initialized&&a&&a.length){for(b=0,e=a.length;b<e;b++){d=c.getController(a[b]);d.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(b){var a=this,f=0,g=b.length,d,c,e;b=Ext.Array.from(b);a.references=a.references||[];for(;f<g;f++){d=b[f];c=d.ref;e='get'+Ext.String.capitalize(c);if(!a[e]){a[e]=Ext.Function.pass(a.getRef,[c,d],a)}a.references.push(c.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,a,e){var f=this,c=f.refCache||(f.refCache={}),b=c[d];a=a||{};e=e||{};Ext.apply(a,e);if(a.forceCreate){return Ext.ComponentManager.create(a,'component')}if(!b){if(a.selector){c[d]=b=Ext.ComponentQuery.query(a.selector)[0]}if(!b&&a.autoCreate){c[d]=b=Ext.ComponentManager.create(a,'component')}if(b){b.on('beforedestroy',function(){c[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(a){var c,b;c=a.indexOf('@')===-1?a:a.split('@')[0];b=Ext.StoreManager.get(c);if(!b){a=Ext.app.Controller.getFullName(a,'store',this.$namespace);if(a){b=Ext.create(a.absoluteName,{id:c})}}return b},getModel:function(b){var c=Ext.app.Controller.getFullName(b,'model',this.$namespace),a=Ext.ClassManager.get(c.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(b)}return a},getProfile:function(a){a=Ext.app.Controller.getFullName(a,'profile',this.$namespace);return a},getView:function(b){var a=Ext.app.Controller.getFullName(b,'view',this.$namespace);return a&&Ext.ClassManager.get(a.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,'controller'))}},destroy:function(e,f){var b=this,d=b.application,a,c;if(!f&&d){d.unregister(b)}b.application=null;if(e){a=b.refCache;for(c in a){if(a.hasOwnProperty(c)){Ext.destroy(a[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,'Controller'],0);Ext.cmd.derive('Ext.app.Application',Ext.app.Controller,{isApplication:!0,scope:undefined,namespaces:[],paths:null,config:{name:'',appProperty:'app',profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null},onClassExtended:function(d,a,f){var h=Ext.app.Controller,g=d.prototype,c=[],e,i,b,j;b=a.name||d.superclass.name;if(b){a.$namespace=b;Ext.app.addNamespaces(b)}if(a.namespaces){Ext.app.addNamespaces(a.namespaces)}if(a['paths processed']){delete a['paths processed']}else {Ext.app.setupPaths(b,'appFolder' in a?a.appFolder:d.superclass.appFolder,a.paths)}h.processDependencies(g,c,b,'profile',a.profiles);g.getDependencies(d,a,c);if(c.length){e=f.onBeforeCreated;f.onBeforeCreated=function(h,g){var b=Ext.Array.clone(arguments);Ext.require(c,function(){return e.apply(this,b)})}}},getDependencies:Ext.emptyFn,constructor:function(b){var a=this;Ext.app.route.Router.application=a;Ext.app.Controller.prototype.constructor.apply(this,arguments);a.doInit(a);a.initNamespace();Ext.on('appupdate',a.onAppUpdate,a,{single:!0});this.onProfilesReady()},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var a=this,e=a.getProfiles(),f=e.length,b,c,d;for(c=0;c<f;c++){d=Ext.create(e[c],{application:a});if(d.isActive()&&!b){b=d;a.setCurrentProfile(b)}}if(b){b.init()}a.initControllers();a.onBeforeLaunch();a.finishInitControllers()},initNamespace:function(){var b=this,c=b.getAppProperty(),a;a=Ext.namespace(b.getName());if(a){a.getApplication=function(){return b};if(c){if(!a[c]){a[c]=b}}}},initControllers:function(){var c=this,b=Ext.Array.from(c.controllers),e=c.getCurrentProfile(),a,d;c.controllers=new Ext.util.MixedCollection();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}if(e){b=e.getControllers();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}}},finishInitControllers:function(){var c=this,b,a,d;b=c.controllers.getRange();for(a=0,d=b.length;a<d;a++){b[a].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var a=this,b=Ext.util.History,e=a.getDefaultToken(),g=a.getCurrentProfile(),f,d,i,h,c;a.initMainView();if(g){g.launch()}a.launch.call(a.scope||a);a.launched=!0;a.fireEvent('launch',a);f=a.controllers.items;i=f.length;for(d=0;d<i;d++){h=f[d];h.onLaunch(a)}if(!b.ready){b.init()}c=b.getToken();if(c||c===e){Ext.app.route.Router.onStateChange(c)}else {if(e){b.add(e)}}if(Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated){Ext.Microloader.fireAppUpdate()}Ext.defer(Ext.ClassManager.clearNamespaceCache,2000,Ext.ClassManager)},getModuleClassName:function(b,a){return Ext.app.Controller.getFullName(b,a,this.getName()).absoluteName},initMainView:function(){var b=this,c=b.getCurrentProfile(),a;if(c){a=c.getMainView()}if(a){b.setMainView(a)}else {b.getMainView()}},applyMainView:function(a){var b=this.getView(a);return b.create()},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==='string'){a=this.getController(a,!0)}Ext.destroy(a)},getController:function(d,j){var c=this,f=c.controllers,b,a,i,e,h,g;a=f.get(d);if(!a){g=f.items;for(e=0,i=g.length;e<i;++e){h=g[e];b=h.getModuleClassName();if(b&&b===d){a=h;break}}}if(!a&&!j){b=c.getModuleClassName(d,'controller');a=Ext.create(b,{application:c,moduleClassName:d});f.add(a);if(c._initialized){a.doInit(c)}}return a},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(d){var a=this,c=a.controllers,b=Ext.namespace(a.getName()),e=a.getAppProperty();Ext.destroy(a.viewport);if(c){c.each(function(a){a.destroy(d,!0)})}a.controllers=null;Ext.app.Controller.prototype.destroy.call(this,d,!0);if(b&&b[e]===a){delete b[e]}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)},applyProfiles:function(a){var b=this;return Ext.Array.map(a,function(c){return b.getModuleClassName(c,'profile')})}},1,0,0,0,0,0,[Ext.app,'Application'],0);Ext.application=function(a){var b=function(b){Ext.onReady(function(){var c=Ext.viewport;c=c&&c['Viewport'];if(c&&c.setup){c.setup(b.prototype.config.viewport)}Ext.app.Application.instance=new b()})};if(typeof a==='string'){Ext.require(a,function(){b(Ext.ClassManager.get(a))})}else {a=Ext.apply({extend:'Ext.app.Application'},a);Ext.app.setupPaths(a.name,a.appFolder,a.paths);a['paths processed']=!0;Ext.define(a.name+'.$application',a,function(){b(this)})}};Ext.define(null,{override:'Ext.event.publisher.Focus',compatibility:Ext.isIE10m,doDelegatedEvent:function(a,d){var c=document.body,b=Ext.synchronouslyFocusing;if(b&&(a.type==='focusout'&&a.srcElement===b&&a.toElement===c||a.type==='focusin'&&a.srcElement===c&&a.fromElement===b&&a.toElement===null)){return}return this.callParent([a,d])}});Ext.define(null,{override:'Ext.scroll.DomScroller',compatibility:Ext.isIE8,privates:{doScrollTo:function(a,b,j){var c=this,f=c.getElement(),e,d,i,g,h;if(f&&!f.destroyed){d=this.getElement().dom;g=a===Infinity;h=b===Infinity;if(g||h){e=c.getMaxPosition();if(g){a=e.x}if(h){b=e.y}}a=c.convertX(a);if(j){i={};if(b!=null){i.scrollTop=b}if(a!=null){i.scrollLeft=a}f.animate(Ext.mergeIf({to:{scrollTop:b,scrollLeft:a}},j))}else {if(a!=null&&b!=null){c.deferDomScroll=!0}if(b!=null){d.scrollTop=b}if(a!=null){d.scrollLeft=a}if(c.deferDomScroll){c.deferDomScroll=!1;+d.scrollLeft;d.scrollLeft=a}}c.positionDirty=!0}},onDomScroll:function(){var a=this;if(a.deferDomScroll){return}a.callParent()}}});Ext.cmd.derive('Sch.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!Sch.locale.Active){Sch.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=Sch.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in Sch.locale.Active){Sch.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {Sch.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[Sch.locale,'Locale'],0);Ext.cmd.derive('Sch.locale.En',Sch.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'Sch.util.Date':{unitNames:{YEAR:{single:'year',plural:'years',abbrev:'yr'},QUARTER:{single:'quarter',plural:'quarters',abbrev:'q'},MONTH:{single:'month',plural:'months',abbrev:'mon'},WEEK:{single:'week',plural:'weeks',abbrev:'w'},DAY:{single:'day',plural:'days',abbrev:'d'},HOUR:{single:'hour',plural:'hours',abbrev:'h'},MINUTE:{single:'minute',plural:'minutes',abbrev:'min'},SECOND:{single:'second',plural:'seconds',abbrev:'s'},MILLI:{single:'ms',plural:'ms',abbrev:'ms'}}},'Sch.panel.TimelineGridPanel':{weekStartDay:1,loadingText:'Loading, please wait...',savingText:'Saving changes, please wait...'},'Sch.panel.TimelineTreePanel':{weekStartDay:1,loadingText:'Loading, please wait...',savingText:'Saving changes, please wait...'},'Sch.mixin.SchedulerView':{loadingText:'Loading events...'},'Sch.plugin.CurrentTimeLine':{tooltipText:'Current time'},'Sch.widget.EventEditor':{saveText:'Save',deleteText:'Delete',cancelText:'Cancel',nameText:'Name',startDateText:'Start',endDateText:'End',resourceText:'Resource'},'Sch.plugin.SimpleEditor':{newEventText:'New booking...'},'Sch.widget.ExportDialogForm':{formatFieldLabel:'Paper format',orientationFieldLabel:'Orientation',rangeFieldLabel:'Schedule range',showHeaderLabel:'Show header',showFooterLabel:'Show footer',orientationPortraitText:'Portrait',orientationLandscapeText:'Landscape',completeViewText:'Complete schedule',currentViewText:'Visible schedule',dateRangeText:'Date range',dateRangeFromText:'Export from',dateRangeToText:'Export to',exportersFieldLabel:'Control pagination',adjustCols:'Adjust column width',adjustColsAndRows:'Adjust column width and row height',specifyDateRange:'Specify date range',columnPickerLabel:'Select columns',completeDataText:'Complete schedule (for all events)',dpiFieldLabel:'DPI (dots per inch)',rowsRangeLabel:'Rows range',allRowsLabel:'All rows',visibleRowsLabel:'Visible rows',columnEmptyText:'[no title]'},'Sch.widget.ExportDialog':{title:'Export Settings',exportButtonText:'Export',cancelButtonText:'Cancel',progressBarText:'Exporting...'},'Sch.plugin.Export':{generalError:'An error occurred',fetchingRows:'Fetching row {0} of {1}',builtPage:'Built page {0} of {1}',requestingPrintServer:'Please wait...'},'Sch.plugin.Printable':{dialogTitle:'Print settings',exportButtonText:'Print'},'Sch.plugin.exporter.AbstractExporter':{name:'Exporter'},'Sch.plugin.exporter.SinglePage':{name:'Single page'},'Sch.plugin.exporter.MultiPageVertical':{name:'Multiple pages (vertically)'},'Sch.plugin.exporter.MultiPage':{name:'Multiple pages'},'Sch.column.ResourceName':{name:'Name'},'Sch.template.DependencyInfo':{fromText:'From',toText:'To'},'Sch.preset.Manager':{hourAndDay:{displayDateFormat:'G:i',middleDateFormat:'G:i',topDateFormat:'D d/m'},secondAndMinute:{displayDateFormat:'g:i:s',topDateFormat:'D, d g:iA'},dayAndWeek:{displayDateFormat:'m/d h:i A',middleDateFormat:'D d M'},weekAndDay:{displayDateFormat:'m/d',bottomDateFormat:'d M',middleDateFormat:'Y F d'},weekAndMonth:{displayDateFormat:'m/d/Y',middleDateFormat:'m/d',topDateFormat:'m/d/Y'},weekAndDayLetter:{displayDateFormat:'m/d/Y',middleDateFormat:'D d M Y'},weekDateAndMonth:{displayDateFormat:'m/d/Y',middleDateFormat:'d',topDateFormat:'Y F'},monthAndYear:{displayDateFormat:'m/d/Y',middleDateFormat:'M Y',topDateFormat:'Y'},year:{displayDateFormat:'m/d/Y',middleDateFormat:'Y'},manyYears:{displayDateFormat:'m/d/Y',middleDateFormat:'Y'}}}});this.callParent(arguments)}},1,0,0,0,0,0,[Sch.locale,'En'],0);Ext.cmd.derive('Sch.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in Sch.locale.Active){if(a===Sch.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in Sch.locale.Active){Sch.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[Sch.mixin,'Localizable'],0);Ext.cmd.derive('Gnt.locale.En',Sch.locale.Locale,{singleton:!0,l10n:{'Gnt.util.DurationParser':{unitsRegex:{MILLI:/^ms$|^mil/i,SECOND:/^s$|^sec/i,MINUTE:/^m$|^min/i,HOUR:/^h$|^hr$|^hour/i,DAY:/^d$|^day/i,WEEK:/^w$|^wk|^week/i,MONTH:/^mo|^mnt/i,QUARTER:/^q$|^quar|^qrt/i,YEAR:/^y$|^yr|^year/i}},'Gnt.util.DependencyParser':{typeText:{SS:'SS',SF:'SF',FS:'FS',FF:'FF'}},'Gnt.panel.Timeline':{start:'Start',end:'End',format:'m/d/Y'},'Gnt.field.ShowInTimeline':{yes:'Yes',no:'No'},'Gnt.column.ShowInTimeline':{text:'Show in timeline'},'Gnt.field.ConstraintType':{none:'None',invalidText:'Invalid value'},'Gnt.field.Duration':{invalidText:'Invalid value'},'Gnt.field.Effort':{invalidText:'Invalid value'},'Gnt.field.Percent':{invalidText:'Invalid value'},'Gnt.field.SchedulingMode':{Normal:'Normal',FixedDuration:'Fixed duration',EffortDriven:'Effort driven',DynamicAssignment:'Dynamic assignment',invalidText:'Invalid value'},'Gnt.template.Deadline':{deadline:'Deadline'},'Gnt.column.DeadlineDate':{text:'Deadline'},'Gnt.Tooltip':{startText:'Starts: ',endText:'Ends: ',durationText:'Duration: '},'Gnt.template.TaskTooltip':{startText:'Start',endText:'End',percentText:'Complete',format:'m/d/Y'},'Gnt.plugin.TaskContextMenu':{taskInformation:'Task information...',projectInformation:'Project information...',newTaskText:'New task',deleteTask:'Delete task(s)',editLeftLabel:'Edit left label',editRightLabel:'Edit right label',add:'Add...',deleteDependency:'Delete dependency...',addTaskAbove:'Task above',addTaskAboveMilestone:'Phase above',addTaskBelow:'Task below',addTaskBelowMilestone:'Phase below',addMilestone:'Milestone',addSubtask:'Sub-task',addSubtaskMilestone:'Sub-Phase',addSuccessor:'Successor',addPredecessor:'Predecessor',convertToMilestone:'Convert to milestone',convertToRegular:'Convert to regular task',splitTask:'Split task'},'Gnt.plugin.DependencyEditor':{fromText:'From',toText:'To',typeText:'Type',lagText:'Lag',endToStartText:'Finish-To-Start',startToStartText:'Start-To-Start',endToEndText:'Finish-To-Finish',startToEndText:'Start-To-Finish',okButtonText:'Ok',cancelButtonText:'Cancel',deleteButtonText:'Delete'},'Gnt.widget.calendar.Calendar':{dayOverrideNameHeaderText:'Name',overrideName:'Name',startDate:'Start Date',endDate:'End Date',error:'Error',dateText:'Date',addText:'Add',editText:'Edit',removeText:'Remove',workingDayText:'Working day',weekendsText:'Weekends',overriddenDayText:'Overridden day',overriddenWeekText:'Overridden week',workingTimeText:'Working time',nonworkingTimeText:'Non-working time',dayOverridesText:'Day overrides',weekOverridesText:'Week overrides',okText:'OK',cancelText:'Cancel',parentCalendarText:'Parent calendar',noParentText:'No parent',selectParentText:'Select parent',newDayName:'[Without name]',calendarNameText:'Calendar name',isProjectCalendarText:'Project calendar',tplTexts:{tplWorkingHours:'Working hours for',tplIsNonWorking:'is non-working',tplOverride:'override',tplInCalendar:'in calendar',tplDayInCalendar:'standard day in calendar',tplBasedOn:'Based on'},overrideErrorText:'There is already an override for this day',overrideDateError:'There is already a week override on this date: {0}',startAfterEndError:'Start date should be less than end date',weeksIntersectError:'Week overrides should not intersect'},'Gnt.widget.calendar.AvailabilityGrid':{startText:'Start',endText:'End',addText:'Add',removeText:'Remove',error:'Error'},'Gnt.widget.calendar.DayEditor':{workingTimeText:'Working time',nonworkingTimeText:'Non-working time'},'Gnt.widget.calendar.WeekEditor':{defaultTimeText:'Default time',workingTimeText:'Working time',nonworkingTimeText:'Non-working time',error:'Error',noOverrideError:"Week override contains only 'default' days - can't save it"},'Gnt.widget.calendar.ResourceCalendarGrid':{name:'Name',calendar:'Calendar'},'Gnt.widget.calendar.CalendarWindow':{title:'Calendar',ok:'Ok',cancel:'Cancel'},'Gnt.widget.calendar.CalendarManager':{addText:'Add',removeText:'Remove',add_child:'Add child',add_node:'Add calendar',add_sibling:'Add sibling',remove:'Remove',calendarName:'Calendar',confirm_action:'Confirm action',confirm_message:'Calendar has unsaved changes. Would you like to save your changes?'},'Gnt.widget.calendar.CalendarManagerWindow':{title:'Calendar manager',ok:'Apply changes',cancel:'Close',confirm_action:'Confirm action',confirm_message:'Calendar has unsaved changes. Would you like to save your changes?'},'Gnt.field.Assignment':{cancelText:'Cancel',closeText:'Save and Close'},'Gnt.column.AssignmentUnits':{text:'Units'},'Gnt.column.Duration':{text:'Duration'},'Gnt.column.Effort':{text:'Effort'},'Gnt.column.EndDate':{text:'Finish'},'Gnt.column.PercentDone':{text:'% Done'},'Gnt.column.ResourceAssignment':{text:'Assigned Resources'},'Gnt.column.ResourceName':{text:'Resource Name'},'Gnt.column.Rollup':{text:'Rollup task',no:'No',yes:'Yes'},'Gnt.field.ManuallyScheduled':{yes:'Yes',no:'No'},'Gnt.field.ReadOnly':{yes:'Yes',no:'No'},'Gnt.column.ManuallyScheduled':{text:'Manual mode'},'Gnt.column.SchedulingMode':{text:'Mode'},'Gnt.column.Predecessor':{text:'Predecessors'},'Gnt.column.Successor':{text:'Successors'},'Gnt.column.StartDate':{text:'Start'},'Gnt.column.WBS':{text:'WBS'},'Gnt.column.Sequence':{text:'#'},'Gnt.column.Calendar':{text:'Calendar'},'Gnt.column.ReadOnly':{text:'Read Only'},'Gnt.widget.taskeditor.ProjectForm':{projectText:'Project',nameText:'Name',datesText:'Dates',startText:'Start',finishText:'Finish',calendarText:'Calendar',readOnlyText:'Read Only',allowDependenciesText:'Allow cross-project dependencies'},'Gnt.widget.taskeditor.TaskForm':{taskNameText:'Name',durationText:'Duration',datesText:'Dates',baselineText:'Baseline',startText:'Start',finishText:'Finish',percentDoneText:'Percent Complete',baselineStartText:'Start',baselineFinishText:'Finish',baselinePercentDoneText:'Percent Complete',effortText:'Effort',invalidEffortText:'Invalid effort value',calendarText:'Calendar',manuallyScheduledText:'Manually Scheduled',schedulingModeText:'Scheduling Mode',rollupText:'Rollup',wbsCodeText:'WBS code','Constraint Type':'Constraint Type','Constraint Date':'Constraint Date',readOnlyText:'Read Only'},'Gnt.widget.DependencyGrid':{idText:'ID',snText:'SN',taskText:'Task Name',blankTaskText:'Please select task',invalidDependencyText:'Invalid dependency',parentChildDependencyText:'Dependency between child and parent found',duplicatingDependencyText:'Duplicate dependency found',transitiveDependencyText:'Transitive dependency',cyclicDependencyText:'Cyclic dependency',typeText:'Type',lagText:'Lag',clsText:'CSS class',endToStartText:'Finish-To-Start',startToStartText:'Start-To-Start',endToEndText:'Finish-To-Finish',startToEndText:'Start-To-Finish',predecessorsText:'Predecessors',successorsText:'Successors'},'Gnt.widget.AssignmentEditGrid':{confirmAddResourceTitle:'Confirm',confirmAddResourceText:'Resource &quot;{0}&quot; not found in list. Would you like to add it?',noValueText:'Please select resource to assign',noResourceText:'No resource &quot;{0}&quot; found in the list'},'Gnt.widget.taskeditor.TaskEditor':{generalText:'General',resourcesText:'Resources',addDependencyText:'Add new',dropDependencyText:'Remove',notesText:'Notes',advancedText:'Advanced',addAssignmentText:'Add new',dropAssignmentText:'Remove'},'Gnt.widget.taskeditor.ProjectEditor':{generalText:'General',descriptionText:'Description'},'Gnt.plugin.taskeditor.BaseEditor':{title:'Task Information',alertCaption:'Information',alertText:'Please correct marked errors to save changes',okText:'Ok',cancelText:'Cancel'},'Gnt.plugin.taskeditor.ProjectEditor':{title:'Project Information'},'Gnt.field.EndDate':{endBeforeStartText:'End date is before start date'},'Gnt.column.Note':{text:'Note'},'Gnt.column.AddNew':{text:'Add new column...'},'Gnt.column.EarlyStartDate':{text:'Early Start'},'Gnt.column.EarlyEndDate':{text:'Early Finish'},'Gnt.column.LateStartDate':{text:'Late Start'},'Gnt.column.LateEndDate':{text:'Late Finish'},'Gnt.field.Calendar':{calendarNotApplicable:'Task calendar has no overlapping with assigned resources calendars',invalidText:'Invalid value'},'Gnt.column.Slack':{text:'Slack'},'Gnt.column.Name':{text:'Task Name'},'Gnt.column.BaselineStartDate':{text:'Baseline Start Date'},'Gnt.column.BaselineEndDate':{text:'Baseline End Date'},'Gnt.column.Milestone':{text:'Milestone'},'Gnt.field.Milestone':{yes:'Yes',no:'No'},'Gnt.field.Dependency':{invalidFormatText:'Invalid dependency format',invalidDependencyText:'Invalid dependency found, please make sure you have no cyclic paths between your tasks',invalidDependencyType:'Invalid dependency type {0}. Allowed values are: {1}.'},'Gnt.constraint.Base':{name:'A constraint','Remove the constraint':'Remove the constraint','Cancel the change and do nothing':'Cancel the change and do nothing'},'Gnt.constraint.FinishNoEarlierThan':{name:'Finish no earlier than','Move the task to finish on {0}':'Move the task to finish on {0}'},'Gnt.constraint.FinishNoLaterThan':{name:'Finish no later than','Move the task to finish on {0}':'Move the task to finish on {0}'},'Gnt.constraint.MustFinishOn':{name:'Must finish on','Move the task to finish on {0}':'Move the task to finish on {0}'},'Gnt.constraint.MustStartOn':{name:'Must start on','Move the task to start at {0}':'Move the task to start at {0}'},'Gnt.constraint.StartNoEarlierThan':{name:'Start no earlier than','Move the task to start at {0}':'Move the task to start at {0}'},'Gnt.constraint.StartNoLaterThan':{name:'Start no later than','Move the task to start at {0}':'Move the task to start at {0}'},'Gnt.column.ConstraintDate':{text:'Constraint date'},'Gnt.column.ConstraintType':{text:'Constraint'},'Gnt.widget.ConstraintResolutionForm':{dateFormat:'m/d/Y','OK':'OK','Cancel':'Cancel','Resolution options':'Resolution options',"Don't ask again":"Don't ask again",'Task {0} violates constraint {1}':'Task "{0}" violates constraint {1}','Task {0} violates constraint {1} {2}':'Task "{0}" violates constraint {1} {2}'},'Gnt.widget.ConstraintResolutionWindow':{'Constraint violation':'Constraint violation'},'Gnt.panel.ResourceHistogram':{resourceText:'Resource'}},apply:function(a){Sch.locale.En.apply(a);this.callParent(arguments)}},0,0,0,0,0,0,[Gnt.locale,'En'],0);Ext.cmd.derive('Gnt.mixin.Localizable',Sch.mixin.Localizable,{},0,0,0,0,0,0,[Gnt.mixin,'Localizable'],0);Ext.cmd.derive('CGA.locale.En',Sch.locale.Locale,{singleton:!0,l10n:{'CGA.column.Flags':{LateStartIssues:'Late Start',SoonToStartIssues:'Soon to Start',InProgressIssues:'In Progress'},'CGA.ux.exporter.csvFormatter.CsvFormatter':{depth:'Level',schedulingMode:'Scheduling Mode',manuallyScheduled:'Manually Scheduled',autoScheduled:'Auto Scheduled'},'CGA.ux.exporter.msProjectFormatter.MsProjectFormatter':{manuallyScheduled:'Manually Scheduled',autoScheduled:'Auto Scheduled',dateFormat:'m/d/Y H:i',SS:'SS',SE:'SE',EE:'EE',ES:'ES',NA:'NA',assoonaspossible:'As Soon As Possible',finishnoearlierthan:'Finish no earlier than',finishnolaterthan:'Finish no later than',mustfinishon:'Must finish on',muststarton:'Must start on',startnoearlierthan:'Start no earlier than',startnolaterthan:'Start no later than',index:'ID',Name:'Name',StartDate:'Scheduled_Start',EndDate:'Scheduled_Finish',Duration:'Scheduled_Duration',PercentDone:'Percent_Complete',Predecessor:'Predecessors',StartedDate:'Actual_Start',CompletedDate:'Actual_Finish',Note:'Notes',BaselineStartDate:'Baseline_Estimated_Start',BaselineEndDate:'Baseline_Estimated_Finish',BaselineDuration:'Baseline_Estimated_Duration',ConstraintDate:'Constraint_Date',ConstraintType:'Constraint_Type',TaskMode:'Task_Mode',OutlineLevel:'Outline_Level',Summary:'Summary',Yes:'yes',No:'no'},'CGA.Application':{error:'Error',requestError:'Request error',readOnlylockedBy:'Read only mode. Locked By:',DepError:'Dep Error',Dirty:'Dirty'},'CGA.view.ControlHeader':{undo:'Undo',redo:'Redo',previousTimespan:'Previous timespan',toggleHamoks:'Toggle Hamoks',downloadStore:'Download to file',nextTimespan:'Next timespan',collapseAll:'Collapse all',expandAll:'Expand all',zoomOut:'Zoom out',zoomIn:'Zoom in',zoomToFit:'Zoom to fit',viewFullScreen:'View full screen',highlightCriticalPath:'Highlight critical path',addNewTask:'Add new task',newTask:'New Task',removeSelectedTasks:'Remove selected task(s)',indent:'Indent',outdent:'Outdent',manageCalendars:'Manage calendars',saveChanges:'Save changes',language:'Language: ',selectLanguage:'Select a language...',tryMore:'Try more features...',addDependencies:'Add Dependencies',showBaseline:'Show Baseline',deleteBaseline:'Delete Baseline',DeleteHistoryBaseline:'Delete History Baseline',MainBaseline:'Main Baseline',weekly:'weekly',monthly:'monthly',project:'project',history:'history',setBaselineAll:'Set Baseline - All',setBaselineSelected:'Set Baseline - Selected',SelectedBaseline:'Selected Baseline',adjustToCalendar:'Adjust To Calendar',updateSchedule:'Update Schedule',filterSchedule:'Filter Schedule required tasks',filterPred:'Filter by Stage Predecessor',addDependencies:'Add Dependencies',toggleChildTasksGrouping:'Toggle child tasks grouping on/off',toggleRollupTasks:'Toggle rollup tasks',highlightTasksLonger10:'Tasks longer than two weeks',filterTasksWithProgressLess30:'Filter: Tasks with progress < 30%',clearFilter:'Clear Filter',scrollToLastTask:'Scroll to last task',Advanced:'Advanced',Filters:'Filters',View:'View',Baseline:'Baseline',weekView:'Weekly',monthView:'Monthly',quarterView:'Quarterly',WeeklyMethod:'Weekly Method',GanttQuality:'Gantt Quality',manuallyScheduled:'Manually Scheduled',constraintDate:'Constraint Date Tasks',betweenDates:'Start and End Between Dates',outline:'Outline',level1:'Level 1',level2:'Level 2',level3:'Level 3',level4:'Level 4',level5:'Level 5',level6:'Level 6',level7:'Level 7',significant:'Management Tasks',ReleaseUserLock:'Release User Lock',administrative:'Administrative Tasks',hideTasks:'Customer View',recalculateDynamicPredecessors:'Recalculate Dynamic Predecessors',bulkOperations:'Bulk Operations',printGantt:'Print',downloadMsProject:'Export MS-project',milestonesChanged:'Milestones Changed',milestoneCriticalPath:'Milestone critical path',WorkPlan:'Work plan',Weekly:'Weekly',Monthly:'Monthly'},'CGA.field.CompletedDate':{endBeforeStartedText:'Completed date before started date'},'CGA.field.StarteddDate':{endBeforeStartedText:'Completed date before started date'},'CGA.view.MainViewportController':{DatesFilter:'Dates Filter',DatesRange:'Dates Range',Week:'Week',Twoweeks:'Two weeks',Month:'Month',Custom:'Custom',FromDate:'From Date',ToDate:'To Date',Filter:'Filter',Cancel:'Cancel',DateField:'Date Field',StartDate:'Start Date',EndDate:'End Date',Task_data:'Task_data',ConstraintType:'ConstraintType',CreateBaseLine:'Create Base Line',NewBaseLineName:'New Base Line Name',Submit:'Submit',Cancel:'Cancel',MilestonesChanged:'Save Changes',MilestonesChangedMessage:'Milestones has changed <br> Would you like to save?',LoadHistoryBaseline:'Load History Baseline',DeleteHistoryBaseline:'Delete Baseline',ConfirmDeleteHistoryBaseline:'Are you sure you want to delete the ',LoadBaseline:'Load',EditBaseline:'Edit Baseline'},'CGA.plugin.TaskEditor':{alertCaption:'Information',alertText:'Please correct marked errors to save changes',okText:'OK',cancelText:'Cancel',startedText:'Started',finishedText:'Finished'},'CGA.column.StageTypeType':{text:'Stage Type Type'},'CGA.column.StageTypeSpecialization':{text:'Stage Type Specialization'},'CGA.column.IsStarted':{text:'Is Started'},'CGA.plugin.TaskContextMenu':{changeTaskColor:'Change task color',moreInfo:'More Info...',bulkOperations:'Bulk Operations',openIssues:'issues',hideTask:'Hide in Customer View',unHideTask:'Show in Customer View',releaseLock:'Release Lock','new':'New',Milestone:'Milestone',Select:'Select',Type:'Type',Task:'Task',SelectStageType:'Select Stage Type',Add:'Add'},'CGA.view.BulkOperationBaseForm':{bulkOperations:'Bulk Operations',UpdateConstraintDate:'Update Constraint Date',UpdateActualeDate:'Update Actuale Date',constraintType:'Constraint Type',constraintDate:'Constraint Date',startDate:'Start Date',endDate:'End Date',setAllDone:'Set 100% execution in the scheduled dates',ignoreQualityControls:'Ignore Quality Controls and flaws',OK:'OK',Cancel:'Cancel',filterFields:'Filter stages on which to perform the operations',stagePrototype:'Stage Prototype',selecetStagePrototype:'Select stage prototype',constructName:'Construct name',selectConstructName:'Select construct name',fromSpotName:'From spot',toSpotName:'To spot',selectSpotName:'Select spot name',emptyValueError:'You must select a value',emptyStartDateValueError:'You must select a start date value',InspectionBlockStart:'Please finish report all the obligatory before inspections',InspectionBlockEnd:'Please finish report all the obligatory During/After inspections, flaws and open issues',inspectionErrorsFound:'Warnings',doWithoutThisStage:'Do without the above stages'},'CGA.view.Gantt':{startText:'Start: ',endText:'Finish: ',durationText:'Duration:  ',progressText:'Progress: ',baselineStartText:'Baseline Start: ',baselineEndText:'Baseline End: ',baselineDurationText:'Baseline Duration: '},'CGA.filter.DynamicListFilter':{blank:'--Blanks--',clear:'--Clear Filters--'},'CGA.store.CrudManager':{error:'Error',requestError:'Request error',RetrievingDataFromServer:'Retrieving data from server...',SavingTasks:'Saving Tasks...',SavingWeeklyBaseline:'Saving Weekly Baseline...',SavingMonthlyBaseline:'Saving Monthly Baseline...',SavingMainBaseline:'Saving Main Baseline...',SavingProjectBaseline:'Saving Project Baseline...',LoadingTasks:'Loading Tasks...',AdjustingTasksSchedule:'Adjusting Tasks Schedule...',Loading:'Loading...'},'CGA.model.Task':{'InspectionBlockStart':'Please finish report all the obligatory before inspections','InspectionBlockEnd':'Please finish report all the obligatory During/After inspections and flaws','PercentDoneWithoutStartedDate':'Cannot insert Progress without started date','CompletednoStartedDate':'Cannot insert Completed date without started date','IssueBlockEnd':'Please finish report all the open issues'},'CGA.widget.calendar.CalendarManager':{addText:'Add',removeText:'Remove',add_child:'Add child',add_node:'Add calendar',add_sibling:'Add sibling',remove:'Remove',calendarName:'Calendar',confirm_action:'Confirm action',confirm_message:'Calendar has unsaved changes. Would you like to save your changes?'},'CGA.widget.calendar.CalendarManagerWindow':{title:'Calendar manager',ok:'Apply changes',cancel:'Close',confirm_action:'Confirm action',confirm_message:'Calendar has unsaved changes. Would you like to save your changes?'},'CGA.widget.taskeditor.TaskForm':{actualText:'Actual',expectedText:'Expected',startedDateText:'Actual Start',completedDateText:'Actual Finish',completedText:'Completed'},'CGA.template.ExternalDueDateTemplate':{ExternalDueDate:'External Due Date'},'CGA.template.InternalDueDateTemplate':{InternalDueDate:'Internal Due Date'},'CGA.window.milestonesAlertWindow':{milestonesAlert:'Milestones Alert',modifiedEndDate:'Current End Date',modifiedStartDate:'Current Start Date',modifiedGap:'Days Gap',CloseWindow:'Close Window'}},apply:function(a){Gnt.locale.En.apply(a);this.callParent(arguments)}},0,0,0,0,0,0,[CGA.locale,'En'],0);Ext.cmd.derive('CGA.locale.He',Sch.locale.Locale,{singleton:!0,l10n:{'CGA.column.Flags':{LateStartIssues:' ',SoonToStartIssues:' ',InProgressIssues:''},'Sch.util.Date':{unitNames:{YEAR:{single:'',plural:'',abbrev:''},QUARTER:{single:'',plural:'',abbrev:''},MONTH:{single:'',plural:'',abbrev:''},WEEK:{single:'',plural:'',abbrev:''},DAY:{single:'',plural:'',abbrev:''},HOUR:{single:'',plural:'',abbrev:''},MINUTE:{single:'',plural:'',abbrev:''},SECOND:{single:'',plural:'',abbrev:''},MILLI:{single:'',plural:'',abbrev:''}}},'CGA.ux.exporter.csvFormatter.CsvFormatter':{depth:'',schedulingMode:' ',manuallyScheduled:'  ',autoScheduled:'  '},'CGA.ux.exporter.msProjectFormatter.MsProjectFormatter':{manuallyScheduled:' ',autoScheduled:'  ',dateFormat:'d/m/Y H:i',SS:'',SE:'',EE:'',ES:'',NA:' ',aslateaspossible:'  ',assoonaspossible:'  ',finishnoearlierthan:'  ',finishnolaterthan:'  ',mustfinishon:'  ',muststarton:'  ',startnoearlierthan:'  ',startnolaterthan:'  ',index:'',Name:'_',StartDate:'',EndDate:'',Duration:'',PercentDone:'_',Predecessor:'_',StartedDate:'_',CompletedDate:'_',Note:'',BaselineStartDate:'__',BaselineEndDate:'__',BaselineDuration:'__',ConstraintDate:'_',ConstraintType:'_',TaskMode:'_',OutlineLevel:'_',Summary:'',Yes:'',No:''},'CGA.Application':{error:'',requestError:'  ',readOnlylockedBy:' . :',DepError:'',Dirty:''},'CGA.view.ControlHeader':{undo:' ',redo:' ',previousTimespan:' ',nextTimespan:' ',toggleHamoks:'/ ',downloadStore:' ',collapseAll:' ',expandAll:' ',zoomOut:' ',zoomIn:' ',zoomToFit:' ',viewFullScreen:' ',highlightCriticalPath:' ',addNewTask:' ',newTask:' ',removeSelectedTasks:'  ',indent:'  ',outdent:'  ',manageCalendars:' ',saveChanges:' ',language:': ',selectLanguage:' ...',tryMore:' ...',addDependencies:' ',showBaseline:' ',deleteBaseline:' ',setBaselineAll:'  - ',setBaselineSelected:'  - ',SelectedBaseline:' ',MainBaseline:' ',weekly:'',monthly:'',project:'',history:'',filterPred:'  ',updateSchedule:'  ',filterSchedule:' ',adjustToCalendar:'  ',addDependencies:' ',toggleChildTasksGrouping:'  ',toggleRollupTasks:'  ',highlightTasksLonger10:'  ',filterTasksWithProgressLess30:'  30%',clearFilter:' ',scrollToLastTask:'  ',Advanced:'',Filters:'',View:'',Baseline:'',weekView:'',monthView:'',quarterView:'',WeeklyMethod:' ',GanttQuality:' ',manuallyScheduled:'  ',constraintDate:'   ',betweenDates:'   ',outline:' ',level1:' 1',level2:' 2',level3:' 3',level4:' 4',level5:' 5',level6:' 6',level7:' 7',significant:' ',ReleaseUserLock:'  ',administrative:' ',hideTasks:' ',recalculateDynamicPredecessors:'   ',printGantt:'',bulkOperations:' ',downloadMsProject:" '",milestonesChanged:'  ',milestoneCriticalPath:'    ',WorkPlan:' ',Weekly:'',Monthly:''},'CGA.plugin.TaskEditor':{title:'',alertCaption:'',alertText:'     ',okText:'',cancelText:'',startedText:'',finishedText:''},'CGA.column.StageTypeType':{text:' '},'CGA.column.IsStarted':{text:' '},'CGA.column.StageTypeSpecialization':{text:'Stage Type Specialization'},'CGA.view.MainViewportController':{DatesFilter:' ',DatesRange:' ',Week:'',Twoweeks:'',Month:'',Custom:'',FromDate:'',ToDate:' ',Filter:'',Cancel:'',DateField:' ',StartDate:'',EndDate:'',Task_data:'_',ConstraintType:' ',CreateBaseLine:'  ',NewBaseLineName:'  ',Submit:'',Cancel:'',MilestonesChanged:' ',MilestonesChangedMessage:'   <br>  ?',LoadHistoryBaseline:' ',DeleteHistoryBaseline:' ',ConfirmDeleteHistoryBaseline:'       ',LoadBaseline:'',EditBaseline:' '},'CGA.field.CompletedDate':{endBeforeStartedText:'    '},'CGA.field.StartedDate':{endBeforeStartedText:'    '},'CGA.plugin.TaskContextMenu':{changeTaskColor:' ',taskInformation:' ...',projectInformation:' ...',newTaskText:' ',deleteTask:'  ()',add:'...',deleteDependency:' ...',addTaskAbove:'  ',addTaskAboveMilestone:'   ',addTaskBelow:'  ',addTaskBelowMilestone:'   ',addMilestone:'  ',addSubtask:'  ',addSubtaskMilestone:'   ',addSuccessor:'   ',addPredecessor:'   ',convertToMilestone:'  ',convertToRegular:'  ',splitTask:' ',moreInfo:' ...',bulkOperations:' ',openIssues:'',hideTask:'  ',unHideTask:'  ',releaseLock:' ','new':'',Milestone:' ',Select:'',Type:'',Task:'',SelectStageType:'  ',Add:''},'CGA.view.BulkOperationBaseForm':{bulkOperations:' ',UpdateConstraintDate:'  ',UpdateActualeDate:'  ',constraintType:' ',constraintDate:' ',startDate:'',endDate:'',setAllDone:' 100%   ',ignoreQualityControls:'   ',OK:'',Cancel:'',filterFields:'      ',stagePrototype:' ',selecetStagePrototype:'  ',constructName:'',selectConstructName:' ',fromSpotName:'',toSpotName:' ',selectSpotName:' ',emptyValueError:'  ',emptyStartDateValueError:'   ',InspectionBlockStart:'       ',InspectionBlockEnd:'   ,  ',inspectionErrorsFound:'',doWithoutThisStage:'   '},'Gnt.plugin.DependencyEditor':{fromText:'',toText:'',typeText:'',lagText:'',endToStartText:'-',startToStartText:'-',endToEndText:'-',startToEndText:'-',okButtonText:'',cancelButtonText:'',deleteButtonText:''},'CGA.filter.DynamicListFilter':{blank:'----',clear:'-- --'},'Gnt.Tooltip':{startText:': ',endText:': ',durationText:': '},'CGA.view.Gantt':{startText:': ',endText:': ',durationText:': ',progressText:': ',baselineStartText:' : ',baselineEndText:' : ',baselineDurationText:' : '},'CGA.store.CrudManager':{error:'',requestError:'  ',RetrievingDataFromServer:'   ',SavingTasks:' ...',SavingWeeklyBaseline:'  ...',SavingMonthlyBaseline:'  ...',SavingMainBaseline:'  ...',SavingProjectBaseline:'  ...',LoadingTasks:' ',AdjustingTasksSchedule:' ',Loading:'...'},'CGA.model.Task':{'InspectionBlockStart':'       ','InspectionBlockEnd':'    ','PercentDoneWithoutStartedDate':'       ','CompletednoStartedDate':'       ','IssueBlockEnd':'      -   .          '},'Gnt.widget.taskeditor.TaskEditor':{generalText:'',resourcesText:'',addDependencyText:' ',dropDependencyText:'',notesText:'',advancedText:'',addAssignmentText:' ',dropAssignmentText:''},'Gnt.widget.taskeditor.TaskForm':{taskNameText:' ',durationText:'',datesText:'',baselineText:'',startText:'',finishText:'',percentDoneText:' ',baselineStartText:'',baselineFinishText:'',baselinePercentDoneText:'  ',effortText:'',invalidEffortText:' ',calendarText:'',manuallyScheduledText:' ',schedulingModeText:' ',rollupText:'',wbsCodeText:'WBS','Constraint Type':' ','Constraint Date':' ',readOnlyText:' '},'CGA.widget.taskeditor.TaskForm':{actualText:'',expectedText:'',startedDateText:' ',completedDateText:' ',completedText:''},'Gnt.widget.DependencyGrid':{idText:'',snText:'SN',taskText:' ',blankTaskText:' ',invalidDependencyText:'  ',parentChildDependencyText:'   ',duplicatingDependencyText:' ',transitiveDependencyText:' ',cyclicDependencyText:' ',typeText:'',lagText:'',clsText:'CSS class',endToStartText:'-',startToStartText:'-',endToEndText:'-',startToEndText:'-',predecessorsText:' ',successorsText:' '},'CGA.widget.calendar.CalendarManager':{addText:',',removeText:'',add_child:' ',add_node:' ',add_sibling:' ',remove:'',calendarName:'',confirm_action:' ',confirm_message:'   ,  ?'},'CGA.widget.calendar.CalendarManagerWindow':{title:' ',ok:'',cancel:'',confirm_action:' ',confirm_message:'   ,  ?'},'Sch.panel.TimelineGridPanel':{weekStartDay:0,loadingText:',  ...',savingText:' ,  ...'},'Gnt.widget.ConstraintResolutionForm':{dateFormat:'d/m/Y','OK':'','Cancel':'','Resolution options':'',"Don't ask again":'  ','Task {0} violates constraint {1}':'  "{0}"    {1}','Task {0} violates constraint {1} {2}':' "{0}"    {1} {2}'},'Gnt.widget.ConstraintResolutionWindow':{'Constraint violation':' '},'Gnt.constraint.Base':{name:'','Remove the constraint':' ','Cancel the change and do nothing':'     '},'Gnt.constraint.FinishNoEarlierThan':{name:'  ','Move the task to finish on {0}':'     {0}'},'Gnt.constraint.FinishNoLaterThan':{name:'  ','Move the task to finish on {0}':'     {0}'},'Gnt.constraint.MustFinishOn':{name:' ','Move the task to finish on {0}':'     {0}'},'Gnt.constraint.MustStartOn':{name:' ','Move the task to start at {0}':'     {0}'},'Gnt.constraint.StartNoEarlierThan':{name:'  ','Move the task to start at {0}':'     {0}'},'Gnt.constraint.StartNoLaterThan':{name:'  ','Move the task to start at {0}':'     {0}'},'Sch.preset.Manager':{hourAndDay:{displayDateFormat:'G:i',middleDateFormat:'G:i',topDateFormat:'D d/m'},secondAndMinute:{displayDateFormat:'g:i:s',topDateFormat:'D, d g:iA'},dayAndWeek:{displayDateFormat:'d/m h:i A',middleDateFormat:'D d M'},weekAndDay:{displayDateFormat:'d/m',bottomDateFormat:'d M',middleDateFormat:'Y F d'},weekAndMonth:{displayDateFormat:'d/m/Y',middleDateFormat:'d/m',topDateFormat:'d/m/Y'},weekAndDayLetter:{displayDateFormat:'d/m/Y',middleDateFormat:'D d M Y'},weekDateAndMonth:{displayDateFormat:'d/m/Y',middleDateFormat:'d',topDateFormat:'Y F'},monthAndYear:{displayDateFormat:'d/m/Y',middleDateFormat:'M Y',topDateFormat:'Y'},year:{displayDateFormat:'d/m/Y',middleDateFormat:'Y'},manyYears:{displayDateFormat:'d/m/Y',middleDateFormat:'Y'}},'CGA.template.ExternalDueDateTemplate':{ExternalDueDate:'  '},'CGA.template.InternalDueDateTemplate':{InternalDueDate:'  '},'CGA.window.milestonesAlertWindow':{milestonesAlert:'  ',modifiedEndDate:'  ',modifiedStartDate:'  ',modifiedGap:' ',CloseWindow:' '}},apply:function(a){CGA.locale.En.apply(a);this.callParent(arguments)}},0,0,0,0,0,0,[CGA.locale,'He'],0);Ext.cmd.derive('Ext.dd.DragTracker',Ext.Base,{active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(b){var a=this;Ext.apply(a,b);a.dragRegion=new Ext.util.Region(0,0,0,0);if(a.el){a.initEl(a.el)}a.mixins.observable.constructor.call(a);if(a.disabled){a.disable()}},initEl:function(b){var a=this,c=a.delegate;a.el=b=Ext.get(b);if(c&&c.isElement){a.handle=c}a.delegate=a.handle?undefined:a.delegate;if(!a.handle){a.handle=b}a.handleListeners={scope:a,delegate:a.delegate,mousedown:a.onMouseDown,dragstart:a.onDragStart};if(!Ext.supports.TouchEvents&&(a.trackOver||a.overCls)){Ext.apply(a.handleListeners,{mouseover:a.onMouseOver,mouseout:a.onMouseOut})}a.mon(a.handle,a.handleListeners);a.keyNav=new Ext.util.KeyNav({target:b,up:a.onResizeKeyDown,left:a.onResizeKeyDown,right:a.onResizeKeyDown,down:a.onResizeKeyDown,scope:a})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){var a=this;a.endDrag({});a.el=a.handle=a.onBeforeStart=a.onStart=a.onDrag=a.onEnd=null;a.callParent()},onMouseOver:function(d,h){var a=this,f,b,e,g,c;if(!a.disabled){if(d.within(d.target,!0,!0)||a.delegate){f=a.handleCls;a.mouseIsOut=!1;if(f){for(e=0,g=a.handleEls.length;e<g;e++){b=a.handleEls[e];c=b.delegateCls;if(!c){c=b.delegateCls=[f,'-',b.region,'-over'].join('')}b.addCls([c,a.overCls])}}a.fireEvent('mouseover',a,d,a.delegate?d.getTarget(a.delegate,h):a.handle)}}},onMouseOut:function(e){var a=this,c,b,d;if(a.mouseIsDown){a.mouseIsOut=!0}else {if(a.handleCls){for(b=0,d=a.handleEls.length;b<d;b++){c=a.handleEls[b];c.removeCls([c.delegateCls,a.overCls])}}a.fireEvent('mouseout',a,e)}},onMouseDown:function(b,c){var a=this;if(a.disabled||b.dragTracked){return}a.dragTarget=a.delegate?c:a.handle.dom;a.startXY=a.lastXY=b.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent('mousedown',a,b)===!1||a.fireEvent('beforedragstart',a,b)===!1||a.onBeforeStart(b)===!1){return}a.mouseIsDown=!0;b.dragTracked=!0;a.el.setCapture();b.stopPropagation();if(a.preventDefault!==!1){b.preventDefault()}Ext.getDoc().on({scope:a,capture:!0,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=!1;if(!a.tolerance){a.triggerStart()}else {if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===!0?1000:a.autoStart,a,[b])}}},onMouseMove:function(b,e){var a=this,c=b.getXY(),d=a.startXY;b.stopPropagation();if(a.preventDefault!==!1){b.preventDefault()}if(a.dragEnded){return}a.lastXY=c;if(!a.active){if(Math.max(Math.abs(d[0]-c[0]),Math.abs(d[1]-c[1]))>a.tolerance){a.triggerStart(b)}else {return}}if(a.fireEvent('mousemove',a,b)===!1){a.onMouseUp(b)}else {a.onDrag(b);a.fireEvent('drag',a,b)}},onMouseUp:function(b){var a=this;a.mouseIsDown=!1;if(a.mouseIsOut){a.mouseIsOut=!1;a.onMouseOut(b)}if(a.preventDefault!==!1){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent('mouseup',a,b);a.endDrag(b)},endDrag:function(b){var a=this,c=a.active;Ext.getDoc().un({mousemove:a.onMouseMove,mouseup:a.onMouseUp,selectstart:a.stopSelect,capture:!0,scope:a});a.clearStart();a.active=!1;if(c){a.dragEnded=!0;a.onEnd(b);a.fireEvent('dragend',a,b)}a._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=!0;a.onStart(b);a.fireEvent('dragstart',a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return !1},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else {if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var a=this.getXY(c),b=this.startXY;return [a[0]-b[0],a[1]-b[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(d,b){var a=d.dragRegion,c=d.getConstrainRegion();if(!c){return b}a.x=a.left=a[0]=a.right=b[0];a.y=a.top=a[1]=a.bottom=b[1];a.constrainTo(c);return [a.left,a.top]},dragTarget:function(e,c){var f=e.startXY,a=e.startRegion.copy(),b=e.getConstrainRegion(),d;if(!b){return c}a.translateBy(c[0]-f[0],c[1]-f[1]);if(a.right>b.right){c[0]+=d=b.right-a.right;a.left+=d}if(a.left<b.left){c[0]+=b.left-a.left}if(a.bottom>b.bottom){c[1]+=d=b.bottom-a.bottom;a.top+=d}if(a.top<b.top){c[1]+=b.top-a.top}return c}}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.dd,'DragTracker'],0);Ext.cmd.derive('Ext.util.ComponentDragger',Ext.dd.DragTracker,{autoStart:500,constructor:function(b,a){this.comp=b;this.initialConstrainTo=a.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,a)},onStart:function(c){var a=this,b=a.comp;a.startPosition=b.getXY();if(b.ghost&&!b.liveDrag){a.proxy=b.ghost();a.dragTarget=a.proxy.header.el}if(a.constrain||a.constrainDelegate){a.constrainTo=a.calculateConstrainRegion()}if(b.beginDrag){b.beginDrag()}if(b.el.shim){b.el.maskIframes()}},calculateConstrainRegion:function(){var c=this,h=c.comp,b=c.initialConstrainTo,a=h.constraintInsets,i,d,f,j=c.proxy?c.proxy.el:h.el,g=j.shadow,e=g&&!c.constrainDelegate&&h.constrainShadow&&!g.disabled?g.getShadowSize():0;if(!(b instanceof Ext.util.Region)){i=Ext.fly(b);b=i.getConstrainRegion()}else {b=b.copy()}if(a){a=Ext.isObject(a)?a:Ext.Element.parseBox(a);b.adjust(a.top,a.right,a.bottom,a.left)}if(e){b.adjust(e[0],-e[1],-e[2],e[3])}if(!c.constrainDelegate){d=Ext.fly(c.dragTarget).getRegion();f=j.getRegion();b.adjust(d.top-f.top,d.right-f.right,d.bottom-f.bottom,d.left-f.left)}return b},onDrag:function(d){var a=this,c=a.proxy&&!a.comp.liveDrag?a.proxy:a.comp,b=a.getOffset(a.constrain||a.constrainDelegate?'dragTarget':null);c.setPagePosition(a.startPosition[0]+b[0],a.startPosition[1]+b[1])},onEnd:function(b){var a=this.comp;if(a.destroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}if(a.el.shim){a.el.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,'ComponentDragger'],0);Ext.cmd.derive('Ext.util.FocusTrap',Ext.Mixin,{mixinConfig:{id:'focustrap',after:{afterRender:'initTabGuards',addTool:'initTabGuards',add:'initTabGuards',remove:'initTabGuards',addDocked:'initTabGuards',removeDocked:'initTabGuards',onShow:'initTabGuards',afterHide:'initTabGuards'}},config:{tabGuard:!0,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="x-hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:'data-tabguardposition',privates:{initTabGuards:function(){var a=this,f=a.tabGuardPositionAttribute,c=a.tabGuardBeforeEl,d=a.tabGuardAfterEl,e=a.tabGuardIndex,b;if(!a.rendered||!a.tabGuard){return}b=a.el.findTabbableElements({skipSelf:!0});if(b[0]&&b[0].hasAttribute(f)){b.shift()}if(b.length&&b[b.length-1].hasAttribute(f)){b.pop()}if(b.length){c.dom.setAttribute('tabIndex',e);c.on('focusenter',a.onTabGuardFocusEnter,a);d.dom.setAttribute('tabIndex',e);d.on('focusenter',a.onTabGuardFocusEnter,a)}else {c.dom.removeAttribute('tabIndex');c.un('focusenter',a.onTabGuardFocusEnter,a);d.dom.removeAttribute('tabIndex');d.un('focusenter',a.onTabGuardFocusEnter,a)}},onTabGuardFocusEnter:function(j,i){var h=this,e=h.el,g=h.tabGuardPositionAttribute,f=i.getAttribute(g),d=j.relatedTarget,a,c,b;if(!d.hasAttribute(g)&&d!==e.dom&&e.contains(d)){c=f==='before'?!1:!0}else {c=f==='before'?!0:!1}a=e.findTabbableElements({skipSelf:!0});a.shift();a.pop();b=c?a[0]:a[a.length-1];if(b){b.focus()}}}},0,0,0,0,0,0,[Ext.util,'FocusTrap'],0);Ext.cmd.derive('Ext.window.Window',Ext.panel.Panel,{alternateClassName:'Ext.Window',baseCls:'x-window',resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:'offsets',floating:!0,itemCls:'x-window-item',overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:'dialog',initComponent:function(){var a=this;a.frame=!1;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI('plain')}a.addStateEvents(['maximize','restore','resize','dragend'])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var a=this,e=Ext.panel.Panel.prototype.getState.call(this)||{},c=!!a.maximized,d=a.ghostBox,b;e.maximized=c;if(c){b=a.restorePos}else {if(d){b=[d.x,d.y]}else {b=a.getPosition()}}Ext.apply(e,{size:c?a.restoreSize:a.getSize(),pos:b});return e},applyState:function(a){var b=this;if(a){b.maximized=a.maximized;if(b.maximized){b.hasSavedRestore=!0;b.restoreSize=a.size;b.restorePos=a.pos}else {Ext.apply(b,{width:a.size.width,height:a.size.height,x:a.pos[0],y:a.pos[1]})}}},onRender:function(c,b){var a=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(a.header){a.header.on({scope:a,click:a.onHeaderClick})}if(a.maximizable){a.header.on({scope:a,dblclick:a.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=!1;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else {b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(b,a){a.stopEvent();this.close()},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un('resize',a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){b.push({type:'minimize',handler:'minimize',scope:a})}if(a.maximizable){b.push({type:a.maximized?'restore':'maximize',handler:'toggleMaximize',scope:a})}if(b.length){a.addTool(b)}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(!1)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent('close',a);if(a.closeAction==='destroy'){a.destroy()}}else {a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var a=this,b;if(!a.destroyed){if(a.maximized){a.fitContainer()}else {b=a.getSizeModel();if(b.width.natural||b.height.natural){a.updateLayout()}a.doConstrain()}}},minimize:function(){this.fireEvent('minimize',this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,b=a.header,c=a.tools;if(b&&a.maximizable){b.suspendLayouts();c.maximize.hide();this.resumeHeaderLayout(!0)}if(a.resizer){a.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var a=this,c=a.header,d=a.tools,b;if(c){c.suspendLayouts();if(a.maximizable){d.maximize.show();b=!0}this.resumeHeaderLayout(b)}if(a.resizer){a.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(c){var a=this,b=a.header,f=a.tools,g=a.width,e=a.height,h,d;if(!a.maximized){a.expand(!1);if(!a.hasSavedRestore){h=a.restoreSize={width:g?g:null,height:e?e:null};a.restorePos=a.getPosition()}if(b){b.suspendLayouts();if(f.maximize){f.maximize.setType('restore')}if(a.collapseTool){a.collapseTool.hide();d=!0}a.resumeHeaderLayout(d)}a.el.disableShadow();if(a.dd){a.dd.disable();if(b){b.removeCls(b.indicateDragCls)}}if(a.resizer){a.resizer.disable()}a.el.addCls('x-window-maximized');a.container.addCls('x-window-maximized-ct');a.syncMonitorWindowResize();a.fitContainer(c=c||!!a.animateTarget?{callback:function(){a.maximized=!0;a.fireEvent('maximize',a)}}:null);if(!c){a.maximized=!0;a.fireEvent('maximize',a)}}return a},restore:function(c){var a=this,f=a.tools,b=a.header,d=a.restoreSize,e;if(a.maximized){a.hasSavedRestore=null;a.removeCls('x-window-maximized');if(b){b.suspendLayouts();if(f.maximize){f.maximize.setType('maximize')}if(a.collapseTool){a.collapseTool.show();e=!0}a.resumeHeaderLayout(e)}d.x=a.restorePos[0];d.y=a.restorePos[1];a.setBox(d,c=c||!!a.animateTarget?{callback:function(){a.el.enableShadow(null,!0);a.maximized=!1;a.fireEvent('restore',a)}}:null);a.restorePos=a.restoreSize=null;if(a.dd){a.dd.enable();if(b){b.addCls(b.indicateDragCls)}}if(a.resizer){a.resizer.enable()}a.container.removeCls('x-window-maximized-ct');a.syncMonitorWindowResize();if(!c){a.el.enableShadow(null,!0);a.maximized=!1;a.fireEvent('restore',a)}}return a},syncMonitorWindowResize:function(){var a=this,b=a._monitoringResize,d=a.monitorResize||a.constrain||a.constrainHeader||a.maximized,c=a.hidden||a.destroying||a.destroyed;if(d&&!c){if(!b){Ext.on('resize',a.onWindowResize,a,{buffer:1});a._monitoringResize=!0}}else {if(b){Ext.un('resize',a.onWindowResize,a);a._monitoringResize=!1}}},toggleMaximize:function(){return this[this.maximized?'restore':'maximize']()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype='window';a.focusOnToFront=!1;return a},getDefaultFocus:function(){var d=this,b,a=d.defaultFocus,c;if(a!==undefined){if(Ext.isNumber(a)){b=d.query('button')[a]}else {if(Ext.isString(a)){c=a;if(Ext.validIdRe.test(c)){b=d.down(Ext.makeIdSelector(c))}if(!b){b=d.down(c)}}else {if(a.focus){b=a}}}}return b},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(b,c){var a;if(b.el.contains(c.getTarget())){a=this.getDefaultFocus();if(a){a.focus()}}},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,['window'],['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},['widget.window'],[[Ext.util.FocusTrap.prototype.mixinId||Ext.util.FocusTrap.$className,Ext.util.FocusTrap]],[Ext.window,'Window',Ext,'Window'],0);Ext.cmd.derive('Ext.form.field.TextArea',Ext.form.field.Text,{alternateClassName:'Ext.form.TextArea',fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>','</textarea>',{disableFormats:!0}],growMin:60,growMax:1000,growAppend:'\n-',enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:'x-form-textarea',extraFieldBodyCls:'x-form-textarea-body',ariaAttributes:{'aria-multiline':!0},getSubTplData:function(d){var a=this,c=a.getFieldStyle(),b=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(a.grow){if(a.preventScrollbars){b.fieldStyle=(c||'')+';overflow:hidden;height:'+a.growMin+'px'}}return b},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on('paste',a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==='string'){a=a.replace(this.returnRe,'')}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,a=b.getValue(),c=b.maxLength;if(a.length>c){a=a.substr(0,c);b.setValue(a)}},fireKey:function(a){var b=this,c=a.getKey(),d;if(a.isSpecialKey()&&(b.enterIsSpecial||(c!==a.ENTER||a.hasModifier()))){b.fireEvent('specialkey',b,a)}if(b.needsMaxCheck&&c!==a.BACKSPACE&&c!==a.DELETE&&!a.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(a,c)){d=b.getValue();if(d.length>=b.maxLength){a.stopEvent()}}},isCutCopyPasteSelectAll:function(a,b){if(a.ctrlKey){return b===a.A||b===a.C||b===a.V||b===a.X}return !1},autoSize:function(){var a=this,b,c,e,d;if(a.grow&&a.rendered&&a.getSizeModel().height.auto){b=a.inputEl;e=b.getWidth(!0);d=Ext.util.Format.htmlEncode(b.dom.value)||'&#160;';d+=a.growAppend;d=d.replace(/\n/g,'<br/>');c=Ext.util.TextMetrics.measure(b,d,e).height+b.getPadding('tb')+a.inputWrap.getBorderWidth('tb')+a.triggerWrap.getBorderWidth('tb');c=Math.min(Math.max(c,a.growMin),a.growMax);a.bodyEl.setHeight(c);a.updateLayout();a.fireEvent('autosize',a,c)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,['textarea','textareafield'],['component','box','field','textfield','textareafield','textarea'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'textareafield':!0,'textarea':!0},['widget.textarea','widget.textareafield'],0,[Ext.form.field,'TextArea',Ext.form,'TextArea'],0);Ext.cmd.derive('Ext.layout.container.Anchor',Ext.layout.container.Auto,{alternateClassName:'Ext.layout.AnchorLayout',type:'anchor',defaultAnchor:'100%',parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(f){var h=this,c=0,b,a,e,d,g;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);e=f.childItems;g=e.length;for(d=0;d<g;++d){a=e[d];b=a.target.anchorSpec;if(b){if(a.widthModel.calculated&&b.right){c|=1}if(a.heightModel.calculated&&b.bottom){c|=2}if(c===3){break}}}f.anchorDimensions=c},calculateItems:function(i,b){var m=this,j=i.childItems,q=j.length,k=b.gotHeight,l=b.gotWidth,o=b.height,p=b.width,n=(l?1:0)|(k?2:0),f=i.anchorDimensions,h,a,g,c,e,d;if(!f){return !0}for(e=0;e<q;e++){a=j[e];g=a.getMarginInfo();h=a.target.anchorSpec;if(l&&a.widthModel.calculated){d=h.right(p)-g.width;d=m.adjustWidthAnchor(d,a);a.setWidth(d)}if(k&&a.heightModel.calculated){c=h.bottom(o)-g.height;c=m.adjustHeightAnchor(c,a);a.setHeight(c)}}return (n&f)===f},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(a,e,d){if(a&&a!=='none'){var b=this.anchorFactory,c;if(this.parseAnchorRE.test(a)){return b.standard(d-e)}if(a.indexOf('%')!==-1){return b.ratio(parseFloat(a.replace('%',''))*0.01)}c=parseInt(a,10);if(!isNaN(c)){return b.offset(c)}}return null},adjustWidthAnchor:function(a,b){return a},adjustHeightAnchor:function(a,b){return a},configureItem:function(a){var d=this,b=d.owner,g=a.anchor,f,c,e;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!a.anchor&&a.items&&!Ext.isNumber(a.width)){a.anchor=g=d.defaultAnchor}if(b.anchorSize){if(typeof b.anchorSize==='number'){c=b.anchorSize}else {c=b.anchorSize.width;e=b.anchorSize.height}}else {c=b.initialConfig.width;e=b.initialConfig.height}if(g){f=g.split(' ');a.anchorSpec={right:d.parseAnchor(f[0],a.initialConfig.width,c),bottom:d.parseAnchor(f[1],a.initialConfig.height,e)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var a=e.anchorSpec,d='$',c=this.sizePolicy,b;if(a){b=this.owner.getSizeModel();if(a.right&&!b.width.shrinkWrap){c=c.r}if(a.bottom&&!b.height.shrinkWrap){d='b'}}return c[d]}},0,0,0,0,['layout.anchor'],0,[Ext.layout.container,'Anchor',Ext.layout,'AnchorLayout'],0);Ext.cmd.derive('Ext.layout.component.ProgressBar',Ext.layout.component.Auto,{type:'progressbar',beginLayout:function(a){var d=this,c,b;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!a.textEls){b=d.owner.textEl;if(b.isComposite){a.textEls=[];b=b.elements;for(c=b.length;c--;){a.textEls[c]=a.getEl(Ext.get(b[c]))}}else {a.textEls=[a.getEl('textEl')]}}},calculate:function(a){var e=this,d,b,c;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(c=a.getProp('width'))){c-=a.getBorderInfo().width;b=a.textEls;for(d=b.length;d--;){b[d].setWidth(c)}}else {e.done=!1}}},0,0,0,0,['layout.progressbar'],0,[Ext.layout.component,'ProgressBar'],0);Ext.cmd.derive('Ext.ProgressBar',Ext.Component,{baseCls:'x-progress',animate:!1,text:'',waitTimer:null,childEls:['bar'],defaultBindProperty:'value',renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>','</tpl>','<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">','<div>{text}</div>','</div>','</tpl>','</div>'],componentLayout:'progressbar',ariaRole:'progressbar',initRenderData:function(){var a=this,b=a.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty('textEl'),text:a.text||'&#160;',percentage:b*100})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else {a.textEl=a.el.select('.'+a.baseCls+'-text')}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+'%')},updateProgress:function(b,c,d){b=b||0;var a=this,f=a.value,e=a.getTextTpl();a.value=b||(b=0);if(c!=null){a.updateText(c)}else {if(e){a.updateText(e.apply({value:b,percent:b*100}))}}if(a.rendered&&!a.destroyed){if(d===!0||d!==!1&&a.animate){a.bar.stopAnimation();a.bar.animate(Ext.apply({from:{width:f*100+'%'},to:{width:b*100+'%'}},a.animate))}else {a.bar.setStyle('width',b*100+'%')}}a.fireEvent('update',a,b,c);return a},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(a){var b=this,c;if(!b.waitTimer){c=b;a=a||{};b.updateText(a.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var c=a.increment||10;d-=1;b.updateProgress(((d+c)%c+1)*(100/c)*0.01,null,a.animate)},interval:a.interval||1000,duration:a.duration,onStop:function(){if(a.fn){a.fn.apply(a.scope||b)}b.reset()},scope:c})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(b){var a=this;a.updateProgress(0);a.clearTimer();if(b===!0){a.hide()}return a},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var a=this,b=a.bar;a.clearTimer();if(a.rendered){if(a.textEl.isComposite){a.textEl.clear()}Ext.destroyMembers(a,'textEl','progressBar');if(b&&a.animate){b.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,['progressbar'],['component','box','progressbar'],{'component':!0,'box':!0,'progressbar':!0},['widget.progressbar'],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,'ProgressBar'],0);Ext.cmd.derive('Ext.window.MessageBox',Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:'x-message-box-info',WARNING:'x-message-box-warning',QUESTION:'x-message-box-question',ERROR:'x-message-box-error',hideMode:'offsets',closeAction:'hide',resizable:!1,scrollable:!0,title:'&#160;',defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:['x-message-box','x-hidden-offsets'],layout:{type:'vbox',align:'stretch'},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:'OK',yes:'Yes',no:'No',cancel:'Cancel'},buttonIds:['ok','yes','no','cancel'],titleText:{confirm:'Confirm',prompt:'Prompt',wait:'Loading...',alert:'Attention'},baseIconCls:'x-message-box-icon',ariaRole:'alertdialog',makeButton:function(b){var a=this.buttonIds[b];return new Ext.button.Button({handler:this.btnCallback,itemId:a,scope:this,text:this.buttonText[a],minWidth:75})},btnCallback:function(e,b){var a=this,d,c;if(b&&b.type==='keydown'&&!b.isSpecialKey()){b.getTarget(null,null,!0).on({keyup:function(c){a.btnCallback(e,c)},single:!0});return}if(a.cfg.prompt||a.cfg.multiline){if(a.cfg.multiline){c=a.textArea}else {c=a.textField}d=c.getValue();c.reset()}a.hide();a.userCallback(e.itemId,d,a.cfg)},hide:function(){var a=this,b=a.cfg?a.cfg.cls:'';a.progressBar.reset();if(b){a.removeCls(b)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(b){var a=this;Ext.window.Window.prototype.constructor.apply(this,arguments);a.minWidth=a.defaultMinWidth=a.minWidth||a.defaultMinWidth;a.maxWidth=a.defaultMaxWidth=a.maxWidth||a.defaultMaxWidth;a.minHeight=a.defaultMinHeight=a.minHeight||a.defaultMinHeight;a.maxHeight=a.defaultMaxHeight=a.maxHeight||a.defaultMaxHeight},initComponent:function(e){var a=this,b=a.id,d,c;a.title=a.title||'&#160;';a.iconCls=a.iconCls||'';a.topContainer=new Ext.container.Container({layout:'hbox',padding:10,style:{overflow:'hidden'},items:[a.iconComponent=new Ext.Component({cls:a.baseIconCls}),a.promptContainer=new Ext.container.Container({flex:1,layout:{type:'vbox',align:'stretch'},items:[a.msg=new Ext.Component({id:b+'-msg',cls:a.baseCls+'-text'}),a.textField=new Ext.form.field.Text({id:b+'-textfield',enableKeyEvents:!0,listeners:{keydown:a.onPromptKey,scope:a}}),a.textArea=new Ext.form.field.TextArea({id:b+'-textarea',height:75})]})]});a.progressBar=new Ext.ProgressBar({id:b+'-progressbar',margin:'0 10 10 10'});a.items=[a.topContainer,a.progressBar];a.msgButtons=[];for(d=0;d<4;d++){c=a.makeButton(d);a.msgButtons[c.itemId]=c;a.msgButtons.push(c)}a.bottomTb=new Ext.toolbar.Toolbar({id:b+'-toolbar',ui:'footer',dock:'bottom',layout:{pack:'center'},items:[a.msgButtons[0],a.msgButtons[1],a.msgButtons[2],a.msgButtons[3]]});a.dockedItems=[a.bottomTb];a.on('close',a.onClose,a);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child('[type=close]');if(a){a.itemId='cancel';this.btnCallback(a);delete a.itemId}},onPromptKey:function(c,b){var a=this;if(b.keyCode===b.RETURN||b.keyCode===10){if(a.msgButtons.ok.isVisible()){a.msgButtons.ok.handler.call(a,a.msgButtons.ok)}else {if(a.msgButtons.yes.isVisible()){a.msgButtons.yes.handler.call(a,a.msgButtons.yes)}}}},reconfigure:function(b){var a=this,j=0,q=!0,t=a.buttonText,g=a.resizer,c=a.header,r=c&&!c.isHeader,s=b&&(b.message||b.msg),i,n,m,e,d,f,o,k,l,h,p;a.updateButtonText();a.cfg=b=b||{};h=b.wait;if(b.width){n=b.width}if(b.height){m=b.height}a.minWidth=b.minWidth||a.defaultMinWidth;a.maxWidth=b.maxWidth||a.defaultMaxWidth;a.minHeight=b.minHeight||a.defaultMinHeight;a.maxHeight=b.maxHeight||a.defaultMaxHeight;if(g){i=g.resizeTracker;g.minWidth=i.minWidth=a.minWidth;g.maxWidth=i.maxWidth=a.maxWidth;g.minHeight=i.minHeight=a.minHeight;g.maxHeight=i.maxHeight=a.maxHeight}delete a.defaultFocus;if(b.defaultFocus){a.defaultFocus=b.defaultFocus}a.animateTarget=b.animateTarget||undefined;a.modal=b.modal!==!1;a.setTitle(b.title||r&&c.title||a.title);a.setIconCls(b.iconCls||r&&c.iconCls||a.iconCls);if(Ext.isObject(b.buttons)){a.buttonText=b.buttons;j=0}else {a.buttonText=b.buttonText||a.buttonText;j=Ext.isNumber(b.buttons)?b.buttons:0}j=j|a.updateButtonText();a.buttonText=t;Ext.suspendLayouts();a.width=a.height=null;if(n||m){if(n){a.setWidth(n)}if(m){a.setHeight(m)}}a.hidden=!1;if(!a.rendered){a.render(Ext.getBody())}a.closable=b.closable!==!1&&!h;c=a.header;if(c){p=c.child('[type=close]');if(p){p.setVisible(a.closable)}if(!b.title&&!a.closable&&!b.iconCls){c.hide()}else {c.show()}}a.liveDrag=!b.proxyDrag;a.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global);a.setIcon(b.icon);o=a.msg;if(s){o.setHtml(s);o.show()}else {o.hide()}d=a.textArea;f=a.textField;if(b.prompt||b.multiline){a.multiline=b.multiline;if(b.multiline){d.setValue(b.value);d.setHeight(b.defaultTextHeight||a.defaultTextHeight);d.show();f.hide();a.defaultFocus=d}else {f.setValue(b.value);d.hide();f.show();a.defaultFocus=f}}else {d.hide();f.hide()}k=a.progressBar;if(b.progress||h){k.show();a.updateProgress(0,b.progressText);if(h){k.wait(h===!0?b.waitConfig:h)}}else {k.hide()}l=a.msgButtons;for(e=0;e<4;e++){if(j&Math.pow(2,e)){if(!a.defaultFocus){a.defaultFocus=l[e]}l[e].show();q=!1}else {l[e].hide()}}if(q){a.bottomTb.hide()}else {a.bottomTb.show()}Ext.resumeLayouts(!0)},updateButtonText:function(){var b=this,c=b.buttonText,e=0,a,d;for(a in c){if(c.hasOwnProperty(a)){d=b.msgButtons[a];if(d){if(b.cfg&&b.cfg.buttonText){e=e|Math.pow(2,Ext.Array.indexOf(b.buttonIds,a))}if(d.text!==c[a]){d.setText(c[a])}}}}return e},show:function(b){var a=this,c;b=b||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){a.show(b)},single:!0});return a}a.reconfigure(b);if(b.cls){a.addCls(b.cls)}c=a.query('textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])');a.preventFocusOnActivate=!c.length;a.hidden=!0;Ext.window.Window.prototype.show.call(this);return a},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(e,d,c){var b=this,a=b.iconComponent,f=b.messageIconCls;if(f){a.removeCls(f)}if(e){a.show();if(d||c){a.setSize(d||a.getWidth(),c||a.getHeight())}a.addCls('x-dlg-icon');a.addCls(b.messageIconCls=e)}else {a.removeCls('x-dlg-icon');a.hide()}return b},updateProgress:function(c,b,a){this.progressBar.updateProgress(c,b);if(a){this.updateText(a)}return this},onEsc:function(){if(this.closable!==!1){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(a,b,d,c){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:b,buttons:this.YESNO,callback:d,scope:c}}return this.show(a)},prompt:function(a,c,f,d,b,e){if(Ext.isString(a)){a={prompt:!0,title:a,minWidth:this.minPromptWidth,message:c,buttons:this.OKCANCEL,callback:f,scope:d,multiline:b,value:e}}return this.show(a)},wait:function(a,c,b){if(Ext.isString(a)){a={title:c,message:a,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:b}}return this.show(a)},alert:function(a,b,d,c){if(Ext.isString(a)){a={title:a,message:b,buttons:this.OK,fn:d,scope:c,minWidth:this.minWidth}}return this.show(a)},progress:function(a,c,b){if(Ext.isString(a)){a={title:a,message:c,progress:!0,progressText:b}}return this.show(a)}},1,['messagebox'],['component','box','container','panel','window','messagebox'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'messagebox':!0},['widget.messagebox'],0,[Ext.window,'MessageBox'],function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a()})});Ext.cmd.derive('Ext.layout.container.Fit',Ext.layout.container.Container,{alternateClassName:'Ext.layout.FitLayout',itemCls:'x-fit-item',type:'fit',manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(d,b){var a=b||this.owner.getSizeModel(),c=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[c]},beginLayoutCycle:function(a,p){var f=this,j=f.lastHeightModel&&f.lastHeightModel.calculated,m=f.lastWidthModel&&f.lastWidthModel.calculated,l=m||j,h=0,i=0,b,k,g,e,q,n,c,d,o,r;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);if(l&&a.targetContext.el.dom.tagName.toUpperCase()!=='TD'){l=m=j=!1}k=a.childItems;q=k.length;for(g=0;g<q;++g){e=k[g];if(p){b=e.target;c=b.minHeight;d=b.minWidth;if(d||c){n=e.marginInfo||e.getMarginInfo();c+=n.height;d+=n.height;if(h<c){h=c}if(i<d){i=d}}}if(l){o=e.el.dom.style;if(j){o.height=''}if(m){o.width=''}}}if(p){a.maxChildMinHeight=h;a.maxChildMinWidth=i}b=a.target;a.overflowX=!a.widthModel.shrinkWrap&&a.maxChildMinWidth&&b.scrollFlags.x||r;a.overflowY=!a.heightModel.shrinkWrap&&a.maxChildMinHeight&&b.scrollFlags.y||r},calculate:function(a){var d=this,p=a.childItems,m=p.length,b=d.getContainerSize(a),c={length:m,ownerContext:a,targetSize:b},o=a.widthModel.shrinkWrap,n=a.heightModel.shrinkWrap,j=a.overflowX,k=a.overflowY,e,f,l,g,i,h;a.state.info=c;if(j||k){e=d.getScrollbarsNeeded(j&&b.width,k&&b.height,a.maxChildMinWidth,a.maxChildMinHeight);if(e){f=Ext.getScrollbarSize();if(e&1){b.height-=f.height}if(e&2){b.width-=f.width}}}if(m>0){for(g=0;g<m;++g){c.index=g;d.fitItem(p[g],c)}}else {c.contentWidth=c.contentHeight=0}if(n||o){l=a.targetContext.getPaddingInfo();if(o){if(k&&!b.gotHeight){d.done=!1}else {i=c.contentWidth+l.width;if(e&2){i+=f.width}if(!a.setContentWidth(i)){d.done=!1}}}if(n){if(j&&!b.gotWidth){d.done=!1}else {h=c.contentHeight+l.height;if(e&1){h+=f.height}if(!a.setContentHeight(h)){d.done=!1}}}}},fitItem:function(b,a){var c=this;if(b.invalid){c.done=!1;return}a.margins=b.getMarginInfo();a.needed=a.got=0;c.fitItemWidth(b,a);c.fitItemHeight(b,a);if(a.got!==a.needed){c.done=!1}},fitItemWidth:function(b,a){var c,d;if(a.ownerContext.widthModel.shrinkWrap){d=b.getProp('width')+a.margins.width;c=a.contentWidth;if(c===undefined){a.contentWidth=d}else {a.contentWidth=Math.max(c,d)}}else {if(b.widthModel.calculated){++a.needed;if(a.targetSize.gotWidth){++a.got;this.setItemWidth(b,a)}else {return}}}this.positionItemX(b,a)},fitItemHeight:function(b,a){var c,d;if(a.ownerContext.heightModel.shrinkWrap){d=b.getProp('height')+a.margins.height;c=a.contentHeight;if(c===undefined){a.contentHeight=d}else {a.contentHeight=Math.max(c,d)}}else {if(b.heightModel.calculated){++a.needed;if(a.targetSize.gotHeight){++a.got;this.setItemHeight(b,a)}else {return}}}this.positionItemY(b,a)},positionItemX:function(c,b){var a=b.margins;if(b.index||a.left){c.setProp('x',a.left)}if(a.width&&b.ownerContext.widthModel.shrinkWrap){c.setProp('margin-right',a.width)}},positionItemY:function(c,b){var a=b.margins;if(b.index||a.top){c.setProp('y',a.top)}if(a.height&&b.ownerContext.heightModel.shrinkWrap){c.setProp('margin-bottom',a.height)}},setItemHeight:function(b,a){b.setHeight(a.targetSize.height-a.margins.height)},setItemWidth:function(b,a){b.setWidth(a.targetSize.width-a.margins.width)}},0,0,0,0,['layout.fit'],0,[Ext.layout.container,'Fit',Ext.layout,'FitLayout'],0);Ext.cmd.derive('Ext.panel.Table',Ext.panel.Panel,{extraBaseCls:'x-grid',extraBodyCls:'x-grid-body',actionableModeCls:'x-grid-actionable',noHeaderBordersCls:'x-no-header-borders',defaultBindProperty:'store',layout:'fit',ariaRole:'grid',config:{selection:null,headerBorders:!0},publishes:['selection'],twoWayBindable:['selection'],autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,rowLines:!0,bufferedRenderer:!0,ownerGrid:null,colLinesCls:'x-grid-with-col-lines',rowLinesCls:'x-grid-with-row-lines',noRowLinesCls:'x-grid-no-row-lines',hiddenHeaderCtCls:'x-grid-header-ct-hidden',hiddenHeaderCls:'x-grid-header-hidden',resizeMarkerCls:'x-grid-resize-marker',emptyCls:'x-grid-empty',focusable:!0,constructor:function(d){var a=this,c=d&&d.ownerGrid,b;a.ownerGrid=c||a;a.actionables=c?c.actionables:[];Ext.panel.Panel.prototype.constructor.call(this,d);b=a.store;b.trackStateChanges=!0;if(a.autoLoad){if(!b.isEmptyStore){b.load()}}},registerActionable:function(a){Ext.Array.include(this.actionables,a)},initComponent:function(){var a=this,b=a.columns||a.colModel||[],d,e,f,j,g,i,h,c;d=a.store=Ext.data.StoreManager.lookup(a.store||'ext-empty-store');a.enableLocking=a.enableLocking||a.hasLockedColumns(b);if(a.plugins){a.plugins=a.constructPlugins()}if(a.columnLines){a.addBodyCls(a.colLinesCls)}a.addBodyCls(a.rowLines?a.rowLinesCls:a.noRowLinesCls);a.addBodyCls(a.extraBodyCls);if(a.enableLocking){a.self.mixin('lockable',Ext.grid.locking.Lockable);a.injectLockable();c=a.headerCt}else {if(b.isRootHeader){if(a.hideHeaders){b.setHeight(0);b.hiddenHeaders=!0}else {b.setScrollable({x:!1,y:!1})}a.headerCt=c=b;c.grid=a;c.forceFit=!!a.forceFit;c.$initParent=a;a.columnManager=b.columnManager;a.visibleColumnManager=b.visibleColumnManager}else {if(Ext.isArray(b)){b={items:b}}Ext.apply(b,{grid:a,$initParent:a,forceFit:a.forceFit,sortable:a.sortableColumns,enableColumnMove:a.enableColumnMove,enableColumnResize:a.enableColumnResize,columnLines:a.columnLines,sealed:a.sealedColumns,scrollable:a.hideHeaders?undefined:{x:!1,y:!1}});if(a.hideHeaders){b.height=0;b.hiddenHeaders=!0}if(Ext.isDefined(a.enableColumnHide)){b.enableColumnHide=a.enableColumnHide}a.headerCt=c=new Ext.grid.header.Container(b)}}a.columns=i=c.getGridColumns();a.scrollTask=new Ext.util.DelayedTask(a.syncHorizontalScroll,a);a.cls=(a.cls||'')+(' '+a.extraBaseCls);delete a.autoScroll;g=a.plugins&&Ext.Array.findBy(a.plugins,function(a){return a.isBufferedRenderer});if(g){a.bufferedRenderer=g}if(!a.hasView){if(d.isBufferedStore&&!d.getRemoteSort()){for(f=0,j=i.length;f<j;f++){i[f].sortable=!1}}if(a.hideHeaders){a.headerCt.addCls(a.hiddenHeaderCtCls);a.addCls(a.hiddenHeaderCls)}a.relayHeaderCtEvents(c);a.features=a.features||[];if(!Ext.isArray(a.features)){a.features=[a.features]}a.dockedItems=[].concat(a.dockedItems||[]);a.dockedItems.unshift(c);a.viewConfig=a.viewConfig||{};e=a.getView();a.items=[e];a.hasView=!0;if(!a.hideHeaders){h=e.getScrollable();if(h){c.getScrollable().addPartner(h,'x')}}a.bindStore(d,!0);a.mon(e,{viewready:a.onViewReady,refresh:a.onRestoreHorzScroll,scope:a})}a.selModel=a.view.getSelectionModel();if(a.selModel.isRowModel){a.selModel.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection})}a.relayEvents(a.view,['beforeitemmousedown','beforeitemmouseup','beforeitemmouseenter','beforeitemmouseleave','beforeitemclick','beforeitemdblclick','beforeitemcontextmenu','itemmousedown','itemmouseup','itemmouseenter','itemmouseleave','itemclick','itemdblclick','itemcontextmenu','beforecellclick','cellclick','beforecelldblclick','celldblclick','beforecellcontextmenu','cellcontextmenu','beforecellmousedown','cellmousedown','beforecellmouseup','cellmouseup','beforecellkeydown','cellkeydown','rowclick','rowdblclick','rowcontextmenu','rowmousedown','rowmouseup','rowkeydown','beforeitemkeydown','itemkeydown','beforeitemkeyup','itemkeyup','beforeitemkeypress','itemkeypress','beforecontainermousedown','beforecontainermouseup','beforecontainermouseover','beforecontainermouseout','beforecontainerclick','beforecontainerdblclick','beforecontainercontextmenu','beforecontainerkeydown','beforecontainerkeyup','beforecontainerkeypress','containermouseup','containermousedown','containermouseover','containermouseout','containerclick','containerdblclick','containercontextmenu','containerkeydown','containerkeyup','containerkeypress','selectionchange','beforeselect','select','beforedeselect','deselect']);Ext.panel.Panel.prototype.initComponent.call(this);if(a.enableLocking){a.afterInjectLockable()}else {delete c.$initParent}a.addStateEvents(['columnresize','columnmove','columnhide','columnshow','sortchange','filterchange','groupchange'])},beforeRender:function(){var a=this,b=a.bufferedRenderer,c;if(a.lockable){a.getProtoBody().addCls(a.lockingBodyCls)}else {if(b&&a.getSizeModel().height.auto){a.bufferedRenderer=b=!1}if(b&&!b.isBufferedRenderer){b={xclass:'Ext.grid.plugin.BufferedRenderer'};Ext.copy(b,a,'variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer');a.bufferedRenderer=a.addPlugin(b)}c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-readonly']=!a.isEditable;c['aria-multiselectable']=a.selModel.selectionMode!=='SINGLE'}Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},onRender:function(){var a=this,b,c;if(a.isLocked&&a.getSizeModel().width.shrinkWrap){a.shrinkWrapColumns=!0;c=a.headerCt.getTableWidth();b=a.gridPanelBorderWidth||(a.gridPanelBorderWidth=a.el.getBorderWidth('lr'));a.width=c+b}Ext.panel.Panel.prototype.onRender.call(this)},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(a){var b,d,c;if(a.isRootHeader){a=a.items.items}else {if(Ext.isObject(a)){a=a.items}}for(b=0,d=a.length;b<d;b++){c=a[b];if(!c.processed&&c.locked){return !0}}},relayHeaderCtEvents:function(a){this.relayEvents(a,['columnresize','columnmove','columnhide','columnshow','columnschanged','sortchange','headerclick','headercontextmenu','headertriggerclick'])},getState:function(){var b=this,a=Ext.panel.Panel.prototype.getState.call(this),c=b.store.getState();a=b.addPropertyToState(a,'columns',b.headerCt.getColumnsState());if(c){a.storeState=c}return a},applyState:function(b){var f=this,a=b.sort,d=b.storeState,c=f.store,e=b.columns;delete b.columns;Ext.panel.Panel.prototype.applyState.apply(this,arguments);if(e){f.headerCt.applyColumnsState(e,d)}if(a){if(c.getRemoteSort()){c.sort({property:a.property,direction:a.direction,root:a.root},null,!1)}else {c.sort(a.property,a.direction)}}else {if(d){c.applyState(d)}}},getStore:function(){return this.store},getView:function(){var a=this,c,b,d;if(!a.view){d=a.viewConfig;c=d.scroll||a.scroll;b=a.scrollable;if(b==null&&d.scrollable==null&&c!==null){if(c===!0||c==='both'){b=!0}else {if(c===!1||c==='none'){b=!1}else {if(c==='vertical'){b={x:!1,y:!0}}else {if(c==='horizontal'){b={x:!0,y:!1}}}}}}d=Ext.apply({grid:a,ownerGrid:a.ownerGrid,deferInitialRefresh:a.deferRowRender,variableRowHeight:a.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:a.trackMouseOver!==!1,throttledUpdate:a.throttledUpdate===!0,xtype:a.viewType,store:a.store,headerCt:a.headerCt,columnLines:a.columnLines,rowLines:a.rowLines,navigationModel:'grid',features:a.features,panel:a,emptyText:a.emptyText||''},a.viewConfig);if(b!=null){d.scrollable=b;a.scrollable=null}Ext.create(d);if(a.view.emptyText){a.view.emptyText='<div class="'+a.emptyCls+'">'+a.view.emptyText+'</div>'}a.view.getComponentLayout().headerCt=a.headerCt;a.mon(a.view,{uievent:a.processEvent,scope:a});a.headerCt.view=a.view;if(a.hasListeners.viewcreated){a.fireEvent('viewcreated',a,a.view)}}return a.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(a){if(this.view){this.view.setScrollable(a)}return a},getScrollable:function(){return null},processEvent:function(g,h,f,c,d,b,e,i){var a=b.position.column;if(a){return a.processEvent.apply(a,arguments)}},ensureVisible:function(b,a){this.doEnsureVisible(b,a)},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos();Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){var a=this.view.getScrollable(),b;if(a&&a.isTouchScroller){b=a.getSize();if(b){a.setSize({x:this.headerCt.getTableWidth(),y:b.y})}}},onHeaderMove:function(e,f,b,c,d){var a=this;if(a.optimizedColumnMove===!1){a.view.refreshView()}else {a.view.moveColumn(c,d,b)}a.delayScroll()},onHeaderHide:function(b,c){var a=this.view;if(!b.childHideCount&&a.refreshCounter){a.refreshView()}},onHeaderShow:function(b,c){var a=this.view;if(a.refreshCounter){a.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent('viewready',this)},onRestoreHorzScroll:function(){var a=this,b=a.scrollXPos;if(b){a.syncHorizontalScroll(a,!0)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up('[scrollerOwner]')}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:'presentation',cls:a.resizeMarkerCls},!0))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:'presentation',cls:a.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(c){var a=this,b;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;b=a.getSelectionModel();if(c){b.select(c)}else {b.deselectAll()}a.ignoreNextSelection=!1}},updateBindSelection:function(d,c){var a=this,b=null;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(c.length){b=d.getLastSelected();a.hasHadSelection=!0}if(a.hasHadSelection){a.setSelection(b)}a.ignoreNextSelection=!1}},updateHeaderBorders:function(a){this[a?'removeCls':'addCls'](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var a=this.getScrollerOwner().query('tableview');return a[a.length-1]},syncHorizontalScroll:function(e,b){var a=this,c=a.view.getScrollX(),d;b=b===!0;if(a.rendered&&(b||c!==a.scrollXPos)){if(b){d=a.getScrollTarget();d.setScrollX(c)}a.headerCt.setScrollX(c);a.scrollXPos=c}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,d){var a=this,c=a.getView();if(b){a.store=b;if(c.store!==b){c.bindStore(b,!1)}a.mon(b,{load:a.onStoreLoad,scope:a});a.storeRelayers=a.relayEvents(b,['filterchange','groupchange'])}else {a.unbindStore()}},unbindStore:function(){var a=this,b=a.store,c;if(b){b.trackStateChanges=!1;a.store=null;a.mun(b,{load:a.onStoreLoad,scope:a});Ext.destroy(a.storeRelayers);c=a.view;if(c.store){c.bindStore(null)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(a){this.reconfigure(a);if(this.autoLoad&&!a.isEmptyStore&&!(a.loading||a.isLoaded())){a.load()}},reconfigure:function(b,c){var a=this,f=a.store,e=a.headerCt,i=a.lockable,h=e?e.items.getRange():a.columns,d=a.getView(),j,g;if(arguments.length===1&&Ext.isArray(b)){c=b;b=null}if(c){c=Ext.Array.slice(c)}a.reconfiguring=!0;if(b){b=Ext.StoreManager.lookup(b)}a.fireEvent('beforereconfigure',a,b,c,f,h);Ext.suspendLayouts();if(i){a.reconfigureLockable(b,c)}else {j=d.blockRefresh;d.blockRefresh=!0;if(b&&b!==f){a.unbindStore();a.bindStore(b)}if(c){delete a.scrollXPos;e.removeAll();e.add(c)}d.blockRefresh=j;g=d.refreshCounter}Ext.resumeLayouts(!0);if(i){a.afterReconfigureLockable()}else {if(d.refreshCounter===g){d.refreshView()}}a.fireEvent('reconfigure',a,b,c,f,h);delete a.reconfiguring},beforeDestroy:function(){var a=this,b=a.scrollTask;if(b){b.cancel();a.scrollTask=null}Ext.destroy(a.focusEnterLeaveListeners);Ext.panel.Panel.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.lockable){a.destroyLockable()}a.unbindStore();Ext.panel.Panel.prototype.onDestroy.call(this);a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;Ext.panel.Panel.prototype.destroy.call(this);if(a.destroyed){a.view=a.selModel=a.headerCt=null}},privates:{initFocusableElement:function(){},doEnsureVisible:function(a,c){if(this.lockable){return this.ensureLockedVisible(a,c)}if(typeof a!=='number'&&!a.isEntity){a=this.store.getById(a)}var b=this,d=b.getView(),f=d.getNode(a),g,h,k,j,m,l,i,e,n;if(c){g=c.callback;h=c.scope;k=c.animate;j=c.highlight;m=c.select;l=c.focus;e=c.column}if(b.deferredEnsureVisible){b.deferredEnsureVisible.destroy()}if(!d.componentLayoutCounter){b.deferredEnsureVisible=d.on({resize:b.doEnsureVisible,args:Ext.Array.slice(arguments),scope:b,single:!0,destroyable:!0});return}if(typeof e==='number'){e=b.ownerGrid.getVisibleColumnManager().getColumns()[e]}if(f){i=d.getScrollable();if(e){n=Ext.fly(f).selectNode(e.getCellSelector())}if(i){i.scrollIntoView(n||f,!!e,k,j)}if(!a.isEntity){a=d.getRecord(f)}if(m){d.getSelectionModel().select(a)}if(l){d.getNavigationModel().setPosition(a,0)}Ext.callback(g,h||b,[!0,a,f])}else {if(d.bufferedRenderer){d.bufferedRenderer.scrollTo(a,{animate:k,highlight:j,select:m,focus:l,column:e,callback:function(f,e,d){Ext.callback(g,h||b,[!0,e,d])}})}else {Ext.callback(g,h||b,[!1,null])}}},getFocusEl:function(){return this.getView().getFocusEl()},setActionableMode:function(b,c){var a=this.ownerGrid;if(!a.destroying&&a.view.setActionableMode(b,c)!==!1){a.fireEvent('actionablemodechange',b);a[b?'addCls':'removeCls'](a.actionableModeCls);return !0}}}},1,['tablepanel'],['component','box','container','panel','tablepanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0},['widget.tablepanel'],0,[Ext.panel,'Table'],0);Ext.define('Ext.theme.neptune.panel.Table',{override:'Ext.panel.Table',lockableBodyBorder:!0,initComponent:function(){var a=this;(arguments.callee.$previous||Ext.panel.Panel.prototype.initComponent).call(this);if(!a.hasOwnProperty('bodyBorder')&&!a.hideHeaders&&(a.lockableBodyBorder||!a.lockable)){a.bodyBorder=!0}}});Ext.cmd.derive('Ext.grid.ColumnLayout',Ext.layout.container.HBox,{type:'gridcolumn',firstHeaderCls:'x-column-header-first',lastHeaderCls:'x-column-header-last',initLayout:function(){Ext.layout.container.HBox.prototype.initLayout.call(this);if(this.scrollbarWidth===undefined){this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}},beginLayout:function(d){var b=this,j=b.owner,e=b.firstHeaderCls,f=b.lastHeaderCls,h=[e,f],i=b.getVisibleItems(),g=i.length,c,a;Ext.layout.container.HBox.prototype.beginLayout.call(this,d);for(c=0;c<g;c++){a=i[c];if(g===1){a.addCls(h)}else {if(c===0){a.addCls(e);a.removeCls(f)}else {if(c===g-1){a.removeCls(e);a.addCls(f)}else {a.removeCls(h)}}}}b.scrollbarWidth=0;if(j.isRootHeader){b.determineScrollbarWidth(d)}if(!b.scrollbarWidth){d.manageScrollbar=!1}},moveItemBefore:function(a,c){var b=a.ownerCt;if(a!==c&&b){b.remove(a,!1)}return Ext.layout.container.HBox.prototype.moveItemBefore.call(this,a,c)},determineScrollbarWidth:function(g){var f=this,e=f.owner,a=e.grid,b=e.reserveScrollbar===!1,c=a.reserveScrollbar&&!b,d=!c&&!b&&a.view.scrollFlags.y;g.manageScrollbar=d;if(!a.ownerGrid.collapsed&&(c||d)){delete f.scrollbarWidth}},calculate:function(a){var b=this,m=b.owner.grid,i=a.viewContext,g=a.state,o=a.context,f,l,c,j,n,e,d,k,h;Ext.layout.container.HBox.prototype.calculate.call(this,a);if(m&&g.parallelDone){f=i.lockingPartnerContext;l=m.ownerGrid;if(l.forceFit&&!g.reflexed){if(b.convertWidthsToFlexes(a)){b.cacheFlexes(a);b.done=!1;a.invalidate({state:{reflexed:!0,scrollbarAdjustment:b.getScrollbarAdjustment(a)}});return}}if((c=g.columnsChanged)===undefined){j=a.target.getVisibleGridColumns();c=!1;for(e=0,n=j.length;e<n;e++){d=o.getCmp(j[e]);if(!d.lastBox||d.props.width!==d.lastBox.width){(c||(c=[]))[e]=d}}g.columnsChanged=c;a.setProp('columnsChanged',c)}if(a.manageScrollbar){k=b.getScrollbarAdjustment(a);if(k){h=i.getProp('viewOverflowY');if(h===undefined){b.done=!1;return}if(!h){if(f){f.invalidate();f.headerContext.invalidate()}i.invalidate();a.invalidate({state:{scrollbarAdjustment:0}})}}}}},finishedLayout:function(a){Ext.layout.container.HBox.prototype.finishedLayout.call(this,a);if(this.owner.ariaRole==='rowgroup'){this.innerCt.dom.setAttribute('role','row')}a.props.columnsChanged=null},convertWidthsToFlexes:function(d){var i=this,f=0,h=i.sizeModels.calculated,e,g,c,a,b;e=d.childItems;g=e.length;for(c=0;c<g;c++){a=e[c];b=a.target;f+=a.props.width;if(!(b.fixed||b.resizable===!1)){b.flex=d.childItems[c].flex=a.props.width;b.width=null;a.widthModel=h}}return f!==d.props.width},getScrollbarAdjustment:function(b){var e=this,c=b.state,d=e.owner.grid,a=c.scrollbarAdjustment;if(a===undefined){a=0;if(d.reserveScrollbar||b.manageScrollbar&&!d.ownerGrid.layout.ownerContext.heightModel.shrinkWrap){a=e.scrollbarWidth}c.scrollbarAdjustment=a}return a},getContainerSize:function(a){var j=this,e,d,i,h,g,c,b,f;if(j.owner.isRootHeader){f=Ext.layout.container.HBox.prototype.getContainerSize.call(this,a);if(f.gotWidth){f.width-=j.getScrollbarAdjustment(a)}}else {i=a.paddingContext.getPaddingInfo();e=d=0;if(!a.widthModel.shrinkWrap){++d;c=a.getProp('innerWidth');h=typeof c==='number';if(h){++e;c-=i.width;if(c<0){c=0}}}if(!a.heightModel.shrinkWrap){++d;b=a.getProp('innerHeight');g=typeof b==='number';if(g){++e;b-=i.height;if(b<0){b=0}}}return {width:c,height:b,needed:d,got:e,gotAll:e===d,gotWidth:h,gotHeight:g}}return f},publishInnerCtSize:function(a){var e=this,c=e.owner,d=a.peek('contentWidth'),b=0;if(d!=null&&c.isRootHeader){b=-a.state.scrollbarAdjustment}return Ext.layout.container.HBox.prototype.publishInnerCtSize.call(this,a,b)}},0,0,0,0,['layout.gridcolumn'],0,[Ext.grid,'ColumnLayout'],0);Ext.define('Ext.rtl.grid.ColumnLayout',{override:'Ext.grid.ColumnLayout',determineScrollbarWidth:function(c){var a=this,b=a.owner.grid.view;arguments.callee.$previous.call(this,c);if(b.getInherited().rtl){if(b.bufferedRenderer&&Ext.supports.xOriginBug){a.scrollbarWidth=-Math.abs(a.scrollbarWidth)}else {if(Ext.supports.rtlVertScrollbarOverflowBug||Ext.supports.rtlVertScrollbarOnRight){a.scrollbarWidth=0}}}},calculateParallel:function(c,d,e){var b=this,a=b.owner;if(a.isRootHeader){if(Ext.supports.rtlVertScrollbarOnRight&&a.ownerCt.view.getInherited().rtl||a.grid.view.bufferedRenderer&&Ext.supports.xOriginBug){b.padding.right=b.scrollbarWidth}}return (arguments.callee.$previous||Ext.layout.container.HBox.prototype.calculateParallel).apply(this,arguments)}});Ext.cmd.derive('Ext.plugin.Abstract',Ext.Base,{alternateClassName:'Ext.AbstractPlugin',isPlugin:!0,constructor:function(a){if(a){this.pluginConfig=a;this.initConfig(a)}},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:function(){this.cmp=this.pluginConfig=null;this.callParent()},onClassExtended:function(c,b,d){var a=b.alias;if(a&&!b.ptype){if(Ext.isArray(a)){a=a[0]}c.prototype.ptype=a.split('plugin.')[1]}},resolveListenerScope:function(b){var a=this,d=a.getCmp(),c;if(d){c=d.resolveSatelliteListenerScope(a,b)}return c||a.mixins.observable.resolveListenerScope.call(a,b)}},1,0,0,0,0,0,[Ext.plugin,'Abstract',Ext,'AbstractPlugin'],0);Ext.define('Ext.overrides.plugin.Abstract',{override:'Ext.plugin.Abstract',$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}});Ext.cmd.derive('Ext.grid.plugin.HeaderResizer',Ext.plugin.Abstract,{disabled:!1,config:{dynamic:!1},colHeaderCls:'x-column-header',minColWidth:40,maxColWidth:1000,eResizeCursor:'col-resize',init:function(b){var a=this;a.headerCt=b;b.on('render',a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var a=this,b=a.tracker;if(b){b.destroy();a.tracker=null}a.headerCt.un('render',a.afterHeaderRender,a);a.headerCt=null;Ext.plugin.Abstract.prototype.destroy.call(this)},afterHeaderRender:function(){var a=this,b=a.headerCt,c=b.el;b.mon(c,'mousemove',a.onHeaderCtMouseMove,a);a.markerOwner=a.ownerGrid=a.headerCt.up('tablepanel').ownerGrid;a.tracker=new Ext.dd.DragTracker({disabled:a.disabled,onBeforeStart:a.onBeforeStart.bind(a),onStart:a.onStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onEnd.bind(a),tolerance:3,autoStart:300,el:c})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor='';delete a.activeHd}}else {if(b.pointerType!=='touch'){a.findActiveHeader(b)}}},findActiveHeader:function(f){var d=this,e=d.headerCt,i=f.getTarget('.'+d.colHeaderCls,e.el,!0),h=d.ownerGrid,g=h.ownerLockable,a,b,c,j;d.activeHd=null;if(i){a=Ext.getCmp(i.id);if(a.isAtEndEdge(f)){if(e.visibleColumnManager.getColumns().length===1&&e.forceFit){return}b=a}else {if(a.isAtStartEdge(f)){c=e.visibleColumnManager.getColumns();j=a.isGroupHeader?a.getGridColumns()[0]:a;b=c[Ext.Array.indexOf(c,j)-1];if(!b&&g&&!h.isLocked){c=g.lockedGrid.headerCt.visibleColumnManager.getColumns();b=c[c.length-1]}}}if(b){if(b.isGroupHeader){c=b.getGridColumns();b=c[c.length-1]}if(b&&!(b.fixed||b.resizable===!1)){d.activeHd=b;a.el.dom.style.cursor=d.eResizeCursor;if(a.triggerEl){a.triggerEl.dom.style.cursor=d.eResizeCursor}}}else {a.el.dom.style.cursor='';if(a.triggerEl){a.triggerEl.dom.style.cursor=''}}}return d.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=a.activeHd||b.pointerType==='touch'&&a.findActiveHeader(b);if(a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return !0}else {a.headerCt.dragging=!1;return !1}},getConstrainRegion:function(){var a=this,e=a.dragHd.el,c,b=a.ownerGrid,g=b.getSizeModel().width,d=g.shrinkWrap?a.headerCt.getWidth()-a.headerCt.visibleColumnManager.getColumns().length*a.minColWidth:a.maxColWidth,f;if(a.headerCt.forceFit){c=a.dragHd.nextNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(c&&a.headerInSameGrid(c)){d=e.getWidth()+(c.getWidth()-a.minColWidth)}}else {if(b.isLocked&&g.shrinkWrap){d=a.dragHd.up('[scrollerOwner]').getTargetEl().getWidth(!0)-b.getWidth()-(b.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*a.minColWidth+Ext.getScrollbarSize().width)}}f=a.adjustConstrainRegion(e.getRegion(),0,0,0,a.minColWidth);f.right=e.getX()+d;return f},onStart:function(k){var a=this,i=a.dragHd,j=i.el.getWidth(),h=i.getRootHeaderCt(),f,g,b,c,d,e;a.headerCt.dragging=!0;a.origWidth=j;if(!a.dynamic){b=a.markerOwner;if(b.frame&&b.resizable){a.gridOverflowSetting=b.el.dom.style.overflow;b.el.dom.style.overflow='hidden'}f=a.getLeftMarkerX(b);c=b.getLhsMarker();d=b.getRhsMarker();e=a.ownerGrid.body.getHeight()+h.getHeight();g=h.getOffsetsTo(b)[1]-b.el.getBorderWidth('t');c.dom.style.cursor=a.eResizeCursor;d.dom.style.cursor=a.eResizeCursor;c.setLocalY(g);d.setLocalY(g);c.setHeight(e);d.setHeight(e);a.setMarkerX(c,f);a.setMarkerX(d,f+j)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else {a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(c){var a=this,b=a.markerOwner;a.headerCt.dragging=!1;if(a.dragHd){if(!a.dynamic){if('gridOverflowSetting' in a){b.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(b.getLhsMarker(),-9999);a.setMarkerX(b.getRhsMarker(),-9999)}a.doResize();if(c.pointerType!=='touch'){a.dragHd=null;a.activeHd.el.dom.style.cursor=a.eResizeCursor}else {a.dragHd=a.activeHd=null}}a.headerCt.blockNextEvent()},doResize:function(){var b=this,c=b.dragHd,a,d=b.tracker.getOffset('point');if(c&&d[0]){if(c.flex){delete c.flex}Ext.suspendLayouts();b.adjustColumnWidth(d[0]-b.xDelta);if(b.headerCt.forceFit){a=c.nextNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(a&&!b.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(!0)}},headerInSameGrid:function(a){var b=this.dragHd.up('tablepanel');return !!a.up(b)},disable:function(){var a=this.tracker;this.disabled=!0;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=!1;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY('point')[0]+this.xDelta-a.getX()-a.el.getBorderWidth('l')},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth('l')-1},setMarkerX:function(a,b){a.setLocalX(b)},adjustConstrainRegion:function(a,e,d,b,c){return a.adjust(e,d,b,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}},0,0,0,0,['plugin.gridheaderresizer'],0,[Ext.grid.plugin,'HeaderResizer'],0);Ext.define('Ext.rtl.grid.plugin.HeaderResizer',{override:'Ext.grid.plugin.HeaderResizer',doResize:function(){arguments.callee.$previous.apply(this,arguments);if(this.headerCt.getInherited().rtl==!0){Ext.rootInheritedState.rtl=!1}},onBeforeStart:function(b){var a=this;if(this.headerCt.isOppositeRootDirection()){a.dragHd=a.activeHd;if(!!a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()-a.tracker.getXY()[0];this.tracker.constrainTo=this.getConstrainRegion();return !0}else {a.headerCt.dragging=!1;return !1}}else {return arguments.callee.$previous.apply(this,arguments)}},adjustColumnWidth:function(a){if(this.headerCt.isOppositeRootDirection()){a=-a}arguments.callee.$previous.call(this,a)},adjustConstrainRegion:function(a,e,d,b,c){return this.headerCt.isOppositeRootDirection()?a.adjust(e,-c,b,-d):arguments.callee.$previous.apply(this,arguments)},calculateDragX:function(a){var c=a.getX(),b=this.tracker.getXY('point')[0];if(this.headerCt.isOppositeRootDirection()){return b-c+this.xDelta}else {return arguments.callee.$previous.apply(this,arguments)}},getMovingMarker:function(a){if(this.headerCt.isOppositeRootDirection()){return a.getLhsMarker()}else {return a.getRhsMarker()}},setMarkerX:function(b,c){var a=this.headerCt;if(a.getInherited().rtl&&!a.isOppositeRootDirection()){b.rtlSetLocalX(c)}else {arguments.callee.$previous.apply(this,arguments)}}});Ext.define('CGA.plugin.HeaderResizer',{override:'Ext.grid.plugin.HeaderResizer',getConstrainRegion:function(){if(this.headerCt.getInherited().rtl==!0){return null}return arguments.callee.$previous.apply(this,arguments)}});Ext.cmd.derive('Ext.dd.DragZone',Ext.dd.DragSource,{constructor:function(a,d){var c=this,b=c.containerScroll;Ext.dd.DragSource.prototype.constructor.call(this,a,d);if(b){a=c.scrollEl||a;a=Ext.get(a);if(Ext.isObject(b)){a.ddScrollConfig=b}Ext.dd.ScrollManager.register(a)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(!0));this.onStartDrag(a,b);return !0},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragSource.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}},1,0,0,0,0,0,[Ext.dd,'DragZone'],0);Ext.cmd.derive('Ext.grid.header.DragZone',Ext.dd.DragZone,{colHeaderSelector:'.x-column-header',colInnerSelector:'.x-column-header-inner',maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=!0;Ext.dd.DragZone.prototype.constructor.call(this,b.el);a.proxy.el.addCls('x-grid-col-dd')},getDDGroup:function(){return 'header-dd-zone-'+this.headerCt.up('[scrollerOwner]').id},getDragData:function(c){if(c.getTarget(this.colInnerSelector)){var d=c.getTarget(this.colHeaderSelector),a,b;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isAtStartEdge(c)||a.isAtEndEdge(c))){b=document.createElement('div');b.role='presentation';b.innerHTML=a.text;return {ddel:b,header:a}}}}return !1},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0;this.headerCt.hideMenu();Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=!1;Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this);this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},1,0,0,0,0,0,[Ext.grid.header,'DragZone'],0);Ext.cmd.derive('Ext.dd.DDTarget',Ext.dd.DragDrop,{constructor:function(a,c,b){if(a){this.initTarget(a,c,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return 'DDTarget '+this.id}},3,0,0,0,0,0,[Ext.dd,'DDTarget'],0);Ext.cmd.derive('Ext.dd.ScrollManager',Ext.Base,{singleton:!0,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(b){var a=Ext.dd.ScrollManager;a.dragEl=null;a.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var d=this;if(d.ddmInstance.dragCurrent){var b=d.proc,h=b.el,g=b.component,c=b.el.ddScrollConfig,e=c&&c.increment?c.increment:d.increment,a=c&&'animate' in c?c.animate:d.animate,f=function(){d.triggerRefresh()};if(a){if(a===!0){a={callback:f}}else {a.callback=a.callback?Ext.Function.createSequence(a.callback,f):f}}if(g){e=e*d.dirTrans[b.dir];if(b.dir==='up'||b.dir==='down'){g.scrollBy(0,e,a)}else {g.scrollBy(e,0,a)}}else {h.scroll(b.dir,e,a)}if(!a){f()}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}a.id=0;a.el=null;a.dir=''},startProc:function(a,f){var b=this,d=b.proc,c,e;b.clearProc();d.el=a;d.dir=f;c=a.ddScrollConfig?a.ddScrollConfig.ddGroup:undefined;e=a.ddScrollConfig&&a.ddScrollConfig.frequency?a.ddScrollConfig.frequency:b.frequency;if(c===undefined||b.ddmInstance.dragCurrent.ddGroup===c){d.id=Ext.interval(b.doScroll,e)}},onFire:function(j,i){var a=this,d,f,g,h,b,c,e;if(i||!a.ddmInstance.dragCurrent){return}if(!a.dragEl||a.dragEl!==a.ddmInstance.dragCurrent){a.dragEl=a.ddmInstance.dragCurrent;a.refreshCache()}d=j.getPoint();f=a.proc;g=a.els;for(h in g){b=g[h];c=b._region;e=b.ddScrollConfig||a;if(c&&c.contains(d)&&b.isScrollable()){if(c.bottom-d.y<=e.vthresh){if(f.el!==b){a.startProc(b,'down')}return}else {if(c.right-d.x<=e.hthresh){if(f.el!==b){a.startProc(b,'right')}return}else {if(d.y-c.top<=e.vthresh){if(f.el!==b){a.startProc(b,'up')}return}else {if(d.x-c.left<=e.hthresh){if(f.el!==b){a.startProc(b,'left')}return}}}}}}a.clearProc()},register:function(a){if(Ext.isArray(a)){for(var b=0,c=a.length;b<c;b++){this.register(a[b])}}else {a=Ext.get(a);this.els[a.id]=a}},unregister:function(a){if(Ext.isArray(a)){for(var b=0,c=a.length;b<c;b++){this.unregister(a[b])}}else {a=Ext.get(a);delete this.els[a.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]==='object'){a[b]._region=a[b].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,'ScrollManager'],0);Ext.cmd.derive('Ext.dd.DropTarget',Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},containerScroll:!1,dropAllowed:'x-dd-drop-ok',dropNotAllowed:'x-dd-drop-nodrop',isTarget:!0,isNotifyTarget:!0,notifyEnter:function(b,c,a){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(b,c,a){return this.dropAllowed},notifyOut:function(b,c,a){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(b,c,a){if(this.overClass){this.el.removeCls(this.overClass)}return !1},destroy:function(){Ext.dd.DDTarget.prototype.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}},1,0,0,0,0,0,[Ext.dd,'DropTarget'],0);Ext.cmd.derive('Ext.dd.Registry',Ext.Base,{singleton:!0,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(a,c){if(typeof a==='string'){return a}var b=a.id;if(!b&&c!==!1){b='extdd-'+ ++this.autoIdSeed;a.id=b}return b},register:function(b,a){a=a||{};if(typeof b==='string'){b=document.getElementById(b)}a.ddel=b;this.elements[this.getId(b)]=a;if(a.isHandle!==!1){this.handles[a.ddel.id]=a}if(a.handles){var e=a.handles,c,d;for(c=0,d=e.length;c<d;c++){this.handles[this.getId(e[c])]=a}}},unregister:function(f){var e=this.getId(f,!1),b=this.elements[e],c,a,d;if(b){delete this.elements[e];if(b.handles){c=b.handles;for(a=0,d=c.length;a<d;a++){delete this.handles[this.getId(c[a],!1)]}}}},getHandle:function(a){if(typeof a!=='string'){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!=='string'){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}},1,0,0,0,0,0,[Ext.dd,'Registry'],0);Ext.cmd.derive('Ext.dd.DropZone',Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,b,c,a){},onNodeOver:function(d,b,c,a){return this.dropAllowed},onNodeOut:function(d,b,c,a){},onNodeDrop:function(d,b,c,a){return !1},onContainerOver:function(b,c,a){return this.dropNotAllowed},onContainerDrop:function(b,c,a){return !1},notifyEnter:function(b,c,a){return this.dropNotAllowed},notifyOver:function(d,b,c){var a=this,e=a.getTargetFromEvent(b);if(!e){if(a.lastOverNode){a.onNodeOut(a.lastOverNode,d,b,c);a.lastOverNode=null}return a.onContainerOver(d,b,c)}if(a.lastOverNode!==e){if(a.lastOverNode){a.onNodeOut(a.lastOverNode,d,b,c)}a.onNodeEnter(e,d,b,c);a.lastOverNode=e}return a.onNodeOver(e,d,b,c)},notifyOut:function(b,c,a){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,b,c,a);this.lastOverNode=null}},notifyDrop:function(d,b,c){var a=this,e=a.getTargetFromEvent(b),f=e?a.onNodeDrop(e,d,b,c):a.onContainerDrop(d,b,c);if(a.lastOverNode){a.onNodeOut(a.lastOverNode,d,b,c);a.lastOverNode=null}return f},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,'DropZone'],0);Ext.cmd.derive('Ext.grid.header.DropZone',Ext.dd.DropZone,{colHeaderCls:'x-column-header',proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=!0;Ext.dd.DropZone.prototype.constructor.call(this,b.el)},destroy:function(){Ext.dd.DropZone.prototype.destroy.call(this);Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return 'header-dd-zone-'+this.headerCt.up('[scrollerOwner]').id},getTargetFromEvent:function(a){return a.getTarget('.'+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:'presentation',cls:'x-col-move-top',html:'&#160;'});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:'presentation',cls:'x-col-move-bottom',html:'&#160;'})}return this.bottomIndicator},getLocation:function(d,c){var e=d.getXY()[0],a=Ext.fly(c).getRegion(),b;if(a.right-e<=(a.right-a.left)/2){b='after'}else {b='before'}return {pos:b,header:Ext.getCmp(c.id),node:c}},positionIndicator:function(t,v,w){var a=this,f=t.header,n=a.getLocation(w,v),b=n.header,c=n.pos,r,s,e,d,o,m,j,h,g,q,p,l,u,k,i;if(b===a.lastTargetHeader&&c===a.lastDropPos){return}r=f.nextSibling('gridcolumn:not([hidden])');s=f.previousSibling('gridcolumn:not([hidden])');a.lastTargetHeader=b;a.lastDropPos=c;if(!b.draggable&&c==='before'&&b.getIndex()===0){return !1}t.dropLocation=n;if(f!==b&&(c==='before'&&r!==b||c==='after'&&s!==b)&&!b.isDescendantOf(f)){l=Ext.dd.DragDropManager.getRelated(a);u=l.length;k=0;for(;k<u;k++){i=l[k];if(i!==a&&i.invalidateDrop){i.invalidateDrop()}}a.valid=!0;e=a.getTopIndicator();d=a.getBottomIndicator();if(c==='before'){o='bc-tl';m='tc-bl'}else {o='bc-tr';m='tc-br'}j=e.getAlignToXY(b.el,o);h=d.getAlignToXY(b.el,m);g=a.headerCt.el;q=g.getX()-a.indicatorXOffset;p=g.getX()+g.getWidth();j[0]=Ext.Number.constrain(j[0],q,p);h[0]=Ext.Number.constrain(h[0],q,p);e.setXY(j);d.setXY(h);e.show();d.show()}else {a.invalidateDrop()}},invalidateDrop:function(){this.valid=!1;this.hideIndicators()},onNodeOver:function(h,j,i,a){var c=this,d=a.header,b,g,e,f;if(a.header.el.dom===h){b=!1}else {a.isLock=a.isUnlock=a.crossPanel=!1;g=c.getLocation(i,h).header;b=d.ownerCt===g.ownerCt;if(!b&&(!d.ownerCt.sealed&&!g.ownerCt.sealed)){b=!0;e=d.up('tablepanel');f=g.up('tablepanel');if(e!==f){a.crossPanel=!0;a.isLock=f.isLocked&&!e.isLocked;a.isUnlock=!f.isLocked&&e.isLocked;if(a.isUnlock&&d.lockable===!1||a.isLock&&!d.isLockable()){b=!1}}}}if(b){c.positionIndicator(a,h,i)}else {c.valid=!1}return c.valid?c.dropAllowed:c.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(a,b){var c=a.items,d;if(a.isGroupHeader&&c.length){d=!b?'first':'last';a=this.getNestedHeader(c[d](),b)}return a},onNodeDrop:function(r,q,s,f){this.headerCt.blockNextEvent();if(!this.valid){return}var j=this,a=f.header,m=f.dropLocation,g=m.pos,b=m.header,e=a.ownerCt,p=e.getRootHeaderCt(),d=b.ownerCt,k=j.headerCt.visibleColumnManager,h=k.getHeaderIndex(a),c,i,n,l,o;if(f.isLock||f.isUnlock){l=e.up('[scrollerOwner]');c=d.items.indexOf(b);if(g==='after'){c++}if(f.isLock){l.lock(a,c,d)}else {l.unlock(a,c,d)}}else {c=g==='after'?k.getHeaderIndex(j.getNestedHeader(b,1))+1:k.getHeaderIndex(j.getNestedHeader(b,0));j.invalidateDrop();o=a.getWidth();Ext.suspendLayouts();e.isDDMoveInGrid=d.isDDMoveInGrid=!f.crossPanel;if(a.isGroupHeader&&b.isGroupHeader){a.setNestedParent(b)}if(g==='before'){b.insertNestedHeader(a)}else {n='move'+g.charAt(0).toUpperCase()+g.substr(1);d[n](a,b)}if(c>=0&&!(b.isGroupHeader&&(!b.items||!b.items.length))&&h!==c){i=a.isGroupHeader?a.query(':not([hidden]):not([isGroupHeader])').length:1;if(h<=c&&i>1){c-=i}d.getRootHeaderCt().grid.view.moveColumn(h,c,i)}p.fireEvent('columnmove',e,a,h,c);e.isDDMoveInGrid=d.isDDMoveInGrid=!1;if(d.isGroupHeader&&!e.isGroupHeader){if(e!==d){a.savedFlex=a.flex;delete a.flex;a.width=o}}else {if(!e.isGroupHeader){if(a.savedFlex){a.flex=a.savedFlex;delete a.width}}}Ext.resumeLayouts(!0)}}},1,0,0,0,0,0,[Ext.grid.header,'DropZone'],0);Ext.cmd.derive('Ext.grid.plugin.HeaderReorderer',Ext.plugin.Abstract,{init:function(a){this.headerCt=a;a.on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){var a=this;a.headerCt.un('boxready',a.onHeaderCtRender,a);Ext.destroy(a.dragZone,a.dropZone);a.headerCt=a.dragZone=a.dropZone=null;Ext.plugin.Abstract.prototype.destroy.call(this)},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}},enable:function(){this.disabled=!1;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=!0;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,['plugin.gridheaderreorderer'],0,[Ext.grid.plugin,'HeaderReorderer'],0);Ext.cmd.derive('Ext.grid.header.Container',Ext.container.Container,{border:!0,baseCls:'x-grid-header-ct',dock:'top',weight:100,defaultType:'gridcolumn',detachOnRemove:!1,defaultWidth:100,sortAscText:'Sort Ascending',sortDescText:'Sort Descending',sortClearText:'Clear Sort',columnsText:'Columns',headerOpenCls:'x-column-header-open',menuSortAscCls:'x-hmenu-sort-asc',menuSortDescCls:'x-hmenu-sort-desc',menuColsIcon:'x-cols-icon',blockEvents:!1,dragging:!1,sortOnClick:!0,enableFocusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var a=this;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||a.items.length===0){a.isContainer=a.isFocusableContainer=!1;a.focusable=!0;a.layout={type:'container',calculate:Ext.emptyFn}}}else {a.layout=Ext.apply({type:'gridcolumn',align:'stretch'},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(!a.isGroupHeader){a.isRootHeader=!0;if(!a.hiddenHeaders){a.enableFocusableContainer=!0;a.ariaRole='rowgroup'}a.columnManager=new Ext.grid.ColumnManager(!1,a);a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else {a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a);a.columnManager=new Ext.grid.ColumnManager(!1,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);Ext.container.Container.prototype.initComponent.call(this)},insertNestedHeader:function(d){var b=this,e=d.ownerCt,f=b.ownerCt,c=f.layout.owner,a;if(e){if(b.isGroupHeader&&!f.isNestedParent){a=c.items.indexOf(b)}e.remove(d,!1)}if(a===undefined){a=c.items.indexOf(b)}c.insert(a,d)},isNested:function(){return !!this.getRootHeaderCt().down('[isNestedParent]')},isNestedGroupHeader:function(){var a=this,b=a.getRefOwner().query('>:not([hidden])');return b.length===1&&b[0]===a},maybeShowNestedGroupHeader:function(){var a=this.items,b;if(a&&a.length===1&&(b=a.getAt(0))&&b.hidden){b.show()}},setNestedParent:function(a){a.isNestedParent=!1;a.ownerCt.isNestedParent=!!(this.ownerCt.items.length===1&&a.ownerCt.items.length===1)},initEvents:function(){var a=this,b,c;Ext.container.Container.prototype.initEvents.call(this);if(!a.isColumn&&!a.isGroupHeader){b=a.onHeaderCtEvent;c={click:b,dblclick:b,contextmenu:b,mouseover:a.onHeaderCtMouseOver,mouseout:a.onHeaderCtMouseOut,scope:a};if(Ext.supports.Touch){c.longpress=a.onHeaderCtLongPress}a.mon(a.el,c)}},onHeaderCtEvent:function(a,g){var c=this,f=c.getHeaderElByEvent(a),b,e,d;if(c.longPressFired){c.longPressFired=!1;return}if(f&&!c.blockEvents){b=Ext.getCmp(f.id);if(b){e=b[b.clickTargetName];if(!b.isGroupHeader&&!b.isContainer||a.within(e)){if(a.type==='click'||a.type==='tap'){d=b.onTitleElClick(a,e,c.sortOnClick);if(d){c.onHeaderTriggerClick(d,a,a.pointerType==='touch'?d.el:d.triggerEl)}else {c.onHeaderClick(b,a,g)}}else {if(a.type==='contextmenu'){c.onHeaderContextMenu(b,a,g)}else {if(a.type==='dblclick'&&b.resizable){b.onTitleElDblClick(a,e.dom)}}}}}}},blockNextEvent:function(){this.blockEvents=!0;Ext.asap(this.unblockEvents,this)},unblockEvents:function(){this.blockEvents=!1},onHeaderCtMouseOver:function(b,e){var c,a,d;if(!b.within(this.el,!0)){c=b.getTarget('.'+Ext.grid.column.Column.prototype.baseCls);a=c&&Ext.getCmp(c.id);if(a){d=a[a.clickTargetName];if(b.within(d)){a.onTitleMouseOver(b,d.dom)}}}},onHeaderCtMouseOut:function(c,g){var f='.'+Ext.grid.column.Column.prototype.baseCls,d=c.getTarget(f),e=c.getRelatedTarget(f),a,b;if(d!==e){if(d){a=Ext.getCmp(d.id);if(a){b=a[a.clickTargetName];a.onTitleMouseOut(c,b.dom)}}if(e){a=Ext.getCmp(e.id);if(a){b=a[a.clickTargetName];a.onTitleMouseOver(c,b.dom)}}}},onHeaderCtLongPress:function(d){var a=this,b=a.getHeaderElByEvent(d),c=Ext.getCmp(b.id);if(!c.menuDisabled){a.longPressFired=!0;a.showMenuBy(d,b,c)}},getHeaderElByEvent:function(a){return a.getTarget('.'+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return !1}return Ext.container.Container.prototype.isLayoutRoot.call(this)},getRootHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up('[isRootHeader]')},onDestroy:function(){var a=this;if(a.menu){a.menu.un('hide',a.onMenuHide,a)}a.menuTask.cancel();Ext.container.Container.prototype.onDestroy.call(this);Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(h,n){if(!h||!h.length){return}var f=this,m=f.items.items,o=m.length,b=0,i=h.length,g,e,a,d,k=!1,c=[],l={},j=[];for(g=0;g<i;g++){a=h[g];a.index=g;l[a.id]=a}for(b=0;b<o;b++){e=m[b];a=l[e.getStateId()];if(a){d=a.index;c[d]=e;if(b!==d){k=!0}if(e.applyColumnState){e.applyColumnState(a,n)}}else {j.push({index:b,column:e})}}c=Ext.Array.clean(c);i=j.length;if(i){for(b=0;b<i;b++){a=j[b];d=a.index;if(d<c.length){k=!0;Ext.Array.splice(c,d,0,a.column)}else {c.push(a.column)}}}if(k){f.applyingState=!0;f.removeAll(!1);delete f.applyingState;f.add(c);f.purgeCache()}},getColumnsState:function(){var c=this,b=[],a;c.items.each(function(c){a=c.getColumnState&&c.getColumnState();if(a){b.push(a)}});return b},onAdd:function(b){var a=this;Ext.container.Container.prototype.onAdd.apply(this,arguments);a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(b,e){var d=this,c=d.items,a;if(b.isComponent){a=b;b=c.indexOf(a)}else {a=c.getAt(b)}a.visibleFromIdx=d.getRootHeaderCt().visibleColumnManager.indexOf(a);Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(a,g,h){var e=this,d=e.getRootHeaderCt(),f=d.visibleColumnManager,c=1,b;e.onHeadersChanged(a,!0);b=f.indexOf(a);if(b>=a.visibleFromIdx){b++}Ext.container.Container.prototype.onMove.apply(this,arguments);if(a.isGroupHeader){c=a.visibleColumnManager.getColumns().length}d.onHeaderMoved(a,c,a.visibleFromIdx,b)},maybeContinueRemove:function(){var a=this;return a.isGroupHeader&&!a.applyingState&&!a.isNestedParent&&a.ownerCt&&!a.items.getCount()},onRemove:function(b,c){var a=this,d=a.ownerCt,e=b.lastHiddenHeader;Ext.container.Container.prototype.onRemove.call(this,b,c);if(!a.destroying){if(!a.isDDMoveInGrid){a.onHeadersChanged(b,!1)}if(a.maybeContinueRemove()){if(b.rendered){a.detachComponent(b)}Ext.suspendLayouts();d.remove(a);Ext.resumeLayouts(!0)}}},onHeadersChanged:function(c,d){var b,a=this.getRootHeaderCt();this.purgeHeaderCtCache(this);if(a){a.onColumnsChanged();if(!c.isGroupHeader){b=a.ownerCt;if(b&&!d){b.onHeadersChanged(a,c)}}}},onHeaderMoved:function(d,f,c,e){var a=this,b=a.ownerCt;if(a.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(a,d,f,c,e)}a.fireEvent('columnmove',a,d,c,e)}},onColumnsChanged:function(){var a=this,b=a.menu,c,d;if(a.rendered){a.fireEvent('columnschanged',a);if(b&&(c=b.child('#columnItemSeparator'))){d=b.child('#columnItem');c.destroy();d.destroy()}}},lookupComponent:function(b){var a=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var e=this.up('[store]').store,d=this.visibleColumnManager.getColumns(),f=d.length,c,b,a;for(c=0;c<f;c++){b=d[c];a=b.getSorter();if(a){if(!e.getSorters().contains(a)){a=null}}else {a=e.getSorters().get(b.getSortParam())}b.setSortState(a)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child('#columnItem');if(a){return a.menu}}return null},onHeaderVisibilityChange:function(d,e){var a=this,c=a.getHeaderMenu(),b;a.purgeHeaderCtCache(d.ownerCt);if(c){b=a.getMenuItemForHeader(c,d);if(b){b.setChecked(e,!0)}if(c.isVisible()){a.menuTask.delay(50)}}},updateMenuDisabledState:function(e){var f=this,g=f.query('gridcolumn:not([hidden])'),b,h=g.length,d,a,c;if(!e){e=f.getMenu()}for(b=0;b<h;++b){d=g[b];a=f.getMenuItemForHeader(e,d);if(a){c=d.isHideable()?'enable':'disable';if(a.menu){c+='CheckChange'}a[c]()}}},getMenuItemForHeader:function(b,a){return a?b.down('menucheckitem[headerId='+a.id+']'):null},onHeaderShow:function(b){var a=this,d=a.ownerCt,c=b.lastHiddenHeader;if(!d){return}if(a.forceFit){delete a.flex}if(c&&!b.query('[hidden=false]').length){c.show();b.lastHiddenHeader=null}a.onHeaderVisibilityChange(b,!0);d.onHeaderShow(a,b);a.fireEvent('columnshow',a,b);a.fireEvent('columnschanged',this)},onHeaderHide:function(b){var a=this,c=a.ownerCt;if(!c){return}a.onHeaderVisibilityChange(b,!1);c.onHeaderHide(a,b);a.fireEvent('columnhide',a,b);a.fireEvent('columnschanged',this)},onHeaderResize:function(c,d){var a=this,b=a.ownerCt;if(b){b.onHeaderResize(a,c,d)}a.fireEvent('columnresize',a,c,d)},onHeaderClick:function(a,c,e){var b=this,d=a.getView().getSelectionModel();a.fireEvent('headerclick',b,a,c,e);if(b.fireEvent('headerclick',b,a,c,e)!==!1){if(d.onHeaderClick){d.onHeaderClick(b,a,c)}}},onHeaderContextMenu:function(a,b,c){a.fireEvent('headercontextmenu',this,a,b,c);this.fireEvent('headercontextmenu',this,a,b,c)},onHeaderTriggerClick:function(a,c,d){var b=this;if(a.fireEvent('headertriggerclick',b,a,c,d)!==!1&&b.fireEvent('headertriggerclick',b,a,c,d)!==!1){if(a.activeMenu){if(c.pointerType){a.activeMenu.hide()}else {a.activeMenu.focus()}}else {b.showMenuBy(c,d,a)}}},showMenuBy:function(b,g,d){var a=this.getMenu(),f=a.down('#ascItem'),e=a.down('#descItem'),c,h=b&&b.pointerType==='touch';a.activeHeader=a.ownerCmp=d;d.setMenuActive(a);c=d.sortable?'enable':'disable';if(f){f[c]()}if(e){e[c]()}a.autoFocus=!b||b.keyCode;a.showBy(g,'tl-bl?');if(!a.isVisible()){this.onMenuHide(a)}},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var a=this,b=a.visibleColumnManager,c=a.columnManager;a.gridVisibleColumns=a.gridDataColumns=a.hideableColumns=null;if(b){b.invalidate();c.invalidate()}},getMenu:function(){var a=this,b=a.view&&a.view.ownerGrid;if(!a.menu){a.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}});a.fireEvent('menucreate',a,a.menu);if(b){b.fireEvent('headermenucreate',b,a.menu,a)}}return a.menu},beforeMenuShow:function(d){var a=this,e=d.child('#columnItem'),b,c;if(!e){b=a.enableColumnHide?a.getColumnMenu(a):null;c=a.sortable?2:0;if(b&&b.length){d.insert(c,[{itemId:'columnItemSeparator',xtype:'menuseparator'},{itemId:'columnItem',text:a.columnsText,iconCls:a.menuColsIcon,menu:{items:b},hideOnClick:!1}])}}a.updateMenuDisabledState(a.menu)},getMenuItems:function(){var a=this,b=[],c=a.enableColumnHide?a.getColumnMenu(a):null;if(a.sortable){b=[{itemId:'ascItem',text:a.sortAscText,iconCls:a.menuSortAscCls,handler:a.onSortAscClick,scope:a},{itemId:'descItem',text:a.sortDescText,iconCls:a.menuSortDescCls,handler:a.onSortDescClick,scope:a}]}if(c&&c.length){if(a.sortable){b.push({itemId:'columnItemSeparator',xtype:'menuseparator'})}b.push({itemId:'columnItem',text:a.columnsText,iconCls:a.menuColsIcon,menu:c,hideOnClick:!1})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort('ASC')},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort('DESC')},getColumnMenu:function(f){var b=[],c=0,a,e=f.query('>gridcolumn[hideable]'),g=e.length,d;for(;c<g;c++){a=e[c];d=new Ext.menu.CheckItem({text:a.menuText||a.text,checked:!a.hidden,hideOnClick:!1,headerId:a.id,menu:a.isGroupHeader?this.getColumnMenu(a):undefined,checkHandler:this.onColumnCheckChange,scope:this});b.push(d)}return b.length?b:null},onColumnCheckChange:function(c,b){var a=Ext.getCmp(c.headerId);if(a.rendered){a[b?'show':'hide']()}else {a.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var b=0,c=this.getVisibleGridColumns(),d=c.length,a;for(a=0;a<d;a++){b+=c[a].getCellWidth()||0}return b},getVisibleGridColumns:function(){var b=this,e,f,a,g,d,c;if(b.gridVisibleColumns){return b.gridVisibleColumns}e=b.getGridColumns();f=b.getRootHeaderCt();a=[];g=e.length;for(d=0;d<g;d++){c=e[d];if(!c.hidden&&!c.isColumnHidden(f)){a[a.length]=c}}b.gridVisibleColumns=a;return a},isColumnHidden:function(b){var a=this.getRefOwner();while(a&&a!==b){if(a.hidden){return !0}a=a.getRefOwner()}return !1},getGridColumns:function(g,f){if(!g&&this.gridDataColumns){return this.gridDataColumns}var i=this,c=g||[],h,b,d,a,e;f=f||i.hidden;if(i.items){h=i.items.items;if(h){for(b=0,d=h.length;b<d;b++){a=h[b];if(a.isGroupHeader){a.visibleIndex=c.length;a.getGridColumns(c,f)}else {a.hiddenAncestor=f;c.push(a)}}}}if(!g){i.gridDataColumns=c}if(!g&&d){for(b=0,d=c.length;b<d;b++){a=c[b];a.fullColumnIndex=b;a.isFirstVisible=a.isLastVisible=!1;if(!(a.hidden||a.hiddenAncestor)){if(!e){a.isFirstVisible=!0}e=a}}if(e){e.isLastVisible=!0}}return c},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query('[hideable]')}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(b){var k=this,j=k.view,i=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,l=!1,m=Ext.grid.header.Container.prototype.defaultWidth,h=k.el.dom.clientWidth-(j.el.dom.scrollHeight>j.el.dom.clientHeight?Ext.getScrollbarSize().width:0),n=0,e=k.getVisibleGridColumns(),o=b.hidden,f,c,a,g,d;function getTotalFlex(){for(c=0,f=e.length;c<f;c++){a=e[c];if(a===b){continue}a.flex=a.flex||a.width||a.getWidth();n+=a.flex;a.width=null}}function applyWidth(){var g;for(c=0,f=e.length;c<f;c++){a=e[c];g=a===b;if(l&&!g){a.flex=i;a.width=null}else {if(!g){d=a.flex||m;a.flex=Math.max(Math.ceil(d/n*h),i);a.width=null}}a.setWidth(a.width||a.flex)}}Ext.suspendLayouts();g=h-(e.length+1)*i;b.flex=null;if(o){d=b.width||b.savedWidth;b.savedWidth=null}else {d=j.getMaxContentWidth(b)}if(d>g){b.width=g;l=!0}else {b.width=d;h-=d+m;getTotalFlex()}applyWidth();Ext.resumeLayouts(!0)},autoSizeColumn:function(a){var b=this.view;if(b){b.autoSizeColumn(a);if(this.forceFit){this.applyForceFit(a)}}},getRefItems:function(b){var a=Ext.container.Container.prototype.getRefItems.call(this,b);if(this.menu){a.push(this.menu)}return a},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(b){var a=this;return new Ext.util.KeyNav(b,{scope:a,down:a.showHeaderMenu,left:a.onFocusableContainerLeftKey,right:a.onFocusableContainerRightKey,home:a.onHomeKey,end:a.onEndKey,space:a.onHeaderActivate,enter:a.onHeaderActivate})},onHomeKey:function(a){return this.focusChild(null,!0,a)},onEndKey:function(a){return this.focusChild(null,!1,a)},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.isColumn&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},onHeaderActivate:function(d){var a=this.getFocusableFromEvent(d),c,b;if(a&&a.isColumn){c=a.getView();if(a.sortable&&this.sortOnClick){b=c.getNavigationModel().getLastFocused();a.toggleSortState();if(b){c.ownerCt.ensureVisible(b.record)}}this.onHeaderClick(a,d,a.el)}},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);if(a===this){c.preventDefault()}else {a.focus()}}}},0,['headercontainer'],['component','box','container','headercontainer'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0},['widget.headercontainer'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,'Container'],0);Ext.cmd.derive('Ext.grid.ColumnComponentLayout',Ext.layout.component.Auto,{type:'columncomponent',setWidthInDom:!0,_paddingReset:{paddingTop:'',paddingBottom:''},columnAutoCls:'x-column-header-text-container-auto',beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.titleContext=a.getEl('titleEl')},beginLayoutCycle:function(d){var b=this,a=b.owner,c=d.widthModel.shrinkWrap;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(c){a.el.setWidth('')}a.textContainerEl[c&&!a.isGroupHeader?'addCls':'removeCls'](b.columnAutoCls);a.titleEl.setStyle(b._paddingReset)},publishInnerHeight:function(a,e){var d=this,b=d.owner,c;if(b.getRootHeaderCt().hiddenHeaders){a.setProp('innerHeight',0);return}if(!a.hasRawContent){if(b.headerWrap&&!a.hasDomProp('width')){d.done=!1;return}c=e-a.getBorderInfo().height;a.setProp('innerHeight',c-b.titleEl.getHeight(),!1)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp('innerWidth',b-a.getBorderInfo().width,!1)}},calculateOwnerHeightFromContentHeight:function(a,c){var d=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),b=this.owner;if(!a.hasRawContent){if(!b.headerWrap||a.hasDomProp('width')){return c+b.titleEl.getHeight()+a.getBorderInfo().height}return null}return d},calculateOwnerWidthFromContentWidth:function(a,d){var c=this.owner,f=a.getPaddingInfo().width,e=this.getTriggerOffset(c,a),b;if(c.isGroupHeader){b=d}else {b=Math.max(d,c.textEl.getWidth()+a.titleContext.getPaddingInfo().width)}return b+f+e},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query('>:not([hidden])').length===0){b=a.getTriggerElWidth()}}return b}},0,0,0,0,['layout.columncomponent'],0,[Ext.grid,'ColumnComponentLayout'],0);Ext.cmd.derive('Ext.app.bind.Template',Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var b=this,c=b._initters,a;b.text=d;for(a in c){b[a]=c[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,i){var f=this,e=f.slots,d=f.buffer,g=e.length,c,b,a;for(c=0;c<g;++c){b=e[c];if(b){if((a=h[b.pos])==null){a=''}if(b.not){a=!a}if(b.format){a=b.format(a,i)}d[c]=a}}return d.join('')},getTokens:function(){return this.tokens},parse:function(){var b=this,g=b.text,j=[],m=[],k=[],i={},d=0,p=b.tokenRe,l=0,h,n,f,c,o,a,e;for(n in b._initters){delete b[n]}b.buffer=j;b.slots=m;b.tokens=k;while(c=p.exec(g)){f=c.index-d;if(f){j[l++]=g.substring(d,d+f);d+=f}d+=(o=c[0]).length;a={fmt:h=c[3]||null,index:c[1]?parseInt(c[1],10):null,not:o.charAt(1)==='!',token:c[2]||null};e=a.token||String(a.index);if(e in i){a.pos=i[e]}else {i[e]=a.pos=k.length;k.push(e)}if(h){if(h.substring(0,5)==='this.'){a.fmt=h.substring(5)}else {a.scope=Ext.util.Format}b.parseArgs(c[4],a)}m[l++]=a}if(d<g.length){j[l++]=g.substring(d)}return b},parseArgs:function(e,d){var f=this,h=f.numberRe,i=f.stringRe,b,a,c,g;if(!e){a=[]}else {if(e.indexOf(',')<0){a=[e]}else {a=e.split(',')}}d=d||{};g=a.length;d.args=a;for(c=0;c<g;++c){b=a[c];if(b==='true'){a[c]=!0}else {if(b==='false'){a[c]=!1}else {if(b==='null'){a[c]=null}else {if(h.test(b)){a[c]=parseFloat(b)}else {if(i.test(b)){a[c]=b.substring(1,b.length-1)}else {d.fn=Ext.functionFactory('return ['+e+'];');d.format=f._formatEval;break}}}}}}if(!d.format){a.unshift(0);d.format=f._formatArgs}return d},parseFormat:function(e){var c=this,d=c.formatRe.exec(e),a={fmt:e,scope:Ext.util.Format},b;b=d[2];if(b){a.fmt=d[1];c.parseArgs(b,a)}else {a.args=[0];a.format=c._formatArgs}return a},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,a){var b=this.fn();b.unshift(c);a=this.scope||a;return a[this.fmt].apply(a,b)}},1,0,0,0,0,0,[Ext.app.bind,'Template'],0);Ext.cmd.derive('Ext.grid.column.Column',Ext.grid.header.Container,{alternateClassName:'Ext.grid.Column',config:{triggerVisible:!1,sorter:null},baseCls:'x-column-header',hoverCls:'x-column-header-over',ariaRole:'columnheader',enableFocusableContainer:!1,sortState:null,possibleSortStates:['ASC','DESC'],ariaSortStates:{ASC:'ascending',DESC:'descending'},childEls:['titleEl','triggerEl','textEl','textContainerEl'],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="','x-','column-header-inner<tpl if="!$comp.isContainer"> ','x-','leaf-column-header</tpl>','<tpl if="empty"> ','x-','column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="','x-','column-header-text-container">','<div role="presentation" class="','x-','column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="','x-','column-header-text','{childElCls}">','<span role="presentation" class="','x-','column-header-text-inner">{text}</span>','</div>','</div>','</div>','<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="','x-','column-header-trigger','{childElCls}" style="{triggerStyle}"></div>','</tpl>','</div>','{%this.renderContainer(out,values)%}'],dataIndex:null,text:'&#160;',menuText:null,emptyCellText:'&#160;',sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,align:'left',draggable:!0,tooltipType:'qtip',initDraggable:Ext.emptyFn,tdCls:'',producesHTML:!0,ignoreExport:!1,isHeader:!0,isColumn:!0,tabIndex:-1,ascSortCls:'x-column-header-sort-ASC',descSortCls:'x-column-header-sort-DESC',componentLayout:'columncomponent',groupSubHeaderCls:'x-group-sub-header',groupHeaderCls:'x-group-header',clickTargetName:'titleEl',detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:'renderer',edit:'editRenderer',summary:'summaryRenderer'},formatterNames:{column:'formatter',edit:'editFormatter',summary:'summaryFormatter'},initComponent:function(){var a=this;if(!a.rendererScope){a.rendererScope=a.scope}if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||'')+' x-wrap-cell'}if(a.columns!=null){a.isGroupHeader=!0;a.ariaRole='presentation';a.items=a.columns;a.columns=a.flex=a.width=null;a.cls=(a.cls||'')+' '+a.groupHeaderCls;a.sortable=a.resizable=!1;a.align='center'}else {if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls('x-column-header-align-'+a.align);a.setupRenderer();a.setupRenderer('edit');a.setupRenderer('summary');Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},onAdded:function(e,g,f){var a=this,c,d,b;Ext.grid.header.Container.prototype.onAdded.call(this,e,g,f);if(!a.headerId){d=a.up('tablepanel');b=d?d.ownerGrid:a.getRootHeaderCt();b.headerCounter=(b.headerCounter||0)+1;a.headerId='h'+b.headerCounter}if(!a.stateId){a.stateId=a.initialConfig.id||a.headerId}c=a.getSorter();if(c&&!c.initialConfig.id){c.setId((a.dataIndex||a.stateId)+'-sorter')}},applySorter:function(a){return this.getRootHeaderCt().up('tablepanel').store.getData().getSorters().decodeSorter(a)},bindFormatter:function(a){var b=this;return function(c){return a.format(c,a.scope||b.rendererScope||b.resolveListenerScope())}},bindRenderer:function(b){var a=this;a.hasCustomRenderer=!0;return function(){return Ext.callback(b,a.rendererScope,arguments,0,a)}},setupRenderer:function(c){c=c||'column';var a=this,b=a[a.formatterNames[c]],d=a[a.rendererNames[c]],f=c==='column',e,g;if(!b){if(d){if(typeof d==='string'){d=a[a.rendererNames[c]]=a.bindRenderer(d);g=!0}if(f){a.hasCustomRenderer=g||d.length>1}}else {if(f&&a.defaultRenderer){a.renderer=a.defaultRenderer;a.usingDefaultRenderer=!0}}}else {e=b.indexOf('this.')===0;if(e){b=b.substring(5)}b=Ext.app.bind.Template.prototype.parseFormat(b);a[a.formatterNames[c]]=null;if(e){b.scope=null}a[a.rendererNames[c]]=a.bindFormatter(b)}},getView:function(){var a=this.getRootHeaderCt();if(a){return a.view}},onFocusLeave:function(a){Ext.grid.header.Container.prototype.onFocusLeave.call(this,a);if(this.activeMenu){this.activeMenu.hide()}},initItems:function(){var a=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments);if(a.isGroupHeader){if(a.config.hidden||!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var c=this.items.items,d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.isColumn&&!b.hidden){return !0}}return !1},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=!0;b.addCls(a.groupSubHeaderCls)}if(a.isGroupHeader&&a.hidden&&a.hasVisibleChildColumns()){a.show()}Ext.grid.header.Container.prototype.onAdd.call(this,b)},onRemove:function(b,c){var a=this;if(b.isSubHeader){b.isSubHeader=!1;b.removeCls(a.groupSubHeaderCls)}Ext.grid.header.Container.prototype.onRemove.call(this,b,c);if(!(a.destroyed||a.destroying)&&!a.hasVisibleChildColumns()&&!a.ownerCt.isNested()){a.hide()}},initRenderData:function(){var b=this,c='',d=b.tooltip,a=b.text,e=b.tooltipType==='qtip'?'data-qtip':'title';if(!Ext.isEmpty(d)){c=e+'="'+d+'" '}return Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:a,empty:a==='&#160;'||a===' '||a==='',menuDisabled:b.menuDisabled,tipMarkup:c,triggerStyle:this.getTriggerVisible()?'display:block':''})},applyColumnState:function(a,g){var b=this,e=b.getSorter(),d=g&&g.sorters,h,c,i,f;if(e&&d&&(h=d.length)){f=e.getId();for(c=0;!i&&c<h;c++){if(d[c].id===f){e.setDirection(d[c].direction);d[c]=e;break}}}b.applyColumnsState(a.columns);if(a.hidden!=null){b.hidden=a.hidden}if(a.locked!=null){b.locked=a.locked}if(a.sortable!=null){b.sortable=a.sortable}if(a.width!=null){b.flex=null;b.width=a.width}else {if(a.flex!=null){b.width=null;b.flex=a.flex}}},getColumnState:function(){var b=this,e=b.items.items,f=e?e.length:0,c,d=[],a={id:b.getStateId()};b.savePropsToState(['hidden','sortable','locked','flex','width'],a);if(b.isGroupHeader){for(c=0;c<f;c++){d.push(e[c].getColumnState())}if(d.length){a.columns=d}}if('width' in a){delete a.flex}return a},setText:function(a){this.text=a;if(this.rendered){this.textEl.setHtml(a)}},getIndex:function(){return this.isGroupColumn?!1:this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?!1:Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){var c=this,b=[],a;while(a=c.up('headercontainer')){if(a.text){b.unshift(Ext.util.Format.stripTags(a.text))}c=a}return b},beforeRender:function(){var a=this,d=a.getRootHeaderCt(),e=a.isSortable(),c=[],b;Ext.grid.header.Container.prototype.beforeRender.call(this);if(!e&&!a.groupable&&!a.lockable&&(d.grid.enableColumnHide===!1||!d.getHideableColumns().length)){a.menuDisabled=!0}if(a.cellWrap){a.variableRowHeight=!0}b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-readonly']=!0;if(e){b['aria-sort']=a.ariaSortStates[a.sortState]}if(a.isSubHeader){c=a.getLabelChain();if(a.text){c.push(Ext.util.Format.stripTags(a.text))}if(c.length){b['aria-label']=c.join(' ')}}a.protoEl.unselectable()},getTriggerElWidth:function(){var c=this,a=c.triggerEl,b=c.self.triggerElWidth;if(a&&b===undefined){a.setStyle('display','block');b=c.self.triggerElWidth=a.getWidth();a.setStyle('display','')}return b},afterComponentLayout:function(d,f,c,e){var a=this,b=a.getRootHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments);if(b&&(c!=null||a.flex)&&d!==c){b.onHeaderResize(a,d)}},onDestroy:function(){var a=this;Ext.destroy(a.field);a.field=null;Ext.grid.header.Container.prototype.onDestroy.apply(this,arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(e){var a=this,b,c,d;if(a.isAtStartEdge(e)){b=a.previousNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(b&&b.getRootHeaderCt()===a.getRootHeaderCt()){b.autoSize()}}else {if(a.isAtEndEdge(e)){if(a.isGroupHeader&&e.getPoint().isContainedBy(a.layout.innerCt)){c=a.query('gridcolumn:not([hidden]):not([isGroupHeader])');a.getRootHeaderCt().autoSizeColumn(c[c.length-1]);return}else {d=a.getRootHeaderCt();if(d.visibleColumnManager.getColumns().length===1&&d.forceFit){return}}a.autoSize()}}},autoSize:function(){var a=this,c,d,b,e;if(a.isGroupHeader){c=a.query('gridcolumn:not([hidden]):not([isGroupHeader])');d=c.length;e=a.getRootHeaderCt();Ext.suspendLayouts();for(b=0;b<d;b++){e.autoSizeColumn(c[b])}Ext.resumeLayouts(!0);return}a.getRootHeaderCt().autoSizeColumn(a)},onTitleElClick:function(b,f,e){var a=this,c,d;if(b.pointerType==='touch'){d=a.previousSibling(':not([hidden])');if(!a.menuDisabled&&a.isAtEndEdge(b,parseInt(a.triggerEl.getStyle('width'),10))){if(!a.menuDisabled){c=a}}else {if(d&&!d.menuDisabled&&a.isAtStartEdge(b)){c=d}}}else {c=a.triggerEl&&(b.target===a.triggerEl.dom||f===a.triggerEl||b.within(a.triggerEl))?a:null}if(e!==!1&&(!c&&!a.isAtStartEdge(b)&&!a.isAtEndEdge(b)||b.getKey())){a.toggleSortState()}return c},processEvent:function(d,e,c,a,b,f){return this.fireEvent.apply(this,arguments)},isSortable:function(){var a=this.getRootHeaderCt(),c=a?a.grid:null,b=this.sortable;if(c&&c.sortableColumns===!1){b=!1}return b},toggleSortState:function(){if(this.isSortable()){this.sort()}},sort:function(b){var a=this,d=a.up('tablepanel'),e=d.store,c=a.getSorter();Ext.suspendLayouts();a.sorting=!0;if(c){if(b){c.setDirection(b)}e.sort(c,d.multiColumnSort?'multi':'replace')}else {e.sort(a.getSortParam(),b,d.multiColumnSort?'multi':'replace')}delete a.sorting;Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(h){var a=this,g=h&&h.getDirection(),c=a.ascSortCls,b=a.descSortCls,f=a.getRootHeaderCt(),d=a.ariaEl.dom,e;switch(g){case 'DESC':if(!a.hasCls(b)){a.addCls(b);a.sortState='DESC';e=!0};a.removeCls(c);break;case 'ASC':if(!a.hasCls(c)){a.addCls(c);a.sortState='ASC';e=!0};a.removeCls(b);break;default:a.removeCls([c,b]);a.sortState=null;break;}if(d){if(a.sortState){d.setAttribute('aria-sort',a.ariaSortStates[a.sortState])}else {d.removeAttribute('aria-sort')}}if(e){f.fireEvent('sortchange',f,a,g)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(b){var a,c;if(!this.isXType('headercontainer')){b.result=!1;return !1}a=this.query('>gridcolumn:not([hidden]):not([menuDisabled])');c=a.length;if(Ext.Array.contains(a,b.hideCandidate)){c--}if(c){return !1}b.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==!1};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){return this.locked||!!this.up('[isColumn][locked]','[isRootHeader]')},hasMultipleVisibleChildren:function(a){if(!this.isXType('headercontainer')){a.result=!1;return !1}if(this.query('>gridcolumn:not([hidden])').length>1){return !1}},hide:function(){var a=this,b=a.getRootHeaderCt(),c=a.getRefOwner();if(c.constructing){Ext.grid.header.Container.prototype.hide.call(this);return a}if(a.rendered&&!a.isVisible()){return a}if(b.forceFit){a.visibleSiblingCount=b.getVisibleGridColumns().length-1;if(a.flex){a.savedWidth=a.getWidth();a.flex=null}}b.beginChildHide();Ext.suspendLayouts();if(c.isGroupHeader){if(a.isNestedGroupHeader()){c.hide()}if(a.isSubHeader&&!a.isGroupHeader&&c.query('>gridcolumn:not([hidden])').length===1){c.lastHiddenHeader=a}}Ext.grid.header.Container.prototype.hide.call(this);b.endChildHide();b.onHeaderHide(a);Ext.resumeLayouts(!0);return a},show:function(){var a=this,c=a.getRootHeaderCt(),b=a.getRefOwner();if(a.isVisible()){return a}if(b.isGroupHeader){b.lastHiddenHeader=null}if(a.rendered){if(c.forceFit){c.applyForceFit(a)}}Ext.suspendLayouts();if(a.isSubHeader&&b.hidden){b.show(!1,!0)}Ext.grid.header.Container.prototype.show.apply(this,arguments);if(a.isGroupHeader){a.maybeShowNestedGroupHeader()}b=a.getRootHeaderCt();if(b){b.onHeaderShow(a)}Ext.resumeLayouts(!0);return a},shouldUpdateCell:function(d,b){if(!this.preventUpdate){if(this.hasCustomRenderer){return 1}if(b){var e=b.length,a,c;for(a=0;a<e;++a){c=b[a];if(c===this.dataIndex||c===d.idProperty){return 2}}}else {return 2}}},getCellWidth:function(){var a=this,b;if(a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize){b=a.componentLayout.lastComponentSize.width}else {if(a.width){b=a.width}else {if(!a.isColumn){b=a.getTableWidth()}}}return b},getCellId:function(){return 'x-grid-cell-'+this.getItemId()},getCellSelector:function(){var a=this.getView();return (a?a.getCellSelector():'')+'.'+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+' .x-grid-cell-inner'},isAtStartEdge:function(b){var a=b.getXY()[0]-this.getX();if(a<0&&this.getIndex()===0){return !1}return a<this.getHandleWidth(b)},isAtEndEdge:function(a,b){return this.getX()+this.getWidth()-a.getXY()[0]<=(b||this.getHandleWidth(a))},getHandleWidth:function(a){return a.pointerType==='touch'?10:4},setMenuActive:function(a){this.activeMenu=a;this.titleEl[a?'addCls':'removeCls'](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}},0,['gridcolumn'],['component','box','container','headercontainer','gridcolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0},['widget.gridcolumn'],0,[Ext.grid.column,'Column',Ext.grid,'Column'],0);Ext.define('Ext.rtl.grid.column.Column',{override:'Ext.grid.column.Column',isAtStartEdge:function(c,d){var a=this,b;if(!a.getInherited().rtl!==!Ext.rootInheritedState.rtl){b=a.getX()+a.getWidth()-c.getXY()[0];if(b<0&&this.getIndex()===0){return !1}return b<=a.getHandleWidth(c)}else {return arguments.callee.$previous.call(this,c,d)}},isAtEndEdge:function(b,c){var a=this;return !a.getInherited().rtl!==!Ext.rootInheritedState.rtl?b.getXY()[0]-a.getX()<=a.getHandleWidth(b):arguments.callee.$previous.call(this,b,c)}});Ext.define('Ext.theme.triton.grid.column.Column',{override:'Ext.grid.column.Column',compatibility:Ext.isIE8,onTitleMouseOver:function(){var a=this.triggerEl;arguments.callee.$previous.apply(this,arguments);if(a){a.syncRepaint()}}});Ext.cmd.derive('Ext.tree.Column',Ext.grid.column.Column,{tdCls:'x-grid-cell-treecolumn',autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:'x-tree-icon',checkboxCls:'x-tree-checkbox',elbowCls:'x-tree-elbow',expanderCls:'x-tree-expander',textCls:'x-tree-node-text',innerCls:'x-grid-cell-inner-treecolumn',customIconCls:'x-tree-icon-custom',isTreeColumn:!0,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>','</tpl>','<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>','</tpl>','<tpl if="icon"><img src="{blankUrl}"<tpl else><div</tpl>',' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>','<tpl else>','<span class="{textCls} {childCls}">{value}</span>','</tpl>'],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var a=this;a.rendererScope=a.scope;a.setupRenderer();a.innerRenderer=a.renderer;a.renderer=a.treeRenderer;Ext.grid.column.Column.prototype.initComponent.call(this);a.scope=a;a.hasCustomRenderer=a.innerRenderer&&a.innerRenderer.length>1},treeRenderer:function(i,a,c,g,f,h,j){var e=this,d=c.get('cls'),b;if(a&&d){a.tdCls+=' '+d}b=e.initTemplateRendererData(i,a,c,g,f,h,j);return e.getTpl('cellTpl').apply(b)},initTemplateRendererData:function(j,i,d,m,l,n,k){var a=this,f=a.innerRenderer,b=d.data,c=d.parentNode,g=k.rootVisible,h=[],e;while(c&&(g||c.data.depth>0)){e=c.data;h[g?e.depth:e.depth-1]=e.isLast?0:1;c=c.parentNode}return {record:d,baseIconCls:a.iconCls,customIconCls:b.icon||b.iconCls?a.customIconCls:'',iconCls:b.iconCls,icon:b.icon,checkboxCls:a.checkboxCls,checked:b.checked,elbowCls:a.elbowCls,expanderCls:a.expanderCls,textCls:a.textCls,leaf:b.leaf,expandable:d.isExpandable(),expanded:b.expanded,isLast:d.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:b.href,hrefTarget:b.hrefTarget,lines:h,metaData:i,childCls:a.getChildCls?a.getChildCls()+' ':'',value:f?f.apply(a.rendererScope,arguments):j}},shouldUpdateCell:function(f,a){var e=this,c=0,d,b;if(a){d=a.length;for(;c<d;++c){b=a[c];if(e.rowFields[b]){return 1}if(e.uiFields[b]){return 2}}}return Ext.grid.column.Column.prototype.shouldUpdateCell.call(this,f,a)}},0,['treecolumn'],['component','box','container','headercontainer','gridcolumn','treecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'treecolumn':!0},['widget.treecolumn'],0,[Ext.tree,'Column'],0);Ext.define('Ext.rtl.tree.Column',{override:'Ext.tree.Column',getChildCls:function(){return this._childCls||(this._childCls=this.getInherited().rtl?'x-rtl':'')}});Ext.cmd.derive('Robo.util.Array',Ext.Base,{singleton:!0,reduce:function(a,f,e){a=Object(a);var b=0,d=a.length>>>0,c=e;if(arguments.length<3){while(!0){if(b in a){c=a[b++];break}if(++b>=d){throw new TypeError('Reduce of empty array with no initial value')}}}for(;b<d;++b){if(b in a){c=f(c,a[b],b,a)}}return c}},0,0,0,0,0,0,[Robo.util,'Array'],0);Ext.cmd.derive('Robo.Transaction',Ext.Base,{actions:null,title:null,constructor:function(a){a=a||{};Ext.apply(this,a);this.callParent([a]);this.actions=[]},hasActions:function(){return this.actions.length>0},addAction:function(a){this.actions.push(a)},getActions:function(){return this.actions},undo:function(){for(var a=this.actions.length-1;a>=0;a--){this.actions[a].undo()}},redo:function(){for(var a=0;a<this.actions.length;a++){this.actions[a].redo()}},getTitle:function(){if(this.title){return this.title}var a=this.actions[0];return a?a.getTitle():null}},1,0,0,0,0,0,[Robo,'Transaction'],0);Ext.cmd.derive('Robo.data.Model',Ext.Mixin,{modelName:null,editMementoFix:null,mixinConfig:{before:{endEdit:'onBeforeEndEdit'},after:{endEdit:'onAfterEndEdit'}},onBeforeEndEdit:function(c,b){var a=this.editMemento;if(a){this.editMementoFix=a;if(!b){b=this.getModifiedFieldNames(a.data)}if(!a.previousValues){a.previousValues={}}Ext.Array.each(b,function(d){a.previousValues[d]=a.data[d]})}},onAfterEndEdit:function(b,a){delete this.editMementoFix},getTitle:function(){return ''}},0,0,0,0,0,0,[Robo.data,'Model'],0);Ext.cmd.derive('Robo.action.Base',Ext.Base,{constructor:function(a){Ext.apply(this,a)},undo:function(){throw new Error('Abstract method call')},redo:function(){throw new Error('Abstract method call')},getTitle:function(){return ''}},1,0,0,0,0,0,[Robo.action,'Base'],0);Ext.cmd.derive('Robo.action.flat.Update',Robo.action.Base,{inheritableStatics:{CUSTOMLY_PROCESSED:{}},config:{record:null,fieldNames:null},oldValues:null,newValues:null,constructor:function(a){var b=this;Robo.action.Base.prototype.constructor.call(this,a);b.initConfig(a);b.saveValues()},saveValues:function(){var a=this,c=a.getRecord(),b=a.getFieldNames();if(b){a.oldValues=Ext.Array.map(b,function(b){return a.processSavingOldValue(b,c)});a.newValues=Ext.Array.map(b,function(b){return a.processSavingNewValue(b,c)})}},undo:function(){var e,a=this,b=a.getRecord(),c=a.getFieldNames(),d;if(c){e=a.self.CUSTOMLY_PROCESSED;b.beginEdit();d=Robo.util.Array.reduce(c,function(f,d,g){var c;if(d){c=a.processRestoringValue(a.oldValues[g],d,b,'undo');if(c!==e){f[d]=c}}return f},{});b.set(d);b.endEdit()}},redo:function(){var e,a=this,b=a.getRecord(),c=a.getFieldNames(),d;if(c){e=a.self.CUSTOMLY_PROCESSED;b.beginEdit();d=Robo.util.Array.reduce(c,function(f,d,g){var c;if(d){c=a.processRestoringValue(a.newValues[g],d,b,'redo');if(c!==e){f[d]=c}}return f},{});b.set(d);b.endEdit()}},processSavingOldValue:function(b,a){var c=a.previous&&a.previous.hasOwnProperty(b)&&a.previous||a.previousValues&&a.previousValues.hasOwnProperty(b)&&a.previousValues||a.editMementoFix&&a.editMementoFix.previousValues&&a.editMementoFix.previousValues.hasOwnProperty(b)&&a.editMementoFix.previousValues||a.editMementoFix&&a.editMementoFix.data&&a.editMementoFix.data.hasOwnProperty(b)&&a.editMementoFix.data;if(!c){throw 'Can not get previous value'}return c[b]},processSavingNewValue:function(a,b){return b.get(a)},processRestoringValue:Ext.identityFn,getTitle:function(){var a=this.getRecord();var b=this.getFieldNames();if(a.getTitle){return 'Edit of '+b[0]+' for '+a.getTitle(this)}if(a.modelName){return 'Edit of '+a.modelName+' '+a.getId()}return ''}},1,0,0,0,0,0,[Robo.action.flat,'Update'],0);Ext.cmd.derive('Robo.action.flat.Add',Robo.action.Base,{store:null,records:null,index:null,undo:function(){var a=this.records;this.store.remove(a);for(var b=0;b<a.length;b++){this.store.removeFromRemoved(a[b])}},redo:function(){this.store.insert(this.index,this.records)},getRecord:function(){return this.records[0]},getTitle:function(){var b=this;var a=Ext.Array.map(this.records,function(a){if(a.getTitle){return a.getTitle(b)}if(a.modelName){return a.modelName+' '+a.getId()}return 'unknown'});return 'Addition of '+a.join(',')}},0,0,0,0,0,0,[Robo.action.flat,'Add'],0);Ext.cmd.derive('Robo.action.flat.Remove',Robo.action.Base,{store:null,records:null,index:null,undo:function(){var a=this;a.store.insert(a.index,a.records)},redo:function(){var a=this;a.store.remove(a.records)},getRecord:function(){return this.records[0]},getTitle:function(){var b=this;var a=Ext.Array.map(this.records,function(a){if(a.getTitle){return a.getTitle(b)}if(a.modelName){return a.modelName+' '+a.getId()}return 'unknown'});return 'Removal of '+a.join(',')}},0,0,0,0,0,0,[Robo.action.flat,'Remove'],0);Ext.cmd.derive('Robo.action.tree.Append',Robo.action.Base,{parent:null,newChild:null,undo:function(){var a=this.newChild;this.parent.removeChild(a);delete a.data.lastParentId;var b=this.parent.getTreeStore();Ext.Array.remove(b.removedNodes,a)},redo:function(){this.parent.appendChild(this.newChild)},getRecord:function(){return this.newChild},getTitle:function(){var a=this.newChild;var b;if(a.getTitle){b=a.getTitle(this)}else {if(a.modelName){return a.modelName+' '+a.getId()}}return 'Append of '+b}},0,0,0,0,0,0,[Robo.action.tree,'Append'],0);Ext.cmd.derive('Robo.action.tree.Insert',Robo.action.Base,{parent:null,newChild:null,insertedBefore:null,undo:function(){var a=this.newChild;this.parent.removeChild(a);delete a.data.lastParentId;var b=this.parent.getTreeStore();Ext.Array.remove(b.removedNodes,a)},redo:function(){var a=this.insertedBefore;var b=a&&a.isFirst();this.parent.insertBefore(this.newChild,a);if(b){a.updateInfo(!1,{isFirst:!1})}},getRecord:function(){return this.newChild},getTitle:function(){var a=this.newChild;var b;if(a.getTitle){b=a.getTitle(this)}else {if(a.modelName){return a.modelName+' '+a.getId()}}return 'Insertion of '+b}},0,0,0,0,0,0,[Robo.action.tree,'Insert'],0);Ext.cmd.derive('Robo.action.tree.Remove',Robo.action.Base,{parent:null,removedChild:null,nextSibling:null,newParent:null,newNextSibling:null,dirty:!1,isMove:!1,constructor:function(a){Robo.action.Base.prototype.constructor.apply(this,arguments);this.dirty=this.removedChild.dirty},undo:function(){if(this.isMove){this.newParent=this.removedChild.parentNode;this.newNextSibling=this.removedChild.nextSibling}var b=this.nextSibling;var c=b&&b.isFirst();var a=this.removedChild;this.parent.insertBefore(a,b);a.dirty=this.dirty;if(!this.isMove){var d=a.getTreeStore();a.cascadeBy(function(a){Ext.Array.remove(d.removedNodes,a)})}if(c){b.updateInfo(!1,{isFirst:!1})}},redo:function(){if(this.isMove){var a=this.newNextSibling;var b=a&&a.isFirst();this.newParent.insertBefore(this.removedChild,a);if(b){a.updateInfo(!1,{isFirst:!1})}}else {this.parent.removeChild(this.removedChild);delete this.removedChild.data.lastParentId}},getRecord:function(){return this.removedChild},getTitle:function(){var a=this.removedChild;var b;if(a.getTitle){b=a.getTitle(this)}else {if(a.modelName){return a.modelName+' '+a.getId()}}return this.isMove?'Move of '+b:'Removal of '+b}},1,0,0,0,0,0,[Robo.action.tree,'Remove'],0);Ext.cmd.derive('Robo.action.tree.Update',Robo.action.flat.Update,{processRestoringValue:function(a,c,b,e){var d=this;if(c==='expanded'){if(a){b.expand()}else {b.collapse()}a=d.self.CUSTOMLY_PROCESSED}else {if(c=='leaf'){a=Robo.action.flat.Update.prototype.processRestoringValue.apply(this,arguments);if(a===!0&&e=='undo'){b.data.loaded=!1}}else {a=Robo.action.flat.Update.prototype.processRestoringValue.apply(this,arguments)}}return a}},0,0,0,0,0,0,[Robo.action.tree,'Update'],0);Ext.cmd.derive('Robo.Manager',Ext.util.Observable,{stores:null,storesById:null,treeStoreListeners:null,flatStoreListeners:null,stub:function(){},undoQueue:null,redoQueue:null,ignoredFieldNames:{expanded:1},state:'created',transactionBoundary:'timeout',transactionMaxDuration:100,clearQueuesOnLoad:!1,transactionTimeout:null,currentTransaction:null,constructor:function(b){var a=this;b=b||{};Ext.apply(a,b);a.treeStoreListeners={nodeappend:a.onTreeStoreAppend,nodeinsert:a.onTreeStoreInsert,noderemove:a.onTreeStoreRemove,update:a.onTreeStoreUpdate,scope:a};a.flatStoreListeners={add:a.onFlatStoreAdd,remove:a.onFlatStoreRemove,update:a.onFlatStoreUpdate,scope:a};if(a.clearQueuesOnLoad){Ext.apply(a.treeStoreListeners,{load:a.clearQueues,clear:a.clearQueues});Ext.apply(a.flatStoreListeners,{load:a.clearQueues,clear:a.clearQueues})}Ext.util.Observable.prototype.constructor.call(this,b);var c=a.stores||[];a.stores=[];a.storesById={};a.undoQueue=[];a.redoQueue=[];Ext.Array.forEach(c,function(c){a.addStore(c)})},addStore:function(a,f){a=Ext.data.StoreManager.lookup(a);this.stores.push(a);if(f){a.setStoreId(f)}var h=a.getModel();var e=h.prototype.associations||{};for(var g in e){var c=e[g];var d=c.getAssociatedStore;if(d&&!d.ROBO_MANAGED){var b=this;c.getAssociatedStore=function(){var c=d.apply(this,arguments);if(!b.hasStore(c)){b.addStore(c);if(b.state!=='disabled'&&b.state!=='created'){b.bindStore(c)}}return c};c.getAssociatedStore.ROBO_MANAGED=!0}}if(a.storeId){this.storesById[a.storeId]=a}},getStoreById:function(a){return this.storesById[a]},hasStore:function(a){return Ext.Array.indexOf(this.stores,a)!=-1},bindStore:function(a){(a.undoRedoEventBus||a).on(this.getStoreTypeListeners(a));if(a.undoRedoEventBus){a.on(this.getStoreTypeListenerStubs(a))}},unbindStore:function(a){(a.undoRedoEventBus||a).un(this.getStoreTypeListeners(a));if(a.undoRedoEventBus){a.un(this.getStoreTypeListenerStubs(a))}},getStoreTypeListenerStubs:function(b){var c=this;var a=this.getStoreTypeListeners(b);a=Ext.apply({},a);Ext.Object.each(a,function(d,e){a[d]=c.stub});return a},getStoreTypeListeners:function(b){var a;if(Ext.data.TreeStore&&b instanceof Ext.data.TreeStore){a=this.treeStoreListeners}else {a=this.flatStoreListeners}return a},removeStore:function(a){Ext.Array.remove(this.stores,a);this.storesById[a.storeId]=null;this.unbindStore(a)},forEachStore:function(a){Ext.Array.forEach(this.stores,a,this)},onAnyChangeInAnyStore:function(a){if(this.state==='paused'||a.isRootSettingOrLoading&&a.isRootSettingOrLoading()){return !1}if(!this.currentTransaction){this.startTransaction()}return !0},hasPersistableChanges:function(a,b){var c=this.ignoredFieldNames;return Robo.util.Array.reduce(b,function(f,e){var d=a.getField(e);return f||!d||d.persist&&(!a.isNode||!c.hasOwnProperty(e))},!1)},onFlatStoreUpdate:function(d,b,c,a){if(!this.onAnyChangeInAnyStore(d)||c!='edit'||!a||!a.length||!this.hasPersistableChanges(b,a)){return}this.currentTransaction.addAction(new Robo.action.flat.Update({record:b,fieldNames:a}))},onFlatStoreAdd:function(a,b,c){if(!this.onAnyChangeInAnyStore(a)){return}this.currentTransaction.addAction(new Robo.action.flat.Add({store:a,records:b,index:c}))},onFlatStoreRemove:function(a,b,d,c){if(!this.onAnyChangeInAnyStore(a)){return}this.currentTransaction.addAction(new Robo.action.flat.Remove({store:a,records:b,index:d,isMove:c}))},onTreeStoreUpdate:function(d,b,c,a){if(!this.onAnyChangeInAnyStore(d)||c!='edit'||!a||!a.length||!this.hasPersistableChanges(b,a)){return}this.currentTransaction.addAction(new Robo.action.tree.Update({record:b,fieldNames:a}))},onTreeStoreAppend:function(b,a,c){if(!b||!this.onAnyChangeInAnyStore(b.getTreeStore())){return}if(a.$undoRedoMoving){delete a.$undoRedoMoving}else {this.currentTransaction.addAction(new Robo.action.tree.Append({parent:b,newChild:a}))}},onTreeStoreInsert:function(b,a,c){if(!b||!this.onAnyChangeInAnyStore(b.getTreeStore())){return}if(a.$undoRedoMoving){delete a.$undoRedoMoving}else {this.currentTransaction.addAction(new Robo.action.tree.Insert({parent:b,newChild:a,insertedBefore:c}))}},onTreeStoreRemove:function(c,a,b,d){if(!this.onAnyChangeInAnyStore(c.getTreeStore())){return}if(b){a.$undoRedoMoving=!0}this.currentTransaction.addAction(new Robo.action.tree.Remove({parent:c,removedChild:a,nextSibling:d.nextSibling,isMove:b}))},start:function(){if(this.state=='created'||this.state=='disabled'){this.fireEvent('start',this);this.fireEvent('undoqueuechange',this,this.undoQueue);this.fireEvent('redoqueuechange',this,this.redoQueue)}if(this.state!=='hold'){this.forEachStore(this.bindStore);this.state='enabled'}},stop:function(){this.endTransaction();this.forEachStore(this.unbindStore);this.state='disabled';this.clearQueues();this.fireEvent('stop',this)},clearQueues:function(){this.clearUndoQueue();this.clearRedoQueue()},pause:function(){this.state='paused'},resume:function(){this.state='enabled'},hold:function(){this.state='hold'},release:function(){this.state='enabled'},getUndoQueue:function(){return this.undoQueue.slice()},getRedoQueue:function(){return this.redoQueue.slice()},clearUndoQueue:function(){if(this.undoQueue.length){this.undoQueue=[];this.fireEvent('undoqueuechange',this,this.undoQueue.slice())}},clearRedoQueue:function(){if(this.redoQueue.length){this.redoQueue=[];this.fireEvent('redoqueuechange',this,this.redoQueue.slice())}},startTransaction:function(c){var a=this,b;if(a.state=='disabled'){return}if(a.currentTransaction){a.endTransaction()}b=new Robo.Transaction({title:c});a.currentTransaction=b;a.notifyStoresAboutTransactionStart(b);if(a.transactionBoundary=='timeout'){a.scheduleEndTransaction()}},scheduleEndTransaction:function(){var a=this;if(a.transactionTimeout){clearTimeout(a.transactionTimeout)}a.transactionTimeout=setTimeout(function(){if(a.state!=='hold'){a.endTransaction();a.transactionTimeout=null}else {a.scheduleEndTransaction()}},a.transactionMaxDuration)},endTransaction:function(){var a=this,b=a.currentTransaction;if(!b){return !1}a.currentTransaction=null;if(a.transactionBoundary=='timeout'){clearTimeout(a.transactionTimeout);a.transactionTimeout=null}if(b.hasActions()){a.addTransaction(b)}a.notifyStoresAboutTransactionEnd(b);return b.hasActions()},addTransaction:function(a){this.undoQueue.push(a);this.fireEvent('undoqueuechange',this,this.undoQueue.slice());if(this.redoQueue.length){this.redoQueue.length=0;this.fireEvent('redoqueuechange',this,this.redoQueue.slice())}this.fireEvent('transactionadd',this,a)},undo:function(a){var b=this.undoQueue,d,c,e,f=b.length;if(this.state=='disabled'||a===0||!b.length){return}if(a instanceof Robo.Transaction){d=Ext.Array.indexOf(b,a);if(d==-1){return}a=b.length-d}a=a||1;this.fireEvent('beforeundo',this);this.pause();this.notifyStoresAboutUndoRedoStart();for(e=0;e<Math.min(a,f);e++){c=b.pop();c.undo();this.redoQueue.unshift(c)}this.notifyStoresAboutUndoRedoComplete();this.fireEvent('undoqueuechange',this,b.slice());this.fireEvent('redoqueuechange',this,this.redoQueue.slice());this.resume();this.fireEvent('afterundo',this)},redo:function(a){var c=this.redoQueue,b,d,e,f=c.length;if(this.state=='disabled'||a===0||!c.length){return}if(a instanceof Robo.Transaction){d=Ext.Array.indexOf(c,a);if(d==-1){return}a=d+1}a=a||1;this.fireEvent('beforeredo',this);this.pause();this.notifyStoresAboutUndoRedoStart();for(e=0;e<Math.min(a,f);e++){b=this.redoQueue.shift();b.redo();this.undoQueue.push(b)}this.notifyStoresAboutUndoRedoComplete();this.fireEvent('redoqueuechange',this,this.redoQueue.slice());this.fireEvent('undoqueuechange',this,this.undoQueue.slice());this.resume();this.fireEvent('afterredo',this)},undoAll:function(){this.undo(this.undoQueue.length)},notifyStoresAboutTransactionStart:function(a){this.forEachStore(function(b){b.onUndoRedoTransactionStart&&b.onUndoRedoTransactionStart(this,a)})},notifyStoresAboutTransactionEnd:function(a){this.forEachStore(function(b){b.onUndoRedoTransactionEnd&&b.onUndoRedoTransactionEnd(this,a)})},notifyStoresAboutUndoRedoStart:function(){this.forEachStore(function(a){a.beforeUndoRedo&&a.beforeUndoRedo(this)})},notifyStoresAboutUndoRedoComplete:function(){this.forEachStore(function(a){a.afterUndoRedo&&a.afterUndoRedo(this)})}},1,0,0,0,0,0,[Robo,'Manager'],function(){Ext.apply(Robo,{VERSION:'5.0.3'})});Ext.cmd.derive('Gnt.data.undoredo.Manager',Robo.Manager,{getStoreTypeListeners:function(c){var b=this,a=Robo.Manager.prototype.getStoreTypeListeners.call(this,c);if(c instanceof Gnt.data.TaskStore){a.update=b.onTaskStoreUpdate;a.projectionstart=b.onTaskStoreProjectionStart;a.projectioncommit=b.onTaskStoreProjectionEnd;a.projectionreject=b.onTaskStoreProjectionEnd}return a},onTaskStoreUpdate:function(d,b,c,a){if(!this.onAnyChangeInAnyStore(d)||c!='edit'||!a||!a.length||!this.hasPersistableChanges(b,a)){return}this.currentTransaction.addAction(new Gnt.data.undoredo.action.taskstore.Update({record:b,fieldNames:a}))},onTaskStoreProjectionStart:function(c,b){var a=this;if(b==1&&a.transactionBoundary==='timeout'){if(!a.currentTransaction){a.onAnyChangeInAnyStore(c)}if(a.currentTransaction){a.hold()}}},onTaskStoreProjectionEnd:function(d,c,e,b){var a=this;if(b===0&&a.transactionBoundary==='timeout'&&a.currentTransaction){a.release()}}},0,0,0,0,0,0,[Gnt.data.undoredo,'Manager'],0);Ext.cmd.derive('CGA.utils.date',Ext.Base,{statics:{resetStart:function(e,d,c){var a=new Date(e);if(a!=null){var b=!1;if(d==0){if(c){Ext.Array.each(c,function(a){if(a.data.Type==3){b=!0}})}if(b===!0){a.setHours(17)}}if(b===!1){a.setHours(8)}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}return a},resetEnd:function(e,d,c){var a=new Date(e);if(a!=null){var b=!1;if(d==0){if(c){Ext.Array.each(c,function(a){if(a.data.Type==3){b=!0}})}if(b!==!0){a.setHours(8)}else {a.setHours(17)}}else {a.setHours(17)}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}return a}}},0,0,0,0,0,0,[CGA.utils,'date'],0);Ext.cmd.derive('CGA.store.Locales',Ext.data.Store,{storeId:'locales',fields:['id','cls','title'],proxy:'memory',data:[{id:'en',cls:'En',title:'English'},{id:'sv_SE',cls:'SvSE',title:'Swedish'},{id:'de',cls:'De',title:'German'},{id:'it',cls:'It',title:'Italian'},{id:'ru',cls:'RuRU',title:'Russian'},{id:'pl',cls:'Pl',title:'Polish'},{id:'nl',cls:'Nl',title:'Dutch'},{id:'he',cls:'He',title:'Hebrew'}]},0,0,0,0,['store.advanced-locales-store'],0,[CGA.store,'Locales'],0);Ext.cmd.derive('Ext.data.NodeInterface',Ext.Base,{statics:{decorate:function(f){var a=Ext.data.schema.Schema.lookupEntity(f),e=a.prototype,c,b,d;if(!a.prototype.isObservable){a.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(e.isNode){return}c=e.idProperty;b=a.getField(c);d=b.type;a.override(this.getPrototypeBody());a.addFields([{name:'parentId',type:d,defaultValue:null,allowNull:b.allowNull},{name:'index',type:'int',defaultValue:-1,persist:!1,convert:null},{name:'depth',type:'int',defaultValue:0,persist:!1,convert:null},{name:'expanded',type:'bool',defaultValue:!1,persist:!1,convert:null},{name:'expandable',type:'bool',defaultValue:!0,persist:!1,convert:null},{name:'checked',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'leaf',type:'bool',defaultValue:!1},{name:'cls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'iconCls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'icon',type:'string',defaultValue:'',persist:!1,convert:null},{name:'root',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isLast',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isFirst',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'allowDrop',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'allowDrag',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'loaded',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'loading',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'href',type:'string',defaultValue:'',persist:!1,convert:null},{name:'hrefTarget',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtip',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtitle',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qshowDelay',type:'int',defaultValue:0,persist:!1,convert:null},{name:'children',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'visible',type:'boolean',defaultValue:!0,persist:!1},{name:'text',type:'string',persist:!1}])},getPrototypeBody:function(){var a={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},b={silent:!0};return {isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var a=this;a.mixins.observable.constructor.call(a);a.callParent(arguments);a.childNodes=[];return a},createNode:function(a){var b=this,j=b.childType,h,f,g,c,d,e,i=b.self;if(!a.isModel){if(j){i=b.schema.getEntity(j)}else {h=b.getTreeStore();f=h&&h.getProxy().getReader();g=b.getProxy();c=g?g.getReader():null;d=!f||c&&c.initialConfig.typeProperty?c:f;if(d){e=d.getTypeProperty();if(e){i=d.getChildType(b.schema,a,e)}}}a=new i(a)}if(!a.childNodes){a.firstChild=a.lastChild=a.parentNode=a.previousSibling=a.nextSibling=null;a.childNodes=[]}return a},isLeaf:function(){return this.get('leaf')===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(o,k){var a=this,i=a.data,r=i.depth,m={},n=a.childNodes,q=n.length,s=a.phantom,t=a.fields,c=a.modified||(a.modified={}),b,e,j,d,p,l=k.parentId,g,h,f;for(b in k){j=t[a.fieldOrdinals[b]];e=k[b];h=j&&j.persist;d=i[b];g=h&&b==='index'&&d!==-1&&(l&&l!==c.parentId);if(!g&&a.isEqual(d,e)){continue}i[b]=e;if(h){if(!g&&c.hasOwnProperty(b)){if(a.isEqual(c[b],e)){delete c[b];a.dirty=!1;for(p in c){if(c.hasOwnProperty(p)){a.dirty=!0;break}}}}else {a.dirty=!0;c[b]=d}}}if(o){a.commit();a.phantom=s}if(a.data.depth!==r){m={depth:a.data.depth+1};for(f=0;f<q;f++){n[f].updateInfo(o,m)}}},isLast:function(){return this.get('isLast')},isFirst:function(){return this.get('isFirst')},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get('expandable')){return !(a.isLeaf()||a.isLoaded()&&!a.phantom&&!a.hasChildNodes())}return !1},triggerUIUpdate:function(){this.callJoined('afterEdit',[])},appendChild:function(b,h,l){var a=this,j,m,c,e,f,k={isLast:!0,parentId:a.getId(),depth:(a.data.depth||0)+1},i,d=a.getTreeStore(),g=d&&d.bulkUpdate;Ext.suspendLayouts();if(Ext.isArray(b)){m=b.length;i=new Array(m);a.callTreeStore('beginFill');for(j=0;j<m;j++){i[j]=a.appendChild(b[j],h,l)}a.callTreeStore('endFill',[i])}else {b=a.createNode(b);if(h!==!0&&a.fireEventArgs('beforeappend',[a,b])===!1){Ext.resumeLayouts(!0);return !1}c=a.childNodes.length;e=b.parentNode;if(e){if(h!==!0&&b.fireEventArgs('beforemove',[b,e,a,c])===!1){Ext.resumeLayouts(!0);return !1}if(e.removeChild(b,!1,h,e.getTreeStore()===d)===!1){Ext.resumeLayouts(!0);return !1}}d&&d.beginUpdate();c=a.childNodes.length;if(c===0){a.setFirstChild(b)}a.childNodes[c]=b;b.parentNode=a;b.nextSibling=null;a.setLastChild(b);f=a.childNodes[c-1];if(f){b.previousSibling=f;f.nextSibling=b;f.updateInfo(l,{isLast:!1});if(!g){f.triggerUIUpdate()}}else {b.previousSibling=null}k.isFirst=c===0;k.index=c;b.updateInfo(l,k);if(a.isLeaf()){a.set('leaf',!1)}if(!a.isLoaded()){if(g){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!g){a.triggerUIUpdate()}}if(c&&a.childNodes[c-1].isExpanded()&&!g){a.childNodes[c-1].cascadeBy(a.triggerUIUpdate)}if(d){d.registerNode(a,!g);if(g){d.registerNode(b)}}if(h!==!0){a.fireEventArgs('append',[a,b,c]);if(e){b.fireEventArgs('move',[b,e,a,c])}}a.callTreeStore('onNodeAppend',[b,c]);i=b;if(d){d.endUpdate()}}Ext.resumeLayouts(!0);return i},getOwnerTree:function(){var a=this.getTreeStore();if(a){return a.ownerTree}},getTreeStore:function(){var a=this;while(a&&!a.treeStore){a=a.parentNode}return a&&a.treeStore},removeChild:function(a,m,i,f){var c=this,h=c.indexOf(a),g,l,d,e=c.getTreeStore(),k=e&&e.bulkUpdate,j;if(h===-1||i!==!0&&c.fireEventArgs('beforeremove',[c,a,!!f])===!1){return !1}Ext.suspendLayouts();e&&e.beginUpdate();Ext.Array.erase(c.childNodes,h,1);if(c.firstChild===a){c.setFirstChild(a.nextSibling)}if(c.lastChild===a){c.setLastChild(a.previousSibling)}d=a.previousSibling;if(d){a.previousSibling.nextSibling=a.nextSibling}if(a.nextSibling){a.nextSibling.previousSibling=a.previousSibling;if(h===0){a.nextSibling.updateInfo(!1,{isFirst:!0})}for(g=h,l=c.childNodes.length;g<l;g++){c.childNodes[g].updateInfo(!1,{index:g})}}else {if(d){d.updateInfo(!1,{isLast:!0});if(!k){if(d.isExpanded()){d.cascadeBy(c.triggerUIUpdate)}else {d.triggerUIUpdate()}}}}if(!c.childNodes.length&&!k){c.triggerUIUpdate()}Ext.resumeLayouts(!0);if(i!==!0){j={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling};c.callTreeStore('beforeNodeRemove',[[a],!!f]);a.previousSibling=a.nextSibling=a.parentNode=null;c.fireEventArgs('remove',[c,a,!!f,j]);c.callTreeStore('onNodeRemove',[[a],!!f])}if(m){a.erase(!0)}else {a.clear()}if(!f){a.set({parentId:null,lastParentId:c.getId()},b)}if(e){e.endUpdate()}return a},copy:function(d,e){var a=this,c=a.callParent([d]),f=a.childNodes?a.childNodes.length:0,b;if(e){for(b=0;b<f;b++){c.appendChild(a.childNodes[b].copy(undefined,!0))}}return c},clear:function(b){var a=this;a.parentNode=a.previousSibling=a.nextSibling=null;if(b){a.firstChild=a.lastChild=a.childNodes=null}},drop:function(){var b=this,d=b.childNodes,f=b.parentNode,g=d?d.length:0,c,e,a;b.callParent();if(f){a=b.getTreeStore();f.removeChild(b)}else {if(b.get('root')){a=b.getTreeStore();a.setRoot(null)}}a&&a.beginUpdate();for(c=0;c<g;c++){e=d[c];e.clear();e.drop()}a&&a.endUpdate()},erase:function(e){var a=this,c=a.childNodes,f=c&&c.length,b,d;a.remove();a.clear(!0);a.callParent([e]);for(b=0;b<f;b++){d=c[b];d.parentNode=null;d.erase(e)}},insertBefore:function(b,e,i){var a=this,k=a.indexOf(e),f=b.parentNode,d=k,l,h,g,c=a.getTreeStore(),j=c&&c.bulkUpdate;if(!e){return a.appendChild(b)}if(b===e){return !1}b=a.createNode(b);if(i!==!0&&a.fireEventArgs('beforeinsert',[a,b,e])===!1){return !1}if(f===a&&a.indexOf(b)<k){d--}if(f){if(i!==!0&&b.fireEventArgs('beforemove',[b,f,a,k,e])===!1){return !1}if(f.removeChild(b,!1,i,f.getTreeStore()===c)===!1){return !1}}c&&c.beginUpdate();if(d===0){a.setFirstChild(b)}Ext.Array.splice(a.childNodes,d,0,b);b.parentNode=a;b.nextSibling=e;e.previousSibling=b;h=a.childNodes[d-1];if(h){b.previousSibling=h;h.nextSibling=b}else {b.previousSibling=null}b.updateInfo(!1,{parentId:a.getId(),index:d,isFirst:d===0,isLast:!1,depth:(a.data.depth||0)+1});for(g=d+1,l=a.childNodes.length;g<l;g++){a.childNodes[g].updateInfo(!1,{index:g})}if(!a.isLoaded()){if(j){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!j){a.triggerUIUpdate()}}if(c){c.registerNode(a,!j)}if(i!==!0){a.fireEventArgs('insert',[a,b,e]);if(f){b.fireEventArgs('move',[b,f,a,d,e])}}a.callTreeStore('onNodeInsert',[b,d]);if(c){c.endUpdate()}return b},insertChild:function(c,b){var a=this.childNodes[c];if(a){return this.insertBefore(b,a)}else {return this.appendChild(b)}},isLastVisible:function(){var b=this,c=b.data.isLast,a=b.nextSibling;if(!c&&b.getTreeStore().isFiltered()){while(a){if(a.data.visible){return !1}a=a.nextSibling}return !0}return c},remove:function(c,d){var a=this,b=a.parentNode;if(b){b.removeChild(a,c,d)}else {if(c){a.erase(!0)}}return a},removeAll:function(i,h,f){var a=this,d=a.childNodes,g=d.length,c,b,e;if(!g){return}if(!f){b=a.getTreeStore();if(b){b.beginUpdate();b.suspendEvent('remove');a.callTreeStore('beforeNodeRemove',[d,!1])}}for(e=0;e<g;++e){c=d[e];c.previousSibling=c.nextSibling=c.parentNode=null;a.fireEventArgs('remove',[a,c,!1]);if(i){c.erase(!0)}else {c.removeAll(!1,h,!0)}}if(!f&&b){b.resumeEvent('remove');a.callTreeStore('onNodeRemove',[d,!1]);b.endUpdate()}a.firstChild=a.lastChild=null;d.length=0;if(!f){a.triggerUIUpdate()}return a},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(c,a,b){var d=a?a.nextSibling:null;this.removeChild(a,!1,b);this.insertBefore(c,d,b);return a},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},indexOfId:function(d){var b=this.childNodes,c=b.length,a=0;for(;a<c;++a){if(b[a].getId()===d){return a}}return -1},getPath:function(c,a){c=c||this.idProperty;a=a||'/';var d=[this.get(c)],b=this.parentNode;while(b){d.unshift(b.get(c));b=b.parentNode}return a+d.join(a)},getDepth:function(){return this.get('depth')},bubble:function(d,b,c){var a=this;while(a){if(d.apply(b||a,c||[a])===!1){break}a=a.parentNode}},cascadeBy:function(a,e,f,d){var b=this;if(arguments.length===1&&!Ext.isFunction(a)){d=a.after;e=a.scope;f=a.args;a=a.before}if(!a||a.apply(e||b,f||[b])!==!1){var g=b.childNodes,h=g.length,c;for(c=0;c<h;c++){g[c].cascadeBy.call(g[c],a,e,f,d)}if(d){d.apply(e||b,f||[b])}}},eachChild:function(f,d,e){var b=this.childNodes,c=b.length,a;for(a=0;a<c;a++){if(f.apply(d||this,e||[b[a]])===!1){break}}},findChild:function(a,b,c){return this.findChildBy(function(){return this.get(a)==b},null,c)},findChildBy:function(g,d,e){var f=this.childNodes,h=f.length,c=0,a,b;for(;c<h;c++){a=f[c];if(g.call(d||a,a)===!0){return a}else {if(e){b=a.findChildBy(g,d,e);if(b!==null){return b}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(b){var a=this.parentNode;while(a){if(a===b){return !0}a=a.parentNode}return !1},sort:function(e,i,h){var c=this,a=c.childNodes,g=a.length,b,d,f={isFirst:!0};if(g>0){if(!e){e=c.getTreeStore().getSortFn()}Ext.Array.sort(a,e);c.setFirstChild(a[0]);c.setLastChild(a[g-1]);for(b=0;b<g;b++){d=a[b];d.previousSibling=a[b-1];d.nextSibling=a[b+1];f.isLast=b===g-1;f.index=b;d.updateInfo(!1,f);f.isFirst=!1;if(i&&!d.isLeaf()){d.sort(e,!0,!0)}}if(h!==!0){c.fireEventArgs('sort',[c,a]);c.callTreeStore('onNodeSort',[a])}}},isExpanded:function(){return this.get('expanded')},isLoaded:function(){return this.get('loaded')},isBranchLoaded:function(){var a=!this.isLeaf()&&this.isLoaded();if(a){this.cascadeBy(function(b){if(!b.isLeaf()){a=a||b.isBranchLoaded()}return a})}return a},isLoading:function(){return this.get('loading')},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return !1}a=a.parentNode}return !0},expand:function(e,c,d){var a=this,b,f;if(!a.isLeaf()){if(a.isLoading()){a.on('expand',function(){a.expand(e,c,d)},a,{single:!0})}else {if(!a.isExpanded()){if(a.fireEventArgs('beforeexpand',[a])!==!1){if(e){if(a.parentNode&&a.parentNode.isSynchronousRecursiveExpand){a.isSynchronousRecursiveExpand=!0}else {b=a.getTreeStore();if(b.getProxy().isSynchronous||a.isBranchLoaded()){a.isSynchronousRecursiveExpand=!0;b.suspendEvent('add');f=!0}}}a.callTreeStore('onBeforeNodeExpand',[a.onChildNodesAvailable,a,[e,c,d]]);if(f){b.resumeEvent('add');b.fireEvent('refresh',b)}a.isSynchronousRecursiveExpand=!1}}else {if(e){a.expandChildren(!0,c,d)}else {Ext.callback(c,d||a,[a.childNodes])}}}}else {Ext.callback(c,d||a)}},onChildNodesAvailable:function(h,j,g,i){var b=this,f=b.getTreeStore(),e=f&&f.bulkUpdate,a,d,c;Ext.suspendLayouts();for(a=b.parentNode;a;a=a.parentNode){if(!a.isExpanded()){(c||(c=[])).unshift(a)}}if(e){b.data.expanded=!0}else {b.set('expanded',!0)}if(c){for(d=1;d<c.length;d++){a=c[d];if(e){a.data.expanded=!0}else {a.set('expanded',!0)}}c[0].expand();for(d=1;d<c.length;d++){a=c[d];a.fireEventArgs('expand',[a,a.childNodes])}}else {b.callTreeStore('onNodeExpand',[h,!1])}b.fireEventArgs('expand',[b,h]);if(j){b.expandChildren(!0,g,i)}else {Ext.callback(g,i||b,[b.childNodes])}Ext.resumeLayouts(!0)},expandChildren:function(l,d,i,b){var g=this,k,a,e,c,f,j,h;if(Ext.isBoolean(d)){k=d;d=i;i=b;b=k}if(b===undefined){h=g.getTreeStore();b=h&&h.singleExpand}e=g.childNodes;c=[];f=b?Math.min(e.length,1):e.length;for(a=0;a<f;++a){j=e[a];if(!j.isLeaf()){c[c.length]=j}}f=c.length;for(a=0;a<f;++a){c[a].expand(l)}if(d){Ext.callback(d,i||g,[g.childNodes])}},collapse:function(f,b,d){var a=this,j=a.isExpanded(),g=a.getTreeStore(),i=g&&g.bulkUpdate,h=a.childNodes.length,c,e;if(!a.isLeaf()&&(!j&&f||a.fireEventArgs('beforecollapse',[a])!==!1)){Ext.suspendLayouts();if(a.isExpanded()){if(f){e=function(){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}};if(b){b=Ext.Function.createSequence(e,Ext.Function.bind(b,d,[a.childNodes]))}else {b=e}}else {if(b){b=Ext.Function.bind(b,d,[a.childNodes])}}if(i){a.data.expanded=!1}else {a.set('expanded',!1)}a.callTreeStore('onNodeCollapse',[a.childNodes,b,d]);a.fireEventArgs('collapse',[a,a.childNodes]);b=null}else {if(f){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}}}Ext.resumeLayouts(!0)}Ext.callback(b,d||a,[a.childNodes])},setCollapsed:function(c){var a=this,d=a.childNodes.length,b;if(!a.isLeaf()&&a.fireEventArgs('beforecollapse',[a])!==!1){a.data.expanded=!1;a.fireEventArgs('collapse',[a,a.childNodes]);if(c){for(b=0;b<d;b++){a.childNodes[b].setCollapsed(!0)}}}},collapseChildren:function(e,g,h){var i=this,a,f=i.childNodes,c=f.length,d=[],b;for(a=0;a<c;++a){b=f[a];if(!b.isLeaf()&&b.isLoaded()&&b.isExpanded()){d.push(b)}}c=d.length;if(c){for(a=0;a<c;++a){b=d[a];if(a===c-1){b.collapse(e,g,h)}else {b.collapse(e)}}}else {Ext.callback(g,h)}},fireEvent:function(a){return this.fireEventArgs(a,Ext.Array.slice(arguments,1))},fireEventArgs:function(c,g){var e=Ext.mixin.Observable.prototype.fireEventArgs,d,b,f;if(a[c]){for(b=this;d!==!1&&b;b=(f=b).parentNode){if(b.hasListeners&&b.hasListeners[c]){d=e.call(b,c,g)}}if(d!==!1){b=f.getTreeStore();if(b&&b.hasListeners&&b.hasListeners[c='node'+c]){d=b.fireEventArgs(c,g)}}return d}else {return e.apply(this,arguments)}},serialize:function(g){var e=g||new Ext.data.writer.Json({writeAllFields:!0}),d=e.getRecordData(this),b=this.childNodes,f=b.length,c,a;if(f>0){d.children=c=[];for(a=0;a<f;a++){c.push(b[a].serialize(e))}}return d},callTreeStore:function(e,a){var c=this,b=c.getTreeStore(),d=b&&b[e];if(b&&d){a=a||[];if(a[0]!==c){a.unshift(c)}d.apply(b,a)}},privates:{join:function(a){if(a.isTreeStore){if(this.isRoot()){this.treeStore=this.store=a}}else {this.callParent([a])}},callJoined:function(a,b){this.callParent([a,b]);this.callTreeStore(a,b)}}}}}},0,0,0,0,0,0,[Ext.data,'NodeInterface'],0);Ext.cmd.derive('Ext.data.TreeModel',Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:'memory'}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,'TreeModel'],function(){Ext.data.NodeInterface.decorate(this)});Ext.cmd.derive('Ext.data.TreeStore',Ext.data.Store,{isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:'children',parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:'node',defaultRootId:'root',defaultRootText:'Root',folderSort:!1},lazyFill:!1,fillCount:0,bulkUpdate:0,_silentOptions:{silent:!0},implicitModel:'Ext.data.TreeModel',constructor:function(a){var b=this;b.byIdMap={};Ext.data.Store.prototype.constructor.call(this,a)},applyFields:function(a,c){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:'auto',defaultValue:null,persist:!1})}}Ext.data.Store.prototype.applyFields.call(this,a,c)},onSorterEndUpdate:function(){var a=this,d=a.getSorters(),b=d.getRange(),c=a.getRoot(),e=a.getFolderSort();a.fireEvent('beforesort',a,b);if(c&&(e||b.length)){if(a.getRemoteSort()){if(b.length){a.load({callback:function(){a.fireEvent('sort',a,b)}})}}else {c.sort(this.getSortFn(),!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('sort',a,b)}}else {a.fireEvent('sort',a,b)}},updateFolderSort:function(a){this.needsFolderSort=a;this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var a=this,b=this.sorters.getSortFn();return function(d,e){var f,g,c=0;if(a.needsFolderSort){f=d.data.leaf?1:0;g=e.data.leaf?1:0;c=f-g}if(a.needsIndexSort&&c===0){c=d.data.index-e.data.index}return c||b(d,e)}},getTotalCount:function(){return this.getCount()},afterEdit:function(a,c){var b=this;if(b.needsLocalFilter()){b.doFilter(a)}Ext.data.Store.prototype.afterEdit.call(this,a,c)},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null)}},afterCommit:function(c,a){var b=this;if(!a){a=null}if(b.contains(c)){b.onUpdate(c,Ext.data.Model.COMMIT,a);b.fireEvent('update',b,c,Ext.data.Model.COMMIT,a)}},fireChangeEvent:function(a){return !!this.byIdMap[a.id]},updateRootVisible:function(c){var a=this.getRoot(),b;if(a){b=this.getData();if(c){b.insert(0,a)}else {b.remove(a)}}},updateTrackRemoved:function(a){Ext.data.Store.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},onDestroyRecords:function(c,b,a){if(a){this.removedNodes.length=0}},updateProxy:function(a){var b;if(a){if(a.setIdParam){a.setIdParam(this.getNodeParam())}b=a.getReader();if(Ext.isEmpty(b.getRootProperty())){b.setRootProperty(this.getDefaultRootProperty())}}},setProxy:function(a){this.changingProxy=!0;(arguments.callee.$previous||Ext.data.Store.prototype.setProxy).call(this,a);this.changingProxy=!1},updateModel:function(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(!0)}},onFilterEndUpdate:function(d){var a=this,e=d.length,b=a.getRoot(),g,h,c,f;if(!a.getRemoteFilter()){if(e){a.doFilter(b)}else {b.cascadeBy({after:function(b){b.set('visible',!0,a._silentOptions)}})}if(e){c=[];g=b.childNodes;for(f=0,e=g.length;f<e;f++){h=g[f];if(h.get('visible')){c.push(h)}}}else {c=b.childNodes}a.onNodeFilter(b,c);b.fireEvent('filterchange',b,c);a.fireEvent('filterchange',a,d);a.suppressNextFilter=!0;Ext.data.Store.prototype.onFilterEndUpdate.call(this,d);a.suppressNextFilter=!1}else {Ext.data.Store.prototype.onFilterEndUpdate.call(this,d)}},onNodeFilter:function(c,d){var a=this,e=a.getData(),b=[];if(a.getRootVisible()){if(d.length){b.push(c)}else {c.set('visible',!1,a._silentOptions)}}a.handleNodeExpand(c,d,b);a.suspendEvents();e.splice(0,e.getCount(),b);a.resumeEvents();if(!a.suppressNextFilter){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}},onBeforeNodeExpand:function(a,f,h,c){var d=this,k,i,e,j,g,b;if(a.isLoaded()){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}else {if(a.isLoading()){d.on('load',function(){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)},d,{single:!0,priority:1001})}else {k=d.getProxy().getReader();i=a.getProxy();e=i?i.getReader():null;j=e&&e.initialConfig.rootProperty?e:k;g=j.getRoot(a.raw||a.data);if(g||a.phantom&&!a.isRoot()){if(g){d.fillNode(a,j.extractData(g,{model:a.childType,recordCreator:d.recordCreator}))}b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}else {d.read({node:a,onChildNodesAvailable:function(){delete d.lastOptions.onChildNodesAvailable;b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}});d.flushLoad()}}}},onNodeExpand:function(b,e){var a=this,d=a.indexOf(b)+1,c=[];a.handleNodeExpand(b,e,c);if(!a.refreshCounter&&b.isRoot()&&!b.get('visible')){a.loadRecords(c)}else {a.insert(d,c)}},handleNodeExpand:function(d,c,e){var g=this,f=c?c.length:0,b,a;if(d!==this.getRoot()&&!g.isVisible(d)){return}if(f){for(b=0;b<f;b++){a=c[b];if(a.get('visible')){e.push(a);if(a.isExpanded()){if(a.isLoaded()){g.handleNodeExpand(a,a.childNodes,e)}else {a.set('expanded',!1);a.expand()}}}}}},onNodeCollapse:function(e,b,f,g){var a=this,d=a.indexOf(e)+1,c;if(a.needsLocalFilter()){b=Ext.Array.filter(b,a.filterVisible)}if(b.length&&a.data.contains(b[0])){c=a.indexOfNextVisibleNode(e);a.removeAt(d,c-d)}Ext.callback(f,g)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get('visible');a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},filterNew:function(a){return !a.get('root')&&Ext.data.Store.prototype.filterNew.call(this,a)},filterRejects:function(a){return !a.get('root')&&Ext.data.Store.prototype.filterRejects.call(this,a)},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(f,a){if(!Ext.isArray(a)){a=[a]}var b=this,e=a.length,c,d;for(c=0;!d&&c<e;c++){if(a[c].get('visible')){d=a[c]}}if(d){b.startRemoveIndex=b.indexOf(a[0]);b.lastRemoveIndexPlusOne=b.indexOfNextVisibleNode(a[a.length-1])}else {b.startRemoveIndex=-1;b.lastRemoveIndexPlusOne=0}},afterDrop:Ext.emptyFn,onNodeRemove:function(i,d,f){var a=this,e=a.removedNodes,h=d.length,c=a.startRemoveIndex,g=a.lastRemoveIndexPlusOne,b;a.suspendAutoSync();if(c!==-1){a.removeIsMove=f;a.removeAt(c,g-c);a.removeIsMove=!1}for(b=0;b<h;b++){d[b].cascadeBy(function(b){a.unregisterNode(b);if(e&&!f){if(!b.phantom&&!b.erasing&&!a.loading){b.removedFrom=a.indexOf(b);e.push(b);a.needsSync=!0}}})}a.resumeAutoSync()},onNodeAppend:function(a,c,b){this.onNodeInsert(a,c,b)},onNodeInsert:function(h,a,l){var b=this,m=a.raw||a.data,k=b.removedNodes,g,c,j,e,d,i,f;if(h&&b.needsLocalFilter()){b.doFilter(h)}b.beginUpdate();if(b.isVisible(a)){if(l===0||!a.previousSibling){g=h}else {for(c=a.previousSibling;c&&!c.get('visible');c=c.previousSibling){}while(c.isExpanded()&&c.lastChild){c=c.lastChild}g=c}b.insert(b.indexOf(g)+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){b.onNodeExpand(a,a.childNodes)}else {if(!b.fillCount){a.set('expanded',!1);a.expand()}}}}Ext.Array.remove(k,a);b.needsSync=b.needsSync||a.phantom||a.dirty;if(!a.isLeaf()&&!a.isLoaded()&&!b.lazyFill){j=b.getProxy().getReader();e=a.getProxy();d=e?e.getReader():null;i=d&&d.initialConfig.rootProperty?d:j;f=i.getRoot(m);if(f){b.fillNode(a,i.extractData(f,{model:a.childType,recordCreator:b.recordCreator}))}}b.endUpdate()},registerNode:function(c,f){var e=this,b,d,a;e.byIdMap[c.id]=c;if(f===!0){b=c.childNodes;d=b.length;for(a=0;a<d;a++){e.registerNode(b[a],!0)}}},unregisterNode:function(d,f){var e=this,b,c,a;delete e.byIdMap[d.id];if(f===!0){b=d.childNodes;c=b.length;for(a=0;a<c;a++){e.unregisterNode(b[a],!0)}}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if(a.indexOf(b)!==-1&&b.isExpanded()||b===a.getRoot()&&!a.getRootVisible()){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(!0)}a.resumeAutoSync(a.autoSync)},applyRoot:function(a){var b=this,e=b.getModel(),d=e.prototype.idProperty,c=b.getDefaultRootId();if(a&&!a.isNode){a=Ext.apply({text:b.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},a);if(c&&a[d]===undefined){a[d]=c}a=new e(a)}return a},updateRoot:function(b,c){var a=this,d,f=!c,e;a.byIdMap={};a.getTrackRemoved();a.suspendEvent('add','remove');if(c&&c.isModel){if(a.getRootVisible()){e=[c]}else {e=c.childNodes}a.beforeNodeRemove(null,e);c.set('root',!1);a.onNodeRemove(null,e);c.fireEvent('remove',null,c,!1);c.fireEvent('rootchange',null);c.clearListeners();c.store=c.treeStore=null}a.getData().clear();if(b){if(b.fireEventArgs('beforeappend',[null,b])===!1){b=null}else {d=b.parentNode;if(d){if(!d.removeChild(b,!1,!1,d.getTreeStore()===a)){return}}else {if((d=b.getTreeStore())&&d!==a&&b===d.getRoot()){d.setRoot(null)}}b.store=b.treeStore=a;b.set('root',!0);b.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null});a.registerNode(b,!0);b.fireEvent('append',null,b,!1);b.fireEvent('rootchange',b);a.onNodeAppend(null,b,0);b.phantom=!0}}a.fireEvent('rootchange',b,c);if(b&&(a.getAutoLoad()||b.isExpanded())){if(b.isLoaded()){a.onNodeExpand(b,b.childNodes);a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}else {b.data.expanded=!1;b.expand(!1,function(){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)})}}else {if(!f){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}a.resumeEvent('add','remove')},getNodeById:function(a){return this.byIdMap[a]||null},findNode:function(f,a,d,e,c){if(Ext.isEmpty(a,!1)){return null}if(a===this.model.idProperty&&arguments.length<3){return this.byIdMap[a]}var g=Ext.String.createRegex(a,d,e,c),b=null;Ext.Object.eachValue(this.byIdMap,function(h){if(h&&g.test(h.get(f))){b=h;return !1}});return b},load:function(b){var a=b&&b.node;if(!a&!(a=this.getRoot())){a=this.setRoot({expanded:!0});return}if(a.isLoading()){return}return Ext.data.Store.prototype.load.call(this,b)},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b,g,i,d=a.getClearOnLoad(),e,f,h;a.clearLoadTask();if(!c){return}b=c.node||a.getRoot();e=b&&b.isRoot()&&b.isLoaded()&&d;g=c.callback;i=c.scope;c.params=c.params||{};if(b.data.expanded&&!e){b.data.loaded=!1;if(d){b.data.expanded=!1}c.callback=function(a,c,e){if(!d){b.collapse()}b.expand();Ext.callback(g,i,[a,c,e])}}c.id=b.getId();c=Ext.apply({filters:a.getFilters().items,sorters:a.getSorters().items,node:c.node||b,internalScope:a,internalCallback:a.onProxyLoad},c);a.lastOptions=Ext.apply({},c);c.isReload=e;f=a.createOperation('read',c);if(a.fireEvent('beforeload',a,f)!==!1){a.loading=!0;if(e){if(a.getClearRemovedOnLoad()){a.removedNodes.length=0}a.unregisterNode(b,!0);b.childNodes.length=0;h=!0}else {if(d){if(a.getTrackRemoved()&&a.getClearRemovedOnLoad()){a.clearRemoved(b)}b.removeAll(!1)}}if(a.loading&&b){b.set('loading',!0)}if(h){a.clearData(!0);if(a.getRootVisible()){a.suspendEvents();a.add(b);a.resumeEvents()}}f.execute()}return a},onProxyLoad:function(c){var a=this,f=c.initialConfig,e=c.wasSuccessful(),b=c.getRecords(),d=f.node,g=f.isReload,h=c.getScope()||a,i=[b,c,e];if(a.destroyed){return}a.loading=!1;d.set('loading',!1);if(e){++a.loadCount;if(!a.getClearOnLoad()){b=a.cleanRecords(d,b)}if(a.getParentIdProperty()){b=a.treeify(d,b)}if(g){a.suspendEvent('add','update')}b=a.fillNode(d,b)}if(g){a.resumeEvent('add','update');a.callObservers('BeforePopulate');a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.callObservers('AfterPopulate')}else {Ext.callback(f.onChildNodesAvailable,h,i)}a.fireEvent('load',a,b,e,c,d)},clearRemoved:function(k){var d=this,e=d.removedNodes,l=k.getId(),f=e.length,b=f,h={},j=[],i={},a,c,g;if(k===d.getRoot()){d.removedNodes.length=0;return}for(;b--;){a=e[b];i[a.getId()]=a}for(b=f;b--;){a=e[b];c=a;while(c&&c.getId()!==l){g=c.get('parentId')||c.get('lastParentId');c=c.parentNode||d.getNodeById(g)||i[g]}if(c){h[a.getId()]=a}}for(b=0;b<f;b++){a=e[b];if(!h[a.getId()]){j.push(a)}}d.removedNodes=j},fillNode:function(c,a){var b=this,d=a?a.length:0;++b.bulkUpdate;if(d){b.setupNodes(a)}if(b.bulkUpdate===1){c.set('loaded',!0)}else {c.data.loaded=!0}if(a.length){c.appendChild(a,undefined,!0)}--b.bulkUpdate;return a},setupNodes:function(b){var a=this,j=a.getSorters(),f=!1,g=b.length,i=a.sortOnLoad&&g>1&&!a.getRemoteSort()&&a.getFolderSort()||j.length,e,h,c,d;if(a.needsLocalFilter()){d=a.getFilters().getFilterFn();b[0].set('visible',d(b[0]))}for(c=1;c<g;c++){e=b[c];h=b[c-1];if(d){e.set('visible',d(e))}f=e.data.index!==h.data.index}if(i){a.needsIndexSort=!0;Ext.Array.sort(b,a.getSortFn());a.needsIndexSort=!1}else {if(f){Ext.Array.sort(b,a.sortByIndex)}}},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent('add','update');a.suspendAutoSync();a.fillArray=[]}},endFill:function(g,f){var a=this,c=a.fillArray,b,e,d;c.push(f);if(!--a.fillCount){a.resumeAutoSync();a.resumeEvent('add','update');for(b=0,e=c.length;b<e;b++){d=a.indexOf(c[b][0]);if(d!==-1){a.fireEvent('add',a,c[b],d)}}a.fillArray=null;a.endUpdate()}},sortByIndex:function(a,b){return a.data.index-b.data.index},onIdChanged:function(d,e,c){var b=d.childNodes,f=b&&b.length,a;Ext.data.Store.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[e];this.byIdMap[c]=d;for(a=0;a<f;a++){b[a].set('parentId',c)}},treeify:function(n,h){var g=this,l=n.getId(),m=g.getParentIdProperty(),j=h.length,i=[],e={},b,a,c,f,k,d;for(b=0;b<j;b++){a=h[b];e[a.id]=a}for(b=0;b<j;b++){a=h[b];c=a.data[m];if(!(c||c===0)||c===l){i.push(a)}else {f=e[c];f.$children=f.$children||[];f.$children.push(a)}}for(k in e){a=e[k];d=a.$children;if(d){delete a.$children;g.setupNodes(d);a.appendChild(d)}g.registerNode(a)}g.setupNodes(i);return i},cleanRecords:function(h,f){var e={},d=h.childNodes,a=0,b=d.length,g=[],c;for(;a<b;++a){e[d[a].getId()]=!0}for(a=0,b=f.length;a<b;++a){c=f[a];if(!e[c.getId()]){g.push(c)}}return g},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.Store.prototype.removeAll.call(this)},doSort:function(b){var a=this;if(a.getRemoteSort()){a.load()}else {a.tree.sort(b,!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}a.fireEvent('sort',a,a.sorters.getRange())},filterVisible:function(a){return a.get('visible')},isVisible:function(c){var a=c.parentNode,b=c.data.visible,d=this.getRoot();while(b&&a){b=a.data.expanded&&a.data.visible;a=a.parentNode}return b&&!(c===d&&!this.getRootVisible())},commitChanges:function(){var a=this.removedNodes;if(a){a.length=0}Ext.data.Store.prototype.commitChanges.call(this)},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},privates:{getRawRemovedRecords:function(){return this.removedNodes},recordCreator:function(b,a){return new a(b)},doFilter:function(b){var c=this.getRoot(),a=this.getFilters().getFilterFn();this.filterNodes(c,b,a)},filterNodes:function(f,a,e){var d=!1,c=a.childNodes,g=c&&c.length,b;if(g){for(b=0;b<g;++b){this.filterNodes(f,c[b],e)}}d=a===f||e(a);a.set('visible',d,this._silentOptions);return d},needsLocalFilter:function(){return !this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(a,c){var b=this.getData();b.setFilters(null);if(a){a.on('endupdate',this.onFilterEndUpdate,this)}},onRemoteSortSet:function(a,c){var b=this.getData();b.setSorters(null);if(a){a.on('endupdate',this.onSorterEndUpdate,this)}}},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,['store.tree'],0,[Ext.data,'TreeStore'],0);Ext.cmd.derive('Sch.util.Date',Ext.Base,{singleton:!0,stripEscapeRe:/(\\.)/g,hourInfoRe:/([gGhHisucUOPZ]|MS)/,unitHash:null,unitsByName:{},constructor:function(){var b=Ext.Date;var c=this.unitHash={MILLI:b.MILLI,SECOND:b.SECOND,MINUTE:b.MINUTE,HOUR:b.HOUR,DAY:b.DAY,WEEK:'w',MONTH:b.MONTH,QUARTER:'q',YEAR:b.YEAR};Ext.apply(this,c);var a=this;this.units=[a.MILLI,a.SECOND,a.MINUTE,a.HOUR,a.DAY,a.WEEK,a.MONTH,a.QUARTER,a.YEAR]},onLocalized:function(){this.setUnitNames(this.L('unitNames'))},setUnitNames:function(e){var d=this.unitsByName={};this.l10n.unitNames=e;this._unitNames=Ext.apply({},e);var c=this.unitHash;for(var b in c){if(c.hasOwnProperty(b)){var a=c[b];this._unitNames[a]=this._unitNames[b];d[b]=a;d[a]=a}}},betweenLesser:function(a,b,c){return b<=a&&a<c},constrain:function(a,c,b){return this.min(this.max(a,c),b)},compareUnits:function(c,d){var a=Ext.Array.indexOf(this.units,c),b=Ext.Array.indexOf(this.units,d);return a>b?1:a<b?-1:0},isUnitGreater:function(a,b){return this.compareUnits(a,b)>0},copyTimeValues:function(b,a){b.setHours(a.getHours());b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds());b.setMilliseconds(a.getMilliseconds())},add:function(b,e,c){var a=Ext.Date.clone(b);if(!e||c===0){return a}switch(e.toLowerCase()){case this.MILLI:a=new Date(b.getTime()+c);break;case this.SECOND:a=new Date(b.getTime()+c*1000);break;case this.MINUTE:a=new Date(b.getTime()+c*60000);break;case this.HOUR:a=new Date(b.getTime()+c*3600000);break;case this.DAY:a.setDate(b.getDate()+c);if(a.getHours()===23&&b.getHours()===0){a=Ext.Date.add(a,Ext.Date.HOUR,1)};break;case this.WEEK:a.setDate(b.getDate()+c*7);break;case this.MONTH:var d=b.getDate();if(d>28){d=Math.min(d,Ext.Date.getLastDateOfMonth(this.add(Ext.Date.getFirstDateOfMonth(b),this.MONTH,c)).getDate())};a.setDate(d);a.setMonth(a.getMonth()+c);break;case this.QUARTER:a=this.add(b,this.MONTH,c*3);break;case this.YEAR:a.setFullYear(b.getFullYear()+c);break;}return a},getUnitDurationInMs:function(a){return this.add(new Date(1,0,1),a,1)-new Date(1,0,1)},getMeasuringUnit:function(a){if(a===this.WEEK){return this.DAY}return a},getDurationInUnit:function(b,c,e,d){var a;switch(e){case this.YEAR:a=this.getDurationInYears(b,c);break;case this.QUARTER:a=this.getDurationInMonths(b,c)/3;break;case this.MONTH:a=this.getDurationInMonths(b,c);break;case this.WEEK:a=this.getDurationInDays(b,c)/7;break;case this.DAY:a=this.getDurationInDays(b,c);break;case this.HOUR:a=this.getDurationInHours(b,c);break;case this.MINUTE:a=this.getDurationInMinutes(b,c);break;case this.SECOND:a=this.getDurationInSeconds(b,c);break;case this.MILLI:a=this.getDurationInMilliseconds(b,c);break;}return d?a:Math.round(a)},getUnitToBaseUnitRatio:function(b,a){if(b===a){return 1}switch(b){case this.YEAR:switch(a){case this.QUARTER:return 1/4;case this.MONTH:return 1/12;};break;case this.QUARTER:switch(a){case this.YEAR:return 4;case this.MONTH:return 1/3;};break;case this.MONTH:switch(a){case this.YEAR:return 12;case this.QUARTER:return 3;};break;case this.WEEK:switch(a){case this.DAY:return 1/7;case this.HOUR:return 1/168;};break;case this.DAY:switch(a){case this.WEEK:return 7;case this.HOUR:return 1/24;case this.MINUTE:return 1/1440;};break;case this.HOUR:switch(a){case this.DAY:return 24;case this.MINUTE:return 1/60;};break;case this.MINUTE:switch(a){case this.HOUR:return 60;case this.SECOND:return 1/60;case this.MILLI:return 1/60000;};break;case this.SECOND:switch(a){case this.MILLI:return 1/1000;};break;case this.MILLI:switch(a){case this.SECOND:return 1000;};break;}return -1},isUnitDivisibleIntoSubunit:function(c,b){var a=c===this.MONTH&&b===this.WEEK;return !a},getDurationInMilliseconds:function(a,b){return b-a},getDurationInSeconds:function(a,b){return (b-a)/1000},getDurationInMinutes:function(a,b){return (b-a)/60000},getDurationInHours:function(a,b){return (b-a)/3600000},getDurationInDays:function(a,b){var c=a.getTimezoneOffset()-b.getTimezoneOffset();return (b-a+c*60*1000)/86400000},getDurationInMonths:function(a,b){return (b.getFullYear()-a.getFullYear())*12+(b.getMonth()-a.getMonth())},getDurationInYears:function(a,b){return this.getDurationInMonths(a,b)/12},min:function(a,b){return (a&&a.valueOf()||a)<(b&&b.valueOf()||b)?a:b},max:function(a,b){return (a&&a.valueOf()||a)>(b&&b.valueOf()||b)?a:b},intersectSpans:function(a,c,b,d){return this.betweenLesser(a,b,d)||this.betweenLesser(b,a,c)},getNameOfUnit:function(a){a=this.getUnitByName(a);switch(a.toLowerCase()){case this.YEAR:return 'YEAR';case this.QUARTER:return 'QUARTER';case this.MONTH:return 'MONTH';case this.WEEK:return 'WEEK';case this.DAY:return 'DAY';case this.HOUR:return 'HOUR';case this.MINUTE:return 'MINUTE';case this.SECOND:return 'SECOND';case this.MILLI:return 'MILLI';}throw 'Incorrect UnitName'},getReadableNameOfUnit:function(b,a){if(!this.isLocaleApplied()){this.applyLocale()}return this._unitNames[b][a?'plural':'single']},getShortNameOfUnit:function(a){if(!this.isLocaleApplied()){this.applyLocale()}return this._unitNames[a].abbrev},getUnitByName:function(a){if(!this.isLocaleApplied()){this.applyLocale()}if(!this.unitsByName[a]){Ext.Error.raise('Unknown unit name: '+a)}return this.unitsByName[a]},getNext:function(c,d,b,e){var a=Ext.Date.clone(c);e=arguments.length<4?1:e;b=b==null?1:b;switch(d){case this.MILLI:a=this.add(c,d,b);break;case this.SECOND:a=this.add(c,d,b);if(a.getMilliseconds()>0){a.setMilliseconds(0)};break;case this.MINUTE:a=this.add(c,d,b);if(a.getSeconds()>0){a.setSeconds(0)};if(a.getMilliseconds()>0){a.setMilliseconds(0)};break;case this.HOUR:a=this.add(c,d,b);if(a.getMinutes()>0){a.setMinutes(0)};if(a.getSeconds()>0){a.setSeconds(0)};if(a.getMilliseconds()>0){a.setMilliseconds(0)};break;case this.DAY:var g=c.getHours()===23&&this.add(a,this.HOUR,1).getHours()===1;if(g){a=this.add(a,this.DAY,2);this.clearTime(a);return a};this.clearTime(a);a=this.add(a,this.DAY,b);if(a.getHours()===1){this.clearTime(a)};break;case this.WEEK:this.clearTime(a);var f=a.getDay();a=this.add(a,this.DAY,e-f+7*(b-(e<=f?0:1)));if(a.getDay()!==e){a=this.add(a,this.HOUR,1)}else {this.clearTime(a)};break;case this.MONTH:a=this.add(a,this.MONTH,b);a.setDate(1);this.clearTime(a);break;case this.QUARTER:a=this.add(a,this.MONTH,(b-1)*3+(3-a.getMonth()%3));this.clearTime(a);a.setDate(1);break;case this.YEAR:a=new Date(a.getFullYear()+b,0,1);break;default:throw new Error('Invalid date unit'+d);}return a},getNumberOfMsFromTheStartOfDay:function(a){return a-this.clearTime(a,!0)||86400000},getNumberOfMsTillTheEndOfDay:function(a){return this.getStartOfNextDay(a,!0)-a},getStartOfNextDay:function(a,c,d){var b=this.add(d?a:this.clearTime(a,c),this.DAY,1);if(b.getDate()==a.getDate()){var e=this.add(this.clearTime(a,c),this.DAY,2).getTimezoneOffset();var f=a.getTimezoneOffset();b=this.add(b,this.MINUTE,f-e)}return b},getEndOfPreviousDay:function(b,c){var a=c?b:this.clearTime(b,!0);if(a-b){return a}else {return this.add(a,this.DAY,-1)}},timeSpanContains:function(c,d,a,b){return a-c>=0&&d-b>=0},compareWithPrecision:function(a,b,d){var c=Sch.util.Date,e=Ext.Date,f;switch(d){case c.DAY:a=Number(e.format(a,'Ymd'));b=Number(e.format(b,'Ymd'));break;case c.WEEK:a=Number(e.format(a,'YmW'));b=Number(e.format(b,'YmW'));break;case c.MONTH:a=Number(e.format(a,'Ym'));b=Number(e.format(b,'Ym'));break;case c.QUARTER:a=a.getFullYear()*4+Math.floor(a.getMonth()/3);b=b.getFullYear()*4+Math.floor(b.getMonth()/3);break;case c.YEAR:a=a.getFullYear();b=b.getFullYear();break;default:case c.MILLI:case c.SECOND:case c.MINUTE:case c.HOUR:d=d&&this.getUnitDurationInMs(d)||1;a=Math.floor(a.valueOf()/d);b=Math.floor(b.valueOf()/d);break;}a<b&&(f=-1)||a>b&&(f=+1)||(f=0);return f},getValueInUnits:function(a,b){switch(b){case this.YEAR:return a.getFullYear();case this.QUARTER:return Math.floor(a.getMonth()/3)+1;case this.MONTH:return a.getMonth();case this.WEEK:return Ext.Date.getWeekOfYear(a);case this.DAY:return a.getDate();case this.HOUR:return a.getHours();case this.MINUTE:return a.getMinutes();case this.SECOND:return a.getSeconds();}},setValueInUnits:function(d,e,c){var b=Ext.Date.clone(d),a;switch(e){case this.YEAR:a='setFullYear';break;case this.MONTH:a='setMonth';break;case this.DAY:a='setDate';break;case this.HOUR:a='setHours';break;case this.MINUTE:a='setMinutes';break;case this.SECOND:a='setSeconds';break;case this.MILLI:a='setMilliseconds';break;}b[a](c);return b},getSubUnit:function(a){switch(a){case this.YEAR:return this.MONTH;case this.MONTH:return this.DAY;case this.DAY:return this.HOUR;case this.HOUR:return this.MINUTE;case this.MINUTE:return this.SECOND;case this.SECOND:return this.MILLI;}},setValueInSubUnits:function(c,a,b){a=this.getSubUnit(a);return this.setValueInUnits(c,a,b)},mergeDates:function(d,b,c){var a=Ext.Date.clone(d);switch(c){case this.YEAR:a.setFullYear(b.getFullYear());case this.MONTH:a.setMonth(b.getMonth());case this.WEEK:case this.DAY:if(c===this.WEEK){a=this.add(a,this.DAY,b.getDay()-a.getDay())}else {a.setDate(b.getDate())};case this.HOUR:a.setHours(b.getHours());case this.MINUTE:a.setMinutes(b.getMinutes());case this.SECOND:a.setSeconds(b.getSeconds());case this.MILLI:a.setMilliseconds(b.getMilliseconds());}return a},splitToSubUnits:function(c,d,a,b){a=a||1;b=arguments.length<4?1:b;switch(d){case this.MONTH:return this.splitMonth(c,a,b);case this.WEEK:case this.DAY:return this.splitDay(c,a);default:break;}},splitYear:function(e,d){var b=this.clearTime(e,!0);b.setMonth(0);b.setDate(1);var c=[];for(var a=0;a<=12;a=a+d){c.push(this.add(b,this.MONTH,a))}return c},splitMonth:function(h,f,e){var a=this.clearTime(h,!0);a.setDate(1);a=this.add(a,this.DAY,e-a.getDay());var b=Ext.Date.clone(a);var g=this.add(a,this.MONTH,1);var d=[];for(var c=0;b.getTime()<g.getTime();c=c+f){b=this.add(a,this.WEEK,c);d.push(b)}return d},splitWeek:function(d,f,e){var b=this.add(d,this.DAY,e-d.getDay());b=this.clearTime(b);var c=[];for(var a=0;a<=7;a=a+f){c.push(this.add(b,this.DAY,a))}return c},splitDay:function(d,c){var e=this.clearTime(d,!0);var b=[];for(var a=0;a<=24;a=a+c){b.push(this.add(e,this.HOUR,a))}return b},splitHour:function(e,d){var a=new Date(e.getTime());a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var c=[];for(var b=0;b<=60;b=b+d){c.push(this.add(a,this.MINUTE,b))}return c},splitMinute:function(e,d){var b=Ext.Date.clone(e);b.setSeconds(0);b.setMilliseconds(0);var c=[];for(var a=0;a<=60;a=a+d){c.push(this.add(b,this.SECOND,a))}return c},clearTime:function(a,b){if(a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0){return Ext.Date.clearTime(a,b)}return b?Ext.Date.clone(a):a},getWeekNumber:function(b){var a=new Date(b.valueOf());var d=(b.getDay()+6)%7;a.setDate(a.getDate()-d+3);var c=a.valueOf();a.setMonth(0,1);if(a.getDay()!=4){a.setMonth(0,1+(4-a.getDay()+7)%7)}return 1+Math.ceil((c-a)/604800000)},getWeekStartDate:function(c,a){var b=this.setDateToMidday(c,!0);a=typeof a!=='number'?1:a;while(b.getDay()!==a){b=Sch.util.Date.add(b,Sch.util.Date.DAY,-1)}return b},getWeekEndDate:function(c,a){var b=this.setDateToMidday(c,!0);a=typeof a!=='number'?0:a;while(b.getDay()!==a){b=Sch.util.Date.add(b,Sch.util.Date.DAY,1)}return b},setDateToHours:function(a,c,b){if(c){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),b)}a.setHours(b);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},setDateToMidnight:function(b,a){return this.setDateToHours(b,a,0)},setDateToMidday:function(b,a){return this.setDateToHours(b,a,12)},isLaterDate:function(b,a){return !this.isSameDate(b,a)&&b>a},isSameDate:function(b,a){return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()},isEarlierDate:function(b,a){return !this.isSameDate(b,a)&&b<a}},1,0,0,0,0,[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.util,'Date'],0);Ext.cmd.derive('Sch.patches.TreeStore',Sch.util.Patch,{target:'Ext.data.TreeStore',minVersion:'5.1.0',overrides:{getRejectRecords:function(){return this.getModifiedRecords()},rejectChanges:function(){this.removed=this.removedNodes;this.callParent(arguments)},remove:function(a){if(a.isModel){a.remove()}else {if(a instanceof Array&&a[0].isModel){for(var b=0;b<a.length;b++){a[b].remove()}}else {this.callParent(arguments)}}}}},0,0,0,0,0,0,[Sch.patches,'TreeStore'],0);Ext.cmd.derive('Sch.patches.TreeStoreInternalIdMap',Sch.util.Patch,{target:'Ext.data.TreeStore',minVersion:'5.1.1',overrides:{registerNode:function(b,c){var a=this;if(!a.byInternalIdMap){a.byInternalIdMap={}}a.byInternalIdMap[b.internalId]=b;a.callParent(arguments)},unregisterNode:function(b,c){var a=this;if(a.byInternalIdMap){delete a.byInternalIdMap[b.internalId]}a.callParent(arguments)},updateRoot:function(){this.byInternalIdMap={};this.callParent(arguments)}}},0,0,0,0,0,0,[Sch.patches,'TreeStoreInternalIdMap'],0);Ext.cmd.derive('Gnt.data.linearizator.CycleResolvers',Ext.Base,function(a){function resolveCycleNone(){return !1}function resolveCycleByException(){Ext.Error.raise("Can't linearize dependent tasks, there's a cycle in the dependency chain!")}function resolveCycleByCuttingLinks$(f,d){var e=buildSourceTreeFromSourceSet(f,d),b={},c=function(c,e){(b[c]||(b[c]=[])).push(e)};traverseSourceTreePostOrder(e,function foldNode$(b){if(b.prevSibling){b.foldedDeps=foldDepsForNodesHorizontaly(b.prevSibling.foldedDeps,b.foldedDeps,c)}if(!b.nextSibling&&b.parentNode){b.parentNode.foldedDeps=foldDepsForNodesVerticaly(b.foldedDeps,b.parentNode.foldedDeps,c)}});cutCycles$(d.fromById,b);return !0}function buildSourceTreeFromSourceSet(d,h){var g,e=[],c={},b,f;for(b in d){if(d.hasOwnProperty(b)){f=c[b]=createRawSourceTreeNode(d[b].task,d,h);if(!d.hasOwnProperty(f.parentNode)){e.push(f)}}}for(b in c){if(c.hasOwnProperty(b)){c[b]=realizeRawSourceTreeNode$(c[b],c)}}if(e.length==1){g=e[0]}else {g={parentNode:null,prevSibling:null,nextSibling:null,children:e,foldedDeps:{}}}return g}function createRawSourceTreeNode(d,e,o){var q=Ext.Object,p=o.fromById,i={},j=d.internalId,l,m,b,c,k,h,g,f,n;l=q.getKeys(p[j]);if(l.length){i[j]=l}else {i[j]={}}m=d.parentNode&&e.hasOwnProperty(d.parentNode.internalId)&&d.parentNode.internalId;k=d.childNodes||[];g=[];for(f=0,n=k.length;f<n;f++){h=k[f].internalId;if(e.hasOwnProperty(h)){g.push(h)}}c=d.previousSibling;while(c&&!e.hasOwnProperty(c.internalId)){c=c.previousSibling}c=c&&c.internalId;b=d.nextSibling;while(b&&!e.hasOwnProperty(b.internalId)){b=b.nextSibling}b=b&&b.internalId;return {parentNode:m,prevSibling:c,nextSibling:b,children:g,foldedDeps:i}}function realizeRawSourceTreeNode$(b,d){var c,f,e=b.children;for(c=0,f=e.length;c<f;c++){e[c]=d[e[c]]}b.parentNode=(b.parentNode||b.parentNode===0)&&d[b.parentNode]||null;b.prevSibling=(b.prevSibling||b.prevSibling===0)&&d[b.prevSibling]||null;b.nextSibling=(b.nextSibling||b.nextSibling===0)&&d[b.nextSibling]||null;return b}function traverseSourceTreePostOrder(c,e){var d=c.children,b,f;for(b=0,f=d.length;b<f;b++){traverseSourceTreePostOrder(d[b],e)}e(c);return c}function foldDepsForNodesHorizontaly(f,g,h){var b=getHorizontalCrossDeps(f,g),i=b.fromAtoB,j=b.fromBtoA,d=b.fromAtoBtotal,e=b.fromBtoAtotal,c={};if(d>0&&e>0){c=d<e?i:j}collectCuts(c,h);return joinDeps(f,g,c)}function foldDepsForNodesVerticaly(d,e,f){var i=Ext.Object,c=getHorizontalCrossDeps(d,e),g=c.fromAtoB,h=c.fromBtoA,b;b=i.merge({},g,h);collectCuts(b,f);return joinDeps(d,e,b)}function getHorizontalCrossDeps(l,m){var o=Ext.Object,n=Ext.Array,f=o.getKeys(l),g=o.getKeys(m),j={},k={},h=0,i=0,c,e,d,b;for(c=0,e=f.length;c<e;++c){d=f[c];b=n.intersect(g,l[d]);if(b.length){j[d]=b;h+=b.length}}for(c=0,e=g.length;c<e;++c){d=g[c];b=n.intersect(f,m[d]);if(b.length){k[d]=b;i+=b.length}}return {fromAtoB:j,fromBtoA:k,fromAtoBtotal:h,fromBtoAtotal:i}}function collectCuts(d,g){var b,c,f,e;for(b in d){if(d.hasOwnProperty(b)){e=d[b];for(c=0,f=e.length;c<f;++c){g(b,e[c])}}}}function joinDeps(e,f,d){var h=Ext.Object,g=Ext.Array,c,b;c=h.merge({},e,f);for(b in d){if(d.hasOwnProperty(b)&&c.hasOwnProperty(b)){c[b]=g.difference(c[b],d[b])}}return c}function cutCycles$(f,d){var b,e,g,c,h;for(b in d){if(d.hasOwnProperty(b)){e=d[b];for(c=0,h=e.length;c<h;++c){g=e[c];f[b][g][0]='green'}}}return f}return {singleton:!0,'none':resolveCycleNone,'exception':resolveCycleByException,'cut':resolveCycleByCuttingLinks$}},0,0,0,0,0,0,[Gnt.data.linearizator,'CycleResolvers'],0);Ext.define('CGA.store.CycleResolvers',{override:'Gnt.data.linearizator.CycleResolvers',resolveCycleNone:function(a){$.each(a,function(b){if(a[b].color=='red'){console.log(a[b])}});return !1}});Ext.cmd.derive('Gnt.data.Linearizator',Ext.Base,function(b){var a={};function linearWalkBySpecification(c,d,a){a=resolveWalkingSpecification(a);return linearWalk([].concat(c),d,a.tasksDepsCollectingFn,a.cycleSolverFn)}function linearWalk(k,l,j,i){var g=!1,d=!0,a,c,e,h,f;a=createEmptyTasksColorMap();c=createEmptyDepsColorMap();collectTasksAndDepsIntoColorMaps$(k,j,a,c);while(d){g=!1;while(!g){g=!0;d=!1;for(e in a){if(a.hasOwnProperty(e)&&a[e].color!='green'){h=a[e].task;f=calculateTaskColor(h,c);if(f!='red'){setCalculatedTaskColor$(f,h,a,c);l(h,f,a,c);g=!1}else {d=!0}}}}if(d){d=i&&i(a,c)}}}function resolveWalkingSpecification(d){var f=getWalkingSpecificationKey(d),g,c,e;e=a[f];if(!e){g=Gnt.data.linearizator.CycleResolvers[d.cycles||'none'];c=[];d.self&&c.push(selfTasksDepsCollector$);d.ancestors&&c.push(ancestorsTasksDepsCollector$);d.descendants&&c.push(descendantsTasksDepsCollector$);d.successors&&c.push(successorsTasksDepsCollector$);c=composeTasksDepsCollectors(c);e={tasksDepsCollectingFn:c,cycleSolverFn:g};a[f]=e}return e}function getWalkingSpecificationKey(c){var d=[],a;for(a in c){if(c.hasOwnProperty(a)){d.push(a,'=',String(c[a]))}}return d.join(';')}function composeTasksDepsCollectors(a){return function(f,d,e){var c=[];Ext.Array.each(a,function(g){c=c.concat(g(f,d,e))});return c}}function collectTasksAndDepsIntoColorMaps$(e,a,c,d){Ext.Array.each(e,function(g){var f=a(g,c,d);if(f.length>0){collectTasksAndDepsIntoColorMaps$(f,a,c,d)}})}function selfTasksDepsCollector$(a,d,f){var c=[],e=a.internalId;if(!d.hasOwnProperty(e)){d[e]={task:a,color:'red'};c=[a]}return c}function ancestorsTasksDepsCollector$(n,k,f){var j=[],e=f.downFromById,l=f.downToById,m=f.upFromById,g=f.upToById,c=n.internalId,d=n.parentNode,a=d&&d.internalId,h,i;if(d&&!k.hasOwnProperty(a)){k[a]={task:d,color:'red'};j.push(d)}if(d){h=['red'];i=['red'];!e[a]&&(e[a]={});!e[a][c]&&(e[a][c]=h);!l[c]&&(l[c]=h);!g[a]&&(g[a]={});!g[a][c]&&(g[a][c]=i);!m[c]&&(m[c]=i)}return j}function descendantsTasksDepsCollector$(f,h,d){var g=[],c=d.downFromById,i=d.downToById,j=d.upFromById,e=d.upToById,k=!f.isRoot()&&f.childNodes,a=f.internalId;k&&Ext.Array.each(k,function(l){var k=l.internalId,m,n;if(!h.hasOwnProperty(k)){h[k]={task:l,color:'red'};g.push(l)}m=['red'];n=['red'];!c[a]&&(c[a]={});!c[a][k]&&(c[a][k]=m);!i[k]&&(i[k]=m);!e[a]&&(e[a]={});!e[a][k]&&(e[a][k]=n);!j[k]&&(j[k]=n)});return g}function successorsTasksDepsCollector$(h,f,g){var e=[],c=g.fromById,d=g.toById,i=h.getSuccessors(),a=h.internalId;Ext.Array.each(i,function(j){var i=j.internalId,k;if(!f.hasOwnProperty(i)){f[i]={task:j,color:'red'};e.push(j)}k=['red'];!c[a]&&(c[a]={});!c[a][i]&&(c[a][i]=k);!d[i]&&(d[i]={});!d[i][a]&&(d[i][a]=k)});return e}function createEmptyTasksColorMap(){return {}}function createEmptyDepsColorMap(){return {fromById:{},toById:{},downFromById:{},downToById:{},upFromById:{},upToById:{}}}function hasRedDepsTo(f,e){var a=e.toById[f.internalId],d=!1,c;for(c in a){if(a.hasOwnProperty(c)&&a[c]&&a[c][0]=='red'){d=!0;break}}return d}function hasRedDepsFrom(f,e){var a=e.fromById[f.internalId],d=!1,c;for(c in a){if(a.hasOwnProperty(c)&&a[c]&&a[c][0]=='red'){d=!0;break}}return d}function hasRedDepsDownTo(e,d){var a=d.downToById,c=e.internalId;return a[c]&&a[c][0]=='red'}function hasRedDepsDownFrom(f,e){var a=e.downFromById[f.internalId],d=!1,c;for(c in a){if(a.hasOwnProperty(c)&&a[c]&&a[c][0]=='red'){d=!0;break}}return d}function hasRedDepsUpTo(f,e){var a=e.upToById[f.internalId],d=!1,c;for(c in a){if(a.hasOwnProperty(c)&&a[c]&&a[c][0]=='red'){d=!0;break}}return d}function hasRedDepsUpFrom(e,d){var c=e.internalId,a=d.upToById;return a[c]&&a[c][0]=='red'}function calculateTaskColor(c,a){var d='red';if(!hasRedDepsTo(c,a)&&!hasRedDepsDownTo(c,a)&&!hasRedDepsUpTo(c,a)){d='green'}else {if(!hasRedDepsTo(c,a)&&!hasRedDepsDownTo(c,a)&&hasRedDepsDownFrom(c,a)){d='yellow'}else {d='red'}}return d}function setCalculatedTaskColor$(d,j,i,g){var f=j.internalId,e=g.fromById[f],c=g.downFromById[f],h=g.upFromById[f],a;i[f].color=d;if(d=='green'){if(e){for(a in e){if(e.hasOwnProperty(a)){e[a][0]=d}}}if(c){for(a in c){if(c.hasOwnProperty(a)){c[a][0]=d}}}if(h){h[0]=d}}else {if(d=='yellow'){if(c){for(a in c){if(c.hasOwnProperty(a)){c[a][0]=d}}}}}}return {singleton:!0,linearWalkBySpecification:linearWalkBySpecification}},0,0,0,0,0,0,[Gnt.data,'Linearizator'],0);Ext.cmd.derive('Sch.model.Customizable',Ext.data.Model,function(a){return {isCustomizableModel:!0,customizableFields:null,previous:null,__editing:null,__editCounter:0,constructor:function(){var b=Ext.data.Model.prototype.constructor.apply(this,arguments);return b},storePreviousFlex:Ext.Function.flexSetter(function(e,c){var d=this,b=d.get(e);if(b instanceof Date&&!(c instanceof Date)){c=d.getField(e).convert(c,d)}if(b instanceof Date&&b-c||!(b instanceof Date)&&b!==c){d.previous[e]=b}}),deletePreviousFlex:Ext.Function.flexSetter(function(b,c){delete this.previous[b]}),set:function(d,f){var b=this,c=!1,e=null;if(!b.previous){c=!0;b.previous={}}b.storePreviousFlex(d,f);e=Ext.data.Model.prototype.set.apply(this,arguments);if(!b.__editing){if(c){delete b.previous}else {b.deletePreviousFlex(d,f)}}return e},reject:function(){var b=this,d=b.modified||{},c;b.__editing=!0;b.previous=b.previous||{};for(c in d){if(d.hasOwnProperty(c)){if(typeof d[c]!='function'){b.previous[c]=b.get(c)}}}Ext.data.Model.prototype.reject.apply(this,arguments);delete b.previous;b.__editing=!1},beginEdit:function(){this.__editCounter++;this.__editing=!0;Ext.data.Model.prototype.beginEdit.apply(this,arguments)},cancelEdit:function(){this.__editCounter=0;this.__editing=!1;Ext.data.Model.prototype.cancelEdit.apply(this,arguments);delete this.previous},endEdit:function(c,b){if(--this.__editCounter===0){if(!c&&this.getModifiedFieldNames){var d=this.editMemento;if(!b){b=this.getModifiedFieldNames(d.data)}if(b&&b.length===0){c=!0}}Ext.data.Model.prototype.endEdit.apply(this,[c].concat(Array.prototype.slice.call(arguments,1)));this.__editing=!1;delete this.previous}}}},1,0,0,0,0,[['robo',Robo.data.Model]],[Sch.model,'Customizable'],function(a){a.$onExtended.unshift({fn:function(c,b){if(b){if(Ext.isArray(b)){c.fieldsInitialValue=b.slice()}else {if(b.fields){if(!Ext.isArray(b.fields)){c.fieldsInitialValue=[b.fields]}else {c.fieldsInitialValue=b.fields.slice()}}}}}});a.onExtended(function(b,e,f){var c=Ext.ClassManager,d=c.triggerCreated;c.triggerCreated=function(l){var g=b.prototype;if(e.customizableFields){g.allCustomizableFields=(b.superclass.allCustomizableFields||[]).concat(e.customizableFields)}else {g.allCustomizableFields=b.superclass.allCustomizableFields||[]}var i={};Ext.Array.each(g.allCustomizableFields,function(c){if(typeof c=='string'){c={name:c}}i[c.name]=c});var k=g.fields;var j=[];var h=[];Ext.Array.each(k,function(c){if(c.isCustomizableField){h.push(c.getName())}});if(g.idProperty!=='id'&&g.getField('id')){if(!g.getField('id').hasOwnProperty('name')){h.push('id')}}if(g.idProperty!=='Id'&&g.getField('Id')){if(!g.getField('Id').hasOwnProperty('name')){h.push('Id')}}b.removeFields(h);function applyFieldConfig(i,c,h){if(!c){return}if(!Ext.isArray(c)){c=[c]}var g;for(var d=c.length-1;d>=0;d--){if(c[d].name==h){g=c[d];break}}Ext.applyIf(i,g)}function getFieldConfig(d){var g=b,c=g.prototype,i=d==='Id'?'idProperty':d.charAt(0).toLowerCase()+d.substr(1)+'Field',h={name:c[i]||d,isCustomizableField:!0},j;while(c&&c.isCustomizableModel){j=c[i]||d;c.hasOwnProperty('customizableFields')&&applyFieldConfig(h,c.customizableFields,d);applyFieldConfig(h,g.fieldsInitialValue,j);c=g.superclass;g=c&&c.self}return h}h=[];Ext.Object.each(i,function(q,o){var d=o.name||o.getName();var n=d==='Id'?'idProperty':d.charAt(0).toLowerCase()+d.substr(1)+'Field';var c=g[n]||d;g.getField(c)&&h.push(c);var p=getFieldConfig(d);j.push(Ext.create('data.field.'+(p.type||'auto'),p));var m=Ext.String.capitalize(d);if(m!='Id'){var i='get'+m;var k='set'+m;if(!g[i]||g[i].__getterFor__&&g[i].__getterFor__!=c){g[i]=function(){return this.get(this[n]||c)};g[i].__getterFor__=c}if(!g[k]||g[k].__setterFor__&&g[k].__setterFor__!=c){g[k]=function(d){return this.set(this[n]||c,d)};g[k].__setterFor__=c}}});b.replaceFields(j,h);d.apply(this,arguments);c.triggerCreated=d}})});Ext.cmd.derive('Sch.model.Range',Sch.model.Customizable,{idProperty:'Id',startDateField:'StartDate',endDateField:'EndDate',nameField:'Name',clsField:'Cls',customizableFields:[{name:'StartDate',type:'date',dateFormat:'c'},{name:'EndDate',type:'date',dateFormat:'c'},{name:'Cls',type:'string'},{name:'Name',type:'string'}],setStartDate:function(c,d){var b=this.getEndDate();var a=this.getStartDate();this.beginEdit();this.set(this.startDateField,c);if(d===!0&&b&&a){this.setEndDate(Sch.util.Date.add(c,Sch.util.Date.MILLI,b-a))}this.endEdit()},setEndDate:function(c,d){var a=this.getStartDate();var b=this.getEndDate();this.beginEdit();this.set(this.endDateField,c);if(d===!0&&a&&b){this.setStartDate(Sch.util.Date.add(c,Sch.util.Date.MILLI,-(b-a)))}this.endEdit()},setStartEndDate:function(a,b){this.beginEdit();this.set(this.startDateField,a);this.set(this.endDateField,b);this.endEdit()},getDates:function(){var b=[],c=this.getEndDate();for(var a=Ext.Date.clearTime(this.getStartDate(),!0);a<c;a=Sch.util.Date.add(a,Sch.util.Date.DAY,1)){b.push(a)}return b},forEachDate:function(b,a){return Ext.Array.each(this.getDates(),b,a)},isScheduled:function(){var a=this;return Boolean(a.getStartDate()&&a.getEndDate()&&a.areDatesValid())},isValid:function(){var d=this,a=Sch.model.Customizable.prototype.isValid.call(this),b,c;if(a){b=d.getStartDate(),c=d.getEndDate();a=!b||!c||c-b>=0}return a},areDatesValid:function(){var c=this,a=c.getStartDate(),b=c.getEndDate();return !a||!b||b-a>=0},shift:function(b,a){this.setStartEndDate(Sch.util.Date.add(this.getStartDate(),b,a),Sch.util.Date.add(this.getEndDate(),b,a))},fullCopy:function(){return this.copy.apply(this,arguments)},intersectsRange:function(c,d){var a=this.getStartDate();var b=this.getEndDate();return a&&b&&Sch.util.Date.intersectSpans(a,b,c,d)}},0,0,0,0,0,0,[Sch.model,'Range'],0);Ext.cmd.derive('Gnt.model.mixin.ProjectableModel',Ext.Base,function(){function initProjectable(){}function getUnprojected(a){return this.data[a]}function isProjected(){var a=this,b=a.getTreeStore&&a.getTreeStore()||a.store,c=b&&b.getProjection&&b.getProjection();return c&&c.hasOwnProperty(a.internalId)?!0:!1}var a={record:null,projection:null,result:null};var b=Ext.Function.flexSetter(function(e,d){var m=this,f=a.record,i=a.projection,l=a.result,h=f.internalId,b=f.get(e),j=f.previousValues,c,g,k;c=d!==undefined&&d!==null?d.valueOf():d;g=b!==undefined&&b!==null?b.valueOf():b;if((c===undefined||c===null)&&c!==g||c!=g){k=i[h]=i.hasOwnProperty(h)&&i[h]||{};k[e]=d;(j||(f.previousValues=j={}))[e]=b;l.push(e)}});function makeOverridables(){var c={};c.get=function get(b){var a=this,e=a.getTreeStore&&a.getTreeStore()||a.store,d=e&&e.getProjection&&e.getProjection(),g=a.internalId,f,c;if(d&&d.hasOwnProperty(g)){f=d[g];if(b in f){c=f[b]}else {c=a.callParent([b])}}else {c=a.callParent([b])}return c};c.set=function set(g,h,j){var c=this,e=c.getTreeStore&&c.getTreeStore()||c.store,f=e&&e.getProjection&&e.getProjection(),i=c.internalId,d;if(f){a.record=c;a.projection=f;a.result=[];b(g,h);d=a.result;a.record=null;a.result=null;a.projection=null}else {d=c.callParent(arguments)}return d};return c}return {initProjectable:initProjectable,getUnprojected:getUnprojected,isProjected:isProjected,onClassMixedIn:function(a){Ext.override(a,makeOverridables())}}},0,0,0,0,0,0,[Gnt.model.mixin,'ProjectableModel'],0);Ext.cmd.derive('Gnt.model.task.More',Ext.Base,{propagating:!1,indent:function(a){var b=this,d=b.previousSibling,c;if(d){var e=b.getTaskStore();e.beginIndent();b.propagateChanges(function(){return b.indentWithoutPropagation(function(b){c=b})},function(b,f){if(b){c&&c()}else {d.expand()}e.endIndent();a&&a(b,f)})}else {a&&a(!1,{})}},indentWithoutPropagation:function(f){var a=this,b=a.previousSibling,c,g,e,d,h;h={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling};c=a.parentNode;g=c.indexOf(a);e=b.get('leaf');if(e){d=b.getSegments();b.markAsParent()}b.appendChild(a);if(a.getParentsIncomingDependencies().length){a.alignByIncomingDependenciesWithoutPropagation()}a.removeContext=h;f&&f(function(){c.insertChild(g,a);if(e){b.set('leaf',!0);d&&b.setSegmentsWithoutPropagation(d)}});return a},outdent:function(a){var b=this,d=b.parentNode,c;if(d&&!d.isRoot()){var e=b.getTaskStore();e.beginIndent();b.propagateChanges(function(){return b.outdentWithoutPropagation(function(b){c=b})},function(b,d){b&&c&&c();e.endIndent();a&&a(b,d)})}else {a&&a(!1,{})}},outdentWithoutPropagation:function(c){var a=this,b,d,e;e={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling};b=a.parentNode;d=b.indexOf(a);if(b.nextSibling){b.parentNode.insertBefore(a,b.nextSibling)}else {b.parentNode.appendChild(a)}a.removeContext=e;c&&c(function(){b.insertChild(d,a)});return b},removeInvalidDependencies:function(){var c=this.getDependencyStore(),b=this.getAllDependencies();for(var a=0;a<b.length;a++){if(!b[a].isValid()){c.remove(b[a])}}},removeDependenciesToParents:function(b){var a=this,c=a.getSuccessors().concat(a.getPredecessors());b.bubble(function(d){if(Ext.Array.indexOf(c,d)>=0){a.removeLinkToTask(d)}})},hasDependencies:function(){return this.hasIncomingDependencies()||this.hasOutgoingDependencies()},getAllDependencies:function(){return this.predecessors.concat(this.successors)},hasIncomingDependencies:function(){return this.predecessors.length>0},hasOutgoingDependencies:function(){return this.successors.length>0},getIncomingDependencies:function(a){return a?this.predecessors:this.predecessors.slice()},getParentsIncomingDependencies:function(d){var a=this.parentNode,c=[],b;while(a){if(d){b=Ext.Array.filter(a.getIncomingDependencies(),function(b){var a=b.getSourceTask();return a&&a.isAncestor(d)})}else {b=a.getIncomingDependencies()}c=c.concat(b);a=a.parentNode}return c},getOutgoingDependencies:function(a){return a?this.successors:this.successors.slice()},alignByIncomingDependencies:function(b,a,c){var d=this.alignByIncomingDependenciesWithoutPropagation(b,a);this.propagateChanges(null,c,!0);return d},alignByIncomingDependenciesWithoutPropagation:function(a,b,g){if(this.isManuallyScheduled()||this.isReadOnly()){return !1}var e=!1;a=a||this.getTaskStore();var c=this.getIncomingDependenciesConstraintContext(a,g);if(c){var d=c.startDate;var f=c.endDate;if(d&&d-this.getStartDate()!==0){b&&b.addAffected(this);this.setStartDateWithoutPropagation(d,!0,a.skipWeekendsDuringDragDrop);e=!0}else {if(f&&f-this.getEndDate()!==0){b&&b.addAffected(this);this.setEndDateWithoutPropagation(f,!0,a.skipWeekendsDuringDragDrop);e=!0}}}return e},getDependencyCalendar:function(d,b,c){if(!b){b=(c||this.getTaskStore()).dependenciesCalendar}var e=this.getProjectCalendar(),g=d.getSourceTask(c),f=d.getTargetTask(c),a;switch(b){case 'project':a=e;break;case 'source':a=g.getCalendar();break;case 'target':a=f.getCalendar();break;default:throw 'Unsupported value for `dependenciesCalendar` config option';}return a},getIncomingDependenciesConstraintContext:function(g,h){var l=this,i=this.getIncomingDependencies(!0).concat(this.getParentsIncomingDependencies(h));if(!i.length||this.isUnscheduled()){return null}var e=Gnt.model.Dependency.Type,b=new Date(0),c=new Date(0),f,d;var k=(g||this.getTaskStore()).dependenciesCalendar;Ext.Array.each(i,function(m){var j=m.getSourceTask(g);if(j&&(!h||j.isAncestor(h))){var n=l.getDependencyCalendar(m,k,g);var p=m.getLag()||0,o=m.getLagUnit(),a=j.getStartDate(),i=j.getEndDate();switch(m.getType()){case e.StartToEnd:if(a){a=n.skipWorkingTime(a,p,o);if(c<a){c=a;d=j}};break;case e.StartToStart:if(a){a=n.skipWorkingTime(a,p,o);if(b<a){b=a;f=j}};break;case e.EndToStart:if(i){i=n.skipWorkingTime(i,p,o);if(b<i){b=i;f=j}};break;case e.EndToEnd:if(i){i=n.skipWorkingTime(i,p,o);if(c<i){c=i;d=j}};break;default:throw 'Invalid dependency type: '+m.getType();}}});var a={startDate:b>0?b:null,endDate:c>0?c:null,constrainingTask:f||d};if(a.startDate&&a.endDate){var j=this.calculateStartDate(a.endDate,this.getDuration());if(j>b){a.startDate=j;a.constrainingTask=d}a.endDate=null}if(a.startDate){a.startDate=this.skipNonWorkingTime(a.startDate)}if(a.endDate){a.endDate=this.skipNonWorkingTime(a.endDate,!1)}return a.constrainingTask&&a},getCriticalPaths:function(){var e=[this],a=this.getIncomingDependenciesConstraintContext(),b=this;while(a){var c=a.startDate;var d=a.endDate;if(c&&c-b.getStartDate()>=0||d&&d-b.getEndDate()>=0){b=a.constrainingTask;e.push(b);a=b.getIncomingDependenciesConstraintContext()}else {a=null}}return e},addSubtask:function(e,c){var d=this,b,a;d.propagateChanges(function(){return d.addSubtaskWithoutPropagation(e,function cancelAndResultFeedback(f,d){a=f;b=d})},function onPropagationComplete(b,d){b&&a&&a();c&&c(b,d)});return b},addSubtaskWithoutPropagation:function(c,g){var a=this,b,h,e,d,f;b=c.parentNode;h=b&&b.indexOf(a);d=a.get('leaf');if(d){a.markAsParent();f=a.getSegments()}c=a.appendChild(c);a.expand();g&&g(function(){if(b){b.insertChild(h,c)}else {a.removeChild(c)}d&&a.set('leaf',!0);d&&f&&a.setSegmentsWithoutPropagation(f)},c);if(!b){e=c}else {if(a!==b&&a.getTaskStore(!0)===b.getTaskStore(!0)){e=[c,b]}}return e},insertSubtask:function(f,e,c){var d=this,b,a;d.propagateChanges(function(){return d.insertSubtaskWithoutPropagation(f,e,function cancelAndResultFeedback(g,d){a=g;b=d})},function onPropagationComplete(b,d){b&&a&&a();c&&c(b,d)});return b},insertSubtaskWithoutPropagation:function(i,c,g){var a=this,b,h,e,d,f;b=c.parentNode;h=b&&b.indexOf(a);d=a.get('leaf');if(d){a.markAsParent();f=a.getSegments()}c=a.insertChild(i,c);a.expand();g&&g(function(){if(b){b.insertChild(h,c)}else {a.removeChild(c)}d&&a.set('leaf',!0);d&&f&&a.setSegmentsWithoutPropagation(f)},c);if(!b){e=c}else {if(a!==b&&a.getTaskStore(!0)===b.getTaskStore(!0)){e=[c,b]}}return e},removeSubtask:function(d,a){var c=this,b;if(c.indexOf(d)!==-1){c.propagateChanges(function(){return c.removeSubtaskWithoutPropagation(d,function cancelFeedback(c){b=c})},function onPropagationComplete(c,e){c&&b&&b();a&&a(c,e)})}else {a&&a(!1,{})}},removeSubtaskWithoutPropagation:function(h,m){var g=this,n=g.indexOf(h),i,d,c,b,e,j,k,a,f,l;d=g.getDependencyStore();c=g.getAssignmentStore();b=h.getAllDependencies();e=c&&h.getAssignments();i=[];j=[];k=[];h.cascadeBy(function(a){i.push(a)});for(a=0,f=i.length;(d||c)&&a<f;a++){l=i[a];d&&(b=b.concat(l.getAllDependencies()));c&&(e=e.concat(l.getAssignments()))}b=d&&Ext.Array.unique(b);b=d&&Ext.Array.sort(b,function(a,b){return d.indexOf(a)<d.indexOf(b)?-1:1});for(a=0,f=b&&b.length;d&&a<f;a++){j.push(d.indexOf(b[a]))}e=c&&Ext.Array.sort(e,function(a,b){return c.indexOf(a)<c.indexOf(b)?-1:1});for(a=0,f=e&&e.length;c&&a<f;a++){k.push(c.indexOf(e[a]))}h=g.removeChild(h);c&&c.remove(e);d&&d.remove(b);if(g.childNodes.length===0&&g.convertEmptyParentToLeaf){g.set('leaf',!0)}m&&m(function(){g.insertChild(n,h);for(a=0,f=e&&e.length;c&&a<f;a++){c.insert(k[a],e[a])}for(a=0,f=b&&b.length;d&&a<f;a++){d.insert(j[a],b[a])}});return g},addSuccessor:function(e,c){var d=this,b,a;d.propagateChanges(function(){return d.addSuccessorWithoutPropagation(e,function cancelAndResultFeedback(f,d){a=f;b=d})},function onPropagationComplete(b,d){b&&a&&a();c&&c(b,d)});return b},addSuccessorWithoutPropagation:function(a,c){var b=this,f=b.parentNode,g=f.indexOf(b),d,e;a=a||new b.self();a.calendar=a.calendar||b.getCalendar();a.taskStore=a.taskStore||b.getTaskStore(!0);if(b.getEndDate()){a.beginEdit();a.set(b.startDateField,b.getEndDate());a.set(b.endDateField,a.calculateEndDate(b.getEndDate(),1,Sch.util.Date.DAY));a.set(b.durationField,1);a.set(b.durationUnitField,Sch.util.Date.DAY);a.endEdit()}f.insertSubtaskWithoutPropagation(g+1,a,function(e,b){d=e;a=b});b.linkToWithoutPropagation(a,Gnt.model.Dependency.Type.EndToStart,function(b){e=b});c&&c(function(){e();d()},a);return b},addMilestone:function(a,d){var b=this,c=b.getEndDate();if(!a){a=new b.self()}else {if(Ext.isObject(a)&&!(a instanceof Gnt.model.Task)){a=new b.self(a)}}if(c&&!a.isMilestone()){a.calendar=a.calendar||b.getCalendar();a.setStartEndDate(c,c)}return b.addTaskBelow(a,d)},addPredecessor:function(e,b){var d=this,a,c;d.propagateChanges(function(){return d.addPredecessorWithoutPropagation(e,function cancelAndResultFeedback(f,d){c=f;a=d})},function onPropagationComplete(a,d){a&&c();b&&b(a,d)});return a},addPredecessorWithoutPropagation:function(a,c){var b=this,f=b.parentNode,g=f.indexOf(b),d,e;a=a||new b.self();a.calendar=a.calendar||b.getCalendar();a.taskStore=a.taskStore||b.getTaskStore(!0);if(b.getStartDate()){a.beginEdit();a.set(b.startDateField,a.calculateStartDate(b.getStartDate(),1,Sch.util.Date.DAY));a.set(b.endDateField,b.getStartDate());a.set(b.durationField,1);a.set(b.durationUnitField,Sch.util.Date.DAY);a.endEdit()}f.insertSubtaskWithoutPropagation(g,a,function(e,b){d=e;a=b});a.linkToWithoutPropagation(b,Gnt.model.Dependency.Type.EndToStart,function(b){e=b});c&&c(function(){e();d()},a);return a},getSuccessors:function(){var b=this.successors,d=[];for(var a=0,e=b.length;a<e;a++){var c=b[a].getTargetTask();if(c){d.push(c)}}return d},getPredecessors:function(){var b=this.predecessors,d=[];for(var a=0,e=b.length;a<e;a++){var c=b[a].getSourceTask();if(c){d.push(c)}}return d},addTaskAbove:function(b,e){var a=this,d=a.parentNode,g=d.indexOf(a),c,f;b=b||new a.self();a.propagateChanges(function(){return d.insertSubtaskWithoutPropagation(g,b,function cancelAndResultFeedback(d,a){f=d;c=a})},function onPropagationComplete(a,c){a&&f();e&&e(a,c)});return c},addTaskBelow:function(b,e){var a=this,d=a.parentNode,g=d.indexOf(a)+1,c,f;b=b||new a.self();a.propagateChanges(function(){return d.insertSubtaskWithoutPropagation(g,b,function cancelAndResultFeedback(d,a){f=d;c=a})},function onPropagationComplete(a,c){a&&f();e&&e(a,c)});return c},isAbove:function(a){var d=this,c=Math.min(d.data.depth,a.data.depth);var b=this;while(b.data.depth>c){b=b.parentNode;if(b==a){return !1}}while(a.data.depth>c){a=a.parentNode;if(a==d){return !0}}while(a.parentNode!==b.parentNode){a=a.parentNode;b=b.parentNode}return a.data.index>b.data.index},cascadeChildren:function(e,c){var f=this;if(f.isLeaf()){return}var b=this.childNodes;for(var a=0,d=b.length;a<d;a++){b[a].cascadeBy(e,c)}},getSlack:function(a){a=a||Sch.util.Date.DAY;var b=this.getEarlyStartDate(),c=this.getLateStartDate();if(!b||!c){return null}return this.getCalendar().calculateDuration(b,c,a)},getEarlyStartDate:function(){var d=this.getTaskStore(!0);if(!d){return this.getStartDate()}var e=this.internalId;if(d.earlyStartDates[e]){return d.earlyStartDates[e]}var a,b=0,c,i;if(this.childNodes.length){for(c=0,i=this.childNodes.length;c<i;c++){a=this.childNodes[c].getEarlyStartDate();if(a<b||!b){b=a}}d.earlyStartDates[e]=b;return b}if(this.isManuallyScheduled()){b=d.earlyStartDates[e]=this.getStartDate();return b}var k=this.getIncomingDependencies(!0);if(!k.length){b=d.earlyStartDates[e]=this.getStartDate();return b}var h=Gnt.model.Dependency.Type,j=this.getCalendar();for(c=0,i=k.length;c<i;c++){var f=k[c],g=f.getSourceTask(),m=this.getDependencyCalendar(f);if(g){switch(f.getType()){case h.StartToStart:a=g.getEarlyStartDate();break;case h.StartToEnd:a=g.getEarlyStartDate();a=j.calculateStartDate(a,this.getDuration(),this.getDurationUnit());break;case h.EndToStart:a=g.getEarlyEndDate();break;case h.EndToEnd:a=g.getEarlyEndDate();a=j.calculateStartDate(a,this.getDuration(),this.getDurationUnit());break;}var l=f.getLag();if(a&&l){a=m.skipWorkingTime(a,l,f.getLagUnit())}if(a){a=j.skipNonWorkingTime(a,!0)}}if(a>b){b=a}}d.earlyStartDates[e]=b;return b},getEarlyEndDate:function(){var b=this.getTaskStore(!0);if(!b){return this.getEndDate()}var c=this.internalId;if(b.earlyEndDates[c]){return b.earlyEndDates[c]}var a=0;if(this.childNodes.length){var e,d,g;for(d=0,g=this.childNodes.length;d<g;d++){e=this.childNodes[d].getEarlyEndDate();if(e>a){a=e}}b.earlyEndDates[c]=a;return a}if(this.isManuallyScheduled()){a=b.earlyEndDates[c]=this.getEndDate();return a}var f=this.getEarlyStartDate();if(!f){return null}a=b.earlyEndDates[c]=this.getCalendar().calculateEndDate(f,this.getDuration(),this.getDurationUnit());return a},getLateEndDate:function(){var c=this.getTaskStore(!0);if(!c){return this.getEndDate()}var e=this.internalId;if(c.lateEndDates[e]){return c.lateEndDates[e]}var a,b=0,d,i;if(this.childNodes.length){for(d=0,i=this.childNodes.length;d<i;d++){a=this.childNodes[d].getLateEndDate();if(a>b){b=a}}c.lateEndDates[e]=b;return b}if(this.isManuallyScheduled()){b=c.lateEndDates[e]=this.getEndDate();return b}var k=this.getOutgoingDependencies(!0);if(!k.length){b=c.lateEndDates[e]=c.getProjectEndDate();return b}var h=Gnt.model.Dependency.Type,j=this.getCalendar();for(d=0,i=k.length;d<i;d++){var f=k[d],g=f.getTargetTask(),m=this.getDependencyCalendar(f);if(g){switch(f.getType()){case h.StartToStart:a=g.getLateStartDate();a=j.calculateEndDate(a,this.getDuration(),this.getDurationUnit());break;case h.StartToEnd:a=g.getLateEndDate();a=j.calculateEndDate(a,this.getDuration(),this.getDurationUnit());break;case h.EndToStart:a=g.getLateStartDate();break;case h.EndToEnd:a=g.getLateEndDate();break;}var l=f.getLag();if(l){a=m.skipWorkingTime(a,-l,f.getLagUnit())}a=j.skipNonWorkingTime(a,!1);if(a<b||!b){b=a}}}c.lateEndDates[e]=b||c.getProjectEndDate();return c.lateEndDates[e]},getLateStartDate:function(){var b=this.getTaskStore(!0);if(!b){return this.getStartDate()}var c=this.internalId;if(b.lateStartDates[c]){return b.lateStartDates[c]}var a;if(this.childNodes.length){var e,d,g;for(d=0,g=this.childNodes.length;d<g;d++){e=this.childNodes[d].getLateStartDate();if(e<a||!a){a=e}}b.lateStartDates[c]=a;return a}if(this.isManuallyScheduled()){a=b.lateStartDates[c]=this.getStartDate();return a}var f=this.getLateEndDate();if(!f){return null}a=b.lateStartDates[c]=this.getCalendar().calculateStartDate(f,this.getDuration(),this.getDurationUnit());return a},getTopParent:function(e){var d=this.getTaskStore().getRoot(),a=this,c=[this],b;while(a){if(a===d){return e?c:b}c.push(a);b=a;a=a.parentNode}},getInDepthWalker:function(e){var b=e?this:this.childNodes&&this.childNodes[0];var c=this;var a={};var d=function(g){var b=g;var f=b.internalId;if(b.isLeaf()||!b.childNodes.length){b=b.nextSibling}else {if(a[f]===!0){a[f]=!1;b=b.nextSibling}else {a[f]=!0;b=b.childNodes[0]}}if(!b){b=g;do{if(b===c){return null}b=b.parentNode;if(b===c){return null}}while(a[b.internalId]===!1);return d(b)}return b};return function(){var a=b;if(b){b=d(b)}return a}},propagateChanges:function(f,d,g){var b=this,c,e,a,h;a=b.getTaskStore(!0);g=arguments.length==3?g:a&&a.cascadeChanges;if(!b.propagating&&a){b.propagating=!0;e={};a.suspendAutoSync();h=a.startBatchCascade();a.startProjection();try{c=f&&f!==Ext.emptyFn?f(b):[b]}catch(i){a.rejectProjection();a.endBatchCascade();a.resumeAutoSync(a.autoSync);b.propagating=!1;throw i}if(c===!0){c=b.isProjected()&&[b]||!1}else {if(c){c=[].concat(c)}}if(c){b.propagateChangesThroughDependentTasks(a.getLinearWalkingSequenceForDependentTasks(c,{self:!0,ancestors:a.recalculateParents,descendants:a.moveParentAsGroup,successors:g,cycles:a.cycleResolutionStrategy}),a,h,c,g,e,function propagateChangesThroughDependentTasksCallback(e,c){if(e){a.rejectProjection();c={}}else {a.commitProjection()}a.endBatchCascade();b.propagating=!1;d&&d(e,c);a.resumeAutoSync(a.autoSync&&!e&&!Ext.Object.isEmpty(c))})}else {a.rejectProjection();a.endBatchCascade();b.propagating=!1;d&&d(!1,{});a.resumeAutoSync(a.autoSync)}}else {if(!b.propagating){b.propagating=!0;try{f&&f(b)}catch(j){b.propagating=!1;throw j}b.verifyConstraint(function(c,a){e={};a=!!a;if(!a){e[b.getId()]=b}b.propagating=!1;d&&d(a,e)})}else {d&&d(!0,{})}}},propagateChangesThroughDependentTasks:function(b,i,h,g,f,l,j,d){var k=this,a,e,c;d=d||0;c=!0;for(a=d,e=b.length;c&&a<e;++a){c=k.processTaskConstraints(b,a,i,h,g,f,l,function(c,n,a,m){if(a||c==e-1){j(a,m)}else {if(!n){k.propagateChangesThroughDependentTasks(b,i,h,g,f,m,j,c+1)}}})}},processTaskConstraints:function(m,o,b,w,k,u,e,r){var x=this,t=m[o],a=t[0],d=t[1],g=a.hasChildNodes(),s=!g,f=!(a.isManuallyScheduled()||a.isReadOnly()||Ext.Array.contains(k,a)),q=u||b.cascadeChanges,v=b.recalculateParents,p=b.moveParentAsGroup,c=a.parentNode,i=c&&c.getStartDate(),h=c&&c.getUnprojected(c.startDateField),n=c&&i-h,j;function areIncomingDependenciesAffectedOrPropagationSourcesIncoming(l,j,i){var f=l.getIncomingDependencies(!0),d=!1,c,h,g,a;for(c=0,h=f.length;!d&&c<h;++c){g=f[c];a=g.getSourceTask();d=a&&j.hasOwnProperty(a.getId())||Ext.Array.contains(i,a)}return d}switch(!0){case f&&s&&d=='green'&&n&&p:case f&&g&&d=='yellow'&&n&&p:if(i){var l=a.getStartDate();if(l>=h){j=a.calculateDuration(h,l,null,{segments:!1});a.setStartDateWithoutPropagation(a.calculateEndDate(i,j,null,{segments:!1}),!0,b.skipWeekendsDuringDragDrop)}else {j=a.calculateDuration(l,h,null,{segments:!1});a.setStartDateWithoutPropagation(a.calculateStartDate(i,j,null,{segments:!1}),!0,b.skipWeekendsDuringDragDrop)}areIncomingDependenciesAffectedOrPropagationSourcesIncoming(a,e,k)&&a.alignByIncomingDependenciesWithoutPropagation(b,null,c)};break;case f&&s&&d=='green'&&q:case f&&g&&d=='yellow'&&q:areIncomingDependenciesAffectedOrPropagationSourcesIncoming(a,e,k)&&a.alignByIncomingDependenciesWithoutPropagation(b,null);break;case g&&d=='green'&&v:a.refreshCalculatedParentNodeData();break;}if(a.isProjected()){w.addAffected(a);e[a.getId()]=a}return a.verifyConstraint(function(c,h){var j,i;if(!c&&g&&f&&b.recalculateParents&&d=='green'){j=Ext.Array.findBy(m,function(d,j){var g=d[0],f=d[1];i=j;return a===g&&f=='yellow'});r(i,c,!!h,e)}else {r(o,c,!!h,e)}})},removeLinkToTask:function(d){var c=this.getDependencyStore();var a=this.getId();var b=d.getId();Ext.Array.each(this.getAllDependencies(),function(e){if(e.getSourceId()===a&&e.getTargetId()===b||e.getSourceId()===b&&e.getTargetId()===a){c.remove(e);return !1}})},convertEmptyParentToLeafTask:function(){this.beginEdit();this.set('leaf',!0);this.setDurationWithoutPropagation(1,Sch.util.Date.DAY);this.endEdit()},hasEndPredecessorsButNoStartPredecessors:function(){var a=this.getIncomingDependencies();var b=a.length>0;var c=Gnt.model.Dependency.Type;Ext.Array.each(a,function(a){if(a.getType()===c.StartToStart||a.getType()===c.EndToStart){return b=!1}});return b},isCompleted:function(){return this.getPercentDone()>=100},autoCalculateLag:function(){var a=this.getDependencyStore();if(!a||!a.autoCalculateLag||!this.hasIncomingDependencies()){return}var c=this.getIncomingDependencies();for(var b=0;b<c.length;b++){a.updateAutoCalculatedLag(c[b])}}},0,0,0,0,0,0,[Gnt.model.task,'More'],0);Ext.cmd.derive('Gnt.constraint.Base',Ext.Base,{isSatisfied:function(c,b,a){throw 'Abstract method'},getResolution:function(e,b,a){var f=this,c=!1;a=a||b.getConstraintDate();var d=function(){if(!c){c=!0;e.apply(this,arguments)}};return {title:f.L('name'),task:b,date:a,resolutions:this.getResolutionOptions(d,b,a),getCancelActionOption:function(){return this.resolutions[0]},cancelAction:function(){return this.getCancelActionOption().resolve()},proceedAction:function(){d()},getResolution:function(c){return Ext.Array.findBy(this.resolutions,function(d){return d.id==c})}}},getResolutionOptions:function(d,a,e,f){e=e||a.getConstraintDate();var b=this;var c=[{id:'cancel',title:b.L('Cancel the change and do nothing'),resolve:function(){d(!0)}}];b.hasThisConstraintApplied(a)&&c.push({id:'remove-constraint',title:b.L('Remove the constraint'),resolve:function(){a.setConstraintType('');d()}});return c},hasThisConstraintApplied:function(a){return a.getConstraintClass()===this},getInitialConstraintDate:function(a){return a.getConstraintDate()},getDisplayableConstraintDateForFormat:function(a,b,c){return a},adjustConstraintDateFromDisplayableWithFormat:function(a,b,c){return a},shiftToNearestValidConstraintDate:function(a,b,c){return a},statics:{getConstraintClass:function(a){var b=!Ext.isEmpty(a)&&Ext.ClassManager.getByAlias('gntconstraint.'+a);return b||null}}},0,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.constraint,'Base'],0);Ext.cmd.derive('Gnt.constraint.StartNoEarlierThan',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a,d){var b=c.getStartDate();a=a||c.getConstraintDate();return !a||!b||Sch.util.Date.compareWithPrecision(b,a,d)!==-1},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to start at {0}'),resolve:function(){c.setStartDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getStartDate()}},0,0,0,0,['gntconstraint.startnoearlierthan'],0,[Gnt.constraint,'StartNoEarlierThan'],0);Ext.cmd.derive('Gnt.constraint.StartNoLaterThan',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a,d){var b=c.getStartDate();a=a||c.getConstraintDate();return !a||!b||Sch.util.Date.compareWithPrecision(b,a,d)!==1},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to start at {0}'),resolve:function(){c.setStartDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getStartDate()}},0,0,0,0,['gntconstraint.startnolaterthan'],0,[Gnt.constraint,'StartNoLaterThan'],0);Ext.cmd.derive('Gnt.constraint.FinishNoEarlierThan',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a){var b=c.getEndDate();a=a||c.getConstraintDate();return !a||!b||b>=a},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to finish on {0}'),resolve:function(){c.setEndDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getEndDate()},getDisplayableConstraintDateForFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,-1)}return a},adjustConstraintDateFromDisplayableWithFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,1)}return a}},0,0,0,0,['gntconstraint.finishnoearlierthan'],0,[Gnt.constraint,'FinishNoEarlierThan'],0);Ext.cmd.derive('Gnt.constraint.FinishNoLaterThan',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a,d){var b=c.getEndDate();a=a||c.getConstraintDate();return !a||!b||Sch.util.Date.compareWithPrecision(b,a,d)!==1},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to finish on {0}'),resolve:function(){c.setEndDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getEndDate()},getDisplayableConstraintDateForFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,-1)}return a},adjustConstraintDateFromDisplayableWithFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,1)}return a}},0,0,0,0,['gntconstraint.finishnolaterthan'],0,[Gnt.constraint,'FinishNoLaterThan'],0);Ext.cmd.derive('Gnt.constraint.MustStartOn',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a,d){var b=c.getStartDate();a=a||c.getConstraintDate();return !a||!b||Sch.util.Date.compareWithPrecision(b,a,d)===0},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to start at {0}'),resolve:function(){c.setStartDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getStartDate()}},0,0,0,0,['gntconstraint.muststarton'],0,[Gnt.constraint,'MustStartOn'],0);Ext.cmd.derive('Gnt.constraint.MustFinishOn',Gnt.constraint.Base,{singleton:!0,isSatisfied:function(c,a,d){var b=c.getEndDate();a=a||c.getConstraintDate();return !a||!b||Sch.util.Date.compareWithPrecision(b,a,d)===0},getResolutionOptions:function(e,c,a,f){var d=this,b=d.callParent(arguments);a=a||c.getConstraintDate();b.push({id:'move-task',title:d.L('Move the task to finish on {0}'),resolve:function(){c.setEndDateWithoutPropagation(a,!0);e()}});return b},getInitialConstraintDate:function(a){return a.getEndDate()},getDisplayableConstraintDateForFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,-1)}return a},adjustConstraintDateFromDisplayableWithFormat:function(a,b,c){if(a&&!Ext.Date.formatContainsHourInfo(b)&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.DAY,1)}return a}},0,0,0,0,['gntconstraint.mustfinishon'],0,[Gnt.constraint,'MustFinishOn'],0);Ext.cmd.derive('Gnt.model.task.Constraints',Ext.Base,{setConstraint:function(b,d,a){var c=this;function changer(){return c.setConstraintWithoutPropagation(b,d)}if(b){c.propagateChanges(changer,a)}else {changer();a&&a(!1,{})}},setConstraintWithoutPropagation:function(d,c){var a=this,b;if(d){b=Gnt.constraint.Base.getConstraintClass(d)}if(!c&&b){c=b.getInitialConstraintDate(a)}a.beginEdit();a.set(a.constraintTypeField,d||'');a.set(a.constraintDateField,c);a.endEdit();return !0},setConstraintType:function(b,a){this.setConstraint(b,this.getConstraintDate(),a)},setConstraintTypeWithoutPropagation:function(b,a){this.setConstraintWithoutPropagation(b,this.getConstraintDate(),a)},setConstraintDate:function(b,a){this.setConstraint(this.getConstraintType(),b,a)},setConstraintDateWithoutPropagation:function(a){this.setConstraintWithoutPropagation(this.getConstraintType(),a)},hasConstraint:function(){return !!this.getConstraintType()},getConstraintClass:function(){return Gnt.constraint.Base.getConstraintClass(this.getConstraintType())},isConstraintSatisfied:function(){var a=this;return !a.hasConstraint()||a.getConstraintClass().isSatisfied(a,a.getConstraintDate())},verifyConstraint:function(a){var d=this,c,g,e,b,f;b=d.isConstraintSatisfied();a=a&&Ext.Function.pass(a,[b]);c=d.getTaskStore(!0);f=c&&c.hasListener('constraintconflict');g=c&&c.constraintDatePrecision||Sch.util.Date.DAY;e=!b&&d.getConstraintClass().getResolution(a,d,null,g);if(!b&&f){c.fireEvent('constraintconflict',d,e)}else {if(!b){e.cancelAction()}else {if(a){a(!1)}}}return b},getWorkingTimeStartForDate:function(d){var e=this,c=!1,a,b;a=Ext.Date.clearTime(d,!0);b=Sch.util.Date.add(a,Sch.util.Date.DAY,1);e.forEachAvailabilityInterval({isForward:!0,startDate:a,endDate:b,segments:!1,resources:!0,fn:function(a,b){c=new Date(a);return !1}});return c},getWorkingTimeEndForDate:function(d){var e=this,c=!1,a,b;a=Ext.Date.clearTime(d,!0);b=Sch.util.Date.add(a,Sch.util.Date.DAY,1);e.forEachAvailabilityInterval({isForward:!1,startDate:a,endDate:b,segments:!1,resources:!0,fn:function(b,a){c=new Date(a);return !1}});return c},getNearestWorkingTimeStartForDate:function(b,c,d){var f=this,e,a;c=c||!1;d=d||365;e=c?-1:1;a=f.getWorkingTimeStartForDate(b);while(!a&&d--){b=Sch.util.Date.add(b,Sch.util.Date.DAY,e);a=f.getWorkingTimeStartForDate(b)}return a},getNearestWorkingTimeEndForDate:function(b,c,d){var f=this,e,a;c=c||!1;d=d||365;e=c?-1:1;a=f.getWorkingTimeEndForDate(b);while(!a&&d--){b=Sch.util.Date.add(b,Sch.util.Date.DAY,e);a=f.getWorkingTimeEndForDate(b)}return a},getWorkingTimeIntervalForDateTime:function(a){var e=this,c=!1,b,d;b=Ext.Date.clearTime(a,!0);d=Sch.util.Date.add(b,Sch.util.Date.DAY,1);a=a.valueOf();e.forEachAvailabilityInterval({isForward:!0,startDate:b,endDate:d,segments:!1,resources:!0,fn:function(b,d){if(b<=a&&a<=d){c={startDate:new Date(b),endDate:new Date(d)}}return !c}});return c},isDateTimeWithinWorkingTimeInterval:function(a){var b=this;return b.getWorkingTimeIntervalForDateTime(a)!==!1}},0,0,0,0,0,0,[Gnt.model.task,'Constraints'],0);Ext.cmd.derive('Gnt.model.task.Splittable',Ext.Base,{segmentsTrackingSuspended:0,changingTaskBySegments:!1,segmentsSnapshot:null,segmentsProjection:null,getFirstSegment:function(){var a=this.getSegments();return a&&a[0]},getLastSegment:function(){var a=this.getSegments();return a&&a[a.length-1]},normalizeSegments:function(){var a=this.getSegments();this.suspendSegmentsTracking();a.sort(function(a,b){if(!a.normalized){a.normalize()}if(!b.normalized){b.normalize()}return a.getStartDate()>b.getStartDate()?1:-1});this.mergeOverlappedSegments();if(this.getSegments()){this.data[this.durationField]=this.getSegmentsDuration()}this.resumeSegmentsTracking()},updateSegmentsDates:function(a){a=a||{};if(!this.isSegmented()){return}this.suspendSegmentsTracking();a=Ext.apply({useAbsoluteOffset:!1},a);a.isForward=a.isForward!==!1;var b=!1;this.forEachSegment(function(c){c.updateDatesByOffsets(a);b=b||Boolean(c.modified)},a.isForward);if(b){this.set(this.segmentsField,this.getSegments().slice())}this.resumeSegmentsTracking()},getSegmentIntervalsForRange:function(d,e,a){a=a||this.getSegments();if(!a){return}var c=Sch.util.Date,b=[];for(var f=0,j=a.length;f<j;f++){var i=a[f],g=i.getStartDate(),h=i.getEndDate();if(c.intersectSpans(d,e,g,h)){b.push([c.constrain(g,d,e)-0,c.constrain(h,d,e)-0])}}return b.length&&b||null},getSegmentByDate:function(d,a){a=a||this.getSegments();if(!a){return}for(var c=0,e=a.length;c<e;c++){var b=a[c];if(d>=b.getStartDate()&&d<b.getEndDate()){return b}}},constrainSegments:function(h){if(this.changingTaskBySegments){return}h=h||{};var b=this.getSegments();if(!b){return}var l=this.getDuration('MILLI'),o=h.unit||this.getDurationUnit(),a=h.duration,q=this.getStartDate(),d=this.getEndDate(),m=this.getUnitConverter();if(!q||!d&&!l&&!a){this.set(this.segmentsField,null);return}if(a){a=m.convertDurationToMs(a,o)}else {if(!d){a=l}}this.suspendSegmentsTracking();b[0].setStartDateWithoutPropagation(this.getStartDate(),!1);var f=[],e=a,g,r;var j;if(a){j=function(){return e<=0}}else {j=function(a){return a.getStartDate()>=d}}for(var i=0,s=b.length;i<s;i++){g=b[i];if(j(g)){f.push.apply(f,b.slice(i));break}e-=g.getDuration('MILLI');r=g}this.removeSegments(f);if(b.length<2){this.set(this.segmentsField,null)}else {var c=this.getLastSegment();var k=!1;if(a){if(e){c.setDurationWithoutPropagation(m.convertMSDurationToUnit(c.getEndOffset()-c.getStartOffset()+e,c.getDurationUnit()));k=!0}}else {if(c.getEndDate()-d){c.setEndDateWithoutPropagation(d,!1);k=!0}}var n=this.getTaskStore(!0),p=n&&n.isProjecting();if((f.length||k)&&(p||!this.modified||!this.modified[this.segmentsField])){this.set(this.segmentsField,this.getSegments().slice())}}this.resumeSegmentsTracking()},forEachSegment:function(e,f,d,c){if(!e){return}c=c||this;var b,a;if(f!==!1){b='getNextSegment';a=d||this.getFirstSegment()}else {b='getPrevSegment';a=d||this.getLastSegment()}while(a){if(e.call(c,a)===!1){return}a=a[b].call(a)}},split:function(f,e,g,d,b){var c=this,a;c.propagateChanges(function(){return c.splitWithoutPropagation(f,e,g,d,function cancelFeedback(c){a=c})},function(c,h){c&&a&&a();b&&b(c,h)})},splitWithoutPropagation:function(j,q,r,g,s){var a=this;if(g!==!0&&g!==!1){var u=a.getTaskStore(!0);g=u?u.skipWeekendsDuringDragDrop:!1}if(!j||!a.isLeaf()||a.isMilestone()){return}var l=a.getStartDate(),v=a.getEndDate();if(!l||!v||l>=j||j>=v){return}var d=a.getSegments(),b;var x=a.buildSegmentsSnapshot(d);if(d){b=a.getSegmentByDate(j);if(!b){return}}else {d=[]}q=q||1;r=r||this.getDurationUnit();var w=new Date(j),i=w,e=w,p=a.getUnitConverter().convertDurationToMs(q,r);if(g){e=a.skipNonWorkingTime(e,!0,!0);i=a.skipNonWorkingTime(i,!1,!0)}var k=a.getDurationUnit(),h=Ext.ClassManager.get(a.segmentClassName).prototype,f,n,c;a.suspendSegmentsTracking();var o=!0;if(!b){f=a.calculateDuration(l,i);n=a.getDuration()-f;c={task:a};c[h.startDateField]=l;c[h.durationField]=f;c[h.durationUnitField]=k;d.push(Ext.create(a.segmentClassName,c))}else {f=a.calculateDuration(b.getStartDate(),i,k);n=b.getDuration(k)-f;o=!!f;var m;if(o){b.setEndDateWithoutPropagation(i,!1,g);m=b.getNextSegment()}else {m=b}if(m){a.forEachSegment(function(a){a.setStartEndOffset(a.getStartOffset()+p,a.getEndOffset()+p);a.updateDatesByOffsets()},!0,m)}}if(o){e=a.skipWorkingTime(e,p);if(g){e=a.skipNonWorkingTime(e)}c={prevSegment:b||d[0],task:a};c[h.startDateField]=e;c[h.durationField]=n;c[h.durationUnitField]=k;var t=Ext.create(a.segmentClassName,c);if(b){Ext.Array.insert(d,Ext.Array.indexOf(d,b)+1,[t])}else {d.push(t)}}a.resumeSegmentsTracking();s&&s(function(){a.rollbackSegmentsToSnapshot(x)});if(!b){a.setSegmentsWithoutPropagation(d)}else {a.onSegmentsChanged(null,null)}return !0},merge:function(c,d,b){var a=this;a.propagateChanges(function(){return a.mergeWithoutPropagation(c,d)},b)},mergeWithoutPropagation:function(a,b){if(!this.isSegmented()||!a||!b){return}var d,c;if(a.getStartOffset()>b.getStartOffset()){d=b;c=a}else {d=a;c=b}d.setEndDateWithoutPropagation(c.getEndDate(),!1);return !0},suspendSegmentsTracking:function(){this.segmentsTrackingSuspended++},resumeSegmentsTracking:function(){this.segmentsTrackingSuspended--},getSegmentsDuration:function(a){a=a||this.getDurationUnit();var d=this.getSegments();var c=0;for(var b=0,f=d.length;b<f;b++){var e=d[b];c+=e.getEndOffset()-e.getStartOffset()}return this.getUnitConverter().convertMSDurationToUnit(c,a)},mergeOverlappedSegments:function(f){var b=this.getSegments();if(b){var e=[],c=b[0],a;for(var d=1,g=b.length;d<g;d++){a=b[d];if(a.getStartOffset()<=c.getEndOffset()){e.push(a);if(a.getEndOffset()>c.getEndOffset()){c.setEndDateWithoutPropagation(a.getEndDate(),!1)}}else {c=a}}this.removeSegments(e);if(b.length<2&&!f){this.setSegmentsWithoutPropagation(null)}}},onSegmentEditBegin:function(a){this.getTreeStore().onSegmentEditBegin(this,a);this.snapshotSegments()},onSegmentEditEnd:function(a){this.getTreeStore().onSegmentEditEnd(this,a)},onSegmentsChanged:function(c,a){if(this.segmentsTrackingSuspended){return}this.changingTaskBySegments=!0;this.suspendSegmentsTracking();this.mergeOverlappedSegments(!0);if(c&&a&&c.durationField in a){this.setDurationWithoutPropagation(this.getSegmentsDuration())}else {if(this.getSchedulingMode()=='EffortDriven'){this.setStartEndDateWithoutPropagation(this.getStartDate(),this.recalculateEndDate())}else {this.setStartDateWithoutPropagation(this.getStartDate())}}var b=this.getSegments();this.set(this.segmentsField,b&&b.slice()||null);this.resumeSegmentsTracking();this.changingTaskBySegments=!1},removeSegments:function(a){var c=this.getSegments();if(!c||!a||!a.length){return}if(!Ext.isArray(a)){a=[a]}for(var b=0,d=a.length;b<d;b++){Ext.Array.remove(c,a[b])}this.onSegmentsChanged()},setSegments:function(c,b){var a=this;a.propagateChanges(function(){return a.setSegmentsWithoutPropagation(c)},b)},setSegmentsWithoutPropagation:function(a){this.onSegmentEditBegin();this.suspendSegmentsTracking();this.set(this.segmentsField,this.processSegmentsValue(a));this.resumeSegmentsTracking();this.onSegmentsChanged();this.onSegmentEditEnd();return !0},processSegmentsValue:function(a){var c,b,e;if(a){a=[].concat(a);c=[];for(var d=0,f=a.length;d<f;d++){b=a[d];if(!(b instanceof Gnt.model.TaskSegment)){b=Ext.create(this.segmentClassName,Ext.apply(b,{task:this}))}c.push(b);e=b}a=c&&c.length>1&&c||null}return a},isSegmented:function(){return Boolean(this.getSegments())},getSegment:function(a){return this.getSegments()[a]},rejectSegmentsProjection:function(){var d=this.getTaskStore(!0).getProjectionLevel();var c,a;if(this.segmentsProjection){var b;for(a=d;a>=0;a--){if(c=this.segmentsProjection[a]){b=a;break}}if(b===d){delete this.segmentsProjection[b]}}if(c){this.rollbackSegmentsToSnapshot(c)}},commitSegmentsProjection:function(){var a=this.getTaskStore(!0),b=a&&a.getProjectionLevel();if(this.segmentsProjection){delete this.segmentsProjection[b]}},rollbackSegmentsToSnapshot:function(a){this.data[this.segmentsField]=a&&Ext.Array.map(a,function(b){return b&&b[0].readSnapshot(b)})},buildSegmentsSnapshot:function(a){a=a||this.getSegments();return a&&Ext.Array.map(a,function(b){return b&&b.buildSnapshot()})},snapshotSegments:function(){var c=this.getTaskStore(!0),d=this.getSegments(),b=c&&c.getProjectionLevel(),a;if(b){this.segmentsProjection=this.segmentsProjection||{};a=this.segmentsProjection[b-1];if(!a){a=this.buildSegmentsSnapshot(d);this.segmentsProjection[b-1]=a}}if(!this.segmentsSnapshot){this.segmentsSnapshot=a||this.buildSegmentsSnapshot(d)}},commitSegments:function(){if(this.rejecting){return}this.segmentsSnapshot=null;var a=this.getSegments();if(a){for(var b=0,c=a.length;b<c;b++){a[b].commit()}}},rejectSegments:function(){this.rollbackSegmentsToSnapshot(this.segmentsSnapshot);this.segmentsSnapshot=null;var a=this.getSegments();if(a){for(var b=0,c=a.length;b<c;b++){a[b].reject()}}}},0,0,0,0,0,0,[Gnt.model.task,'Splittable'],0);Ext.cmd.derive('Gnt.model.Task',Sch.model.Range,{segmentClassName:'Gnt.model.TaskSegment',idProperty:'Id',customizableFields:[{name:'Duration',type:'number',allowNull:!0},{name:'Effort',type:'number',allowNull:!0},{name:'EffortUnit',type:'string',defaultValue:'h'},{name:'CalendarId',type:'string'},{name:'Note',type:'string'},{name:'DurationUnit',type:'string',defaultValue:'d',convert:function(a){return a||'d'}},{name:'PercentDone',type:'number',defaultValue:0},{name:'ConstraintType',type:'string',defaultValue:''},{name:'ConstraintDate',type:'date',dateFormat:'c'},{name:'ManuallyScheduled',type:'boolean',defaultValue:!1},{name:'SchedulingMode',type:'string',defaultValue:'Normal'},{name:'BaselineStartDate',type:'date',dateFormat:'c'},{name:'BaselineEndDate',type:'date',dateFormat:'c'},{name:'BaselinePercentDone',type:'int',defaultValue:0},{name:'Draggable',type:'boolean',persist:!1,defaultValue:!0},{name:'Resizable',persist:!1,defaultValue:''},{name:'ReadOnly',persist:!1,type:'bool',defaultValue:!1},{name:'Rollup',type:'boolean',defaultValue:!1},{name:'Segments',persist:!0,convert:function(b,a){return a.processSegmentsValue(b,a)},serialize:function(a){if(!a){return null}return Ext.Array.map([].concat(a),function(b){return b.serialize()})}},{name:'PhantomId',type:'string'},{name:'PhantomParentId',type:'string'},{name:'ShowInTimeline',type:'bool'},{name:'DeadlineDate',type:'date',dateFormat:'c'},{name:'index',type:'int',persist:!0}],constraintTypeField:'ConstraintType',constraintDateField:'ConstraintDate',draggableField:'Draggable',resizableField:'Resizable',nameField:'Name',durationField:'Duration',durationUnitField:'DurationUnit',effortField:'Effort',effortUnitField:'EffortUnit',percentDoneField:'PercentDone',manuallyScheduledField:'ManuallyScheduled',schedulingModeField:'SchedulingMode',rollupField:'Rollup',calendarIdField:'CalendarId',baselineStartDateField:'BaselineStartDate',baselineEndDateField:'BaselineEndDate',baselinePercentDoneField:'BaselinePercentDone',noteField:'Note',segmentsField:'Segments',readOnlyField:'ReadOnly',calendar:null,dependencyStore:null,taskStore:null,phantomIdField:'PhantomId',phantomParentIdField:'PhantomParentId',showInTimelineField:'ShowInTimeline',deadlineDateField:'DeadlineDate',normalized:!1,recognizedSchedulingModes:['Normal','FixedDuration','EffortDriven','DynamicAssignment'],convertEmptyParentToLeaf:!0,autoCalculateEffortForParentTask:!0,autoCalculatePercentDoneForParentTask:!0,isHighlighted:!1,calendarWaitingListener:null,childTasksDuration:null,completedChildTasksDuration:null,totalCount:null,predecessors:null,successors:null,removeChildIsCalledFromReplaceChild:!1,savedDirty:null,useOwnCalendarAsConverter:!1,constructor:function(){this._singleProp={};this.initProjectable();Sch.model.Range.prototype.constructor.apply(this,arguments);if(this.phantom){this.data[this.phantomIdField]=this.getId()}if(this.id==='root'){this.convertEmptyParentToLeaf=!1}this.predecessors=[];this.successors=[]},normalize:function(){var f=this.getDurationUnit(),b=this.getStartDate(),a=this.getEndDate(),c=this.data,n=this.getTaskStore(!0),g=this.getSchedulingMode();if(g=='Manual'){g=c[this.schedulingModeField]='Normal';c[this.manuallyScheduledField]=!0}var e=this.endDateField;if(n&&this.isSegmented()){this.normalizeSegments();var m;if(m=this.getLastSegment()){a=c[e]=m.getEndDate()}}var d=this.getDuration();var i=this.effortField;if(a&&this.inclusiveEndDate){var l=this.getField(e).dateFormat;var o=l&&!Ext.Date.formatContainsHourInfo(l)||a.getHours()===0&&a.getMinutes()===0&&a.getSeconds()===0&&a.getMilliseconds()===0;if(o){if(Ext.isNumber(d)){a=c[e]=this.calculateEndDate(b,d,f)}else {a=c[e]=Ext.Date.add(a,Ext.Date.DAY,1)}}}if(d==null&&b&&a){d=c[this.durationField]=this.calculateDuration(b,a,f)}if((g=='Normal'||this.isManuallyScheduled())&&a==null&&b&&Ext.isNumber(d)){a=c[e]=this.calculateEndDate(b,d,f)}var h=this.get(i),j=this.getEffortUnit();switch(g){case 'FixedDuration':if(a==null&&b&&Ext.isNumber(d)){a=c[e]=this.calculateEndDate(b,d,f)};if(h==null&&b&&a){c[i]=this.calculateEffort(b,a,j)};break;case 'EffortDriven':if(h==null&&b&&a){c[i]=this.calculateEffort(b,a,j)};if(a==null&&b&&h){c[e]=this.calculateEffortDrivenEndDate(b,h,j);if(d==null){c[this.durationField]=this.calculateDuration(b,c[e],f)}};break;default:if(a==null&&b&&Ext.isNumber(d)){a=c[e]=this.calculateEndDate(b,d,f)};break;}var k=this.getCalendarId();if(k){this.setCalendarId(k,!0)}this.normalized=!0},getUnitConverter:function(){return this.useOwnCalendarAsConverter&&this.getCalendar()||this.getProjectCalendar()},normalizeParent:function(){var k=this.childNodes;var d=0;var b=0;var c=0;var g=this.autoCalculatePercentDoneForParentTask;var h=this.autoCalculateEffortForParentTask;for(var f=0;f<k.length;f++){var a=k[f];var e=a.isLeaf();if(!e){a.normalizeParent()}if(h){d+=a.getEffort('MILLI')}if(g){var j=e?a.getDuration('MILLI')||0:a.childTasksDuration;b+=j;c+=e?j*(a.getPercentDone()||0):a.completedChildTasksDuration}}if(g){this.childTasksDuration=b;this.completedChildTasksDuration=c;var i=b?c/b:0;if(this.getPercentDone()!=i){this.data[this.percentDoneField]=i}}if(h){if(this.getEffort('MILLI')!=d){this.data[this.effortField]=this.getUnitConverter().convertMSDurationToUnit(d,this.getEffortUnit())}}},getCalendar:function(a){return a?this.getOwnCalendar():this.getOwnCalendar()||this.parentNode&&this.parentNode.getCalendar()||this.getProjectCalendar()},getOwnCalendar:function(){var a=this.get(this.calendarIdField);return a?Gnt.data.Calendar.getCalendar(a):this.calendar},getProject:function(){var b=this,a=null;this.bubble(function(c){if(b!==c&&c.isProject){a=c;return !1}},this);return a},getProjectCalendar:function(){var b=this.getTaskStore(!0);var a=b&&b.getCalendar()||this.parentNode&&this.parentNode.getProjectCalendar()||this.isRoot()&&this.calendar;if(!a){Ext.Error.raise("Can't find a project calendar in `getProjectCalendar`")}return a},setCalendar:function(a,c){var d=this,b=a instanceof Gnt.data.Calendar;if(b&&!a.calendarId){throw new Error("Can't set calendar w/o `calendarId` property")}return d.setCalendarId(b?a.calendarId:a,!1,c)},setCalendarId:function(c,a,d){var b=this;if(!a){b.propagateChanges(function(){return b.setCalendarIdWithoutPropagation(c,a)},d)}else {b.setCalendarIdWithoutPropagation(c,a)}},onCalendarChange:function(a){if(!this.isReadOnly()){this.adjustToCalendarWithoutPropagation()}},setCalendarIdWithoutPropagation:function(a,f){var g=!1;if(a instanceof Gnt.data.Calendar){a=a.calendarId}var d=this.getCalendarId();if(d!=a||f){g=!0;if(this.calendarWaitingListener){this.calendarWaitingListener.destroy();this.calendarWaitingListener=null}var c={calendarchange:this.onCalendarChange,scope:this};var e=this.calendar||Gnt.data.Calendar.getCalendar(d);this.calendar=null;e&&e.un(c);this.set(this.calendarIdField,a);var b=Gnt.data.Calendar.getCalendar(a);if(b){b.on(c);if(!f){this.onCalendarChange()}}else {this.calendarWaitingListener=Ext.data.StoreManager.on('add',function(){b=Gnt.data.Calendar.getCalendar(a);if(b){this.calendarWaitingListener.destroy();this.calendarWaitingListener=null;b.on(c);this.onCalendarChange()}},this,{destroyable:!0})}}return g},getDependencyStore:function(){var a=this.getTaskStore(!0),b=a&&a.getDependencyStore();return b},getResourceStore:function(){var a=this.getTaskStore(!0);return a&&a.getResourceStore()},getAssignmentStore:function(){var a=this.getTaskStore(!0);return a&&a.getAssignmentStore()},getTaskStore:function(b){var a=this;if(!a.taskStore){a.taskStore=a.getTreeStore()||a.parentNode&&a.parentNode.getTaskStore(b)}if(!a.taskStore&&!b){Ext.Error.raise("Can't find a taskStore in `getTaskStore`")}return a.taskStore},getEventStore:function(){return this.getTaskStore()},setTaskStore:function(a){this.taskStore=a},isManuallyScheduled:function(){return this.get(this.manuallyScheduledField)||this.isCompleted()},isShowInTimeline:function(){return Boolean(this.getShowInTimeline())},setManuallyScheduled:function(c,b){var a=this;a.propagateChanges(function(){return a.setManuallyScheduledWithoutPropagation(c)},b)},setManuallyScheduledWithoutPropagation:function(c){var b=this,a;if(b.isManuallyScheduled()!=c){this.set(b.manuallyScheduledField,c);if(!c){a=b.getPredecessors()[0]}a=a||b}return a},setSchedulingMode:function(c,b){var a=this;a.propagateChanges(function(){return a.setSchedulingModeWithoutPropagation(c)},b)},setSchedulingModeWithoutPropagation:function(c){var a=this,b;if(a.getSchedulingMode()!=c){a.set(this.schedulingModeField,c);switch(c){case 'FixedDuration':a.updateEffortBasedOnDuration();break;case 'EffortDriven':a.updateSpanBasedOnEffort();break;}var d=a.getPredecessors();if(d.length){b=d[0]}else {b=a}}return b},skipWorkingTime:function(c,f,a,g){var e;var b;a=a!==!1;var d={isForward:a,segments:g||!1,resources:this.hasResources(),fn:function(d,h){var i=h-d,j=(new Date(d)).getTimezoneOffset()-(new Date(h)).getTimezoneOffset();if(i>=b){e=new Date((a?d:h)-0+(a?1:-1)*b);return !1}else {b-=i+j*60*1000}}};if(Ext.isObject(c)){Ext.apply(d,c)}else {if(a){d.startDate=c}else {d.endDate=c}}b=f||d.duration;if(!b){return c}this.forEachAvailabilityInterval(d);return e},skipNonWorkingTime:function(a,b,e){var d=!1;b=b!==!1;var c={isForward:b,segments:e||!1,resources:this.hasResources(),fn:function(c,f){if(c!==f){a=b?c:f;d=!0;return !1}}};if(Ext.isObject(a)){Ext.apply(c,a)}else {if(b){c.startDate=a}else {c.endDate=a}}this.forEachAvailabilityInterval(c);return d?new Date(a):this.getCalendar().skipNonWorkingTime(a,b)},setStartDate:function(e,c,b,d){var a=this;a.propagateChanges(function(){return a.setStartDateWithoutPropagation(e,c,b)},d)},setStartDateWithoutPropagation:function(b,e,c){var a=this,f=a.getTaskStore(!0),g,d;e=e!==!1;if(f&&c!==!0&&c!==!1){c=f.skipWeekendsDuringDragDrop}else {if(c!==!0&&c!==!1){c=!1}}a.autoCalculateLag();a.beginEdit();if(!b){a.set(a.durationField,null);a.set(a.startDateField,null);a.setSegmentsWithoutPropagation(null)}else {if(c){b=a.skipNonWorkingTime(b,!a.isMilestone())}a.set(a.startDateField,b);if(f&&a.isSegmented()){a.updateSegmentsDates()}if(e!==!1){a.set(a.endDateField,a.recalculateEndDate(b))}else {d=this.getEndDate();if(d){this.constrainSegments();a.set(a.durationField,a.calculateDuration(b,d,a.getDurationUnit()))}}}g=a.getDuration();d=a.getEndDate();if(b&&d&&(g===undefined||g===null)){a.set(a.durationField,a.calculateDuration(b,d,a.getDurationUnit()))}a.onPotentialEffortChange();a.endEdit();return !0},setEndDate:function(e,c,b,d){var a=this;a.propagateChanges(function(){return a.setEndDateWithoutPropagation(e,c,b)},d)},setEndDateWithoutPropagation:function(b,f,d){var a=this,g=a.getTaskStore(!0),e,c;f=f!==!1;if(d!==!0&&d!==!1&&g){d=g.skipWeekendsDuringDragDrop}else {if(d!==!0&&d!==!1){d=!1}}a.autoCalculateLag();a.beginEdit();var i=a.getEndDate();if(!b){a.set(a.durationField,null);a.set(a.endDateField,null);a.setSegments(null)}else {c=a.getStartDate();if(b<c&&f===!1){b=c}if(d){b=a.skipNonWorkingTime(b,!1)}if(f!==!1){e=a.getDuration();if(Ext.isNumber(e)){if(g&&a.isSegmented()&&b-i){a.updateSegmentsDates({isForward:!1,endDate:b})}a.set(a.startDateField,a.calculateStartDate(b,e,a.getDurationUnit()));a.set(a.endDateField,b)}else {a.set(a.endDateField,b)}}else {var j=a.isMilestone();if(b<c){a.set(a.startDateField,b)}a.set(a.endDateField,b);a.constrainSegments();if(c){a.set(a.durationField,a.calculateDuration(c,b,a.getDurationUnit()));if(j&&!a.isMilestone()){var h=a.skipNonWorkingTime(c,!0);if(h-c!==0){a.set(a.startDateField,h)}}}}}e=a.getDuration();c=a.getStartDate();if(b&&c&&(e===undefined||e===null)){a.set(a.durationField,a.calculateDuration(c,b,a.getDurationUnit()))}a.onPotentialEffortChange();a.endEdit();return !0},setStartEndDate:function(c,e,a,d){var b=this;a=a||!1;b.propagateChanges(function(){return b.setStartEndDateWithoutPropagation(c,e,a)},d)},setStartEndDateWithoutPropagation:function(c,b,d){var a=this,f=a.getTaskStore(!0);if(d!==!0&&d!==!1&&f){d=f.skipWeekendsDuringDragDrop}else {if(d!==!0&&d!==!1){d=!1}}if(d){c=c&&a.skipNonWorkingTime(c,!0);b=b&&a.skipNonWorkingTime(b,!1);if(b<c){c=b}}var g=a.getStartDate(),e=a.getEndDate();a.beginEdit();a.set(a.startDateField,c);a.set(a.endDateField,b);if(a.getTaskStore(!0)&&a.isSegmented()&&(c-g||b-e)){a.updateSegmentsDates()}if(b-e){a.constrainSegments()}a.set(a.durationField,a.calculateDuration(c,b,a.getDurationUnit()));a.onPotentialEffortChange();a.endEdit();return !0},shift:function(e,d,f){var a=this,b=a.getStartDate(),c=a.getEndDate();a.setStartEndDate(b&&Sch.util.Date.add(b,e,d),c&&Sch.util.Date.add(c,e,d),undefined,f)},getDuration:function(b){if(!b){return this.get(this.durationField)}var a=this.getUnitConverter(),c=a.convertDurationToMs(this.get(this.durationField),this.get(this.durationUnitField));return a.convertMSDurationToUnit(c,b)},getEffort:function(c){var a=this.get(this.effortField)||0;if(!c){return a}var b=this.getUnitConverter(),d=b.convertDurationToMs(a,this.getEffortUnit());return b.convertMSDurationToUnit(d,c)},setEffort:function(c,d,b){var a=this;a.propagateChanges(function(){return a.setEffortWithoutPropagation(c,d)},b)},setEffortWithoutPropagation:function(c,b){var a=this;b=b||a.getEffortUnit();a.beginEdit();a.set(a.effortField,c);a.set(a.effortUnitField,b);switch(a.getSchedulingMode()){case 'EffortDriven':a.updateSpanBasedOnEffort();break;case 'DynamicAssignment':a.updateAssignments();break;}a.endEdit();return !0},getCalendarDuration:function(a){return this.getUnitConverter().convertMSDurationToUnit(this.getEndDate()-this.getStartDate(),a||this.get(this.durationUnitField))},setDuration:function(c,d,b){var a=this;a.propagateChanges(function(){return a.setDurationWithoutPropagation(c,d)},b)},setDurationWithoutPropagation:function(c,d){var a=this;var f=!a.isManuallyScheduled()&&a.hasEndPredecessorsButNoStartPredecessors();var b=null;var e=null;var l=a.getEndDate();d=d||a.getDurationUnit();var j=a.isMilestone();a.beginEdit();if(Ext.isNumber(c)&&!a.getStartDate()){if(l){f=!0}else {var k=a.getTaskStore(!0);e=k&&k.getProjectStartDate()||Ext.Date.clearTime(new Date());a.setStartDateWithoutPropagation(e)}}this.constrainSegments({duration:c,unit:d});if(Ext.isNumber(c)){if(f&&a.getEndDate()){e=a.calculateStartDate(a.getEndDate(),c,d)}else {b=a.calculateEndDate(a.getStartDate(),c,d)}}if(!f&&(b||this.getStartDate())){a.set(a.endDateField,b)}if(f&&(e||this.getEndDate())){a.set(a.startDateField,e)}a.set(a.durationField,c);a.set(a.durationUnitField,d);if(a.isMilestone()!=j){if(j){var h=a.getStartDate();if(h){var i=a.skipNonWorkingTime(h,!0);if(i-h!==0){a.set(a.startDateField,i)}}}else {if(b){var g=a.skipNonWorkingTime(b,!1);if(g-b!==0){a.set(a.startDateField,g);a.set(a.endDateField,g)}}}}a.onPotentialEffortChange();a.endEdit();return !0},calculateStartDate:function(e,d,a,f){if(!d){return e}a=a||this.getDurationUnit();var b=this.getSchedulingMode(),g=b!='FixedDuration'&&b!='DynamicAssignment'&&b!='EffortDriven';f=Ext.apply({endDate:e,isForward:!1,resources:g&&this.hasResources()},f);if(this.getTaskStore(!0)&&(this.isSegmented()||g)){var c=this.getUnitConverter().convertDurationToMs(d,a);var h;this.forEachAvailabilityInterval(f,function(i,b){var g=b-i;if(g>=c){h=new Date(b-c);return !1}else {var j=(new Date(b)).getTimezoneOffset()-(new Date(i)).getTimezoneOffset();c-=g+j*60*1000}});return h}else {return this.getCalendar().calculateStartDate(e,d,a)}},recalculateEndDate:function(b){var a=this,c,d;b=b||a.getStartDate();if(b&&a.getSchedulingMode()=='EffortDriven'){c=a.calculateEffortDrivenEndDate(b,a.getEffort())}else {d=a.getDuration();if(b&&Ext.isNumber(d)){c=a.calculateEndDate(b,d,a.getDurationUnit())}else {c=a.getEndDate()}}return c},calculateEndDate:function(e,f,b,a){b=b||this.getDurationUnit();if(!f){return e}a=Ext.apply({startDate:e},a);var c=this.getSchedulingMode(),h;var g=c!='FixedDuration'&&c!='DynamicAssignment'&&c!='EffortDriven';if(this.getTaskStore(!0)&&(this.isSegmented()||g)){var d=this.getUnitConverter().convertDurationToMs(f,b);a.resources=g&&this.hasResources();this.forEachAvailabilityInterval(a,function(c,i){var g=i-c;if(g>=d){h=new Date(c+d);return !1}else {var j=(new Date(c)).getTimezoneOffset()-(new Date(i)).getTimezoneOffset();d-=g+j*60*1000}})}else {return this.getCalendar().calculateEndDate(e,f,b)}return h},calculateDuration:function(b,c,a,e){a=a||this.getDurationUnit();if(!b||!c){return 0}if(this.getTaskStore(!0)){var d=0;this.forEachAvailabilityInterval(Ext.apply({startDate:b,endDate:c,resources:this.hasResources()},e),function(f,g){var h=(new Date(f)).getTimezoneOffset()-(new Date(g)).getTimezoneOffset();d+=g-f+h*60*1000});return this.getUnitConverter().convertMSDurationToUnit(d,a)}else {return this.getCalendar().calculateDuration(b,c,a)}},isCalendarApplicable:function(f){var b=this.getStartDate();if(!b){return !0}var c=this.getTaskStore(!0);if(!c){return !0}var h=Sch.util.Date.add(b,'d',c&&c.availabilitySearchLimit||5*365);var e=this.getAssignments();var a=[];Ext.Array.each(e,function(c){var b=c.getResource();if(b){a.push(b.getCalendar())}});if(!a.length){return !0}var g=Gnt.data.Calendar.getCalendar(f);for(var d=0,i=a.length;d<i;d++){if(g.isAvailabilityIntersected(a[d],b,h)){return !0}}return !1},forEachAvailabilityInterval:function(l,I,G){I=I||l.fn;G=G||l.scope||this;var U=this,i=l.startDate,j=l.endDate,L=l.includeEmptyIntervals,C=l.resources,J=l.segments||l.segments!==!1,v=l.isForward!==!1,t=Sch.util.Date,k,q;var H=this.getTaskStore(!0);var a,g,p,w,b,d;if(v){if(!i){throw new Error('forEachAvailabilityInterval: `startDate` is required when `isForward` is true')}if(!j){j=t.add(i,'d',l.availabilitySearchLimit||H&&H.availabilitySearchLimit||5*365)}k=new Date(i)}else {if(!j){throw new Error('forEachAvailabilityInterval: `endDate` is required when `isForward` is false')}if(!i){i=t.add(j,'d',-(l.availabilitySearchLimit||H&&H.availabilitySearchLimit||5*365))}k=new Date(j)}var A=this.getOwnCalendar(),T=this.getProjectCalendar(),F={},K=[];if(C){var O=!1;var Q=l.assignments;var N=function(b){var d=b.getId(),a=Q&&Ext.Array.findBy(Q,function(a){return a.getResourceId()==d})||U.getAssignmentFor(b),e=b.getCalendar(),c=e.getCalendarId();if(!F[c]){F[c]=[];K.push(e)}F[c].push({assignment:a,resourceId:d,units:a&&a.getUnits()});O=!0};if(C!==!0){Ext.each(C,N)}else {Ext.Array.each(this.getAssignments(),function(b){var a=b.getResource();if(a){N(a)}})}if(!O){return}}else {A=A||T}var o,m,n;if(J){if(!Ext.isArray(J)){q=this.getSegments()}else {q=J}if(q){o=[];for(a=0,p=q.length;a<p-1;a++){m=q[a].getEndDate()-0;n=q[a+1].getStartDate()-0;if(m>i||n<j){o.push([q[a].getEndDate()-0,q[a+1].getStartDate()-0])}}if(!o.length){o=null}}}while(v?k<j:k>i){var c={};var h=[];var R=k-(v?0:1);if(A){var P=A.getAvailabilityIntervalsFor(R);for(g=0,p=P.length;g<p;g++){w=P[g];b=w.startDate-0;d=w.endDate-0;if(!c[b]){c[b]=[];h.push(b)}c[b].push({type:'00-taskAvailailabilityStart',typeBackward:'01-taskAvailailabilityStart'});h.push(d);c[d]=c[d]||[];c[d].push({type:'01-taskAvailailabilityEnd',typeBackward:'00-taskAvailailabilityEnd'})}}if(o){var D,E;if(v){D=k;E=t.getStartOfNextDay(k)}else {D=t.getEndOfPreviousDay(k);E=k}for(a=0,p=o.length;a<p;a++){m=o[a][0];n=o[a][1];if(m<E&&n>D){m=t.constrain(m,D,E)-0;n=t.constrain(n,D,E)-0;if(!c[m]){c[m]=[];h.push(m)}c[m].push({type:'05-taskSegmentEnd',typeBackward:'04-taskSegmentEnd'});if(!c[n]){c[n]=[];h.push(n)}c[n].push({type:'04-taskSegmentStart',typeBackward:'05-taskSegmentStart'});break}}}var f;for(a=0,p=K.length;a<p;a++){var S=K[a],M=S.getAvailabilityIntervalsFor(R);f=F[S.getCalendarId()];for(g=0;g<M.length;g++){w=M[g];b=w.startDate-0;d=w.endDate-0;if(!c[b]){c[b]=[];h.push(b)}c[b].push({type:'02-resourceAvailailabilityStart',typeBackward:'03-resourceAvailailabilityStart',resources:f});if(!c[d]){c[d]=[];h.push(d)}c[d].push({type:'03-resourceAvailailabilityEnd',typeBackward:'02-resourceAvailailabilityEnd',resources:f})}}h.sort(function(a,b){return a-b});var z=!1,B=!0,x={},y=0,r,s,e,u;if(v){for(a=0,p=h.length;a<p;a++){r=c[h[a]];r.sort(function(a,b){return a.type<b.type?1:-1});for(g=0;g<r.length;g++){s=r[g];switch(s.type){case '00-taskAvailailabilityStart':z=!0;break;case '01-taskAvailailabilityEnd':z=!1;break;case '02-resourceAvailailabilityStart':f=s.resources;for(e=0,u=f.length;e<u;e++){x[f[e].resourceId]=f[e];y++};break;case '03-resourceAvailailabilityEnd':f=s.resources;for(e=0,u=f.length;e<u;e++){delete x[f[e].resourceId];y--};break;case '04-taskSegmentStart':B=!0;break;case '05-taskSegmentEnd':B=!1;break;}}if((z||!A)&&(!o||B)&&(!C||y||L)){b=h[a];d=h[a+1];if(b>=j||d<=i){continue}if(b<i){b=i-0}if(d>j){d=j-0}if(I.call(G,b,d,x)===!1){return !1}}}}else {for(a=h.length-1;a>=0;a--){r=c[h[a]];r.sort(function(a,b){return a.typeBackward<b.typeBackward?1:-1});for(g=0;g<r.length;g++){s=r[g];switch(s.typeBackward){case '00-taskAvailailabilityEnd':z=!0;break;case '01-taskAvailailabilityStart':z=!1;break;case '02-resourceAvailailabilityEnd':f=s.resources;for(e=0,u=f.length;e<u;e++){x[f[e].resourceId]=f[e];y++};break;case '03-resourceAvailailabilityStart':f=s.resources;for(e=0,u=f.length;e<u;e++){delete x[f[e].resourceId];y--};break;case '04-taskSegmentEnd':B=!0;break;case '05-taskSegmentStart':B=!1;break;}}if((z||!A)&&(!o||B)&&(!C||y||L)){b=h[a-1];d=h[a];if(b>j||d<=i){continue}if(b<i){b=i-0}if(d>j){d=j-0}if(I.call(G,b,d,x)===!1){return !1}}}}k=v?t.getStartOfNextDay(k):t.getEndOfPreviousDay(k)}},forEachAvailabilityIntervalWithResources:function(a,c,b){if(!a.resources){a.resources=!0}this.forEachAvailabilityInterval.apply(this,arguments)},calculateEffortDrivenEndDate:function(b,d,e){if(!d){return b}var a=this.getUnitConverter().convertDurationToMs(d,e||this.getEffortUnit());var c=new Date(b);this.forEachAvailabilityIntervalWithResources({startDate:b},function(g,k,h){var j=0;for(var l in h){j+=h[l].units}var i=k-g;var f=j*i/100;if(f>=a){c=new Date(g+a/f*i);return !1}else {a-=f}});return c},refreshCalculatedParentNodeData:function(){var g=this.autoCalculatePercentDoneForParentTask;var h=this.autoCalculateEffortForParentTask;var l=this.childNodes;var f=l.length;var d={};if(f>0&&(h||g)){var j=0;var e=0;var i=0;for(var o=0;o<f;o++){var c=l[o];if(c.parentNode){var t=c.isLeaf();if(h){j+=c.getEffort('MILLI')}if(g){var q=t?c.getDuration('MILLI')||0:c.childTasksDuration;e+=q;i+=t?q*(c.getPercentDone()||0):c.completedChildTasksDuration}}}if(h&&this.getEffort('MILLI')!=j){d.Effort=!0;this.setEffortWithoutPropagation(this.getUnitConverter().convertMSDurationToUnit(j,this.getEffortUnit()))}if(g){this.childTasksDuration=e;this.completedChildTasksDuration=i;var p=e?i/e:0;if(this.getPercentDone()!=p){d.PercentDone=!0;this.setPercentDone(p)}}}var k,m;if(!this.isRoot()&&f>0&&!this.isManuallyScheduled()&&!this.isReadOnly()){var s=new Date(-8.64E15),r=new Date(+8.64E15),a=new Date(+8.64E15),b=new Date(-8.64E15);for(var n=0;n<f;n++){var v=l[n];a=Sch.util.Date.min(a,v.getStartDate()||a);b=Sch.util.Date.max(b,v.getEndDate()||b)}if(b<a&&a<r&&b>s){var u;u=b;b=a;a=u}k=d.StartDate=a-r!==0&&this.getStartDate()-a!==0;m=d.EndDate=b-s!==0&&this.getEndDate()-b!==0;if(k&&m){this.setStartEndDateWithoutPropagation(a,b,!1)}else {if(k){this.setStartDateWithoutPropagation(a,!1,!1)}else {if(m){this.setEndDateWithoutPropagation(b,!1,!1)}}}}return d},recalculateParents:function(){var a=this.parentNode;a&&(a.refreshCalculatedParentNodeData(),!this.getTaskStore().cascading&&a.recalculateParents())},isMilestone:function(c){if(c){return this.isBaselineMilestone()}if(!this.get('leaf')){var a=this.getStartDate(),b=this.getEndDate();if(a&&b){return b-a===0}}return this.getDuration()===0},convertToMilestone:function(b){var a=this;a.propagateChanges(function(){return a.convertToMilestoneWithoutPropagation()},b)},convertToMilestoneWithoutPropagation:function(){var b=this,a=!1;if(!b.isMilestone()){a=b.setStartDateWithoutPropagation(b.getEndDate(),!1);a=a&&b.setDurationWithoutPropagation(0)}return a},convertToRegular:function(b){var a=this;a.propagateChanges(function(){return a.convertToRegularWithoutPropagation()},b)},convertToRegularWithoutPropagation:function(){var a=this,b=!1,c,d;if(a.isMilestone()){c=a.get(a.durationUnitField);d=a.calculateStartDate(a.getStartDate(),1,c);b=a.setDurationWithoutPropagation(1,c);b=b&&a.setStartDateWithoutPropagation(d,!0,!1,!1)}return b},isBaselineMilestone:function(){var a=this.getBaselineStartDate(),b=this.getBaselineEndDate();if(a&&b){return b-a===0}return !1},markAsParent:function(){var a=this;a.isSegmented()&&a.setSegmentsWithoutPropagation(null);a.set('leaf',!1)},getDurationUnit:function(){return this.get(this.durationUnitField)||'d'},getEffortUnit:function(){return this.get(this.effortUnitField)||'h'},getBaselinePercentDone:function(){return this.get(this.baselinePercentDoneField)||0},isPersistable:function(){var a=this.parentNode;return !a||!a.phantom||a.isRoot()},getResources:function(){var b=this,a=b.getAssignmentStore();return a&&a.getResourcesForEvent(b)||[]},getAssignments:function(){var b=this,a=b.getAssignmentStore();return a&&a.getAssignmentsForTask(b)||[]},hasAssignments:function(){return this.getAssignments().length>0},hasResources:function(){var c=this.getAssignments(),b=!1,a,d;for(a=0,d=c.length;!b&&a<d;a++){b=!!c[a].getResource()}return b},getAssignmentFor:function(c){var b=this,a=b.getAssignmentStore();return a&&a.getAssignmentForEventAndResource(b,c)||null},isAssignedTo:function(c){var b=this,a=b.getAssignmentStore();return a&&a.isTaskAssignedToResource(b,c)||!1},assign:function(e,f,c){var d=this,b,a;d.propagateChanges(function(){return d.assignWithoutPropagation(e,f,function cancelAndResultFeedback(g,d){a=g;b=d})},function onPropagationComplete(b,d){b&&a&&a();c&&c(b,d)});return b},assignWithoutPropagation:function(a,f,g){var d=this,e=[],j=d.getTaskStore(),h=j.getAssignmentStore(),c=j.getResourceStore(),i,b;f=f||100;!d.getAssignmentFor(a)||Ext.Error.raise("Resource can't be assigned twice to the same task");if(a instanceof Gnt.model.Resource&&c.indexOf(a)==-1){b=a.getId();c.add(a);e.push(function(){c.remove(a)})}else {if(a instanceof Gnt.model.Resource){b=a.getId()}else {if(c.indexOfId(a)>=0){b=a}else {var k=!1}}}i=h.assignTaskToResource(d,b,f);e.push(function(){h.unassignTaskFromResource(d,b)});g&&g(function(){Ext.Array.each(e,function(b){b()})},i[0]);return !0},unassign:function(){return this.unAssign.apply(this,arguments)},unAssign:function(d,b){var c=this,a;c.propagateChanges(function(){return c.unassignWithoutPropagation(d,function cancelFeedback(c){a=c})},function onPropagationComplete(c,e){c&&a&&a();b&&b(c,e)})},unassignWithoutPropagation:function(a,e){var c=this,g=a instanceof Gnt.model.Resource?a.getId():a,b=c.getAssignmentStore(),f=c.getAssignmentFor(g),d;d=b.indexOf(f);b.unassignTaskFromResource(c,a);e&&e(function(){b.insert(d,f)});return !0},reassign:function(d,f,e){var a=this,b,c;a.propagateChanges(function(){var h=a.getAssignmentFor(d).getUnits();var g=!1;g=a.unassignWithoutPropagation(d,function unassignCancelFeedback(a){b=a});g=g&&a.assignWithoutPropagation(f,h,function assignCancelFeedback(a){c=a});return g},function onPropagationComplete(a,g){if(a){c&&c();b&&b()}e&&e(a,g)})},linkTo:function(e,f,b,d){var c=this,a;c.propagateChanges(function(){return c.linkToWithoutPropagation(e,f,function cancelFeedback(c){a=c},d)},function onPropagationComplete(c,g){c&&a&&a();b&&b(c,g)})},linkToWithoutPropagation:function(b,c,f){var e=this,g=e.getId(),h=e.getTaskStore(),d=e.getDependencyStore(),a;b=b instanceof Gnt.model.Task?b.getId():b;c=(c===null||c===undefined)&&Gnt.model.Dependency.Type.EndToStart||c;a=new d.model();a.setSourceId(g);a.setTargetId(b);a.setType(c);if(d.isValidDependency(a)){d.add(a)}f&&f(function(){d.remove(a)});return e},unlinkFrom:function(d,b){var c=this,a;c.propagateChanges(function(){return c.unlinkFromWithoutPropagation(d,function cancelFeedback(c){a=c})},function onPropagationComplete(c,e){c&&a&&a();b&&b(c,e)})},unlinkFromWithoutPropagation:function(a,f){var d=this,g=d.getId(),b=d.getDependencyStore(),c,e;a=a instanceof Gnt.model.Task?a.getId():a;c=b.getTasksLinkingDependency(a,g);e=b.indexOf(c);b.remove(c);f&&f(function(){b.insert(e,c)});return d},calculateEffort:function(b,c,d){if(!b||!c){return 0}var a=0;this.forEachAvailabilityIntervalWithResources({startDate:b,endDate:c},function(g,h,e){var f=0;for(var i in e){f+=e[i].units}a+=(h-g)*f/100});return this.getUnitConverter().convertMSDurationToUnit(a,d||this.getEffortUnit())},updateAssignments:function(){var b=this.getStartDate();var c=this.getEndDate();if(!b||!c){return}var a=0;this.forEachAvailabilityIntervalWithResources({startDate:b,endDate:c},function(c,d,b){for(var e in b){a+=d-c}});if(!a){return}var d=this.getEffort(Sch.util.Date.MILLI);Ext.Array.each(this.getAssignments(),function(b){b.setUnits(d/a*100)})},updateEffortBasedOnDuration:function(){this.setEffortWithoutPropagation(this.calculateEffort(this.getStartDate(),this.getEndDate()))},updateEffortBasedOnSpan:function(){this.updateEffortBasedOnDuration()},updateSpanBasedOnEffort:function(){this.setStartEndDateWithoutPropagation(this.getStartDate(),this.recalculateEndDate())},onPotentialEffortChange:function(){var a=this,b=a.getTaskStore(!0);if(a.isTaskStored()&&(!b||!b.isUndoingOrRedoing())){switch(a.getSchedulingMode()){case 'FixedDuration':a.updateEffortBasedOnDuration();break;case 'DynamicAssignment':a.updateAssignments();break;}}},onAssignmentMutation:function(){var b=this,a=b.getTaskStore(!0);if(b.isTaskStored()&&(!a||!a.isUndoingOrRedoing())){switch(this.getSchedulingMode()){case 'FixedDuration':this.updateEffortBasedOnDuration();break;case 'EffortDriven':this.updateSpanBasedOnEffort();break;case 'DynamicAssignment':this.updateAssignments();break;}}},onAssignmentStructureMutation:function(){var b=this,a=b.getTaskStore(!0);if(b.isTaskStored()&&(!a||!a.isUndoingOrRedoing())){switch(this.getSchedulingMode()){case 'FixedDuration':this.updateEffortBasedOnDuration();break;case 'EffortDriven':this.updateSpanBasedOnEffort();break;case 'DynamicAssignment':this.updateAssignments();break;}}},adjustToCalendar:function(b){var a=this;a.propagateChanges(function(){return a.adjustToCalendarWithoutPropagation()},b)},adjustToCalendarWithoutPropagation:function(){var a=this,c=a.getTaskStore(!0),b=!1;if(c){if(a.get('leaf')){a.setStartDateWithoutPropagation(a.getStartDate(),!0,c.skipWeekendsDuringDragDrop);a.alignByIncomingDependenciesWithoutPropagation(c,null);b=a}else {if(a.getStartDate()&&a.getEndDate()){a.set(a.durationField,a.calculateDuration(a.getStartDate(),a.getEndDate(),a.getDurationUnit()));b=a}}}return b},isReadOnly:function(){var a=!1;this.bubble(function(b){if(b.getReadOnly()){a=!0;return !1}},this);return a},isEditable:function(a){if(!this.getReadOnly()&&this.isReadOnly()){return !1}if(a===this.readOnlyField){return !0}if(this.getReadOnly()){return !1}if(!this.isLeaf()){if(a===this.effortField&&this.autoCalculateEffortForParentTask){return !1}if(a===this.percentDoneField&&this.autoCalculatePercentDoneForParentTask){return !1}}if((a===this.durationField||a===this.endDateField)&&this.getSchedulingMode()==='EffortDriven'){return !1}if(a===this.effortField&&this.getSchedulingMode()==='FixedDuration'){return !1}return !0},isDraggable:function(){return this.getDraggable()},isResizable:function(){return this.getResizable()},getWBSCode:function(){var b=[],a=this;while(a.parentNode){b.push(a.data.index+1);a=a.parentNode}return b.reverse().join('.')},resetTotalCount:function(b){var a=this;while(a){a.totalCount=b?-1:null;a=a.parentNode}},getTotalCount:function(){var a=this.totalCount;var d=a==-1;if(a==null||d){var b=this.childNodes;a=b.length;for(var c=0,e=b.length;c<e;c++){a+=b[c].getTotalCount()}if(d){return a}else {this.totalCount=a}}return a},getPreviousSiblingsTotalCount:function(){var a=this.previousSibling,b=this.data.index;while(a){b+=a.getTotalCount();a=a.previousSibling}return b},getSequenceNumber:function(){var b=0,a=this;while(a.parentNode){b+=a.getPreviousSiblingsTotalCount()+1;a=a.parentNode}return b},getBySequenceNumber:function(a){var d=null,b,e;if(a===0){d=this}else {if(a>0&&a<=this.getTotalCount()){a--;for(var c=0,f=this.childNodes.length;c<f;c++){b=this.childNodes[c];e=b.getTotalCount();if(a>e){a-=e+1}else {b=this.childNodes[c];d=b.getBySequenceNumber(a);break}}}}return d},getDisplayStartDate:function(b,c,a,e,d){b=b||Ext.Date.defaultFormat;if(arguments.length<3){a=this.getStartDate();if(arguments.length<2){c=!0}}if(a&&c&&this.isMilestone(d)&&a-Ext.Date.clearTime(a,!0)===0&&!Ext.Date.formatContainsHourInfo(b)){a=Sch.util.Date.add(a,Sch.util.Date.MILLI,-1)}return e?a:a?Ext.util.Format.date(a,b):''},getDisplayEndDate:function(b,c,a,e,d){b=b||Ext.Date.defaultFormat;if(arguments.length<3){a=this.getEndDate();if(arguments.length<2){c=!0}}if(a&&(!this.isMilestone(d)||c)&&a-Ext.Date.clearTime(a,!0)===0&&!Ext.Date.formatContainsHourInfo(b)){a=Sch.util.Date.add(a,Sch.util.Date.MILLI,-1)}return e?a:a?Ext.util.Format.date(a,b):''},copy:function(){var d=Sch.model.Range.prototype.copy.apply(this,arguments),a=d.getSegments();if(a){for(var b=0;b<a.length;b++){var c=a[b];a[b]=c.copy(c.getId(),!1)}}return d},fullCopy:function(b){var a=Sch.model.Range.prototype.fullCopy.apply(this,arguments);a.taskStore=this.getTaskStore();return a},commit:function(){Sch.model.Range.prototype.commit.apply(this,arguments);this.commitSegments()},reject:function(){Sch.model.Range.prototype.reject.apply(this,arguments);this.rejectSegments()},isUnscheduled:function(){return !this.getStartDate()||!this.getEndDate()},isTaskStored:function(){return !!this.getTreeStore()}},1,0,0,0,['gntmodel.event'],[[Gnt.model.mixin.ProjectableModel.prototype.mixinId||Gnt.model.mixin.ProjectableModel.$className,Gnt.model.mixin.ProjectableModel],[Gnt.model.task.More.prototype.mixinId||Gnt.model.task.More.$className,Gnt.model.task.More],[Gnt.model.task.Constraints.prototype.mixinId||Gnt.model.task.Constraints.$className,Gnt.model.task.Constraints],[Gnt.model.task.Splittable.prototype.mixinId||Gnt.model.task.Splittable.$className,Gnt.model.task.Splittable]],[Gnt.model,'Task'],function(){Ext.data.NodeInterface.decorate(this);this.override({insertBefore:function(a,b){a=this.createNode(a);if(!a){return}var d=this.getTaskStore(!0),j=d&&d.getRoot(),c=this.phantomParentIdField,i=this!==j&&this.phantom,f=!!a.parentNode,e=this.getId();if(i){this.data[this.phantomIdField]=e}if(e!==a.data[c]){var g=i?e:null;if(!a.phantom&&a.data[c]!==g){a.modified=a.modified||{};a.modified[c]=a.data[c]}a.data[c]=g}var h=b&&b.get('index');this.resetTotalCount(f);if(f&&a.hasDependencies()&&!d.isUndoingOrRedoing()){a.removeDependenciesToParents(this)}var k=this.callParent(arguments);if(f){if(this.hasDependencies()){d.getDependencyStore().resetMethodsCache();if(!d.isUndoingOrRedoing()){this.removeInvalidDependencies()}}this.resetTotalCount()}if(b&&b.get('index')!=h){b.modified=b.modified||{};b.modified.index=h}return k},appendChild:function(b,k,l){b=b instanceof Array?b:[b];var a=this.getTaskStore(!0),m=a&&a.getRoot(),g=!1,d=this.phantomParentIdField,j=this!==m&&this.phantom,f=this.getId(),i=0;if(a&&b.length>1){a.suspendAutoRecalculateParents++}for(var e=0;e<b.length;e++){var c=this.createNode(b[e]);if(!c){continue}i++;b[e]=c;if(c.parentNode){g=!0;if(c.hasDependencies()&&a&&!a.isUndoingOrRedoing()){c.removeDependenciesToParents(this)}}if(f!==c.data[d]){var h=j?f:null;if(!c.phantom&&c.data[d]!==h){c.modified=c.modified||{};c.modified[d]=c.data[d]}c.data[d]=h}}if(!i){return}if(j){this.data[this.phantomIdField]=f}this.resetTotalCount(g);var n=this.callParent([b.length>1?b:b[0],k,l]);if(g){if(this.hasDependencies()){a.getDependencyStore().resetMethodsCache();if(a&&!a.isUndoingOrRedoing()){this.removeInvalidDependencies()}}this.resetTotalCount()}if(a&&!a.isUndoingOrRedoing()){this.beginEdit();this.markAsParent();this.set(this.schedulingModeField,'Normal');if(a&&b.length>1){a.suspendAutoRecalculateParents--}this.endEdit()}if(a&&a.recalculateParents&&!a.suspendAutoRecalculateParents&&!this.isRoot()&&!a.cascading&&!a.isUndoingOrRedoing()){b[0].recalculateParents()}return n},removeChild:function(h,g,f,e){var a=this,d=!a.removeChildIsCalledFromReplaceChild&&a.convertEmptyParentToLeaf&&a.childNodes.length==1,b=a.getTaskStore(!0),c;a.resetTotalCount();a.removeChildIsCalledFromReplaceChild=!1;c=a.callParent(arguments);if(e){a.resetTotalCount()}if(a.childNodes.length>0&&b&&b.recalculateParents&&!b.suspendAutoRecalculateParents&&!b.isUndoingOrRedoing()){a.childNodes[0].recalculateParents()}if(d&&!a.isRoot()&&b&&!b.isUndoingOrRedoing()){a.convertEmptyParentToLeafTask()}return c},replaceChild:function(){this.removeChildIsCalledFromReplaceChild=!0;this.callParent(arguments)},removeAll:function(){var b=this.isLeaf(),a=this.getTaskStore(!0);this.resetTotalCount();this.callParent(arguments);if(!b&&this.convertEmptyParentToLeaf&&a){this.convertEmptyParentToLeafTask()}},createNode:function(a){var h=this,b=h.getTaskStore(!0),g=b&&b.getRoot(),c;if(b){c=b.getProxy().getReader();var d=c.getChildType;c.getChildType=function(){return d.apply(this,arguments)||this.getModel()}}a=this.callParent(arguments);if(b&&c){delete c.getChildType}if(b&&g!==this&&a.isProject){return}var e=b&&b.autoNormalizeNodes&&!a.normalized&&!a.normalizeScheduled;a=this.callParent(arguments);if(e){var f=a.updateInfo;a.updateInfo=function(){f.apply(this,arguments);delete a.updateInfo;a.normalize()};a.normalizeScheduled=!0}return a}})});Ext.cmd.derive('Gnt.model.Project',Gnt.model.Task,{isProject:!0,descriptionField:'Note',allowDependenciesField:'AllowDependencies',customizableFields:[{name:'Description',type:'string'},{name:'AllowDependencies',persist:!1,type:'bool',defaultValue:!1}],recognizedSchedulingModes:['Normal'],convertEmptyParentToLeaf:!1,isEditable:function(a){switch(a){case this.nameField:case this.startDateField:case this.readOnlyField:case this.durationField:case this.durationUnitField:case this.descriptionField:case this.allowDependenciesField:return Gnt.model.Task.prototype.isEditable.apply(this,arguments);case this.endDateField:return this.isManuallyScheduled()&&Gnt.model.Task.prototype.isEditable.apply(this,arguments);default:return !1;}}},0,0,0,0,['gntmodel.project'],0,[Gnt.model,'Project'],0);Ext.cmd.derive('Sch.model.CalendarDay',Sch.model.Customizable,{idProperty:'Id',customizableFields:[{name:'Date',type:'date',dateFormat:'c',persist:!0,convert:function(b,c){if(!b){return}var a=Ext.data.Types.DATE.convert.call(this,b);if(a){Ext.Date.clearTime(a)}return a}},{name:'Weekday',type:'int'},{name:'OverrideStartDate',type:'date',dateFormat:'c'},{name:'OverrideEndDate',type:'date',dateFormat:'c'},{name:'Type',defaultValue:'DAY'},{name:'IsWorkingDay',type:'boolean',defaultValue:!1},{name:'Cls',defaultValue:'sch-nonworkingtime'},'Name',{name:'Availability',persist:!0,convert:function(a,b){if(a){return typeof a==='string'?[a]:a}else {return []}}}],availabilityCache:null,weekDayField:'Weekday',overrideStartDateField:'OverrideStartDate',overrideEndDateField:'OverrideEndDate',typeField:'Type',dateField:'Date',isWorkingDayField:'IsWorkingDay',clsField:'Cls',nameField:'Name',availabilityField:'Availability',setDate:function(a){if(a){a=Ext.Date.clearTime(a,!0)}this.set(this.dateField,a)},clearDate:function(){this.set(this.dateField,null)},getAvailability:function(b){var c=this;if(b){return this.get(this.availabilityField)}if(this.availabilityCache){return this.availabilityCache}var a=Ext.Array.map(this.get(this.availabilityField),function(a){return typeof a==='string'?c.parseInterval(a):a});this.verifyAvailability(a);return this.availabilityCache=a},setAvailability:function(a){this.availabilityCache=null;this.set(this.availabilityField,this.stringifyIntervals(a));this.getAvailability()},verifyAvailability:function(a){var b=this;a.sort(function(b,c){return b.startTime-c.startTime});Ext.Array.each(a,function(c,d){if(c.startTime>c.endTime){throw new Error('Start time '+Ext.Date.format(c.startTime,'H:i')+' is greater than end time '+Ext.Date.format(c.endTime,'H:i'))}if(d>0&&a[d-1].endTime>c.startTime){throw new Error('Availability intervals should not intersect: ['+b.stringifyInterval(a[d-1])+'] and ['+b.stringifyInterval(c)+']')}})},prependZero:function(a){return a<10?'0'+a:a},stringifyInterval:function(c){var b=c.startTime;var a=c.endTime;return this.prependZero(b.getHours())+':'+this.prependZero(b.getMinutes())+'-'+(a.getDate()==1?24:this.prependZero(a.getHours()))+':'+this.prependZero(a.getMinutes())},stringifyIntervals:function(a){var b=this;return Ext.Array.map(a,function(c){if(typeof c==='string'){return c}return b.stringifyInterval(c)})},parseInterval:function(b){var a=/(\d\d):(\d\d)-(\d\d):(\d\d)/.exec(b);if(!a){throw new Error('Invalid format for availability string: '+b+'. It should have exact format: hh:mm-hh:mm')}return {startTime:new Date(0,0,0,a[1],a[2]),endTime:new Date(0,0,0,a[3],a[4])}},getTotalHours:function(){return this.getTotalMS()/1000/60/60},getTotalMS:function(){var a=0;Ext.Array.each(this.getAvailability(),function(b){a+=b.endTime-b.startTime});return a},addAvailabilityInterval:function(a,c){var b;if(a instanceof Date){b={startTime:a,endTime:c}}else {b=this.parseInterval(a+(c?'-'+c:''))}var d=this.getAvailability().concat(b);this.verifyAvailability(d);this.setAvailability(d)},removeAvailabilityInterval:function(b){var a=this.getAvailability();a.splice(b,1);this.setAvailability(a)},getAvailabilityIntervalsFor:function(a){a=typeof a=='number'?new Date(a):a;var d=a.getFullYear();var b=a.getMonth();var c=a.getDate();return Ext.Array.map(this.getAvailability(),function(e){var f=e.endTime.getDate();return {startDate:new Date(d,b,c,e.startTime.getHours(),e.startTime.getMinutes()),endDate:new Date(d,b,c+(f==1?1:0),e.endTime.getHours(),e.endTime.getMinutes())}})},getAvailabilityStartFor:function(b){var a=this.getAvailabilityIntervalsFor(b);if(!a.length){return null}return a[0].startDate},getAvailabilityEndFor:function(b){var a=this.getAvailabilityIntervalsFor(b);if(!a.length){return null}return a[a.length-1].endDate}},0,0,0,0,0,0,[Sch.model,'CalendarDay'],0);Ext.cmd.derive('Sch.data.mixin.UniversalModelGetter',Ext.Base,{onClassMixedIn:function(a){var b={};if(a.prototype.getNodeById){b.getModelById=a.prototype.getNodeById}else {b.getModelById=a.prototype.getById}if(a.prototype.byInternalIdMap){b.getModelByInternalId=function(b){return this.byInternalIdMap[b]}}else {b.getModelByInternalId=a.prototype.getByInternalId}Ext.override(a,b)}},0,0,0,0,0,0,[Sch.data.mixin,'UniversalModelGetter'],0);Ext.cmd.derive('Robo.data.Store',Ext.Mixin,{undoRedoPostponed:null,inUndoRedoTransaction:!1,undoRedoEventBus:null,mixinConfig:{before:{constructor:'constructor',destroy:'destroy',fireEventArgs:'fireEventArgs',setRoot:'beforeSetRoot',fillNode:'beforeFillNode'},after:{setRoot:'afterSetRoot',fillNode:'afterFillNode'}},constructor:function(){var a=this;a.undoRedoEventBus=new Ext.util.Observable()},destroy:function(){Ext.destroy(this.undoRedoEventBus)},fireEventArgs:function(b,a){var c=this;if(!a.hasOwnProperty('$undoRedoEventBusFired')){a.$undoRedoEventBusFired={}}if(!a.$undoRedoEventBusFired[b]){a.$undoRedoEventBusFired[b]=!0;c.undoRedoEventBus.hasListener(b)&&c.undoRedoEventBus.fireEventArgs(b,a)}},isInUndoRedoTransaction:function(){return this.inUndoRedoTransaction},onUndoRedoTransactionStart:function(b,a){this.inUndoRedoTransaction=!0},onUndoRedoTransactionEnd:function(b,a){this.inUndoRedoTransaction=!1},isUndoingOrRedoing:function(){return !!this.undoRedoPostponed},beforeUndoRedo:function(a){this.undoRedoPostponed=[]},afterUndoRedo:function(b){var a=this;Ext.Array.forEach(a.undoRedoPostponed,function(a){a()});a.undoRedoPostponed=null},postponeAfterUndoRedo:function(a){this.undoRedoPostponed.push(a)},beforeSetRoot:function(){this.__isSettingRoot=!0},afterSetRoot:function(){this.__isSettingRoot=!1;if(!this.getRoot()){this.fireEvent('clear',this)}},beforeFillNode:function(a){if(a.isRoot()){this.beforeSetRoot()}},afterFillNode:function(a){if(a.isRoot()){this.afterSetRoot()}},isRootSettingOrLoading:function(){return this.isLoading()||this.isTreeStore&&this.__isSettingRoot}},1,0,0,0,0,0,[Robo.data,'Store'],0);Ext.cmd.derive('Sch.data.Calendar',Ext.data.Store,{model:'Sch.model.CalendarDay',daysPerMonth:30,daysPerWeek:7,hoursPerDay:24,unitsInMs:null,defaultNonWorkingTimeCssCls:'sch-nonworkingtime',weekendsAreWorkdays:!1,weekendFirstDay:6,weekendSecondDay:0,holidaysCache:null,availabilityIntervalsCache:null,daysIndex:null,weekAvailability:null,defaultWeekAvailability:null,nonStandardWeeksByStartDate:null,nonStandardWeeksStartDates:null,calendarId:null,parent:null,defaultAvailability:['00:00-24:00'],name:null,suspendCacheUpdate:0,availabilitySearchLimit:1825,inheritableStatics:{getCalendar:function(a){if(a instanceof Sch.data.Calendar){return a}return Ext.data.StoreManager.lookup('GNT_CALENDAR:'+a)},getAllCalendars:function(){var a=[];Ext.data.StoreManager.each(function(b){if(b instanceof Sch.data.Calendar){a.push(b)}});return a},removeAll:function(){var a=Ext.data.StoreManager;a.each(function(b){if(b instanceof Sch.data.Calendar){a.unregister(b);Ext.destroy(b)}})}},constructor:function(a){a=a||{};var c=a.parent;delete a.parent;var b=a.calendarId;delete a.calendarId;Ext.data.Store.prototype.constructor.apply(this,arguments);this.setParent(c);this.setCalendarId(b);this.unitsInMs={MILLI:1,SECOND:1000,MINUTE:60*1000,HOUR:60*60*1000,DAY:this.hoursPerDay*60*60*1000,WEEK:this.daysPerWeek*this.hoursPerDay*60*60*1000,MONTH:this.daysPerMonth*this.hoursPerDay*60*60*1000,QUARTER:3*this.daysPerMonth*24*60*60*1000,YEAR:4*3*this.daysPerMonth*24*60*60*1000};this.defaultWeekAvailability=this.getDefaultWeekAvailability();this.on({update:this.clearCache,datachanged:this.clearCache,clear:this.clearCache,scope:this});this.clearCache()},getCalendarId:function(){return this.calendarId},setCalendarId:function(a){if(this.calendarId!=null){Ext.data.StoreManager.unregister(this)}this.calendarId=a;if(a!=null){this.storeId='GNT_CALENDAR:'+a;Ext.data.StoreManager.register(this)}else {this.storeId=null}var b=this.proxy;if(b&&b.extraParams){b.extraParams.calendarId=a}},getDefaultWeekAvailability:function(){var b=this.defaultAvailability;var e=this.weekendFirstDay;var d=this.weekendSecondDay;var c=[];for(var a=0;a<7;a++){c.push(this.weekendsAreWorkdays||a!=e&&a!=d?new this.model({Type:'WEEKDAY',Weekday:a,Availability:b&&b.slice()||[],IsWorkingDay:!0}):new this.model({Type:'WEEKDAY',Weekday:a,Availability:[]}))}return c},clearCache:function(){if(this.suspendCacheUpdate>0){return}this.holidaysCache={};this.availabilityIntervalsCache={};var d=this.daysIndex={};var c=this.weekAvailability=[];var b=this.nonStandardWeeksStartDates=[];var a=this.nonStandardWeeksByStartDate={};this.each(function(e){var n=e.getId();var g=/^(\d)-(\d\d\d\d\/\d\d\/\d\d)-(\d\d\d\d\/\d\d\/\d\d)$/.exec(n);var k=/^WEEKDAY:(\d+)$/.exec(n);var l=e.getType();var f=e.getWeekday();if(l=='WEEKDAYOVERRIDE'||g){var i,j;if(l=='WEEKDAYOVERRIDE'){i=e.getOverrideStartDate();j=e.getOverrideEndDate()}if(g){i=Ext.Date.parse(g[2],'Y/m/d');j=Ext.Date.parse(g[3],'Y/m/d');f=g[1]}if(i&&j&&f!=null){var h=i-0;if(!a[h]){a[h]={startDate:new Date(i),endDate:new Date(j),name:e.getName(),weekAvailability:[],mainDay:null};b.push(h)}if(f>=0){a[h].weekAvailability[f]=e}else {a[h].mainDay=e}}}else {if(l=='WEEKDAY'||k){if(k){f=k[1]}if(f!=null){if(f<0||f>6){throw new Error('Incorrect week day index')}c[f]=e}}else {var m=e.getDate();if(m){d[m-0]=e}}}});b.sort(function(a,b){return a-b});this.fireEvent('calendarchange',this)},intersectsWithCurrentWeeks:function(a,b){var c=!1;this.forEachNonStandardWeek(function(f){var d=f.startDate;var e=f.endDate;if(d<=a&&a<e||d<b&&b<=e){c=!0;return !1}});return c},addNonStandardWeek:function(a,b,g,e){a=Ext.Date.clearTime(new Date(a));b=Ext.Date.clearTime(new Date(b));if(this.intersectsWithCurrentWeeks(a,b)){throw new Error('Can not add intersecting week')}var f=this.model;var d=[];Ext.Array.each(g,function(c,i){if(c instanceof Sch.model.CalendarDay){c.setType('WEEKDAYOVERRIDE');c.setOverrideStartDate(a);c.setOverrideEndDate(b);c.setWeekday(i);c.setName(e||'Week override');d.push(c)}else {if(Ext.isArray(c)){var h=new f();h.setType('WEEKDAYOVERRIDE');h.setOverrideStartDate(a);h.setOverrideEndDate(b);h.setWeekday(i);h.setName(e||'Week override');h.setAvailability(c);d.push(h)}}});var c=new f();c.setType('WEEKDAYOVERRIDE');c.setOverrideStartDate(a);c.setOverrideEndDate(b);c.setWeekday(-1);c.setName(e||'Week override');d.push(c);this.add(d)},getNonStandardWeekByStartDate:function(a){return this.nonStandardWeeksByStartDate[Ext.Date.clearTime(new Date(a))-0]||null},getNonStandardWeekByDate:function(a){a=Ext.Date.clearTime(new Date(a))-0;var d=this.nonStandardWeeksStartDates;var e=this.nonStandardWeeksByStartDate;for(var c=0;c<d.length;c++){var b=e[d[c]];if(b.startDate>a){break}if(b.startDate<=a&&a<=b.endDate){return b}}return null},removeNonStandardWeek:function(a){a=Ext.Date.clearTime(new Date(a))-0;var b=this.getNonStandardWeekByStartDate(a);if(!b){return}this.remove(Ext.Array.clean(b.weekAvailability).concat(b.mainDay))},forEachNonStandardWeek:function(e,d){var f=this;var b=this.nonStandardWeeksStartDates;var c=this.nonStandardWeeksByStartDate;for(var a=0;a<b.length;a++){if(e.call(d||f,c[b[a]])===!1){return !1}}},setWeekendsAreWorkDays:function(a){if(a!==this.weekendsAreWorkdays){this.weekendsAreWorkdays=a;this.defaultWeekAvailability=this.getDefaultWeekAvailability();this.clearCache()}},areWeekendsWorkDays:function(){return this.weekendsAreWorkdays},getCalendarDay:function(a){a=typeof a=='number'?new Date(a):a;return this.getOverrideDay(a)||this.getWeekDay(a.getDay(),a)||this.getDefaultCalendarDay(a.getDay())},getOverrideDay:function(a){return this.getOwnCalendarDay(a)||this.parent&&this.parent.getOverrideDay(a)||null},getOwnCalendarDay:function(a){a=typeof a=='number'?new Date(a):a;return this.daysIndex[Ext.Date.clearTime(a,!0)-0]},getWeekDay:function(a,b){if(b){var c=this.getNonStandardWeekByDate(b);if(c&&c.weekAvailability[a]){return c.weekAvailability[a]}}return this.weekAvailability[a]||this.parent&&this.parent.getWeekDay(a,b)||null},getDefaultCalendarDay:function(a){if(!this.hasOwnProperty('defaultAvailability')&&!this.hasOwnProperty('weekendsAreWorkdays')&&this.parent){return this.parent.getDefaultCalendarDay(a)}return this.defaultWeekAvailability[a]},isHoliday:function(a){var b=a-0;var c=this.holidaysCache;if(c[b]!=null){return c[b]}a=typeof a=='number'?new Date(a):a;var d=this.getCalendarDay(a);if(!d){throw new Error("Can't find day for "+a)}return c[b]=!d.getIsWorkingDay()},isWeekend:function(b){var a=b.getDay();return a===this.weekendFirstDay||a===this.weekendSecondDay},isWorkingDay:function(a){return !this.isHoliday(a)},convertMSDurationToUnit:function(a,b){return a/this.unitsInMs[Sch.util.Date.getNameOfUnit(b)]},convertDurationToMs:function(a,b){return a*this.unitsInMs[Sch.util.Date.getNameOfUnit(b)]},getHolidaysRanges:function(c,d,i){if(c>d){Ext.Error.raise("startDate can't be bigger than endDate")}c=Ext.Date.clearTime(c,!0);d=Ext.Date.clearTime(d,!0);var e=[],a,b;for(b=c;b<d;b=Sch.util.Date.getNext(b,Sch.util.Date.DAY,1)){if(this.isHoliday(b)||this.weekendsAreWorkdays&&i&&this.isWeekend(b)){var h=this.getCalendarDay(b);var f=h&&h.getCls()||this.defaultNonWorkingTimeCssCls;var g=Sch.util.Date.getNext(b,Sch.util.Date.DAY,1);if(!a){a=new Sch.model.Range({StartDate:b,EndDate:g,Cls:f})}else {if(a.getCls()==f){a.setEndDate(g)}else {e.push(a);a=new Sch.model.Range({StartDate:b,EndDate:g,Cls:f})}}}else {if(a){e.push(a);a=null}}}if(a){e.push(a)}return e},forEachAvailabilityInterval:function(e,p,l){l=l||this;var q=this;var b=e.startDate;var c=e.endDate;var a=e.isForward!==!1;if(a?!b:!c){throw new Error('At least `startDate` or `endDate` is required, depending from the `isForward` option')}var d=new Date(a?b:c);var h=Sch.util.Date;if(a){if(!c){c=h.add(b,'d',e.availabilitySearchLimit||this.availabilitySearchLimit||5*365)}}else {if(!b){b=h.add(c,'d',-(e.availabilitySearchLimit||this.availabilitySearchLimit||5*365))}}var g=!1;while(a?d<c:d>b){var k=this.getAvailabilityIntervalsFor(d-(a?0:1),a?g:!1);for(var f=a?0:k.length-1;a?f<k.length:f>=0;a?f++:f--){var m=k[f];var i=m.startDate;var j=m.endDate;if(i>=c||j<=b){continue}var n=i<b?b:i;var o=j>c?c:j;if(p.call(l,n,o)===!1){return !1}}d=a?h.getStartOfNextDay(d,!1,g):h.getEndOfPreviousDay(d,g);g=!0}},calculateDuration:function(b,c,d){var a=0;this.forEachAvailabilityInterval({startDate:b,endDate:c},function(e,f){var g=e.getTimezoneOffset()-f.getTimezoneOffset();a+=f-e+g*60*1000});return this.convertMSDurationToUnit(a,d)},calculateEndDate:function(b,a,f){if(!a){return new Date(b)}var e=Sch.util.Date,c;a=this.convertDurationToMs(a,f);var d=a===0&&Ext.Date.clearTime(b,!0)-b===0?e.add(b,Sch.util.Date.DAY,-1):b;this.forEachAvailabilityInterval({startDate:d},function(d,e){var g=e-d;var h=d.getTimezoneOffset()-e.getTimezoneOffset();if(g>=a){c=new Date(d-0+a);return !1}else {a-=g+h*60*1000}});return c},calculateStartDate:function(c,a,d){if(!a){return new Date(c)}var b;a=this.convertDurationToMs(a,d);this.forEachAvailabilityInterval({endDate:c,isForward:!1},function(g,e){var f=e-g;if(f>=a){b=new Date(e-a);return !1}else {a-=f}});return b},skipNonWorkingTime:function(a,b){var c=!1;this.forEachAvailabilityInterval(b?{startDate:a}:{endDate:a,isForward:!1},function(d,e){a=b?d:e;c=!0;return !1});if(!c){throw new Error('skipNonWorkingTime: Cannot skip non-working time, please ensure that this calendar has any working period of time specified')}return new Date(a)},skipWorkingTime:function(b,a,c){return a>=0?this.calculateEndDate(b,a,c):this.calculateStartDate(b,-a,c)},getAvailabilityIntervalsFor:function(a,b){if(b){a=a.valueOf()}else {if(a instanceof Date){a=(new Date(a.getFullYear(),a.getMonth(),a.getDate())).valueOf()}else {a=Ext.Date.clearTime(new Date(a)).valueOf()}}return this.availabilityIntervalsCache[a]=this.availabilityIntervalsCache[a]||this.getCalendarDay(a).getAvailabilityIntervalsFor(a)},isChildOf:function(c){var a=this,b=!1;while(a&&!b){b=a===c;a=a.parent}return b},getParentableCalendars:function(){var b=this,a=[],c=Sch.data.Calendar.getAllCalendars();Ext.Array.each(c,function(c){if(c!==b&&!c.isChildOf(b)){a.push({Id:c.calendarId,Name:c.name||c.calendarId})}});return a},setParent:function(d){var a=Sch.data.Calendar.getCalendar(d);if(d&&!a){throw new Error('Invalid parent specified for the calendar')}if(this.parent!=a){var c=this.proxy;var e={calendarchange:this.clearCache,destroy:this.onParentDestroy,scope:this};var b=this.parent;if(b){b.un(e)}this.parent=a;if(a){a.on(e)}if(c&&c.extraParams){c.extraParams.parentId=a?a.calendarId:null}this.clearCache();this.fireEvent('parentchange',this,a,b)}},onParentDestroy:function(){this.setParent(null)},isAvailabilityIntersected:function(h,j,k){var g,c,f,b;for(var a=0;a<7;a++){g=this.getWeekDay(a)||this.getDefaultCalendarDay(a);f=h.getWeekDay(a)||h.getDefaultCalendarDay(a);if(!g||!f){continue}c=g.getAvailability();b=f.getAvailability();for(var d=0,m=c.length;d<m;d++){for(var e=0,l=b.length;e<l;e++){if(b[e].startTime<c[d].endTime&&b[e].endTime>c[d].startTime){return !0}}}}var i=!1;this.forEachNonStandardWeek(function(a){if(a.startDate>=k){return !1}if(j<a.endDate){i=!0;return !1}});return i}},1,0,0,0,['store.calendar'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'Calendar'],0);Ext.cmd.derive('Gnt.model.CalendarDay',Sch.model.CalendarDay,{customizableFields:[{name:'Cls',defaultValue:'gnt-holiday'}]},0,0,0,0,0,0,[Gnt.model,'CalendarDay'],0);Ext.cmd.derive('Gnt.data.Calendar',Sch.data.Calendar,{model:'Gnt.model.CalendarDay',defaultNonWorkingTimeCssCls:'gnt-holiday'},0,0,0,0,0,0,[Gnt.data,'Calendar'],0);Ext.cmd.derive('Sch.patches.CollectionKey',Sch.util.Patch,{target:'Ext.util.CollectionKey',minVersion:'6.0.0',maxVersion:'6.3.0',reportUrl:'https://www.sencha.com/forum/showthread.php?310532-Ext.util.Collection-key-configuration-application-and-cloning-is-broken',obsoleteTestName:'patches/001_collection_key.t.js',description:["Ext.util.CollectionKey::clone() is broken due to wrong usage of Ext's configuration facility.",'We relay on the (though) private Ext.data.LocalStore::extraKeys configuration, we use it to define additional','unique but complex keys for Assignment and Dependency stores. Upon store filtering such keys are being cloned',"but due to the broken config key's clone() method throws an exception"].join(' '),applyFn:function(){var a;a=Ext.util.CollectionKey.prototype.applyKeyFn;Ext.util.CollectionKey.prototype.applyKeyFn=Ext.identityFn;Ext.util.CollectionKey.prototype.updateKeyFn=a}},0,0,0,0,0,0,[Sch.patches,'CollectionKey'],0);Ext.cmd.derive('Sch.data.mixin.CacheHintHelper',Ext.Mixin,{mixinConfig:{before:{loadRecords:'loadRecords',removeAll:'removeAll'}},loadRecords:function(){this.fireEvent('cacheresethint',this)},removeAll:function(a){if(a){this.fireEvent('cacheresethint',this)}}},0,0,0,0,0,0,[Sch.data.mixin,'CacheHintHelper'],0);Ext.cmd.derive('Sch.model.DependencyBase',Sch.model.Customizable,{inheritableStatics:{Type:{StartToStart:0,StartToEnd:1,EndToStart:2,EndToEnd:3}},idProperty:'Id',customizableFields:[{name:'From'},{name:'To'},{name:'Type',type:'int',defaultValue:2},{name:'Cls',defaultValue:''},{name:'Bidirectional',type:'boolean'},{name:'FromSide',type:'string'},{name:'ToSide',type:'string'},{name:'Highlighted',type:'string',persist:!1,defaultValue:''}],fromField:'From',toField:'To',typeField:'Type',clsField:'Cls',bidirectionalField:'Bidirectional',constructor:function(a){var b=this;Sch.model.Customizable.prototype.constructor.apply(this,arguments);if(a){if(a[b.fromField]&&a[b.fromField] instanceof Sch.model.Range){b.setSourceEvent(a[b.fromField]);delete a.fromField}if(a[b.toField]&&a[b.toField] instanceof Sch.model.Range){b.setTargetEvent(a[b.toField]);delete a.toField}}},getEventStore:function(){return this.store.getEventStore()},getSourceEvent:function(b){var a=this;return (b||a.getEventStore()).getModelById(a.getSourceId())},setSourceEvent:function(a){this.setSourceId(a.getId())},getTargetEvent:function(b){var a=this;return (b||a.getEventStore()).getModelById(a.getTargetId())},setTargetEvent:function(a){this.setTargetId(a.getId())},getSourceId:function(){return this.getFrom()},setSourceId:function(a){return this.setFrom(a)},getTargetId:function(){return this.getTo()},setTargetId:function(a){return this.setTo(a)},isPersistable:function(){var c=this,a=c.getSourceEvent(),b=c.getTargetEvent();return a&&!a.phantom&&b&&!b.phantom},getDateRange:function(){var b=this.getSourceEvent();var d=this.getTargetEvent();if(b&&d&&b.isScheduled()&&d.isScheduled()){var e=this.self.Type;var a,c;switch(this.getType()){case e.StartToStart:a=b.getStartDate();c=d.getStartDate();break;case e.StartToEnd:a=b.getStartDate();c=d.getEndDate();break;case e.EndToEnd:a=b.getEndDate();c=d.getEndDate();break;case e.EndToStart:a=b.getEndDate();c=d.getStartDate();break;}return {start:Sch.util.Date.min(a,c),end:Sch.util.Date.max(a,c)}}return null},highlight:function(a){var b=this,c=b.getHighlighted().split(' ');!Ext.Array.contains(c,a)&&b.setHighlighted(c.concat(a).join(' '))},unhighlight:function(a){var b=this,c=b.getHighlighted().split(' ');Ext.Array.contains(c,a)&&b.setHighlighted(Ext.Array.remove(c,a).join(' '))},isHighlightedWith:function(a){var b=this,c=b.getHighlighted().split(' ');return Ext.Array.contains(c,a)}},1,0,0,0,0,0,[Sch.model,'DependencyBase'],0);Ext.cmd.derive('Sch.model.Dependency',Sch.model.DependencyBase,{isValid:function(e){var a=this,f=Sch.model.DependencyBase.prototype.isValid.apply(this,arguments),b=a.getSourceId(),c=a.getTargetId(),d=a.getType();return Ext.isNumber(d)&&!Ext.isEmpty(b)&&!Ext.isEmpty(c)&&b!=c},getTypeFromSides:function(e,c,d){var a=this.self.Type,b=d?'right':'left',f=d?'left':'right';if(e===b){return c===b?a.StartToStart:a.StartToEnd}return c===f?a.EndToEnd:a.EndToStart}},0,0,0,0,0,0,[Sch.model,'Dependency'],0);Ext.cmd.derive('Sch.data.DependencyStore',Ext.data.Store,{config:{extraKeys:{bySourceTargetId:{keyFn:function(a){return Sch.data.DependencyStore.makeDependencySourceTargetCompositeKey(a.getSourceId(),a.getTargetId())}}}},model:'Sch.model.Dependency',storeId:'dependencies',eventStoreDetacher:null,eventStore:null,constructor:function(b){var a=this;Ext.data.Store.prototype.constructor.call(this,b);a.eventDependencyCache=a.eventDependencyCache||a.createEventDependencyCache()},destroy:function(){var a=this;Ext.destroyMembers(a,'eventDependencyCache','eventStoreDetacher');Ext.data.Store.prototype.destroy.call(this)},createEventDependencyCache:function(){return new Sch.data.util.EventDependencyCache(this)},getEventStore:function(){return this.eventStore},setEventStore:function(b){var a=this,c=a.eventStore;a.eventStore=b&&Ext.StoreMgr.lookup(b)||null;a.attachToEventStore(a.eventStore);if((c||b)&&c!==b){a.fireEvent('eventstorechange',a,b,c)}},attachToEventStore:function(b){var a=this;Ext.destroy(a.eventStoreDetacher);if(b&&b.isTreeStore){a.eventStoreDetacher=b.on({'noderemove':a.onEventNodeRemove,scope:a,destroyable:!0,priority:200})}else {if(b){a.eventStoreDetacher=b.on({'remove':a.onEventRemove,scope:a,destroyable:!0,priority:200})}}},onEventRemove:function(c,a,d,b){!b&&this.removeEventDependencies(a,!1)},onEventNodeRemove:function(c,b,a){!a&&this.removeEventDependencies(b,!1)},reduceEventDependencies:function(a,d,e,c,b){var f=this;b=b||function(g){var h=g instanceof Ext.data.Model&&g.getId()||g;return f.eventDependencyCache.get(g,function(){return Ext.Array.filter(f.getRange(),function(f){return f.getTargetId()==h||f.getSourceId()==h})})};a=Ext.isArray(a)?a:[a];c=c===undefined?!0:!1;Ext.Array.reduce(a,function(f,g){if(g.isNode&&!c){g.cascadeBy(function(h){f=Ext.Array.reduce(b(h),d,f)})}else {f=Ext.Array.reduce(b(g),d,f)}},e);return e},reduceEventIncomingDependencies:function(d,b,c,e){var a=this;return a.reduceEventDependencies(d,b,c,e,function(f){var g=f instanceof Ext.data.Model&&f.getId()||f;return a.eventDependencyCache.getPredecessors(f,function(){return Ext.Array.filter(a.getRange(),function(a){return a.getTargetId()==g})})})},reduceEventOutgoingDependencies:function(d,b,c,e){var a=this;return a.reduceEventDependencies(d,b,c,e,function(f){var g=f instanceof Ext.data.Model&&f.getId()||f;return a.eventDependencyCache.getSuccessors(f,function(){return Ext.Array.filter(a.getRange(),function(a){return a.getSourceId()==g})})})},mapEventDependencies:function(c,e,b,d,a){return this.reduceEventDependencies(c,function(g,f){b(f)&&g.push(f);return g},[],d,a)},mapEventIncomingDependencies:function(b,d,a,c){return this.reduceEventIncomingDependencies(b,function(f,e){a(e)&&f.push(e);return f},[],c)},mapEventOutgoingDependencies:function(b,d,a,c){return this.reduceEventOutgoingDependencies(b,function(f,e){a(e)&&f.push(e);return f},[],c)},getEventDependencies:function(a,b){return this.mapEventDependencies(a,Ext.identityFn,Ext.returnTrue,b)},getEventIncomingDependencies:function(a,b){return this.mapEventIncomingDependencies(a,Ext.identityFn,Ext.returnTrue,b)},getEventOutgoingDependencies:function(a,b){return this.mapEventOutgoingDependencies(a,Ext.identityFn,Ext.returnTrue,b)},getEventPredecessors:function(c,d){var a=this,b=a.getEventStore();return a.reduceEventDependencies(c,function(f,g){var a=g.getFrom(),e=a&&b.getModelById(a);if(e){f.push(e)}return f},[],d,function(b){return a.eventDependencyCache.getPredecessors(b)})},getEventSuccessors:function(c,d){var a=this,b=a.getEventStore();return a.reduceEventDependencies(c,function(f,g){var a=g.getTo(),e=a&&b.getModelById(a);if(e){f.push(e)}return f},[],d,function(b){return a.eventDependencyCache.getSuccessors(b)})},removeEventDependencies:function(c,d){var b=this,a;a=b.getEventDependencies(c,d);a.length&&b.remove(Ext.Array.unique(a))},removeEventIncomingDependencies:function(c,d){var b=this,a;a=b.getEventIncomingDependencies(c,d);a.length&&b.remove(Ext.Array.unique(a))},removeEventOutgoingDependencies:function(c,d){var b=this,a;a=b.getEventOutgoingDependencies(c,d);a.length&&b.remove(Ext.Array.unique(a))},getDependencyForSourceAndTargetEvents:function(a,b){var c=this;a=a instanceof Ext.data.Model&&a.getId()||a;b=b instanceof Ext.data.Model&&b.getId()||b;return c.bySourceTargetId.get(c.self.makeDependencySourceTargetCompositeKey(a,b))},getEventsLinkingDependency:function(a,b){var c=this;return c.getDependencyForSourceAndTargetEvents(a,b)||c.getDependencyForSourceAndTargetEvents(b,a)},isValidDependency:function(a){var b=a.getSourceId();var c=a.getTargetId();return b!=null&&c!=null&&b!==c},getHighlightedDependencies:function(a){return Ext.Array.reduce(this.getRange(),function(b,c){if(c.isHighlightedWith(a)){b.push(c)}return b},[])},inheritableStatics:{makeDependencySourceTargetCompositeKey:function(){var a=[];return function(b,c){a.length=0;a.push('source(',b,')-target(',c,')');return a.join('')}}()}},1,0,0,0,['store.sch_dependencystore'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'DependencyStore'],0);Ext.cmd.derive('Sch.util.Cache',Ext.Base,{cache:null,constructor:function(){var a=this;a.cache={}},key:function(a){var b;if(a instanceof Ext.data.Model){b=a.getId().toString()}else {if(a===undefined||a===null){b='[ undefined / null ]'}else {b=a.toString()}}return b},has:function(a){var b=this;a=b.key(a);return b.cache.hasOwnProperty(a)},get:function(b,d){var c=this,a;b=c.key(b);a=c.cache.hasOwnProperty(b)&&c.cache[b];if(!a&&d){a=d()}else {if(!a){a=[]}}c.cache[b]=a;return a},add:function(c,d){var a=this,b=a.key(c);if(!a.cache.hasOwnProperty(b)){a.cache[b]=a.get(c)}arguments.length>1&&Ext.Array.include(a.cache[b],d);return a},set:function(d,c){var a=this,b=a.key(d);a.cache[b]=c;return a},remove:function(b,c){var a=this;b=a.key(b);if(a.cache.hasOwnProperty(b)){Ext.Array.remove(a.cache[b],c)}return a},move:function(b,c,d){var a=this;b=a.key(b);c=a.key(c);if(b!=c&&arguments.length>=3){a.remove(b,d);a.add(c,d)}else {if(b!=c&&a.cache.hasOwnProperty(b)&&a.cache.hasOwnProperty(c)){a.cache[c]=Ext.Array.union(a.cache[c],a.cache[b]);a.cache[b]=[]}else {if(b!=c&&a.cache.hasOwnProperty(b)){a.cache[c]=a.cache[b];a.cache[b]=[]}}}return a},clear:function(b){var a=this;if(!arguments.length){a.cache={}}else {b=a.key(b);if(a.cache.hasOwnProperty(b)){delete a.cache[b]}}return a},uncache:function(c){var a=this,b;for(b in a.cache){if(a.cache.hasOwnProperty(b)){a.cache[b]=Ext.Array.remove(a.cache[b],c)}}return a},inheritableStatics:{}},1,0,0,0,0,0,[Sch.util,'Cache'],0);Ext.cmd.derive('Sch.data.util.EventDependencyCache',Sch.util.Cache,function(){var b={allowNull:!1,filtered:!1,collapsed:!0};var a=[null];function cacheDependencies(a,b){Ext.Array.each(b,function(c){var d=c.getSourceId(),e=c.getTargetId();if(d){a.add(d,c)}if(e){a.add(e,c)}if(d&&e){a.addSuccessor(d,c);a.addPredecessor(e,c)}})}function uncacheDependencies(a,b){Ext.Array.each(b,function(c){var d=c.getSourceId(),e=c.getTargetId();if(d){a.remove(d,c);a.removeSuccessor(d,c)}if(e){a.remove(e,c);a.removePredecessor(e,c)}})}function uncacheEventDependencies(a,b){Ext.Array.each(b,function(c){a.clear(c);a.clearSuccessors(c);a.clearPredecessors(c)})}function updateDependency(b,c,e,d,f,a){if(c!==e){b.move(e,c,a);b.moveSuccessors(e,c,a)}if(d!==f){b.move(f,d,a);b.movePredecessors(f,d,a)}}function moveDependencies(c,b,a){c.move(b,a);c.moveSuccessors(b,a);c.movePredecessors(b,a)}function complementCache(a,b){Ext.Array.each(b,function(c){if(!a.has(c)){a.set(c,[]);a.setSuccessors(c,[]);a.setPredecessors(c,[])}})}function recacheAll(c,d,a){c.clear();cacheDependencies(c,d.getRange());a&&(!a.getRoot||a.getRoot())&&complementCache(c,a.collect(a.getModel().idProperty,b))}function recacheKeys(a,b,d,c){b=Ext.Array.reduce(b,function(f,e){a.set(e,[]);f[a.key(e)]=!0},{});d.each(function(e){var f=e.getSourceId(),g=e.getTargetId(),i=b.hasOwnProperty(f),h=b.hasOwnProperty(g);i&&a.add(f,e);i&&a.addSuccessor(f,e);h&&a.add(g,e);h&&a.addPredecessor(g,e)});Ext.Object.each(b,function(e){if(!a.has(e)&&(c.getNodeById?c.getNodeById(e):c.getById(e))){a.set(e,[])}})}return {dependencyStore:null,dependencyStoreDetacher:null,eventStoreDetacher:null,constructor:function(c){var b=this,d;Sch.util.Cache.prototype.constructor.call(this);b.dependencyStore=c;function onDependencyAdd(d,a){cacheDependencies(b,a)}function onDependencyRemove(f,a,e,d){!d&&uncacheDependencies(b,a)}function onDependencyUpdate(k,a,j){var f=a.fromField,g=a.toField,d=a.previous&&f in a.previous,e=a.previous&&g in a.previous,h=d&&a.previous[f],i=e&&a.previous[g];if(d||e){updateDependency(b,d?a.getSourceId():!1,d?h:!1,e?a.getTargetId():!1,e?i:!1,a)}}function onDependencyStoreRefreshClearReset(a){recacheAll(b,a,a.getEventStore())}function onDependencyStoreEventStoreChange(d,a){recacheAll(b,d,a);attachToEventStore(a)}function onEventIdChanged(e,f,d,a){moveDependencies(b,d,a)}function onEventAdd(d,a){complementCache(b,a)}function onEventNodeAppend(e,d){complementCache(b,a[0]=d,a)}function onEventNodeInsert(e,d){complementCache(b,a[0]=d,a)}function onEventRemove(f,a,e,d){!d&&uncacheEventDependencies(b,a)}function onEventNodeRemove(f,e,d){!d&&uncacheEventDependencies(b,a[0]=e,a)}function onEventStoreRefreshClearReset(){recacheAll(b,b.dependencyStore,b.dependencyStore.getEventStore())}function onCacheInvalidate(d,a){if(!a){recacheAll(b,b.dependencyStore,b.eventStore)}else {if(!Ext.isArray(a)){a=[a]}recacheKeys(b,a,b.dependencyStore,b.eventStore)}}function attachToEventStore(d){var a;Ext.destroy(b.eventStoreDetacher);if(d){a={'idchanged':onEventIdChanged,'cacheresethint':onEventStoreRefreshClearReset,'clear':onEventStoreRefreshClearReset,'refresh':onEventStoreRefreshClearReset,'event-dependency-cache-invalidate':onCacheInvalidate,priority:100,destroyable:!0};if(d.isTreeStore){a=Ext.apply(a,{'nodeappend':onEventNodeAppend,'nodeinsert':onEventNodeInsert,'noderemove':onEventNodeRemove,'rootchange':onEventStoreRefreshClearReset})}else {a=Ext.apply(a,{'add':onEventAdd,'remove':onEventRemove})}b.eventStoreDetacher=d.on(a)}}b.dependencyStoreDetacher=c.on({'add':onDependencyAdd,'remove':onDependencyRemove,'update':onDependencyUpdate,'refresh':onDependencyStoreRefreshClearReset,'cacheresethint':onDependencyStoreRefreshClearReset,'clear':onDependencyStoreRefreshClearReset,'eventstorechange':onDependencyStoreEventStoreChange,'event-dependency-cache-invalidate':onCacheInvalidate,priority:100,destroyable:!0});recacheAll(b,c,c.getEventStore())},destroy:function(){var a=this;Ext.destroyMembers(a,'dependencyStoreDetacher','eventStoreDetacher');a.dependencyStore=null},get:function(a,b){var c=this;return Sch.util.Cache.prototype.get.call(this,a)},getSuccessors:function(c,b){var a=this;return a.get(a.self.makeSuccessorsKey(a.key(c)),b)},getPredecessors:function(c,b){var a=this;return a.get(a.self.makePredecessorsKey(a.key(c)),b)},addSuccessor:function(b,c){var a=this;return arguments.length>1?a.add(a.self.makeSuccessorsKey(a.key(b)),c):a.add(a.self.makeSuccessorsKey(a.key(b)))},addPredecessor:function(b,c){var a=this;return arguments.length>1?a.add(a.self.makePredecessorsKey(a.key(b)),c):a.add(a.self.makePredecessorsKey(a.key(b)))},setSuccessors:function(c,b){var a=this;a.set(a.self.makeSuccessorsKey(a.key(c)),b)},setPredecessors:function(c,b){var a=this;a.set(a.self.makePredecessorsKey(a.key(c)),b)},removeSuccessor:function(b,c){var a=this;return a.remove(a.self.makeSuccessorsKey(a.key(b)),c)},removePredecessor:function(b,c){var a=this;return a.remove(a.self.makePredecessorsKey(a.key(b)),c)},moveSuccessors:function(c,b,d){var a=this;return arguments.length>=3?a.move(a.self.makeSuccessorsKey(a.key(c)),a.self.makeSuccessorsKey(a.key(b)),d):a.move(a.self.makeSuccessorsKey(a.key(c)),a.self.makeSuccessorsKey(a.key(b)))},movePredecessors:function(c,b,d){var a=this;return arguments.length>=3?a.move(a.self.makePredecessorsKey(a.key(c)),a.self.makePredecessorsKey(a.key(b)),d):a.move(a.self.makePredecessorsKey(a.key(c)),a.self.makePredecessorsKey(a.key(b)))},clearSuccessors:function(b){var a=this;return a.clear(a.self.makeSuccessorsKey(a.key(b)))},clearPredecessors:function(b){var a=this;return a.clear(a.self.makePredecessorsKey(a.key(b)))},inheritableStatics:{splitKey:function(a){a=a.split('@#!#@');return {id:a[0],type:a.length&&a[1]||!1}},makeSuccessorsKey:function(a){return a+'@#!#@succ'},makePredecessorsKey:function(a){return a+'@#!#@pred'}}}},1,0,0,0,0,0,[Sch.data.util,'EventDependencyCache'],0);Ext.cmd.derive('Gnt.data.util.TaskDependencyCache',Sch.data.util.EventDependencyCache,function(a){function keyToTask(d,b){var c;if(!(b instanceof Ext.data.Model)){c=d.dependencyStore.getTaskStore();b=c&&c.getModelById(b)}return b}function fillSuccessors(b,c){var d=keyToTask(b,c);d&&(d.successors=b.getSuccessors(c))}function fillPredecessors(b,c){var d=keyToTask(b,c);d&&(d.predecessors=b.getPredecessors(c))}function clearSuccessorsPredecessors(d){var c=d.dependencyStore.getTaskStore(),b=c&&c.getRoot();b&&b.cascadeBy(function(b){b.successors=[];b.predecessors=[]})}function fillTasksWithDepInfo(b){var d=b.dependencyStore.getTaskStore(),c=d&&d.getRoot();c&&c.cascadeBy(function(c){c.successors=b.getSuccessors(c);c.predecessors=b.getPredecessors(c)})}return {taskStoreDetacher:null,taskStoreDependencyStoreDetacher:null,constructor:function(c){var b=this,d;Sch.data.util.EventDependencyCache.prototype.constructor.call(this,c);function onTaskStoreRootChange(d){fillTasksWithDepInfo(b)}function onTaskStoreNodeAppend(e,d){fillSuccessors(b,d);fillPredecessors(b,d)}function onTaskStoreNodeInsert(e,d){fillSuccessors(b,d);fillPredecessors(b,d)}function onTaskStoreRefresh(d){fillTasksWithDepInfo(b)}function onDependencyStoreTaskStoreChange(d,b){attachToTaskStore(b)}function onDependencyStoreRefresh(d){fillTasksWithDepInfo(b)}function attachToTaskStore(d){Ext.destroy(b.taskStoreDetacher);b.taskStoreDetacher=d&&d.on({'rootchange':onTaskStoreRootChange,'nodeappend':onTaskStoreNodeAppend,'nodeinsert':onTaskStoreNodeInsert,'refresh':onTaskStoreRefresh,priority:99,destroyable:!0});fillTasksWithDepInfo(b)}b.taskStoreDependencyStoreDetacher=c.on({'eventstorechange':onDependencyStoreTaskStoreChange,'refresh':onDependencyStoreRefresh,priority:100,destroyable:!0});attachToTaskStore(c.getTaskStore())},destroy:function(){var b=this;Sch.data.util.EventDependencyCache.prototype.destroy.call(this);Ext.destroyMembers(b,'taskStoreDetacher','taskStoreDependencyStoreDetacher')},addSuccessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.addSuccessor.call(this,b,d);fillSuccessors(c,b)},addPredecessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.addPredecessor.call(this,b,d);fillPredecessors(c,b)},setSuccessors:function(b,c){var d=this;Sch.data.util.EventDependencyCache.prototype.setSuccessors.call(this,b,c);fillSuccessors(d,b)},setPredecessors:function(b,c){var d=this;Sch.data.util.EventDependencyCache.prototype.setPredecessors.call(this,b,c);fillPredecessors(d,b)},removeSuccessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.removeSuccessor.call(this,b,d);fillSuccessors(c,b)},removePredecessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.removePredecessor.call(this,b,d);fillPredecessors(c,b)},moveSuccessors:function(d,c,e){var b=this;Sch.data.util.EventDependencyCache.prototype.moveSuccessors.apply(this,arguments);fillSuccessors(b,d);fillSuccessors(b,c)},movePredecessors:function(d,c,e){var b=this;Sch.data.util.EventDependencyCache.prototype.movePredecessors.apply(this,arguments);fillPredecessors(b,d);fillPredecessors(b,c)},clearSuccessors:function(b){var c=this;Sch.data.util.EventDependencyCache.prototype.clearSuccessors.call(this,b);fillSuccessors(c,b)},clearPredecessors:function(b){var c=this;Sch.data.util.EventDependencyCache.prototype.clearPredecessors.call(this,b);fillPredecessors(c,b)},clear:function(c){var b=this;Sch.data.util.EventDependencyCache.prototype.clear.apply(this,arguments);if(c){fillSuccessors(b,c);fillPredecessors(b,c)}else {clearSuccessorsPredecessors(b)}}}},1,0,0,0,0,0,[Gnt.data.util,'TaskDependencyCache'],0);Ext.cmd.derive('Gnt.model.Dependency',Sch.model.DependencyBase,{customizableFields:[{name:'Lag',type:'number',defaultValue:0},{name:'LagUnit',type:'string',defaultValue:'d',convert:function(a){return a||'d'}}],lagField:'Lag',lagUnitField:'LagUnit',isHighlighted:!1,getTaskStore:function(){return Ext.isFunction(this.store.getTaskStore)?this.store.getTaskStore():this.store.taskStore},getEventStore:function(){return this.getTaskStore()},getSourceTask:function(a){return this.getSourceEvent(a)},setSourceTask:function(a){return this.setSourceEvent(a)},getTargetTask:function(a){return this.getTargetEvent(a)},setTargetTask:function(a){return this.setTargetEvent(a)},setLag:function(b,c){var a=this;a.beginEdit();a.set(a.lagField,b);if(arguments.length>1){a.setLagUnit(c)}a.endEdit()},getLagUnit:function(){var a=this;return a.get(a.lagUnitField)||'d'},isValid:function(c){var a=this,b=Sch.model.DependencyBase.prototype.isValid.apply(this,arguments),d=a.getSourceId(),e=a.getTargetId(),f=a.getType();if(b&&c!==!1&&a.store){b=a.store.isValidDependency(d,e,f,null,null,a)}return b},getTypeFromSides:function(e,c,d){var a=this.self.Type,b=d?'end':'start',f=d?'start':'end';if(e===b){return c===b?a.StartToStart:a.StartToEnd}return c===f?a.EndToEnd:a.EndToStart}},0,0,0,0,0,0,[Gnt.model,'Dependency'],0);Ext.cmd.derive('Gnt.data.DependencyStore',Sch.data.DependencyStore,{model:'Gnt.model.Dependency',taskStore:null,methodsCache:null,strictDependencyValidation:!1,transitiveDependencyValidation:!1,allowedDependencyTypes:null,allowParentTaskDependencies:!0,autoCalculateLag:!1,constructor:function(a){var b=this;Sch.data.DependencyStore.prototype.constructor.call(this,a);b.init()},createEventDependencyCache:function(){return new Gnt.data.util.TaskDependencyCache(this)},init:function(){var a=this;a.methodsCache={};a.on({add:a.onDependencyAdd,update:a.onDependencyUpdate,remove:a.onDependencyRemove,priority:100,scope:a})},scheduleTask:function(a){var d=this.getTaskStore(),b=a.getStartDate(),c=a.getEndDate();if(!b||!c){a.beginEdit();if(!b){a.setStartDateWithoutPropagation(d.getProjectStartDate(),undefined!==a.getDuration())}if(!c){a.setDurationWithoutPropagation(1)}a.endEdit()}},scheduleLinkedTasks:function(b,a){this.scheduleTask(b);if(!a.getStartDate()&&!b.getTaskStore().cascadeChanges){a.alignByIncomingDependencies()}this.scheduleTask(a)},updateAutoCalculatedLag:function(a){if(a.getLag()===0){var e=this,b=0,g=Sch.util.Date,c=a.getLagUnit(),d=a.getSourceTask(),f=a.getTargetTask();switch(a.getType()){case e.model.Type.StartToStart:b=g.getDurationInUnit(d.getStartDate(),f.getStartDate(),c);break;case e.model.Type.StartToEnd:b=g.getDurationInUnit(d.getStartDate(),f.getEndDate(),c);break;case e.model.Type.EndToStart:b=g.getDurationInUnit(d.getEndDate(),f.getStartDate(),c);break;case e.model.Type.EndToEnd:b=g.getDurationInUnit(d.getEndDate(),f.getEndDate(),c);break;}a.setLag(b)}},onDependencyAdd:function(a,b){Ext.Array.each(b,function(c){var d,e;d=c.getSourceTask();e=c.getTargetTask();if(d&&e&&!a.isUndoingOrRedoing()){a.autoCalculateLag&&a.updateAutoCalculatedLag(c);a.scheduleLinkedTasks(d,e)}});a.resetMethodsCache()},onDependencyRemove:function(a,c,f,e){var d=this.getTaskStore();var b=[];Ext.Array.each(c,function(h){var g=h.getTargetTask(d);if(g&&!a.isUndoingOrRedoing()&&!g.isManuallyScheduled()&&g.isTaskStored()){b.push(g)}});a.resetMethodsCache();if(!a.isUndoingOrRedoing()){Ext.Array.each(b,function(b){b.adjustToCalendarWithoutPropagation()})}},onDependencyUpdate:function(e,a,h){var b,c,d,f,g;if(h!=Ext.data.Model.COMMIT){b=a.previous;c=a.getSourceTask();d=a.getTargetTask();f=b&&a.fromField in b;g=b&&a.toField in b;if((f||g)&&c&&d&&!e.isUndoingOrRedoing()){e.scheduleLinkedTasks(c,d)}e.resetMethodsCache()}},reduceTaskDependencies:function(e,b,c,d,a){return this.reduceEventDependencies(e,b,c,d,a)},reduceTaskIncomingDependencies:function(d,a,b,c){return this.reduceEventIncomingDependencies(d,a,b,c)},reduceTaskOutgoingDependencies:function(d,a,b,c){return this.reduceEventOutgoingDependencies(d,a,b,c)},mapTaskDependencies:function(d,e,b,c,a){return this.mapEventDependencies(d,e,b,c,a)},mapTaskIncomingDependencies:function(c,d,a,b){return this.mapEventIncomingDependencies(c,d,a,b)},mapTaskOutgoingDependencies:function(c,d,a,b){return this.mapEventOutgoingDependencies(c,d,a,b)},getTaskDependencies:function(b,a){return this.getEventDependencies(b,a)},getTaskIncomingDependencies:function(b,a){return this.getEventIncomingDependencies(b,a)},getTaskOutgoingDependencies:function(b,a){return this.getEventOutgoingDependencies(b,a)},getTaskPredecessors:function(b,a){return this.getEventPredecessors(b,a)},getTaskSuccessors:function(b,a){return this.getEventSuccessors(b,a)},removeTaskDependencies:function(b,a){return this.removeEventDependencies(b,a)},removeTaskIncomingDependencies:function(b,a){return this.removeEventIncomingDependencies(b,a)},removeTaskOutgoingDependencies:function(b,a){return this.removeEventOutgoingDependencies(b,a)},getKeyByDeps:function(b,e,f){if(!b||!b.length){return ''}var d='';for(var c=0,g=b.length;c<g;c++){var a=b[c];d+=(a.getSourceId&&a.getSourceId()||a[e])+':'+(a.getTargetId&&a.getTargetId()||a[f])+','}return d},buildCacheKey:function(h,i,b,c,a){var f=a.fromField||(a.fromField=this.model.prototype.fromField),g=a.toField||(a.toField=this.model.prototype.toField),d=a.ignoreDepKey,e=a.addDepKey;if(!a.hasOwnProperty('ignoreDepKey')){a.ignoreDepKey=d=b&&this.getKeyByDeps(b,f,g)||'';a.addDepKey=e=c&&this.getKeyByDeps(c,f,g)||''}return h+'-'+i+'-'+d+'-'+e},hasTransitiveDependency:function(d,l,g,e,a){a=a||{visitedTasks:{}};var i=this.buildCacheKey(d,l,g,e,a);var n=a.visitedTasks,b=a.extraSuccessors;if(this.isCachedResultAvailable('hasTransitiveDependency',i)){return this.methodsCache.hasTransitiveDependency[i]}var s=this,q=a.fromField,r=a.toField,o=this.getTaskById(d),c,k;if(n[d]){return !1}n[d]=!0;if(o){if(e&&!b){b=a.extraSuccessors={};for(c=0,k=e.length;c<k;c++){var j=e[c];var m=j.getSourceId&&j.getSourceId()||j[q];b[m]=b[m]||[];b[m].push(j)}}var f,h=o.successors;if(b&&b[d]){h=h.concat(b[d])}for(c=0,k=h.length;c<k;c++){f=h[c];var p=f.getTargetId&&f.getTargetId()||f[r];if((!g||Ext.Array.indexOf(g,f)==-1)&&(p===l||s.hasTransitiveDependency(p,l,g,e,a))){return this.setCachedResult('hasTransitiveDependency',i,!0)}}}return this.setCachedResult('hasTransitiveDependency',i,!1)},successorsHaveTransitiveDependency:function(d,e,a,b,f){f=f||{};var c=this.buildCacheKey(d,e,a,b,f);var i=e instanceof Gnt.model.Task?e:this.getTaskById(e);if(this.isCachedResultAvailable('successorsHaveTransitiveDependency',c)){return this.methodsCache.successorsHaveTransitiveDependency[c]}for(var h=0,j=i.successors.length;h<j;h++){var g=i.successors[h].getTargetId();if(this.hasTransitiveDependency(d,g,a,b)||this.predecessorsHaveTransitiveDependency(d,g,a,b)||this.successorsHaveTransitiveDependency(d,g,a,b,f)){return this.setCachedResult('successorsHaveTransitiveDependency',c,!0)}}return this.setCachedResult('successorsHaveTransitiveDependency',c,!1)},predecessorsHaveTransitiveDependency:function(d,e,a,b,f){f=f||{};var c=this.buildCacheKey(d,e,a,b,f);var i=d instanceof Gnt.model.Task?d:this.getTaskById(d);if(this.isCachedResultAvailable('predecessorsHaveTransitiveDependency',c)){return this.methodsCache.predecessorsHaveTransitiveDependency[c]}for(var h=0,j=i.predecessors.length;h<j;h++){var g=i.predecessors[h].getSourceId();if(this.hasTransitiveDependency(g,e,a,b)||this.successorsHaveTransitiveDependency(g,e,a,b)||this.predecessorsHaveTransitiveDependency(g,e,a,b,f)){return this.setCachedResult('predecessorsHaveTransitiveDependency',c,!0)}}return this.setCachedResult('predecessorsHaveTransitiveDependency',c,!1)},isPartOfTransitiveDependency:function(a,e,c,d){var b=a instanceof Gnt.model.Task?a:this.getTaskById(a);if(!b.predecessors.length&&!b.successors.length){return !1}if(b.predecessors.length){return this.predecessorsHaveTransitiveDependency.apply(this,arguments)}else {return this.successorsHaveTransitiveDependency.apply(this,arguments)}},getCycle:function(a){a=a||{};Ext.applyIf(a,{ignoreTasks:{},visitedTasks:{},path:[],task:this.getAt(0).getSourceTask()});var c=a.visitedTasks,i=a.ignoreTasks,d=a.path,e=a.task,b=e.getId();if(i[b]){return}d.push(e);if(c[b]){return d}c[b]=!0;var g=e.successors;for(var f=0,j=g.length;f<j;f++){a.task=g[f].getTargetTask();var h=this.getCycle(a);if(h){return h}}d.pop();delete c[b]},getCycles:function(){var c=this,b=[],a={};this.each(function(f){var d=c.getCycle({task:f.getSourceTask(),ignoreTasks:a});if(d){for(var e=0,g=d.length;e<g;e++){a[d[e]]=!0}b.push(d)}});return b},resetMethodsCache:function(){this.methodsCache={}},isCachedResultAvailable:function(a,b){return this.methodsCache[a]&&this.methodsCache[a].hasOwnProperty(b)},getCachedResult:function(a,b){return this.methodsCache[a][b]},setCachedResult:function(a,c,b){this.methodsCache[a]=this.methodsCache[a]||{};this.methodsCache[a][c]=b;return b},getGroupTopTasks:function(e,f){var g=e.length,h=f.length,c=g,d=h,a,b;do{a=e[c];b=f[d];c--;d--}while(a==b&&c>=0&&d>=0);return [a,b]},groupsHasTransitiveDependency:function(t,j,c,d,w){var a=w||{targets:null,visitedTasks:{}};var x=this.getTaskStore().getRootNode(),v=!1,y=this,m=this.getTaskById(t),n=this.getTaskById(j),r=a.visitedTasks,k=a.targets;if(!a.targetGroup){a.targetGroup=n.getTopParent(!0)}var h=a.fromField||(a.fromField=this.model.prototype.fromField),l=a.toField||(a.toField=this.model.prototype.toField),q=a.ignoreDepKey,s=a.addDepKey;var u=this.getGroupTopTasks(m.getTopParent(!0),a.targetGroup),g=u[0],e=u[1];if(g===m&&e===n&&m.isLeaf()&&n.isLeaf()){return this.hasTransitiveDependency(t,j,c)}if(!a.hasOwnProperty('ignoreDepKey')){a.ignoreDepKey=q=c&&this.getKeyByDeps(c,h,l)||'';a.addDepKey=s=d&&this.getKeyByDeps(d,h,l)||''}var i=g.getId()+'-'+e.getId()+'-'+q+'-'+s;if(this.isCachedResultAvailable('groupsHasTransitiveDependency',i)){return this.methodsCache.groupsHasTransitiveDependency[i]}if(e!==a.targetTopParent){a.targetTopParent=e;k=a.targets={};e.cascadeBy(function(a){k[a.getId()]=!0})}var b=a.extraSuccessors;if(d&&!b){b=a.extraSuccessors={};for(var p=0,z=d.length;p<z;p++){var f=d[p];var o=f.getSourceId&&f.getSourceId()||f[h];b[o]=b[o]||[];b[o].push(f)}}g.cascadeBy(function(h){if(h!==x){var g=h.getId();if(r[g]){return !1}r[g]=!0;var f=h.successors;if(b&&b[g]){f=f.concat(b[g])}for(var i=0,n=f.length;i<n;i++){var e=f[i],m=e.getTargetId&&e.getTargetId()||e[l];if((!c||Ext.Array.indexOf(c,e)==-1)&&(k[m]||y.groupsHasTransitiveDependency(m,j,c,d,a))){v=!0;return !1}}}});return this.setCachedResult('groupsHasTransitiveDependency',i,v)},getDependencyError:function(d,c,i,a,j,h){var b,f,g;var n=d instanceof Gnt.model.Dependency;if(n){b=d.getSourceId();f=this.getTaskById(b);a=c;j=i;if(a&&Ext.Array.contains(a,d)){a=a.slice();Ext.Array.remove(a,d)}i=d.getType();c=d.getTargetId();g=this.getTaskById(c);if(d.store){h=d}}else {b=d;f=this.getTaskById(b);g=this.getTaskById(c);if(i===undefined){var m=this.model.getField(this.model.prototype.typeField).defaultValue;i=m!==undefined?m:this.model.Type.EndToStart}}if(!h&&n&&!d.isValid()){return -1}else {if(!b||!c||b==c){return -1}}if(!f||!g){return -2}if(!this.isValidDependencyType(i)){return -10}if(f.contains(g)||g.contains(f)){return -9}var e;if(j||h){e=[];if(h){e.push(h)}if(j){e=e.concat(j)}}if(this.transitiveDependencyValidation){if(this.hasTransitiveDependency(b,c,e,a)){return -3}}else {if(this.areTasksLinkedForward(b,c,e,a)){return -3}}if(this.hasTransitiveDependency(c,b,e,a)){return -4}if(this.transitiveDependencyValidation&&this.isPartOfTransitiveDependency(b,c,e,a)){return -5}if(this.strictDependencyValidation){if(this.groupsHasTransitiveDependency(c,b,e,a)){return -7}if(this.transitiveDependencyValidation&&this.groupsHasTransitiveDependency(b,c,e,a)){return -8}}if(!this.allowParentTaskDependencies&&(!f.isLeaf()||!g.isLeaf())){return -11}if(g.isProject||f.isProject){return -12}var l=g.getProject(),k=f.getProject();if(l!=k){if(l&&!l.getAllowDependencies()||k&&!k.getAllowDependencies()){return -13}}return 0},isValidDependencyType:function(c){if(this.allowedDependencyTypes){var a=!1,b=this.model;Ext.each(this.allowedDependencyTypes,function(d){if(b.Type[d]==c){a=!0;return !1}});return a}return !0},isValidDependency:function(c,e,f,d,b,a){return !this.getDependencyError(c,e,f,d,b,a)},areTasksLinkedForward:function(i,j,h,d){var e=i instanceof Gnt.model.Task?i:this.getTaskById(i);var f=j instanceof Gnt.model.Task?j:this.getTaskById(j);if(!e||!f){return !1}var p=this.model.prototype,k=p.fromField,l=p.toField;var c=e.getId()+'-'+f.getId()+'-'+(this.getKeyByDeps(h,k,l)||'')+'-'+(this.getKeyByDeps(d,k,l)||'');if(this.isCachedResultAvailable('areTasksLinkedForward',c)){return this.methodsCache.areTasksLinkedForward[c]}var m=e.successors,q=f.predecessors,a,b,g;for(b=0,g=m.length;b<g;b++){a=m[b];if((!h||!Ext.Array.contains(h,a))&&Ext.Array.contains(q,a)){return this.setCachedResult('areTasksLinkedForward',c,!0)}}if(d){var n,o;for(b=0,g=d.length;b<g;b++){a=d[b];n=a.getSourceId&&a.getSourceId()||a[k];o=a.getTargetId&&a.getTargetId()||a[l];if(n==e.getId()&&o==f.getId()){return this.setCachedResult('areTasksLinkedForward',c,!0)}}}return this.setCachedResult('areTasksLinkedForward',c,!1)},areTasksLinked:function(c,d){var a=c instanceof Gnt.model.Task?c:this.getTaskById(c);var b=d instanceof Gnt.model.Task?d:this.getTaskById(d);if(!a||!b){return !1}var e=a.getId()+'-'+b.getId();if(this.isCachedResultAvailable('areTasksLinked',e)){return this.methodsCache.areTasksLinked[e]}return this.setCachedResult('areTasksLinked',e,this.areTasksLinkedForward(a,b)||this.areTasksLinkedForward(b,a))},getDependencyForSourceAndTargetTasks:function(a,b){return this.getDependencyForSourceAndTargetEvents(a,b)},getTasksLinkingDependency:function(a,b){return this.getEventsLinkingDependency(a,b)},getTaskById:function(b){var a=this.getTaskStore();return a&&a.getModelById(b)||null},getSourceTask:function(a){var b=a instanceof Gnt.model.Dependency?a.getSourceId():a;return this.getTaskById(b)},getTargetTask:function(a){var b=a instanceof Gnt.model.Dependency?a.getTargetId():a;return this.getTaskById(b)},getTaskStore:function(){return this.getEventStore()},setTaskStore:function(a){var b=this;b.taskStore=a;b.setEventStore(a)}},1,0,0,0,['store.gantt_dependencystore'],0,[Gnt.data,'DependencyStore'],0);Ext.cmd.derive('Sch.model.Resource',Sch.model.Customizable,{idProperty:'Id',config:Ext.versions.touch?{idProperty:'Id'}:null,nameField:'Name',customizableFields:[{name:'Name',type:'string'}],getInternalId:function(){return this.internalId},getResourceStore:function(){return this.joined&&this.joined[0]},getEventStore:function(){var a=this.getResourceStore();return a&&a.getEventStore()||this.parentNode&&this.parentNode.getEventStore()},getAssignmentStore:function(){var a=this.getEventStore();return a&&a.getAssignmentStore()},getEvents:function(a){var b=this;a=a||b.getEventStore();return a&&a.getEventsForResource(b)||[]},getAssignments:function(){var b=this,a=b.getEventStore();return a&&a.getAssignmentsForResource(b)},isPersistable:function(){var a=this.parentNode;return !a||!a.phantom||a.isRoot&&a.isRoot()},isAbove:function(f){var d=this,i=d.getResourceStore(),g=!1,a,c,e,b,h;if(d==f){g=!1}else {if(i instanceof Ext.data.TreeStore){a=d;c=[];while(a){c.push(a);a=a.parentNode}a=f;e=[];while(a){e.push(a);a=a.parentNode}b=0;while(b<c.length-1&&b<e.length-1&&c[b]==e[b]){++b}h=c[b];d=c[b+1];f=e[b+1];g=h.indexOf(d)<h.indexOf(f)}else {g=i.indexOf(d)<i.indexOf(f)}}return g}},0,0,0,0,0,0,[Sch.model,'Resource'],0);Ext.cmd.derive('Gnt.model.Resource',Sch.model.Resource,{customizableFields:['CalendarId'],calendarIdField:'CalendarId',normalized:!1,calendarWaitingListener:null,getTaskStore:function(){if(this.store){return this.store.getTaskStore()}return null},getEventStore:function(){return this.getTaskStore()},getTasks:function(){return this.getEvents()},getCalendar:function(b){var a=this;return b?a.getOwnCalendar():a.getOwnCalendar()||a.getProjectCalendar()},getOwnCalendar:function(){var a=this.getCalendarId();return a?Gnt.data.Calendar.getCalendar(a):null},getProjectCalendar:function(){return this.getTaskStore().getCalendar()},setCalendar:function(a){var b=a instanceof Gnt.data.Calendar;if(b&&!a.calendarId){throw new Error("Can't set calendar w/o `calendarId` property")}this.setCalendarId(b?a.calendarId:a)},setCalendarId:function(a,f){if(a instanceof Gnt.data.Calendar){a=a.calendarId}var d=this.getCalendarId();if(d!=a||f){if(this.calendarWaitingListener){this.calendarWaitingListener.destroy();this.calendarWaitingListener=null}var c={calendarchange:this.onCalendarChange,scope:this};var e=this.calendar||Gnt.data.Calendar.getCalendar(d);this.calendar=null;e&&e.un(c);this.set(this.calendarIdField,a);var b=Gnt.data.Calendar.getCalendar(a);if(b){b.on(c);if(!f){this.onCalendarChange()}}else {this.calendarWaitingListener=Ext.data.StoreManager.on('add',function(d,e,g){b=Gnt.data.Calendar.getCalendar(a);if(b){this.calendarWaitingListener.destroy();this.calendarWaitingListener=null;b.on(c);this.onCalendarChange()}},this,{destroyable:!0})}}},onCalendarChange:function(){this.inOnCalendarChange=!0;this.adjustToCalendar();this.inOnCalendarChange=!1},adjustToCalendar:function(){this.getTaskStore()&&this.forEachTask(function(a){a.adjustToCalendar()})},assignTo:function(a,c,b){var d=a instanceof Gnt.model.Task?a:this.getTaskStore().getModelById(a);return d.assign(this,c,b)},unAssignFrom:function(a,b){var c=a instanceof Gnt.model.Task?a:this.getTaskStore().getModelById(a);return c.unAssign(this,b)},unassignFrom:function(){return this.unAssignFrom.apply(this,arguments)},forEachAssignment:function(i,b){var h=this,f=h.getTaskStore(),d=f&&f.getAssignmentStore(),e=d&&d.getAssignmentsForResource(h)||[],a,g,c;b=b||this;for(c=!1,a=0,g=e.length;!c&&a<g;++a){c=!1===i.call(b,e[a])}},forEachTask:function(j,b){var i=this,g=i.getTaskStore(),e=g&&g.getAssignmentStore(),f=e&&e.getAssignmentsForResource(i)||[],a,h,c,d;b=b||this;for(c=!1,a=0,h=f.length;!c&&a<h;++a){d=f[a].getTask();d&&(c=!1===j.call(b,d))}},collectAvailabilityIntervalPoints:function(f,h,i,a,e){for(var d=0,j=f.length;d<j;d++){var g=f[d];var b=g.startDate-0;var c=g.endDate-0;if(!a[b]){a[b]=[];e.push(b)}a[b].push(h);if(!a[c]){a[c]=[];e.push(c)}a[c].push(i)}},forEachAvailabilityIntervalWithTasks:function(i,D,t){t=t||this;var c=i.startDate;var d=i.endDate;var z=i.task;if(!c||!d){throw 'Both `startDate` and `endDate` are required for `forEachAvailabilityIntervalWithTasks`'}var g=new Date(c);var x=i.includeAllIntervals;var w=i.includeResCalIntervals;var A=this.getCalendar();var B=[];var u=[];var q=[];var b=[c-0,d-0];var e={};e[c-0]=[{type:'00-intervalStart'}];e[d-0]=[{type:'00-intervalEnd'}];this.forEachAssignment(function(f){var a=f.getTask();if(!a||z&&a!==z){return}var k=a.getStartDate();var m=a.getEndDate();var g=a.getId();if(k>d||m<c){return}u.push(a);q.push(a.getOwnCalendar()||this.getCalendar());if(a.isSegmented()){for(var j=a.getSegments(),h=0,n=j.length;h<n;h++){var l=j[h];this.collectAvailabilityIntervalPoints([{startDate:l.getStartDate(),endDate:l.getEndDate()}],{type:'05-taskStart',assignment:f,taskId:g,units:f.getUnits()},{type:'04-taskEnd',taskId:g},e,b)}}else {this.collectAvailabilityIntervalPoints([{startDate:k,endDate:m}],{type:'05-taskStart',assignment:f,taskId:g,units:f.getUnits()},{type:'04-taskEnd',taskId:g},e,b)}B.push(f)});if(!u.length&&!x&&!w){return}var C=Sch.util.Date;var a,n,s,G={};while(g<d){this.collectAvailabilityIntervalPoints(A.getAvailabilityIntervalsFor(g),{type:'00-resourceAvailabilityStart'},{type:'01-resourceAvailabilityEnd'},e,b);for(a=0,n=q.length;a<n;a++){s=u[a].getId();this.collectAvailabilityIntervalPoints(q[a].getAvailabilityIntervalsFor(g),{type:'02-taskAvailabilityStart',taskId:s},{type:'03-taskAvailabilityEnd',taskId:s},e,b)}g=C.getStartOfNextDay(g)}b.sort(function(a,b){return a-b});var y=!1,h=!1,o={},l=0,m=0;var p={};for(a=0,n=b.length-1;a<n;a++){var r=e[b[a]];r.sort(function(a,b){return a.type<b.type?1:-1});for(var v=0,F=r.length;v<F;v++){var f=r[v];switch(f.type){case '00-resourceAvailabilityStart':h=!0;break;case '01-resourceAvailabilityEnd':h=!1;break;case '02-taskAvailabilityStart':l++;p[f.taskId]=!0;break;case '03-taskAvailabilityEnd':l--;delete p[f.taskId];break;case '05-taskStart':o[f.taskId]=f;m++;break;case '04-taskEnd':delete o[f.taskId];m--;break;case '00-intervalStart':y=!0;break;case '00-intervalEnd':return;}}if(y&&(x||w&&h||h&&l&&m)){var E={inResourceCalendar:!!h,inTasksCalendar:!!l,inTask:m,inTaskCalendarHash:Ext.apply({},p)};var j=b[a];var k=b[a+1];if(j>d||k<c){continue}if(j<c){j=c-0}if(k>d){k=d-0}if(D.call(t,j,k,o,E)===!1){return !1}}}},getAllocationInfo:function(b){var a=[];this.forEachAvailabilityIntervalWithTasks(b,function(i,k,d,e){var g=0,h=[],f={},l=0,n=[],j={},o=k-i,m=0;if(e.inResourceCalendar&&e.inTasksCalendar&&e.inTask){for(var c in d){if(e.inTaskCalendarHash[c]){m+=o*d[c].units*0.01;g+=d[c].units;f[c]=d[c].assignment;h.push(d[c].assignment)}l+=d[c].units;j[c]=d[c].assignment;n.push(d[c].assignment)}}a.push(Ext.apply({startDate:new Date(i),endDate:new Date(k),effectiveTotalAllocation:g,effectiveAssignmentsHash:f,effectiveAssignments:h,totalAllocationMS:m,totalAllocation:l,assignments:n,assignmentsHash:j},e))});return a},getUtilizationInfo:function(i,j,b,c){var k=this,f=0,e=!1,d=!1,a={},g={};if(arguments.length<3){b=c=100}var h=k.getAllocationInfo({includeResCalIntervals:!0,startDate:i,endDate:j});Ext.Array.each(h,function(h){f+=h.totalAllocationMS;if(h.effectiveTotalAllocation>c){e=!0;d=!1}else {if(!e&&h.effectiveTotalAllocation<b){d=!0}}Ext.Array.each(h.effectiveAssignments,function(k){var f=k.getId(),p=k.getTaskId(),e=k.getUnits(),o=Math.floor((h.endDate-h.startDate)*e/100),l=0,n=e>c,m=e<b,d;if(a[f]){d=a[f];d.allocationMs+=o;d.allocationDeltaMs+=l;d.isOverallocated=d.isOverallocated||n;d.isUnderallocated=d.isUnderallocated||m}else {d={isUtilized:!0,allocationMs:o,allocationDeltaMs:l,isOverallocated:n,isUnderallocated:m};a[f]=d;g[p]=d}})});return {isUtilized:f>0,allocationMs:f,allocationDeltaMs:0,isOverallocated:e,isUnderallocated:d,assignmentInfo:a,taskInfo:g}}},0,0,0,0,0,0,[Gnt.model,'Resource'],0);Ext.cmd.derive('Sch.data.mixin.ResourceStore',Ext.Base,{eventStore:null,getEventStore:function(){return this.eventStore},setEventStore:function(b){var a=this,c;if(a.eventStore!==b){c=a.eventStore;a.eventStore=b&&Ext.StoreMgr.lookup(b)||null;a.fireEvent('eventstorechange',a,b,c)}},getScheduledEventsInTimeSpan:function(c,d,a){var b=[];var e=Sch.util.Date;a=a||this.getEventStore();Ext.Array.each(this.getRange(),function(e){Ext.Array.each(a.getEventsForResource(e),function(f){if(f.intersectsRange(c,d)){b.push(f)}})});return b}},0,0,0,0,0,0,[Sch.data.mixin,'ResourceStore'],0);Ext.cmd.derive('Sch.data.ResourceStore',Ext.data.Store,{model:'Sch.model.Resource',config:{model:'Sch.model.Resource'},storeId:'resources',constructor:function(){Ext.data.Store.prototype.constructor.apply(this,arguments);if(this.getModel()!==Sch.model.Resource&&!(this.getModel().prototype instanceof Sch.model.Resource)){throw 'The model for the ResourceStore must subclass Sch.model.Resource'}}},1,0,0,0,['store.resourcestore'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Sch.data.mixin.ResourceStore.prototype.mixinId||Sch.data.mixin.ResourceStore.$className,Sch.data.mixin.ResourceStore],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'ResourceStore'],0);Ext.cmd.derive('Gnt.data.ResourceStore',Sch.data.ResourceStore,{storeId:'resources',model:'Gnt.model.Resource',taskStore:null,constructor:function(a){Sch.data.ResourceStore.prototype.constructor.call(this,a);this.on({load:this.normalizeResources,remove:this.onResourceRemoved,priority:100})},normalizeResources:function(){this.each(function(a){if(!a.normalized){var b=a.getCalendarId();if(b){a.setCalendarId(b,!0)}a.normalized=!0}})},onResourceRemoved:function(c,b){var a=this.getAssignmentStore();Ext.Array.each(b,function(d){a.removeAssignmentsForResource(d)})},getTaskStore:function(){return this.taskStore},setTaskStore:function(a){this.taskStore=a},getAssignmentStore:function(){var a=this.getTaskStore();return a&&a.getAssignmentStore()||null},getDependencyStore:function(){var a=this.getTaskStore();return a&&a.getDependencyStore()||null}},1,0,0,0,['store.gantt_resourcestore'],0,[Gnt.data,'ResourceStore'],0);Ext.cmd.derive('Sch.data.util.EventAssignmentsCache',Sch.util.Cache,{assignmentStore:null,assignmentStoreDetacher:null,assignmentStoreFiltersDetacher:null,eventStoreDetacher:null,constructor:function(b){var a=this,c=b.getEventStore();Sch.util.Cache.prototype.constructor.call(this);function onAssignmentAdd(d,c){Ext.Array.each(c,function(e){a.add(e.getEventId(),e)})}function onAssignmentRemove(d,c){Ext.Array.each(c,function(e){a.remove(e.getEventId(),e)})}function onAssignmentUpdate(h,c,g){var e=c.eventIdField,d=c.previous&&e in c.previous,f=d&&c.previous[e];if(d){a.move(f,c.getEventId(),c)}}function onAssignmentStoreClearOrReset(c){a.clear()}function onAssignmentStoreEventStoreChange(d,c){a.clear();attachToEventStore(c)}function onEventIdChanged(e,f,d,c){a.move(d,c)}function onEventRemove(d,c){Ext.Array.each(c,function(e){a.clear(e)})}function onEventStoreClearOrReset(){a.clear()}function attachToEventStore(c){Ext.destroy(a.eventStoreDetacher);a.eventStoreDetacher=c&&c.on({idchanged:onEventIdChanged,remove:onEventRemove,cacheresethint:onEventStoreClearOrReset,clear:onEventStoreClearOrReset,rootchange:onEventStoreClearOrReset,priority:100,destroyable:!0})}a.assignmentStoreDetacher=b.on({add:onAssignmentAdd,remove:onAssignmentRemove,update:onAssignmentUpdate,cacheresethint:onAssignmentStoreClearOrReset,clear:onAssignmentStoreClearOrReset,eventstorechange:onAssignmentStoreEventStoreChange,priority:100,destroyable:!0});a.assignmentStoreFiltersDetacher=b.getFilters().on({endupdate:onAssignmentStoreClearOrReset,priority:1002,destroyable:!0});attachToEventStore(c);a.assignmentStore=b},destroy:function(){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher','assignmentStoreFiltersDetacher','eventStoreDetacher');a.assignmentStore=null},get:function(a,b){var c=this;a=c.key(a);b=b||function(){return Ext.Array.filter(c.assignmentStore.getRange(),function(c){return c.getEventId()==a})};return Sch.util.Cache.prototype.get.call(this,a,b)}},1,0,0,0,0,0,[Sch.data.util,'EventAssignmentsCache'],0);Ext.cmd.derive('Sch.data.util.ResourceAssignmentsCache',Sch.util.Cache,{assignmentStore:null,assignmentStoreDetacher:null,eventStoreDetacher:null,resourceStoreDetacher:null,constructor:function(b){var a=this,c=b.getEventStore(),d=c&&c.getResourceStore();Sch.util.Cache.prototype.constructor.call(this);function onAssignmentAdd(d,c){Ext.Array.each(c,function(e){a.add(e.getResourceId(),e)})}function onAssignmentRemove(d,c){Ext.Array.each(c,function(e){a.remove(e.getResourceId(),e)})}function onAssignmentUpdate(h,c,g){var e=c.resourceIdField,d=c.previous&&e in c.previous,f=d&&c.previous[e];if(d){a.move(f,c.getResourceId(),c)}}function onAssignmentStoreClearOrReset(c){a.clear()}function onAssignmentStoreEventStoreChange(c,a){attachToEventStore(a);attachToResourceStore(a&&a.getResourceStore())}function onEventStoreResourceStoreChange(d,c){a.clear();attachToResourceStore(c)}function onResourceIdChanged(e,f,d,c){a.move(d,c)}function onResourceRemove(d,c){Ext.Array.each(c,function(e){a.clear(e)})}function onResourceStoreClearOrReset(){a.clear()}function attachToEventStore(c){Ext.destroy(a.eventStoreDetacher);a.eventStoreDetacher=c&&c.on({resourcestorechange:onEventStoreResourceStoreChange,priority:100,destroyable:!0})}function attachToResourceStore(c){Ext.destroy(a.resourceStoreDetacher);a.resourceStoreDetacher=c&&c.on({idchanged:onResourceIdChanged,remove:onResourceRemove,clear:onResourceStoreClearOrReset,cacheresethint:onResourceStoreClearOrReset,rootchange:onResourceStoreClearOrReset,priority:100,destroyable:!0})}a.assignmentStoreDetacher=b.on({add:onAssignmentAdd,remove:onAssignmentRemove,update:onAssignmentUpdate,clear:onAssignmentStoreClearOrReset,cacheresethint:onAssignmentStoreClearOrReset,eventstorechange:onAssignmentStoreEventStoreChange,priority:100,destroyable:!0});a.assignmentStoreFiltersDetacher=b.getFilters().on('endupdate',onAssignmentStoreClearOrReset,a,{priority:1002,destroyable:!0});attachToEventStore(c);attachToResourceStore(d);a.assignmentStore=b},destroy:function(){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher','assignmentStoreFiltersDetacher','eventStoreDetacher','resourceStoreDetacher');a.assignmentStore=null},get:function(a,b){var c=this;a=c.key(a);b=b||function(){return Ext.Array.filter(c.assignmentStore.getRange(),function(c){return c.getResourceId()==a})};return Sch.util.Cache.prototype.get.call(this,a,b)}},1,0,0,0,0,0,[Sch.data.util,'ResourceAssignmentsCache'],0);Ext.cmd.derive('Sch.model.Assignment',Sch.model.Customizable,{idProperty:'Id',customizableFields:[{name:'ResourceId'},{name:'EventId'}],resourceIdField:'ResourceId',eventIdField:'EventId',getInternalId:function(){return this.internalId},getAssignmentStore:function(){return this.joined&&this.joined[0]},getEventStore:function(){var a=this.getAssignmentStore();return a&&a.getEventStore()},getResourceStore:function(){var a=this.getEventStore();return a&&a.getResourceStore()},getEvent:function(a){var b=this;a=a||b.getEventStore();return a&&a.getModelById(b.getEventId())},getResource:function(a){var b=this;a=a||b.getResourceStore();return a&&a.getModelById(b.getResourceId())},getEventName:function(b){var a=this.getEvent(b);return a&&a.getName()||''},getResourceName:function(b){var a=this.getResource(b);return a&&a.getName()||''},isPersistable:function(){var c=this,b=c.getEvent(),a=c.getResource();return b&&!b.phantom&&a&&!a.phantom},fullCopy:function(){return this.copy.apply(this,arguments)},getEventResourceCompositeKey:function(){var a=this;return a.self.makeAssignmentEventResourceCompositeKey(a.getEventId(),a.getResourceId())},inheritableStatics:{makeAssignmentEventResourceCompositeKey:function(){var a=[];return function(c,b){a.length=0;a.push('event(',c,')-resource(',b,')');return a.join('')}}()}},0,0,0,0,0,0,[Sch.model,'Assignment'],0);Ext.cmd.derive('Sch.data.AssignmentStore',Ext.data.Store,{config:{extraKeys:{byEventIdResourceId:{keyFn:'getEventResourceCompositeKey'}}},model:'Sch.model.Assignment',storeId:'assignments',eventResourceCache:null,resourceEventsCache:null,eventStoreDetacher:null,resourceStoreDetacher:null,eventStore:null,constructor:function(b){var a=this;Ext.data.Store.prototype.constructor.call(this,b);a.eventAssignmentsCache=a.eventAssignmentsCache||a.createEventAssignmentCache();a.resourceAssignmentsCache=a.resourceAssignmentsCache||a.createResourceAssignmentCache()},destroy:function(){var a=this;Ext.destroyMembers(a,'eventResourceCache','resourceEventsCache','eventAssignmentsCache','resourceEventsCache','eventStoreDetacher','resourceStoreDetacher');Ext.data.Store.prototype.destroy.call(this)},createEventAssignmentCache:function(){return new Sch.data.util.EventAssignmentsCache(this)},createResourceAssignmentCache:function(){return new Sch.data.util.ResourceAssignmentsCache(this)},createAssignmentStoreEventResourcesCache:function(){return new Sch.data.util.AssignmentStoreEventResourcesCache(this)},createAssignmentStoreResourceEventsCache:function(){return new Sch.data.util.AssignmentStoreResourceEventsCache(this)},getEventStore:function(){return this.eventStore},setEventStore:function(b){var a=this,c=a.eventStore;a.eventStore=b&&Ext.StoreMgr.lookup(b)||null;a.attachToEventStore(a.eventStore);if((c||b)&&c!==b){a.fireEvent('eventstorechange',a,b,c)}},attachToEventStore:function(b){var a=this;Ext.destroy(a.eventStoreDetacher);if(b&&b.isTreeStore){a.eventStoreDetacher=b.on({'noderemove':a.onEventNodeRemove,'resourcestorechange':a.onEventStoreResourceStoreChange,scope:a,destroyable:!0,priority:200})}else {if(b){a.eventStoreDetacher=b.on({'remove':a.onEventRemove,'resourcestorechange':a.onEventStoreResourceStoreChange,scope:a,destroyable:!0,priority:200})}}a.attachToResourceStore(b&&b.getResourceStore())},attachToResourceStore:function(b){var a=this;Ext.destroy(a.resourceStoreDetacher);if(b){if(b.isTreeStore){a.resourceStoreDetacher=b.on({'noderemove':a.onResourceNodeRemove,scope:a,destroyable:!0,priority:200})}else {a.resourceStoreDetacher=b.on({'remove':a.onResourceRemove,scope:a,destroyable:!0,priority:200})}}},onEventStoreResourceStoreChange:function(c,a,b){this.attachToResourceStore(a)},onEventRemove:function(e,c,f,d){var b=this,a;if(!d){a=[];Ext.Array.each(c,function(g){a=a.concat(b.getAssignmentsForEvent(g))});a.length&&b.remove(a)}},onEventNodeRemove:function(e,d,c){var b=this,a;if(!c){a=[];d.cascadeBy(function(f){a=a.concat(b.getAssignmentsForEvent(f))});a.length&&b.remove(a)}},onResourceRemove:function(e,c,f,d){var b=this,a;if(!d){a=[];Ext.Array.each(c,function(g){a=a.concat(b.getAssignmentsForResource(g))});a.length&&b.remove(a)}},onResourceNodeRemove:function(e,c,d){var b=this,a;if(!d){a=[];c.cascadeBy(function(f){a=a.concat(b.getAssignmentsForResource(f))});a.length&&b.remove(a)}},mapAssignmentsForEvent:function(d,c,a){var e=this,b=[];c=c||Ext.identityFn;a=a||Ext.returnTrue;if(c!==Ext.identityFn||a!==Ext.returnTrue){Ext.Array.each(e.eventAssignmentsCache.get(d),function(f){var e=c(f);a(e)&&b.push(e)})}else {b=b.concat(e.eventAssignmentsCache.get(d))}return b},mapAssignmentsForResource:function(d,b,a){var e=this,c=[];b=b||Ext.identityFn;a=a||Ext.returnTrue;if(b!==Ext.identityFn||a!==Ext.returnTrue){Ext.Array.each(e.resourceAssignmentsCache.get(d),function(f){var e=b(f);a(e)&&c.push(e)})}else {c=[].concat(e.resourceAssignmentsCache.get(d))}return c},getAssignmentsForEvent:function(a){return this.mapAssignmentsForEvent(a)},removeAssignmentsForEvent:function(b){var a=this;a.remove(a.getAssignmentsForEvent(b))},getAssignmentsForResource:function(a){return this.mapAssignmentsForResource(a)},removeAssignmentsForResource:function(b){var a=this;a.remove(a.getAssignmentsForResource(b))},getResourcesForEvent:function(c){var b=this,a;if(b.eventResourceCache){a=b.eventResourceCache.get(c)}else {a=b.mapAssignmentsForEvent(c,function mapper(a){return a.getResource()},function filter(a){return !!a})}return a},getEventsForResource:function(c){var b=this,a;if(b.resourceEventsCache){a=b.resourceEventsCache.get(c)}else {a=b.mapAssignmentsForResource(c,function mapper(a){return a.getEvent()},function filter(a){return !!a})}return a},assignEventToResource:function(a,d,b){var e=this,c=[];b=b||Ext.identityFn;var f=Ext.isArray(d)?d:[d];Ext.Array.each(f,function(g){if(!e.isEventAssignedToResource(a,g)){var f=new e.model();f.setEventId(a instanceof Ext.data.Model&&a.getId()||a);f.setResourceId(g instanceof Ext.data.Model&&g.getId()||g);f=b(f);c.push(f)}});e.add(c);return c},unassignEventFromResource:function(c,b){var d=this,a;if(!b){this.removeAssignmentsForEvent(c)}else {if(d.isEventAssignedToResource(c,b)){a=d.getAssignmentForEventAndResource(c,b);d.remove(a)}}return a},isEventAssignedToResource:function(f,a){var g=this,d=g.getResourcesForEvent(f),b=!1,c,e;a=a instanceof Ext.data.Model&&a.getId()||a;for(c=0,e=d.length;!b&&c<e;c++){b=d[c];b=b.getId()==a}return b},getAssignmentForEventAndResource:function(b,a){var c=this;b=b instanceof Ext.data.Model&&b.getId()||b;a=a instanceof Ext.data.Model&&a.getId()||a;return c.byEventIdResourceId.get(c.model.makeAssignmentEventResourceCompositeKey(b,a))}},1,0,0,0,['store.assignmentstore'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'AssignmentStore'],0);Ext.cmd.derive('Gnt.model.Assignment',Sch.model.Assignment,{customizableFields:[{name:'TaskId'},{name:'Units',type:'float',defaultValue:100}],taskIdField:'TaskId',eventIdField:'TaskId',constructor:function(c,b){var a=this;a.eventIdField=a.taskIdField;Sch.model.Assignment.prototype.constructor.call(this,c,b)},getEventId:function(){var a=this;return a.get(a.taskIdField)},setEventId:function(b){var a=this;return a.set(a.taskIdField,b)},unitsField:'Units',getTaskStore:function(){return this.store&&this.store.getTaskStore()||null},getEventStore:function(){return this.getTaskStore()},getUnits:function(){var a=this;return Math.max(0,a.get(a.unitsField))},setUnits:function(b){var a=this;a.set(a.unitsField,b)},getTask:function(a){var b=this;return b.getEvent(a)},getTaskName:function(b){var a=this.getTask(b);return a&&a.getName()||''},getEffort:function(d){var c=this,a=c.getTask(),b=0;a.forEachAvailabilityIntervalWithResources({startDate:a.getStartDate(),endDate:a.getEndDate(),resources:[c.getResource()]},function(f,g,a){var e,c;for(e in a){c=a[e].units}b+=(g-f)*c/100});return a.getProjectCalendar().convertMSDurationToUnit(b,d||a.getEffortUnit())},getEffortAtDate:function(d,h){var i=Sch.util.Date,g=this,a=g.getTask(),c=a&&a.getStartDate(),f=a&&a.getEndDate(),e=g.getResource(),b=0;if(a&&e&&c&&f){d=i.constrain(d,c,f);a.forEachAvailabilityIntervalWithResources({startDate:c,endDate:d,resources:[e]},function(e,f,a){var c=0;for(var g in a){c=a[g].units}b+=(f-e)*c/100});b=a.getCalendar().convertMSDurationToUnit(b,h||a.getEffortUnit())}return b}},1,0,0,0,0,0,[Gnt.model,'Assignment'],0);Ext.cmd.derive('Gnt.data.AssignmentStore',Sch.data.AssignmentStore,{model:'Gnt.model.Assignment',storeId:'assignments',attachToEventStore:Ext.emptyFn,attachToResourceStore:Ext.emptyFn,getTaskStore:function(){return this.getEventStore()},setTaskStore:function(a){return this.setEventStore(a)},mapAssignmentsForTask:function(b,c,a){return this.mapAssignmentsForEvent(b,c,a)},getAssignmentsForTask:function(a){return this.getAssignmentsForEvent(a)},removeAssignmentsForTask:function(a){return this.removeAssignmentsForEvent(a)},getResourcesForTask:function(a){return this.getResourcesForEvent(a)},getTasksForResource:function(a){return this.getEventsForResource(a)},assignTaskToResource:function(c,a,b){return this.assignEventToResource(c,a,function(d){d.setUnits(b);return d})},unassignTaskFromResource:function(b,a){return this.unassignEventFromResource(b,a)},isTaskAssignedToResource:function(b,a,c){return this.isEventAssignedToResource(b,a,c)},getAssignmentForTaskAndResource:function(b,a){return this.getAssignmentForEventAndResource(b,a)}},0,0,0,0,['store.gantt_assignmentstore'],0,[Gnt.data,'AssignmentStore'],0);Ext.cmd.derive('Gnt.patches.TaskStore',Ext.Mixin,{onClassMixedIn:function(a){Ext.override(a,{onTasksLoad:function(){if(!this._refreshCalled){this.onTasksLoaded()}this.un('refresh',this.onTaskStoreRefresh,this)},onTasksBeforeLoad:function(){this._refreshCalled=!1;this.on('refresh',this.onTaskStoreRefresh,this,{priority:1001})},onTaskStoreRefresh:function(){if(!this._refreshCalled){this._refreshCalled=!0;this.onTasksLoaded()}},setupListeners:function(){this.callParent(arguments);this.on('beforeload',this.onTasksBeforeLoad,this,{priority:100});this.un({load:this.onTasksLoaded,rootchanged:this.onTasksLoaded,scope:this});this.on({load:this.onTasksLoad,rootchanged:this.onTasksLoad,scope:this})}})}},0,0,0,0,0,0,[Gnt.patches,'TaskStore'],0);Ext.cmd.derive('Sch.data.mixin.FilterableTreeStore',Ext.Base,{isFilteredFlag:!1,isHiddenFlag:!1,treeFilter:null,lastTreeFilter:null,lastTreeHiding:null,allowExpandCollapseWhileFiltered:!0,keepExpandStateWhileFiltered:!1,reApplyFilterOnDataChange:!0,suspendIncrementalFilterRefresh:0,filterGeneration:0,currentFilterGeneration:null,dataChangeListeners:null,monitoringDataChange:!1,filterUpdateSuspended:!1,onClassMixedIn:function(a){a.override(Sch.data.mixin.FilterableTreeStore.prototype.inheritables()||{})},initTreeFiltering:function(){this.treeFilter=new Ext.util.Filter({filterFn:this.isNodeFilteredIn,scope:this});this.dataChangeListeners={nodeappend:this.onNeedToUpdateFilter,nodeinsert:this.onNeedToUpdateFilter,scope:this};Ext.apply(this.dataChangeListeners,{beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad})},onStoreBeforeLoad:function(){this.filterUpdateSuspended=!0},onStoreLoad:function(){this.filterUpdateSuspended=!1;this.onNeedToUpdateFilter()},startDataChangeMonitoring:function(){if(this.monitoringDataChange){return}this.monitoringDataChange=!0;this.on(this.dataChangeListeners)},stopDataChangeMonitoring:function(){if(!this.monitoringDataChange){return}this.monitoringDataChange=!1;this.un(this.dataChangeListeners)},onNeedToUpdateFilter:function(){if(this.reApplyFilterOnDataChange&&!this.filterUpdateSuspended&&!this.suspendIncrementalFilterRefresh){this.reApplyFilter()}},clearTreeFilter:function(){if(!this.isTreeFiltered()){return}this.currentFilterGeneration=null;this.isFilteredFlag=!1;this.lastTreeFilter=null;if(!this.isTreeFiltered(!0)){this.stopDataChangeMonitoring()}this.refreshNodeStoreContent();this.fireEvent('filter-clear',this)},reApplyFilter:function(){if(this.isHiddenFlag){this.hideNodesBy.apply(this,this.lastTreeHiding.concat(this.isFilteredFlag))}if(this.isFilteredFlag){this.filterTreeBy(this.lastTreeFilter)}},refreshNodeStoreContent:function(){var a=this,b=a.getFilters();if(b.indexOf(a.treeFilter)<0){a.addFilter(a.treeFilter)}else {this.getFilters().fireEvent('endupdate',this.getFilters())}},getIndexInTotalDataset:function(a){var b=this.getRootNode(),e=-1;var d=this.rootVisible;if(!d&&a==b){return -1}var g=this.isTreeFiltered();var f=this.currentFilterGeneration;var c=function(h){if(g&&h.__filterGen!=f||h.hidden){if(h==a){return !1}}if(d||h!=b){e++}if(h==a){return !1}if(!h.isLeaf()&&h.isExpanded()){var j=h.childNodes,k=j.length;for(var i=0;i<k;i++){if(c(j[i])===!1){return !1}}}};c(b);return e},isTreeFiltered:function(a){return this.isFilteredFlag||a&&this.isHiddenFlag},markFilteredNodes:function(o,b){var p=this;var n=this.currentFilterGeneration;var a={};var i=this.getRootNode(),l=this.rootVisible;var c=function(d){var c=d.parentNode;while(c&&!a[c.internalId]){a[c.internalId]=!0;c=c.parentNode}};var g=b.filter;var h=b.scope||this;var f=b.shallow;var d=b.checkParents||f;var j=b.fullMatchingParents;var k=b.onlyParents||j;var m=!b.isOldFilter;if(k&&d){throw new Error("Can't combine `onlyParents` and `checkParents` options")}if(l){a[i.internalId]=!0}var e=function(m){if(m.hidden){return}var q,p,r,n;if(m.isLeaf()){if(g.call(h,m,a)){a[m.internalId]=!0;c(m)}}else {if(k){q=g.call(h,m);p=m.childNodes;r=p.length;if(q){a[m.internalId]=!0;c(m);if(j){m.cascadeBy(function(c){a[c.internalId]=!0});return}}for(n=0;n<r;n++){if(q&&p[n].isLeaf()){a[p[n].internalId]=!0}else {if(!p[n].isLeaf()){e(p[n])}}}}else {if(d){q=g.call(h,m,a);if(q){a[m.internalId]=!0;c(m)}}if(!d||!f||f&&(q||m==i&&!l)){p=m.childNodes;r=p.length;for(n=0;n<r;n++){e(p[n])}}}}};e(o);i.cascadeBy(function(c){if(m){c.addedWhileFiltered=!1}if(a[c.internalId]){c.__filterGen=n;if(!p.keepExpandStateWhileFiltered&&!c.isLeaf()){c.expand()}}})},filterTreeBy:function(a,c){this.currentFilterGeneration=this.filterGeneration++;var b;if(arguments.length==1&&Ext.isObject(arguments[0])){c=a.scope;b=a.filter}else {b=a;a={filter:b,scope:c}}this.fireEvent('nodestore-datachange-start',this);a=a||{};this.markFilteredNodes(this.getRootNode(),a);a.isOldFilter=!0;this.startDataChangeMonitoring();this.isFilteredFlag=!0;this.lastTreeFilter=a;this.fireEvent('nodestore-datachange-end',this);this.fireEvent('filter-set',this);this.refreshNodeStoreContent()},isNodeFilteredIn:function(a){var c=this.isTreeFiltered();var b=this.currentFilterGeneration;return this.loading||a.addedWhileFiltered&&a.isVisible()||!Boolean(c&&a.__filterGen!=b||a.hidden)},hasNativeFilters:function(){var c=this,a=c.getFilters(),b=a.getCount();return b&&b>1||a.indexOf(c.treeFilter)<0},hideNodesBy:function(c,b,d){var a=this;if(a.isFiltered()&&a.hasNativeFilters()){throw new Error("Can't hide nodes of a filtered tree store")}b=b||a;a.getRootNode().cascadeBy(function(e){e.hidden=Boolean(c.call(b,e,a))});a.startDataChangeMonitoring();a.isHiddenFlag=!0;a.lastTreeHiding=[c,b];if(!d){a.refreshNodeStoreContent()}},showAllNodes:function(a){this.getRootNode().cascadeBy(function(b){b.hidden=!1});this.isHiddenFlag=!1;this.lastTreeHiding=null;if(!this.isTreeFiltered(!0)){this.stopDataChangeMonitoring()}if(!a){this.refreshNodeStoreContent()}},inheritables:function(){return {onNodeExpand:function(a){if(this.isTreeFiltered(!0)&&a==this.getRoot()){this.callParent(arguments);this.reApplyFilter()}else {return this.callParent(arguments)}},onNodeCollapse:function(c,b){var a=this;var d=a.data;var g=d.contains;var h=a.isTreeFiltered();var e=a.currentFilterGeneration;d.contains=function(){var f,d,j;var k=a.indexOf(c)+1;var l=!1;for(var i=0;i<b.length;i++){if(!(b[i].hidden||h&&b[i].__filterGen!=e)&&g.call(this,b[i])){f=c;while(f.parentNode){d=f;do{d=d.nextSibling}while(d&&(d.hidden||h&&d.__filterGen!=e));if(d){l=!0;j=a.indexOf(d);break}else {f=f.parentNode}}if(!l){j=a.getCount()}a.removeAt(k,j-k);break}}return !1};this.callParent(arguments);if(this.isTreeFiltered()){if(a.needsLocalFilter()){b=Ext.Array.filter(b,a.filterVisible)}if(!b.length&&a.indexOf(c)!==-1){var f=a.indexOf(c)+1;var i=a.indexOfNextVisibleNode(c);a.removeAt(f,i-f)}}d.contains=g},handleNodeExpand:function(h,d,i){var e=this;var a=[];var g=e.isTreeFiltered();var f=e.currentFilterGeneration;for(var c=0;c<d.length;c++){var b=d[c];if(!(g&&b.__filterGen!=f||b.hidden)){a[a.length]=b}}return this.callParent([h,a,i])},onNodeInsert:function(f,a,o){var c=this,e,b,m,i,d,k,p=a.raw||a.data,n=c.removedNodes,j,h,g,l=this.isTreeFiltered();if(c.filterFn){h=c.filterFn(a);a.set('visible',h);if(h){f.set('visible',c.filterFn(f))}}if(!this.reApplyFilterOnDataChange&&l){a.addedWhileFiltered=!0}c.registerNode(a,!0);c.beginUpdate();if(c.isVisible(a)||l&&a.addedWhileFiltered){if(o===0||!a.previousSibling){e=f}else {for(b=a.previousSibling;b&&!b.addedWhileFiltered&&!b.get('visible');b=b.previousSibling){}if(!b){e=f}else {while(b.isExpanded()&&b.lastChild){b=b.lastChild}for(;b&&!b.addedWhileFiltered&&!b.get('visible');b=b.previousSibling){}e=b}}c.insert(c.indexOf(e)+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){c.onNodeExpand(a,a.childNodes)}else {if(!c.fillCount){a.set('expanded',!1);a.expand()}}}}Ext.Array.remove(n,a);c.needsSync=c.needsSync||a.phantom||a.dirty;if(!a.isLeaf()&&!a.isLoaded()&&!c.lazyFill){m=c.getProxy().getReader();i=a.getProxy();d=i?i.getReader():null;k=d&&d.initialConfig.rootProperty?d:m;j=k.getRoot(p);if(j){g=a.childType;c.fillNode(a,k.extractData(j,g?{model:g}:undefined))}}c.endUpdate()},isFiltered:function(){return this.callParent(arguments)||this.isTreeFiltered()},afterEdit:function(b,c){var a=this;if(Ext.getVersion().isGreaterThan('6.0.2')){if(a.needsLocalFilter()){a.doFilter(b)}a.superclass.superclass.afterEdit.apply(a,[b,c])}else {return a.callParent([b,c])}}}}},0,0,0,0,0,0,[Sch.data.mixin,'FilterableTreeStore'],0);Ext.cmd.derive('Sch.data.util.IdConsistencyManager',Ext.Base,{config:{eventStore:null,resourceStore:null,assignmentStore:null,dependencyStore:null},eventStoreDetacher:null,resourceStoreDetacher:null,constructor:function(a){this.initConfig(a)},updateEventStore:function(b,c){var a=this;Ext.destroyMembers(a,'eventStoreDetacher');if(b){a.eventStoreDetacher=b.on({idchanged:a.onEventIdChanged,scope:a,destroyable:!0,priority:200})}},updateResourceStore:function(b,c){var a=this;Ext.destroyMembers(a,'resourceStoreDetacher');if(b){a.resourceStoreDetacher=b.on({idchanged:a.onResourceIdChanged,scope:a,destroyable:!0,priority:200})}},onEventIdChanged:function(h,i,g,f){var c=this,d=c.getAssignmentStore(),e=c.getDependencyStore(),b,a;if(d){b=c.getUpdateAssignmentEventIdFieldFn(d,g,f)}if(e){a=c.getUpdateDependencySourceTargedIdFieldFn(e,g,f)}if(b||a){h.on('update',function(){b&&b();a&&a()},null,{single:!0,priority:200})}},onResourceIdChanged:function(h,i,g,f){var c=this,e=c.getEventStore(),a=c.getAssignmentStore(),b,d;if(e&&!a){b=c.getUpdateEventResourceIdFieldFn(e,g,f)}if(a){d=c.getUpdateAssignmentResourceIdFieldFn(a,g,f)}if(b||a){h.on('update',function(){b&&b();d&&d()},null,{single:!0,priority:200})}},getUpdateEventResourceIdFieldFn:function(a,d,c){var b=a.getRange();return function(){Ext.Array.each(b,function(b){b.getResourceId()==d&&b.setResourceId(c)})}},getUpdateAssignmentEventIdFieldFn:function(b,a,d){var c=b.getAssignmentsForEvent(a);return function(){Ext.Array.each(c,function(c){c.getEventId()==a&&c.setEventId(d)})}},getUpdateAssignmentResourceIdFieldFn:function(b,a,d){var c=b.getAssignmentsForResource(a);return function(){Ext.Array.each(c,function(c){c.getResourceId()==a&&c.setResourceId(d)})}},getUpdateDependencySourceTargedIdFieldFn:function(c,a,b){var d=c.getEventDependencies(a);return function(){Ext.Array.each(d,function(d){d.getSourceId()==a&&d.setSourceId(b);d.getTargetId()==a&&d.setTargetId(b)})}}},1,0,0,0,0,0,[Sch.data.util,'IdConsistencyManager'],0);Ext.cmd.derive('Sch.data.util.ModelPersistencyManager',Ext.Base,{config:{eventStore:null,resourceStore:null,assignmentStore:null,dependencyStore:null},eventStoreDetacher:null,resourceStoreDetacher:null,assignmentStoreDetacher:null,dependencyStoreDetacher:null,constructor:function(a){this.initConfig(a)},updateEventStore:function(b,c){var a=this;Ext.destroyMembers(a,'eventStoreDetacher');if(b&&b.autoSync){a.eventStoreDetacher=b.on({beforesync:a.onEventStoreBeforeSync,scope:a,destroyable:!0,priority:100})}},updateResourceStore:function(b,c){var a=this;Ext.destroyMembers(a,'resourceStoreDetacher');if(b&&b.autoSync){a.resourceStoreDetacher=b.on({beforesync:a.onResourceStoreBeforeSync,scope:a,destroyable:!0,priority:100})}},updateAssignmentStore:function(b,c){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher');if(b&&b.autoSync){a.assignmentStoreDetacher=b.on({beforesync:a.onAssignmentStoreBeforeSync,scope:a,destroyable:!0,priority:100})}},updateDependencyStore:function(b,c){var a=this;Ext.destroyMembers(a,'dependencyStoreDetacher');if(b&&b.autoSync){a.dependencyStoreDetacher=b.on({beforesync:a.onDependencyStoreBeforeSync,scope:a,destroyable:!0,priority:100})}},onEventStoreBeforeSync:function(a){var b=this;b.removeNonPersistableRecordsToCreate(a);return b.shallContinueSync(a)},onResourceStoreBeforeSync:function(a){var b=this;b.removeNonPersistableRecordsToCreate(a);return b.shallContinueSync(a)},onAssignmentStoreBeforeSync:function(a){var b=this;b.removeNonPersistableRecordsToCreate(a);return b.shallContinueSync(a)},onDependencyStoreBeforeSync:function(a){var b=this;b.removeNonPersistableRecordsToCreate(a);return b.shallContinueSync(a)},removeNonPersistableRecordsToCreate:function(d){var a=d.create||[],c,b;for(b=a.length-1;b>=0;--b){c=a[b];if(!c.isPersistable()){Ext.Array.remove(a,c)}}if(a.length===0){delete d.create}},shallContinueSync:function(a){return Boolean(a.create&&a.create.length>0||a.update&&a.update.length>0||a.destroy&&a.destroy.length>0)}},1,0,0,0,0,0,[Sch.data.util,'ModelPersistencyManager'],0);Ext.cmd.derive('Sch.data.util.ResourceEventsCache',Sch.util.Cache,{eventStore:null,eventStoreDetacher:null,resourceStoreDetacher:null,constructor:function(b){var a=this,c=b.getResourceStore();Sch.util.Cache.prototype.constructor.call(this);function onEventAdd(d,c){Ext.Array.each(c,function(e){a.add(e.getResourceId(),e)})}function onEventRemove(d,c){Ext.Array.each(c,function(e){a.remove(e.getResourceId(),e)})}function onEventUpdate(h,c,i,g){var e=c.resourceIdField,d=c.previous&&e in c.previous,f=d&&c.previous[e];if(d){a.move(f,c.getResourceId(),c)}}function onEventStoreClearOrReset(){a.clear()}function onEventStoreResourceStoreChange(e,c,d){a.clear();attachToResourceStore(c)}function onResourceIdChanged(e,f,d,c){a.move(d,c)}function onResourceRemove(d,c){Ext.Array.each(c,function(e){a.clear(e)})}function onResourceStoreClearOrReset(){a.clear()}function attachToResourceStore(c){Ext.destroy(a.resourceStoreDetacher);a.resourceStoreDetacher=c&&c.on({idchanged:onResourceIdChanged,remove:onResourceRemove,clear:onResourceStoreClearOrReset,cacheresethint:onResourceStoreClearOrReset,rootchange:onResourceStoreClearOrReset,priority:100,destroyable:!0})}a.eventStoreDetacher=b.on({add:onEventAdd,remove:onEventRemove,update:onEventUpdate,clear:onEventStoreClearOrReset,cacheresethint:onEventStoreClearOrReset,rootchange:onEventStoreClearOrReset,resourcestorechange:onEventStoreResourceStoreChange,priority:100,destroyable:!0});a.eventStoreFiltersDetacher=b.getFilters().on('endupdate',onEventStoreClearOrReset,this,{priority:1002,destroyable:!0});attachToResourceStore(c);a.eventStore=b},destroy:function(){var a=this;Ext.destroyMembers(a,'eventStoreDetacher','eventStoreFiltersDetacher','resourceStoreDetacher');a.eventStore=null},get:function(a,b){var c=this;a=c.key(a);b=b||function(){return Ext.Array.filter(c.eventStore.getRange(),function(c){return c.getResourceId()==a})};return Sch.util.Cache.prototype.get.call(this,a,b)}},1,0,0,0,0,0,[Sch.data.util,'ResourceEventsCache'],0);Ext.cmd.derive('Sch.data.mixin.EventStore',Ext.Mixin,{isEventStore:!0,resourceStore:null,resourceStoreDetacher:null,assignmentStore:null,resourceEventsCache:null,idConsistencyManager:null,modelPersistencyManager:null,mixinConfig:{after:{constructor:'constructor',destroy:'destroy'}},constructor:function(){var a=this;a.resourceEventsCache=a.createResourceEventsCache();a.idConsistencyManager=a.createIdConsistencyManager();a.modelPersistencyManager=a.createModelPersistencyManager()},destroy:function(){var a=this;Ext.destroyMembers(a,'resourceEventsCache','idConsistencyManager','modelPersistencyManager')},createResourceEventsCache:function(){return new Sch.data.util.ResourceEventsCache(this)},createIdConsistencyManager:function(){var a=this;return new Sch.data.util.IdConsistencyManager({eventStore:a,resourceStore:a.getResourceStore(),assignmentStore:a.getAssignmentStore(),dependencyStore:a.getDependencyStore()})},createModelPersistencyManager:function(){var a=this;return new Sch.data.util.ModelPersistencyManager({eventStore:a,resourceStore:a.getResourceStore(),assignmentStore:a.getAssignmentStore(),dependencyStore:a.getDependencyStore()})},getResourceStore:function(){return this.resourceStore},setResourceStore:function(b){var a=this,c=a.resourceStore;if(a.resourceStore){a.resourceStore.setEventStore(null);a.idConsistencyManager&&a.idConsistencyManager.setResourceStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setResourceStore(null)}a.resourceStore=b&&Ext.StoreMgr.lookup(b)||null;if(a.resourceStore){a.modelPersistencyManager&&a.modelPersistencyManager.setResourceStore(a.resourceStore);a.idConsistencyManager&&a.idConsistencyManager.setResourceStore(a.resourceStore);b.setEventStore(a)}if((c||b)&&c!==b){a.fireEvent('resourcestorechange',a,b,c)}},getAssignmentStore:function(){return this.assignmentStore},setAssignmentStore:function(b){var a=this,c=a.assignmentStore;if(a.assignmentStore){a.assignmentStore.setEventStore(null);a.idConsistencyManager&&a.idConsistencyManager.setAssignmentStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setAssignmentStore(null)}a.assignmentStore=b&&Ext.StoreMgr.lookup(b)||null;if(a.assignmentStore){a.modelPersistencyManager&&a.modelPersistencyManager.setAssignmentStore(a.assignmentStore);a.idConsistencyManager&&a.idConsistencyManager.setAssignmentStore(a.assignmentStore);a.assignmentStore.setEventStore(a);Ext.destroy(a.resourceEventsCache)}else {a.resourceEventsCache=a.createResourceEventsCache()}if((c||b)&&c!==b){a.fireEvent('assignmentstorechange',a,b,c)}},getDependencyStore:function(){return this.dependencyStore},setDependencyStore:function(b){var a=this,c=a.DependencyStore;if(a.dependencyStore){a.dependencyStore.setEventStore(null);a.idConsistencyManager&&a.idConsistencyManager.setDependencyStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setDependencyStore(null)}a.dependencyStore=b&&Ext.StoreMgr.lookup(b)||null;if(a.dependencyStore){a.modelPersistencyManager&&a.modelPersistencyManager.setDependencyStore(a.dependencyStore);a.idConsistencyManager&&a.idConsistencyManager.setDependencyStore(a.dependencyStore);a.dependencyStore.setEventStore(a)}if((c||b)&&c!==b){a.fireEvent('dependencystorechange',a,b,c)}},isDateRangeAvailable:function(e,g,b,c){var f=Sch.util.Date,d=this.getEventsForResource(c),a=!0;Ext.each(d,function(d){a=b===d||!f.intersectSpans(e,g,d.getStartDate(),d.getEndDate());return a});return a},getEventsInTimeSpan:function(b,d,e){var c=new Ext.util.MixedCollection();var a=[];if(e!==!1){var f=Sch.util.Date;this.forEachScheduledEvent(function(h,c,g){if(f.intersectSpans(c,g,b,d)){a.push(h)}})}else {this.forEachScheduledEvent(function(g,c,f){if(c-b>=0&&d-f>=0){a.push(g)}})}c.addAll(a);return c},getEventsByStartDate:function(c){var b=Sch.util.Date;var a=[];this.forEachScheduledEvent(function(e,d,f){if(b.compareWithPrecision(d,c,b.DAY)===0){a.push(e)}});return a},forEachScheduledEvent:function(b,a){this.each(function(c){var d=c.getStartDate(),e=c.getEndDate();if(d&&e){return b.call(a||this,c,d,e)}},this)},getTotalTimeSpan:function(){var a=new Date(9999,0,1),b=new Date(0),c=Sch.util.Date;this.each(function(d){if(d.getStartDate()){a=c.min(d.getStartDate(),a)}if(d.getEndDate()){b=c.max(d.getEndDate(),b)}});a=a<new Date(9999,0,1)?a:null;b=b>new Date(0)?b:null;this.lastTotalTimeSpan={start:a||null,end:b||a||null};return this.lastTotalTimeSpan},filterEventsForResource:function(a,d,c){var b=a.getEvents(this);return Ext.Array.filter(b,d,c||this)},append:function(a){throw 'Must be implemented by consuming class'},getResourcesForEvent:function(b){var c=this,d=c.getAssignmentStore(),e=c.getResourceStore(),a;if(d){a=d.getResourcesForEvent(b)}else {if(e){b=b instanceof Sch.model.Event&&b||c.getModelById(b);a=b&&e.getModelById(b.getResourceId());a=a&&[a]||[]}else {a=[]}}return a},getEventsForResource:function(d){var b=this,c=b.getAssignmentStore(),a;if(c){a=c.getEventsForResource(d)}else {if(b.resourceEventsCache){a=b.resourceEventsCache.get(d)}else {a=[]}}return a},getAssignmentsForEvent:function(b){var c=this,a=c.getAssignmentStore();return a&&a.getAssignmentsForEvent(b)||[]},getAssignmentsForResource:function(b){var c=this,a=c.getAssignmentStore();return a&&a.getAssignmentsForResource(b)||[]},assignEventToResource:function(a,b){var d=this,c=d.getAssignmentStore();if(c){c.assignEventToResource(a,b)}else {a=a instanceof Sch.model.Event&&a||d.getModelById(a);b=b instanceof Sch.model.Resource?b.getId():b;a&&a.setResourceId(b)}},unassignEventFromResource:function(a,b){var d=this,c=d.getAssignmentStore();if(c){c.unassignEventFromResource(a,b)}else {a=a instanceof Sch.model.Event&&a||d.getModelById(a);b=b instanceof Sch.model.Resource?b.getId():b;if(a&&a.getResourceId()==b){a.setResourceId(null)}}},reassignEventFromResourceToResource:function(a,c,b){var g=this,d=g.getAssignmentStore();var e=b instanceof Sch.model.Resource?b.getId():b;var h=c instanceof Sch.model.Resource?c.getId():c;if(d){var f=d.getAssignmentForEventAndResource(a,c);if(f){f.setResourceId(e)}else {d.assignEventToResource(a,b)}}else {a=a instanceof Sch.model.Event&&a||g.getModelById(a);if(a.getResourceId()==h){a.setResourceId(e)}}},isEventAssignedToResource:function(a,b){var e=this,d=e.getAssignmentStore(),c;if(d){c=d.isEventAssignedToResource(a,b)}else {a=a instanceof Sch.model.Event&&a||e.getModelById(a);b=b instanceof Sch.model.Resource?b.getId():b;c=a&&a.getResourceId()==b||!1}return c},removeAssignmentsForEvent:function(a){var c=this,b=c.getAssignmentStore();if(b){b.removeAssignmentsForEvent(a)}else {a=a instanceof Sch.model.Event&&a||c.getModelById(a);a&&a.setResourceId(null)}},removeAssignmentsForResource:function(a){var b=this,c=b.getAssignmentStore(),d=b.getResourceStore();if(c){c.removeAssignmentsForResource(a)}else {if(d){a=a instanceof Sch.model.Resource&&a||d.getModelById(a);a&&Ext.Array.each(b.resourceEventsCache.get(a),function(b){b.setResourceId(null)})}else {a=a instanceof Sch.model.Resource?a.getId():a;Ext.Array.each(b.getRange(),function(b){b.getResourceId()==a&&b.setResourceId(null)})}}},isEventPersistable:function(f){var g=this,e=g.getAssignmentStore(),b,a,d,c=!0;if(!e){b=f.getResources();for(a=0,d=b.length;c&&a<d;++a){c=b[a].phantom!==!0}}return c}},1,0,0,0,0,0,[Sch.data.mixin,'EventStore'],0);Ext.cmd.derive('Gnt.data.undoredo.mixin.TaskStoreHint',Robo.data.Store,{segmentsStateByTaskId:null,onSegmentEditBegin:function(a,b){var c=this;this.segmentsStateByTaskId=this.segmentsStateByTaskId||{};if(!this.segmentsStateByTaskId.hasOwnProperty(a.internalId)){this.segmentsStateByTaskId[a.internalId]=a.buildSegmentsSnapshot()}},onSegmentEditEnd:function(a,c){var b=this;if(!b.isInUndoRedoTransaction()){delete this.segmentsStateByTaskId[a.internalId]}},onUndoRedoTransactionEnd:function(b,a){var c=this;this.segmentsStateByTaskId=null;Robo.data.Store.prototype.onUndoRedoTransactionEnd.call(this,b,a)},getOriginalSegmentsState:function(a){var b=this.segmentsStateByTaskId&&this.segmentsStateByTaskId[a.internalId];if(!b){var c=(a.previous||a.previousValues)[a.segmentsField];if(c){b=a.buildSegmentsSnapshot(c)}}return b}},0,0,0,0,0,0,[Gnt.data.undoredo.mixin,'TaskStoreHint'],0);Ext.cmd.derive('Gnt.data.mixin.ProjectableStore',Ext.Base,function(){function getByInternalId(a,b){return a.byInternalIdMap&&a.byInternalIdMap[b]||a.getByInternalId(b)}function getProjection(){var b=this,a=b.projectionStack;return a&&a[a.length-1]}function getProjectionLevel(){var b=this,a=b.projectionStack;return a&&a.length||0}function isProjecting(){return this.getProjectionLevel()>0}function areProjected(a){var c,d,b;a=[].concat(a);for(b=!1,c=0,d=a.length;!b&&c<d;c++){b=a[c].isProjected()}return b}function startProjection(){var a=this,b=a.projectionStack,c,d;if(!b){a.projectionStack=[{}]}else {d=b[b.length-1];c={};Ext.Object.each(d,function(d,b){var a=function(){};a.prototype=b;c[d]=new a()});b.push(c)}a.fireEvent('projectionstart',a,a.getProjectionLevel())}function commitProjection(){var d=this,c=d.projectionStack,e,b,i,f,g,a,h;if(c.length===1){b=c[0];d.projectionStack=null;for(a in b){if(b.hasOwnProperty(a)){h=getByInternalId(d,a);if(h){f=b[a];g=!1;for(i in f){if(f.hasOwnProperty(i)){g=!0;break}}g&&h.set(f)}}}}else {b=c.pop();e=c[c.length-1];for(a in b){if(b.hasOwnProperty(a)){if(!e.hasOwnProperty(a)){e[a]=b[a]}else {e[a]=Ext.apply(e[a],b[a])}}}}d.fireEvent('projectioncommit',d,c&&c[c.length-1],b,d.getProjectionLevel())}function rejectProjection(){var b=this,a=b.projectionStack,c=a.pop();if(a.length===0){b.projectionStack=null}b.fireEvent('projectionreject',b,a&&a[a.length-1],c,b.getProjectionLevel())}return {projectionStack:null,getProjection:getProjection,isProjecting:isProjecting,areProjected:areProjected,getProjectionLevel:getProjectionLevel,startProjection:startProjection,commitProjection:commitProjection,rejectProjection:rejectProjection}},0,0,0,0,0,0,[Gnt.data.mixin,'ProjectableStore'],0);Ext.cmd.derive('Gnt.data.TaskStore',Ext.data.TreeStore,{model:'Gnt.model.Task',storeId:'tasks',typeProperty:'TaskType',calendarManager:null,calendar:null,dependencyStore:null,resourceStore:null,assignmentStore:null,weekendsAreWorkdays:!1,cascadeChanges:!0,batchSync:!0,recalculateParents:!0,skipWeekendsDuringDragDrop:!0,cascadeDelay:0,moveParentAsGroup:!0,enableDependenciesForParentTasks:!0,availabilitySearchLimit:1825,cycleResolutionStrategy:'cut',autoNormalizeNodes:!0,cascading:!1,isFillingRoot:!1,isSettingRoot:!1,earlyStartDates:null,earlyEndDates:null,lateStartDates:null,lateEndDates:null,lastTotalTimeSpan:null,suspendAutoRecalculateParents:0,suspendAutoCascade:0,currentCascadeBatch:null,batchCascadeLevel:0,dependenciesCalendar:'project',pendingDataUpdates:null,tasksLoadStarted:0,constructor:function(a){a=a||{};var i='calendarManager' in a?a.calendarManager:this.calendarManager;delete a.calendarManager;this.setCalendarManager(i);var b=a.calendar||this.calendar;if(!b){var f={};if(a.hasOwnProperty('weekendsAreWorkdays')){f.weekendsAreWorkdays=a.weekendsAreWorkdays}else {if(this.self.prototype.hasOwnProperty('weekendsAreWorkdays')&&this.self!=Gnt.data.TaskStore){f.weekendsAreWorkdays=this.weekendsAreWorkdays}}if(this.calendarManager){b=this.calendarManager.getProjectCalendar()}b=b&&Ext.data.StoreManager.lookup(b)||new Gnt.data.Calendar(f)}var e=a.dependencyStore||this.dependencyStore;e=e&&Ext.data.StoreManager.lookup(e)||Ext.create('Gnt.data.DependencyStore');delete a.dependencyStore;var c=a.resourceStore||this.resourceStore;c=c&&Ext.data.StoreManager.lookup(c)||Ext.create('Gnt.data.ResourceStore');delete a.resourceStore;var d=a.assignmentStore||this.assignmentStore;d=d&&Ext.data.StoreManager.lookup(d)||Ext.create('Gnt.data.AssignmentStore',{resourceStore:c});delete a.assignmentStore;if(b){delete a.calendar;this.setCalendar(b,!0,!0)}this.resetEarlyDates(!0);this.resetLateDates(!0);this.pendingDataUpdates={recalculateParents:{}};var g=a.root||this.root;this.root=null;delete a.root;Ext.data.TreeStore.prototype.constructor.call(this,a);this.setResourceStore(c);this.setAssignmentStore(d);this.setDependencyStore(e);g&&this.setRoot(g);this.setupListeners();var h=this.getRoot();if(h&&this.autoNormalizeNodes){h.normalizeParent()}if(this.autoSync&&this.batchSync){this.sync=Ext.Function.createBuffered(this.sync,500)}this.initTreeFiltering()},setCalendarManager:function(a){if(this.calendarManagerListeners){this.calendarManagerListeners.destroy()}a=a&&Ext.data.StoreManager.lookup(a);this.calendarManager=a;if(a){this.projectCalendarSet=Boolean(a.getProjectCalendar());this.calendarManagerListeners=a.on({projectcalendarset:function(c,b){if(!this.settingCalendar){this.setCalendar(b,!this.projectCalendarSet);this.projectCalendarSet=!0}},scope:this,destroyable:!0})}return a},onProjectionCommit:function(e,d,a){for(var b in a){if(a.hasOwnProperty(b)){var c=this.getModelByInternalId(b);c&&c.commitSegmentsProjection()}}},onProjectionReject:function(e,d,a){for(var b in a){if(a.hasOwnProperty(b)){var c=this.getModelByInternalId(b);c&&c.rejectSegmentsProjection()}}},setupListeners:function(){this.on({nodeappend:this.onMyNodeAdded,nodeinsert:this.onMyNodeAdded,update:this.onTaskUpdated,projectioncommit:this.onProjectionCommit,projectionreject:this.onProjectionReject,scope:this});this.on({noderemove:this.onTaskRemoved,nodemove:this.onTaskMoved,write:this.onTaskStoreWrite,sort:this.onTasksSorted,load:this.onTasksLoaded,rootchange:this.onTasksRootChange,scope:this,priority:100})},createResourceEventsCache:Ext.emptyFn,createIdConsistencyManager:function(){var a=this;return new Sch.data.util.IdConsistencyManager({eventStore:a,resourceStore:a.getResourceStore(),assignmentStore:a.getAssignmentStore(),dependencyStore:a.getDependencyStore()})},createModelPersistencyManager:function(){var a=this;return new Sch.data.util.ModelPersistencyManager({eventStore:a,resourceStore:a.getResourceStore(),assignmentStore:a.getAssignmentStore(),dependencyStore:a.getDependencyStore()})},fillNode:function(a,b){if(a.isRoot()){this.isSettingRoot=!0}Ext.data.TreeStore.prototype.fillNode.apply(this,arguments);if(a.isRoot()){this.isSettingRoot=!1}},onTasksRootChange:function(){var a=this.getRoot();if(a&&this.autoNormalizeNodes){a.normalizeParent()}},onTasksLoaded:function(){this.onTasksRootChange();this.onTasksLoadEnd()},onTasksLoadStart:function(){this.tasksLoadStarted++;this.suspendAutoRecalculateParents++;this.un('noderemove',this.onTaskRemoved,this);this.un('nodeappend',this.onMyNodeAdded,this);this.un('update',this.onTaskUpdated,this)},onTasksLoadEnd:function(){this.lastTotalTimeSpan=null;this.tasksLoadStarted--;if(!this.tasksLoadStarted){this.on('noderemove',this.onTaskRemoved,this);this.on('nodeappend',this.onMyNodeAdded,this);this.on('update',this.onTaskUpdated,this)}this.suspendAutoRecalculateParents--},load:function(a){this.on('beforeload',this.onTasksLoadStart,this,{priority:-999,single:!0});Ext.data.TreeStore.prototype.load.apply(this,arguments)},setProxy:function(){(arguments.callee.$previous||Ext.data.TreeStore.prototype.setProxy).apply(this,arguments);if(this.typeProperty){var b=this,a=b.getProxy()&&b.getProxy().getReader();if(a&&!a.getTypeProperty()){a.setTypeProperty(b.typeProperty)}}},setRoot:function(c){var a=this;var b=this.count()&&this.getRoot();this.isSettingRoot=!0;Ext.apply(c,{calendar:a.calendar,taskStore:a,dependencyStore:a.dependencyStore,phantom:!1,dirty:!1});var d=(arguments.callee.$previous||Ext.data.TreeStore.prototype.setRoot).apply(this,arguments);this.isSettingRoot=!1;b&&b.cascadeBy(function(a){a.setTaskStore(null)});return d},setDependencyStore:function(c){var a=this,b=a.dependencyStore,d={add:a.onDependencyAdd,update:a.onDependencyUpdate,remove:a.onDependencyDelete,scope:a};if(b&&b.isStore){b.un(d);b.setTaskStore(null);a.idConsistencyManager&&a.idConsistencyManager.setDependencyStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setDependencyStore(null)}a.dependencyStore=c&&Ext.StoreMgr.lookup(c)||null;if(a.dependencyStore){a.modelPersistencyManager&&a.modelPersistencyManager.setDependencyStore(a.dependencyStore);a.idConsistencyManager&&a.idConsistencyManager.setDependencyStore(a.dependencyStore);a.dependencyStore.setTaskStore(a);a.dependencyStore.on(d)}if((b||c)&&b!==c){a.events&&a.fireEvent('dependencystorechange',a,c,b)}},getResourceStore:function(){return this.resourceStore||null},setResourceStore:function(c){var a=this,b=a.resourceStore;if(b&&b.isStore){b.setTaskStore(null);a.idConsistencyManager&&a.idConsistencyManager.setResourceStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setResourceStore(null)}a.resourceStore=c&&Ext.StoreMgr.lookup(c)||null;if(a.resourceStore){a.modelPersistencyManager&&a.modelPersistencyManager.setResourceStore(a.resourceStore);a.idConsistencyManager&&a.idConsistencyManager.setResourceStore(a.resourceStore);a.resourceStore.setTaskStore(a);a.resourceStore.normalizeResources()}if((b||c)&&b!==c){a.events&&a.fireEvent('resourcestorechange',a,c,b)}},getAssignmentStore:function(){return this.assignmentStore||null},setAssignmentStore:function(b){var a=this,c=a.assignmentStore,d={add:a.onAssignmentStructureMutation,update:a.onAssignmentMutation,remove:a.onAssignmentStructureMutation,scope:a};if(c&&c.isStore){c.un(d);c.setTaskStore(null);a.idConsistencyManager&&a.idConsistencyManager.setAssignmentStore(null);a.modelPersistencyManager&&a.modelPersistencyManager.setAssignmentStore(null)}a.assignmentStore=b&&Ext.StoreMgr.lookup(b)||null;if(a.assignmentStore){a.modelPersistencyManager&&a.modelPersistencyManager.setAssignmentStore(a.assignmentStore);a.idConsistencyManager&&a.idConsistencyManager.setAssignmentStore(a.assignmentStore);b.setTaskStore(a);b.on(d)}if((c||b)&&c!==b){a.events&&a.fireEvent('assignmentstorechange',a,b,c)}},adjustToCalendar:function(a,c){var d=this;d.resetEarlyDates();d.resetLateDates();if(a instanceof Gnt.model.Task){a.adjustToCalendar(c)}else {if(Ext.isFunction(a)){c=a;a=[]}var b=d.getRoot(),f={},e=!1;if(!Ext.isArray(a)||!a.length){a=b&&b.childNodes||[];e=!0}b&&b.propagateChanges(function(){var d=[];for(var g=0,h=a.length;g<h;g++){var f=a[g];f.cascadeBy(function(d){if(d!==b){d.adjustToCalendarWithoutPropagation()}});if(!e||!f.hasIncomingDependencies()){d.push(f)}}return d.length&&d||!1},function(d,b){if(!d){Ext.apply(f,b)}c&&c.apply(this,arguments)})}},getCalendar:function(){return this.calendar||null},setCalendar:function(a,d,e){if(this.settingCalendar){return}this.settingCalendar=!0;var b={calendarchange:function(f,c,b){this.adjustToCalendar(c,b)},scope:this};if(this.calendar){this.calendar.un(b)}this.calendar=a;if(a){a.on(b);var c=this.getRoot();if(c){c.calendar=a}if(!d){this.adjustToCalendar()}if(!e){this.fireEvent('calendarset',this,a)}if(this.calendarManager){this.calendarManager.setProjectCalendar(a)}}this.settingCalendar=!1},getCriticalPaths:function(){var b=[],c=this.getProjects(),a=new Date(0),d=c.length===0?[this.getRoot()]:c;Ext.Array.each(d,function(c){c.cascadeBy(function(b){a=Sch.util.Date.max(b.getEndDate(),a)});c.cascadeBy(function(d){if(a-d.getEndDate()===0&&!d.isRoot()&&!(!d.isLeaf()&&d.childNodes.length)){b.push(d)}})});return Ext.Array.map(b,function(a){return a.getCriticalPaths()})},onMyNodeAdded:function(e,b){var a=this;if(!b.isRoot()){if(a.lastTotalTimeSpan){var d=a.getTotalTimeSpan();if(b.getEndDate()>d.end||b.getStartDate()<d.start){a.lastTotalTimeSpan=null}}if(b.getEndDate()-a.getProjectEndDate()===0){a.resetLateDates()}var c=this.getDependencyStore();!a.isUndoingOrRedoing()&&c&&c.reduceTaskDependencies(b,function(g,a){var d=a.getSourceTask(),f=a.getTargetTask();d&&f&&c.scheduleLinkedTasks(d,f)},null,!1);if(a.cascadeChanges&&!a.suspendAutoCascade&&!a.isUndoingOrRedoing()){if(b.getParentsIncomingDependencies().length){b.alignByIncomingDependenciesWithoutPropagation()}}if(!a.cascading&&a.recalculateParents&&!a.suspendAutoRecalculateParents&&!a.isUndoingOrRedoing()){if(a.updating){a.pendingDataUpdates.recalculateParents[b.getId()]=b}else {b.recalculateParents()}}}},onTaskUpdated:function(h,a,g){var b=a.previous;if(this.lastTotalTimeSpan){var d=this.getTotalTimeSpan();if(b&&(b[a.endDateField]-d.end===0||b[a.startDateField]-d.start===0)||(a.getEndDate()>d.end||a.getStartDate()<d.start)){this.lastTotalTimeSpan=null}}if(!this.cascading&&g!==Ext.data.Model.COMMIT&&b&&!this.isUndoingOrRedoing()){var e=a.percentDoneField in b;if(a.startDateField in b||a.endDateField in b||'parentId' in b||a.effortField in b||b[a.schedulingModeField]==='Manual'||b[a.manuallyScheduledField]){var c=a;if(this.cascadeChanges&&!this.suspendAutoCascade){if(b[c.schedulingModeField]=='Manual'){var f=c.getIncomingDependencies(!0);if(f.length){c=f[0].getSourceTask()}}this.cascadeTimer=Ext.Function.defer(c.propagateChanges,this.cascadeDelay,c,[Ext.emptyFn,null,!0])}else {this.resetEarlyDates();this.resetLateDates()}e=!0}else {if((b[a.schedulingModeField]||a.manuallyScheduledField in b)&&a.isManuallyScheduled()){this.resetEarlyDates();this.resetLateDates()}}if(e&&this.recalculateParents&&!this.suspendAutoRecalculateParents){if(this.updating){this.pendingDataUpdates.recalculateParents[a.getId()]=a}else {a.recalculateParents()}}}},onEndUpdate:function(){var c=this,a={},b;if(!this.isUndoingOrRedoing()){Ext.Object.each(c.pendingDataUpdates.recalculateParents,function(c,b){b.parentNode&&(a[b.parentNode.getId()]=b.parentNode)});a=Ext.Array.sort(Ext.Object.getValues(a),function(a,b){return a.data.depth>b.data.depth?1:a.data.depth<b.data.depth?-1:0});while(a.length>0){b=a.pop();b.refreshCalculatedParentNodeData();b.recalculateParents()}}c.pendingDataUpdates.recalculateParents={};return Ext.data.TreeStore.prototype.onEndUpdate.apply(this,arguments)},getEmptyCascadeBatch:function(){var a=this;return {nbrAffected:0,affected:{},visitedCounters:{},addVisited:function(b){var a=b.internalId;if(!this.visitedCounters[a]){this.visitedCounters[a]=1}else {this.visitedCounters[a]++}},addAffected:function(c,f){var d=c.internalId;if(this.affected[d]){return}else {this.affected[d]=c;this.nbrAffected++}if(!a.cascading&&this.nbrAffected>1){a.fireEvent('beforecascade',a);a.cascading=!0}if(!f){var e=this.affectedParentsbyInternalId;var g=this.affectedParentsArray;var b=c.isLeaf()?c.parentNode:c;while(b&&!b.data.root){if(e[b.internalId]){break}e[b.internalId]=b;g.push(b);this.addAffected(b,!0);b=b.parentNode}}},affectedParentsArray:[],affectedParentsbyInternalId:{},parentsStartDates:{}}},startBatchCascade:function(){if(!this.batchCascadeLevel){this.currentCascadeBatch=this.getEmptyCascadeBatch();this.suspendAutoRecalculateParents++;this.suspendAutoCascade++}this.batchCascadeLevel++;return this.currentCascadeBatch},endBatchCascade:function(){this.batchCascadeLevel--;if(!this.batchCascadeLevel){this.suspendAutoRecalculateParents--;this.suspendAutoCascade--;var a=this.currentCascadeBatch;this.currentCascadeBatch=null;this.resetEarlyDates();this.resetLateDates();if(this.cascading){this.cascading=!1;this.fireEvent('cascade',this,a)}}},removeTaskDependencies:function(c){var a=this.dependencyStore,b=c.getAllDependencies(a);if(b.length){a.remove(b)}},removeTaskAssignments:function(c){var b=this.getAssignmentStore(),a=c.getAssignments();if(a.length){b.remove(a)}},onTaskRemoved:function(i,a,h){var e=this.getDependencyStore();var b=this.getAssignmentStore();var c=!a.isReplace&&!h;if(e&&c){a.cascadeBy(this.removeTaskDependencies,this)}if(b&&c){b.fireEvent('beforetaskassignmentschange',b,a.getId(),[]);a.cascadeBy(this.removeTaskAssignments,this);b.fireEvent('taskassignmentschanged',b,a.getId(),[])}var d=this.getTotalTimeSpan();var f=a.getStartDate();var g=a.getEndDate();if(g-d.end===0||f-d.start===0){this.lastTotalTimeSpan=null}if(c){a.setTaskStore(null)}this.resetEarlyDates();this.resetLateDates()},onTaskMoved:function(b,f,e,g){var a=this.getTotalTimeSpan();var c=b.getStartDate();var d=b.getEndDate();if(d-a.end===0||c-a.start===0){this.lastTotalTimeSpan=null}this.resetEarlyDates();this.resetLateDates()},onAssignmentMutation:function(c,a){var b=this;if(!this.isUndoingOrRedoing()){Ext.Array.each([].concat(a),function(d){var e=d.getTask(b);if(e){e.onAssignmentMutation(d)}})}},onAssignmentStructureMutation:function(c,a){var b=this;if(!this.isUndoingOrRedoing()){Ext.Array.each([].concat(a),function(d){var e=d.getTask(b);if(e){e.onAssignmentStructureMutation(d)}})}},onDependencyUpdate:function(c,a,b){if(b!==Ext.data.Model.COMMIT){this.onDependencyAdd(c,a)}},onDependencyAdd:function(e,c){var b=this,d,a;b.resetEarlyDates();b.resetLateDates();if(b.cascadeChanges&&!b.suspendAutoCascade&&!b.isUndoingOrRedoing()){a=[];if(Ext.isArray(c)){Ext.Array.each(c,function(b){d=b.getSourceTask();d&&a.push(d)});a.length&&b.getRoot().propagateChanges(function(){return a})}else {a=c.getSourceTask();a&&a.propagateChanges()}}},onDependencyDelete:function(b,a){this.resetEarlyDates();this.resetLateDates()},onTaskStoreWrite:function(e,c){var b=this,d=c.getRecords(),a;Ext.Array.each(d,function(b){Ext.each(b.childNodes,function(d){if(d.phantom){a=!0;return !1}})});if(a&&!this.autoSync){b.syncTimer=setTimeout(function(){b.sync()},1)}},forEachTaskUnordered:function(c,b){var a=this.getRoot();if(a){a.cascadeBy(function(d){if(d!==a){return c.call(b||this,d)}})}},getTimeSpanForTasks:function(c){var a=new Date(9999,0,1),b=new Date(0);var d=function(f){var d=f.getStartDate();var e=f.getEndDate();if(d&&d<a){a=d}if(d&&e&&e>b){b=e}};if(c){if(!Ext.isArray(c)){c=[c]}Ext.Array.each(c,d)}else {this.forEachTaskUnordered(d)}a=a<new Date(9999,0,1)?a:null;b=b>new Date(0)?b:null;return {start:a,end:b||a&&Ext.Date.add(a,Ext.Date.DAY,1)||null}},getTotalTimeSpan:function(){if(this.lastTotalTimeSpan){return this.lastTotalTimeSpan}this.lastTotalTimeSpan=this.getTimeSpanForTasks();return this.lastTotalTimeSpan},getProjectStartDate:function(){return this.getTotalTimeSpan().start},getProjectEndDate:function(){return this.getTotalTimeSpan().end},getProjects:function(){var d=this.getRoot(),c=[],b=d.childNodes;for(var a=0,e=b.length;a<e;a++){if(b[a].isProject){c.push(b[a])}}return c},getTotalTaskCount:function(b){var a=b===!1?1:0;this.forEachTaskUnordered(function(){a++});return a},toArray:function(){var a=[];this.getRoot().cascadeBy(function(b){a.push(b)});return a},beginIndent:function(b,a){this.fireEvent('beforeindentationchange',this,b,a)},endIndent:function(b,a){this.fireEvent('indentationchange',this,b,a)},indent:function(a,f){var c=this,g=!1,b={},e,d;a=Ext.isArray(a)?a.slice():[a];a=Ext.Array.filter(a,function(b){var c;c=!!b.previousSibling;while(c&&!b.isRoot()){c=!Ext.Array.contains(a,b.parentNode);b=b.parentNode}return c});a=Ext.Array.sort(a,function(b,c){return b.get('index')-c.get('index')});e=Ext.Array.reduce(a,function(c,b){c[b.getId()]={parentNode:b.parentNode,index:b.get('index')};return c},{});c.beginIndent(a,e);c.suspendEvent('beforeindentationchange','indentationchange');d=a.slice();(function processStep(){if(d.length){d.shift().indent(function(d,c){if(!d){b=Ext.apply(b,c);processStep()}else {g=!0;b={}}})}else {c.resumeEvent('beforeindentationchange','indentationchange');c.endIndent(a,e);f&&f(g,b)}})()},outdent:function(a,f){var c=this,g=!1,b={},e,d;a=Ext.isArray(a)?a.slice():[a];a=Ext.Array.filter(a,function(b){var c;c=b.parentNode&&!b.parentNode.isRoot();while(c&&!b.isRoot()){c=!Ext.Array.contains(a,b.parentNode);b=b.parentNode}return c});a=Ext.Array.sort(a,function(b,c){return c.get('index')-b.get('index')});e=Ext.Array.reduce(a,function(c,b){c[b.getId()]={parentNode:b.parentNode,index:b.get('index')};return c},{});c.beginIndent(a,e);c.suspendEvent('beforeindentationchange','indentationchange');d=a.slice();(function processStep(){if(d.length){d.shift().outdent(function(d,c){if(!d){b=Ext.apply(b,c);processStep()}else {g=!0;b={}}})}else {c.resumeEvent('beforeindentationchange','indentationchange');c.endIndent(a,e);f&&f(g,b)}})()},getTasksForResource:function(a){return this.getEventsForResource(a)},getResourcesForTask:function(a){return this.getResourcesForEvent(a)},forEachScheduledEvent:function(b,a){a=a||this;this.forEachTaskUnordered(function(c){var d=c.getStartDate(),e=c.getEndDate();if(d&&e){return b.call(a,c,d,e)}})},onTasksSorted:function(){if(this.lastTreeFilter){this.filterTreeBy(this.lastTreeFilter)}},append:function(a){return this.getRoot().appendChild(a)},resetEarlyDates:function(a){this.earlyStartDates={};this.earlyEndDates={};if(!a){this.fireEvent('resetearlydates')}},resetLateDates:function(a){this.lateStartDates={};this.lateEndDates={};if(!a){this.fireEvent('resetlatedates')}},getBySequenceNumber:function(a){return this.getRoot().getBySequenceNumber(a)},destroy:function(){this.setCalendar(null);this.setCalendarManager(null);this.setAssignmentStore(null);this.setDependencyStore(null);this.setResourceStore(null);if(this.calendarManagerListeners){this.calendarManagerListeners.destroy()}clearTimeout(this.cascadeTimer);clearTimeout(this.syncTimer);Ext.data.TreeStore.prototype.destroy.apply(this,arguments)},moveSeveralTasks:function(d){var c=this.startBatchCascade();var b;while(b=d()){var a=b.task;if(a.isLeaf()||!a.childNodes.length){if(!c.affected[a.internalId]){c.addAffected(a);b.method&&a[b.method].apply(a,b.args);if(this.cascadeChanges){a.propagateChanges(Ext.emptyFn,null,!0)}}}else {if(this.recalculateParents){c.addAffected(a)}}}this.endBatchCascade()},linearWalkDependentTasks:function(c,d,b){var a=this;b=b||{self:!0,ancestors:a.recalculateParents,descendants:a.moveParentAsGroup,successors:a.cascadeChanges,cycles:a.cycleResolutionStrategy};return Gnt.data.Linearizator.linearWalkBySpecification(c,d,b)},getLinearWalkingSequenceForDependentTasks:function(c,b){var a=[];this.linearWalkDependentTasks(c,function(g,f,d,e){a.push(Array.prototype.slice.call(arguments))},b);return a},isVisible:function(c){var a=c.parentNode,b=c.get('visible'),d=this.getRoot();while(b&&a){b=a.get('expanded')&&a.get('visible');a=a.parentNode}return b&&!(c===d&&!this.getRootVisible())},removeTasks:function(a){a=[].concat(a);a=Ext.Array.filter(a,function(b){return !b.parentNode||!b.parentNode.isReadOnly()});a=Ext.Array.sort(a,function(b,c){return c.getDepth()-b.getDepth()});this.fireEvent('beforebatchremove',this,a);Ext.Array.forEach(a,function(b){b.remove()});this.fireEvent('batchremove',this,a);return a}},1,0,0,0,['store.gantt_taskstore'],[[Gnt.patches.TaskStore.prototype.mixinId||Gnt.patches.TaskStore.$className,Gnt.patches.TaskStore],[Sch.data.mixin.FilterableTreeStore.prototype.mixinId||Sch.data.mixin.FilterableTreeStore.$className,Sch.data.mixin.FilterableTreeStore],[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Sch.data.mixin.EventStore.prototype.mixinId||Sch.data.mixin.EventStore.$className,Sch.data.mixin.EventStore],[Gnt.data.undoredo.mixin.TaskStoreHint.prototype.mixinId||Gnt.data.undoredo.mixin.TaskStoreHint.$className,Gnt.data.undoredo.mixin.TaskStoreHint],[Gnt.data.mixin.ProjectableStore.prototype.mixinId||Gnt.data.mixin.ProjectableStore.$className,Gnt.data.mixin.ProjectableStore]],[Gnt.data,'TaskStore'],0);Ext.cmd.derive('CGA.model.Project',Gnt.model.Project,{fields:[{name:'index',type:'int',persist:!0},{name:'expanded',type:'bool',persist:!0},{name:'Color',type:'string'},{name:'ShowInTimeline',type:'bool'}],showInTimelineField:'ShowInTimeline'},0,0,0,0,0,0,[CGA.model,'Project'],0);Ext.cmd.derive('CGA.model.TaskTab',Ext.data.Model,{fields:[{name:'tabLabel',type:'string'},{name:'tabURL',type:'string'}]},0,0,0,0,0,0,[CGA.model,'TaskTab'],0);Ext.cmd.derive('CGA.model.Task',Gnt.model.Task,{autoCalculateEffortForParentTask:!1,startDateField:'StartDate',endDateField:'EndDate',constraintDateField:'ConstraintDate',baselineStartDateField:'BaselineStartDate',baselineEndDateField:'BaselineEndDate',customizableFields:[{name:'ExternalDueDate',type:'date',dateFormat:'Y-m-d',persist:!0},{name:'InternalDueDate',type:'date',dateFormat:'Y-m-d',persist:!0}],fields:[{name:'index',type:'int',persist:!0},{name:'viewOrder',type:'int',persist:!0},{name:'parentId',type:'string',persist:!0},{name:'isVirtual',type:'bool',persist:!0},{name:'isBuildingGroup',type:'bool',persist:!0},{name:'parentObjectId',type:'string',persist:!0},{name:'baseObjectId',type:'string',persist:!0},{name:'expanded',type:'bool',persist:!1},{name:'Color',type:'string',persist:!0},{name:'ShowInTimeline',type:'bool',persist:!0},{name:'Milestone',type:'bool',persist:!0},{name:'Status',type:'string',persist:!1},{name:'depth',type:'int',persist:!0},{name:'isGridlineMilestone',type:'bool',persist:!0},{name:'isFinished',type:'bool',persist:!1},{name:'isLast',type:'bool',persist:!1},{name:'isReadOnly',type:'bool',persist:!0},{name:'isDependable',type:'bool',persist:!1},{name:'isStarted',type:'bool',persist:!1},{name:'Significant',type:'bool',persist:!1},{name:'StartDate',type:'date',dateFormat:'Y-m-d',persist:!0},{name:'isMilestone',type:'bool',persist:!0},{name:'BaseLinePlanedStartDate',type:'date',persist:!0},{name:'BaseLinePlanedEndDate',type:'date',persist:!0},{name:'WeeklyStartDate',type:'date',persist:!0},{name:'WeeklyEndDate',type:'date',persist:!0},{name:'MonthlyStartDate',type:'date',persist:!0},{name:'MonthlyEndDate',type:'date',persist:!0},{name:'historPlannedData',type:'string',persist:!0},{name:'EndDate',type:'date',dateFormat:'Y-m-d',persist:!0,convert:function(b,d){if(!b){return null}if(b instanceof Date){return b}var c=this.dateReadFormat||this.dateFormat,a=null;if(c){a=Ext.Date.parse(b,c)}else {a=Date.parse(b)}if(a){a=CGA.utils.date.resetEnd(a,d.data.Duration)}return a}},{name:'StartedDate',type:'date',dateFormat:'Y-m-d',persist:!0},{name:'CompletedDate',type:'date',dateFormat:'Y-m-d',persist:!0,convert:function(b,d){if(!b){return null}if(b instanceof Date){return b}var c=this.dateReadFormat||this.dateFormat,a=null;if(c){a=Ext.Date.parse(b,c)}else {a=Date.parse(b)}if(a){a=CGA.utils.date.resetEnd(a,d.data.Duration)}return a}},{name:'ActualDuration',type:'number',allowNull:!0,persist:!0},{name:'BaselineDuration',type:'number',allowNull:!0,persist:!0},{name:'ConstraintDate',type:'date',dateFormat:'Y-m-d',persist:!0,convert:function(b,d){if(!b){return null}if(b instanceof Date){return b}var c=this.dateReadFormat||this.dateFormat,a=null;if(c){a=Ext.Date.parse(b,c)}else {a=Date.parse(b)}if(a&&d.data.ConstraintType.indexOf('finish')>-1){a=CGA.utils.date.resetEnd(a,d.data.Duration)}else {if(a){a=CGA.utils.date.resetStart(a)}}return a}},{name:'BaselineStartDate',type:'date',dateFormat:'Y-m-d',persist:!0},{name:'BaselineEndDate',type:'date',dateFormat:'Y-m-d',persist:!0,convert:function(b,d){if(!b){return null}if(b instanceof Date){return b}var c=this.dateReadFormat||this.dateFormat,a=null;if(c){a=Ext.Date.parse(b,c)}else {a=Date.parse(b)}if(a){a=CGA.utils.date.resetEnd(a,0)}return a}},{name:'stageType',type:'string',persist:!0},{name:'stageTypeType',type:'string',persist:!0},{name:'StageDiscipline',type:'string',persist:!1},{name:'StageTypeSpecialization',type:'string',persist:!1},{name:'constructId',type:'string',persist:!0},{name:'spotId',type:'string',persist:!0},{name:'assetId',type:'string',persist:!0},{name:'filterScheduleRequired',type:'bool',defaultValue:!1,persist:!1},{name:'SchedulingMode',type:'string',defaultValue:'DynamicAssignment',persist:!1},{name:'DependencySearchText',type:'string',persist:!1},{name:'Rollup',type:'bool',persist:!0},{name:'Hide',type:'bool',persist:!0},{name:'ignoreQualityControls',type:'bool',persist:!0},{name:'HasIssues',type:'bool',persist:!0},{name:'IsLocked',type:'bool',persist:!0}],setBaselineStartDate:function(a){this.callParent(arguments);this.setBaselineDuration()},setBaselineEndDate:function(a){this.callParent(arguments);this.setBaselineDuration()},setBaselineDuration:function(){var a=this;this.set('BaselineDuration',a.calculateDuration(a.getBaselineStartDate(),a.getBaselineEndDate(),a.getDurationUnit(),null))},hasMany:{model:'CGA.model.TaskTab',name:'taskTabs',associationKey:'taskTabs'},isEditable:function(a){if(this.get('isReadOnly')==!0){return !1}else {if(a=='Name'&&this.get('isNameEditable')==!0){return !0}else {if(a=='Name'){return !1}}if(a=='Effort'){return !1}if(a=='Duration'){if(!this.isLeaf()&&this.data.children&&this.data.children.length>0){return !1}}}return !0},constructor:function(){Gnt.model.Task.prototype.constructor.apply(this,arguments);var a='';if(this.get('ConstructName')){a+=' ('+this.get('ConstructName')}if(this.get('SpotName')){a+=' | '+this.get('SpotName')}if(this.get('AssetName')){a+=' | '+this.get('AssetName')}if(a.length>0){a+=')'}this.set('DependencySearchText',this.get('Name')+a)},isDraggable:function(){if(this.get('isReadOnly')==!0){return !1}else {return this.getDraggable()}},isReadOnly:function(b){if(this.get('isReadOnly')==!0){return !0}else {var a;if(!b){a=this.getProject()}return a&&a.getReadOnly()||this.getReadOnly()}},getStartedDate:function(){var a=this;return a.get('StartedDate')},setHide:function(b,a){var c=this;a&&a.apply(this,arguments);c.set('Hide',b);return !0},setStartedDate:function(b,d,g,c){var a=this;c=c||!1;if(a.data.BlockStart==!0&&a.data.StartedDate!=b&&c!==!0){if(c==='simulation'){return {success:!1,errorType:'InspectionBlockStart',value:b}}else {var e=Ext.MessageBox.show({msg:a.L('InspectionBlockStart'),buttons:Ext.Msg.OK});Ext.Function.defer(function(){e.zIndexManager.bringToFront(e)},100)}}else {a.beginEdit();b=CGA.utils.date.resetStart(b);a.set('StartedDate',b);if(b!=null){a.setStartDate(b,!0,!1,d,!0);var f=a.getCompletedDate();if(f!=null){a.setCompletedDate(a.getEndDate())}}else {if(a.get('PercentDone')==100){a.setPercentDone(0)}if(a.getCompletedDate()){a.set('CompletedDate',b)}}a.endEdit();d&&d.apply(this,arguments)}return {success:!0}},getDisplayEndDate:function(b,c,a,d,e){b=b||Ext.Date.defaultFormat;if(arguments.length<3){a=this.getEndDate();if(arguments.length<2){c=!0}}return d?a:a?Ext.util.Format.date(a,b):''},getDisplayStartedDate:function(b,a,c){b=b||Ext.Date.defaultFormat;if(arguments.length<3){a=this.getStartedDate()}return c?a:a?Ext.util.Format.date(a,b):''},getCompletedDate:function(){var a=this;return a.get('CompletedDate')},startedDateValueFromTaskEditor:function(){var a=Ext.ComponentQuery.query('startedDateField').filter(function(a){return a.up('window')&&a.up('window').taskEditor.isVisible()});return a.length==0?null:a[0].getValue()},getPercentDone:function(){var a=this;if(a.getStartedDate()==null&&a.startedDateValueFromTaskEditor()===null&&a.get('PercentDone')!=0&&a.isLeaf()==!0){var b=Ext.MessageBox.show({msg:a.L('PercentDoneWithoutStartedDate'),buttons:Ext.Msg.OK});Ext.Function.defer(function(){b.zIndexManager.bringToFront(b)},100);a.setPercentDone(0)}return a.get('PercentDone')},setPercentDone:function(b,d){var a=this;if(b!==null&&b!=0&&(a.getStartedDate()==null&&a.startedDateValueFromTaskEditor()===null)&&a.isLeaf()==!0){var c=Ext.MessageBox.show({msg:a.L('PercentDoneWithoutStartedDate'),buttons:Ext.Msg.OK});Ext.Function.defer(function(){c.zIndexManager.bringToFront(c)},100);a.set('PercentDone',0)}else {a.set('PercentDone',b);if(b==100){if(a.getStartedDate()==null){a.set('StartedDate',a.getStartDate())}if(a.getCompletedDate()==null){a.set('CompletedDate',a.getEndDate())}}d&&d.apply(this,arguments)}return !0},setStartDate:function(b,i,g,c,e,h){var d=!1;var f=!1;if(b&&this.getPercentDone()!=100){b=CGA.utils.date.resetStart(b);if(e!==!0){var a=null;Ext.Array.each(this.predecessors,function(d){if(a!=null&&this.getTaskStore().byIdMap[d.data.From_js].data.EndDate.getTime()>a.getTime()){a=this.getTaskStore().byIdMap[d.data.From_js].data.EndDate}else {a=this.getTaskStore().byIdMap[d.data.From_js].data.EndDate}});if(a!=null){a=CGA.utils.date.resetStart(a)}if(this.predecessors.length>0&&b.getTime()<a.getTime()){b=a}}if(b&&this.isManuallyScheduled()!=!0){Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.adjustingOnLoad=!0;this.setConstraintWithoutPropagation('startnoearlierthan',b);Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.adjustingOnLoad=!1;f=!0}Gnt.model.Task.prototype.setStartDate.apply(this,arguments);d=!0}else {if(e==!0){Gnt.model.Task.prototype.setStartDate.apply(this,arguments);d=!0}else {if(b&&this.getPercentDone()==100&&this.getStartDate()==null){this.set('StartDate',CGA.utils.date.resetStart(b));d=!0;c&&c(!0,{})}else {c&&c(!0,{})}}}},setCompletedDate:function(b,d,g,c){c=c||!1;var a=this;if(a.data.IssueBlockEnd==!0||a.data.BlockEnd==!0&&b!=a.data.CompletedDate&&c!==!0||a.getStartedDate()==null&&a.getCompletedDate()!=null){if(c==='simulation'){return {success:!1,errorType:'InspectionBlockEnd',value:b}}else {var f=a.getStartedDate()==null?'CompletednoStartedDate':a.data.IssueBlockEnd==!0?'IssueBlockEnd':'InspectionBlockEnd';var e=Ext.MessageBox.show({msg:a.L(f),buttons:Ext.Msg.OK});Ext.Function.defer(function(){e.zIndexManager.bringToFront(e)},100)}}else {if(b!=null){b=CGA.utils.date.resetEnd(b,a.getDuration())}a.set('CompletedDate',b);a.set('ActualDuration',null);if(b!=null){a.setEndDate(b,!1,!1,d,!0);a.data.ActualDuration=a.getDuration();if(a.getStartedDate()!=null){a.set('PercentDone',100)}}else {if(a.getPercentDone()==100){a.setPercentDone(0)}}d&&d.apply(this,arguments)}return {success:!0}},getDisplayCompletedDate:function(b,a,c){b=b||Ext.Date.defaultFormat;if(arguments.length<3){a=this.getCompletedDate()}return c?a:a?Ext.util.Format.date(a,b):''},setStartDateWithoutPropagation:function(b,e,c){var a=this,f=a.getTaskStore(!0),g,d;e=e!==!1;if(f&&c!==!0&&c!==!1){c=f.skipWeekendsDuringDragDrop}else {if(c!==!0&&c!==!1){c=!1}}a.beginEdit();if(!b){a.set(a.durationField,null);a.set(a.startDateField,null);if(a.get('StartedDate')!=null){a.set('StartedDate',null)}a.setSegmentsWithoutPropagation(null)}else {if(a.isManuallyScheduled()!=!0||a.isManuallyScheduled()==!0&&a.get('StartedDate')&&a.get('StartDate')&&a.get('StartedDate').getTime()!=a.get('StartDate').getTime()){if(c){b=a.skipNonWorkingTime(b,!0)}a.set(a.startDateField,b);if(a.get('StartedDate')!=null){a.set('StartedDate',b)}}if(f&&a.isSegmented()){a.updateSegmentsDates()}if(e!==!1){var h=a.recalculateEndDate(b);if(h!=a.get(a.endDateField)){a.set(a.endDateField,h)}}else {d=this.getEndDate();if(d){this.constrainSegments();a.set(a.durationField,a.calculateDuration(b,d,a.getDurationUnit()))}}}g=a.getDuration();d=a.getEndDate();if(b&&d&&(g===undefined||g===null)){a.set(a.durationField,a.calculateDuration(b,d,a.getDurationUnit()))}a.onPotentialEffortChange();a.endEdit();return !0},setEndDateWithoutPropagation:function(d,f,e){var a=this;var b=Gnt.model.Task.prototype.setEndDateWithoutPropagation.apply(this,arguments);if(a.isLeaf()!=!0){var c=CGA.utils.date.resetEnd(d,a.getDuration());a.set('EndDate',c)}return b},setEndDate:function(e,c,b,d,a){var f=this;if(this.getCompletedDate()==null&&this.data.isVirtual==!1||a==!0){return Gnt.model.Task.prototype.setEndDate.apply(this,arguments)}},milestonesChanged:function(){},setDuration:function(c,d,b){var a=this;if(a.getStartedDate()==null||a.getCompletedDate()==null){Gnt.model.Task.prototype.setDuration.apply(this,arguments)}},isManuallyScheduled:function(){if((this.data[this.percentDoneField]==100||this.data['StartedDate']!=null)&&this.data['leaf']==!0){return !0}else {if(this.data[this.percentDoneField]==100&&this.data['leaf']!=!0){return !1}}return this.data[this.manuallyScheduledField]==!0||this.data[this.percentDoneField]>=100},adjustWithHolidays:function(e,d,j){var f=this.getCalendar();var c=0;var i=0;var a;var b=Ext.Date.add(e,Ext.Date.DAY,1);b=Ext.Date.clearTime(b);var g=Ext.Date.clearTime(d,!0);while(b<g){if(f.isHoliday(b)&&!this.getCalendar().isWeekend(b)){i++;c+=2}else {c++}b=Ext.Date.add(b,Ext.Date.DAY,1)}a=Ext.Date.add(e,Ext.Date.DAY,c);var h=Ext.Date.clearTime(a,!0).valueOf()!==g.valueOf();if(!h){return d}a=Ext.Date.add(d,Ext.Date.DAY,j);while(f.isHoliday(a)){a=Ext.Date.add(a,Ext.Date.DAY,1)}return a},getHolidaysInBetween:function(c){var a=this.getCalendar();var b=0;Ext.each(c,function(e){var d=Ext.Date.clone(e.get('StartDate'));var f=e.get('EndDate');while(d<f){if(a.isHoliday(d)&&!a.isWeekend(d)){b++;a.availabilityIntervalsCache[Ext.Date.clearTime(d).valueOf()]=[]}d=Ext.Date.add(d,Ext.Date.DAY,1)}});return b},recalculateEndDate:function(c){var a=this.getEndDate();if(this.getPercentDone()==100){var d=this.calculateDuration(c,a,this.getDurationUnit());if(this.getDuration()!=d&&!((this.getCalendar().isHoliday(c)||this.getCalendar().isWeekend(c))&&this.getCalendar().isHoliday(a)||a&&this.getCalendar().isWeekend(a))){this.set(this.durationField,d)}return a}var b=Gnt.model.Task.prototype.recalculateEndDate.apply(this,c);if(b==null||a!=null&&a.getDate()==b.getDate()&&a.getYear()==b.getYear()&&a.getMonth()==b.getMonth()){b=a}return b},setIsLocked:function(b,a){var c=this;c.set('IsLocked',b);a&&a.apply(this,arguments);return !0}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.model,'Task'],0);Ext.cmd.derive('CGA.store.Tasks',Gnt.data.TaskStore,{customFilters:[],storeId:'Tasks',proxy:'memory',storeIdProperty:'crudStoreId',crudStoreId:'tasks',model:'CGA.model.Task',sortOnLoad:!1,recalculateParents:!0,cascadeChanges:!0,cycleResolutionStrategy:'none',autoNormalizeNodes:!0,phantomIdField:'tempId',removeTasks:function(a){a=[].concat(a);a=Ext.Array.filter(a,function(b){return !b.isReadOnly()});this.fireEvent('beforebatchremove',this,a);Ext.Array.each(a,function(b){b.remove()});this.fireEvent('batchremove',this,a);return a},onTasksLoaded:function(){function getURLParam(b){var a=Ext.urlDecode(location.search.substring(1));return a[b]?a[b]:null}if(this.defaultsFiltered!=!0){this.defaultsFiltered=!0;var c=getURLParam('uifilterid')?getURLParam('uifilterid'):null;var b=getURLParam('uifiltervalues')?getURLParam('uifiltervalues'):null;var a=this;if(c=='StagePrototypeName'&&b!=null){a.customFilters=[];a.customFilters.push({dataIndex:'StagePrototypeName',dataType:'text',value:b,opr:'='});if(a.customFilters.length==0){a.clearTreeFilter()}else {a.doFilters()}}}else {this.onTasksRootChange();this.onTasksLoadEnd()}},doFilters:function(){var a=this;function filterDate(a,g){var e=!0;var b;var d;if(Ext.isDate(a.value)){b=a.value}else {b=Ext.Date.parse(a.value,Ext.Date.defaultDateFormat||Ext.Date.defaultFormat)}var d;if(Ext.isDate(a.toValue)){d=a.toValue}else {d=Ext.Date.parse(a.toValue,Ext.Date.defaultDateFormat||Ext.Date.defaultFormat)}if(b==null&&Ext.Date.altUserFormats&&Ext.Date.altUserFormats.length>0){var f=0;var i=Ext.Date.altUserFormats[f];while(b==null&&f<Ext.Date.altUserFormats.length){b=Ext.Date.parse(a.value,i);i=Ext.Date.altUserFormats[f++]}}if(d==null&&Ext.Date.altUserFormats&&Ext.Date.altUserFormats.length>0){var f=0;var i=Ext.Date.altUserFormats[f];while(d==null&&f<Ext.Date.altUserFormats.length){d=Ext.Date.parse(a.toValue,i);i=Ext.Date.altUserFormats[f++]}}var c=new Date(g.get(a.dataIndex));c.setMilliseconds(0);c.setMinutes(0);c.setHours(0);if(!b||!c){e=!1}else {if(a.opr=='='){if(b.getTime()!==c.getTime()){e=!1}}else {if(a.opr=='>'){if(!(c.getTime()>=b.getTime())){e=!1}}else {if(a.opr=='<'){if(!(c.getTime()<=b.getTime())){e=!1}}else {if(a.opr=='-'){if(!(c.getTime()>=b.getTime()&&c.getTime()<=d.getTime())){e=!1}}else {if(a.opr=='workPlan'){var h=new Date(g.get(a.dataIndexEnd));var j=new Date(g.get('StartDate'));var k=new Date(g.get('EndDate'));var l=g.getStartedDate()!=null&&g.getCompletedDate()==null;h.setMilliseconds(0);h.setMinutes(0);h.setHours(0);if(!(c.getTime()>=b.getTime()&&c.getTime()<=d.getTime()||h.getTime()>=b.getTime()&&h.getTime()<=d.getTime()||j.getTime()>=b.getTime()&&j.getTime()<=d.getTime()||k.getTime()>=b.getTime()&&k.getTime()<=d.getTime())&&!l){e=!1}}}}}}}return e}function filterCheckbox(b,a){var c=!0;if(b.dataIndex=='isDirty'){c=a.dirty}else {if(b.dataIndex=='isCycle'){var d=!1;if(a.predecessors&&a.predecessors.length>0){d=!1;a.predecessors.forEach(function(c){d=d||c.isValid(!0)});d=!d}c=d}else {if(b.dataIndex=='Hide'){if(typeof a.get(b.dataIndex)!='undefined'){c=!a.get(b.dataIndex)}else {c=!0}}else {if(!a.get(b.dataIndex)||a.get(b.dataIndex)==!1){c=!1}}}}return c}function predecessors(d,b){var a=!0;var c=b.getIncomingDependencies();if(c.length>0){a=!1}return a}function filterSchedule(d,a){var c=!1;if(a!=null&&a.id!='root'&&a.get('isVirtual')!=!0){var b=new Date();b=CGA.utils.date.resetStart(b);if((a.getStartDate()&&a.getStartDate().getTime()<=b.getTime()&&a.getStartedDate()==null||a.getEndDate()&&CGA.utils.date.resetStart(a.getEndDate()).getTime()<=b.getTime()&&a.getCompletedDate()==null)&&a.isLeaf()){c=!0}}return c}function filterOpEquale(a,b){var c=!0;if(a.value.indexOf('BLANK')>-1&&!(!b.get(a.dataIndex)||b.get(a.dataIndex)==null||b.get(a.dataIndex)=='')){c=!1}else {if(a.dataType==='number'){if(b.get(a.dataIndex)!=a.value){c=!1}}else {var d=new RegExp(Ext.String.escapeRegex(a.value),'i');if(!d.test(b.get(a.dataIndex))){c=!1}}}return c}function filterOpExclamation(a,b){var c=!0;if(a.value.indexOf('BLANK')>-1&&(!b.get(a.dataIndex)||b.get(a.dataIndex)==null||b.get(a.dataIndex)=='')){c=!1}else {if(a.dataType==='number'){if(b.get(a.dataIndex)==a.value){c=!1}}else {var d=new RegExp(Ext.String.escapeRegex(a.value),'i');if(d.test(b.get(a.dataIndex))){c=!1}}}return c}function filterOpIn(a,b){var c=!0;if(a.value.indexOf('BLANK')>-1&&(!b.get(a.dataIndex)||b.get(a.dataIndex)==null||b.get(a.dataIndex)=='')){c=!0}else {if(!(a.value.indexOf(b.get(a.dataIndex))>-1)){c=!1}}return c}a.filterTreeBy({filter:function(c){var b=!0;a.customFilters.forEach(function(a){if(a.dataType=='date'){b=filterDate(a,c)}else {if(a.dataType=='checkbox'){b=filterCheckbox(a,c)}else {if(a.dataIndex==='predecessors'){b=predecessors(a,c)}else {if(a.dataIndex==='filterSchedule'){b=filterSchedule(a,c)}else {if(a.dataIndex==='filterSelectedTasks'){b=!1;if(a.value[c.id]){b=!0}}else {if(a.opr=='='){b=filterOpEquale(a,c)}else {if(a.opr=='!'){b=filterOpExclamation(a,c)}else {if(a.opr=='>'){if(!(c.get(a.dataIndex)>=a.value)){b=!1}}else {if(a.opr=='<'){if(!(c.get(a.dataIndex)<=a.value)){b=!1}}else {if(a.opr=='-'){if(!(c.get(a.dataIndex)>=a.value&&c.get(a.dataIndex)<=a.toValue)){b=!1}}else {if(a.opr=='in'){b=filterOpIn(a,c)}}}}}}}}}}}});return b},checkParents:!0,onlyParents:!1,fullMatchingParents:!1})},listeners:{update:function(f,b,c,a,d,e){if(b.data.isMilestone&&a&&a.length>0&&a.some(function(g){return g=='StartDate'||g=='EndDate'})&&b.isLeaf()==!0){b.milestonesChanged()}}}},0,0,0,0,['store.advanced-task-store'],0,[CGA.store,'Tasks'],0);Ext.cmd.derive('CGA.model.Dependency',Gnt.model.Dependency,{toField:'To_js',fromField:'From_js'},0,0,0,0,0,0,[CGA.model,'Dependency'],0);Ext.cmd.derive('CGA.util.TaskDependencyCache',Sch.data.util.EventDependencyCache,function(a){function keyToTask(d,b){var c;if(!(b instanceof Ext.data.Model)){c=d.dependencyStore.getTaskStore();b=c&&c.getModelById(b)}return b}function fillSuccessors(b,c){var d=keyToTask(b,c);d&&(d.successors=b.getSuccessors(c))}function fillPredecessors(b,c){var d=keyToTask(b,c);d&&(d.predecessors=b.getPredecessors(c))}function clearSuccessorsPredecessors(d){var c=d.dependencyStore.getTaskStore(),b=c&&c.getRoot();b&&b.cascadeBy(function(b){b.successors=[];b.predecessors=[]})}function fillTasksWithDepInfo(b){var d=b.dependencyStore.getTaskStore(),c=d&&d.getRoot();c&&c.cascadeBy(function(c){c.successors=b.getSuccessors(c);c.predecessors=b.getPredecessors(c)})}return {taskStoreDetacher:null,taskStoreDependencyStoreDetacher:null,constructor:function(c){var b=this,d;Sch.data.util.EventDependencyCache.prototype.constructor.call(this,c);function onTaskStoreRootChange(d){fillTasksWithDepInfo(b)}function onTaskStoreNodeAppend(e,d){fillSuccessors(b,d);fillPredecessors(b,d)}function onDependencyStoreTaskStoreChange(d,b){attachToTaskStore(b)}function onDependencyStoreRefresh(d){fillTasksWithDepInfo(b)}function attachToTaskStore(d){Ext.destroy(b.taskStoreDetacher);b.taskStoreDetacher=d&&d.on({'rootchange':onTaskStoreRootChange,'nodeappend':onTaskStoreNodeAppend,priority:99,destroyable:!0});fillTasksWithDepInfo(b)}b.taskStoreDependencyStoreDetacher=c.on({'eventstorechange':onDependencyStoreTaskStoreChange,'refresh':onDependencyStoreRefresh,priority:100,destroyable:!0});attachToTaskStore(c.getTaskStore())},destroy:function(){var b=this;Sch.data.util.EventDependencyCache.prototype.destroy.call(this);Ext.destroyMembers(b,'taskStoreDetacher','taskStoreDependencyStoreDetacher')},addSuccessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.addSuccessor.call(this,b,d);fillSuccessors(c,b)},addPredecessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.addPredecessor.call(this,b,d);fillPredecessors(c,b)},removeSuccessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.removeSuccessor.call(this,b,d);fillSuccessors(c,b)},removePredecessor:function(b,d){var c=this;Sch.data.util.EventDependencyCache.prototype.removePredecessor.call(this,b,d);fillPredecessors(c,b)},moveSuccessors:function(d,c,e){var b=this;Sch.data.util.EventDependencyCache.prototype.moveSuccessors.apply(this,arguments);fillSuccessors(b,d);fillSuccessors(b,c)},movePredecessors:function(d,c,e){var b=this;Sch.data.util.EventDependencyCache.prototype.movePredecessors.apply(this,arguments);fillPredecessors(b,d);fillPredecessors(b,c)},clearSuccessors:function(b){var c=this;Sch.data.util.EventDependencyCache.prototype.clearSuccessors.call(this,b);fillSuccessors(c,b)},clearPredecessors:function(b){var c=this;Sch.data.util.EventDependencyCache.prototype.clearPredecessors.call(this,b);fillPredecessors(c,b)},clear:function(c){var b=this;Sch.data.util.EventDependencyCache.prototype.clear.apply(this,arguments);if(c){fillSuccessors(b,c);fillPredecessors(b,c)}else {clearSuccessorsPredecessors(b)}}}},1,0,0,0,0,0,[CGA.util,'TaskDependencyCache'],0);Ext.cmd.derive('CGA.store.Dependencies',Gnt.data.DependencyStore,{storeId:'Dependencies',storeIdProperty:'crudStoreId',crudStoreId:'dependencies',proxy:'memory',model:'CGA.model.Dependency',strictDependencyValidation:!1,transitiveDependencyValidation:!1,getDependencyError:function(c,e,f,d,b,a){if(!this.allowParentTaskDependencies&&(!fromTask.isLeaf()||!toTask.isLeaf())&&fromTask.get('isVirtual')&&fromTask.get('isBuildingGroup')&&toTask.get('isVirtual')&&toTask.get('isBuildingGroup')){return -111}return this.callParent(arguments)},add:function(a){if(this.fireEvent('newDependency',a)==!1){return !1}else {return this.insert(this.getCount(),arguments.length===1?a:arguments)}},remove:function(d,h,i){var c=this,f=c.getDataSource(),e,g,a,b;if(d){if(d.isModel){if(f.indexOf(d)>-1){a=[d];e=1}else {e=0}}else {a=[];for(g=0,e=d.length;g<e;++g){b=d[g];if(b&&b.isEntity){if(!f.contains(b)){continue}}else {if(!(b=f.getAt(b))){continue}}if(b.data.Cls!=='dynamic-dep'){a.push(b)}}e=a.length}}if(!e){return []}if(this.fireEvent('removeDependency',a)==!1){return !1}else {c.removeIsMove=h===!0;c.removeIsSilent=i;f.remove(a);c.removeIsSilent=!1;if(c.getTaskStore().getById(a[0].data.To_js)!=null&&c.getTaskStore().getById(a[0].data.To_js).hasIncomingDependencies()==!1){console.log('task has no dependencies, adjusting to calendar.');c.getTaskStore().adjustToCalendar(c.getTaskStore().getById(a[0].data.To_js))}return a}},getDependencyError:function(a,f){var c=Gnt.data.DependencyStore.prototype.getDependencyError.apply(this,arguments);if(c){return c}var b=a instanceof Ext.data.Model;var d=b?a.getSourceTask(this.taskStore):this.getTaskById(a);var e=b?a.getTargetTask(this.taskStore):this.getTaskById(f);if(d.get('isDependable')==!1||e.get('isDependable')==!1){return -100}return 0},createEventDependencyCache:function(){return new CGA.util.TaskDependencyCache(this)}},0,0,0,0,0,0,[CGA.store,'Dependencies'],0);Ext.cmd.derive('Sch.crud.AbstractManager',Ext.Base,{revision:null,stores:null,storeIdProperty:'storeId',filterParam:'filter',storesIndex:null,activeRequests:null,delayedSyncs:null,transport:null,trackResponseType:!1,phantomIdField:'$PhantomId',autoLoad:!1,autoSyncTimeout:100,autoSync:!1,resetIdsBeforeSync:!0,syncApplySequence:null,writeAllFields:!1,destroyed:!1,ignoreUpdates:0,loaded:!1,createMissingRecords:!1,autoSyncTimerId:null,constructor:function(a){a=a||{};this.mixins.observable.constructor.call(this,a);this.activeRequests={};this.delayedSyncs=[];this.transport=a.transport||this.transport||{};var c=a.stores||this.stores;this.stores=[];this.addStore(c);var b=a.syncApplySequence||this.syncApplySequence;if(b){this.syncApplySequence=null;this.addStoreToApplySequence(b)}if(this.autoLoad){this.load()}},updateStoreIndex:function(){var b={};for(var a=0,d=this.stores.length;a<d;a++){var c=this.stores[a];if(c.storeId){b[c.storeId]=this.stores[a]}}this.storesIndex=b},getStoreDescriptor:function(a){if(!a){return}if(a.isStore){for(var b=0,c=this.stores.length;b<c;b++){if(this.stores[b].store===a){return this.stores[b]}}}else {if(typeof a=='object'){return this.storesIndex[a.storeId]}else {return this.storesIndex[a]||this.getStoreDescriptor(Ext.data.StoreManager.get(a))}}},getStore:function(b){var a=this.getStoreDescriptor(b);return a&&a.store},forEachStore:function(c,d){if(!c){return}var b=this.stores;for(var a=0,e=b.length;a<e;a++){if(c.call(d||this,b[a].store,b[a].storeId,b[a])===!1){break}}},addStore:function(c,i,b){if(!c){return}if(!Ext.isArray(c)){c=[c]}var g=[];for(var h=0,k=c.length;h<k;h++){var a=c[h];if(a.isStore){a={store:a}}else {if(typeof a=='object'){if(a.stores){if(!Ext.isArray(a.stores)){a.stores=[a.stores]}for(var d=0,l=a.stores.length;d<l;d++){var f=a.stores[d],e=f;if('string'===typeof f){e={storeId:f}}e.masterStoreInfo=a;a.stores[d]=e}}}else {a={store:Ext.data.StoreManager.get(a)}}}g.push(this.fillStoreDescriptor(a));a.store.crudManager=this;if(a.store.isTreeStore){a.store.setProxy({type:'memory'})}a.store.setAsynchronousLoad(!1);this.bindStoreListeners(a.store)}if(typeof i==='undefined'){this.stores.push.apply(this.stores,g)}else {var j=i;if(b){if(b.isStore||typeof b!=='object'){b=this.getStoreDescriptor(b)}j+=Ext.Array.indexOf(this.stores,b)}this.stores.splice.apply(this.stores,[].concat([j,0],g))}this.updateStoreIndex()},bindStoreListeners:function(b,c){var a={update:this.onStoreUpdate,clear:this.onStoreChange,scope:this};if(b.isTreeStore){Ext.apply(a,{nodeappend:this.onTreeStoreInsertOrAppend,nodeinsert:this.onTreeStoreInsertOrAppend,noderemove:this.onNodeRemove})}else {Ext.apply(a,{add:this.onStoreChange,remove:this.onStoreChange})}if(c){this.mun(b,a)}else {this.mon(b,a)}},unbindStoreListeners:function(a){this.bindStoreListeners(a,!0)},fillStoreDescriptor:function(c){var b=c.store,d=b.storeIdProperty||this.storeIdProperty,a=b.getModel&&b.getModel()||b.model;a=a&&a.prototype;Ext.applyIf(c,{storeId:b[d],phantomIdField:a&&a.phantomIdField,idProperty:a&&a.idProperty,writeAllFields:b.writeAllFields});return c},removeStore:function(b){for(var c=0,d=this.stores.length;c<d;c++){var a=this.stores[c];if(a===b||a.store===b||a.storeId===b){this.unbindStoreListeners(a.store);delete this.storesIndex[a.storeId];this.stores.splice(c,1);if(this.syncApplySequence){this.removeStoreFromApplySequence(b)}break}}},addStoreToApplySequence:function(b,e,a){if(!b){return}if(!Ext.isArray(b)){b=[b]}var c=[];for(var d=0,h=b.length;d<h;d++){var g=this.getStoreDescriptor(b[d]);if(g){c.push(g)}}if(!this.syncApplySequence){this.syncApplySequence=[]}if(typeof e==='undefined'){this.syncApplySequence.push.apply(this.syncApplySequence,c)}else {var f=e;if(a){if(a.isStore||typeof a!=='object'){a=this.getStoreDescriptor(a)}f+=Ext.Array.indexOf(this.syncApplySequence,a)}this.syncApplySequence.splice.apply(this.syncApplySequence,[].concat([f,0],c))}},removeStoreFromApplySequence:function(b){for(var a=0,d=this.syncApplySequence.length;a<d;a++){var c=this.syncApplySequence[a];if(c===b||c.store===b||c.storeId===b){this.syncApplySequence.splice(a,1);break}}},onNodeRemove:function(a){var b=a&&a.getTreeStore();b&&b.on('endupdate',this.onStoreChange,this,{single:!0})},onStoreUpdate:function(c,b,e,a){if(!c.isTreeStore||b!==c.getRoot()){var d=a&&a.length===1&&b.getField(a[0])&&!b.getField(a[0]).persist;if(!d){this.onStoreChange()}}},onTreeStoreInsertOrAppend:function(b,a){if(!a.isRoot()){this.onStoreChange()}},onStoreChange:function(){if(this.ignoreUpdates){return}var a=this;this.fireEvent(this.hasChanges()?'haschanges':'nochanges',this);if(this.autoSync){if(!this.autoSyncTimerId){this.autoSyncTimerId=setTimeout(function(){a.autoSyncTimerId=null;a.sync()},this.autoSyncTimeout)}}},hasChanges:function(c){var a;if(c){a=this.getStore(c);if(!a){return !1}return this.isStoreDirty(a)}for(var b=0,d=this.stores.length;b<d;b++){if(this.isStoreDirty(this.stores[b].store)){return !0}}return !1},isStoreDirty:function(b){if(b.getRemovedRecords().length){return !0}if(b.isTreeStore){for(var f in b.byIdMap){var a=b.byIdMap[f];if(a.dirty===!0&&(!a.get('root')||Ext.Object.getKeys(a.modified).length!==1||!('expanded' in a.modified))){return !0}else {if(!a.get('root')&&a.phantom&&a.isValid()){return !0}}}}else {var d=b.getData().items;for(var c=0,e=d.length;c<e;c++){if(d[c].dirty||d[c].phantom){return !0}}}return !1},getLoadPackage:function(i){var k={type:'load',requestId:this.getRequestId(),stores:[]};var d=this.stores,f=k.stores;for(var c=0,l=d.length;c<l;c++){var a=d[c],e=a.filterParam||a.store.filterParam||this.filterParam,b=i&&i[a.storeId],g=a.pageSize||a.store.pageSize;if(a.store.remoteFilter&&e){b=b||{};var h=[];a.store.getFilters().each(function(a){h.push(a.serialize())});b[e]=h}if(b||g){var j=Ext.apply({storeId:a.storeId,page:1,pageSize:g},b);d[c].currentPage=j.page;f.push(j)}else {f.push(a.storeId)}}return k},prepareAdded:function(j,f,i){var h=[];for(var e=0,l=j.length;e<l;e++){var b=j[e],c={},g=b.getFields();if(!c.hasOwnProperty(f)){c[f]=b.getId()}for(var d=0,k=g.length;d<k;d++){var a=g[d];if(a){if(a.persist&&(b.data.hasOwnProperty(a.name)||a.critical)){if(a.serialize){c[a.name]=a.serialize(b.data[a.name],b)}else {c[a.name]=b.data[a.name]}}}}if(this.resetIdsBeforeSync){delete c[b.idProperty]}if(i){this.processSubStores(b,c,i)}h.push(c)}return h},prepareUpdated:function(k,j,h){var i=[],l=h.writeAllFields||h.writeAllFields!==!1&&this.writeAllFields,b,a;for(var e=0,m=k.length;e<m;e++){var c=k[e],d;if(l){b=c.getData();b[c.idProperty]=c.getId();for(d in b){a=c.getField(d);if(!a||!a.persist&&!a.critical){delete b[d]}else {if(a.serialize){b[d]=a.serialize(b[d],c)}else {b[d]=c.get(d)}}}}else {b=c.getChanges();b[c.idProperty]=c.getId();for(d in b){a=c.getField(d);if(!a||!a.persist){delete b[d]}else {if(a.serialize){b[d]=a.serialize(b[d],c)}else {b[d]=c.get(d)}}}var g=c.getCriticalFields();for(var f=0;f<g.length;f++){a=g[f];if(a.serialize){b[a.getName()]=a.serialize(c.get(a.getName()),c)}else {b[a.getName()]=c.get(a.getName())}}}if(j){this.processSubStores(c,b,j)}i.push(b)}return i},prepareRemoved:function(c){var d=[],b;for(var a=0,e=c.length;a<e;a++){b={};b[c[a].idProperty]=c[a].getId();d.push(b)}return d},processSubStores:function(g,d,c){for(var b=0,h=c.length;b<h;b++){var a=c[b].storeId,f=g.get(a);if(f){var e=this.getStoreChanges(Ext.apply({store:f},c[b]));if(e){d[a]=Ext.apply(e,{$store:!0})}else {delete d[a]}}else {delete d[a]}}},getStoreChanges:function(e,f){f=f||e.phantomIdField||this.phantomIdField;var g=e.store,c=g.getNewRecords(),b=g.getUpdatedRecords(),a=g.getRemovedRecords(),h=e.stores;var d;if(c.length){c=this.prepareAdded(c,f,h)}if(b.length){b=this.prepareUpdated(b,h,e)}if(a.length){a=this.prepareRemoved(a)}if(c.length||b.length||a.length){d={};if(c.length){d.added=c}if(b.length){d.updated=b}if(a.length){d.removed=a}}return d},getChangeSetPackage:function(){var f={type:'sync',requestId:this.getRequestId(),revision:this.revision};var d=this.stores,e=0;for(var b=0,i=d.length;b<i;b++){var a=d[b],g=a.phantomIdField||this.phantomIdField,h=a.storeId;var c=this.getStoreChanges(a,g);if(c){e++;f[h]=c}}return e?f:null},getSubStoresData:function(b,d,f,i){if(!b){return}var c=[];var g=function(a,g){for(var e=0,j=g.length;e<j;e++){var h=g[e].storeId;if(a[h]){c.push({id:a[f],storeDesc:g[e],data:a[h]});delete a[h]}}};var a=0,h=b.length;if(i){for(;a<h;a++){g(b[a],d);var e=this.getSubStoresData(b[a].children,d,f,!0);if(e){c=c.concat(e)}}}else {for(;a<h;a++){g(b[a],d)}}return c},loadDataToTreeStore:function(a,c,f,e){var d=c&&c.rows;var b=a.getRoot();if(b){b.modified=null;b.reject()}a.proxy.data=d;a.load()},loadDataToFlatStore:function(a,b,c,e){var f=b&&b.rows;a.totalCount=b.total;a.currentPage=e.currentPage;var d=Ext.Array.map(f,function(d){return new a.model(d)});a.loadData(d,c&&c.append||b.append);a.fireEvent('load',a,d,!0)},loadDataToStore:function(c,b,m){var a=c.store,g=a.getModel(),i=c.stores,k=c.idProperty||g&&g.prototype&&g.prototype.idProperty||'id',f=a.isTreeStore,e;var j=b&&b.rows;a.metaData=b&&b.metaData;if(j){if(i){e=this.getSubStoresData(j,i,k,f)}a.__loading=!0;var l=f?this.loadDataToTreeStore:this.loadDataToFlatStore;l.call(this,a,b,m,c);if(e){for(var h=0,n=e.length;h<n;h++){var d=e[h];this.loadDataToStore(Ext.apply({store:a[f?'getNodeById':'getById'](d.id).get(d.storeDesc.storeId)},d.storeDesc),d.data)}}a.__loading=!1}},loadData:function(f,a){a=a||{};this.ignoreUpdates++;for(var b=0,g=this.stores.length;b<g;b++){var c=this.stores[b],d=c.storeId,e=f[d];if(e){this.loadDataToStore(c,e,a[d])}}this.ignoreUpdates--},applyChangesToRecord:function(b,c,e,h){var l=b.data,j={},g=!1,a;if(e){for(var f=0,m=e.length;f<m;f++){a=e[f].storeId;if(c.hasOwnProperty(a)){j[a]=!0;var i=b.get(a);if(i){this.applyChangesToStore(Ext.apply({store:i},e[f]),c[a])}else {Ext.log("Can't find store for the response sub-package")}}}}for(a in c){if(c.hasOwnProperty(a)&&!j[a]){var d=c[a];if(!b.isEqual(l[a],d)){if(!g){g=!0;b.beginEdit()}if(a===b.idProperty){b.setId(d)}else {if(a=='parentId'&&h.isTreeStore){var k=d&&h.getNodeById(d)||h.getRoot();k.appendChild(b)}else {b.set(a,d)}}}}}this.ignoreUpdates++;if(g){b.endEdit()}this.ignoreUpdates--;b.commit()},applyRemovals:function(f,h,d){var m=d.idProperty,a=f.isTreeStore?f.removedNodes:f.removed,l=d.findByIdFn,k=d.removeRecordFn,c=0;for(var g=0,o=h.length;g<o;g++){var i=!1;var j=h[g][m];for(var b=0,n=a.length;b<n;b++){if(a[b].getId()==j){a.splice(b,1);i=!0;c++;break}}if(!i){var e=l(j);if(e){this.ignoreUpdates++;k(e);Ext.Array.remove(a,e);c++;this.ignoreUpdates--}else {Ext.log("Can't find record to remove from the response package")}}}return c},getApplyChangesToStoreHelpers:function(a){if(a.isTreeStore){var b=function(b){return a.getNodeById(b)};return {findByPhantomFn:b,findByIdFn:b,addRecordFn:function(b){var c=b.parentId&&a.getNodeById(b.parentId)||a.getRoot();return c.appendChild(b)},removeRecordFn:function(b){return b.parentNode.removeChild(b)}}}else {return {findByPhantomFn:function(b){return a.data.getByKey(b)},findByIdFn:function(b){return a.getById(b)},addRecordFn:function(b){return a.add(b)[0]},removeRecordFn:function(b){return a.remove(b)}}}},applyChangesToStore:function(g,l){var c=this,q=g.phantomIdField||c.phantomIdField,d=g.idProperty,a=g.store;if(!d){var e=a.getModel&&a.getModel()||a.model;e=e&&e.prototype;d=e&&e.idProperty||'id'}var h=c.getApplyChangesToStoreHelpers(a),p=h.findByPhantomFn,m=h.findByIdFn,s=h.addRecordFn,r=h.removeRecordFn;var j=l.rows,n=l.removed,b;if(j){var f,o,i,t=g.stores;for(var k=0,u=j.length;k<u;k++){f=j[k];i=f[q];o=f[d];b=null;if(i!=null){b=p(i)}else {if(d){b=m(o)}}if(b){c.applyChangesToRecord(b,f,t,a)}else {c.ignoreUpdates++;b=s(f);c.ignoreUpdates--;b.commit()}}}if(n&&c.applyRemovals(a,n,{idProperty:d,findByIdFn:m,removeRecordFn:r})){a.fireEvent('datachanged',a)}},applySyncResponse:function(d){var b=this.syncApplySequence||this.stores;for(var a=0,e=b.length;a<e;a++){var c=d[b[a].storeId];if(c){this.applyChangesToStore(b[a],c)}}},applyLoadResponse:function(a,b){this.loadData(a,b)},applyResponse:function(a,b,c){if(this.trackResponseType){a=b.type||a}switch(a){case 'load':this.applyLoadResponse(b,c);break;case 'sync':this.applySyncResponse(b);break;}},getRequestId:function(){return Ext.Date.now()},onResponse:function(b,c,d,e){this.activeRequests[b]=null;var a=this.decode(c);if(!a||!a.success){this.fireEvent('requestfail',this,b,a,d);this.fireEvent(b+'fail',this,a,d,e);if('string'!=typeof c){c=''+c}this.warn('CrudManager: '+b+' failed, please inspect the server response',c.length<1024*1024&&c||'');return a}if(this.fireEvent('beforeresponseapply',this,b,a)!==!1&&this.fireEvent('before'+b+'apply',this,a,e)!==!1){this.revision=a.revision;this.applyResponse(b,a,e);this.fireEvent('requestdone',this,b,a,d);this.fireEvent(b,this,a,d,e);if(b==='load'||!this.hasChanges()){this.fireEvent('nochanges',this)}}return a},onLoad:function(b,a,c){this.loaded=!0;return this.onResponse('load',b,a,c)},onSync:function(b,a,c){return this.onResponse('sync',b,a,c)},load:function(c,b,a){var d;if(typeof c==='object'){d=c;c=b;b=a;a=arguments[3]}var e=this.getLoadPackage(d);if(this.fireEvent('beforeload',this,e)!==!1){a=a||this;if(this.activeRequests.load){this.cancelRequest(this.activeRequests.load.desc);this.fireEvent('loadcanceled',this,e)}this.activeRequests.load={id:e.requestId};this.activeRequests.load.desc=this.sendRequest({data:this.encode(e),type:'load',success:function(f,g){var e=this.onLoad(f,g,d);if(b&&(!e||!e.success)){b.call(a,e,f,d)}else {if(c){c.call(a,e,f,d)}}},failure:function(e,d){this.onLoad(e,d);if(b){b.apply(a,arguments)}},scope:this})}else {this.fireEvent('loadcanceled',this,e)}},sync:function(c,d,a){if(this.activeRequests.sync){this.delayedSyncs.push(arguments);this.fireEvent('syncdelayed',this,arguments);return}var b=this.getChangeSetPackage();a=a||this;if(!b){if(c){c.call(a,null,null)}return}if(this.fireEvent('beforesync',this,b)===!1){this.fireEvent('synccanceled',this,b);return}this.activeRequests.sync={id:b.requestId};this.activeRequests.sync.desc=this.sendRequest({data:this.encode(b),type:'sync',success:function(e,g){var f=this.activeRequests.sync;var b=this.onSync(e,g);if(d&&(!b||!b.success)){d.call(a,b,e,f)}else {if(c){c.call(a,b,e,f)}}this.runDelayedSync()},failure:function(b,e){this.onSync(b,e);if(d){d.apply(a,arguments)}this.runDelayedSync()},scope:this})},runDelayedSync:function(){var a=this.delayedSyncs.shift();if(!a){return}this.sync.apply(this,a)},commit:function(){for(var a=0,b=this.stores.length;a<b;a++){this.stores[a].store.commitChanges()}},reject:function(){for(var a=0,b=this.stores.length;a<b;a++){this.stores[a].store.rejectChanges()}},warn:function(){if('console' in window){var a=console;a.log&&a.log.apply&&a.log.apply(a,arguments)}},isLoading:function(){return !!this.activeRequests.load},destroy:function(){var a=this;a.activeRequests.load&&a.cancelRequest(a.activeRequests.load.desc);a.activeRequests.sync&&a.cancelRequest(a.activeRequests.sync.desc);while(a.stores.length>0){a.removeStore(a.stores[0])}clearTimeout(a.autoSyncTimerId);a.destroyed=!0}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Sch.crud,'AbstractManager'],0);Ext.cmd.derive('Sch.crud.encoder.Json',Ext.Base,{format:'json',encode:function(a){return Ext.JSON.encode(a)},decode:function(a){if(typeof a=='object'){return a}return Ext.JSON.decode(a,!0)}},0,0,0,0,0,0,[Sch.crud.encoder,'Json'],0);Ext.cmd.derive('Sch.crud.transport.Ajax',Ext.Base,{defaultMethod:{load:'GET',sync:'POST'},cancelRequest:function(a){Ext.Ajax.abort(a)},sendRequest:function(a){var d=a.data,c=this.transport[a.type],e=c.paramName,f=Ext.apply({},c&&c.params),g=c.method||this.defaultMethod[a.type];var b=Ext.apply({url:c.url,method:g,params:f,failure:a.failure,success:function(b,c){if(a.success){a.success.call(a.scope||this,b.responseXml||b.responseText)}},scope:a.scope},c.requestConfig);if(!e){if(this.format==='xml'){Ext.apply(b,{xmlData:d})}else {Ext.apply(b,{jsonData:d})}}else {b.params=b.params||{};b.params[e]=d}this.fireEvent('beforesend',this,f,a.type,b);return Ext.Ajax.request(b)}},0,0,0,0,0,0,[Sch.crud.transport,'Ajax'],0);Ext.cmd.derive('Gnt.data.CrudManager',Sch.crud.AbstractManager,{calendarManager:null,taskStore:null,dependencyStore:null,resourceStore:null,assignmentStore:null,addRelatedStores:!0,constructor:function(a){a=a||{};var c=a.calendarManager||this.calendarManager,g=a.taskStore||this.taskStore||new Gnt.data.TaskStore({proxy:'memory'}),b=a.assignmentStore||this.assignmentStore,e=a.resourceStore||this.resourceStore,d=a.dependencyStore||this.dependencyStore,h=[];if(g&&a.addRelatedStores!==!1){var j=this.getTaskStoreInfo(g,a);c=c||j.calendarManager;b=b||j.assignmentStore;e=e||j.resourceStore;d=d||j.dependencyStore}if(c){this.mixins.observable.constructor.call(this,a);this.addCalendarManager(c,h)}if(e){h.push(e)}if(b){h.push(b)}if(d){h.push(d)}if(g){h.push(g)}if(h.length){var f=[];if(c){f.push(c)}if(e){f.push(e)}if(g){f.push(g)}if(b){f.push(b)}if(d){f.push(d)}if(f.length){a.syncApplySequence=(a.syncApplySequence||a.stores||[]).concat(f)}var i=a.stores||this.stores;if(i&&!Ext.isArray(i)){i=[i]}a.stores=(i||[]).concat(h)}Sch.crud.AbstractManager.prototype.constructor.call(this,a);this.calendarManager=this.getStoreDescriptor(c);this.resourceStore=this.getStoreDescriptor(e);this.assignmentStore=this.getStoreDescriptor(b);this.dependencyStore=this.getStoreDescriptor(d);this.taskStore=this.getStoreDescriptor(g)},getTaskStoreInfo:function(a,c){if(!(a instanceof Ext.data.AbstractStore)){if(typeof a=='string'){a=Ext.data.StoreManager.get(a)}else {a=a.store}}var b={},e=c.calendarManager,d=c.assignmentStore,g=c.resourceStore,f=c.dependencyStore;if(!e){b.calendarManager=a.calendarManager}if(!d){b.assignmentStore=a.getAssignmentStore()}if(!g){b.resourceStore=a.getResourceStore()}if(!f){b.dependencyStore=a.getDependencyStore()}return b},addCalendarManager:function(a,e){var b,c;if(a instanceof Ext.data.AbstractStore){b=a;c={store:a}}else {if(typeof a=='object'){b=a.store;c=a}else {a=Ext.data.StoreManager.get(a);b=a;c={store:a}}}var d=(b.getModel&&b.getModel()||b.model).prototype;if(!c.stores){c.stores=[{storeId:d.daysField,idProperty:d.idProperty}]}this.calendarManager=c;b.on('load',this.onCalendarManagerLoad,this);this.mon(b,{dayadd:this.onStoreChange,dayupdate:this.onStoreChange,dayremove:this.onStoreChange,daybulkremove:this.onStoreChange,scope:this});e.push(c)},onCalendarManagerLoad:function(a){var b=a.getProjectCalendar(),d=b&&b.getCalendarId(),c=a.metaData&&a.metaData.projectCalendar;if(d!=c){a.setProjectCalendar(c)}},applyLoadResponse:function(){var a=this.getCalendarManager();a&&a.suspendCalendarsEvents();Sch.crud.AbstractManager.prototype.applyLoadResponse.apply(this,arguments);a&&a.resumeCalendarsEvents()},getCalendarManager:function(){return this.calendarManager&&this.calendarManager.store},getResourceStore:function(){return this.resourceStore&&this.resourceStore.store},getDependencyStore:function(){return this.dependencyStore&&this.dependencyStore.store},getAssignmentStore:function(){return this.assignmentStore&&this.assignmentStore.store},getTaskStore:function(){return this.taskStore&&this.taskStore.store},prepareUpdated:function(a,l,k){if(a[0] instanceof Gnt.model.Task){a=Ext.Array.filter(a,function(b){return !b.isRoot()});var c=Sch.crud.AbstractManager.prototype.prepareUpdated.call(this,a,l,k);if(this.resetIdsBeforeSync){var i=a[0].segmentsField,g=Ext.ClassManager.get(a[0].segmentClassName).prototype,j=g.idProperty,h=g.phantomIdField;for(var d=0;d<c.length;d++){var b=c[d][i];if(b){for(var e=0;e<b.length;e++){var f=b[e];if(f[h]){delete f[j]}}}}}return c}return Sch.crud.AbstractManager.prototype.prepareUpdated.apply(this,arguments)},prepareAdded:function(c){var b=Sch.crud.AbstractManager.prototype.prepareAdded.apply(this,arguments);if(this.resetIdsBeforeSync&&c[0] instanceof Gnt.model.Task){var f=c[0].segmentsField,g=Ext.ClassManager.get(c[0].segmentClassName).prototype.idProperty;for(var d=0;d<b.length;d++){var a=b[d][f];if(a){for(var e=0;e<a.length;e++){delete a[e][g]}}}}return b},applyChangesToTask:function(f,e){if(e.hasOwnProperty(f.segmentsField)){var a=f.getSegments(),j=f.segmentsField,i=a&&a[0].phantomIdField,k=a&&a[0].idProperty,c=e[j];if(a){if(c){for(var g=c.length-1;g>=0;g--){var d=c[g],l=d[i],m=d[k],b=null;for(var h=0;h<a.length;h++){b=a[h];if(b.get(i)==l||b.getId()==m){this.applyChangesToRecord(b,d);break}}}}delete e[j]}}},applyChangesToRecord:function(a,b,c){if(a instanceof Gnt.model.Task){this.ignoreUpdates++;this.applyChangesToTask.apply(this,arguments);this.ignoreUpdates--}Sch.crud.AbstractManager.prototype.applyChangesToRecord.apply(this,arguments)}},1,0,0,0,0,[[Sch.crud.encoder.Json.prototype.mixinId||Sch.crud.encoder.Json.$className,Sch.crud.encoder.Json],[Sch.crud.transport.Ajax.prototype.mixinId||Sch.crud.transport.Ajax.$className,Sch.crud.transport.Ajax]],[Gnt.data,'CrudManager'],0);Ext.cmd.derive('Gnt.model.Calendar',Sch.model.Customizable,{idProperty:'Id',calendar:null,nameField:'Name',daysPerMonthField:'DaysPerMonth',daysPerWeekField:'DaysPerWeek',hoursPerDayField:'HoursPerDay',weekendsAreWorkdaysField:'WeekendsAreWorkdays',weekendFirstDayField:'WeekendFirstDay',weekendSecondDayField:'WeekendSecondDay',defaultAvailabilityField:'DefaultAvailability',daysField:'Days',calendarClassField:'CalendarClass',phantomIdField:'PhantomId',phantomParentIdField:'PhantomParentId',customizableFields:[{name:'Name'},{name:'DaysPerMonth',type:'number'},{name:'DaysPerWeek',type:'number'},{name:'HoursPerDay',type:'number'},{name:'WeekendsAreWorkdays',type:'boolean'},{name:'WeekendFirstDay',type:'integer'},{name:'WeekendSecondDay',type:'integer'},{name:'DefaultAvailability'},{name:'Days'},{name:'CalendarClass',defaultValue:'Gnt.data.Calendar'},{name:'PhantomId'},{name:'PhantomParentId'}],constructor:function(a,e,b){var c=a||b||{};var d=c.calendar||c.Days;a&&delete a.calendar;b&&delete b.calendar;this.rawConfig=Ext.apply({},a);Sch.model.Customizable.prototype.constructor.apply(this,arguments);this.setDays(d);this.data[this.phantomIdField]=this.getId()},get:function(a){if(a==='Days'){return this.getCalendar()||this.data[this.daysField]}else {return Sch.model.Customizable.prototype.get.apply(this,arguments)}},set:function(b,a){if(b==='Days'){if(a instanceof Gnt.data.Calendar){this.setCalendar(a)}else {this.data[this.daysField]=a}}else {return Sch.model.Customizable.prototype.set.apply(this,arguments)}},getCalendar:function(){return this.calendar},setCalendar:function(a){this.calendar=a},getCalendarConfig:function(){var a=this;var e={calendarId:a.getId(),parent:a.parentNode&&a.parentNode.getCalendar()};var d=['daysPerMonth','daysPerWeek','hoursPerDay','name','weekendFirstDay','weekendSecondDay','weekendsAreWorkdays','defaultAvailability'];for(var c=0,g=d.length;c<g;c++){var b=d[c];if(a[b+'Field'] in a.rawConfig){var f='get'+Ext.String.capitalize(b);e[b]=a[f]()}}return e},getModelConfig:function(a,c){var b={};if(!c){b.parentId=a.parent&&a.parent.calendarId;b.calendar=a}b[this.daysPerMonthField]=a.daysPerMonth;b[this.daysPerWeekField]=a.daysPerWeek;b[this.hoursPerDayField]=a.hoursPerDay;b[this.nameField]=a.name;b[this.weekendFirstDayField]=a.weekendFirstDay;b[this.weekendSecondDayField]=a.weekendSecondDay;if(a.hasOwnProperty('weekendsAreWorkdays')){b[this.weekendsAreWorkdaysField]=a.weekendsAreWorkdays}if(a.hasOwnProperty('defaultAvailability')){b[this.defaultAvailabilityField]=a.defaultAvailability}b[this.calendarClassField]=Ext.getClassName(a);return b},setCalendarManager:function(a){this.calendarManager=a},getCalendarManager:function(){return this.calendarManager},getParentCalendarClass:function(){var a=this.parentNode,b;while(a&&!b){b=a.getCalendarClass();a=a.parentNode}return b},fillDataFromPrototype:function(b){var d=b[this.calendarClassField]||this.treeStore&&this.treeStore.getCalendarClass()||this.getCalendarClass()||this.getParentCalendarClass()||this.getField(this.calendarClassField).getDefaultValue();if(d){if(!b[this.calendarClassField]){b[this.calendarClassField]=d}var a=b.children;if(a&&a.length){for(var c=0;c<a.length;c++){this.fillDataFromPrototype(a[c])}}}},prepareCalendarNode:function(a){if(a instanceof Gnt.data.Calendar){a=this.getModelConfig(a)}else {if(Ext.isObject(a)&&!(a instanceof Gnt.model.Calendar)){this.fillDataFromPrototype(a)}}a=this.createNode(a);if(this.phantom){if(this.getId()!==a.data[this.phantomParentIdField]){a.modified=a.modified||{};a.modified[this.phantomParentIdField]=a.data[this.phantomParentIdField];a.data[this.phantomParentIdField]=this.getId()}}return a}},1,0,0,0,0,0,[Gnt.model,'Calendar'],function(){Ext.data.NodeInterface.decorate(this);this.override({insertBefore:function(a){a=this.prepareCalendarNode(a);return this.callParent(arguments)},appendChild:function(a){if(a instanceof Array){for(var b=0;b<a.length;b++){a[b]=this.prepareCalendarNode(a[b])}}else {a=this.prepareCalendarNode(a)}return this.callParent(arguments)}})});Ext.cmd.derive('Gnt.data.CalendarManager',Ext.data.TreeStore,{model:'Gnt.model.Calendar',storeId:'calendars',calendarClass:'Gnt.data.Calendar',calendarConfig:null,projectCalendar:null,myListeners:null,proxy:'memory',constructor:function(b){Ext.data.TreeStore.prototype.constructor.apply(this,arguments);this.myListeners=this.on({idchanged:this.onChangeId,rootchange:this.onNewRoot,nodeappend:this.onNewNode,nodeinsert:this.onNewNode,noderemove:this.onRemoveNode,destroyable:!0,scope:this});var a=this.getRoot();if(a){this.bindCalendars(a)}else {this.setRoot({expanded:!0})}},destroy:function(){this.myListeners.destroy();Ext.data.TreeStore.prototype.destroy.apply(this,arguments)},onChangeId:function(f,e,d,c,a){if(!(e instanceof Gnt.model.Calendar)){return}var b=this.getCalendar(d||a);b.setCalendarId(c)},onNewNode:function(c,a){this.bindCalendars(a);if(a!==this.getRoot()){this.fixCalendarParent(a)}var b=this;a.cascadeBy(function(d){d.setCalendarManager(b)})},onNewRoot:function(a){this.onNewNode(null,a)},onRemoveNode:function(d,b,c){if(!c){var a=b.calendar;if(a){this.unbindCalendarEvents(a);if(!this.__loading){a.destroy();Ext.data.StoreManager.unregister(a)}b.setCalendarManager(null)}}},suspendCalendarsEvents:function(a){this.getRoot().cascadeBy(function(c){var b=c.getCalendar();if(b){b.suspendEvents(a)}},this)},resumeCalendarsEvents:function(){this.getRoot().cascadeBy(function(b){var a=b.getCalendar();if(a){a.resumeEvents()}},this)},getCalendarClass:function(){return this.calendarClass},getProjectCalendar:function(){return this.projectCalendar},setProjectCalendar:function(a){if(this.settingProjectCalendar){return}if(typeof a!=='object'){a=this.getCalendar(a)||Gnt.data.Calendar.getCalendar(a)}if(!a||this.getProjectCalendar()===a){return}this.settingProjectCalendar=!0;this.projectCalendar=a;this.fireEvent('projectcalendarset',this,a);this.settingProjectCalendar=!1},getCalendar:function(b){var a=this.getModelById(b);return a&&a.getCalendar()},getNodeByCalendar:function(a){if(!a){return this.getRoot()}var b=this.getModelById(a.calendarId);if(!b){this.getRoot().cascadeBy(function(c){var d=c.getCalendar();if(d===a){b=c;return !1}},this)}return b},onParentChange:function(b,d,c){var a=this.getNodeByCalendar(b);if(a&&!a.syncingCalendarParent){this.fixNodeParent(a)}},bindCalendarEvents:function(a){this.relayEvents(a,['load'],'calendar');this.relayEvents(a,['add','update','remove','bulkremove'],'day');this.relayEvents(a,['calendarchange']);a.on('parentchange',this.onParentChange,this);this.on({dayadd:this.onDayAdd,dayupdate:this.onDayUpdate,dayremove:this.onDayRemove,scope:this})},unbindCalendarEvents:function(a){this.un({dayadd:this.onDayAdd,dayupdate:this.onDayUpdate,dayremove:this.onDayRemove,scope:this});a&&a.un({parentchange:this.onParentChange,scope:this})},onDayAdd:function(a,b){this.getModelById(a.getCalendarId()).dirty=!0},onDayUpdate:function(a,b){this.getModelById(a.getCalendarId()).dirty=!0},onDayRemove:function(a,b){this.getModelById(a.getCalendarId()).dirty=!0},fixCalendarParent:function(a){if(a.syncingCalendarParent){return}var b=a.parentNode.getCalendar(),c=a.getCalendar();if(b!==c.parent){a.syncingCalendarParent=!0;c.setParent(b);a.syncingCalendarParent=!1}},fixNodeParent:function(a){var d=a.parentNode.getCalendar(),c=a.getCalendar().parent;if(d!==c){var b=this.getNodeByCalendar(c);b&&b.appendChild(a)}},bindCalendar:function(a){if(!a||this.getRoot()===a){return}var b=a.getCalendar();var c=a.getDays();var g=a.getId()||a.internalId;c=Ext.isArray(c)&&c;if(!b||c){if(!b){b=Gnt.data.Calendar.getCalendar(g)}if(!b){var f=a.parentNode&&a.parentNode.getCalendar();var e=Ext.ClassManager.get(a.getCalendarClass()||this.calendarClass);var d=Ext.applyIf(a.getCalendarConfig(),{data:c,parent:f});b=Ext.create(e,Ext.apply(d,this.calendarConfig))}a.setCalendar(b);this.bindCalendarEvents(b)}else {if(!this.getCalendar(b.calendarId)){this.bindCalendarEvents(b)}}this.fireEvent('calendarbound',this,b,a)},unbindCalendar:function(a){if(!a||this.getRoot()===a){return}var b=a.getCalendar();if(!b){return}this.unbindCalendarEvents(b);this.fireEvent('calendarunbound',this,b,a)},bindCalendars:function(a){var b=this;if(a){Ext.Array.each([].concat(a),function(c){c.cascadeBy(b.bindCalendar,b)})}},unbindCalendars:function(a){var b=this;if(a){Ext.Array.each([].concat(a),function(c){c.cascadeBy(b.unbindCalendar,b)})}}},1,0,0,0,['store.calendarmanager'],[[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store],[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter]],[Gnt.data,'CalendarManager'],0);Ext.cmd.derive('CGA.model.CalendarDay',Gnt.model.CalendarDay,{dateField:'Date_js'},0,0,0,0,0,0,[CGA.model,'CalendarDay'],0);Ext.cmd.derive('CGA.data.Calendar',Gnt.data.Calendar,{model:'CGA.model.CalendarDay'},0,0,0,0,0,0,[CGA.data,'Calendar'],0);Ext.cmd.derive('CGA.data.CalendarManager',Gnt.data.CalendarManager,{calendarClass:'CGA.data.Calendar'},0,0,0,0,0,0,[CGA.data,'CalendarManager'],0);Ext.cmd.derive('Ext.window.Toast',Ext.window.Window,{isToast:!0,cls:'x-toast',bodyPadding:10,autoClose:!0,plain:!1,draggable:!1,resizable:!1,shadow:!1,focus:Ext.emptyFn,anchor:null,useXAxis:!1,align:'br',animate:!0,spacing:6,paddingX:30,paddingY:10,slideInAnimation:'easeIn',slideBackAnimation:'bounceOut',slideInDuration:500,slideBackDuration:500,hideDuration:500,autoCloseDelay:3000,stickOnClick:!0,stickWhileHover:!0,closeOnMouseDown:!1,closable:!1,isHiding:!1,isFading:!1,destroyAfterHide:!1,closeOnMouseOut:!1,xPos:0,yPos:0,initComponent:function(){var a=this;if(a.autoClose&&!a.hasOwnProperty('closable')){a.closable=!1}a.updateAlignment(a.align);a.setAnchor(a.anchor);Ext.window.Window.prototype.initComponent.call(this)},onRender:function(){var a=this;Ext.window.Window.prototype.onRender.apply(this,arguments);a.el.hover(a.onMouseEnter,a.onMouseLeave,a);if(a.closeOnMouseDown){Ext.getDoc().on('mousedown',a.onDocumentMousedown,a)}},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:'br-br',anchorAlign:'tr-br'},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:'bl-bl',anchorAlign:'tl-bl'},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:'tr-tr',anchorAlign:'br-tr'},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:'tl-tl',anchorAlign:'bl-tl'},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:'b-b',useXAxis:0,anchorAlign:'t-b'},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:'t-t',useXAxis:0,anchorAlign:'b-t'},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:'l-l',useXAxis:1,anchorAlign:'r-l'},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:'r-r',useXAxis:1,anchorAlign:'l-r'},x:{br:{anchorAlign:'bl-br'},bl:{anchorAlign:'br-bl'},tr:{anchorAlign:'tl-tr'},tl:{anchorAlign:'tr-tl'}}},updateAlignment:function(d){var a=this,b=a.alignmentProps,e=b[d],c=b.x[d];if(c&&a.useXAxis){Ext.applyIf(a,c)}Ext.applyIf(a,e)},getXposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;if(c&&c.dom){if(!b.useXAxis){a=f.getLeft()}else {if(d==='br'||d==='tr'||d==='r'){a+=c.getAnchorXY('r')[0];a-=f.getWidth()+b.paddingX}else {a+=c.getAnchorXY('l')[0];a+=b.paddingX}}}return a},getYposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;if(c&&c.dom){if(b.useXAxis){a=f.getTop()}else {if(d==='br'||d==='bl'||d==='b'){a+=c.getAnchorXY('b')[1];a-=f.getHeight()+b.paddingY}else {a+=c.getAnchorXY('t')[1];a+=b.paddingY}}}return a},getXposAlignedToSibling:function(a){var c=this,d=c.align,e=c.el,b;if(!c.useXAxis){b=e.getLeft()}else {if(d==='tl'||d==='bl'||d==='l'){b=a.xPos+a.el.getWidth()+a.spacing}else {b=a.xPos-e.getWidth()-c.spacing}}return b},getYposAlignedToSibling:function(a){var d=this,c=d.align,e=d.el,b;if(d.useXAxis){b=e.getTop()}else {if(c==='tr'||c==='tl'||c==='t'){b=a.yPos+a.el.getHeight()+a.spacing}else {b=a.yPos-e.getHeight()-a.spacing}}return b},getToasts:function(){var c=this.anchor,b=this.anchorAlign,a=c.activeToasts||(c.activeToasts={});return a[b]||(a[b]=[])},setAnchor:function(a){var c=this,b;c.anchor=a=typeof a==='string'?Ext.getCmp(a):a;if(!a){b=Ext.window.Toast;c.anchor=b.bodyAnchor||(b.bodyAnchor={el:Ext.getBody()})}},beforeShow:function(){var a=this;if(a.stickOnClick){a.body.on('click',function(){a.cancelAutoClose()})}if(a.autoClose){if(!a.closeTask){a.closeTask=new Ext.util.DelayedTask(a.doAutoClose,a)}}a.el.setX(-10000);a.el.setOpacity(1)},afterShow:function(){var a=this,d=a.el,c,b,e,f;Ext.window.Window.prototype.afterShow.apply(this,arguments);c=a.getToasts();e=c.length;b=e&&c[e-1];if(b){d.alignTo(b.el,a.siblingAlignment,[0,0]);a.xPos=a.getXposAlignedToSibling(b);a.yPos=a.getYposAlignedToSibling(b)}else {d.alignTo(a.anchor.el,a.anchorAlign,[a.paddingX*a.paddingFactorX,a.paddingY*a.paddingFactorY],!1);a.xPos=a.getXposAlignedToAnchor();a.yPos=a.getYposAlignedToAnchor()}Ext.Array.include(c,a);if(a.animate){f=d.getXY();d.animate({from:{x:f[0],y:f[1]},to:{x:a.xPos,y:a.yPos,opacity:1},easing:a.slideInAnimation,duration:a.slideInDuration,dynamic:!0,callback:a.afterPositioned,scope:a})}else {a.setLocalXY(a.xPos,a.yPos);a.afterPositioned()}},afterPositioned:function(){if(this.autoClose){this.closeTask.delay(this.autoCloseDelay)}},onDocumentMousedown:function(a){if(this.isVisible()&&!this.owns(a.getTarget())){this.hide()}},slideBack:function(){var a=this,f=a.anchor,e=f&&f.el,d=a.el,b=a.getToasts(),c=Ext.Array.indexOf(b,a);if(!a.isHiding&&d&&d.dom&&e&&e.isVisible()){if(c){a.xPos=a.getXposAlignedToSibling(b[c-1]);a.yPos=a.getYposAlignedToSibling(b[c-1])}else {a.xPos=a.getXposAlignedToAnchor();a.yPos=a.getYposAlignedToAnchor()}a.stopAnimation();if(a.animate){d.animate({to:{x:a.xPos,y:a.yPos},easing:a.slideBackAnimation,duration:a.slideBackDuration,dynamic:!0})}}},update:function(){var a=this;if(a.isVisible()){a.isHiding=!0;a.hide()}Ext.window.Window.prototype.update.apply(this,arguments);a.show()},cancelAutoClose:function(){var a=this.closeTask;if(a){a.cancel()}},doAutoClose:function(){var a=this;if(!(a.stickWhileHover&&a.mouseIsOver)){a.close()}else {a.closeOnMouseOut=!0}},onMouseEnter:function(){this.mouseIsOver=!0},onMouseLeave:function(){var a=this;a.mouseIsOver=!1;if(a.closeOnMouseOut){a.closeOnMouseOut=!1;a.close()}},removeFromAnchor:function(){var c=this,b,a;if(c.anchor){b=c.getToasts();a=Ext.Array.indexOf(b,c);if(a!==-1){Ext.Array.erase(b,a,1);for(;a<b.length;a++){b[a].slideBack()}}}},getFocusEl:Ext.emptyFn,hide:function(){var a=this,b=a.el;a.cancelAutoClose();if(a.isHiding){if(!a.isFading){Ext.window.Window.prototype.hide.apply(this,arguments);a.removeFromAnchor();a.isHiding=!1}}else {a.isHiding=!0;a.isFading=!0;a.cancelAutoClose();if(b){if(a.animate){b.fadeOut({opacity:0,easing:'easeIn',duration:a.hideDuration,listeners:{afteranimate:function(){a.isFading=!1;a.hide(a.animateTarget,a.doClose,a)}}})}else {a.isFading=!1;a.hide(a.animateTarget,a.doClose,a)}}}return a}},0,['toast'],['component','box','container','panel','window','toast'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'toast':!0},['widget.toast'],0,[Ext.window,'Toast'],function(a){Ext.toast=function(b,g,e,f){var c=b,d;if(Ext.isString(b)){c={title:g,html:b,iconCls:f};if(e){c.align=e}}d=new a(c);d.show();return d}});Ext.cmd.derive('CGA.store.CrudManager',Gnt.data.CrudManager,{nodeSource:!1,client:!1,dynamicPredecessorsList:null,customCalendarManager:!1,isInit:!1,ganttData:{tasks:{metadata:{},rows:[]},dependencies:{metadata:{},rows:[]},calendars:{metadata:{},rows:[]}},dynamicPredecessorsList:null,excludedFields:['CalendarId','SchedulingMode','BaselinePercentDone','PhantomId','PhantomParentId'],projectId:null,constructId:null,simulationId:null,baselineId:null,groupingType:null,filterId:null,researchId:null,prototypeId:null,phantomIdField:'tempId',autoLoad:!1,autoSync:!1,writeAllFields:!0,dataLoadTimeStamp:null,dependencyStore:'Dependencies',taskStore:'Tasks',constructor:function(a){function getURLParam(c){var b=Ext.urlDecode(location.search.substring(1));return b[c]?b[c]:null}this.projectId=getURLParam('projectId')?getURLParam('projectId'):this.projectId;this.constructId=getURLParam('constructId')?getURLParam('constructId'):this.constructId;this.simulationId=getURLParam('simulationId')?getURLParam('simulationId'):this.simulationId;this.baselineId=getURLParam('baselineId')?getURLParam('baselineId'):this.baselineId;this.groupingType=getURLParam('groupingType')?getURLParam('groupingType'):this.groupingType;this.filterId=getURLParam('filterId')?getURLParam('filterId'):this.filterId;this.researchId=getURLParam('researchId')?getURLParam('researchId'):this.researchId;this.prototypeId=getURLParam('prototypeId')?getURLParam('prototypeId'):this.prototypeId;Gnt.data.CrudManager.prototype.constructor.apply(this,a);this.bindStores()},getClient:function(){if(this.client==!1){this.setClient()}return this.client},setClient:function(){this.client=client},setRequestParams:function(b){var a=this;if(a.projectId!==null){b.projectId=a.projectId}if(a.constructId!==null){b.constructId=a.constructId}if(a.simulationId!==null){b.simulationId=a.simulationId}if(a.baselineId!==null){b.baselineId=a.baselineId}if(a.groupingType!==null){b.groupingType=a.groupingType}if(a.filterId!==null){b.filterId=a.filterId}if(a.researchId!==null){b.researchId=a.researchId}if(a.prototypeId!==null){b.prototypeId=a.prototypeId}},getTotalRecords:function(){var c=this;var a=Ext.create('Deft.Deferred');var b={'className':'GanttManagementRequest',actionName:'getGanttStorePageLimit'};c.setRequestParams(b);c.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(b){if(b.isError==!1){}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}a.resolve(b)},function(b){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200});a.reject(b)},'POST',JSON.stringify({requestJSON:JSON.stringify(b)}));return a.promise},getBaselines:function(){var b=this;var a=Ext.create('Deft.Deferred');var c={className:'GanttManagementRequest',actionName:'getBaselines',projectId:b.projectId};b.setRequestParams(c);b.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(b){if(b.isError==!1){}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}a.resolve(b)},function(b){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200});a.reject(b)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return a.promise},getGanttPermissions:function(d){var c=this;var a=Ext.create('Deft.Deferred');var b={'className':'GanttManagementRequest',actionName:'getGanttPermissions',projectId:d};c.setRequestParams(b);c.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(b){if(b.isError==!1){}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}a.resolve(b)},function(b){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200});a.reject(b)},'POST',JSON.stringify({requestJSON:JSON.stringify(b)}));return a.promise},getBulkFromServer:function(f,e,b){var d=this;var a;a=Ext.create('Deft.Deferred');var c={'className':'GanttManagementRequest',actionName:'getGanttStore',offset:f,initPage:e};d.setRequestParams(c);d.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(c){if(c.isError==!1){}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200})}c.requestIndex=b;a.resolve(c)},function(c){c.requestIndex=b;console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200});a.reject(c,b)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return a.promise},processResponse:function(c){var d=this;if(c.ganttStore.tasks.rows.length>0){var a=d.getMapTasksById(d.ganttData.tasks.rows);var b=d.getMapTasksById(c.ganttStore.tasks.rows);c.ganttStore.tasks.rows.forEach(function(e){for(var g in e){if(e[g]===null||e[g]===undefined){delete e[g]}else {if(e.EndDate===undefined){e.EndDate=null}}}if(a[e.parentId]!=null){if(c.adjustOnLoad==!0&&a[e.parentId].isVirtual==!0){a[e.parentId].Duration=null;a[e.parentId].StartDate=null;a[e.parentId].EndDate=null}if(a[e.parentId].children===undefined||a[e.parentId].children==null){a[e.parentId].children=new Array()}var f=!1;a[e.parentId].children.forEach(function(a){if(a.Id==e.Id){f=!0;console.error('Found dublicate task: '+a.Id+' '+a.Name)}});if(!f){if(e.hasPrototype===!1){a[e.parentId].children.splice(e.index-1,0,e);delete e.index}else {a[e.parentId].children.push(e)}}}else {if(e.parentId==null){d.ganttData.tasks.rows.push(e)}else {if(!b[e.parentId]){console.log('ERROR 1!!! parent not found for task id: '+e.Id+' expected parent: '+e.parentId+' info: '+e.Cls+' name: '+e.Name);alert('Error retrieving gantt data!');return}if(b[e.parentId].children===undefined||b[e.parentId].children==null){b[e.parentId].children=new Array()}var f=!1;b[e.parentId].children.forEach(function(a){if(a.Id==e.Id){f=!0;console.error('Found dublicate task: '+a.Id+' '+a.Name)}});b[e.parentId].children.push(e)}}});d.setMapTasksById(a)}if(c.ganttStore.dependencies!==null){Array.prototype.push.apply(d.ganttData.dependencies.rows,c.ganttStore.dependencies.rows)}},loadResponseData:function(d){var a=this;var e=new Date();console.log('data retrrived from server after: '+(e.getTime()-this.dataLoadTimeStamp.getTime())/1000+' sec');console.log('START loading data to gantt...');a.isLoad=!0;var b=a.getMapTasksById(a.ganttData.tasks.rows);for(i in b){if(b[i].children===undefined||b[i].children===null){b[i].leaf=!0}else {b[i].leaf=!1}}a.getTaskStore().autoNormalizeNodes=!1;a.loadData(a.ganttData);a.getTaskStore().autoNormalizeNodes=!0;a.fireEvent('headersLoad',a,d);var c=a.processDynamicPredecessors();setTimeout(function(){if(d.adjustOnLoad!=!0){var e=[];var b=a.getTaskStore().byIdMap;for(i in b){if(b[i].data.isVirtual==!0){e.push(b[i])}}console.log('START Partial adjusting calendar...');a.getTaskStore().adjustToCalendar(e,function(e,b){a.getTaskStore().sync();a.activeRequests.load=null;console.log('END Partial adjusting calendar');a.fireEvent(a.hasChanges()?'haschanges':'nochanges',a);console.log('END loading data to Gantt...');c.then(function(c){a.dynamicPredecessorsList=c;a.createDynamicPredecessors(c)});view.viewModel.adjustingOnLoad=!1;return !1})}else {console.log('START FULL adjusting calendar...');a.getTaskStore().getRootNode().cascadeBy(function(a){if(a.data.isMilestone==!0){a.set('StartDate',CGA.utils.date.resetStart(a.data.StartDate,a.data.Duration,a.predecessors));a.set('EndDate',CGA.utils.date.resetEnd(a.data.EndDate,a.data.Duration,a.predecessors))}});a.getTaskStore().adjustToCalendar(function(f,b){for(var e in b){if(b[e].data.isVirtual==!0||b[e].data.isBuildingGroup==!0){b[e].clearState();b[e].phantom=!1}}a.activeRequests.load=null;a.fireEvent(a.hasChanges()?'haschanges':'nochanges',a);console.log('END FULL adjusting calendar');console.log('END loading data to Gantt...');c.then(function(c){a.dynamicPredecessorsList=c;a.createDynamicPredecessors(c)});return !1})}},50)},strictExtend:function(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}},getMapTasksById:function(c){var b=this;var a={};c.forEach(function(d){if(d.children!=null&&d.children.length>0){b.strictExtend(a,b.getMapTasksById(d.children))}a[d.Id]=d});return a},setMapTasksById:function(c){var a=this;var b={};for(var e in a.ganttData.tasks.rows){b[a.ganttData.tasks.rows[e].Id]=e}for(var d in c){a.ganttData.tasks.rows[b[d]]=c[d]}},getBulks:function(e,f,h,g,c,b,d){var a=this;a.getBulkFromServer(0,!0,0).then({success:function(i){console.log('proccesing response, requestIndex #'+i.requestIndex);if(i.success==!0){if(a.isInit==!1){a.ganttData.calendars.metadata=i.ganttStore.calendars.metadata;a.ganttData.calendars.rows=i.ganttStore.calendars.rows;a.ganttData.tasks.metadata=i.ganttStore.tasks.metadata;a.ganttData.dependencies.metadata=i.ganttStore.dependencies.metadata;a.ganttData.dependencies.rows=i.ganttStore.dependencies.rows;a.customCalendarManager=Ext.create('CGA.data.CalendarManager');i.ganttStore.calendars.rows[0].HoursPerDay=9;i.ganttStore.calendars.rows[0].DefaultAvailability=['08:00-17:00'];a.customCalendarManager.getRoot().appendChild(i.ganttStore.calendars.rows[0]);a.customCalendarManager.setProjectCalendar(a.customCalendarManager.getRoot().firstChild.getCalendar());a.getTaskStore().setCalendarManager(a.customCalendarManager);a.getTaskStore().setCalendar(a.customCalendarManager.getRoot().firstChild.getCalendar(),!0);a.isInit=!0}var n=parseInt(i.storeOffset);a.processResponse(i);var o=Math.max(0,Math.ceil(c/b));a.bulksParams=[];var j=n;for(var k=0;k<o;k++){a.bulksParams.push({offset:j,initPage:!1,requestIndex:k+1});j=j+b}var m=24;a.responseArr=[];var l=function(){var k=[].concat(a.bulksParams.splice(0,Math.min(a.bulksParams.length,m)));var n=[];for(var j=0;j<k.length;j++){n.push(a.getBulkFromServer(k[j].offset,k[j].initPage,k[j].requestIndex))}if(a.bulksParams.length>0){Deft.Promise.all(n).then({success:function(j){a.responseArr=a.responseArr.concat(j);l()},failure:function(a){console.log('ERROR 3!!! response error on loading gantt')}}).always(function(){}).done()}else {Deft.Promise.all(n).then({success:function(j){a.responseArr=a.responseArr.concat(j);j=a.responseArr;j.forEach(function(k){console.log('proccesing response, requestIndex #'+k.requestIndex);a.processResponse(k)});if(j.length>0){setTimeout(function(){a.loadResponseData(i)},50)}},failure:function(a){console.log('ERROR 3!!! response error on loading gantt')}}).always(function(){}).done()}}}l()},failure:function(a){}}).always(function(){}).done()},getAllResolved:function(a,b){},load:function(b,d,c){var e;var a=this;if(typeof b==='object'){e=b;b=d;d=c;c=arguments[3]}var f=this.getLoadPackage(e);if(a.fireEvent('beforeload',a,f)!==!1){c=c||a;if(a.activeRequests.load){a.cancelRequest(a.activeRequests.load.desc);a.fireEvent('loadcanceled',a,f)}a.activeRequests.load={id:f.requestId};console.log('data load initiated');this.dataLoadTimeStamp=new Date();if(typeof b==='object'){e=b;b=d;d=c;c=arguments[3]}a.getTotalRecords().then({success:function(f){console.log('initiated loading bulks');a.getBulks(b,d,c,e,f.numberOfRecords,f.bulkSize,f.projectName)},failure:function(a){}}).always(function(){}).done();a.getBaselines().then({success:function(e){console.log('load project baselines');a.selectedBaseLine;a.historyBaseLines=[];e.requestedData.forEach(function(f){if(f.selected==!0){a.selectedBaseLine=f}else {a.historyBaseLines.push(f)}})},failure:function(a){}}).always(function(){}).done()}else {this.fireEvent('loadcanceled',this,f)}},sendBulk:function(a){var b;console.log('send bulk update:');if(a.ganttStore.tasks){console.log(a.ganttStore.tasks.rows.length+'updated/new tasks');console.log(a.ganttStore.tasks.deleted.length+'delete tasks')}if(a.ganttStore.dependencies){console.log(a.ganttStore.dependencies.rows.length+'dependencies');console.log(a.ganttStore.dependencies.deleted.length+'delete dependencies')}b=Ext.create('Deft.Deferred');this.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(c){if(c.isError==!1){c.success=!0}b.resolve(c)},function(c){b.reject(c)},'POST',JSON.stringify({requestJSON:JSON.stringify(a)}));return b.promise},sync:function(h,j,e){var b=this;var a=this.getChangeSetPackage();e=e||this;if(!a){b.getDependencyStore().sync();b.getTaskStore().sync();b.fireEvent(this.hasChanges()?'haschanges':'nochanges',this);console.log('W: sync required without need');if(h){h.call(e,null,null)}return}if(this.fireEvent('beforesync',this,a)===!1){this.fireEvent('synccanceled',this,a);return}this.activeRequests.sync={id:a.requestId};var n=null;if(this.getTaskStore().getUpdatedRecords().length>0||this.getTaskStore().getRemovedRecords().length>0||this.getTaskStore().getNewRecords().length>0||this.getDependencyStore().getNewRecords().length>0||this.getDependencyStore().getUpdatedRecords().length>0||this.getDependencyStore().getRemovedRecords().length>0){if('tasks' in a){a.tasks.rows=[];a.tasks.deleted=[];for(i in a.tasks.updated){if(typeof a.tasks.updated[i]!='function'&&(a.tasks.updated[i].isVirtual!=!0||a.tasks.updated[i].Cls=='constructGroup')){var c=this.getTaskStore().byIdMap[a.tasks.updated[i].Id].modified;var l=Ext.create('CGA.model.Task',Ext.apply({},c));a.tasks.updated[i].oldTask={};a.tasks.updated[i].oldTask['modifiedFields']=[];for(f in c){field=l.getField(f);if(field.persist){a.tasks.updated[i].oldTask[f]=field.serialize?field.serialize(c[f],l):c[f]}a.tasks.updated[i].oldTask['modifiedFields'].push(f)}a.tasks.rows.push(a.tasks.updated[i])}}for(i in a.tasks.added){if(typeof a.tasks.added[i]!='function'&&a.tasks.added[i].isVirtual!=!0){a.tasks.rows.push(a.tasks.added[i])}}for(i in a.tasks.removed){if(typeof a.tasks.removed[i]!='function'&&a.tasks.removed[i].isVirtual!=!0){a.tasks.deleted.push(a.tasks.removed[i])}}}if('dependencies' in a){a.dependencies.rows=[];a.dependencies.deleted=[];if(a.dependencies.updated){a.dependencies.rows=a.dependencies.rows.concat(a.dependencies.updated)}if(a.dependencies.added){a.dependencies.rows=a.dependencies.rows.concat(a.dependencies.added)}if(a.dependencies.removed){a.dependencies.deleted=a.dependencies.deleted.concat(a.dependencies.removed)}}var d=100;var g=[];b.getTaskStore().sync();if(a.tasks&&(a.tasks.rows&&a.tasks.rows.length>0||a.tasks.deleted&&a.tasks.deleted.length>0)){var k=0;while(k<a.tasks.rows.length/d||k<a.tasks.deleted.length/d){g.push(function(){var c={tasks:{rows:[],deleted:[]}};c.type=a.type;c.requestId=a.requestId;c.revision=a.revision;c.tasks.rows=a.tasks.rows.splice(0,d);c.tasks.deleted=a.tasks.deleted.splice(0,d);return b.sendBulk({'className':'GanttManagementRequest',actionName:'setGanttStore',projectId:b.projectId,researchId:b.researchId,constructId:b.constructId,storeAsBaseline:!1,storeAsSimulation:!(n==null),description:'',ganttStore:c})});k++}}if(g.length==0){b.syncDependenciesBulks(a)}else {var o={title:null,message:b.L('SavingTasks'),closable:!1,wait:!0,modal:!1,minWidth:this.minProgressWidth,waitConfig:null};var m=Ext.ComponentQuery.query('advanced-viewport')[0];m.viewModel.set('readOnlyMode',!0);m.down('ganttpanel').setReadOnly(!0);Deft.Chain.sequence(g).then({success:function(f){var c;for(var d=0,g=f.length;d<g;d++){if(c==null){c=f[d]}else {c.isError=c.isError||f[d].isError;c.needUpdate=c.needUpdate||f[d].needUpdate;c.unSaveStagesMessage+=f[d].unSaveStagesMessage;if(f[d].message!='OK'){c.message=f[d].message}c.newTasksIds=f[d].newTasksIds;c.newTasksData=f[d].newTasksData}}if(c.isError==!1){c.success=!0;var i;b.saveRespone=c;b.pack=a;b.errback=j;b.callback=h;if(c.needUpdate){Ext.MessageBox.confirm('Confirm',c.unSaveStagesMessage,function(a){if(a==='no'){b.saveChanges(b)}else {if(a==='yes'){b.refreshGantt()}}},this)}else {b.saveChanges(b)}}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200})}},failure:function(c){var d=c[0];var a=Ext.JSON.encode(d);b.onSync(a,{});if(j){j.apply(e,arguments)}}}).always(function(){}).done()}}},saveChanges:function(c){var a=c.saveRespone;var b=c.pack;if(a.newTasksIds&&a.newTasksIds!=null){for(var j in a.newTasksIds){var d=c.getTaskStore().getNodeById(j);d.set('Id',a.newTasksIds[j])}}if(a.newTasksData&&a.newTasksData!=null){for(var h in a.newTasksData){var d=c.getTaskStore().getNodeById(h);d.beginEdit();Ext.merge(d.data,a.newTasksData[h],{leaf:d.data.leaf,children:d.data.children,StartDate:d.data.StartDate,EndDate:d.data.EndDate,index:d.data.index,viewOrder:d.data.viewOrder});d.endEdit()}}if(b.dependencies&&(b.dependencies.rows&&b.dependencies.rows.length>0||b.dependencies.deleted&&b.dependencies.deleted.length>0)){if(a.newTasksIds&&a.newTasksIds!=null){for(i in b.dependencies.rows){if(a.newTasksIds[b.dependencies.rows[i].From_js]){b.dependencies.rows[i].From_js=a.newTasksIds[b.dependencies.rows[i].From_js]}if(a.newTasksIds[b.dependencies.rows[i].To_js]){b.dependencies.rows[i].To_js=a.newTasksIds[b.dependencies.rows[i].To_js]}}}c.syncDependenciesBulks(b)}var f=Ext.JSON.encode(a);var g=c.activeRequests.sync;var e=c.onSync(f,{});if(c.errback&&(!e||!e.success)){c.errback.call(scope,e,f,g)}else {if(c.callback){c.callback.call(scope,e,f,g)}}if(b.tasks.removed){c.applyChangesToStore({store:c.getTaskStore()},{removed:b.tasks.removed})}c.fireEvent(c.hasChanges()?'haschanges':'nochanges',this);var k=Ext.ComponentQuery.query('advanced-viewport')[0];k.viewModel.set('readOnlyMode',!1);k.down('ganttpanel').setReadOnly(!1)},refreshGantt:function(){window.location.reload()},syncDependenciesBulks:function(b){var a=this;var e=100;var f=null;var d=[];var c={dependencies:{rows:[],deleted:[]}};c.type=b.type;c.requestId=b.requestId;c.revision=b.revision;while(b.dependencies!=null&&(b.dependencies.rows.length||b.dependencies.deleted.length)){c.dependencies.rows=b.dependencies.rows.splice(0,e);c.dependencies.deleted=b.dependencies.deleted.splice(0,e);d.push(a.sendBulk({'className':'GanttManagementRequest',actionName:'setGanttStore',projectId:a.projectId,researchId:a.researchId,constructId:a.constructId,storeAsBaseline:!1,storeAsSimulation:!(f==null),description:'',ganttStore:c}))}if(d.length>0){Deft.Promise.all(d).then({success:function(f){var c=f[0];if(c.isError==!1){c.success=!0;if(c.newDependenciesIds&&c.newDependenciesIds!=null){for(var e in c.newDependenciesIds){var g=a.getDependencyStore().getById(e);g.set('Id',c.newDependenciesIds[e])}}}var d;if(b.dependencies.removed){a.applyChangesToStore({store:a.getDependencyStore()},{removed:b.dependencies.removed});d=Ext.Array.map(b.dependencies.removed,function(a){return new CGA.model.Dependency(a)});a.fireEvent('has-removed-dependencies',d)}a.getDependencyStore().sync();a.getTaskStore().sync();a.fireEvent(a.hasChanges()?'haschanges':'nochanges',this)},failure:function(d){var e=d[0];var c=Ext.JSON.encode(e);a.onSync(c,{});if(errback){errback.apply(scope,arguments)}}}).always(function(){}).done()}else {this.fireEvent('synccanceled',this,b);a.fireEvent(a.hasChanges()?'haschanges':'nochanges',this)}},prepareNodes:function(l,f){f=f?f:!1;var k=[],m=!0,a,d;for(var h=0,n=l.length;h<n;h++){var c=l[h],b;if(m&&c){a=c.getData();a[c.idProperty]=c.getId();for(b in a){d=c.getField(b);if(this.excludedFields.indexOf(b)!=-1){delete a[b]}else {if(!d||!d.persist&&!d.critical){delete a[b]}else {if(d.serialize){a[b]=d.serialize(a[b],c)}else {if(b=='EffortUnit'&&c.get('EffortUnit')==''){delete a[b]}else {if(b=='Duration'){var g=c.get(b);if(g!=null){a[b]=+g.toFixed(2)}else {a[b]=g}}else {if(c.get(b)===''){delete a[b]}else {a[b]=c.get(b)}}}}}}if(a['parentId']=='root'){delete a['parentId']}}}else {if(c){a=c.getChanges();a[c.idProperty]=c.getId();for(b in a){d=c.getField(b);if(!d||!d.persist){delete a[b]}else {if(d.serialize){a[b]=d.serialize(a[b],c)}else {a[b]=c.get(b)}}}var j=c.getCriticalFields();for(var i=0;i<j.length;i++){d=j[i];if(d.serialize){a[d.getName()]=d.serialize(c.get(d.getName()),c)}else {a[d.getName()]=c.get(d.getName())}}}}if(a.parentId){var e=this.getTaskStore().getById(a.parentId);if(e&&e.get('isVirtual')==!1){a.parentObjectId=e.get('baseObjectId')}else {if(e){a.parentObjectId=e.get('parentObjectId')}}}if(c&&c.get('isReadOnly')!=!0||f){k.push(a)}}return k},isStoreDirty:function(b){if(b.getRemovedRecords().length){return !0}if(b.isTreeStore){for(var f in b.byIdMap){var a=b.byIdMap[f];if(!a.get('root')&&a.dirty===!0&&(!a.get('root')||Ext.Object.getKeys(a.modified).length!==1||!('expanded' in a.modified))){return !0}else {if(!a.get('root')&&a.phantom&&a.isValid()){return !0}}}}else {var d=b.getData().items;for(var c=0,e=d.length;c<e;c++){if(d[c].dirty||d[c].phantom){return !0}}}return !1},prepareAdded:function(a,b,c){return this.prepareNodes(a)},prepareUpdated:function(a,c,b){return this.prepareNodes(a)},prepareRemoved:function(a,c,b){return this.prepareNodes(a)},bindStores:function(){var a={scope:this};if(this.getTaskStore()){this.getTaskStore().un(a)}if(this.getTaskStore()){this.getTaskStore().on(a)}var b={scope:this};if(this.getDependencyStore()){this.getDependencyStore().un(b)}if(this.getDependencyStore()){this.getDependencyStore().on(b)}},addDependencies:function(b){var c=this;for(var a=0;a<b.length-1;a++){if(!c.getDependencyStore().areTasksLinked(b[a].id,b[a+1].id)){var d=Ext.create('CGA.model.Dependency',{From_js:b[a].id,To_js:b[a+1].id,Type:2});c.getDependencyStore().add(d)}}},getTaskTypes:function(e,f,c,b){var d=this.prepareNodes([e],!0);var a={'className':'GanttManagementRequest',actionName:'getTaskTypes',projectId:this.projectId,researchId:this.researchId,constructId:this.constructId,parentTask:d[0],taskType:f};console.log(a);console.log(JSON.stringify(a));this.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(a){console.log(a);if(a.isError==!1){a.success=!0}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+a.message+'</span>',width:200})}c(a,b)},function(a){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+a.message+'</span>',width:200})},'POST',JSON.stringify({requestJSON:JSON.stringify(a)}))},getSimulations:function(){var a=this;var b={'className':'GanttManagementRequest',actionName:'getGanttVersions',projectId:a.projectId,researchId:a.researchId,constructId:a.constructId,versionType:'simulation'};console.log(b);console.log(JSON.stringify(b));this.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(b){console.log(b);if(b.isError==!1){b.success=!0}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}a.fireEvent('simulationLineInit',a,b)},function(a){},'POST',JSON.stringify({requestJSON:JSON.stringify(b)}))},loadBaseLine:function(a){console.log(a)},ScheduleLock:function(b,e,c){var f=this;var a;a=Ext.create('Deft.Deferred');var d={'className':'GanttManagementRequest',actionName:'ScheduleLock',projectId:b,doLock:e,doUnlock:c};console.log('get ScheduleLock status');f.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(d){if(d.isError==!1){console.log(d)}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+d.message+'</span>',width:200})}a.resolve(d)},function(d){console.log(d);console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+d.message+'</span>',width:200});a.reject(d,requestIndex)},'POST',JSON.stringify({requestJSON:JSON.stringify(d)}));return a.promise},createDynamicPredecessors:function(f){var e=this;var k={allAffectedStages:[]};var b;b=Ext.create('Deft.Deferred');if(Ext.Object.isEmpty(f)){b.resolve({});return b.promise}for(dPredId in f){var a=f[dPredId];var d,c;switch(a.edgeDirection){case 0:d=!0;c=!0;break;case 1:d=!0;c=!1;break;case 2:d=!1;c=!0;break;case 3:fromIsEnd=!1;c=!1;break;}var g=e.findFromStages(a.predecessorGroupingKey.stages,d,a.predecessorType);var i=e.findToStages(a.prototypeGroupingKey.stages,g[0],a.predecessorType,c);var h=a.predecessorGroupingKey.stages.concat(a.prototypeGroupingKey.stages);var j=e.addDynamicPredecessors(g,i,a,h,'dynamic-dep');b.resolve(j)}e.getTaskStore().adjustToCalendar();return b.promise},addDynamicPredecessors:function(g,h,d,f,e){var a=this;var b={};f.forEach(function(a){b[a.id]=!0});var c=[];g.forEach(function(b){h.forEach(function(i){console.log('from '+b.getData().Name+' Due '+b.getData().StartDate+' to '+i.getData().Name+' Due '+i.getData().StartDate+' Cls '+e);var j=Ext.create('CGA.model.Dependency',{To_js:i.getData().Id,From_js:b.getData().Id,Type:d.predecessorType,Cls:e,Lag:d.Lag,phantom:!1});if(a.getDependencyStore().getDependencyError(j)==0){c.push(j)}})});Ext.suspendLayouts();a.getDependencyStore().add(c);Ext.resumeLayouts();var i=a.getTaskStore().getRootNode();i.cascadeBy(function(a){if(b[a.id]){a['affectedByDynamicPredecessor']=!0}});return !0},findToStages:function(l,g,k,j){var c=[];var b;var d='StartDate';var f;var e;var g=g.getData();var i={'earlierOrEquale':function(a,b){return a<=b},'laterOrEquale':function(a,b){return a>=b}};switch(k){case 0:b='StartDate';d='StartDate';f='laterOrEquale';e='earlierOrEquale';break;case 1:b='EndDate';d='StartDate';f='laterOrEquale';e='earlierOrEquale';break;case 2:d='EndDate';b='StartDate';f='laterOrEquale';e='earlierOrEquale';break;case 3:b='EndDate';d='EndDate';f='laterOrEquale';e='earlierOrEquale';break;default:throw 'findToStages: unsupported type: '+k;break;}var a={latest:[],earliests:[]};var h=!1;l.forEach(function(m){var o=m.getData();var n=c.pop();if(!n){c.push(m);a.latest.push(m);a.earliests.push(m)}else {var p=n.getData();if(j){if(i[f](o[b],g[d])){if(i[f](p[b],g[d])){c.push(n)}c.push(m);h=!1}else {c.push(n)}}else {if(i[e](o[b],g[d])){if(i[e](p[b],g[d])){c.push(n)}c.push(m);h=!0}else {c.push(n)}}if(o[b]>p[b]){if(o[b].getTime()!==a.latest[0].data[b].getTime()){a.latest.length=0}a.latest.push(m)}else {if(o[b]<p[b]){if(o[b].getTime()!==a.earliests[0].data[b].getTime()){a.earliests.length=0}a.earliests.push(m)}else {if(o[b].getTime()===p[b].getTime()){a.latest.push(n);a.latest.push(m);a.earliests.push(n);a.earliests.push(m)}}}}});switch(k){case 0:if(h){return c}else {if(j){return a.latest}else {return a.earliests}};break;case 3:case 1:if(h){return c}else {if(j){return a.latest}else {return a.earliests}};break;case 2:if(h){return c}else {if(j){return a.latest}else {return a.earliests}};break;default:return c;}},findFromStages:function(e,c,d){var a=[];var b='StartDate';switch(d){case 0:break;case 1:case 2:if(c){b='EndDate'};break;case 3:break;default:throw 'findFromStages: unsupported type: '+d;break;}e.forEach(function(f){var i=f.getData();var g=a.pop();if(!g){a.push(f)}else {var h=g.getData();if(c){if(i[b]>h[b]){a.length=0;a.push(f)}else {if(i[b].getTime()===h[b].getTime()){a.push(g);a.push(f)}else {a.push(g)}}}else {if(i[b]<h[b]){a.length=0;a.push(f)}else {if(i[b].getTime()===h[b].getTime()){a.push(g);a.push(f)}else {a.push(g)}}}}});return a},processDynamicPredecessors:function(){var c=this;var a={};var b={};var d;d=Ext.create('Deft.Deferred');c.getDynamicPredecessors(c.projectId||c.researchId).then(function(e){var f=c.getTaskStore().getRootNode();f.cascadeBy(function(c){var b=c.getData();if(a[b.groupingKey]){a[b.groupingKey].stages.push(c)}else {a[b.groupingKey]={stages:[c]}}});e.dynamicPredecessor.forEach(function(c){if(a[c.predecessorGroupingKey]==null||a[c.prototypeGroupingKey]==null){return}b[c.id]={predecessorGroupingKey:a[c.predecessorGroupingKey],prototypeGroupingKey:a[c.prototypeGroupingKey]};b[c.id]['Lag']=c.Lag;b[c.id]['LagUnit']=c.LagUnit;b[c.id]['edgeDirection']=c.edgeDirection;b[c.id]['predecessorType']=c.predecessorType});d.resolve(b)});return d.promise},getDynamicPredecessors:function(b){var d=this;var a;a=Ext.create('Deft.Deferred');var c={'className':'GanttManagementRequest',actionName:'getDynamicPredecessors',projectId:b};console.log('Get dynamic predecessors');d.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(c){console.log(c);a.resolve(c)},function(c){console.log(c);a.reject(c,requestIndex)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return a.promise},getFormatTask:function(b,a){if(a.data.isVirtual!=!0&&a.isRoot()!=!0&&a.data.Id.match(/[a-zA-Z0-9]{18}|[a-zA-Z0-9]{15}/)){var c={};for(field in b){if(b[field].persist==!0){if(b[field].type=='date'&&a.data[field]!=null&&b[field].dateFormat!=null){c[field]=Ext.Date.format(a.data[field],b[field].dateFormat)}else {c[field]=a.data[field]}}}return c}},editBaseline:function(e,d){var a=this;var b=Ext.create('Deft.Deferred');var c={className:'GanttManagementRequest',actionName:'editBaseline',baseline:e,baselineName:d,projectId:a.projectId};a.setRequestParams(c);a.getClient().apexrest('/CC_REID/RemoteAction',function(c){if(c.isError==!1){a.updatedBaseline=c.newBasline;a.isBaselineUpdate=!0}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200})}b.resolve(c)},function(a){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+a.message+'</span>',width:200});b.reject(a)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return b.promise},saveBaseLine:function(c,j,l,k,i){var a=this;var b=[];var f=this.taskStore.store.getModel().getFieldsMap();if(i==null){this.taskStore.store.getRootNode().cascadeBy(function(e){var d=a.getFormatTask(f,e);if(d!=null){b.push(d)}})}else {i.forEach(function(e){var d=a.getFormatTask(f,e);if(d!=null){b.push(d)}})}var g=100;var e=[];var h=0;if(b.length>0){while(h<b.length/g){e.push(function(){var d={tasks:{rows:[],deleted:[]}};d.tasks.rows=b.splice(0,g);return a.sendBulk({'className':'GanttManagementRequest',actionName:'saveBaseline',projectId:a.projectId,baselineType:c,ganttStore:d,baseline:l,baselineName:k})});h++}var m={title:null,message:a.L(j),closable:!1,wait:!0,modal:!1,minWidth:this.minProgressWidth,waitConfig:null};var d=Ext.ComponentQuery.query('advanced-viewport')[0];d.viewModel.set('readOnlyMode',!0);d.down('ganttpanel').setReadOnly(!0);Deft.Chain.sequence(e).then({success:function(f){var b;for(var e=0,g=f.length;e<g;e++){if(b==null){b=f[e]}else {b.isError=b.isError||f[e].isError;if(f[e].message!='OK'){b.message=f[e].message}b.rows=b.rows.concat(f[e].rows)}}if(b.isError==!1){b.success=!0;if(c=='WEEKLY'){a.setTasksUpdatedValues(b,'WeeklyStartDate','WeeklyEndDate')}else {if(c=='MONTHLY'){a.setTasksUpdatedValues(b,'MonthlyStartDate','MonthlyEndDate')}else {if(c=='MAIN'){a.setTasksUpdatedValues(b,'BaselineStartDate','BaselineEndDate',!0)}else {if(a.historyBaseLinesUpdated==null){a.historyBaseLinesUpdated=[]}a.historyBaseLinesUpdated.push(b.newBasline);a.baeslineAdded=!0}}}d.viewModel.set('readOnlyMode',!1);d.down('ganttpanel').setReadOnly(!1)}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}},failure:function(d){var e=d[0];var b=Ext.JSON.encode(e);a.onSync(b,{});if(errback){errback.apply(scope,arguments)}}}).always(function(){}).done()}},setTasksUpdatedValues:function(d,a,b,c){var e=this;d.rows.forEach(function(f){var g=e.taskStore.store.byIdMap[f.Id];g.beginEdit();g.data[a]=c?new Date(f[a]):f[a];g.data[b]=c?new Date(f[b]):f[b];g.endEdit()})},deleteBaseLine:function(e){var a=this;var d=e.baseLineId;var a=this;var b=Ext.create('Deft.Deferred');var c={className:'GanttManagementRequest',actionName:'deleteBaseline',projectId:a.projectId,baseline:d};a.setRequestParams(c);a.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(a){if(a.isError==!1){}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+a.message+'</span>',width:200})}b.resolve(a)},function(a){console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+a.message+'</span>',width:200});b.reject(a)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return b.promise},changeSelectedBaseline:function(g){var a=this;var h=g.baselineId;var d=a.getAllNonVirtualTasks();var e=100;var c=[];var f=0;while(f<d.length/e){c.push(function(){var b={tasks:{rows:[],deleted:[]}};b.tasks.rows=d.splice(0,e);return a.sendBulk({'className':'GanttManagementRequest',actionName:'changeSelectedBaseline',baseline:h,projectId:a.projectId,ganttStore:b})});f++}var i={title:null,message:a.L('Loading'),closable:!1,wait:!0,modal:!1,minWidth:this.minProgressWidth,waitConfig:null};var b=Ext.ComponentQuery.query('advanced-viewport')[0];b.viewModel.set('readOnlyMode',!0);b.down('ganttpanel').setReadOnly(!0);Deft.Chain.sequence(c).then({success:function(e){var c;for(var d=0,f=e.length;d<f;d++){if(c==null){c=e[d]}else {c.isError=c.isError||e[d].isError;if(e[d].message!='OK'){c.message=e[d].message}}}if(c.isError==!1){c.success=!0;c.rows.forEach(function(b){var c=a.taskStore.store.byIdMap[b.Id];c.data.BaseLinePlanedStartDate=b.BaseLinePlanedStartDate;c.data.BaseLinePlanedEndDate=b.BaseLinePlanedEndDate});Ext.ComponentQuery.query('cga-gantt')[0].normalGrid.view.refresh();a.newSelectedBaseline=g;a.selectedBaseLineChanged=!0;b.viewModel.set('readOnlyMode',!1);b.down('ganttpanel').setReadOnly(!1)}else {console.error({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200})}},failure:function(c){var d=c[0];var b=Ext.JSON.encode(d);a.onSync(b,{});if(errback){errback.apply(scope,arguments)}}}).always(function(){}).done()},getAllNonVirtualTasks:function(){var a=this.taskStore.store.getModel().getFieldsMap();var b=[];this.taskStore.store.getRootNode().cascadeBy(function(c){if(c.data.isVirtual!=!0&&c.isRoot()!=!0&&c.data.Id.match(/[a-zA-Z0-9]{18}|[a-zA-Z0-9]{15}/)){var d={};for(field in a){if(a[field].persist==!0){if(a[field].type=='date'&&c.data[field]!=null&&a[field].dateFormat!=null){d[field]=Ext.Date.format(c.data[field],a[field].dateFormat)}else {d[field]=c.data[field]}}}b.push(d)}});return b}},1,0,0,0,['cga-advanced-crudmanager'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.store,'CrudManager'],0);Ext.cmd.derive('Ext.mixin.Responsive',Ext.Mixin,function(a){return {mixinConfig:{id:'responsive',after:{destroy:'destroy'}},config:{responsiveConfig:{$value:undefined,merge:function(c,d,g,f){if(!c){return d}var e=d?Ext.Object.chain(d):{},b;for(b in c){if(!f||!(b in e)){e[b]={fn:null,config:c[b]}}}return e}},responsiveFormulas:{$value:0,merge:function(c,d,e,b){return this.mergeNew(c,d,e,b)}}},destroy:function(){a.unregister(this);this.callParent()},privates:{statics:{active:!1,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){a.active=!0;a.updateContext();Ext.on('resize',a.onResize,a)},deactivate:function(){a.active=!1;Ext.un('resize',a.onResize,a)},notify:function(){var b=a.all,e=a.context,d=Ext.GlobalEvents,f=a.timer,c;if(f){a.timer=null;Ext.Function.cancelAnimationFrame(f)}a.updateContext();Ext.suspendLayouts();d.fireEvent('beforeresponsiveupdate',e);for(c in b){b[c].setupResponsiveContext()}d.fireEvent('beginresponsiveupdate',e);for(c in b){b[c].updateResponsiveState()}d.fireEvent('responsiveupdate',e);Ext.resumeLayouts(!0)},onResize:function(){if(!a.timer){a.timer=Ext.Function.requestAnimationFrame(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},processConfig:function(c,d,b){var g=d&&d[b],f=c.config,h,e;if(g){e=c.getConfigurator();h=e.configs[b];f[b]=h.merge(g,f[b],c)}},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var e=Ext.Element,d=e.getViewportWidth(),c=e.getViewportHeight(),b=a.context;b.width=d;b.height=c;b.tall=d<c;b.wide=!b.tall;b.landscape=b.portrait=!1;if(!b.platform){b.platform=Ext.platformTags}b[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(f){var c=f.prototype,e=c.responsiveConfig,d=c.responsiveFormulas,b;if(e||d){b={};if(e){delete c.responsiveConfig;b.responsiveConfig=e}if(d){delete c.responsiveFormulas;b.responsiveFormulas=d}f.getConfigurator().add(b)}},applyResponsiveConfig:function(b){for(var c in b){b[c].fn=Ext.createRuleFn(c)}return b},applyResponsiveFormulas:function(c){var e={},b,d;if(c){for(d in c){if(Ext.isString(b=c[d])){b=Ext.createRuleFn(b)}e[d]=b}}return e},getResponsiveState:function(){var f=a.context,c=this.getResponsiveConfig(),e={},b,d;if(c){for(d in c){b=c[d];if(b.fn.call(this,f)){Ext.merge(e,b.config)}}}return e},setupResponsiveContext:function(){var b=this.getResponsiveFormulas(),d=a.context,c;if(b){for(c in b){d[c]=b[c].call(this,d)}}},transformInstanceConfig:function(c){var d=this,b;a.register(d);if(c){a.processConfig(d,c,'responsiveConfig');a.processConfig(d,c,'responsiveFormulas')}d.setupResponsiveContext();b=d.getResponsiveState();if(c){b=Ext.merge({},c,b);delete b.responsiveConfig;delete b.responsiveFormulas}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}},0,0,0,0,0,0,[Ext.mixin,'Responsive'],0);Ext.cmd.derive('Ext.plugin.Responsive',Ext.mixin.Responsive,{pluginId:'responsive',isPlugin:!0,constructor:function(c){var a=this,b=c.cmp,d=Ext.apply({responsiveConfig:b.responsiveConfig,responsiveFormulas:b.responsiveFormulas},c);delete d.cmp;a.cmp=b;a.initConfig(d);if(a.transformed){b.setConfig(a.transformed);a.transformed=null}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(c){var a=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,c);if(a.ptype){a=Ext.apply({},a);delete a.ptype}this.transformed=a;var b=Ext.apply({},c);delete b.ptype;delete b.responsiveConfig;delete b.responsiveFormulas;return b},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}},1,0,0,0,['plugin.responsive'],0,[Ext.plugin,'Responsive'],0);Ext.cmd.derive('Ext.plugin.Viewport',Ext.plugin.Responsive,{setCmp:function(a){this.cmp=a;if(a&&!a.isViewport){this.decorate(a);if(a.renderConfigs){a.flushRenderConfigs()}a.setupViewport()}},statics:{decorate:function(a){Ext.applyIf(a.prototype||a,{ariaRole:'application',viewportCls:'x-viewport'});Ext.override(a,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent();this.setupViewport()},getSizeModel:function(){var b=Ext.layout.SizeModel.configured;return b.pairsByHeightOrdinal[b.ordinal]},handleViewportResize:function(){var b=this,c=Ext.dom.Element,e=c.getViewportWidth(),d=c.getViewportHeight();if(e!==b.width||d!==b.height){b.setSize(e,d)}},setupViewport:function(){var b=this,c=document.body,d=Ext.scroll.DomScroller;if(d.document){d.document=d.document.destroy()}if(!c.id){c.id=b.id}c.setAttribute('data-componentid',b.id);if(!b.ariaStaticRoles[b.ariaRole]){c.setAttribute('role',b.ariaRole)}c=b.el=Ext.getBody();Ext.fly(document.documentElement).addCls(b.viewportCls);c.setHeight=c.setWidth=Ext.emptyFn;c.dom.scroll='no';b.allowDomMove=!1;b.renderTo=c;if(Ext.supports.Touch){b.addMeta('apple-mobile-web-app-capable','yes')}Ext.getScrollbarSize();b.width=b.height=undefined;b.initialViewportHeight=Ext.Element.getViewportHeight();b.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(b){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([b])},onRender:function(){var b=this;b.callParent(arguments);b.width=b.initialViewportWidth;b.height=b.initialViewportHeight;b.initialViewportWidth=b.initialViewportHeight=null;if(Ext.supports.TouchEvents){b.mon(Ext.getDoc(),{touchmove:function(b){b.preventDefault()},translate:!1,delegated:!1})}},initInheritedState:function(d,e){var b=this,c=Ext.rootInheritedState;if(d!==c){b.initInheritedState(b.inheritedState=c,b.inheritedStateInner=Ext.Object.chain(c))}else {b.callParent([d,e])}},beforeDestroy:function(){var b=this,d=Ext.rootInheritedState,c;for(c in d){if(c!=='rtl'){delete d[c]}}b.removeUIFromElement();b.el.removeCls(b.baseCls);Ext.fly(document.body.parentNode).removeCls(b.viewportCls);b.callParent()},addMeta:function(d,c){var b=document.createElement('meta');b.setAttribute('name',d);b.setAttribute('content',c);Ext.getHead().appendChild(b)},privates:{applyTargetCls:function(b){this.el.addCls(b)},disableTabbing:function(){var b=this.el;if(b){b.saveTabbableState({skipSelf:!0})}},enableTabbing:function(){var b=this.el;if(b){b.restoreTabbableState(!0)}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,['plugin.viewport'],0,[Ext.plugin,'Viewport'],function(a){a.prototype.decorate=a.decorate});Ext.cmd.derive('Ext.container.Viewport',Ext.container.Container,{alternateClassName:'Ext.Viewport',ariaRole:'application',privates:{updateResponsiveState:function(){this.handleViewportResize();this.mixins.responsive.updateResponsiveState.call(this)}}},0,['viewport'],['component','box','container','viewport'],{'component':!0,'box':!0,'container':!0,'viewport':!0},['widget.viewport'],[[Ext.mixin.Responsive.prototype.mixinId||Ext.mixin.Responsive.$className,Ext.mixin.Responsive]],[Ext.container,'Viewport',Ext,'Viewport'],function(){Ext.plugin.Viewport.decorate(this)});Ext.cmd.derive('Ext.app.domain.View',Ext.app.EventDomain,{isInstance:!0,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(c,b,d){var a=!1;if(b==='#'){a=d===c.getController()}else {a=c.is(b)}return a},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,'View'],0);Ext.cmd.derive('Ext.app.ViewController',Ext.app.BaseController,{isViewController:!0,factoryConfig:{type:'controller'},config:{closeViewAction:'destroy'},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var b=this.getView(),a;if(b){a=this.getCloseViewAction();b[a]()}},control:function(a,c){var b=a;if(Ext.isString(a)){b={};b[a]=c}this.compDomain.listen(b,this)},listen:function(a,c){var b=a.component;if(b){a=Ext.apply({},a);delete a.component;this.control(b)}this.callParent([a,c])},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(e,d){var a=this.view,c=!1,b=arguments;if(a){if(a!==d){b=Ext.Array.slice(b);b.splice(1,0,a)}c=a.fireEvent.apply(a,b)}return c},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,'controller-'))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,'ViewController'],0);Ext.cmd.derive('Ext.grid.CellContext',Ext.Base,{isCellContext:!0,constructor:function(a){this.view=a},setPosition:function(a,c){var b=this;if(arguments.length===1){if(a.length){c=a[0];a=a[1]}else {if(a.isCellContext){return b.setAll(a.view,a.rowIdx,a.colIdx,a.record,a.columnHeader)}else {if(a.view){b.view=a.view}c=a.column;a=a.row}}}b.setRow(a);b.setColumn(c);return b},setAll:function(f,d,c,e,b){var a=this;a.view=f;a.rowIdx=d;a.colIdx=c;a.record=e;a.column=b;return a},setRow:function(a){var b=this,c=b.view.dataSource;if(a!==undefined){if(typeof a==='number'){b.rowIdx=Math.max(Math.min(a,c.getCount()-1),0);b.record=c.getAt(a)}else {if(a.isModel){b.record=a;b.rowIdx=c.indexOf(a)}else {if(a.tagName||a.isElement){b.record=b.view.getRecord(a);b.rowIdx=c.indexOf(b.record)}}}}return b},setColumn:function(a){var b=this,c=b.view.getVisibleColumnManager();if(a!==undefined){if(typeof a==='number'){b.colIdx=a;b.column=c.getHeaderAtIndex(a)}else {if(a.isHeader){b.column=a;b.colIdx=c.indexOf(a)}}}return b},getCell:function(a){return this.view.getCellByPosition(this,a)},getRow:function(b){var a=this.view.getRow(this.record);return b?a:Ext.get(a)},getNode:function(b){var a=this.view.getNode(this.record);return b?a:Ext.get(a)},isEqual:function(a){return a&&a.isCellContext&&a.record===this.record&&a.column===this.column},clone:function(){var a=this,b=new a.self(a.view);b.rowIdx=a.rowIdx;b.colIdx=a.colIdx;b.record=a.record;b.column=a.column;return b},privates:{isFirstColumn:function(){var a=this.getCell(!0);if(a){return !a.previousSibling}},isLastColumn:function(){var a=this.getCell(!0);if(a){return !a.nextSibling}},getLastColumnIndex:function(){var a=this.getRow(!0);if(a){return a.lastChild.cellIndex}return -1},navigate:function(c){var a=this,b=a.view.getVisibleColumnManager().getColumns();switch(c){case -1:do{if(!a.colIdx){a.colIdx=b.length-1}else {a.colIdx--}a.setColumn(a.colIdx)}while(!a.getCell(!0));break;case 1:do{if(a.colIdx>=b.length){a.colIdx=0}else {a.colIdx++}a.setColumn(a.colIdx)}while(!a.getCell(!0));break;}}},statics:{compare:function(a,b){return a.rowIdx-b.rowIdx||a.colIdx-b.colIdx}}},1,0,0,0,0,0,[Ext.grid,'CellContext'],0);Ext.cmd.derive('Ext.view.TableLayout',Ext.layout.component.Auto,{type:'tableview',beginLayout:function(a){var b=this,e=b.owner,f=e.ownerGrid,c=e.lockingPartner,d=a.context;a.doSyncRowHeights=c&&c.grid.isVisible()&&f.syncRowHeight;if(!b.columnFlusherId){b.columnFlusherId=b.id+'-columns';b.rowHeightFlusherId=b.id+'-rows'}if(b.owner.bufferedRenderer){b.owner.bufferedRenderer.beforeTableLayout(a)}Ext.layout.component.Auto.prototype.beginLayout.call(this,a);if(a.doSyncRowHeights){if(!a.lockingPartnerContext){(a.lockingPartnerContext=d.getCmp(c)).lockingPartnerContext=a}a.rowHeightSynchronizer=b.owner.syncRowHeightBegin()}(a.headerContext=d.getCmp(b.headerCt)).viewContext=a},beginLayoutCycle:function(a,b){Ext.layout.component.Auto.prototype.beginLayoutCycle.call(this,a,b);if(a.syncRowHeights){a.target.syncRowHeightClear(a.rowHeightSynchronizer);a.syncRowHeights=!1}},calculate:function(a){var b=this,o=a.context,p=a.lockingPartnerContext,q=a.headerContext,g=a.ownerCtContext,k=b.owner,f=q.getProp('columnsChanged'),c=a.state,h,l,d,e,n=k.body.dom,m,j,i;if(!k.all.getCount()&&(!n||!k.body.child('table'))){a.setProp('viewOverflowY',!1);Ext.layout.component.Auto.prototype.calculate.call(this,a);return}if(f===undefined){b.done=!1;return}if(f){if(!(h=c.columnFlusher)){o.queueFlush(c.columnFlusher=h={ownerContext:a,columnsChanged:f,layout:b,id:b.columnFlusherId,flush:b.flushColumnWidths})}if(!h.flushed){b.done=!1;return}}if(a.doSyncRowHeights){if(!(e=c.rowHeightFlusher)){if(!(d=c.rowHeights)){c.rowHeights=d=a.rowHeightSynchronizer;b.owner.syncRowHeightMeasure(d);a.setProp('rowHeights',d)}if(!(l=p.getProp('rowHeights'))){b.done=!1;return}o.queueFlush(c.rowHeightFlusher=e={ownerContext:a,synchronizer:d,otherSynchronizer:l,layout:b,id:b.rowHeightFlusherId,flush:b.flushRowHeights})}if(!e.flushed){b.done=!1;return}}Ext.layout.component.Auto.prototype.calculate.call(this,a);if(!a.heightModel.shrinkWrap){i=!1;if(!g.heightModel.shrinkWrap){j=g.target.layout.getContainerSize(g);if(!j.gotHeight){b.done=!1;return}m=n.offsetHeight;i=m>j.height}a.setProp('viewOverflowY',i)}},measureContentHeight:function(e){var d=this.owner,b=d.body.dom,c=d.emptyEl,a=0;if(c){a+=c.offsetHeight}if(b){a+=b.offsetHeight}if(e.headerContext.state.boxPlan.tooNarrow){a+=Ext.getScrollbarSize().height}return a},flushColumnWidths:function(){var a=this,i=a.layout,d=a.ownerContext,g=a.columnsChanged,h=d.target,j=g.length,b,c,e,f;if(d.state.columnFlusher!==a){return}for(c=0;c<j;c++){if(!(b=g[c])){continue}e=b.props.width;h.body.select(h.getColumnSizerSelector(b.target)).setWidth(e);f=b.lastBox;if(f){f.width=e}}a.flushed=!0;if(!i.pending){d.context.queueLayout(i)}},flushRowHeights:function(){var a=this,c=a.layout,b=a.ownerContext;if(b.state.rowHeightFlusher!==a){return}b.target.syncRowHeightFinish(a.synchronizer,a.otherSynchronizer);a.flushed=!0;b.syncRowHeights=!0;if(!c.pending){b.context.queueLayout(c)}},finishedLayout:function(a){var b=this,c=Ext.fly(b.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.call(this,a);if(c){c.setWidth(a.headerContext.props.contentWidth)}if(b.owner.bufferedRenderer){b.owner.bufferedRenderer.afterTableLayout(a)}}},0,0,0,0,['layout.tableview'],0,[Ext.view,'TableLayout'],0);Ext.cmd.derive('Ext.grid.locking.RowSynchronizer',Ext.Base,{constructor:function(c,d){var b=this,a;b.view=c;b.rowEl=d;b.els={};b.add('data',c.rowSelector);for(a=c.rowTpl;a;a=a.nextTpl){if(a.beginRowSync){a.beginRowSync(b)}}},add:function(c,b){var a=Ext.fly(this.rowEl).down(b,!0);if(a){this.els[c]={el:a}}},finish:function(i){var d=this,f=d.els,j=i.els,e,h=0,g=0,b,c,a;for(c in f){e=j[c];a=e?e.height:0;b=a-f[c].height;if(b>0){h+=b;Ext.fly(f[c].el).setHeight(a)}else {g-=b}}a=i.rowHeight+g;if(Ext.isIE9&&d.view.ownerGrid.rowLines){a--}if(d.rowHeight+h<a){Ext.fly(d.rowEl).setHeight(a)}},measure:function(){var c=this,b=c.els,a;c.rowHeight=c.rowEl.offsetHeight;for(a in b){b[a].height=b[a].el.offsetHeight}},reset:function(){var b=this.els,a;this.rowEl.style.height='';for(a in b){b[a].el.style.height=''}}},1,0,0,0,0,0,[Ext.grid.locking,'RowSynchronizer'],0);Ext.cmd.derive('Ext.view.NodeCache',Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},destroy:function(){var a=this;if(!a.destroyed){a.el.destroy();a.el=a.view=null;a.destroyed=!0}a.callParent()},clear:function(e){var a=this,b=a.elements,c=a.statics().range,d;if(a.count&&e){if(c){c.setStartBefore(b[a.startIndex]);c.setEndAfter(b[a.endIndex]);c.deleteContents()}else {for(d in b){Ext.removeNode(b[d])}}}a.elements={};a.count=a.startIndex=0;a.endIndex=-1},fill:function(f,a,c){c=c||0;var d=this,g=d.elements={},b,e=f.length-c;if(!a){a=0}for(b=0;b<e;b++){g[a+b]=f[b+c]}d.startIndex=a;d.endIndex=a+e-1;d.count=e;return this},insert:function(c,f){var b=this,e=b.elements,a,d=f.length;if(b.count){if(c<b.count){for(a=b.endIndex+d;a>=c+d;a--){e[a]=e[a-d];e[a].setAttribute('data-recordIndex',a)}}b.endIndex=b.endIndex+d}else {b.startIndex=c;b.endIndex=c+d-1}for(a=0;a<d;a++,c++){e[c]=f[a];e[c].setAttribute('data-recordIndex',c)}b.count+=d},invoke:function(d,e){var a=this,c,b;d=Ext.dom.Element.prototype[d];for(b=a.startIndex;b<=a.endIndex;b++){c=a.item(b);if(c){d.apply(c,e)}}return a},item:function(a,c){var d=this.elements[a],b=null;if(d){b=c?this.elements[a]:this.el.attach(this.elements[a])}return b},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},moveBlock:function(c){var b=this,d=b.elements,g,f,e,a;if(!c){return}if(c<0){a=b.startIndex-1;f=b.endIndex;e=1}else {a=b.endIndex+1;f=b.startIndex;e=-1}b.startIndex+=c;b.endIndex+=c;do{a+=e;g=d[a+c]=d[a];g.setAttribute('data-recordIndex',a+c);if(a<b.startIndex||a>b.endIndex){delete d[a]}}while(a!==f);delete d[a]},getCount:function(){return this.count},slice:function(e,a){var d=this.elements,c=[],b;if(!a){a=this.endIndex}else {a=Math.min(this.endIndex,a-1)}for(b=e||this.startIndex;b<=a;b++){c.push(d[b])}return c},replaceElement:function(a,b,d){var e=this.elements,c=typeof a==='number'?a:this.indexOf(a);if(c>-1){b=Ext.getDom(b);if(d){a=e[c];a.parentNode.insertBefore(b,a);Ext.removeNode(a);b.setAttribute('data-recordIndex',c)}this.elements[c]=b}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},removeRange:function(g,c,j){var a=this,e=a.elements,i=[],d,b,h,f;if(c==null){c=a.endIndex+1}else {c=Math.min(a.endIndex+1,c+1)}if(g==null){g=a.startIndex}h=c-g;for(b=g,f=c;b<=a.endIndex;b++,f++){d=e[b];if(b<c){i.push(d);if(j){Ext.removeNode(d)}}if(f<=a.endIndex){d=e[b]=e[f];d.setAttribute('data-recordIndex',b)}else {delete e[b]}}a.count-=h;a.endIndex-=h;return i},removeElement:function(a,k){var b=this,i,f,h=b.elements,j,e,c=0,d,g;if(Ext.isArray(a)){i=a;a=[];e=i.length;for(c=0;c<e;c++){f=i[c];if(typeof f!=='number'){f=b.indexOf(f)}if(f>=b.startIndex&&f<=b.endIndex){a[a.length]=f}}Ext.Array.sort(a);e=a.length}else {if(a<b.startIndex||a>b.endIndex){return}e=1;a=[a]}for(d=g=a[0],c=0;d<=b.endIndex;d++,g++){if(c<e&&d===a[c]){g++;c++;if(k){Ext.removeNode(h[d])}}if(g<=b.endIndex&&g>=b.startIndex){j=h[d]=h[g];j.setAttribute('data-recordIndex',d)}else {delete h[d]}}b.endIndex-=e;b.count-=e},scroll:function(i,t,m){var b=this,e=b.view,p=e.store,c=b.elements,r=i.length,q=e.getNodeContainer(),k=e.hasListeners.itemremove,s=e.hasListeners.itemadd,h=b.statics().range,a,d,o,j,l,n,f,g;if(!i.length){return}if(t===-1){if(m){if(k){f=[];g=[]}n=b.endIndex-m+1;if(h){h.setStartBefore(c[n]);h.setEndAfter(c[b.endIndex]);h.deleteContents();for(a=n;a<=b.endIndex;a++){d=c[a];delete c[a];if(k){f.push(p.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}}else {for(a=n;a<=b.endIndex;a++){d=c[a];delete c[a];Ext.removeNode(d);if(k){f.push(p.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}}e.fireEvent('itemremove',f,n,g,e);b.endIndex-=m}if(i.length){l=e.bufferRender(i,b.startIndex-=r);j=l.children;for(a=0;a<r;a++){c[b.startIndex+a]=j[a]}q.insertBefore(l.fragment,q.firstChild);if(s){e.fireEvent('itemadd',i,b.startIndex,j)}}}else {if(m){if(k){f=[];g=[]}o=b.startIndex+m;if(h){h.setStartBefore(c[b.startIndex]);h.setEndAfter(c[o-1]);h.deleteContents();for(a=b.startIndex;a<o;a++){d=c[a];delete c[a];if(k){f.push(p.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}}else {for(a=b.startIndex;a<o;a++){d=c[a];delete c[a];Ext.removeNode(d);if(k){f.push(p.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}}e.fireEvent('itemremove',f,b.startIndex,g,e);b.startIndex=o}l=e.bufferRender(i,b.endIndex+1);j=l.children;for(a=0;a<r;a++){c[b.endIndex+=1]=j[a]}q.appendChild(l.fragment);if(s){e.fireEvent('itemadd',i,b.endIndex+1,j)}}b.count=b.endIndex-b.startIndex+1;return j},sumHeights:function(){var b=0,c=this.elements,a;for(a=this.startIndex;a<=this.endIndex;a++){b+=c[a].offsetHeight}return b}},1,0,0,0,0,0,[Ext.view,'NodeCache'],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)});Ext.cmd.derive('Ext.view.Table',Ext.view.View,{alternateClassName:'Ext.grid.View',isTableView:!0,config:{selectionModel:{type:'rowmodel'}},inheritableStatics:{normalSideEvents:['deselect','select','beforedeselect','beforeselect','selectionchange'],events:['blur','focus','move','resize','destroy','beforedestroy','boxready','afterrender','render','beforerender','removed','hide','beforehide','show','beforeshow','enable','disable','added','deactivate','beforedeactivate','activate','beforeactivate','cellkeydown','beforecellkeydown','cellmouseup','beforecellmouseup','cellmousedown','beforecellmousedown','cellcontextmenu','beforecellcontextmenu','celldblclick','beforecelldblclick','cellclick','beforecellclick','refresh','itemremove','itemadd','beforeitemupdate','itemupdate','viewready','beforerefresh','unhighlightitem','highlightitem','focuschange','containerkeydown','containercontextmenu','containerdblclick','containerclick','containermouseout','containermouseover','containermouseup','containermousedown','beforecontainerkeydown','beforecontainercontextmenu','beforecontainerdblclick','beforecontainerclick','beforecontainermouseout','beforecontainermouseover','beforecontainermouseup','beforecontainermousedown','itemkeydown','itemcontextmenu','itemdblclick','itemclick','itemmouseleave','itemmouseenter','itemmouseup','itemmousedown','rowclick','rowcontextmenu','rowdblclick','rowkeydown','rowmouseup','rowmousedown','rowkeydown','beforeitemkeydown','beforeitemcontextmenu','beforeitemdblclick','beforeitemclick','beforeitemmouseleave','beforeitemmouseenter','beforeitemmouseup','beforeitemmousedown','statesave','beforestatesave','staterestore','beforestaterestore','uievent','groupcollapse','groupexpand','scroll']},scrollable:!0,componentLayout:'tableview',baseCls:'x-grid-view',unselectableCls:'x-unselectable',firstCls:'x-grid-cell-first',lastCls:'x-grid-cell-last',itemCls:'x-grid-item',selectedItemCls:'x-grid-item-selected',selectedCellCls:'x-grid-cell-selected',focusedItemCls:'x-grid-item-focused',overItemCls:'x-grid-item-over',altRowCls:'x-grid-item-alt',dirtyCls:'x-grid-dirty-cell',rowClsRe:new RegExp('(?:^|\\s*)x-grid-item-alt(?:\\s+|$)','g'),cellRe:new RegExp('x-grid-cell-([^\\s]+)(?:\\s|$)',''),positionBody:!0,positionCells:!1,stripeOnUpdate:null,actionableMode:!1,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:'rowgroup',rowAriaRole:'row',cellAriaRole:'gridcell',tpl:['{%','view = values.view;','if (!(columns = values.columns)) {','columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();','}','values.fullWidth = 0;','for (i = 0, len = columns.length; i < len; i++) {','column = columns[i];','values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);','}','tableCls=values.tableCls=[];','%}','<div class="x-grid-item-container" role="presentation" style="width:{fullWidth}px">','{[view.renderTHead(values, out, parent)]}','{%','view.renderRows(values.rows, values.columns, values.viewStartIndex, out);','%}','{[view.renderTFoot(values, out, parent)]}','</div>','{% ','view = columns = column = null;','%}',{definitions:'var view, tableCls, columns, i, len, column;',priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">','{%','this.nextTpl.applyOut(values, out, parent)','%}','</table>',{priority:9999}],rowTpl:['{%','var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";','%}','<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%','parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)','%}','</tpl>','</tr>',{priority:0}],cellTpl:['<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ','{cellInnerAttr:attributes}>{value}</div>','</td>',{priority:0}],refreshSelmodelOnRefresh:!1,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:['x-grid-cell x-grid-td']},constructor:function(a){if(a.grid.isTree){a.baseCls='x-tree-view'}Ext.view.View.prototype.constructor.call(this,a)},hasVariableRowHeight:function(b){var a=this;return a.variableRowHeight||a.store.isGrouped()||a.getVisibleColumnManager().hasVariableRowHeight()||!b&&a.lockingPartner&&a.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var a=this;if(a.columnLines){a.addCls(a.grid.colLinesCls)}if(a.rowLines){a.addCls(a.grid.rowLinesCls)}a.body=new Ext.dom.Fly();a.body.id=a.id+'gridBody';if(!a.trackOver){a.overItemCls=null}a.headerCt.view=a;a.grid.view=a;a.initFeatures(a.grid);a.itemSelector=a.getItemSelector();a.all=new Ext.view.NodeCache(a);Ext.view.View.prototype.initComponent.call(this)},applySelectionModel:function(a,f){var d=this,b=d.ownerGrid,e=a.type,c=d.disableSelection||b.disableSelection;if(!f){if(!(a&&a.isSelectionModel)){a=b.selModel||a}}if(a){if(a.isSelectionModel){a.allowDeselect=b.allowDeselect||a.selectionMode!=='SINGLE';a.locked=c}else {if(typeof a==='string'){a={type:a}}else {a.type=b.selType||a.selType||a.type||e}if(!a.mode){if(b.simpleSelect){a.mode='SIMPLE'}else {if(b.multiSelect){a.mode='MULTI'}}}a=Ext.Factory.selection(Ext.apply({allowDeselect:b.allowDeselect,locked:c},a))}}return a},updateSelectionModel:function(b,c){var a=this;if(c){c.un({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});Ext.destroy(a.selModelRelayer)}a.selModelRelayer=a.relayEvents(b,['selectionchange','beforeselect','beforedeselect','select','deselect','focuschange']);b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});a.selModel=b},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(c,h,j){var b=this,m=j>1,e=m&&document.createRange?document.createRange():null,g=m&&!e?document.createDocumentFragment():null,l=h,p=b.getGridColumns().length,k=p-1,r=(b.firstCls||b.lastCls)&&(h===0||h===p||c===0||c===k),f,i,q,n,d,a,o;if(b.rendered&&h!==c){q=b.el.query(b.rowSelector);for(f=0,n=q.length;f<n;f++){d=q[f];a=d.childNodes;if(r){if(a.length===1){Ext.fly(a[0]).addCls(b.firstCls);Ext.fly(a[0]).addCls(b.lastCls);continue}if(c===0){Ext.fly(a[0]).removeCls(b.firstCls);Ext.fly(a[1]).addCls(b.firstCls)}else {if(c===k){Ext.fly(a[k]).removeCls(b.lastCls);Ext.fly(a[k-1]).addCls(b.lastCls)}}if(h===0){Ext.fly(a[0]).removeCls(b.firstCls);Ext.fly(a[c]).addCls(b.firstCls)}else {if(h===p){Ext.fly(a[k]).removeCls(b.lastCls);Ext.fly(a[c]).addCls(b.lastCls)}}}if(m){if(e){e.setStartBefore(a[c]);e.setEndAfter(a[c+j-1]);g=e.extractContents()}else {for(i=0;i<j;i++){g.appendChild(a[c])}}d.insertBefore(g,a[l]||null)}else {d.insertBefore(a[c],a[l]||null)}}o=b.el.query('colgroup');for(f=0,n=o.length;f<n;f++){d=o[f];if(m){if(e){e.setStartBefore(d.childNodes[c]);e.setEndAfter(d.childNodes[c+j-1]);g=e.extractContents()}else {for(i=0;i<j;i++){g.appendChild(d.childNodes[c])}}d.insertBefore(g,d.childNodes[l]||null)}else {d.insertBefore(d.childNodes[c],d.childNodes[l]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:'el'})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(b,a){var c=this.getRow(b);if(typeof a==='number'){a=this.getHeaderAtIndex(a)}return Ext.fly(c).down(a.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return !0}})}},initFeatures:function(e){var a=this,d,c,b,f;a.tpl=Ext.XTemplate.getTpl(this,'tpl');a.rowTpl=Ext.XTemplate.getTpl(this,'rowTpl');a.addRowTpl(Ext.XTemplate.getTpl(this,'outerRowTpl'));a.cellTpl=Ext.XTemplate.getTpl(this,'cellTpl');a.featuresMC=new Ext.util.MixedCollection();c=a.features=a.constructFeatures();f=c?c.length:0;for(d=0;d<f;d++){b=c[d];b.view=a;b.grid=e;a.featuresMC.add(b);b.init(e)}},renderTHead:function(c,f,e){var b=c.view.headerFns,d,a;if(b){for(a=0,d=b.length;a<d;++a){b[a].call(this,c,f,e)}}},addHeaderFn:function(b){var a=this.headerFns;if(!a){a=this.headerFns=[]}a.push(b)},renderTFoot:function(c,f,e){var b=c.view.footerFns,d,a;if(b){for(a=0,d=b.length;a<d;++a){b[a].call(this,c,f,e)}}},addFooterFn:function(b){var a=this.footerFns;if(!a){a=this.footerFns=[]}a.push(b)},addTpl:function(a){return this.insertTpl('tpl',a)},addRowTpl:function(a){return this.insertTpl('rowTpl',a)},addCellTpl:function(a){return this.insertTpl('cellTpl',a)},insertTpl:function(d,a){var e=this,b,c;if(a.isTemplate){a=Ext.Object.chain(a)}else {a=new Ext.XTemplate('{%this.nextTpl.applyOut(values, out, parent);%}',a)}for(b=e[d];a.priority<b.priority;b=b.nextTpl){c=b}if(c){c.nextTpl=a}else {e[d]=a}a.nextTpl=b;return a},tplApplyOut:function(b,c,a){if(this.before){if(this.before(b,c,a)===!1){return}}this.nextTpl.applyOut(b,c,a);if(this.after){this.after(b,c,a)}},constructFeatures:function(){var f=this,c=f.features,a,d,b=0,e;if(c){d=[];e=c.length;for(;b<e;b++){a=c[b];if(!a.isFeature){a=Ext.create('feature.'+a.ftype,a)}d[b]=a}}return d},beforeRender:function(){Ext.view.View.prototype.beforeRender.call(this);if(!this.enableTextSelection){this.protoEl.unselectable()}},getElConfig:function(){var a=Ext.view.View.prototype.getElConfig.call(this);delete a['aria-hidden'];delete a['aria-disabled'];return a},onBindStore:function(c){var b=this,a=b.bufferedRenderer;if(a&&a.store!==c){a.bindStore(c)}if(b.all&&b.all.getCount()){if(a){a.setBodyTop(0)}b.clearViewEl()}Ext.view.View.prototype.onBindStore.apply(this,arguments)},getStoreListeners:function(){var a=Ext.view.View.prototype.getStoreListeners.call(this);if(this.bufferedRenderer){delete a.clear}a.beforepageremove=this.beforePageRemove;return a},beforePageRemove:function(c,a){var d=this.all,b=c.getPageSize();if(d.startIndex>=(a-1)*b&&d.endIndex<=a*b-1){c.get(a);return !1}},onViewScroll:function(a,b,c){if(!this.ignoreScroll){Ext.view.View.prototype.onViewScroll.call(this,a,b,c)}},createRowElement:function(e,f,d){var a=this,c=a.renderBuffer,b=a.collectData([e],f);b.columns=d;a.tpl.overwrite(c,b);a.cleanupData();return Ext.fly(c).down(a.getNodeContainerSelector(),!0).firstChild},bufferRender:function(e,f){var c=this,a=c.renderBuffer,b,d=document.createRange?document.createRange():null;c.tpl.overwrite(a,c.collectData(e,f));c.cleanupData();Ext.fly(a).saveTabbableState({skipSelf:!0,includeHidden:!0});a=Ext.fly(a).down(c.getNodeContainerSelector(),!0);if(d){d.selectNodeContents(a);b=d.extractContents()}else {b=document.createDocumentFragment();while(a.firstChild){b.appendChild(a.firstChild)}}return {fragment:b,children:Ext.Array.toArray(b.childNodes)}},collectData:function(c,b){var a=this;a.rowValues.view=a;a.tableValues.view=a;a.tableValues.rows=c;a.tableValues.columns=null;a.tableValues.viewStartIndex=b;a.tableValues.touchScroll=a.touchScroll;a.tableValues.tableStyle='width:'+a.headerCt.getTableWidth()+'px';return a.tableValues},cleanupData:function(){var a=this.tableValues;a.view=a.columns=a.rows=this.rowValues.view=null},refreshSize:function(c){var a=this,b=a.getBodySelector();if(b){a.body.attach(a.el.down(b,!0))}if(!a.hasLoadingHeight){Ext.suspendLayouts();Ext.view.View.prototype.refreshSize.apply(this,arguments);if(c||a.hasVariableRowHeight()&&a.dataSource.getCount()){a.grid.updateLayout()}Ext.resumeLayouts(!0)}},clearViewEl:function(g){var a=this,b=a.all,i=a.getStore(),d,c,f,h=b.slice(),e=[];if(a.hasListeners.itemremove){for(d=b.startIndex;d<=b.endIndex;d++){e.push(i.getByInternalId(b.item(d,!0).getAttribute('data-recordId')))}}a.fireEvent('itemremove',e,b.startIndex,h,a);Ext.view.View.prototype.clearViewEl.call(this);c=Ext.fly(a.getNodeContainer());if(c&&!g){f=a.getTargetEl();if(f.dom!==c.dom){c.destroy()}}},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute('data-boundView'))}},getRecord:function(a){if(this.store.destroyed){return}if(a.isModel){return a}a=this.getNode(a);if(a){return this.dataSource.getByInternalId(a.getAttribute('data-recordId'))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},indexOfRow:function(a){var c=this.dataSource,b;if(a.isCollapsedPlaceholder){b=c.indexOfPlaceholder(a)}else {b=c.indexOf(a)}return b},renderRows:function(e,g,d,h){var b=this,a=b.rowValues,f=e.length,c;a.view=b;a.columns=g;a.rowRole=b.rowAriaRole;b.cellValues.cellRole=b.cellAriaRole;for(c=0;c<f;c++,d++){a.itemClasses.length=a.rowClasses.length=0;b.renderRow(e[c],d,h)}a.view=a.columns=a.record=null},renderColumnSizer:function(f,d){var b=f.columns||this.getGridColumns(),g=b.length,a,c,e;d.push('<colgroup role="presentation">');for(a=0;a<g;a++){c=b[a];e=c.cellWidth?c.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;d.push('<col role="presentation" class="','x-','grid-cell-',b[a].getItemId(),'" style="width:'+e+'px">')}d.push('</colgroup>')},renderRow:function(c,e,j){var a=this,k=e===-1,h=a.selectionModel,b=a.rowValues,d=b.itemClasses,g=b.rowClasses,l=a.itemCls,f,i=a.rowTpl;b.rowAttr={};b.record=c;b.recordId=c.internalId;b.recordIndex=a.store.indexOf(c);b.rowIndex=e;b.rowId=a.getRowId(c);b.itemCls=b.rowCls='';if(!b.columns){b.columns=a.ownerCt.getVisibleColumnManager().getColumns()}d.length=g.length=0;if(!k){d[0]=l;if(!a.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(c)){d.push(a.selectedItemCls)}}if(a.stripeRows&&e%2!==0){d.push(a.altRowCls)}if(a.getRowClass){f=a.getRowClass(c,e,null,a.dataSource);if(f){g.push(f)}}}if(j){i.applyOut(b,j,a.tableValues)}else {return i.apply(b,a.tableValues)}},renderCell:function(b,f,j,n,m,p){var c=this,l,h=c.selectionModel,a=c.cellValues,d=a.classes,k=f.data[b.dataIndex],o=c.cellTpl,g,e,i=c.navigationModel.getPosition();a.record=f;a.column=b;a.recordIndex=j;a.rowIndex=n;a.columnIndex=a.cellIndex=m;a.align=b.align;a.innerCls=b.innerCls;a.tdCls=a.tdStyle=a.tdAttr=a.style='';a.unselectableAttr=c.enableTextSelection?'':'unselectable="on"';d[1]=b.getCellId();e=2;if(b.renderer&&b.renderer.call){l=c.ownerCt.columnManager.getHeaderIndex(b);g=b.renderer.call(b.usingDefaultRenderer?b:b.scope||c.ownerCt,k,a,f,j,l,c.dataSource,c);if(a.css){f.cssWarning=!0;a.tdCls+=' '+a.css;a.css=null}if(a.tdCls){d[e++]=a.tdCls}}else {g=k}a.value=g==null||g===''?b.emptyCellText:g;if(b.tdCls){d[e++]=b.tdCls}if(c.markDirty&&f.dirty&&f.isModified(b.dataIndex)){d[e++]=c.dirtyCls}if(b.isFirstVisible){d[e++]=c.firstCls}if(b.isLastVisible){d[e++]=c.lastCls}if(!c.enableTextSelection){d[e++]=c.unselectableCls}if(h&&(h.isCellModel||h.isSpreadsheetModel)&&h.isCellSelected(c,j,b)){d[e++]=c.selectedCellCls}if(i&&i.record.id===f.id&&i.column===b){d[e++]=c.focusedItemCls}d.length=e;a.tdCls=d.join(' ');o.applyOut(a,p);a.column=a.record=null},getRow:function(a){var b;if(!a&&a!==0||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,!0)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,!0)}if(a.isModel){return this.getRowByRecord(a)}b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(a){return this.id+'-record-'+a.internalId},constructRowId:function(a){return this.id+'-record-'+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,!1)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,!0)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),!1)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),!0)},getRowFromItem:function(c){var b=Ext.getDom(c).tBodies[0].childNodes,d=b.length,a;for(a=0;a<d;a++){if(Ext.fly(b[a]).is(this.rowSelector)){return b[a]}}},retrieveNode:function(c,b){var a=this.el.getById(c,!0);if(b&&a){return Ext.fly(a).down(this.rowSelector,!0)}return a},updateIndexes:Ext.emptyFn,bodySelector:'div.x-grid-item-container',nodeContainerSelector:'div.x-grid-item-container',itemSelector:'table.x-grid-item',rowSelector:'tr.x-grid-row',cellSelector:'td.x-grid-cell',sizerSelector:'.x-grid-cell',innerSelector:'div.x-grid-cell-inner',getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+'-'+b.getItemId();return 'td'+a+',col'+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+' '+this.innerSelector},addRowCls:function(b,c){var a=this.getRow(b);if(a){Ext.fly(a).addCls(c)}},removeRowCls:function(b,c){var a=this.getRow(b);if(a){Ext.fly(a).removeCls(c)}},onRowSelect:function(c){var a=this,b;a.addItemCls(c,a.selectedItemCls);b=a.getRow(c);if(b){b.setAttribute('aria-selected',!0)}if(Ext.isIE8){a.repaintBorder(c+1)}},onRowDeselect:function(c){var a=this,b;a.removeItemCls(c,a.selectedItemCls);b=a.getRow(c);if(b){b.removeAttribute('aria-selected')}if(Ext.isIE8){a.repaintBorder(c+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls);a.dom.setAttribute('aria-selected',!0)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,!0);if(a){Ext.fly(a).removeCls(this.selectedCellCls);a.removeAttribute('aria-selected')}},getCellInclusive:function(a,d){if(a){var c=this.getRow(a.row),b=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(b&&c){return Ext.fly(c).down(this.getCellSelector(b),d)}}return !1},getCellByPosition:function(a,e){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),c=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(c&&d){return Ext.fly(d).down(b.getCellSelector(c),e)}}return !1},onFocusEnter:function(e){var a=this,f=e.fromComponent,i=a.getNavigationModel(),b,j=a.bufferedRenderer,d,g,c,h;if(a.actionableMode){return}e=e.event;if(!a.cellFocused&&a.all.getCount()&&a.dataSource.getCount()){c=e.getTarget();if(Ext.fly(c).is(a.getCellSelector())){b=(new Ext.grid.CellContext(a)).setPosition(a.getRecord(c),a.getHeaderByCell(c))}else {if(c&&Ext.fly(c).isFocusable()&&a.el.contains(c)&&c!==a.el.dom){a.ownerGrid.setActionableMode(!0,(new Ext.grid.CellContext(a)).setPosition(a.getRecord(c),a.getHeaderByCell(Ext.fly(c).up(a.getCellSelector()))));Ext.fly(c).focus()}else {b=a.lastFocused;if(b){h=a.getScrollable();if(!h||h.isInView(b.getRow()).y){d=b.record}}else {b=(new Ext.grid.CellContext(a.isNormalView&&a.lockingPartner.grid.isVisible()?a.lockingPartner:a)).setColumn(0)}if(f&&f.isColumn&&f.getView()===a){b.view=a;b.setColumn(f)}if(!d){g=j?j.getFirstVisibleRowIndex():0;d=a.dataSource.getAt(g);while(d&&d.isNonData){g++;d=a.dataSource.getAt(g)}if(d){b.setRow(d)}else {b=null}}if(!b){e.stopEvent();a.el.focus();return}}}}if(b){i.setPosition(b,null,e,null,!0);a.cellFocused=!!i.getPosition();if(a.cellFocused){a.el.dom.setAttribute('tabIndex','-1');a.toggleChildrenTabbability(!1)}}Ext.Component.prototype.onFocusEnter.call(a,e)},onFocusLeave:function(b){var a=this,c=!a.lockingPartner||!b.toComponent||b.toComponent!==a.lockingPartner&&!a.lockingPartner.isAncestor(b.toComponent);if(!a.refreshing){if(a.cellFocused){if(c){a.getNavigationModel().setPosition(null,null,b.event,null,!0)}a.cellFocused=!1;a.focusEl=a.el;a.focusEl.dom.setAttribute('tabIndex',0)}if(c){if(a.ownerGrid.actionableMode){a.ownerGrid.setActionableMode(!1)}}Ext.Component.prototype.onFocusLeave.call(a,b)}},onRowFocus:function(b,d,c){var a=this;if(d){a.addItemCls(b,a.focusedItemCls);if(!c){a.focusRow(b)}}else {a.removeItemCls(b,a.focusedItemCls)}if(Ext.isIE8){a.repaintBorder(b+1)}},focusRow:function(d,b){var a=this,c=a.getFocusTask();if(b){c.delay(Ext.isNumber(b)?b:10,a.focusRow,a,[d,!1]);return}c.cancel();if(a.isVisible(!0)){a.getNavigationModel().setPosition(a.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(a,b){a=this.getRow(a);if(a){this.scrollElIntoView(a,!1,b)}},focusCell:function(b,c){var a=this,e,d=a.getFocusTask();if(c){d.delay(Ext.isNumber(c)?c:10,a.focusCell,a,[b,!1]);return}d.cancel();if(a.isVisible(!0)&&(e=a.getCellByPosition(b))){a.getNavigationModel().setPosition(b)}},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1&&b.getNode(a.record)){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(d,c,b){var a=this.getScrollable();if(a){a.scrollIntoView(d,c,b)}},syncRowHeightBegin:function(){var f=this,b=f.all,h=b.count,d=[],g=Ext.grid.locking.RowSynchronizer,a,c,e;for(a=0,c=b.startIndex;a<h;a++,c++){d[a]=e=new g(f,b.elements[c]);e.reset()}return d},syncRowHeightClear:function(b){var e=this,c=e.all,d=c.count,a;for(a=0;a<d;a++){b[a].reset()}},syncRowHeightMeasure:function(b){var c=b.length,a;for(a=0;a<c;a++){b[a].measure()}},syncRowHeightFinish:function(c,d){var e=c.length,b=this.bufferedRenderer,a;for(a=0;a<e;a++){c[a].finish(d[a])}if(b){b.syncRowHeightsFinish()}},handleUpdate:function(I,d,y,B){y=y||Ext.data.Model.EDIT;var a=this,D=a.store.indexOf(d),m=a.rowTpl,x=a.markDirty,k=a.dirtyCls,v=y!==Ext.data.Model.EDIT,f=[],n=a.variableRowHeight,s=0,G=a.ownerCt,g=a.cellFly||(a.self.prototype.cellFly=new Ext.dom.Fly()),c,E,j,o,H,z,l,u,p,b,q,i,t,h,F,e,C,r,A,w;if(a.viewReady){c=a.getNodeByRecord(d);if(c){if(d.isCollapsedPlaceholder){Ext.fly(c).syncContent(a.createRowElement(d,a.indexOfRow(d)));return}u=a.overItemCls;p=a.ownerCt.getVisibleColumnManager().getColumns();for(i=0,q=p.length;i<q;i++){b=p[i];if(b.preventUpdate){h=Ext.fly(c).down(b.getCellSelector(),!0);if(h&&!v&&x){g.attach(h);if(d.isModified(b.dataIndex)){g.addCls(k)}else {g.removeCls(k)}}}else {t=a.shouldUpdateCell(d,b,B);if(t){s=s|t;f[f.length]=b;n=n||b.variableRowHeight}}}a.fireEvent('beforeitemupdate',d,D,c,f);if(a.getRowClass||!a.getRowFromItem(c)||s&1||c.tBodies[0].childNodes.length>1){A=c._extData;j=a.createRowElement(d,a.indexOfRow(d),f);if(Ext.fly(c,'_internal').hasCls(u)){Ext.fly(j).addCls(u)}if(Ext.isIE9m&&c.mergeAttributes){c.mergeAttributes(j,!0)}else {o=j.attributes;H=o.length;for(l=0;l<H;l++){z=o[l].name;if(z!=='id'){c.setAttribute(z,o[l].value)}}}if(A){A.isSynchronized=!1}if(p.length&&(E=a.getRow(c))){a.updateColumns(E,Ext.fly(j).down(a.rowSelector,!0),f)}while(m){if(m.syncContent){if(m.syncContent(c,j,B?f:null)===!1){break}}m=m.nextTpl}}else {for(i=0,q=f.length;i<q;i++){b=f[i];F=b.dataIndex;e=d.get(F);h=Ext.fly(c).down(b.getCellSelector(),!0);g.attach(h);if(!v&&x){if(d.isModified(b.dataIndex)){g.addCls(k)}else {g.removeCls(k)}}C=b.usingDefaultRenderer;r=C?b:b.scope;if(b.updater){Ext.callback(b.updater,r,[h,e,d,a,a.dataSource],0,b,G)}else {if(b.renderer){e=Ext.callback(b.renderer,r,[e,null,d,0,0,a.dataSource,a],0,b,G)}w=e==null||e==='';e=w?b.emptyCellText:e;if(b.producesHTML||w){g.down(a.innerSelector,!0).innerHTML=e}else {g.down(a.innerSelector,!0).childNodes[0].data=e}}if(a.highlightClass){Ext.fly(h).addCls(a.highlightClass);if(!a.changedCells){a.self.prototype.changedCells=[];a.prototype.clearChangedTask=new Ext.util.DelayedTask(a.clearChangedCells,a.prototype);a.clearChangedTask.delay(a.unhighlightDelay)}a.changedCells.push({cell:h,cls:a.highlightClass,expires:Ext.Date.now()+1000})}}}if(v&&x&&!d.dirty){Ext.fly(c,'_internal').select('.'+k).removeCls(k)}if(n){Ext.suspendLayouts()}a.fireEvent('itemupdate',d,D,c);if(n){a.ownerGrid.updateLayout();Ext.resumeLayouts(!0)}}}},afterComponentLayout:function(){var a;Ext.view.View.prototype.afterComponentLayout.apply(this,arguments);if(this.touchScroll&&!this.bufferedRenderer&&(a=this.getScrollable())){a.refresh()}},clearChangedCells:function(){var a=this,e=Ext.Date.now(),b;for(var d=0,c=a.changedCells.length;d<c;){b=a.changedCells[d];if(b.expires<=e){Ext.fly(b.cell).removeCls(b.highlightClass);Ext.Array.erase(a.changedCells,d,1);c--}else {break}}if(c){a.clearChangedTask.delay(a.unhighlightDelay)}},updateColumns:function(b,f,i){var m=this,d,k,g,a,n=i.length,c,l,h,j,e=m.getCellSelector();if(b.mergeAttributes){b.mergeAttributes(f,!0)}else {d=f.attributes;k=d.length;for(a=0;a<k;a++){g=d[a].name;if(g!=='id'){b.setAttribute(g,d[a].value)}}}for(c=0;c<n;c++){l=i[c];e=m.getCellSelector(l);h=Ext.fly(b).selectNode(e);j=Ext.fly(f).selectNode(e);if(h!=null){Ext.fly(h).syncContent(j)}}},shouldUpdateCell:function(c,b,a){return b.shouldUpdateCell(c,a)},refresh:function(){var a=this,b,c=a.saveFocusState();if(a.destroying){return}Ext.view.View.prototype.refresh.apply(this,arguments);c();a.headerCt.setSortState();if(a.touchScroll&&a.el&&!a.all.getCount()&&a.headerCt&&a.headerCt.tooNarrow){b=a.getScrollable();if(b&&b.isTouchScroller){b.setSize({x:a.headerCt.getTableWidth(),y:b.getSize().y})}}},processContainerEvent:function(b){var a=Ext.Component.fromElement(b.target.parentNode);if(a&&a.up(this.ownerCt)){return !1}},processItemEvent:function(g,o,f,b){var a=this,p=a.self,q=p.EventMap,c=b.type,n=a.features,r=n.length,k,h,i,m,j,l=b.position=a.eventPosition||(a.eventPosition=new Ext.grid.CellContext()),e,d;if(Ext.isIE&&c==='mouseup'&&!b.within(a.el)){return !1}if(a.indexInStore(o)!==-1){e=l.rowElement=Ext.fly(o).down(a.rowSelector,!0);d=b.getTarget(a.getCellSelector(),e);c=p.TouchEventMap[c]||c;if(d){if(!d.parentNode){return !1}j=a.getHeaderByCell(d);h=a.ownerCt.getColumnManager().getHeaderIndex(j)}else {h=-1}l.setAll(a,f,j?a.getVisibleColumnManager().getHeaderIndex(j):-1,g,j);l.cellElement=d;i=a.fireEvent('uievent',c,a,d,f,h,b,g,e);if(i===!1||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===!1){return !1}for(k=0;k<r;++k){m=n[k];if(m.wrapsItem){if(m.vetoEvent(g,e,f,b)===!1){a.processSpecialEvent(b);return !1}}}if(d&&c!=='mouseover'&&c!=='mouseout'){i=!(a['onBeforeCell'+q[c]](d,h,g,e,f,b)===!1||a.fireEvent('beforecell'+c,a,d,h,g,e,f,b)===!1||a['onCell'+q[c]](d,h,g,e,f,b)===!1||a.fireEvent('cell'+c,a,d,h,g,e,f,b)===!1)}if(i!==!1){i=a.fireEvent('row'+c,a,g,e,f,b)}return i}else {this.processSpecialEvent(b);b.preventDefault();return !1}},processSpecialEvent:function(f){var a=this,k=a.features,l=k.length,b=f.type,g,c,i,d,h,j,e=a.ownerCt;Ext.view.View.prototype.processSpecialEvent.apply(this,arguments);if(b==='mouseover'||b==='mouseout'){return}b=a.self.TouchEventMap[b]||b;for(g=0;g<l;g++){c=k[g];if(c.hasFeatureEvent){d=f.getTarget(c.eventSelector,a.getTargetEl());if(d){i=c.eventPrefix;h=c.getFireEventArgs('before'+i+b,a,d,f);j=c.getFireEventArgs(i+b,a,d,f);if(a.fireEvent.apply(a,h)===!1||e.fireEvent.apply(e,h)===!1||a.fireEvent.apply(a,j)===!1||e.fireEvent.apply(e,j)===!1){return !1}}}}return !0},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns()[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(b){var c=this,d=c.el.query(b.getCellInnerSelector()),j=b.getWidth(),f=0,i=d.length,g=c.body.select(c.getColumnSizerSelector(b)),h=Math.max,e=0,a;if(i>0){if(Ext.supports.ScrollWidthInlinePaddingBug){e+=c.getCellPaddingAfter(d[0])}if(c.columnLines){e+=Ext.fly(d[0].parentNode).getBorderWidth('lr')}}g.setWidth(1);b.textEl.setStyle({'text-overflow':'clip',display:'table-cell'});a=b.textEl.dom.offsetWidth+b.titleEl.getPadding('lr');b.textEl.setStyle({'text-overflow':'',display:''});for(;f<i;f++){a=h(a,d[f].scrollWidth)}a+=e;a=h(a+1,40);g.setWidth(j);return a},getPositionByEvent:function(b){var a=this,c=b.getTarget(a.cellSelector),d=b.getTarget(a.itemSelector),f=a.getRecord(d),e=a.getHeaderByCell(c);return a.getPosition(f,e)},getHeaderByCell:function(a){if(a){return this.ownerCt.getVisibleColumnManager().getHeaderById(Ext.getDom(a).getAttribute('data-columnId'))}return !1},walkCells:function(e,i,g,j){var c=this,b=e.clone(),d=c.lockingPartner&&c.lockingPartner.grid.isVisible()?c.lockingPartner:null,a=e.rowIdx,h=c.dataSource.getCount()-1,f=c.ownerCt.getVisibleColumnManager().getColumns();switch(i.toLowerCase()){case 'right':if(e.isLastColumn()){a=d&&c.isLockedView?a:a+1;if(a>h){return !1}if(d){b.view=d}b.setPosition(a,0)}else {b.navigate(+1)};break;case 'left':if(e.isFirstColumn()){a=d&&c.isNormalView?a:a-1;if(a<0){return !1}if(d){b.view=d;f=d.getVisibleColumnManager().getColumns()}b.setPosition(a,f[f.length-1])}else {b.navigate(-1)};break;case 'up':if(a===0){return !1}else {b.setRow(a-1)};break;case 'down':if(a===h){return !1}else {b.setRow(a+1)};break;}if(g&&g.call(j||c,b)!==!0){return !1}return b},walkRows:function(f,e){var i=this,j=i.dataSource,g=0,d=f,h,b=e<0?0:j.getCount()-1,c=b?1:-1,a=f;do{if(b?a>=b:a<=b){return d||b}a+=c;if((h=Ext.fly(i.getRow(a)))&&h.isVisible(!0)){g+=c;d=a}}while(g!==e);return a},walkRecs:function(h,g){var k=this,a=k.dataSource,i=0,e=h,j,c=g<0?0:(a.isBufferedStore?a.getTotalCount():a.getCount())-1,f=c?1:-1,b=a.indexOf(h),d;do{if(c?b>=c:b<=c){return e}b+=f;d=a.getAt(b);if(!d.isCollapsedPlaceholder&&(j=Ext.fly(k.getNodeByRecord(d)))&&j.isVisible(!0)){i+=f;e=d}}while(i!==g);return e},getFirstVisibleRowIndex:function(){var a=this,c=a.dataSource.isBufferedStore?a.dataSource.getTotalCount():a.dataSource.getCount(),b=a.indexOf(a.all.first())-1;do{b+=1;if(b===c){return}}while(!Ext.fly(a.getRow(b)).isVisible(!0));return b},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(!0));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(b,a){return (new Ext.grid.CellContext(this)).setPosition(b,a)},onDestroy:function(){var a=this,c=a.featuresMC,d,b;if(c){for(b=0,d=c.getCount();b<d;++b){c.getAt(b).destroy()}}a.cellFly=a.featuresMC=null;Ext.view.View.prototype.onDestroy.apply(this,arguments);a.all.destroy();a.body.destroy();a.all=a.body=a.body.el=null;a.grid=a.ownerGrid=a.headerCt=a.panel=null;a.selection=a.actionPosition=a.eventPosition=a.lastFocused=null;a.actionRow=a.cellTpl=a.rowTpl=a.bufferedRenderer=null},onReplace:function(g,d,f,e){var a=this,b=a.bufferedRenderer,c;if(a.rendered&&b){c=a.saveFocusState();b.onReplace(g,d,f,e);c()}else {Ext.view.View.prototype.onReplace.apply(this,arguments)}a.setPendingStripe(d)},onResize:function(c,b,f,e){var d=this,a=d.bufferedRenderer;if(a){a.onViewResize(d,c,b,f,e)}Ext.view.View.prototype.onResize.call(this,c,b)},onAdd:function(e,c,d){var b=this,a=b.bufferedRenderer;if(b.rendered&&a&&(a.bodyTop||b.dataSource.getCount()+c.length>=a.viewSize)){a.onReplace(e,d,[],c)}else {Ext.view.View.prototype.onAdd.apply(this,arguments)}b.setPendingStripe(d)},onRemove:function(f,d,e){var a=this,b=a.bufferedRenderer,c;if(a.rendered&&b&&a.dataSource.getCount()+d.length>=b.viewSize){c=a.saveFocusState();b.onReplace(f,e,d,[]);c()}else {Ext.view.View.prototype.onRemove.apply(this,arguments)}a.setPendingStripe(e)},saveFocusState:function(){var b=this,g=b.dataSource,c=b.actionableMode,d=b.getNavigationModel(),a=c?b.actionPosition:d.getPosition(!0),f,e;if(a){a=a.clone();if(c){b.ownerGrid.setActionableMode(!1)}b.el.dom.focus();d.setPosition();return function(){if(g.getCount()){f=Math.min(a.rowIdx,b.all.getCount()-1);e=Math.min(a.colIdx,b.getVisibleColumnManager().getColumns().length-1);a=(new Ext.grid.CellContext(b)).setPosition(g.contains(a.record)?a.record:f,e);if(c){b.ownerGrid.setActionableMode(!0,a)}else {b.cellFocused=!0;d.setPosition(a,null,null,null,!0)}}else {a.column.focus()}}}return Ext.emptyFn},onDataRefresh:function(c){var b=this,a=b.ownerCt;if(a&&a.isCollapsingOrExpanding===2){a.on('expand',b.onDataRefresh,b,{single:!0});return}Ext.view.View.prototype.onDataRefresh.call(this,c)},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(b){var a=this.stripeOnUpdate;if(a===null){a=b}else {a=Math.min(a,b)}this.stripeOnUpdate=a},onEndUpdate:function(){var b=this,a=b.stripeOnUpdate,c=b.all.startIndex;if(b.rendered&&(a||a===0)){if(a<c){a=c}b.doStripeRows(a);b.stripeOnUpdate=null}Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(d,g){var a=this,e,f,c,b;if(a.rendered&&a.stripeRows){e=a.getNodes(d,g);for(c=0,f=e.length;c<f;c++){b=e[c];b.className=b.className.replace(a.rowClsRe,' ');d++;if(d%2===0){b.className+=' '+a.altRowCls}}}},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding('r')},privates:{refreshScroll:function(){var b=this,a=b.bufferedRenderer;if(a){a.refreshSize()}else {Ext.view.View.prototype.refreshScroll.call(this)}},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(n,c){var a=this,g=a.getNavigationModel(),f,l,i,m,e=a.grid.actionables,o=e.length,b,h,k,d,j;if(a.actionableMode===n){if(!n||c.isEqual(a.actionPosition)){return !1}}if(n){if(c&&(c.view===a||c.view===(d=a.lockingPartner)&&d.actionableMode)){c=c.clone();h=c.record;a.grid.ensureVisible(h,{column:c.column});f=a.all.item(c.rowIdx);if(!d){l=Ext.fly(f).down(c.column.getCellSelector());for(b=0;b<o;b++){k=k||e[b].activateCell(c)}}if(d||l.restoreTabbableState(!0).length||k){for(b=0;b<o;b++){if(e[b].activateRow){e[b].activateRow(f)}}if(d||(i=l.findTabbableElements()).length){f.restoreTabbableState(!0);if(d){a.actionableMode=!0;a.actionPosition=null;return !0}if(i){a.actionRow=f;a.actionableMode=a.ownerGrid.actionableMode=!0;g.setPosition();g.actionPosition=a.actionPosition=c;Ext.fly(i[0]).focus();return !0}}}}return !1}else {m=Ext.fly(Ext.Element.getActiveElement());j=a.el.contains(m);if(j){h=a.actionPosition&&a.actionPosition.record}for(b=0;b<o;b++){if(e[b].deactivate){e[b].deactivate()}}if(a.actionRow){a.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1})}a.actionableMode=a.ownerGrid.actionableMode=!1;a.actionPosition=g.actionPosition=a.actionRow=null;if(j){g.setPosition((new Ext.grid.CellContext(a)).setPosition(h||0,a.getHeaderByCell(m.findParent(a.getCellSelector()))||0))}}},onRowExit:function(h,i,f){var a=this,j=f?'nextSibling':'previousSibling',c=a.lockingPartner,e=a.grid.actionables,k=e.length,b,d,g;a.refreshing=a.actionableModeTabbing=!0;for(b=0;b<k;b++){if(e[b].deactivate){e[b].deactivate()}}if(c&&c.grid.isVisible()){d=a.all.indexOf(h);if(f){g=0;if(a.isNormalView){d++}}else {g=c.getVisibleColumnManager().getColumns().length-1;if(a.isLockedView){d--}}a.actionPosition=null;a=c;i=a.all.item(d,!0)}a.findFirstActionableElement(i,j,f);a.refreshing=a.actionableModeTabbing=!1;Ext.fly(h).saveTabbableState({skipSelf:!0,includeSaved:!1})},findFirstActionableElement:function(d,p,c){var a=this,n=a.getVisibleColumnManager().getColumns(),m=n.length,k,g,f=a.grid.actionables,l=f.length,b,h,o,e=new Ext.grid.CellContext(a),j,i;if(d){e.setRow(d);for(b=0;b<l;b++){if(f[b].activateRow){f[b].activateRow(d)}}for(b=c?0:m-1;(c?b<m:b>-1)&&!g;b=b+(c?1:-1)){o=n[b];e.setColumn(o);k=Ext.fly(d).down(e.column.getCellSelector());for(h=0;h<l;h++){j=j||f[h].activateCell(e)}if(k.restoreTabbableState(!0).length||j){i=k.findTabbableElements();a.actionRow=Ext.get(d);a.actionRow.restoreTabbableState(!0);g=i[c?0:i.length-1]}}if(g){a.actionPosition=a.getNavigationModel().actionPosition=e;Ext.fly(g).focus()}else {a.onRowExit(d,a.all.item(e.rowIdx+(c?1:-1)),c)}}else {a.grid.ensureVisible(c?0:a.dataSource.getCount()-1,{callback:function(b,f,e){if(b){a.findFirstActionableElement(e,p,c)}else {a.ownerGrid.setActionableMode(!1)}}})}}}},1,['gridview','tableview'],['component','box','dataview','tableview','gridview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0},['widget.gridview','widget.tableview'],0,[Ext.view,'Table',Ext.grid,'View'],0);Ext.define('Ext.rtl.view.Table',{override:'Ext.view.Table',rtlCellTpl:['<td class="x-rtl {tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-rtl x-grid-cell-inner {innerCls}" ','style="text-align:{[this.getAlign(values.align)]};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>','</td>',{priority:0,rtlAlign:{right:'left',left:'right',center:'center'},getAlign:function(a){return this.rtlAlign[a]}}],beforeRender:function(){var a=this;(arguments.callee.$previous||Ext.view.View.prototype.beforeRender).call(this);if(a.getInherited().rtl){a.addCellTpl(a.getTpl('rtlCellTpl'))}},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding(this.getInherited().rtl?'l':'r')}});Ext.cmd.derive('Ext.tree.View',Ext.view.Table,{config:{selectionModel:{type:'treemodel'}},isTreeView:!0,loadingCls:'x-grid-tree-loading',expandedCls:'x-grid-tree-node-expanded',leafCls:'x-grid-tree-node-leaf',expanderSelector:'.x-tree-expander',checkboxSelector:'.x-tree-checkbox',expanderIconOverCls:'x-tree-expander-over',nodeAnimWrapCls:'x-tree-animator-wrap',ariaRole:'tree',loadMask:!1,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,treeRowTpl:['{%','this.processRowValues(values);','this.nextTpl.applyOut(values, out, parent);','%}',{priority:10,processRowValues:function(a){var b=a.record,c=a.view;a.rowAttr['data-qtip']=b.get('qtip')||'';a.rowAttr['data-qtitle']=b.get('qtitle')||'';if(b.isExpanded()){a.rowClasses.push(c.expandedCls)}if(b.isLeaf()){a.rowClasses.push(c.leafCls)}if(b.isLoading()){a.rowClasses.push(c.loadingCls)}}}],initComponent:function(){var a=this;if(a.bufferedRenderer){a.animate=!1}else {if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}}a.store=a.panel.getStore();a.onRootChange(a.store.getRoot());a.animQueue={};a.animWraps={};Ext.view.Table.prototype.initComponent.call(this);a.store.setRootVisible(a.rootVisible);a.addRowTpl(Ext.XTemplate.getTpl(a,'treeRowTpl'))},onFillComplete:function(f,d,b){var a=this,e=a.store,c=e.indexOf(b[0]);d.triggerUIUpdate();if(!b.length||c===-1){return}a.onAdd(a.store,b,c);a.refreshPartner()},refreshPartner:function(){var a=this.lockingPartner;if(a){a.refresh()}},afterComponentLayout:function(e,d,c,b){var a=this.getScrollable();Ext.view.Table.prototype.afterComponentLayout.call(this,e,d,c,b);if(a&&!this.bufferedRenderer){a.refresh()}},processUIEvent:function(a){if(a.getTarget('.'+this.nodeAnimWrapCls,this.el)){return !1}return Ext.view.Table.prototype.processUIEvent.call(this,a)},setRootNode:function(a){this.node=a},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get('checked')){a.push(b)}});return a},isItemChecked:function(a){return a.get('checked')},createAnimWrap:function(b,e){var d=this,c=d.getNode(b),a;a=Ext.fly(c).insertSibling({role:'presentation',tag:'div',cls:d.nodeAnimWrapCls},'after');return {record:b,node:c,el:a,expanding:!1,collapsing:!1,animateEl:a,targetEl:a}},getAnimWrap:function(a,d){if(!this.animate){return null}var c=this.animWraps,b=c[a.internalId];if(d!==!1){while(!b&&a){a=a.parentNode;if(a){b=c[a.internalId]}}}return b},doAdd:function(h,c){var d=this,l=h[0],i=l.parentNode,m=d.all,e,a=d.getAnimWrap(i),g,f,k,j,b;if(!a||!a.expanding){return Ext.view.Table.prototype.doAdd.call(this,h,c)}j=d.bufferRender(h,c,!0);b=j.children;i=a.record;g=a.targetEl;f=g.dom.childNodes;k=f.length;e=c-d.indexInStore(i)-1;if(!k||e>=k){g.appendChild(j.fragment,!0)}else {Ext.fly(f[e]).insertSibling(b,'before',!0)}m.insert(c,b);return b},onRemove:function(h,c,b){var a=this,g,d,e=a.hasListeners.remove,f;if(a.viewReady){g=a.store.getCount()===0;if(a.bufferedRenderer){return Ext.view.Table.prototype.onRemove.call(this,h,c,b)}if(e){f=this.all.slice(b,b+c.length)}if(g){a.refresh()}else {for(d=c.length-1,b+=d;d>=0;--d,--b){a.doRemove(c[d],b)}a.refreshSizePending=!0}if(e){a.fireEvent('itemremove',c,b,f,a)}}},doRemove:function(c,b){var g=this,f=g.all,a=g.getAnimWrap(c),d=f.item(b),e=d?d.dom:null;if(!e||!a||!a.collapsing){return Ext.view.Table.prototype.doRemove.call(this,c,b)}a.targetEl.dom.insertBefore(e,a.targetEl.dom.firstChild);f.removeElement(b)},onBeforeExpand:function(c,d,e){var b=this,a;if(b.rendered&&b.all.getCount()&&b.animate){if(b.getNode(c)){a=b.getAnimWrap(c,!1);if(!a){a=b.animWraps[c.internalId]=b.createAnimWrap(c);a.animateEl.setHeight(0)}else {if(a.collapsing){a.targetEl.select(b.itemSelector).destroy()}}a.expanding=!0;a.collapsing=!1}}},onExpand:function(b){var a=this,h=a.animQueue,i=b.getId(),f=a.getNode(b),g=f?a.indexOf(f):-1,c,d,e;if(a.singleExpand){a.ensureSingleExpand(b)}if(g===-1){return}c=a.getAnimWrap(b,!1);if(!c){b.isExpandingOrCollapsing=!1;a.fireEvent('afteritemexpand',b,g,f);return}d=c.animateEl;e=c.targetEl;d.stopAnimation();h[i]=!0;Ext.on('idle',function(){d.dom.style.height='0px'},null,{single:!0});d.animate({from:{height:0},to:{height:e.dom.scrollHeight},duration:a.expandDuration,listeners:{afteranimate:function(){var f=e.dom.childNodes,d=Ext.Element.getActiveElement();if(f.length){if(!e.contains(d)){d=null}c.el.insertSibling(f,'before',!0);if(d){Ext.fly(d).focus()}}c.el.destroy();a.animWraps[c.record.internalId]=h[i]=null}},callback:function(){b.isExpandingOrCollapsing=!1;if(!a.destroyed){a.refreshSize(!0)}a.fireEvent('afteritemexpand',b,g,f)}})},onBeforeCollapse:function(c,g,f,d,e){var b=this,a;if(b.rendered&&b.all.getCount()){if(b.animate){if(c.isVisible()){a=b.getAnimWrap(c);if(!a){a=b.animWraps[c.internalId]=b.createAnimWrap(c,f)}else {if(a.expanding){a.targetEl.select(this.itemSelector).destroy()}}a.expanding=!1;a.collapsing=!0;a.callback=d;a.scope=e}}else {b.onCollapseCallback=d;b.onCollapseScope=e}}},onCollapse:function(c){var a=this,g=a.animQueue,h=c.getId(),d=a.getNode(c),f=d?a.indexOf(d):-1,b=a.getAnimWrap(c),e;if(!a.all.getCount()||!c.isVisible()){return}if(!b){c.isExpandingOrCollapsing=!1;a.fireEvent('afteritemcollapse',c,f,d);Ext.callback(a.onCollapseCallback,a.onCollapseScope);a.onCollapseCallback=a.onCollapseScope=null;return}e=b.animateEl;g[h]=!0;e.stopAnimation();e.animate({to:{height:0},duration:a.collapseDuration,listeners:{afteranimate:function(){b.el.destroy();a.animWraps[b.record.internalId]=g[h]=null}},callback:function(){c.isExpandingOrCollapsing=!1;if(!a.destroyed){a.refreshSize(!0)}a.fireEvent('afteritemcollapse',c,f,d);Ext.callback(b.callback,b.scope);b.callback=b.scope=null}})},isAnimating:function(a){return !!this.animQueue[a.getId()]},expand:function(a,f,d,e){var g=this,b=!!g.animate,c;if(!b||!a.isExpandingOrCollapsing){if(!a.isLeaf()){a.isExpandingOrCollapsing=b}Ext.suspendLayouts();c=a.expand(f,d,e);Ext.resumeLayouts(!0);return c}},collapse:function(a,e,c,d){var f=this,b=!!f.animate;if(!b||!a.isExpandingOrCollapsing){if(!a.isLeaf()){a.isExpandingOrCollapsing=b}return a.collapse(e,c,d)}},toggle:function(a,d,b,c){if(a.isExpanded()){this.collapse(a,d,b,c)}else {this.expand(a,d,b,c)}},onItemDblClick:function(a,e,d,f){var b=this,c=b.editingPlugin;Ext.view.Table.prototype.onItemDblClick.call(this,a,e,d,f);if(b.toggleOnDblClick&&a.isExpandable()&&!(c&&c.clicksToEdit===2)){b.toggle(a)}},onCellClick:function(d,g,c,i,h,a){var b=this,f=a.position.column,e;if(f.isTreeColumn){if(a.getTarget(b.checkboxSelector,d)&&Ext.isBoolean(e=c.get('checked'))&&b.fireEvent('beforecheckchange',c,e,a)!==!1){b.onCheckChange(a);if(f.stopSelection){a.stopSelection=!0}}else {if(a.getTarget(b.expanderSelector,d)&&c.isExpandable()){b.getNavigationModel().setPosition(a.position);b.toggle(c,a.ctrlKey);a.nodeToggled=!0}}return Ext.view.Table.prototype.onCellClick.call(this,d,g,c,i,h,a)}},onCheckChange:function(c){var a=c.record,b=!a.get('checked');a.set('checked',b);this.fireEvent('checkchange',a,b,c)},onItemMouseOver:function(c,b,d,a){if(a.getTarget(this.expanderSelector,b)){a.getTarget(this.cellSelector,null,!0).addCls(this.expanderIconOverCls)}},onItemMouseOut:function(c,b,d,a){if(a.getTarget(this.expanderSelector,b)){a.getTarget(this.cellSelector,null,!0).removeCls(this.expanderIconOverCls)}},getStoreListeners:function(){return Ext.apply(Ext.view.Table.prototype.getStoreListeners.call(this),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(b,f,e,a){var d=a&&a.getRootNode(),c=b&&b.getRootNode();Ext.view.Table.prototype.onBindStore.call(this,b,f,e,a);if(c!==d){this.onRootChange(c,d)}},onRootChange:function(b,c){var a=this,d=a.grid;if(c){a.rootListeners.destroy();a.rootListeners=null}if(b){a.rootListeners=b.on({beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,destroyable:!0,scope:a});d.addRelayers(b)}},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(a){if(a!==b&&a.isExpanded()){a.collapse()}})}}},0,['treeview'],['component','box','dataview','tableview','gridview','treeview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0,'treeview':!0},['widget.treeview'],0,[Ext.tree,'View'],0);Ext.cmd.derive('Ext.selection.RowModel',Ext.selection.DataViewModel,{enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,!0)}}},onSelectChange:function(c,g,e,j){var a=this,i=a.views||[a.view],k=i.length,b=a.store.indexOf(c),h=g?'select':'deselect',f,d;if((e||a.fireEvent('before'+h,a,c,b))!==!1&&j()!==!1){for(f=0;f<k;f++){d=i[f];b=d.indexOf(c);if(d.indexOf(c)!==-1){if(g){d.onRowSelect(b,e)}else {d.onRowDeselect(b,e)}}}if(!e){a.fireEvent(h,a,c,b)}}},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return (new Ext.grid.CellContext(this.view)).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,b){if(!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition(a.row,a.column)}this.select(a.record,b)},selectNext:function(f,e){var a=this,h=a.store,d=a.getSelection(),g=d[d.length-1],c=a.view.indexOf(g)+1,b;if(c===h.getCount()||c===0){b=!1}else {a.doSelect(c,f,e);b=!0}return b},selectPrevious:function(e,d){var b=this,f=b.getSelection(),g=f[0],c=b.view.indexOf(g)-1,a;if(c<0){a=!1}else {b.doSelect(c,e,d);a=!0}return a},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(c,a,b){return this.isSelected(a)},vetoSelection:function(a){var b=this.view.getNavigationModel(),c=a.getKey(),d=c===a.RIGHT||c===a.LEFT;return d&&b.previousRecord===b.record||Ext.selection.DataViewModel.prototype.vetoSelection.call(this,a)}},0,0,0,0,['selection.rowmodel'],0,[Ext.selection,'RowModel'],0);Ext.cmd.derive('Ext.selection.TreeModel',Ext.selection.RowModel,{selectOnExpanderClick:!1,constructor:function(b){var a=this;Ext.selection.RowModel.prototype.constructor.call(this,b);if(a.pruneRemoved){a.pruneRemoved=!1;a.pruneRemovedNodes=!0}},getStoreListeners:function(){var b=this,a=Ext.selection.RowModel.prototype.getStoreListeners.call(this);a.noderemove=b.onNodeRemove;return a},onNodeRemove:function(d,c,b){if(!b){var a=[];this.gatherSelected(c,a);if(a.length){this.deselect(a)}}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(b){var a=this.view,c=this.selectOnExpanderClick,d=!c&&b.type==='click'&&b.getTarget(a.expanderSelector||a.lockingPartner&&a.lockingPartner.expanderSelector);return d||Ext.selection.RowModel.prototype.vetoSelection.call(this,b)},privates:{gatherSelected:function(c,d){var b=c.childNodes,a,f,e;if(this.selected.containsKey(c.id)){d.push(c)}if(b){for(a=0,f=b.length;a<f;++a){e=b[a];this.gatherSelected(e,d)}}}}},1,0,0,0,['selection.treemodel'],0,[Ext.selection,'TreeModel'],0);Ext.cmd.derive('Ext.grid.NavigationModel',Ext.view.NavigationModel,{focusCls:'x-grid-item-focused',getViewListeners:function(){var a=this;return {focusmove:{element:'el',fn:a.onFocusMove},containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,scope:a}},initKeyNav:function(b){var a=this;if(!a.keyNav){a.keyNav=[];a.position=new Ext.grid.CellContext(b)}a.keyNav.push(new Ext.util.KeyNav({target:b,ignoreInputFields:!0,eventName:'itemkeydown',defaultEventAction:'stopEvent',processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,esc:a.onKeyEsc,113:a.onKeyF2,tab:a.onKeyTab,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a}))},addKeyBindings:function(b){var c=this.keyNav.length,a;for(a=0;a<c;a++){this.keyNav[a].addBindings(b)}},enable:function(){var b=this.keyNav.length,a;for(a=0;a<b;a++){this.keyNav[a].enable()}this.disabled=!1},disable:function(){var b=this.keyNav.length,a;for(a=0;a<b;a++){this.keyNav[a].disable()}this.disabled=!0},processViewEvent:function(c,e,f,d,a){var b=a.getKey();if(c.actionableMode){this.map.ignoreInputFields=!1;if(b===a.TAB||b===a.ESC||b===a.F2){return a}}else {this.map.ignoreInputFields=!0;return b===a.TAB?null:a}},onCellMouseDown:function(c,e,g,h,i,f,a){var b=Ext.Component.fromElement(a.target,e),d;if(c.actionableMode&&(a.getTarget(null,null,!0).isTabbable()||(d=Ext.ComponentManager.getActiveComponent())&&d.owns(a))){return}if(a.pointerType!=='touch'){this.setPosition(a.position,null,a)}if(b&&b.isFocusable&&b.isFocusable()){c.setActionableMode(!0,a.position);b.focus()}},onCellClick:function(d,f,h,i,j,g,a){var b=this,c=Ext.Component.fromElement(a.target,f),e=c&&c.isFocusable&&c.isFocusable();if(d.actionableMode){if(!a.position.isEqual(d.actionPosition)){if(!e){b.setPosition(a.position,null,a)}}b.fireEvent('navigate',{view:d,navigationModel:b,keyEvent:a,previousPosition:b.previousPosition,previousRecordIndex:b.previousRecordIndex,previousRecord:b.previousRecord,previousItem:b.previousItem,previousCell:b.previousCell,previousColumnIndex:b.previousColumnIndex,previousColumn:b.previousColumn,position:a.position,recordIndex:a.position.rowIdx,record:a.position.record,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column})}else {if(b.position.isEqual(a.position)||e){b.fireNavigateEvent(a)}else {b.setPosition(a.position,null,a)}}},onFocusMove:function(f){var b=f.target,a=Ext.Component.fromElement(f.delegatedTarget,null,'tableview'),b=f.target,e,d,c;if(a&&Ext.fly(b).is(a.cellSelector)){if(a.actionableModeTabbing){return}a.ownerGrid.setActionableMode(!1);e=a.getRecord(b);d=a.getHeaderByCell(b);if(e&&d){c=(new Ext.grid.CellContext(a)).setPosition(e,d);if(!c.isEqual(this.position)){this.setPosition(c)}}}},onItemMouseDown:function(f,c,e,d,a){var b=this;if(!a.position.cellElement&&a.pointerType!=='touch'){b.getClosestCell(a);b.setPosition(a.position,null,a)}},onItemClick:function(e,b,d,c,a){if(!a.position.cellElement){this.getClosestCell(a);if(a.pointerType==='touch'){this.setPosition(a.position,null,a)}this.fireNavigateEvent(a)}},getClosestCell:function(f){var a=f.position,h=a.cellElement,e,c,g,b,i,d;if(!h){e=f.getX();c=a.view.getVisibleColumnManager().getColumns();g=c.length;for(b=0;b<g;b++){i=c[b];d=c[b].getBox();if(e>=d.left&&e<d.right){a.setColumn(c[b]);a.rowElement=a.getRow(!0);a.cellElement=a.getCell(!0);return}}}},deferSetPosition:function(g,e,d,f,c,b){var a=this.view.getFocusTask();a.delay(g,this.setPosition,this,[e,d,f,c,b]);return a},setPosition:function(b,g,l,q,o){var a=this,c,n,m,h,j,e,f,d,i,k=b==null&&g==null,p=a.record==null&&a.recordIndex==null&&a.item==null;if(b&&b.isCellContext){c=b.view}else {if(l&&l.view){c=l.view}else {if(a.lastFocused){c=a.lastFocused.view}else {c=a.view}}}c.getFocusTask().cancel();if(c.destroyed||!c.refreshCounter||!c.ownerCt||k&&p||!c.all.getCount()){return}m=c.getSelectionModel();h=c.dataSource;j=c.getVisibleColumnManager();if(b&&b.isCellContext){d=b.record;e=b.rowIdx;f=b.colIdx;i=b.column;if(h.indexOf(d)===-1){n=c.getScrollable();a.recordIndex=-1;if(n.getPosition().y>=n.getMaxPosition().y-c.all.last(!0).offsetHeight){b.rowIdx--}e=Math.min(b.rowIdx,h.getCount()-1);f=Math.min(f,j.getColumns().length);d=h.getAt(e);i=j.getColumns()[f]}}else {if(k){d=e=null}else {if(g==null){g=a.lastFocused?a.lastFocused.column:0}if(typeof b==='number'){e=Math.max(Math.min(b,h.getCount()-1),0);d=h.getAt(b)}else {if(b.isEntity){d=b;e=h.indexOf(d)}else {if(b.tagName){d=c.getRecord(b);e=h.indexOf(d);if(e===-1){d=null}}else {if(p){return}k=!0;d=e=null}}}}if(d){if(e===-1){a.recordIndex=-1;d=h.getAt(0);e=0;g=null}if(g==null){if(!(i=a.column)){f=0;i=j.getColumns()[0]}}else {if(typeof g==='number'){i=j.getColumns()[g];f=g}else {i=g;f=j.indexOf(g)}}}else {k=!0;i=f=null}}if(e===a.recordIndex&&f===a.columnIndex&&c===a.position.view){return a.focusPosition(a.position)}if(a.cell){a.cell.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.previousCell=a.cell;a.previousColumn=a.column;a.previousColumnIndex=a.columnIndex;a.previousPosition=a.position.clone();a.selectionStart=m.selectionStart;a.position.setAll(c,a.recordIndex=e,a.columnIndex=f,a.record=d,a.column=i);if(k){a.item=a.cell=null}else {a.focusPosition(a.position,o)}if(!q){m.fireEvent('focuschange',m,a.previousRecord,a.record);c.fireEvent('rowfocus',a.record,a.item,a.recordIndex);c.fireEvent('cellfocus',a.record,a.cell,a.position)}if(l&&!o&&a.cell!==a.previousCell){a.fireNavigateEvent(l)}},focusPosition:function(b){var a=this,c,d;a.item=a.cell=null;if(b&&b.record&&b.column){c=b.view;if(b.rowElement){d=a.item=b.rowElement}else {d=c.getRowByRecord(b.record)}if(d){a.cell=b.cellElement||Ext.fly(d).down(b.column.getCellSelector(),!0);if(a.cell){a.cell=new Ext.dom.Fly(a.cell);c.lastFocused=a.lastFocused=a.position.clone();a.focusItem(a.cell);c.focusEl=a.cell}else {a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null}}else {d=c.dataSource.indexOf(b.record);a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null;if(d!==-1&&c.bufferedRenderer){a.lastKeyEvent=null;c.bufferedRenderer.scrollTo(d,!1,a.afterBufferedScrollTo,a)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(f){var c=this,a=c.position,b,e,d;if(a.record&&a.column){if(f){return a}e=a.view;d=e.dataSource;b=d.indexOf(a.record);if(b===-1){b=a.rowIdx;if(!(a.record=d.getAt(b))){b=-1}}if(b===-1||e.getVisibleColumnManager().indexOf(a.column)===-1){a.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}else {return a}}return null},getLastFocused:function(){var c=this,b,a=c.lastFocused;if(a&&a.record&&a.column){b=a.view;if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1){return a}}},onKeyTab:function(a){var e=!a.shiftKey,d=a.position.clone(),g=d.view,f=a.position.cellElement,b=Ext.fly(f).findTabbableElements(),c,i=g.ownerGrid.actionables,j=i.length,h;a.preventDefault();c=b[Ext.Array.indexOf(b,a.target)+(e?1:-1)];while(!c&&(f=f[e?'nextSibling':'previousSibling'])){d.setColumn(g.getHeaderByCell(f));for(h=0;h<j;h++){i[h].activateCell(d)}if((b=Ext.fly(f).findTabbableElements()).length){c=b[e?0:b.length-1]}}if(c){this.actionPosition=d.view.actionPosition=d;Ext.fly(c).focus();return}if(Ext.isIE){g.el.focus()}g.onRowExit(a.item,a.item[e?'nextSibling':'previousSibling'],e)},onKeyUp:function(b){var c=b.view.walkRecs(b.record,-1),a=this.getPosition();if(c){a.setRow(c);if(!a.getCell(!0)){a.navigate(-1)}this.setPosition(a,null,b)}},onKeyDown:function(a){var c=a.record.isExpandingOrCollapsing?null:a.view.walkRecs(a.record,1),b=this.getPosition();if(c){b.setRow(c);if(!b.getCell(!0)){b.navigate(-1)}this.setPosition(b,null,a)}},onKeyRight:function(b){var a=this.move('right',b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move('left',b);if(a){this.setPosition(a,null,b)}},onKeyEnter:function(a){var b=['cellclick',a.view,a.position.cellElement,a.position.colIdx,a.record,a.position.rowElement,a.recordIndex,a],c=a.position.getCell();if(c){if(!c.query('[tabIndex="-1"]').length){a.stopEvent();a.view.fireEvent.apply(a.view,b);b[0]='celldblclick';a.view.fireEvent.apply(a.view,b)}if(!this.view.actionableMode){this.view.ownerGrid.setActionableMode(!0,this.getPosition())}}},onKeyF2:function(c){var b=this.view.ownerGrid,a=b.actionableMode;b.setActionableMode(!a,a?null:this.getPosition())},onKeyEsc:function(a){this.view.ownerGrid.setActionableMode(!1)},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record){return a.view.walkCells(a,b,d.shiftKey&&(b==='right'||b==='left')?c.vetoRowChange:null,c)}},vetoRowChange:function(a){return this.getPosition().record===a.record},onKeyPageDown:function(a){var b=this,c=a.view,d=b.getRowsVisible(),f,e;if(d){if(c.bufferedRenderer){f=Math.min(a.recordIndex+d,c.dataSource.getCount()-1);b.lastKeyEvent=a;c.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)}else {e=c.walkRecs(a.record,d);b.setPosition(e,null,a)}}},onKeyPageUp:function(a){var b=this,d=a.view,c=b.getRowsVisible(),f,e;if(c){if(d.bufferedRenderer){f=Math.max(a.recordIndex-c,0);b.lastKeyEvent=a;d.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)}else {e=d.walkRecs(a.record,-c);b.setPosition(e,null,a)}}},onKeyHome:function(a){var b=this,c=a.view;if(a.altKey){if(c.bufferedRenderer){b.lastKeyEvent=a;c.bufferedRenderer.scrollTo(0,!1,b.afterBufferedScrollTo,b)}else {b.setPosition(c.walkRecs(a.record,-c.dataSource.indexOf(a.record)),null,a)}}else {b.setPosition(a.record,0,a)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(a){var c=this,b=a.view;if(a.altKey){if(b.bufferedRenderer){c.lastKeyEvent=a;b.bufferedRenderer.scrollTo(b.store.getCount()-1,!1,c.afterBufferedScrollTo,c)}else {c.setPosition(b.walkRecs(a.record,b.dataSource.getCount()-1-b.dataSource.indexOf(a.record)),null,a)}}else {c.setPosition(a.record,a.view.getVisibleColumnManager().getColumns().length-1,a)}},getRowsVisible:function(){var b=!1,e=this.view,d=e.all.first(),c,a;if(d){c=d.getHeight();a=e.el.getHeight();b=Math.floor(a/c)}return b},fireNavigateEvent:function(b){var a=this;a.fireEvent('navigate',{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,selectionStart:a.selectionStart,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}},0,0,0,0,['view.navigation.grid'],0,[Ext.grid,'NavigationModel'],0);Ext.define('Ext.rtl.grid.NavigationModel',{override:'Ext.grid.NavigationModel',initKeyNav:function(c){var a=this,b=a.self.prototype;if(c.getInherited().rtl){a.onKeyLeft=b.onKeyRight;a.onKeyRight=b.onKeyLeft}(arguments.callee.$previous||Ext.view.NavigationModel.prototype.initKeyNav).call(this,c)}});Ext.cmd.derive('Ext.tree.NavigationModel',Ext.grid.NavigationModel,{initKeyNav:function(e){var a=this,c=a.view.ownerGrid.columns,d,b;a.isTreeGrid=c&&c.length>1;Ext.grid.NavigationModel.prototype.initKeyNav.call(this,e);for(b=0,d=a.keyNav.length;b<d;b++){a.keyNav[b].map.addBinding([{key:'8',shift:!0,handler:a.onAsterisk,scope:a},{key:Ext.event.Event.NUM_MULTIPLY,handler:a.onAsterisk,scope:a}])}a.view.grid.on({columnschanged:a.onColumnsChanged,scope:a})},onColumnsChanged:function(){this.isTreeGrid=this.view.ownerGrid.getVisibleColumnManager().getColumns().length>1},onCellClick:function(f,e,c,d,g,b,a){Ext.grid.NavigationModel.prototype.onCellClick.call(this,f,e,c,d,g,b,a);return !a.nodeToggled},onKeyLeft:function(b){var c=this,d=b.view,a=c.record;if(c.isTreeGrid&&!b.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyLeft.call(this,b)}if(b.position.column.isTreeColumn&&a.isExpanded()){d.collapse(a)}else {a=a.parentNode;if(a&&!(a.isRoot()&&!d.rootVisible)){c.setPosition(a,null,b)}}},onKeyRight:function(b){var c=this,a=c.record;if(c.isTreeGrid&&!b.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyRight.call(this,b)}if(!a.isLeaf()){if(b.position.column.isTreeColumn&&!a.isExpanded()){b.view.expand(a)}else {if(a.isExpanded()){a=a.childNodes[0];if(a){c.setPosition(a)}}}}},onKeyEnter:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else {Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,a)}},onKeySpace:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else {Ext.grid.NavigationModel.prototype.onKeySpace.call(this,a)}},toggleCheck:function(a){this.view.onCheckChange(a)},onAsterisk:function(a){this.view.ownerCt.expandAll()}},0,0,0,0,['view.navigation.tree'],0,[Ext.tree,'NavigationModel'],0);Ext.cmd.derive('Ext.tree.Panel',Ext.panel.Table,{alternateClassName:['Ext.tree.TreePanel','Ext.TreePanel'],viewType:'treeview',treeCls:'x-tree-panel',rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},rootVisible:!0,displayField:'text',root:null,normalCfgCopy:['displayField','root','singleExpand','useArrows','lines','rootVisible','scroll'],lockedCfgCopy:['displayField','root','singleExpand','useArrows','lines','rootVisible'],isTree:!0,arrowCls:'x-tree-arrows',linesCls:'x-tree-lines',noLinesCls:'x-tree-no-lines',autoWidthCls:'x-autowidth-table',constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;Ext.panel.Table.prototype.constructor.call(this,a)},initComponent:function(){var a=this,c=[a.treeCls],b,d;if(a.useArrows){c.push(a.arrowCls);a.lines=!1}if(a.lines){c.push(a.linesCls)}else {if(!a.useArrows){c.push(a.noLinesCls)}}b=a.applyStore(a.store);if(!b.getRoot()){b.setRoot({})}b.setRootVisible(a.rootVisible);a.viewConfig=Ext.apply({rootVisible:a.rootVisible,animate:a.enableAnimations,singleExpand:a.singleExpand,node:b.getRoot(),hideHeaders:a.hideHeaders,navigationModel:'tree'},a.viewConfig);if(!a.columns){if(a.initialConfig.hideHeaders===undefined){a.hideHeaders=!0}a.addCls(a.autoWidthCls);a.columns=[{xtype:'treecolumn',text:'Name',flex:1,dataIndex:a.displayField}]}if(a.cls){c.push(a.cls)}a.cls=c.join(' ');Ext.panel.Table.prototype.initComponent.call(this);d=a.getView();a.relayEvents(d,['beforecheckchange','checkchange','afteritemexpand','afteritemcollapse'])},applyStore:function(a){var b=this;if(Ext.isString(a)){a=b.store=Ext.StoreMgr.lookup(a)}else {if(!a||!a.isStore){a=Ext.apply({type:'tree',proxy:'memory'},a);if(b.root){a.root=b.root}if(b.fields){a.fields=b.fields}else {if(b.model){a.model=b.model}}if(b.folderSort){a.folderSort=b.folderSort}a=b.store=Ext.StoreMgr.lookup(a)}else {if(b.root){a=b.store=Ext.data.StoreManager.lookup(a);a.setRoot(b.root);if(b.folderSort!==undefined){a.folderSort=b.folderSort;a.sort()}}}}return a},setStore:function(a){var b=this;a=b.applyStore(a);if(!a.getRoot()){a.setRoot({})}a.setRootVisible(b.rootVisible);if(b.view){b.view.setRootNode(a.getRootNode())}b.bindStore(a)},bindStore:function(b,e){var a=this,c=b.getRoot(),d=a.bufferedRenderer;Ext.panel.Table.prototype.bindStore.apply(this,arguments);if(d){if(d.store){d.bindStore(b)}}b.singleExpand=a.singleExpand;a.storeListeners=a.mon(b,{destroyable:!0,rootchange:a.onRootChange,scope:a});a.storeRelayers=a.relayEvents(b,['beforeload','load']);if(!a.rootVisible&&!b.autoLoad&&!(c.isExpanded()||c.isLoading())){if(c.isLoaded()){c.data.expanded=!0;b.onNodeExpand(c,c.childNodes)}else {if(b.autoLoad!==!1){c.data.expanded=!1;c.expand()}}}b.ownerTree=a;if(!e){a.view.setRootNode(c)}},addRelayers:function(b){var a=this;if(a.rootRelayers){a.rootRelayers.destroy();a.rootRelayers=null}a.rootRelayers=a.mon(b,{destroyable:!0,append:a.createRelayer('itemappend'),remove:a.createRelayer('itemremove'),move:a.createRelayer('itemmove',[0,4]),insert:a.createRelayer('iteminsert'),beforeappend:a.createRelayer('beforeitemappend'),beforeremove:a.createRelayer('beforeitemremove'),beforemove:a.createRelayer('beforeitemmove'),beforeinsert:a.createRelayer('beforeiteminsert'),expand:a.createRelayer('itemexpand',[0,1]),collapse:a.createRelayer('itemcollapse',[0,1]),beforeexpand:a.createRelayer('beforeitemexpand',[0,1]),beforecollapse:a.createRelayer('beforeitemcollapse',[0,1]),scope:a})},unbindStore:function(){var a=this,b=a.store;if(b){Ext.panel.Table.prototype.unbindStore.call(this);Ext.destroy(a.storeListeners,a.storeRelayers,a.rootRelayers);delete b.ownerTree;b.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get('checked')},expandNode:function(b,d,a,c){return this.getView().expand(b,d,a,c||this)},collapseNode:function(b,d,a,c){return this.getView().collapse(b,d,a,c||this)},expandAll:function(c,d){var b=this,a=b.getRootNode();if(a){Ext.suspendLayouts();a.expand(!0,c,d||b);Ext.resumeLayouts(!0)}},collapseAll:function(d,a){var c=this,b=c.getRootNode(),e=c.getView();if(b){Ext.suspendLayouts();a=a||c;if(e.rootVisible){b.collapse(!0,d,a)}else {b.collapseChildren(!0,d,a)}Ext.resumeLayouts(!0)}},expandPath:function(p,a){var i=arguments,b=this,j=b.view,g=a&&a.field||b.store.model.idProperty,o,n,k=a&&a.separator||'/',c,e,d,h,f,m,l;if(a&&typeof a==='object'){g=a.field||b.store.model.idProperty;k=a.separator||'/';c=a.callback;e=a.scope;o=a.select;n=a.focus}else {g=i[1]||b.store.model.idProperty;k=i[2]||'/';c=i[3];e=i[4]}if(Ext.isEmpty(p)){return Ext.callback(c,e||b,[!1,null])}f=p.split(k);m=!f[0];if(m){d=b.getRootNode();h=1}else {d=b.store.findNode(g,f[0]);h=0}if(!d||m&&d.get(g)!==f[1]){return Ext.callback(c,e||b,[!1,d])}l=function(m){var d=this,q,k,i;if(++h===f.length){if(o){j.getSelectionModel().select(d)}if(n){j.getNavigationModel().setPosition(d,0)}return Ext.callback(c,e||b,[!0,d,j.getNode(d)])}for(k=0,q=m?m.length:0;k<q;k++){d=m[k];i=d.get(g);if(i||i===0){i=i.toString()}if(i===f[h]){return d.expand(!1,l)}}d=this;Ext.callback(c,e||b,[!1,d,j.getNode(d)])};d.expand(!1,l)},ensureVisible:function(f,a){if(f.isEntity||typeof f==='number'){return Ext.panel.Table.prototype.ensureVisible.call(this,f,a)}var c=this,i=a&&a.field||c.store.model.idProperty,g=a&&a.separator||'/',h,j,b,m,k,e,d,l=function(e,d,g,b){if(!b&&e&&d){b=d.findChild(i,k)}if(b){c.doEnsureVisible(b,a)}else {Ext.callback(h,j||c,[!1,d])}};if(a){h=a.callback;j=a.scope}b=f.split(g);m=!b[0];k=b.pop();if(b.length&&!(m&&b.length===1)){c.expandPath(b.join(g),i,g,l)}else {e=c.store.findNode(i,k);if(e){d=e.parentNode;if(d&&!d.isExpanded()){d.expand()}l(!0,null,null,e)}else {Ext.callback(h,j||c,[!1,null])}}},selectPath:function(e,c,a,b,d){this.ensureVisible(e,{field:c,separator:a,select:!0,callback:b,scope:d})}},1,['treepanel'],['component','box','container','panel','tablepanel','treepanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'treepanel':!0},['widget.treepanel'],0,[Ext.tree,'Panel',Ext.tree,'TreePanel',Ext,'TreePanel'],0);Ext.cmd.derive('Ext.menu.Item',Ext.Component,{alternateClassName:'Ext.menu.TextItem',isMenuItem:!0,activated:!1,activeCls:'x-menu-item-active',clickHideDelay:0,destroyMenu:!0,disabledCls:'x-menu-item-disabled',hideOnClick:!0,menuAlign:'tl-tr?',menuExpandDelay:200,menuHideDelay:200,tooltipType:'qtip',focusable:!0,ariaRole:'menuitem',ariaEl:'itemEl',baseCls:'x-menu-item',arrowCls:'x-menu-item-arrow',baseIconCls:'x-menu-item-icon',textCls:'x-menu-item-text',indentCls:'x-menu-item-indent',indentNoSeparatorCls:'x-menu-item-indent-no-separator',indentRightIconCls:'x-menu-item-indent-right-icon',indentRightArrowCls:'x-menu-item-indent-right-arrow',linkCls:'x-menu-item-link',linkHrefCls:'x-menu-item-link-href',childEls:['itemEl','iconEl','textEl','arrowEl'],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:!1,iconAlign:'left',initComponent:function(){var a=this,b=a.cls?[a.cls]:[],c;if(a.hasOwnProperty('canActivate')){a.focusable=a.canActivate}if(a.plain){b.push('x-menu-item-plain')}if(b.length){a.cls=b.join(' ')}if(a.menu){c=a.menu;a.menu=null;a.setMenu(c)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&a.canActivate!==!1&&!a.destroying&&!a.destroyed&&a.isVisible(!0)},onFocus:function(b){var a=this;Ext.Component.prototype.onFocus.call(this,b);if(!a.disabled){if(!a.plain){a.addCls(a.activeCls)}a.activated=!0;if(a.hasListeners.activate){a.fireEvent('activate',a)}}},onFocusLeave:function(b){var a=this;Ext.Component.prototype.onFocusLeave.call(this,b);if(a.activated){if(!a.plain){a.removeCls(a.activeCls)}a.doHideMenu();a.activated=!1;if(a.hasListeners.deactivate){a.fireEvent('deactivate',a)}}},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand();if(a&&a.isVisible()){a.hide()}},deferHideParentMenus:function(){for(var a=this.getRefOwner();a&&(a.isMenu&&a.floating||a.isMenuItem);a=a.getRefOwner()){if(a.isMenu){a.hide()}}},expandMenu:function(c,b){var a=this;if(a.activated&&a.menu){a.hideOnClick=!1;a.cancelDeferHide();b=b==null?a.menuExpandDelay:b;if(b===0){a.doExpandMenu(c)}else {a.cancelDeferExpand();a.expandMenuTimer=Ext.defer(a.doExpandMenu,b,a,[c])}}},doExpandMenu:function(c){var b=this,a=b.menu;if(!a.isVisible()){b.parentMenu.activeChild=a;a.ownerCmp=b;a.parentMenu=b.parentMenu;a.constrainTo=document.body;a.autoFocus=!c||!c.pointerType;a.showBy(b,b.menuAlign)}},getRefItems:function(c){var b=this.menu,a;if(b){a=b.getRefItems(c);a.unshift(b)}return a||[]},getValue:function(){return this.value},hideMenu:function(b){var a=this;if(a.menu){a.cancelDeferExpand();a.hideMenuTimer=Ext.defer(a.doHideMenu,Ext.isNumber(b)?b:a.menuHideDelay,a)}},onClick:function(b){var a=this,e=a.clickHideDelay,f=b.browserEvent,d,c;if(!a.href||a.disabled){b.stopEvent();if(a.disabled){return !1}}if(a.disabled||a.handlingClick){return}if(a.hideOnClick){if(!e){a.deferHideParentMenus()}else {a.deferHideParentMenusTimer=Ext.defer(a.deferHideParentMenus,e,a)}}d=a.fireEvent('click',a,b);if(a.destroyed){return}if(d!==!1&&a.handler){Ext.callback(a.handler,a.scope,[a,b],0,a)}if(Ext.isIE9m){c=f.returnValue===!1?!0:!1}else {c=!!f.defaultPrevented}if(a.href&&b.type!=='click'&&!c){a.handlingClick=!0;a.itemEl.dom.click();a.handlingClick=!1}if(!a.hideOnClick){a.focus()}return d},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;a.cancelDeferExpand();a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var a=this,c=a.glyph,j=Ext._glyphFontFamily,b=!!(a.icon||a.iconCls||c),f=!!a.menu,i=a.iconAlign==='right'&&!f,e=a.isMenuCheckItem,d=[],k=a.ownerCt,g=k.plain,h;if(a.plain){a.ariaEl='el'}Ext.Component.prototype.beforeRender.call(this);if(b){if(f&&a.showCheckbox){b=!1}}if(typeof c==='string'){h=c.split('@');c=h[0];j=h[1]}if(!g||b&&!i||e){if(k.showSeparator&&!g){d.push(a.indentCls)}else {d.push(a.indentNoSeparatorCls)}}if(f){d.push(a.indentRightArrowCls)}else {if(b&&(i||e)){d.push(a.indentRightIconCls)}}Ext.applyIf(a.renderData,{hasHref:!!a.href,href:a.href||'#',hrefTarget:a.hrefTarget,icon:a.icon,iconCls:a.iconCls,glyph:c,glyphCls:c?'x-menu-item-glyph':undefined,glyphFontFamily:j,hasIcon:b,hasMenu:f,indent:!g||b||e,isCheckItem:e,rightIcon:i,plain:a.plain,text:a.text,arrowCls:a.arrowCls,baseIconCls:a.baseIconCls,textCls:a.textCls,indentCls:d.join(' '),linkCls:a.linkCls,linkHrefCls:a.linkHrefCls,groupCls:a.group?a.groupCls:'',tabIndex:a.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,!0)}},getMenu:function(){return this.menu||null},setMenu:function(b,f){var a=this,e=a.menu,h=a.arrowEl,d=a.ariaEl.dom,c,g;if(e){e.ownerCmp=e.parentMenu=null;if(f===!0||f!==!1&&a.destroyMenu){Ext.destroy(e)}if(d){d.removeAttribute('aria-haspopup');d.removeAttribute('aria-owns')}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});delete c['aria-haspopup'];delete c['aria-owns']}}if(b){g=b.isMenu;b=a.menu=Ext.menu.Manager.get(b,{ownerCmp:a,focusOnToFront:!1});b.setOwnerCmp(a,g);if(d){d.setAttribute('aria-haspopup',!0);d.setAttribute('aria-owns',b.id)}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-haspopup']=!0;c['aria-owns']=b.id}}else {b=a.menu=null}if(b&&a.rendered&&!a.destroying&&h){h[b?'addCls':'removeCls'](a.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(a){var b=this.iconEl,c=this.icon;if(b){b.src=a||Ext.BLANK_IMAGE_URL}this.icon=a;this.fireEvent('iconchange',this,c,a)},setIconCls:function(b){var a=this,c=a.iconEl,d=a.iconCls;if(c){if(a.iconCls){c.removeCls(a.iconCls)}if(b){c.addCls(b)}}a.iconCls=b;a.fireEvent('iconchange',a,d,b)},setText:function(b){var a=this,d=a.textEl||a.el,c=a.text;a.text=b;if(a.rendered){d.setHtml(b||'');a.updateLayout()}a.fireEvent('textchange',a,c,b)},getTipAttr:function(){return this.tooltipType==='qtip'?'data-qtip':'title'},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(b,c){var a=this;if(a.rendered){if(!c){a.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:a.itemEl.id},b));a.tooltip=b}else {a.itemEl.dom.setAttribute(a.getTipAttr(),b)}}else {a.tooltip=b}return a},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}},0,['menuitem'],['component','box','menuitem'],{'component':!0,'box':!0,'menuitem':!0},['widget.menuitem'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,'Item',Ext.menu,'TextItem'],0);Ext.define('Ext.theme.triton.menu.Item',{override:'Ext.menu.Item',compatibility:Ext.isIE8,onFocus:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocus).call(this,a);this.repaintIcons()},onFocusLeave:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocusLeave).call(this,a);this.repaintIcons()},privates:{repaintIcons:function(){var c=this.iconEl,a=this.arrowEl,b=this.checkEl;if(c){c.syncRepaint()}if(a){a.syncRepaint()}if(b){b.syncRepaint()}}}});Ext.cmd.derive('Ext.menu.CheckItem',Ext.menu.Item,{checkedCls:'x-menu-item-checked',uncheckedCls:'x-menu-item-unchecked',groupCls:'x-menu-group-icon',hideOnClick:!1,checkChangeDisabled:!1,submenuText:'{0} submenu',ariaRole:'menuitemcheckbox',childEls:['checkEl'],showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:'x-menu-item-checkbox',initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(a.group){Ext.menu.Manager.registerCheckable(a);if(a.initialConfig.hideOnClick!==!1){a.hideOnClick=!0}}},beforeRender:function(){var a=this,b;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(a.renderData,{checkboxCls:a.checkboxCls,showCheckbox:a.showCheckbox});b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-checked']=a.menu?'mixed':a.checked;if(a.menu){b['aria-label']=Ext.String.formatEncode(a.submenuText,a.text)}},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,!0);if(a.checkChangeDisabled){a.disableCheckChange()}if(Ext.isGecko&&a.checkEl){a.checkEl.on('mousedown',a.onMouseDownCheck)}},disableCheckChange:function(){var a=this,b=a.checkEl;if(b){b.addCls(a.disabledCls)}if(Ext.isIE8&&a.rendered){a.el.repaint()}a.checkChangeDisabled=!0},enableCheckChange:function(){var a=this,b=a.checkEl;if(b){b.removeCls(a.disabledCls)}a.checkChangeDisabled=!1},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&'touch'===b.pointerType&&!a.checkEl.contains(b.target))){a.setChecked(!a.checked);if(b.type==='keydown'&&a.menu){return !1}}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setText:function(c){var a=this,b=a.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,c);if(b&&a.menu){b.setAttribute('aria-label',Ext.String.formatEncode(a.submenuText,c))}},setChecked:function(b,d){var a=this,f=a.checkedCls,e=a.uncheckedCls,c=a.el,g=a.ariaEl.dom;if(a.checked!==b&&(d||a.fireEvent('beforecheckchange',a,b)!==!1)){if(c){if(b){c.addCls(f);c.removeCls(e)}else {c.addCls(e);c.removeCls(f)}}if(g){g.setAttribute('aria-checked',a.menu?'mixed':!!b)}a.checked=b;Ext.menu.Manager.onCheckChange(a,b);if(!d){Ext.callback(a.checkHandler,a.scope,[a,b],0,a);a.fireEvent('checkchange',a,b)}}}},0,['menucheckitem'],['component','box','menuitem','menucheckitem'],{'component':!0,'box':!0,'menuitem':!0,'menucheckitem':!0},['widget.menucheckitem'],0,[Ext.menu,'CheckItem'],0);Ext.cmd.derive('Ext.menu.Separator',Ext.menu.Item,{focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:'x-menu-item-separator',text:'&#160;',ariaRole:'separator',beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,['menuseparator'],['component','box','menuitem','menuseparator'],{'component':!0,'box':!0,'menuitem':!0,'menuseparator':!0},['widget.menuseparator'],0,[Ext.menu,'Separator'],0);Ext.define('Ext.theme.neptune.menu.Separator',{override:'Ext.menu.Separator',border:!0});Ext.cmd.derive('Ext.menu.Menu',Ext.panel.Panel,{enableKeyNav:!0,allowOtherMenus:!1,ariaRole:'menu',floating:!0,constrain:!0,hidden:!0,hideMode:'visibility',ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:undefined,defaultMinWidth:120,defaultAlign:'tl-bl?',focusOnToFront:!1,bringParentToFront:!1,defaultFocus:':focusable',menuClickBuffer:0,baseCls:'x-menu',_iconSeparatorCls:'x-menu-icon-separator',_itemCmpCls:'x-menu-item-cmp',layout:{type:'vbox',align:'stretchmax',overflowHandler:'Scroller'},initComponent:function(){var a=this,d=['x-menu'],c=a.bodyCls?[a.bodyCls]:[],e=a.floating!==!1,b={element:'el',click:a.onClick,mouseover:a.onMouseOver,scope:a};if(Ext.supports.Touch){b.pointerdown=a.onMouseOver}a.on(b);a.on({beforeshow:a.onBeforeShow,scope:a});if(a.plain){d.push('x-menu-plain')}a.cls=d.join(' ');c.push('x-menu-body',Ext.dom.Element.unselectableCls);a.bodyCls=c.join(' ');if(e){if(a.minWidth===undefined){a.minWidth=a.defaultMinWidth}}else {a.hidden=!!a.initialConfig.hidden;a.constrain=!1}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(a.getLayout(),{configureItem:a.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){var a=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!a.getSizeModel().width.shrinkWrap){a.layout.align='stretch'}if(a.floating){a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-expanded']=!!a.autoShow}},onBoxReady:function(){var a=this,c=a._iconSeparatorCls,b=a.focusableKeyNav;if(b){b.map.processEventScope=a;b.map.processEvent=function(a){if(a.keyCode===a.ESC){a.target=this.el.dom}return a};b.map.addBinding([{key:Ext.event.Event.ESC,handler:a.onEscapeKey,scope:a},{key:/[\w]/,handler:a.onShortcutKey,scope:a,shift:!1,ctrl:!1,alt:!1}])}else {a.escapeKeyNav=new Ext.util.KeyNav(a.el,{eventName:'keydown',scope:a,esc:a.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(a.showSeparator){a.iconSepEl=a.body.insertFirst({role:'presentation',cls:c+' '+c+'-'+a.ui,html:'&#160;'})}if(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){a.el.on({scope:a,click:a.preventClick,translate:!1})}a.mouseMonitor=a.el.monitorMouseLeave(100,a.onMouseLeave,a)},onFocusLeave:function(b){var a=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,b);a.mixins.focusablecontainer.onFocusLeave.call(a,b);if(a.floating){a.hide()}},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var b=this,a=b.lastFocusedChild;if(a){a.blur()}},getItemFromEvent:function(d){var c=this,b=c.layout.getRenderTarget().dom,a=d.getTarget();while(a.parentNode!==b){a=a.parentNode;if(!a){return}}return Ext.getCmp(a.id)},lookupComponent:function(a){var b=this;if(typeof a==='string'){a=b.lookupItemFromString(a)}else {if(Ext.isObject(a)){a=b.lookupItemFromObject(a)}}if(!a.dock){a.minWidth=a.minWidth||b.minWidth}return a},lookupItemFromObject:function(a){var b=this;if(!a.isComponent){if(!a.xtype){a=Ext.create('Ext.menu.'+(Ext.isBoolean(a.checked)?'Check':'')+'Item',a)}else {a=Ext.ComponentManager.create(a,a.xtype)}}if(a.isMenuItem){a.parentMenu=b}return a},lookupItemFromString:function(a){return a==='separator'||a==='-'?new Ext.menu.Separator():new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:a})},configureItem:function(a){var c=this.owner,f='x-',e=c.ui,b,d;if(a.isMenuItem){a.setUI(e)}else {if(c.items.getCount()>1&&!a.rendered&&!a.dock){d=c._itemCmpCls;b=[d+' '+d+'-'+e];if(!c.plain&&(a.indent!==!1||a.iconCls==='no-icon')){b.push(f+'menu-item-indent-'+e)}if(a.rendered){a.el.addCls(b)}else {a.cls=(a.cls||'')+' '+b.join(' ')}a.$extraMenuCls=b}}this.callParent(arguments)},onRemove:function(a){Ext.panel.Panel.prototype.onRemove.call(this,a);if(!a.destroyed&&a.$extraMenuCls){a.el.removeCls(a.$extraMenuCls)}},onClick:function(b){var c=this,f=b.type,a,d,e=f==='keydown';if(c.disabled){b.stopEvent();return}a=c.getItemFromEvent(b);if(a&&a.isMenuItem){if(!a.menu||!c.ignoreParentClicks){d=a.onClick(b)}else {b.stopEvent()}if(a.menu&&d!==!1&&e){a.expandMenu(b,0)}}if(!a||a.disabled){a=undefined}c.fireEvent('click',c,a,b)},onDestroy:function(){var a=this;if(a.escapeKeyNav){a.escapeKeyNav.destroy()}a.parentMenu=a.ownerCmp=a.escapeKeyNav=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.iconSepEl)}Ext.menu.Manager.onHide(a);Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(a){if(this.disabled){return}this.fireEvent('mouseleave',this,a)},onMouseOver:function(c){var a=this,g=c.getRelatedTarget(),e=!a.el.contains(g),b=a.getItemFromEvent(c),d=a.parentMenu,f=a.ownerCmp;if(e&&d){d.setActiveItem(f);f.cancelDeferHide();d.mouseMonitor.mouseenter()}if(a.disabled){return}if(b){if(!b.containsFocus){b.focus()}if(b.expandMenu){b.expandMenu(c)}}if(e){a.fireEvent('mouseenter',a,c)}a.fireEvent('mouseover',a,b,c)},setActiveItem:function(a){var b=this;if(a&&a!==b.lastFocusedChild){b.focusChild(a,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(h,g){var e=String.fromCharCode(g.getCharCode()),c=this.query('>[text]'),f=c.length,a=this.lastFocusedChild,d=Ext.Array.indexOf(c,a),b=d;for(;;){if(++b===f){b=0}a=c[b];if(b===d){return}if(a.text&&a.text[0].toUpperCase()===e){a.focus();return}}},onFocusableContainerTabKey:function(a){if(this.floating){this.hide()}},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(b){var c=this,a=c.lastFocusedChild;b.preventDefault();if(a&&a.expandMenu){a.expandMenu(b,0)}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return !1}},beforeShow:function(){var a=this,c,b,d;if(a.floating){c=a.hasFloatMenuParent();if(!c&&!a.allowOtherMenus){Ext.menu.Manager.hideAll()}if(c){a.focusAnchor=c.focusAnchor}else {b=Ext.Element.getActiveElement();if(b===document.body||b===document.documentElement){a.focusAnchor=null}else {a.focusAnchor=b}}a.savedMaxHeight=a.maxHeight;d=a.container.getViewSize().height;a.maxHeight=Math.min(a.maxHeight||d,d)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var a=this,b=a.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(a);if(a.floating&&b){b.setAttribute('aria-expanded',!0)}if(a.floating&&a.autoFocus){a.maxHeight=a.savedMaxHeight;a.focus()}},onHide:function(d,f,e){var a=this,c=a.ariaEl.dom,b;if(a.el.contains(Ext.Element.getActiveElement())){b=a.focusAnchor||a.ownerCmp||a.up(':focusable');if(b){a.previousFocus=b}}Ext.panel.Panel.prototype.onHide.call(this,d,f,e);a.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(a);if(a.floating&&c){c.setAttribute('aria-expanded',!1)}},preventClick:function(b){var a=this.getItemFromEvent(b);if(a&&a.isMenuItem&&!a.href){b.preventDefault()}},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up('menu[floating=true]')},setOwnerCmp:function(b,c){var a=this;a.parentMenu=b.isMenuItem?b:null;a.ownerCmp=b;a.registerWithOwnerCt();delete a.hierarchicallyHidden;a.onInheritedAdd(b,c);a.containerOnAdded(b,c)}}},0,['menu'],['component','box','container','panel','menu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0},['widget.menu'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,'Menu'],0);Ext.define('Ext.theme.neptune.menu.Menu',{override:'Ext.menu.Menu',showSeparator:!1});Ext.define('Ext.theme.triton.menu.Menu',{override:'Ext.menu.Menu',compatibility:Ext.isIE8,afterShow:function(){var e=this,c,a,b,d;(arguments.callee.$previous||Ext.panel.Panel.prototype.afterShow).apply(this,arguments);c=e.items.getRange();for(b=0,d=c.length;b<d;b++){a=c[b];if(a&&a.repaintIcons){a.repaintIcons()}}}});Ext.cmd.derive('Ext.tree.plugin.TreeViewDragDrop',Ext.plugin.Abstract,{dragText:'{0} selected node{1}',allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:'TreeDD',containerScroll:!1,expandDelay:1000,enableDrop:!0,enableDrag:!0,nodeHighlightColor:'c3daf9',nodeHighlightOnDrop:Ext.enableFx,displayField:'text',init:function(a){Ext.applyIf(a,{copy:this.copy,allowCopy:this.allowCopy});a.on('render',this.onViewRender,this,{single:!0})},destroy:function(){var a=this;a.dragZone=a.dropZone=Ext.destroy(a.dragZone,a.dropZone);Ext.plugin.Abstract.prototype.destroy.call(this)},onViewRender:function(b){var a=this,d=b.ownerCt.ownerGrid||b.ownerCt,c;d.relayEvents(b,['beforedrop','drop']);if(a.enableDrag){if(a.containerScroll){c=b.getEl()}a.dragZone=new Ext.tree.ViewDragZone(Ext.apply({view:b,ddGroup:a.dragGroup||a.ddGroup,dragText:a.dragText,displayField:a.displayField,repairHighlightColor:a.nodeHighlightColor,repairHighlight:a.nodeHighlightOnRepair,scrollEl:c},a.dragZone))}if(a.enableDrop){a.dropZone=new Ext.tree.ViewDropZone(Ext.apply({view:b,ddGroup:a.dropGroup||a.ddGroup,allowContainerDrops:a.allowContainerDrops,appendOnly:a.appendOnly,allowParentInserts:a.allowParentInserts,expandDelay:a.expandDelay,dropHighlightColor:a.nodeHighlightColor,dropHighlight:a.nodeHighlightOnDrop,sortOnDrop:a.sortOnDrop,containerScroll:a.containerScroll},a.dropZone))}}},0,0,0,0,['plugin.treeviewdragdrop'],0,[Ext.tree.plugin,'TreeViewDragDrop'],function(){var a=this.prototype;a.nodeHighlightOnDrop=a.nodeHighlightOnRepair=Ext.enableFx});Ext.cmd.derive('Gnt.patches.TreeViewDragDrop',Sch.util.Patch,{target:'Ext.tree.plugin.TreeViewDragDrop',minVersion:'6.0.0',overrides:{disable:function(){this.callParent(arguments);this.dragZone&&this.dragZone.lock();this.dropZone&&this.dropZone.lock()},enable:function(){this.callParent(arguments);this.dragZone&&this.dragZone.unlock();this.dropZone&&this.dropZone.unlock()}}},0,0,0,0,0,0,[Gnt.patches,'TreeViewDragDrop'],0);Ext.cmd.derive('Ext.form.action.Action',Ext.Base,{alternateClassName:'Ext.form.Action',submitEmptyText:!0,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(c){var a=this.form,b=a&&!a.destroying&&!a.destroyed;this.response=c;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(b){a.afterAction(this,!1)}},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return !0}return this.result=this.handleResponse(a)},getUrl:function(){return this.url||this.form.url},getMethod:function(){return (this.method||this.form.method||'POST').toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return {success:a.onSuccess,failure:a.onFailure,scope:a,timeout:(a.timeout||a.form.timeout)*1000}},statics:{CLIENT_INVALID:'client',SERVER_INVALID:'server',CONNECT_FAILURE:'connect',LOAD_FAILURE:'load'}},1,0,0,0,0,0,[Ext.form.action,'Action',Ext.form,'Action'],0);Ext.cmd.derive('Ext.form.action.Load',Ext.form.action.Action,{alternateClassName:'Ext.form.Action.Load',type:'load',run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(d){var b=this.processResponse(d),a=this.form,c=a&&!a.destroying&&!a.destroyed;if(b===!0||!b.success||!b.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(c){a.afterAction(this,!1)}return}if(c){a.clearInvalid();a.setValues(b.data);a.afterAction(this,!0)}},handleResponse:function(b){var c=this.form.reader,a,d;if(c){a=c.read(b);d=a.records&&a.records[0]?a.records[0].data:null;return {success:a.success,data:d}}return Ext.decode(b.responseText)}},0,0,0,0,['formaction.load'],0,[Ext.form.action,'Load',Ext.form.Action,'Load'],0);Ext.cmd.derive('Ext.form.action.Submit',Ext.form.action.Action,{alternateClassName:'Ext.form.Action.Submit',type:'submit',run:function(){var a=this,b=a.form;if(a.clientValidation===!1||b.isValid()){a.doSubmit()}else {a.failureType=Ext.form.action.Action.CLIENT_INVALID;b.afterAction(a,!1)}},doSubmit:function(){var a=this,b=Ext.apply(a.createCallback(),{url:a.getUrl(),method:a.getMethod(),headers:a.headers}),e=a.form,d=a.jsonSubmit||e.jsonSubmit,f=d?'jsonData':'params',c;if(e.hasUpload()){c=a.buildForm();b.form=c.formEl;b.isUpload=!0}else {b[f]=a.getParams(d)}Ext.Ajax.request(b);if(c){a.cleanup(c)}},cleanup:function(b){var e=b.formEl,f=b.uploadEls,d=b.uploadFields,g=d.length,a,c;for(a=0;a<g;++a){c=d[a];if(!c.clearOnSubmit){c.restoreInput(f[a])}}if(e){Ext.removeNode(e)}},getParams:function(b){var a=!1,c=Ext.form.action.Action.prototype.getParams.call(this),d=this.form.getValues(a,a,this.submitEmptyText!==a,b,!0);return Ext.apply({},d,c)},buildForm:function(){var a=this,h=[],f,i,q=a.form,j=a.getParams(),c=[],n=[],o=q.getFields().items,b,l=o.length,k,e,d,g,p,m;for(b=0;b<l;++b){k=o[b];if(k.isFileUpload()){c.push(k)}}for(e in j){if(j.hasOwnProperty(e)){d=j[e];if(Ext.isArray(d)){p=d.length;for(g=0;g<p;g++){h.push(a.getFieldConfig(e,d[g]))}}else {h.push(a.getFieldConfig(e,d))}}}f={tag:'form',role:'presentation',action:a.getUrl(),method:a.getMethod(),target:a.target?Ext.isString(a.target)?a.target:Ext.fly(a.target).dom.name:'_self',style:'display:none',cn:h};if(c.length){f.encoding=f.enctype='multipart/form-data'}i=Ext.DomHelper.append(Ext.getBody(),f);l=c.length;for(b=0;b<l;++b){m=c[b].extractFileInput();i.appendChild(m);n.push(m)}return {formEl:i,uploadFields:c,uploadEls:n}},getFieldConfig:function(b,a){return {tag:'input',type:'hidden',name:b,value:Ext.String.htmlEncode(a)}},onSuccess:function(e){var a=this.form,c=a&&!a.destroying&&!a.destroyed,d=!0,b=this.processResponse(e);if(b!==!0&&!b.success){if(b.errors&&c){a.markInvalid(b.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=!1}if(c){a.afterAction(this,d)}},handleResponse:function(g){var i=this.form,f=i.errorReader,e,a,b,h,c,d;if(f){e=f.read(g);c=e.records;a=[];if(c){for(b=0,h=c.length;b<h;b++){a[b]=c[b].data}}if(a.length<1){a=null}d={success:e.success,errors:a}}else {try{d=Ext.decode(g.responseText)}catch(j){d={success:!1,errors:[]}}}return d}},0,0,0,0,['formaction.submit'],0,[Ext.form.action,'Submit',Ext.form.Action,'Submit'],0);Ext.cmd.derive('Ext.form.Basic',Ext.util.Observable,{alternateClassName:'Ext.form.BasicForm',taskDelay:10,constructor:function(c,d){var a=this,b;a.owner=c;a.fieldMonitors={validitychange:a.checkValidityDelay,enable:a.checkValidityDelay,disable:a.checkValidityDelay,dirtychange:a.checkDirtyDelay,errorchange:a.checkErrorDelay,scope:a};a.checkValidityTask=new Ext.util.DelayedTask(a.checkValidity,a);a.checkDirtyTask=new Ext.util.DelayedTask(a.checkDirty,a);a.checkErrorTask=new Ext.util.DelayedTask(a.checkError,a);a.monitor=new Ext.container.Monitor({selector:'[isFormField]:not([excludeForm])',scope:a,addHandler:a.onFieldAdd,removeHandler:a.onFieldRemove,invalidateHandler:a.onMonitorInvalidate});a.monitor.bind(c);Ext.apply(a,d);if(Ext.isString(a.paramOrder)){a.paramOrder=a.paramOrder.split(/[\s,|]/)}b=a.reader;if(b&&!b.isReader){if(typeof b==='string'){b={type:b}}a.reader=Ext.createByAlias('reader.'+b.type,b)}b=a.errorReader;if(b&&!b.isReader){if(typeof b==='string'){b={type:b}}a.errorReader=Ext.createByAlias('reader.'+b.type,b)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=!0;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:'Please Wait...',trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var a=this,b=a.monitor;if(b){b.unbind();a.monitor=null}a.clearListeners();a.checkValidityTask.cancel();a.checkDirtyTask.cancel();a.checkErrorTask.cancel();a.checkValidityTask=a.checkDirtyTask=a.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(a){a.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query('[formBind]'))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(a){var c=a.preventMark,b;a.preventMark=!0;b=a.isValid();a.preventMark=c;return !b})},isValid:function(){var b=this,a;Ext.suspendLayouts();a=b.getFields().filterBy(function(a){return !a.validate()});Ext.resumeLayouts(!0);return a.length<1},checkValidity:function(){var a=this,b;if(a.destroyed){return}b=!a.hasInvalidField();if(b!==a.wasValid){a.onValidityChange(b);a.fireEvent('validitychange',a,b);a.wasValid=b}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else {this.checkValidity()}},checkError:function(){this.fireEvent('errorchange',this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else {this.checkError()}},onValidityChange:function(e){var d=this.getBoundItems(),b,a,f,c;if(d){b=d.items;f=b.length;for(a=0;a<f;a++){c=b[a];if(c.disabled===e){c.setDisabled(!e)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else {this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.destroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent('dirtychange',this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(a,b){if(Ext.isString(a)){a=Ext.ClassManager.instantiateByAlias('formaction.'+a,Ext.apply({},b,{form:this}))}if(this.fireEvent('beforeaction',this,a)!==!1){this.beforeAction(a);Ext.defer(a.run,100,a)}return this},submit:function(a){a=a||{};var c=this,b;if(a.standardSubmit||c.standardSubmit){b='standardsubmit'}else {b=c.api?'directsubmit':'submit'}return c.doAction(b,a)},load:function(a){return this.doAction(this.api?'directload':'load',a)},updateRecord:function(a){a=a||this._record;if(!a){return this}var d=a.self.fields,e=this.getFieldValues(),f={},c=0,g=d.length,b;for(;c<g;++c){b=d[c].name;if(e.hasOwnProperty(b)){f[b]=e[b]}}a.beginEdit();a.set(f);a.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(g){var a=this,c=g.waitMsg,f='x-mask-loading',h=a.getFields().items,e,i=h.length,d,b;for(e=0;e<i;e++){d=h[e];if(d.isFormField&&d.syncValue){d.syncValue()}}if(c){b=a.waitMsgTarget;if(b===!0){a.owner.el.mask(c,f)}else {if(b){b=a.waitMsgTarget=Ext.get(b);b.mask(c,f)}else {a.floatingAncestor=a.owner.up('[floating]');if(a.floatingAncestor){a.savePreventFocusOnActivate=a.floatingAncestor.preventFocusOnActivate;a.floatingAncestor.preventFocusOnActivate=!0}Ext.MessageBox.wait(c,g.waitTitle||a.waitTitle)}}}},afterAction:function(a,e){var b=this;if(a.waitMsg){var d=Ext.MessageBox,c=b.waitMsgTarget;if(c===!0){b.owner.el.unmask()}else {if(c){c.unmask()}else {d.hide()}}}if(b.floatingAncestor){b.floatingAncestor.preventFocusOnActivate=b.savePreventFocusOnActivate}if(e){if(a.reset){b.reset()}Ext.callback(a.success,a.scope||a,[b,a]);b.fireEvent('actioncomplete',b,a)}else {Ext.callback(a.failure,a.scope||a,[b,a]);b.fireEvent('actionfailed',b,a)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(a){var g=this,c,d,b,f,e;function mark(c,d){var b=g.findField(c);if(b){b.markInvalid(d)}}if(Ext.isArray(a)){d=a.length;for(c=0;c<d;c++){b=a[c];mark(b.id||b.field,b.msg||b.message)}}else {if(a instanceof Ext.data.ErrorCollection){d=a.items.length;for(c=0;c<d;c++){b=a.items[c];mark(b.field,b.message)}}else {for(e in a){if(a.hasOwnProperty(e)){f=a[e];mark(e,f,a)}}}}return this},setValues:function(a){var e=this,b,d,c;function setVal(c,d){var b=e.findField(c);if(b){b.setValue(d);if(e.trackResetOnLoad){b.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(a)){d=a.length;for(b=0;b<d;b++){c=a[b];setVal(c.id,c.value)}}else {Ext.iterate(a,setVal)}Ext.resumeLayouts(!0);return this},getValues:function(n,m,h,k,l){var a={},j=this.getFields().items,o=j.length,i=Ext.isArray,e,f,c,d,b,g;for(g=0;g<o;g++){e=j[g];if(!m||e.isDirty()){f=e[k?'getModelData':'getSubmitData'](h,l);if(Ext.isObject(f)){for(b in f){if(f.hasOwnProperty(b)){c=f[b];if(h&&c===''){c=e.emptyText||''}if(!e.isRadio){if(a.hasOwnProperty(b)){d=a[b];if(!i(d)){d=a[b]=[d]}if(i(c)){a[b]=d.concat(c)}else {d.push(c)}}else {a[b]=c}}else {a[b]=a[b]||c}}}}}}if(n){a=Ext.Object.toQueryString(a)}return a},getFieldValues:function(a){return this.getValues(!1,a,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var c=this,b=c.getFields().items,a,d=b.length;for(a=0;a<d;a++){b[a].clearInvalid()}Ext.resumeLayouts(!0);return c},reset:function(d){Ext.suspendLayouts();var b=this,c=b.getFields().items,a,e=c.length;for(a=0;a<e;a++){c[a].reset()}Ext.resumeLayouts(!0);if(d===!0){delete b._record}return b},applyToFields:function(d){var b=this.getFields().items,a,c=b.length;for(a=0;a<c;a++){Ext.apply(b[a],d)}return this},applyIfToFields:function(d){var b=this.getFields().items,a,c=b.length;for(a=0;a<c;a++){Ext.applyIf(b[a],d)}return this}},1,0,0,0,0,0,[Ext.form,'Basic',Ext.form,'BasicForm'],0);Ext.cmd.derive('Ext.form.Panel',Ext.panel.Panel,{alternateClassName:['Ext.FormPanel','Ext.form.FormPanel'],layout:'anchor',bodyAriaRole:'form',basicFormConfigs:['api','baseParams','errorReader','jsonSubmit','method','paramOrder','paramsAsHash','reader','standardSubmit','timeout','trackResetOnLoad','url','waitMsgTarget','waitTitle'],initComponent:function(){var a=this;if(a.frame){a.border=!1}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,['beforeaction','actionfailed','actioncomplete','validitychange','dirtychange']);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var d={},c=this.basicFormConfigs,e=c.length,b=0,a;for(;b<e;++b){a=c[b];d[a]=this[a]}return new Ext.form.Basic(this,d)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,c,a,b){return this.getForm().getValues(d,c,a,b)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var b=this.form.getFields().items,a,c=b.length;for(a=0;a<c;a++){b[a].checkChange()}}},0,['form'],['component','box','container','panel','form'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0},['widget.form'],[['fieldAncestor',Ext.form.FieldAncestor]],[Ext.form,'Panel',Ext,'FormPanel',Ext.form,'FormPanel'],0);Ext.cmd.derive('Ext.grid.Panel',Ext.panel.Table,{alternateClassName:['Ext.list.ListView','Ext.ListView','Ext.grid.GridPanel'],viewType:'tableview',lockable:!1,rowLines:!0},0,['grid','gridpanel'],['component','box','container','panel','tablepanel','gridpanel','grid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0},['widget.grid','widget.gridpanel'],0,[Ext.grid,'Panel',Ext.list,'ListView',Ext,'ListView',Ext.grid,'GridPanel'],0);Ext.cmd.derive('Ext.grid.plugin.Editing',Ext.plugin.Abstract,{clicksToEdit:2,triggerEvent:undefined,relayedEvents:['beforeedit','edit','validateedit','canceledit'],defaultFieldUI:'default',defaultFieldXType:'textfield',editStyle:'',constructor:function(b){var a=this;Ext.plugin.Abstract.prototype.constructor.call(this,b);a.mixins.observable.constructor.call(a);a.on('edit',function(c,d){a.fireEvent('afteredit',c,d)})},init:function(b){var a=this,c=b.ownerLockable;a.grid=b;a.view=b.view;a.initEvents();if(b.rendered){a.setup()}else {a.mon(b,{beforereconfigure:a.onBeforeReconfigure,reconfigure:a.onReconfigure,scope:a,beforerender:{fn:a.onBeforeRender,single:!0,scope:a}})}b.editorEventRelayers=b.relayEvents(a,a.relayedEvents);if(c){c.editorEventRelayers=c.relayEvents(a,a.relayedEvents)}b.isEditable=!0;b.editingPlugin=b.view.editingPlugin=a},onBeforeReconfigure:function(){this.reconfiguring=!0},onReconfigure:function(){this.setup();delete this.reconfiguring},onBeforeRender:function(){this.setup()},setup:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns())},destroy:function(){var b=this,a=b.grid;Ext.destroy(b.keyNav);b.clearListeners();if(a){if(a.ownerLockable){Ext.destroy(a.ownerLockable.editorEventRelayers);a.ownerLockable.editorEventRelayers=null}Ext.destroy(a.editorEventRelayers);a.editorEventRelayers=null;a.editingPlugin=a.view.editingPlugin=b.grid=b.view=b.editor=b.keyNav=null}Ext.plugin.Abstract.prototype.destroy.call(this)},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else {if(!Ext.isArray(a)){a=[a]}}var d=this,c,h=a.length,e=function(c,b){return d.getColumnField(this,b)},f=function(){return d.hasColumnField(this)},g=function(b){d.setColumnField(this,b)},b;for(c=0;c<h;c++){b=a[c];if(!b.getEditor){b.getEditor=e}if(!b.hasEditor){b.hasEditor=f}if(!b.setEditor){b.setEditor=g}}},removeFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else {if(!Ext.isArray(a)){a=[a]}}var c,d=a.length,b;for(c=0;c<d;c++){b=a[c];b.getEditor=b.hasEditor=b.setEditor=b.field=b.editor=null}},getColumnField:function(b,d){var c=this,a=b.field;if(!(a&&a.isFormField)){a=b.field=c.createColumnField(b,d)}if(a&&a.ui==='default'&&!a.hasOwnProperty('ui')){a.ui=c.defaultFieldUI}return a},hasColumnField:function(a){return !!(a.field&&a.field.isComponent)},setColumnField:function(a,b){a.field=b;a.field=this.createColumnField(a)},createColumnField:function(b,d){var a=b.field,c;if(!a&&b.editor){a=b.editor;b.editor=null}if(!a&&d){a=d}if(a){c=b.dataIndex;if(a.isComponent){a.column=b}else {if(Ext.isString(a)){a={name:c,xtype:a,column:b}}else {a=Ext.apply({name:c,column:b},a)}a=Ext.ComponentManager.create(a,this.defaultFieldXType)}a.dataIndex=c;a.isEditorComponent=!0;b.field=a}return a},initEvents:function(){var a=this;a.initEditTriggers();a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var a=this,b=a.view;if(a.triggerEvent==='cellfocus'){a.mon(b,'cellfocus',a.onCellFocus,a)}else {if(a.triggerEvent==='rowfocus'){a.mon(b,'rowfocus',a.onRowFocus,a)}else {if(b.getSelectionModel().isCellModel){b.onCellFocus=a.beforeViewCellFocus.bind(a)}a.mon(b,a.triggerEvent||'cell'+(a.clicksToEdit===1?'click':'dblclick'),a.onCellClick,a)}}a.initAddRemoveHeaderEvents();a.view.getNavigationModel().addKeyBindings({esc:a.onEscKey,scope:a})},beforeViewCellFocus:function(a){if(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(a.row,a.columnHeader)){this.view.focusCell.apply(this.view,arguments)}},onRowFocus:function(b,a,c){this.startEdit(a,0)},onCellFocus:function(b,c,a){this.startEdit(a.row,a.column)},onCellClick:function(a,i,e,g,j,h,c){var b=a.expanderSelector,d=a.ownerCt.getColumnManager().getHeaderAtIndex(e),f=d.getEditor(g);if(this.shouldStartEdit(f)&&(!b||!c.getTarget(b))){a.ownerGrid.setActionableMode(!0,c.position)}},initAddRemoveHeaderEvents:function(){var a=this,b=a.grid.headerCt;a.mon(b,{scope:a,add:a.onColumnAdd,columnmove:a.onColumnMove,beforedestroy:a.beforeGridHeaderDestroy})},onColumnAdd:function(b,a){this.initFieldAccessors(a)},onColumnMove:Ext.emptyFn,onEscKey:function(b){if(this.editing){var a=Ext.getCmp(b.getTarget().getAttribute('componentId'));if(!(a&&a.isPickerField&&a.isExpanded)){return this.cancelEdit()}}},beforeEdit:Ext.emptyFn,shouldStartEdit:function(a){return !!a},getEditingContext:function(d,a){var e=this,g=e.grid,k=g.visibleColumnManager,c,f,h,j,b,i=e.grid.lockable?e.grid:e.view;if(!i.componentLayoutCounter){i.on({boxready:Ext.Function.bind(e.startEdit,e,[d,a]),single:!0});return}if(e.disabled||e.grid.collapsed||!e.grid.view.isVisible(!0)){return}if(Ext.isNumber(a)){a=k.getHeaderAtIndex(a)}if(!a){return}if(a.hidden){a=a.next(':not([hidden])')||a.prev(':not([hidden])')}c=a.getView();g=c.ownerCt;g.ensureVisible(d,{column:a});f=c.getRow(d);if(!f){return}j=c.getVisibleColumnManager().indexOf(a);if(Ext.isNumber(d)){h=d;d=c.getRecord(f)}else {h=c.indexOf(f)}if(!d){return}b=(new Ext.grid.CellContext(c)).setAll(c,h,j,d,a);b.grid=g;b.store=c.dataSource;b.field=a.dataIndex;b.value=b.originalValue=d.get(a.dataIndex);b.row=f;b.node=c.getNode(d);b.cell=c.getCellByPosition(b,!0);return b},cancelEdit:function(){var a=this;a.editing=!1;a.fireEvent('canceledit',a,a.context)},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.fireEvent('edit',a,a.context)}a.context=null;a.editing=!1},validateEdit:function(a){var b=this;return b.fireEvent('validateedit',b,a)!==!1&&!a.cancel}},1,0,0,0,['editing.editing'],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.grid.plugin,'Editing'],0);Ext.cmd.derive('Ext.layout.container.Editor',Ext.layout.container.Container,{autoSizeDefault:{width:'field',height:'field'},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var d=this,b=d.owner.autoSize,c=b&&b.width,a=d.sizePolicies;a=a[c]||a.$;c=b&&b.height;a=a[c]||a.$;return a},calculate:function(c){var f=this,a=f.owner,b=a.autoSize,e,d;if(b===!0){b=f.autoSizeDefault}if(b){e=f.getDimension(a,b.width,'getWidth',a.width);d=f.getDimension(a,b.height,'getHeight',a.height)}c.childItems[0].setSize(e,d);c.setWidth(e);c.setHeight(d);c.setContentSize(e||a.field.getWidth(),d||a.field.getHeight())},getDimension:function(c,d,a,b){switch(d){case 'boundEl':return c.boundEl[a]();case 'field':return undefined;default:return b;}}},0,0,0,0,['layout.editor'],0,[Ext.layout.container,'Editor'],0);Ext.cmd.derive('Ext.Editor',Ext.container.Container,{layout:'editor',allowBlur:!0,revertInvalid:!0,value:'',alignment:'c-c?',offsets:[0,0],shadow:'frame',constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,baseCls:'x-editor',editing:!1,preventDefaultAlign:!0,specialKeyDelay:1,initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field||{},'textfield');b.msgTarget=b.msgTarget||'qtip';a.mon(b,{scope:a,specialkey:a.onSpecialKey});if(b.grow){a.mon(b,'autosize',a.onFieldAutosize,a,{delay:1})}a.floating={constrain:a.constrain};a.items=b;Ext.container.Container.prototype.initComponent.apply(this,arguments)},onAdded:function(a){this.ownerCmp=a},onFieldAutosize:function(){this.updateLayout()},afterRender:function(e,d){var b=this,c=b.field,a=c.inputEl;Ext.container.Container.prototype.afterRender.apply(this,arguments);if(a){a.dom.name='';if(b.swallowKeys){a.swallowEvent(['keypress','keydown'])}}},onSpecialKey:function(g,b){var a=this,e=b.getKey(),d=a.completeOnEnter&&e===b.ENTER,f=a.cancelOnEsc&&e===b.ESC,c=a.specialKeyTask;if(d||f){b.stopEvent();if(!c){a.specialKeyTask=c=new Ext.util.DelayedTask()}c.delay(a.specialKeyDelay,d?a.completeEdit:a.cancelEdit,a)}a.fireEvent('specialkey',a,g,b)},startEdit:function(h,c,g){var a=this,b=a.field,d,f,e;a.completeEdit();a.boundEl=Ext.get(h);d=a.boundEl.dom;c=Ext.isDefined(c)?c:Ext.String.trim(d.textContent||d.innerText||d.innerHTML);if(a.fireEvent('beforestartedit',a,a.boundEl,c)!==!1){Ext.suspendLayouts();if(!a.rendered){f=a.ownerCt;e=a.renderTo||f&&f.getEl()||Ext.getBody();Ext.fly(e).position();a.renderTo=e}a.startValue=c;a.show();a.realign(!0);b.suspendEvents();b.setValue(c);b.resetOriginalValue();b.resumeEvents();if(g!==!1){b.focus(b.selectOnFocus?!0:[Number.MAX_VALUE])}if(b.autoSize){b.autoSize()}Ext.resumeLayouts(!0);a.toggleBoundEl(!1);a.editing=!0}},realign:function(b){var a=this;if(b===!0){a.updateLayout()}a.alignTo(a.boundEl,a.alignment,a.offsets)},completeEdit:function(d){var a=this,c=a.field,e=a.startValue,b;if(!a.editing){return}if(c.assertValue){c.assertValue()}b=a.getValue();if(!c.isValid()){if(a.revertInvalid!==!1){a.cancelEdit(d)}return}if(a.ignoreNoChange&&!c.didValueChange(b,e)){a.onEditComplete(d);return}if(a.fireEvent('beforecomplete',a,b,e)!==!1){b=a.getValue();if(a.updateEl&&a.boundEl){a.boundEl.setHtml(b)}a.onEditComplete(d);a.fireEvent('complete',a,b,e)}},onShow:function(){var a=this;Ext.container.Container.prototype.onShow.apply(this,arguments);a.fireEvent('startedit',a,a.boundEl,a.startValue)},cancelEdit:function(e){var a=this,c=a.startValue,b=a.field,d;if(a.editing){if(b){d=a.editedValue=a.getValue();b.suspendEvents();a.setValue(c);b.resumeEvents()}a.onEditComplete(e);a.fireEvent('canceledit',a,d,c);delete a.editedValue}},onEditComplete:function(a){this.editing=!1;if(a!==!0){this.hide();this.toggleBoundEl(!0)}},onFocusLeave:function(b){var a=this;if(a.allowBlur===!0&&a.editing){a.completeEdit()}Ext.container.Container.prototype.onFocusLeave.call(this,b)},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit()}else {if(b.collapse){b.collapse()}}Ext.container.Container.prototype.onHide.apply(this,arguments)},getValue:function(){return this.field.getValue()},setValue:function(a){this.field.setValue(a)},toggleBoundEl:function(a){if(this.hideEl!==!1){this.boundEl.setVisible(a)}},beforeDestroy:function(){var a=this,b=a.specialKeyTask;if(b){b.cancel()}a.specialKeyTask=a.field=a.boundEl=Ext.destroy(a.field);Ext.container.Container.prototype.beforeDestroy.apply(this,arguments)}},0,['editor'],['component','box','container','editor'],{'component':!0,'box':!0,'container':!0,'editor':!0},['widget.editor'],0,[Ext,'Editor'],0);Ext.cmd.derive('Ext.grid.CellEditor',Ext.Editor,{isCellEditor:!0,alignment:'l-l!',hideEl:!1,cls:'x-small-editor x-grid-editor x-grid-cell-editor',treeNodeSelector:'.x-tree-node-text',shim:!1,shadow:!1,setGrid:function(d){var a=this,c=a.grid,b;if(d!==c){b={beforeitemupdate:a.beforeItemUpdate,itemupdate:a.onItemUpdate,scope:a};if(c){c.getView().un(b)}a.grid=d;d.getView().on(b)}},beforeViewRefresh:function(c){var a=this,b=a.el&&a.el.dom;if(b){a.wasAllowBlur=a.allowBlur;if(a.editing){c.cellFocused=!1;a.allowBlur=!1}if(b.parentNode){c.refreshing=!0;b.parentNode.removeChild(b)}}},onViewRefresh:function(d){var a=this,e=a.el&&a.el.dom,c,b=a.context;if(e){c=d.getCellByPosition(b,!0);if(!c){a.allowBlur=a.wasAllowBlur;a.completeEdit();Ext.getDetachedBody().dom.appendChild(e);return}b.node=d.getNode(b.record);b.row=d.getRow(b.record);b.cell=c;b.rowIdx=d.indexOf(b.row);c.insertBefore(e,c.firstChild);a.boundEl=a.container=Ext.get(c);a.realign(!0);if(a.editing){if(Ext.isIE){Ext.defer(function(){if(!a.destroyed){a.allowBlur=a.wasAllowBlur;a.field.focus()}},10)}else {a.allowBlur=a.wasAllowBlur;a.field.focus()}}}},beforeItemUpdate:function(e,g,h,d){var c=this,b=c.context,f=d.length,a;if(e===b.record){for(a=0;a<f;a++){if(d[a]===b.column){c.needsFixOnItemUpdate=!0;c.beforeViewRefresh(b.view);return}}}},onItemUpdate:function(d,b,c){var a=this.context.view;if(this.needsFixOnItemUpdate){this.needsFixOnItemUpdate=a.refreshing=!1;this.onViewRefresh(a)}},startEdit:function(a,c,b){this.context=this.editingPlugin.context;Ext.Editor.prototype.startEdit.call(this,a,c,b)},onShow:function(){var b=this,a=b.boundEl.down(b.context.view.innerSelector);if(a){if(b.isForTree){a=a.child(b.treeNodeSelector)}a.hide()}Ext.Editor.prototype.onShow.apply(this,arguments)},onFocusEnter:function(){var a=this.context,b=a.view;a.node=b.getNode(a.record);a.row=b.getRow(a.record);a.cell=a.getCell(!0);a.rowIdx=b.indexOf(a.row);this.realign(!0);Ext.Editor.prototype.onFocusEnter.apply(this,arguments);this.focusEnterEvent=null},onEditComplete:function(a){if(a){this.restoreCell()}Ext.Editor.prototype.onEditComplete.apply(this,arguments)},onHide:function(){this.restoreCell();Ext.Editor.prototype.onHide.apply(this,arguments)},onSpecialKey:function(g,b){var a=this,f=b.getKey(),c=a.completeOnEnter&&f===b.ENTER,d=a.cancelOnEsc&&f===b.ESC,e=a.editingPlugin.view;if(c||d){b.stopEvent();if(c){a.completeEdit(!0)}else {if(d){a.cancelEdit(!0)}}e.getNavigationModel().setPosition(a.context,null,b);e.ownerGrid.setActionableMode(!1)}},getRefOwner:function(){return this.column&&this.column.getView()},restoreCell:function(){var b=this,a=b.boundEl.down(b.context.view.innerSelector);if(a){if(b.isForTree){a=a.child(b.treeNodeSelector)}a.show()}},afterRender:function(){var a=this,b=a.field;Ext.Editor.prototype.afterRender.apply(this,arguments);if(b.isCheckbox){b.mon(b.inputEl,{mousedown:a.onCheckBoxMouseDown,click:a.onCheckBoxClick,scope:a})}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(!1,10)},realign:function(j){var a=this,c=a.boundEl,b=c.down(a.context.view.innerSelector),d=b.dom.firstChild,f=c.getWidth(),h=Ext.Array.clone(a.offsets),k=a.grid,e,i='',g=!d||d.nodeType===3&&!Ext.String.trim(i=d.data).length;if(a.isForTree){e=a.getTreeNodeOffset(b);f-=Math.abs(e);h[0]+=e}if(k.columnLines){f-=c.getBorderWidth('rl')}if(j===!0){a.field.setWidth(f)}if(g){b.dom.innerHTML='X'}a.alignTo(c,a.alignment,h);if(g){b.dom.firstChild.data=i}},getTreeNodeOffset:function(a){return a.child(this.treeNodeSelector).getOffsetsTo(a)[0]}},0,0,['component','box','container','editor'],{'component':!0,'box':!0,'container':!0,'editor':!0},0,0,[Ext.grid,'CellEditor'],0);Ext.define('Ext.rtl.grid.CellEditor',{override:'Ext.grid.CellEditor',getTreeNodeOffset:function(b){var a=arguments.callee.$previous.apply(this,arguments);if(this.editingPlugin.grid.isOppositeRootDirection()){a=-(b.getWidth()-a-b.child(this.treeNodeSelector).getWidth())}return a}});Ext.cmd.derive('Ext.grid.plugin.CellEditing',Ext.grid.plugin.Editing,{init:function(b){var a=this;a.cacheDeactivatedEditors=Ext.Function.createAnimationFrame(a.cacheDeactivatedEditors);b.registerActionable(a);Ext.grid.plugin.Editing.prototype.init.apply(this,arguments);a.editors=new Ext.util.MixedCollection(!1,function(a){return a.editorId})},beforeGridHeaderDestroy:function(g){var d=this,e=d.grid.getColumnManager().getColumns(),f=e.length,c,a,b;for(c=0;c<f;c++){a=e[c];b=d.editors.getByKey(a.getItemId());if(!b){b=a.editor||a.field}Ext.destroy(b);d.removeFieldAccessors(a)}},onReconfigure:function(c,b,a){if(a){this.editors.clear()}Ext.grid.plugin.Editing.prototype.onReconfigure.call(this)},destroy:function(){var a=this;if(a.editors){a.editors.each(Ext.destroy,Ext);a.editors.clear()}Ext.grid.plugin.Editing.prototype.destroy.call(this)},initCancelTriggers:function(){var a=this,b=a.grid;a.mon(b,{columnresize:a.cancelEdit,columnmove:a.cancelEdit,scope:a})},isCellEditable:function(c,a){var d=this,b=d.getEditingContext(c,a);if(b.view.isVisible(!0)&&b){a=b.column;c=b.record;if(a&&d.getEditor(c,a)){return !0}}},activateCell:function(g){var b=this,f=g.record,e=g.column,c,d,a;c=b.getEditingContext(f,e);if(!c){return}if(!b.preventBeforeCheck){if(!e.getEditor(f)||b.beforeEdit(c)===!1||b.fireEvent('beforeedit',b,c)===!1||c.cancel){return}}a=b.getEditor(f,e);if(a){d=Ext.get(c.cell);if(!a.rendered){a.hidden=!0;a.render(d,0)}else {if(a.container!==d){a.container=d;d.dom.insertBefore(a.el.dom,d.dom.firstChild)}a.hide()}b.setEditingContext(c);a.startEdit(d,c.value,!1);if(a.editing){b.setActiveEditor(a);b.setActiveRecord(f);b.setActiveColumn(e);b.editing=!0;b.scroll=g.view.el.getScroll()}return a.editing}},activateRow:Ext.emptyFn,deactivate:function(){var c=this,b=c.editors.items,d=b.length,a;for(a=0;a<d;a++){b[a].hide()}c.cacheDeactivatedEditors()},cacheDeactivatedEditors:function(){var f=this,d=f.editors.items,e=d.length,b,a,c=Ext.getDetachedBody();for(b=0;b<e;b++){a=d[b];if(!a.isVisible()){c.dom.appendChild(a.el.dom);a.container=c}}},startEdit:function(b,a){this.startEditByPosition((new Ext.grid.CellContext(this.view)).setPosition(b,a))},completeEdit:function(b){var a=this.getActiveEditor();if(a){a.completeEdit(b)}},setEditingContext:function(a){this.context=a},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(f,c){var b=this,e=b.editors,d=c.getItemId(),a=e.getByKey(d);if(!a){a=c.getEditor(f);if(!a){return !1}if(a instanceof Ext.grid.CellEditor){a.floating=!0}else {a=new Ext.grid.CellEditor({floating:!0,editorId:d,field:a})}a.field.excludeForm=!0;if(a.column!==c){a.column=c;a.on({scope:b,complete:b.onEditComplete,canceledit:b.cancelEdit});c.on('removed',b.onColumnRemoved,b)}e.add(a)}a.ownerCmp=b.grid.ownerGrid;if(c.isTreeColumn){a.isForTree=c.isTreeColumn;a.addCls('x-tree-cell-editor')}a.setGrid(b.grid);a.editingPlugin=b;return a},onColumnRemoved:function(c){var a=this,b=a.context;if(b&&b.column===c){a.cancelEdit()}c.un('removed',a.onColumnRemoved,a)},setColumnField:function(a,c){var b=this.editors.getByKey(a.getItemId());Ext.destroy(b,a.field);this.editors.removeAtKey(a.getItemId());Ext.grid.plugin.Editing.prototype.setColumnField.apply(this,arguments)},getCell:function(b,a){return this.grid.getView().getCell(b,a)},onEditComplete:function(g,d,f){var a=this,b=g.context,e,c;e=b.view;c=b.record;b.value=d;if(!a.validateEdit(b)){a.editing=!1;return}if(!c.isEqual(d,f)){c.set(b.column.dataIndex,d);b.rowIdx=e.indexOf(c)}a.fireEvent('edit',a,b);if(a.context===b){a.setActiveEditor(null);a.setActiveColumn(null);a.setActiveRecord(null);a.editing=!1}},cancelEdit:function(a){var b=this,c=b.context;if(a&&a.isCellEditor){b.context.value='editedValue' in a?a.editedValue:a.getValue();Ext.grid.plugin.Editing.prototype.cancelEdit.apply(this,arguments);if(a.context===c){b.setActiveEditor(null);b.setActiveColumn(null);b.setActiveRecord(null)}else {b.editing=!0}}else {a=b.getActiveEditor();if(a&&a.field){a.cancelEdit()}}},startEditByPosition:function(b){var a=this,e=a.grid.getColumnManager(),d,c=a.getActiveEditor();if(!b.isCellContext){b=(new Ext.grid.CellContext(a.view)).setPosition(b.row,a.grid.getColumnManager().getColumns()[b.column])}d=e.getHeaderIndex(b.column);b.column=e.getVisibleHeaderClosestToIndex(d);if(a.grid.actionableMode){if(a.editing&&b.isEqual(a.context)){return}if(c){c.completeEdit()}}if(a.grid.actionableMode){if(a.activateCell(b)){a.activateRow(a.view.all.item(b.rowIdx,!0));c=a.getEditor(b.record,b.column);if(c){c.field.focus()}}}else {return a.grid.setActionableMode(!0,b)}}},0,0,0,0,['plugin.cellediting'],0,[Ext.grid.plugin,'CellEditing'],0);Ext.cmd.derive('Ext.layout.container.Column',Ext.layout.container.Auto,{alternateClassName:'Ext.layout.ColumnLayout',type:'column',itemCls:'x-column',targetCls:'x-column-layout-ct',clearSide:'left',columnWidthSizePolicy:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},createsInnerCt:!0,manageOverflow:!0,setsItemSize:!0,needsItemSize:!0,isItemShrinkWrap:function(a){return !0},getItemSizePolicy:function(b,a){if(b.columnWidth){if(!a){a=this.owner.getSizeModel()}if(!a.width.shrinkWrap){return this.columnWidthSizePolicy}}return this.autoSizePolicy},calculateItems:function(g,k){var i=this,l=i.columnCount,o=g.targetContext,j=g.childItems,n=j.length,f=0,m=k.gotWidth,h,e,c,a,d,b;if(m===!1){o.domBlock(i,'width');h=!0}else {if(m){e=k.width}else {return !0}}for(c=0;c<n;++c){a=j[c];if(l){if(c%l){a.setProp('clear',null)}else {a.setProp('clear',i.clearSide)}}d=a.getMarginInfo().width;if(!a.widthModel.calculated){b=a.getProp('width');if(typeof b!=='number'){a.block(i,'width');h=!0}f+=b+d}}if(!h){e=e<f?0:e-f;for(c=0;c<n;++c){a=j[c];if(a.widthModel.calculated){d=a.marginInfo.width;b=a.target.columnWidth;b=Math.floor(b*e)-d;b=a.setWidth(b);f+=b+d}}g.setContentWidth(f+g.paddingContext.getPaddingInfo().width)}return !h}},0,0,0,0,['layout.column'],0,[Ext.layout.container,'Column',Ext.layout,'ColumnLayout'],0);Ext.define('Ext.rtl.layout.container.Column',{override:'Ext.layout.container.Column',getRenderData:function(){var a=(arguments.callee.$previous||Ext.layout.container.Auto.prototype.getRenderData).call(this);if(this.owner.getInherited().rtl){this.clearSide='right';a.innerCtCls=(a.innerCtCls||'')+' x-rtl'}return a}});Ext.cmd.derive('Ext.form.CheckboxManager',Ext.util.MixedCollection,{singleton:!0,getByName:function(b,a){return this.filterBy(function(c){return c.name===b&&c.getFormId()===a})}},0,0,0,0,0,0,[Ext.form,'CheckboxManager'],0);Ext.cmd.derive('Ext.form.field.Checkbox',Ext.form.field.Base,{alternateClassName:'Ext.form.Checkbox',stretchInputElFixed:!1,childEls:['boxLabelEl','innerWrapEl','displayEl'],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">','{beforeBoxLabelTpl}','<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">','{beforeBoxLabelTextTpl}','{boxLabel}','{afterBoxLabelTextTpl}','</label>','{afterBoxLabelTpl}','</tpl>','<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','/>','<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">','{beforeBoxLabelTpl}','<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">','{beforeBoxLabelTextTpl}','{boxLabel}','{afterBoxLabelTextTpl}','</label>','{afterBoxLabelTpl}','</tpl>','</div>',{disableFormats:!0,compiled:!0}],publishes:{checked:1},subTplInsertions:['beforeBoxLabelTpl','afterBoxLabelTpl','beforeBoxLabelTextTpl','afterBoxLabelTextTpl','boxLabelAttrTpl','inputAttrTpl'],isCheckbox:!0,focusCls:'form-checkbox-focus',fieldBodyCls:'x-form-cb-wrap',checked:!1,checkedCls:'x-form-cb-checked',boxLabelCls:'x-form-cb-label',boxLabelAlign:'after',afterLabelCls:'x-form-cb-after',wrapInnerCls:'x-form-cb-wrap-inner',noBoxLabelCls:'x-form-cb-no-box-label',inputValue:'on',checkChangeEvents:[],inputType:'checkbox',isTextInput:!1,ariaRole:'checkbox',onRe:/^on$/i,inputCls:'x-form-cb',_checkboxCls:'x-form-cb-input',_clipCls:'x-hidden-clip',initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var a=this,b=!!a.checked;a.originalValue=a.lastValue=b;a.setValue(b)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(g){var a=this,f=a.boxLabel,e=a.boxLabelAlign,d=e==='before',c,b;c=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,g),{clipCls:a._clipCls,checkboxCls:a._checkboxCls,disabled:a.readOnly||a.disabled,wrapInnerCls:a.wrapInnerCls,boxLabel:f,boxLabelCls:a.boxLabelCls,boxLabelAlign:e,labelAlignedBefore:d,afterLabelCls:d?a.afterLabelCls:'',noBoxLabelCls:!f?a.noBoxLabelCls:'',inputName:a.name||a.id});b=c.inputElAriaAttributes;if(b){b['aria-checked']=!!a.checked;b['aria-labelledby']=a.id+'-boxLabelEl'}return c},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.inputEl.on({click:'onBoxClick',scope:a,translate:!1});a.displayEl.on({click:'onBoxClick',mousedown:'_onDisplayElMouseDown',scope:a})},setBoxLabel:function(b){var a=this;a.boxLabel=b;if(a.rendered){a.boxLabelEl.setHtml(b);a.boxLabelEl[b?'removeCls':'addCls'](a.noBoxLabelCls);a.updateLayout()}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){a.setValue(!a.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(a,b){return a===!0||a==='true'||a==='1'||a===1||((Ext.isString(a)||Ext.isNumber(a))&&b?a==b:this.onRe.test(a))},setRawValue:function(e){var a=this,d=a.inputEl,c=a.displayEl,b=a.isChecked(e,a.inputValue);if(d){a[b?'addCls':'removeCls'](a.checkedCls);if(a.ariaRole){a.ariaEl.dom.setAttribute('aria-checked',b)}}if(Ext.isIE8&&c&&b!==a.lastValue){c.repaint()}a.checked=a.rawValue=b;if(!a.duringSetValue){a.lastValue=b}return b},setValue:function(e){var a=this,c,b,f,d;if(Ext.isArray(e)){c=a.getManager().getByName(a.name,a.getFormId()).items;f=c.length;for(b=0;b<f;++b){d=c[b];d.setValue(Ext.Array.contains(e,d.inputValue))}}else {a.duringSetValue=!0;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete a.duringSetValue}return a},valueToRaw:Ext.identityFn,onChange:function(c,d){var a=this,b=a.handler;if(b){Ext.callback(b,a.scope,[a,c],0,a)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(a.reference&&a.publishState){a.publishState('checked',c)}},resetOriginalValue:function(f){var c=this,b,d,e,a;if(!f){b=c.getManager().getByName(c.name,c.getFormId()).items;e=b.length;for(a=0;a<e;++a){d=b[a];if(d!==c){b[a].resetOriginalValue(!0)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(a){a.dom.disabled=b.readOnly}},setReadOnly:function(c){var b=this,a=b.inputEl;if(a){a.dom.disabled=!!c||b.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var a=this,b;if(!a.formId){b=a.up('form');if(b){a.formId=b.id}}return a.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(a){a.preventDefault();this.inputEl.focus(1)}}},0,['checkbox','checkboxfield'],['component','box','field','checkboxfield','checkbox'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0},['widget.checkbox','widget.checkboxfield'],0,[Ext.form.field,'Checkbox',Ext.form,'Checkbox'],0);Ext.define('Ext.theme.triton.form.field.Checkbox',{override:'Ext.form.field.Checkbox',compatibility:Ext.isIE8,initComponent:function(){(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this);Ext.on({show:'onGlobalShow',scope:this})},onFocus:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onFocus).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onBlur:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onBlur).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onGlobalShow:function(a){if(a.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});Ext.cmd.derive('Ext.layout.container.Card',Ext.layout.container.Fit,{alternateClassName:'Ext.layout.CardLayout',type:'card',hideInactive:!0,deferredRender:!1,getRenderTree:function(){var b=this,a=b.getActiveItem();if(a){if(a.hasListeners.beforeactivate&&a.fireEvent('beforeactivate',a)===!1){a=b.activeItem=b.owner.activeItem=null}else {if(a.hasListeners.activate){a.on({boxready:function(){a.fireEvent('activate',a)},single:!0})}}if(b.deferredRender){if(a){return b.getItemsRenderTree([a])}}else {return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments)}}},renderChildren:function(){var a=this,b=a.getActiveItem();if(!a.deferredRender){Ext.layout.container.Fit.prototype.renderChildren.call(this)}else {if(b){a.renderItems([b],a.getRenderTarget())}}},isValidParent:function(a,c,d){var b=a.el?a.el.dom:Ext.getDom(a);return b&&b.parentNode===(c.dom||c)||!1},getActiveItem:function(){var a=this,c=a.activeItem===undefined?a.owner&&a.owner.activeItem:a.activeItem,b=a.parseActiveItem(c);if(b&&a.owner.items.indexOf(b)!==-1){a.activeItem=b}return b==null?null:a.activeItem||a.owner.activeItem},parseActiveItem:function(a){var b;if(a&&a.isComponent){b=a}else {if(typeof a==='number'||a===undefined){b=this.getLayoutItems()[a||0]}else {if(a===null){b=null}else {b=this.owner.getComponent(a)}}}return b},configureItem:function(a){a.setHiddenState(a!==this.getActiveItem());Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onAdd:function(a,b){Ext.layout.container.Fit.prototype.onAdd.call(this,a,b);this.setItemHideMode(a)},onRemove:function(a){var b=this;Ext.layout.container.Fit.prototype.onRemove.call(this,a);b.resetItemHideMode(a);if(a===b.activeItem){b.activeItem=undefined}},getAnimation:function(b,c){var a=(b||{}).cardSwitchAnimation;if(a===!1){return !1}return a||c.cardSwitchAnimation},getNext:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:!1)},next:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getNext(b),a)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:!1)},prev:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getPrev(b),a)},setActiveItem:function(a){var c=this,d=c.owner,b=c.activeItem,g=d.rendered,e,f;a=c.parseActiveItem(a);e=d.items.indexOf(a);if(e===-1){e=d.items.items.length;Ext.suspendLayouts();a=d.add(a);Ext.resumeLayouts()}if(a&&b!==a){if(a.fireEvent('beforeactivate',a,b)===!1){return !1}if(b&&b.fireEvent('beforedeactivate',b,a)===!1){return !1}if(g){Ext.suspendLayouts();if(!a.rendered){c.renderItem(a,c.getRenderTarget(),d.items.length)}if(b){if(c.hideInactive){f=b.el.contains(Ext.Element.getActiveElement());b.hide();if(b.hidden){b.hiddenByLayout=!0;b.fireEvent('deactivate',b,a)}else {return !1}}}if(a.hidden){a.show()}if(a.hidden){c.activeItem=a=null}else {c.activeItem=a;if(f){if(!a.defaultFocus){a.defaultFocus=':focusable'}a.focus()}}Ext.resumeLayouts(!0)}else {c.activeItem=a}a.fireEvent('activate',a,b);return c.activeItem}return !1},resetItemHideMode:function(a){a.hideMode=a.originalHideMode;delete a.originalHideMode},setItemHideMode:function(a){a.originalHideMode=a.hideMode;a.hideMode='offsets'}},0,0,0,0,['layout.card'],0,[Ext.layout.container,'Card',Ext.layout,'CardLayout'],0);Ext.cmd.derive('Ext.tab.Tab',Ext.button.Button,{isTab:!0,baseCls:'x-tab',closeElOverCls:'x-tab-close-btn-over',closeElPressedCls:'x-tab-close-btn-pressed',config:{rotation:'default',tabPosition:'top'},closable:!0,closeText:'Close Tab',active:!1,childEls:['closeEl'],scale:!1,ariaRole:'tab',tabIndex:-1,keyHandlers:{DELETE:'onDeleteKey'},_btnWrapCls:'x-tab-wrap',_btnCls:'x-tab-button',_baseIconCls:'x-tab-icon-el',_glyphCls:'x-tab-glyph',_innerCls:'x-tab-inner',_textCls:'x-tab-text',_noTextCls:'x-tab-no-text',_hasIconCls:'x-tab-icon',_activeCls:'x-tab-active',_closableCls:'x-tab-closable',overCls:'x-tab-over',_pressedCls:'x-tab-pressed',_disabledCls:'x-tab-disabled',_rotateClasses:{1:'x-tab-rotate-right',2:'x-tab-rotate-left'},_positions:{top:{'default':'top',0:'top',1:'left',2:'right'},right:{'default':'top',0:'right',1:'top',2:'bottom'},bottom:{'default':'bottom',0:'bottom',1:'right',2:'left'},left:{'default':'top',0:'left',1:'bottom',2:'top'}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this;if(a.card){a.setCard(a.card)}Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var a=this.getRotation();return a!=='default'?a:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var a=this,g=a._rotateClasses,h=a.getTabPosition(),f=a.getActualRotation(),c=a._rotateCls,e=a._rotateCls=g[f],b=a._positionCls,d=a._positionCls=a._positions[h][f];if(c!==e){if(c){a.removeCls(c)}if(e){a.addCls(e)}}if(b!==d){if(b){a.removeClsWithUI(b)}if(d){a.addClsWithUI(d)}if(a.rendered){a.updateFrame()}}if(a.rendered){a.setElOrientation()}},onAdded:function(a,c,b){Ext.button.Button.prototype.onAdded.call(this,a,c,b);this.syncRotationAndPosition()},getTemplateArgs:function(){var b=this,a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.closable=b.closable;a.closeText=b.closeText;return a},beforeRender:function(){var a=this,c=a.up('tabbar'),b=a.up('tabpanel');Ext.button.Button.prototype.beforeRender.call(this);a.ariaRenderAttributes=a.ariaRenderAttributes||{};if(a.active){a.ariaRenderAttributes['aria-selected']=!0;a.addCls(a._activeCls)}else {a.ariaRenderAttributes['aria-selected']=!1}a.syncClosableCls();if(!a.minWidth){a.minWidth=c?c.minTabWidth:a.minWidth;if(!a.minWidth&&b){a.minWidth=b.minTabWidth}if(a.minWidth&&a.iconCls){a.minWidth+=25}}if(!a.maxWidth){a.maxWidth=c?c.maxTabWidth:a.maxWidth;if(!a.maxWidth&&b){a.maxWidth=b.maxTabWidth}}},onRender:function(){var a=this;a.setElOrientation();Ext.button.Button.prototype.onRender.apply(this,arguments);if(a.closable){a.closeEl.addClsOnOver(a.closeElOverCls);a.closeEl.addClsOnClick(a.closeElPressedCls)}},setElOrientation:function(){var c=this,a=c.getActualRotation(),b=c.el;if(a){b.setVertical(a===1?90:270)}else {b.setHorizontal()}},enable:function(b){var a=this;Ext.button.Button.prototype.enable.apply(this,arguments);a.removeCls(a._disabledCls);return a},disable:function(b){var a=this;Ext.button.Button.prototype.disable.apply(this,arguments);a.addCls(a._disabledCls);return a},setClosable:function(b){var a=this;b=!arguments.length||!!b;if(a.closable!==b){a.closable=b;if(a.card){a.card.closable=b}a.syncClosableCls();if(a.rendered){a.syncClosableElements();a.updateLayout()}}},syncClosableElements:function(){var a=this,b=a.closeEl;if(a.closable){if(!b){b=a.closeEl=a.btnWrap.insertSibling({tag:'span',id:a.id+'-closeEl',cls:a.baseCls+'-close-btn',html:a.closeText},'after')}b.addClsOnOver(a.closeElOverCls);b.addClsOnClick(a.closeElPressedCls)}else {if(b){b.destroy();delete a.closeEl}}},syncClosableCls:function(){var a=this,b=a._closableCls;if(a.closable){a.addCls(b)}else {a.removeCls(b)}},setCard:function(b){var a=this;a.card=b;if(b.iconAlign){a.setIconAlign(b.iconAlign)}if(b.textAlign){a.setTextAlign(b.textAlign)}a.setText(a.title||b.title);a.setIconCls(a.iconCls||b.iconCls);a.setIcon(a.icon||b.icon);a.setGlyph(a.glyph||b.glyph)},onCloseClick:function(){var a=this;if(a.fireEvent('beforeclose',a)!==!1){if(a.tabBar){if(a.tabBar.closeTab(a)===!1){return}}else {a.fireClose()}}},fireClose:function(){this.fireEvent('close',this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el);b.stopEvent();return !1}},onDeleteKey:function(a){if(this.closable){this.onCloseClick();a.stopEvent();return !1}},beforeClick:function(a){if(!a){this.focus()}},activate:function(d){var a=this,b=a.card,c=a.ariaEl.dom;a.active=!0;a.addCls(a._activeCls);if(c){c.setAttribute('aria-selected',!0)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-selected']=!0}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute('aria-expanded',!0)}else {b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes['aria-expanded']=!0}}if(d!==!0){a.fireEvent('activate',a)}},deactivate:function(d){var a=this,b=a.card,c=a.ariaEl.dom;a.active=!1;a.removeCls(a._activeCls);if(c){c.setAttribute('aria-selected',!1)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-selected']=!1}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute('aria-expanded',!1)}else {b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes['aria-expanded']=!1}}if(d!==!0){a.fireEvent('deactivate',a)}},privates:{getFramingInfoCls:function(){return this.baseCls+'-'+this.ui+'-'+this._positionCls},wrapPrimaryEl:function(a){Ext.Button.superclass.wrapPrimaryEl.call(this,a)}}},0,['tab'],['component','box','button','tab'],{'component':!0,'box':!0,'button':!0,'tab':!0},['widget.tab'],0,[Ext.tab,'Tab'],0);Ext.cmd.derive('Ext.layout.component.Body',Ext.layout.component.Auto,{type:'body',beginLayout:function(a){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);a.bodyContext=a.getEl('body')},beginLayoutCycle:function(d,f){var a=this,c=a.lastWidthModel,b=a.lastHeightModel,e=a.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(c&&c.fixed&&d.widthModel.shrinkWrap){e.setWidth(null)}if(b&&b.fixed&&d.heightModel.shrinkWrap){e.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(a,c){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);if(a.targetContext!==a){b+=a.getPaddingInfo().height}return b},calculateOwnerWidthFromContentWidth:function(a,c){var b=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);if(a.targetContext!==a){b+=a.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,!1)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,!1)},publishInnerHeight:function(a,d){var b=d-a.getFrameInfo().height,c=a.targetContext;if(c!==a){b-=a.getPaddingInfo().height}return a.bodyContext.setHeight(b,!a.heightModel.natural)},publishInnerWidth:function(a,d){var b=d-a.getFrameInfo().width,c=a.targetContext;if(c!==a){b-=a.getPaddingInfo().width}a.bodyContext.setWidth(b,!a.widthModel.natural)}},0,0,0,0,['layout.body'],0,[Ext.layout.component,'Body'],0);Ext.cmd.derive('Ext.tab.Bar',Ext.panel.Bar,{baseCls:'x-tab-bar',componentLayout:'body',isTabBar:!0,config:{tabRotation:'default',tabStretchMax:!0,activateOnFocus:!0},defaultType:'tab',plain:!1,ensureActiveVisibleOnChange:!0,ariaRole:'tablist',childEls:['body','strip'],_stripCls:'x-tab-bar-strip',_baseBodyCls:'x-tab-bar-body',renderTpl:'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:'right',right:'left'},_layoutAlign:{top:'end',right:'begin',bottom:'begin',left:'end'},initComponent:function(){var a=this,b=a.initialConfig.layout,d=b&&b.align,c=b&&b.overflowHandler;if(a.plain){a.addCls(a.baseCls+'-plain')}Ext.panel.Bar.prototype.initComponent.call(this);a.setLayout({align:d||(a.getTabStretchMax()?'stretchmax':a._layoutAlign[a.dock]),overflowHandler:c||'scroller'});a.on({click:a.onClick,element:'el',scope:a})},ensureTabVisible:function(a){var b=this,d=b.tabPanel,c=b.layout.overflowHandler;if(b.rendered&&c&&b.tooNarrow&&c.scrollToItem){if(a||a===0){if(!a.isTab){if(Ext.isNumber(a)){a=this.items.getAt(a)}else {if(a.isComponent&&d&&d.items.contains(a)){a=a.tab}}}}if(!a){a=b.activeTab}if(a){c.scrollToItem(a)}}},initRenderData:function(){var a=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:a.bodyCls,baseBodyCls:a._baseBodyCls,bodyTargetCls:a.bodyTargetCls,stripCls:a._stripCls,dock:a.dock})},setDock:function(f){var b=this,a=b.items,d=b.ownerCt,e,c,g;a=a&&a.items;if(a){for(c=0,g=a.length;c<g;c++){e=a[c];if(e.isTab){e.setTabPosition(f)}}}if(b.rendered){b.resetItemMargins();if(d&&d.isHeader){d.resetItemMargins()}b.needsScroll=!0}Ext.panel.Bar.prototype.setDock.call(this,f)},updateTabRotation:function(f){var b=this,a=b.items,c,e,d;a=a&&a.items;if(a){for(c=0,e=a.length;c<e;c++){d=a[c];if(d.isTab){d.setRotation(f)}}}if(b.rendered){b.resetItemMargins();b.needsScroll=!0;b.updateLayout()}},onRender:function(){var a=this;Ext.panel.Bar.prototype.onRender.call(this);if(Ext.isIE8&&a.vertical){a.el.on({mousemove:a.onMouseMove,scope:a})}},afterLayout:function(){this.adjustTabPositions();Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},onAdd:function(a,c){var b=this.onTabContentChange;if(this.ensureActiveVisibleOnChange){a.barListeners=a.on({scope:this,destroyable:!0,glyphchange:b,iconchange:b,textchange:b})}Ext.panel.Bar.prototype.onAdd.call(this,a,c)},onAdded:function(a,c,b){if(a.isHeader){this.addCls(a.baseCls+'-'+a.ui+'-tab-bar')}Ext.panel.Bar.prototype.onAdded.call(this,a,c,b)},onRemove:function(a,c){var b=this;if(b.ensureActiveVisibleOnChange){if(!c){a.barListeners.destroy()}a.barListeners=null}if(a===b.previousTab){b.previousTab=null}Ext.panel.Bar.prototype.onRemove.call(this,a,c)},onRemoved:function(b){var a=this.ownerCt;if(a.isHeader){this.removeCls(a.baseCls+'-'+a.ui+'-tab-bar')}Ext.panel.Bar.prototype.onRemoved.call(this,b)},onTabContentChange:function(a){if(a===this.activeTab){this.ensureTabVisible(a)}},afterComponentLayout:function(d){var a=this,c=a.needsScroll,b=a.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments);if(b&&c&&a.tooNarrow&&b.scrollToItem){b.scrollToItem(a.activeTab)}delete a.needsScroll},onMouseMove:function(d){var b=this,c=b._overTab,e,a;if(d.getTarget('.x-box-scroller')){return}e=b.getTabInfoFromPoint(d.getXY());a=e.tab;if(a!==c){if(c&&c.rendered){c.onMouseLeave(d);b._overTab=null}if(a){a.onMouseEnter(d);b._overTab=a;if(!a.disabled){b.el.setStyle('cursor','pointer')}}else {b.el.setStyle('cursor','default')}}},onMouseLeave:function(b){var a=this._overTab;if(a&&a.rendered){a.onMouseLeave(b)}},getTabInfoFromPoint:function(x){var a=this,w=a.items.items,y=w.length,t=a.layout.innerCt,r=t.getXY(),v=new Ext.util.Point(x[0],x[1]),n=0,b,s,d,u,k,l,m,h,g,e,f,j,i,p,o,q,c;for(;n<y;n++){c=w[n];b=c.lastBox;if(!b||!c.isTab){continue}e=r[0]+b.x;f=r[1]-t.dom.scrollTop+b.y;j=b.width;i=b.height;s=new Ext.util.Region(f,e+j,f+i,e);if(s.contains(v)){d=c.closeEl;if(d){if(a._isTabReversed===undefined){a._isTabReversed=o=c.btnWrap.dom.currentStyle.filter.indexOf('rotation=2')!==-1}q=o?this._reverseDockNames[a.dock]:a.dock;h=d.getWidth();g=d.getHeight();k=a.getCloseXY(d,e,f,j,i,h,g,q);l=k[0];m=k[1];p=new Ext.util.Region(m,l+h,m+g,l);u=p.contains(v)}break}}return {tab:c,close:u}},getCloseXY:function(k,b,c,j,i,g,f,h){var a=k.getXY(),d,e;if(h==='right'){d=b+j-(a[1]-c+f);e=c+(a[0]-b)}else {d=b+(a[1]-c);e=c+b+i-a[0]-g}return [d,e]},closeTab:function(b){var e=this,a=b.card,d=e.tabPanel,c;if(a&&a.fireEvent('beforeclose',a)===!1){return !1}c=e.findNextActivatable(b);Ext.suspendLayouts();if(d&&a){delete b.ownerCt;a.fireEvent('close',a);d.remove(a);if(!d.getComponent(a)){b.fireClose();e.remove(b)}else {b.ownerCt=e;Ext.resumeLayouts(!0);return !1}}if(c){if(d){d.setActiveTab(c.card)}else {e.setActiveTab(c)}c.focus()}Ext.resumeLayouts(!0)},findNextActivatable:function(b){var d=this,a=d.previousTab,c;if(b.active&&d.items.getCount()>1){if(a&&a!==b&&!a.disabled){c=a}else {c=b.next('tab[disabled=false]')||b.prev('tab[disabled=false]')}}return c||d.activeTab},setActiveTab:function(b,c){var a=this;if(!b.disabled&&b!==a.activeTab){if(a.activeTab){if(a.activeTab.destroyed){a.previousTab=null}else {a.previousTab=a.activeTab;a.activeTab.deactivate();a.deactivateFocusable(a.activeTab)}}b.activate();a.activateFocusable(b);a.activeTab=b;a.needsScroll=!0;if(!c){a.fireEvent('change',a,b,b.card);a.updateLayout()}}},privates:{adjustTabPositions:function(){var g=this,f=g.items.items,h=f.length,a,b,e,c,d;if(!Ext.isIE8){d=g._getTabAdjustProp();while(h--){a=f[h];e=a.el;b=a.lastBox;c=a.isTab?a.getActualRotation():0;if(c===1&&a.isVisible()){e.setStyle(d,b.x+b.width+'px')}else {if(c===2&&a.isVisible()){e.setStyle(d,b.x-b.height+'px')}}}}},applyTargetCls:function(a){this.bodyTargetCls=a},_getTabAdjustProp:function(){return 'left'},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(c,g){var f=this,e,a,b,d;if(c.getTarget('.x-box-scroller')){return}if(Ext.isIE8&&f.vertical){d=f.getTabInfoFromPoint(c.getXY());a=d.tab;b=d.close}else {e=c.getTarget('.'+Ext.tab.Tab.prototype.baseCls);a=e&&Ext.getCmp(e.id);b=a&&a.closeEl&&g===a.closeEl.dom}if(b){c.preventDefault()}if(a&&a.isDisabled&&!a.isDisabled()){a.beforeClick(b);if(a.closable&&b){a.onCloseClick()}else {f.doActivateTab(a)}}},doActivateTab:function(a){var b=this.tabPanel;if(b){if(!a.disabled){b.setActiveTab(a.card)}}else {this.setActiveTab(a)}},onFocusableContainerFocus:function(d){var b=this,c=b.mixins.focusablecontainer,a;a=c.onFocusableContainerFocus.call(b,d);if(a&&a.isTab){b.doActivateTab(a)}},onFocusableContainerFocusEnter:function(d){var b=this,c=b.mixins.focusablecontainer,a;a=c.onFocusableContainerFocusEnter.call(b,d);if(a&&a.isTab){b.doActivateTab(a)}},focusChild:function(d,c){var b=this,e=b.mixins.focusablecontainer,a;a=e.focusChild.call(b,d,c);if(b.activateOnFocus&&a&&a.isTab){b.doActivateTab(a)}}}},0,['tabbar'],['component','box','container','tabbar'],{'component':!0,'box':!0,'container':!0,'tabbar':!0},['widget.tabbar'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,'Bar'],0);Ext.define('Ext.rtl.tab.Bar',{override:'Ext.tab.Bar',privates:{_getTabAdjustProp:function(){return this.getInherited().rtl?'right':'left'},getCloseXY:function(l,b,c,e,d,j,i,k){var a,f,g,h;if(this.isOppositeRootDirection()){a=l.getXY();if(k==='right'){f=b+a[1]-c;g=c+d-(a[0]-(b+e-d))-j}else {f=b+e-(a[1]-c)-i;g=c+(a[0]-(b+e-d))}h=[f,g]}else {h=arguments.callee.$previous.apply(this,arguments)}return h}}});Ext.cmd.derive('Ext.tab.Panel',Ext.panel.Panel,{alternateClassName:['Ext.TabPanel'],config:{tabBar:undefined,tabPosition:'top',tabRotation:'default',tabStretchMax:!0},removePanelHeader:!0,plain:!1,itemCls:'x-tabpanel-child',minTabWidth:undefined,maxTabWidth:undefined,deferredRender:!0,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this,c=a.activeTab!==null?a.activeTab||0:null,d=a.dockedItems,b=a.header,f=a.tabBarHeaderPosition,e=a.getTabBar(),g;a.layout=new Ext.layout.container.Card(Ext.apply({owner:a,deferredRender:a.deferredRender,itemCls:a.itemCls,activeItem:c},a.layout));if(f!=null){b=a.header=Ext.apply({},b);g=b.items=b.items?b.items.slice():[];b.itemPosition=f;g.push(e);b.hasTabBar=!0}else {d=[].concat(a.dockedItems||[]);d.push(e);a.dockedItems=d}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);c=a.activeTab=a.getComponent(c);if(c){e.setActiveTab(c.tab,!0)}},onRender:function(){var b=this.items.items,c=b.length,a;Ext.panel.Panel.prototype.onRender.apply(this,arguments);for(a=0;a<c;++a){b[a].getBind()}},setActiveTab:function(a){var b=this,c;if(!Ext.isObject(a)||a.isComponent){a=b.getComponent(a)}c=b.getActiveTab();if(a){Ext.suspendLayouts();if(!a.isComponent){a=b.add(a)}if(c===a||b.fireEvent('beforetabchange',b,a,c)===!1){Ext.resumeLayouts(!0);return c}b.activeTab=a;b.layout.setActiveItem(a);a=b.activeTab=b.layout.getActiveItem();if(a&&a!==c){b.tabBar.setActiveTab(a.tab);Ext.resumeLayouts(!0);if(c!==a){b.fireEvent('tabchange',b,a,c)}}else {Ext.resumeLayouts(!0)}return a}return c},setActiveItem:function(a){return this.setActiveTab(a)},getActiveTab:function(){var a=this,b=a.getComponent(a.activeTab);if(b&&a.items.indexOf(b)!==-1){a.activeTab=b}else {a.activeTab=undefined}return a.activeTab},applyTabBar:function(c){var a=this,b=a.tabBarHeaderPosition!=null?a.getHeaderPosition():a.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:a.ui,dock:b,tabRotation:a.getTabRotation(),vertical:b==='left'||b==='right',plain:a.plain,tabStretchMax:a.getTabStretchMax(),tabPanel:a},c))},updateHeaderPosition:function(a,c){var b=this.getTabBar();if(b&&this.tabBarHeaderPosition!=null){b.setDock(a)}Ext.panel.Panel.prototype.updateHeaderPosition.call(this,a,c)},updateTabPosition:function(b){var a=this.getTabBar();if(a&&this.tabBarHeaderPosition==null){a.setDock(b)}},updateTabRotation:function(b){var a=this.getTabBar();if(a){a.setTabRotation(b)}},onAdd:function(a,g){var b=this,e=Ext.apply({},a.tabConfig),c=b.getTabBar(),d,f={xtype:'tab',title:a.title,icon:a.icon,iconCls:a.iconCls,glyph:a.glyph,ui:c.ui,card:a,disabled:a.disabled,closable:a.closable,hidden:a.hidden&&!a.hiddenByLayout,tooltip:a.tooltip,tabBar:c,tabPosition:c.dock,rotation:c.getTabRotation()};if(a.closeText!==undefined){f.closeText=a.closeText}e=Ext.applyIf(e,f);a.tab=b.tabBar.insert(g,e);a.ariaRole='tabpanel';d=a.ariaEl.dom;if(d){d.setAttribute('aria-labelledby',a.tab.id)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-labelledby']=a.tab.id}a.on({scope:b,enable:b.onItemEnable,disable:b.onItemDisable,beforeshow:b.onItemBeforeShow,iconchange:b.onItemIconChange,iconclschange:b.onItemIconClsChange,glyphchange:b.onItemGlyphChange,titlechange:b.onItemTitleChange});if(a.isPanel){if(b.removePanelHeader){if(a.rendered){if(a.header){a.header.hide()}}else {a.header=!1}}if(a.isPanel&&b.border){a.setBorder(!1)}}if(b.rendered){a.getBind()}if(b.rendered&&b.loader&&b.activeTab===undefined&&b.layout.activeItem!==null){b.setActiveTab(0)}},onMove:function(b,d,a){var c=this.getTabBar();Ext.panel.Panel.prototype.onMove.call(this,b,d,a);if(c.items.indexOf(b.tab)!==a){c.move(b.tab,a)}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return !1}},onItemGlyphChange:function(b,a){b.tab.setGlyph(a)},onItemIconChange:function(b,a){b.tab.setIcon(a)},onItemIconClsChange:function(b,a){b.tab.setIconCls(a)},onItemTitleChange:function(b,a){b.tab.setText(a)},onRemove:function(b,c){var a=this;b.un({scope:a,enable:a.onItemEnable,disable:a.onItemDisable,beforeshow:a.onItemBeforeShow,iconchange:a.onItemIconChange,iconclschange:a.onItemIconClsChange,glyphchange:a.onItemGlyphChange,titlechange:a.onItemTitleChange});if(b.tab&&!a.destroying&&b.tab.ownerCt===a.tabBar){a.tabBar.remove(b.tab)}},privates:{doRemove:function(b,d){var a=this,c;if(a.removingAll||a.destroying||a.items.getCount()===1){a.activeTab=null}else {if(b.tab&&(c=a.tabBar.items.indexOf(a.tabBar.findNextActivatable(b.tab)))!==-1){a.setActiveTab(c)}}Ext.panel.Panel.prototype.doRemove.apply(this,arguments);if(b.tab){delete b.tab.card;delete b.tab}}}},0,['tabpanel'],['component','box','container','panel','tabpanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0},['widget.tabpanel'],0,[Ext.tab,'Panel',Ext,'TabPanel'],0);Ext.cmd.derive('Gnt.model.Week',Ext.data.Model,{idProperty:'Id',fields:[{name:'Id'},{name:'name',type:'string'},{name:'startDate',type:'date'},{name:'endDate',type:'date'},{name:'mainDay'},{name:'weekAvailability'}],set:function(a,b){if(a==='name'){Ext.Array.each(this.get('weekAvailability').concat(this.get('mainDay')),function(c){if(c){c.setName(b)}})}Ext.data.Model.prototype.set.apply(this,arguments)}},0,0,0,0,0,0,[Gnt.model,'Week'],0);Ext.cmd.derive('Ext.grid.column.Date',Ext.grid.column.Column,{alternateClassName:'Ext.grid.DateColumn',isDateColumn:!0,defaultFilterType:'date',producesHTML:!1,initComponent:function(){if(!this.format){this.format=Ext.Date.defaultFormat}Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},defaultRenderer:function(a){return Ext.util.Format.date(a,this.format)},updater:function(b,a){Ext.fly(b).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Date.prototype.defaultRenderer.call(this,a)}},0,['datecolumn'],['component','box','container','headercontainer','gridcolumn','datecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0},['widget.datecolumn'],0,[Ext.grid.column,'Date',Ext.grid,'DateColumn'],0);Ext.cmd.derive('Gnt.widget.calendar.AvailabilityGrid',Ext.grid.Panel,{calendarDay:null,height:160,addButton:null,removeButton:null,maxIntervalsNum:5,initComponent:function(){if(!this.tbar){this.tbar=this.buildToolbar()}Ext.applyIf(this,{store:new Ext.data.Store({fields:['startTime','endTime'],autoDestroy:!0,data:this.calendarDay.getAvailability()}),plugins:[new Ext.grid.plugin.CellEditing({clicksToEdit:2})],columns:[{xtype:'datecolumn',header:this.L('startText'),format:'g:i a',dataIndex:'startTime',flex:1,editor:{xtype:'timefield',allowBlank:!1,initDate:'31/12/1899'}},{xtype:'datecolumn',header:this.L('endText'),format:'g:i a',dataIndex:'endTime',flex:1,editor:{xtype:'timefield',allowBlank:!1,initDate:'31/12/1899'}}],listeners:{selectionchange:this.onAvailabilityGridSelectionChange,scope:this}});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},buildToolbar:function(){this.addButton=new Ext.Button({text:this.L('addText'),iconCls:'gnt-action-add',handler:this.addAvailability,scope:this});this.removeButton=new Ext.Button({text:this.L('removeText'),iconCls:'gnt-action-remove',handler:this.removeAvailability,scope:this,disabled:!0});return [this.addButton,this.removeButton]},onAvailabilityGridSelectionChange:function(b,a){this.removeButton.setDisabled(!a.length)},setAvailability:function(a){this.store.loadData(a);this.addButton.setDisabled(this.store.getCount()>=this.maxIntervalsNum)},addAvailability:function(){var b=this.getStore(),a=b.count();if(a>=this.maxIntervalsNum){return}b.add({startTime:new Date(0,0,0,12,0),endTime:new Date(0,0,0,13,0)});if(a+1>=this.maxIntervalsNum&&this.addButton){this.addButton.disable()}},removeAvailability:function(){var b=this.getStore(),c=b.getCount(),a=this.getSelection();if(!a.length){return}b.remove(a[0]);if(c<this.maxIntervalsNum&&this.addButton){this.addButton.enable()}},isValid:function(a){try{this.calendarDay.verifyAvailability(this.getIntervals())}catch(b){if(!a){Ext.MessageBox.show({title:this.L('error'),msg:b,modal:!0,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK})}return !1}return !0},extractTimeFromDate:function(a){return new Date(0,0,0,a.getHours(),a.getMinutes(),a.getSeconds())},getIntervals:function(){var a=[];var b=this;this.getStore().each(function(d){var c=b.extractTimeFromDate(d.get('endTime'));if(c-new Date(0,0,0,0,0,0)===0){c=new Date(0,0,1,0,0)}a.push({startTime:b.extractTimeFromDate(d.get('startTime')),endTime:c})});return a}},0,['calendaravailabilitygrid'],['component','box','container','panel','tablepanel','gridpanel','grid','calendaravailabilitygrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'calendaravailabilitygrid':!0},['widget.calendaravailabilitygrid'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.calendar,'AvailabilityGrid'],0);Ext.cmd.derive('Gnt.widget.calendar.DayEditor',Gnt.widget.calendar.AvailabilityGrid,{height:160,initComponent:function(){var a=this.calendarDay.getIsWorkingDay();this.dockedItems=this.dockedItems||[{xtype:'radiogroup',dock:'top',name:'dayType',padding:'0 5px',margin:0,items:[{boxLabel:this.L('workingTimeText'),name:'IsWorkingDay',inputValue:!0,checked:a},{boxLabel:this.L('nonworkingTimeText'),name:'IsWorkingDay',inputValue:!1,checked:!a}],listeners:{change:this.onDayTypeChanged,scope:this}}];this.on('afterrender',this.myApplyState,this);Gnt.widget.calendar.AvailabilityGrid.prototype.initComponent.apply(this,arguments)},getDayTypeRadioGroup:function(){return this.down('radiogroup[name="dayType"]')},myApplyState:function(){if(!this.isWorkingDay()){this.viewSetDisabled(!0);this.addButton.disable()}},viewSetDisabled:function(a){if(a){this.getView().getEl().mask();this.getHeaderContainer().getEl().mask()}else {this.getView().getEl().unmask();this.getHeaderContainer().getEl().unmask()}},onDayTypeChanged:function(b){var a=b.getValue();if(Ext.isArray(a.IsWorkingDay)){return}this.viewSetDisabled(!a.IsWorkingDay);this.addButton.setDisabled(!a.IsWorkingDay||this.getStore().getCount()>=this.maxIntervalsNum)},isWorkingDay:function(){return this.getDayTypeRadioGroup().getValue().IsWorkingDay},isValid:function(){if(this.isWorkingDay()){return Gnt.widget.calendar.AvailabilityGrid.prototype.isValid.call(this)}return !0},getIntervals:function(){if(!this.isWorkingDay()){return []}return Gnt.widget.calendar.AvailabilityGrid.prototype.getIntervals.call(this)}},0,['calendardayeditor'],['component','box','container','panel','tablepanel','gridpanel','grid','calendaravailabilitygrid','calendardayeditor'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'calendaravailabilitygrid':!0,'calendardayeditor':!0},['widget.calendardayeditor'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.calendar,'DayEditor'],0);Ext.cmd.derive('Gnt.widget.calendar.WeekEditor',Ext.form.Panel,{weekName:null,startDate:null,endDate:null,weekAvailability:null,calendarWeekAvailability:null,defaultWeekAvailability:null,backupWeekAvailability:null,layout:'anchor',defaults:{border:!1,anchor:'100%'},calendarDayModel:null,currentDayIndex:null,_weekDaysGrid:null,_availabilityGrid:null,initComponent:function(){this.backupWeekAvailability=[];this.items=[{xtype:'radiogroup',padding:'0 5px',name:'dayType',items:[{boxLabel:this.L('defaultTimeText'),name:'IsWorkingDay',inputValue:0},{boxLabel:this.L('workingTimeText'),name:'IsWorkingDay',inputValue:1},{boxLabel:this.L('nonworkingTimeText'),name:'IsWorkingDay',inputValue:2}],listeners:{change:this.onDayTypeChanged,scope:this}},{layout:'column',padding:'0 0 5px 0',defaults:{border:!1},items:[{margin:'0 10px 0 5px',columnWidth:0.5,items:this.getWeekDaysGrid()},{columnWidth:0.5,margin:'0 5px 0 0',items:this.getAvailabilityGrid()}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},getWeekDaysGrid:function(){if(this._weekDaysGrid!=null){return this._weekDaysGrid}var a=Ext.Date.dayNames;return this._weekDaysGrid=new Ext.grid.Panel({hideHeaders:!0,height:160,columns:[{header:'',dataIndex:'name',flex:1}],store:new Ext.data.Store({autoDestroy:!0,fields:['id','name'],idProperty:'id',data:[{id:1,name:a[1]},{id:2,name:a[2]},{id:3,name:a[3]},{id:4,name:a[4]},{id:5,name:a[5]},{id:6,name:a[6]},{id:0,name:a[0]}]}),listeners:{viewready:this.onWeekDaysListViewReady,selectionchange:this.onWeekDaysListSelectionChange,beforeselect:this.onWeekDaysListBeforeSelect,scope:this}})},getAvailabilityGrid:function(){if(!this._availabilityGrid){this._availabilityGrid=new Gnt.widget.calendar.AvailabilityGrid({calendarDay:new this.calendarDayModel()})}return this._availabilityGrid},getDayTypeRadioGroup:function(){if(!this.dayTypeRadioGroup){this.dayTypeRadioGroup=this.down('radiogroup[name="dayType"]')}return this.dayTypeRadioGroup},getWeekAvailability:function(){return this.weekAvailability},onWeekDaysListViewReady:function(){var a=this.getWeekDaysGrid(),b=a.getStore().getAt(0);this.currentDayIndex=b.getId();this.readFromData();a.getSelectionModel().select(b,!1,!0)},onWeekDaysListBeforeSelect:function(){if(!this.saveToData()){return !1}},applyChanges:function(b){if(!this.saveToData()){return !1}var e=this.weekAvailability;var d=!1;for(var a=0;a<7;a++){var c=e[a];if(c){d=!0;if(!b[a]){b[a]=c}b[a].setIsWorkingDay(c.getIsWorkingDay());b[a].setAvailability(c.getAvailability())}else {b[a]=null}}if(!d){Ext.MessageBox.show({title:this.L('error'),msg:this.L('noOverrideError'),modal:!0,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK});return !1}return !0},onWeekDaysListSelectionChange:function(b,a){this.currentDayIndex=a[0].getId();this.readFromData()},getCurrentTypeOfWeekDay:function(a){return this.weekAvailability[a]?this.weekAvailability[a].getIsWorkingDay()?1:2:0},getCurrentWeekDay:function(a){return this.weekAvailability[a]||this.calendarWeekAvailability[a]||this.defaultWeekAvailability[a]},saveToData:function(){var a=this.currentDayIndex;var d=this.getDayTypeRadioGroup().getValue().IsWorkingDay;var b=this.weekAvailability;if(d===0){b[a]=null;return !0}var c=this.getAvailabilityGrid();if(d==1){if(!c.isValid()){return !1}if(!b[a]){b[a]=this.copyDefaultWeekDay(a)}b[a].setIsWorkingDay(!0);b[a].setAvailability(c.getIntervals());this.backupWeekAvailability[a]=null;return !0}if(!b[a]){b[a]=this.copyDefaultWeekDay(a)}b[a].setIsWorkingDay(!1);b[a].setAvailability([]);return !0},copyDefaultWeekDay:function(b){var a=(this.calendarWeekAvailability[b]||this.defaultWeekAvailability[b]).copy();a.phantom=!0;a.beginEdit();a.setType('WEEKDAYOVERRIDE');a.setOverrideStartDate(this.startDate);a.setOverrideEndDate(this.endDate);a.setName(this.weekName);a.endEdit();return a},readFromData:function(d){var e=this.getCurrentWeekDay(this.currentDayIndex);var c=this.getCurrentTypeOfWeekDay(this.currentDayIndex);var b=this.getAvailabilityGrid();b.setAvailability(d||e.getAvailability());var a=this.getDayTypeRadioGroup();a.suspendEvents();a.setValue({IsWorkingDay:[c]});a.resumeEvents();b.setDisabled(c!=1)},onDayTypeChanged:function(h,i,g){var c=h.getValue();if(c.IsWorkingDay==null||Ext.isArray(c.IsWorkingDay)){return}var b=this.weekAvailability;var d=this.backupWeekAvailability;var a=this.currentDayIndex;var f=this.getAvailabilityGrid();var e;if(g.IsWorkingDay==1){d[a]=f.getIntervals()}switch(c.IsWorkingDay){case 0:b[a]=null;break;case 1:if(!b[a]){b[a]=this.copyDefaultWeekDay(a)};e=d[a];b[a].setIsWorkingDay(!0);break;case 2:if(!b[a]){b[a]=this.copyDefaultWeekDay(a)};b[a].setAvailability([]);b[a].setIsWorkingDay(!1);break;default:throw 'Unrecognized day type';}this.readFromData(e)}},0,['calendarweekeditor'],['component','box','container','panel','form','calendarweekeditor'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'calendarweekeditor':!0},['widget.calendarweekeditor'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.calendar,'WeekEditor'],0);Ext.cmd.derive('Ext.button.Split',Ext.button.Button,{alternateClassName:'Ext.SplitButton',isSplitButton:!0,arrowCls:'split',split:!0,getTemplateArgs:function(){var a=this,b,c;c=Ext.button.Button.prototype.getTemplateArgs.call(this);if(a.disabled){c.tabIndex=null}b=a.ariaArrowElAttributes||{};b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.arrowTooltip){b['aria-label']=a.arrowTooltip}else {b['aria-labelledby']=a.id}c.arrowElAttributes=b;return c},onRender:function(){var a=this,b;Ext.button.Button.prototype.onRender.call(this);b=a.getFocusEl();if(b){b.on({scope:a,focus:a.onMainElFocus,blur:a.onMainElBlur})}b=a.arrowEl;if(b){b.dom.setAttribute('data-componentid',a.id);b.setVisibilityMode(Ext.dom.Element.DISPLAY);b.on({scope:a,focus:a.onArrowElFocus,blur:a.onArrowElBlur})}},setArrowHandler:function(a,b){this.arrowHandler=a;this.scope=b},onClick:function(b){var a=this,c=b.type==='keydown'&&b.target===a.arrowEl.dom;a.doPreventDefault(b);if(!a.disabled){if(c||a.isWithinTrigger(b)){b.preventDefault();a.maybeShowMenu(b);a.fireEvent('arrowclick',a,b);if(a.arrowHandler){a.arrowHandler.call(a.scope||a,a,b)}}else {a.doToggle();a.fireHandler(b)}}},enable:function(c){var b=this,a=b.arrowEl;Ext.button.Button.prototype.enable.call(this,c);if(a){a.dom.setAttribute('tabIndex',b.tabIndex);a.dom.setAttribute('aria-disabled','false')}},disable:function(b){var c=this,a=c.arrowEl;Ext.button.Button.prototype.disable.call(this,b);if(a){a.dom.removeAttribute('tabIndex');a.dom.setAttribute('aria-disabled','true')}},afterHide:function(b,a){Ext.button.Button.prototype.afterHide.call(this,b,a);this.arrowEl.dom.setAttribute('aria-hidden','true')},afterShow:function(a,c,b){Ext.button.Button.prototype.afterShow.call(this,a,c,b);this.arrowEl.dom.setAttribute('aria-hidden','false')},privates:{isFocusing:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;if(a.focusable){if(e===c){return d===b?!1:!0}else {if(e===b){return d===c?!1:!0}}return !0}return !1},isBlurring:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;if(a.focusable){if(d===c){return e===b?!1:!0}else {if(d===b){return e===c?!1:!0}}return !0}return !1},getFocusClsEl:Ext.privateFn,onMainElFocus:function(a){this.el.addCls(this._focusCls)},onMainElBlur:function(a){this.el.removeCls(this._focusCls)},onArrowElFocus:function(a){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(a){Ext.button.Button.prototype.setTabIndex.call(this,a);if(this.arrowEl){this.arrowEl.set({tabIndex:a})}},_addSplitCls:function(){var a=this.arrowEl;Ext.button.Button.prototype._addSplitCls.call(this);a.dom.setAttribute('tabIndex',this.tabIndex);a.setVisible(!0)},_removeSplitCls:function(){var a=this.arrowEl;Ext.button.Button.prototype._removeSplitCls.call(this);a.dom.removeAttribute('tabIndex');a.setVisible(!1)}}},0,['splitbutton'],['component','box','button','splitbutton'],{'component':!0,'box':!0,'button':!0,'splitbutton':!0},['widget.splitbutton'],0,[Ext.button,'Split',Ext,'SplitButton'],0);Ext.cmd.derive('Ext.picker.Month',Ext.Component,{alternateClassName:'Ext.MonthPicker',isMonthPicker:!0,focusable:!0,childEls:['bodyEl','prevEl','nextEl','monthEl','yearEl'],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>','</div>','</tpl>','</div>','<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>','</div>','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>','</div>','</div>','<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>','</div>','</tpl>','</div>','<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%','var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;','okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;','okBtn.ownerCt = cancelBtn.ownerCt = me;','Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);','Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);','%}</div>','</tpl>','</div>'],okText:'OK',cancelText:'Cancel',baseCls:'x-monthpicker',showButtons:!0,footerButtonUI:'default',measureWidth:35,measureMaxHeight:20,smallCls:'x-monthpicker-small',totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+'-selected';if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear((new Date()).getFullYear()-4,-4);if(a.showButtons){a.okBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.cancelText,handler:a.onCancelClick,scope:a})}Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var a=this,b=0,f=[],c=Ext.Date.getShortMonthName,d=a.monthOffset,e=a.monthMargin,g='';if(a.padding&&!a.width){a.cacheWidth()}Ext.Component.prototype.beforeRender.call(this);for(;b<d;++b){f.push(c(b),c(b+d))}if(Ext.isDefined(e)){g='margin: 0 '+e+'px;'}Ext.apply(a.renderData,{months:f,years:a.getYears(),showButtons:a.showButtons,monthStyle:g})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+' '+a.borderBoxCls,style:'position:absolute;top:-1000px;left:-1000px;',html:'&nbsp;'});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var a=this,b=a.bodyEl;Ext.Component.prototype.afterRender.call(this);if(a.up('[floating=true]')){a.el.on('mousedown',a.onElClick,a)}a.mon(b,'click',a.onBodyClick,a);a.mon(b,'dblclick',a.onBodyClick,a);a.years=b.select('.'+a.baseCls+'-year a');a.months=b.select('.'+a.baseCls+'-month a');a.backRepeater=new Ext.util.ClickRepeater(a.prevEl,{handler:Ext.Function.bind(a.adjustYear,a,[-a.totalYears])});a.prevEl.addClsOnOver(a.baseCls+'-yearnav-prev-over');a.nextRepeater=new Ext.util.ClickRepeater(a.nextEl,{handler:Ext.Function.bind(a.adjustYear,a,[a.totalYears])});a.nextEl.addClsOnOver(a.baseCls+'-yearnav-next-over');a.updateBody();if(!Ext.isDefined(a.monthMargin)){Ext.picker.Month.prototype.monthMargin=a.calculateMonthMargin()}},calculateMonthMargin:function(){var b=this,c=b.months,d=c.first(),a=d.getMargin('l');while(a&&b.getLargest()>b.measureMaxHeight){--a;c.setStyle('margin','0 '+a+'px')}return a},getLargest:function(b){var a=0;this.months.each(function(d){var c=d.getHeight();if(c>a){a=c}});return a},setValue:function(b){var a=this,d=a.activeYear,c;if(!b){a.value=[null,null]}else {if(Ext.isDate(b)){a.value=[b.getMonth(),b.getFullYear()]}else {a.value=[b[0],b[1]]}}if(a.rendered){c=a.value[1];if(c!==null){if(c<d||c>d+a.yearOffset){a.activeYear=c-a.yearOffset+1}}a.updateBody()}return a},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var e=this,b=e.yearOffset,c=e.activeYear,f=c+b,a=c,d=[];for(;a<f;++a){d.push(a,a+b)}return d},updateBody:function(){var a=this,j=a.years,i=a.months,l=a.getYears(),d=a.selectedCls,m=a.getYear(null),b=a.value[0],h=a.monthOffset,f,e,c,k,g;if(a.rendered){j.removeCls(d);i.removeCls(d);e=j.elements;k=e.length;for(c=0;c<k;c++){g=Ext.fly(e[c]);f=l[c];g.dom.innerHTML=f;if(f===m){g.addCls(d)}}if(b!==null){if(b<h){b=b*2}else {b=(b-h)*2+1}i.item(b).addCls(d)}}},getYear:function(c,a){var b=this.value[1];a=a||0;return b===null?c:b+a},onElClick:function(a){a.stopEvent()},onBodyClick:function(a,d){var b=this,c=a.type==='dblclick';if(a.getTarget('.'+b.baseCls+'-month')){a.stopEvent();b.onMonthClick(d,c)}else {if(a.getTarget('.'+b.baseCls+'-year')){a.stopEvent();b.onYearClick(d,c)}}},adjustYear:function(a){if(typeof a!=='number'){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent('okclick',this,this.value)},onCancelClick:function(){this.fireEvent('cancelclick',this)},onMonthClick:function(c,b){var a=this;a.value[0]=a.resolveOffset(a.months.indexOf(c),a.monthOffset);a.updateBody();a.fireEvent('month'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},onYearClick:function(c,b){var a=this;a.value[1]=a.activeYear+a.resolveOffset(a.years.indexOf(c),a.yearOffset);a.updateBody();a.fireEvent('year'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},resolveOffset:function(a,b){if(a%2===0){return a/2}else {return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,'backRepeater','nextRepeater','okBtn','cancelBtn');Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.destroyMembers(this,'okBtn','cancelBtn');Ext.Component.prototype.onDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}},0,['monthpicker'],['component','box','monthpicker'],{'component':!0,'box':!0,'monthpicker':!0},['widget.monthpicker'],0,[Ext.picker,'Month',Ext,'MonthPicker'],0);Ext.define('Ext.theme.neptune.picker.Month',{override:'Ext.picker.Month',measureMaxHeight:36});Ext.define('Ext.theme.triton.picker.Month',{override:'Ext.picker.Month',footerButtonUI:'default-toolbar',calculateMonthMargin:Ext.emptyFn});Ext.cmd.derive('Ext.picker.Date',Ext.Component,{alternateClassName:'Ext.DatePicker',todayText:'Today',ariaTitle:'Date Picker: {0}',ariaTitleDateFormat:'F d',todayTip:'{0} (Spacebar)',minText:'This date is before the minimum date',ariaMinText:'This date is before the minimum date',maxText:'This date is after the maximum date',ariaMaxText:'This date is after the maximum date',disabledDaysText:'Disabled',ariaDisabledDaysText:'This day of week is disabled',disabledDatesText:'Disabled',ariaDisabledDatesText:'This date is disabled',nextText:'Next Month (Control+Right)',prevText:'Previous Month (Control+Left)',monthYearText:'Choose a month (Control+Up/Down to move years)',monthYearFormat:'F Y',startDay:0,showToday:!0,disableAnim:!1,baseCls:'x-datepicker',longDayFormat:'F d, Y',footerButtonUI:'default',isDatePicker:!0,ariaRole:'region',focusable:!0,childEls:['innerEl','eventEl','prevEl','nextEl','middleBtnEl','footerEl'],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>','</div>','<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0">','<thead>','<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>','</th>','</tpl>','</tr>','</thead>','<tbody>','<tr role="row">','<tpl for="days">','{#:this.isEndOfWeek}','<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>','</td>','</tpl>','</tr>','</tbody>','</table>','<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>','</tpl>','<div id="{id}-todayText" class="x-hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="x-hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="x-hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="x-hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="x-hidden-clip">{ariaDisabledDatesText}.</div>','</div>',{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(a){a--;var b=a%7===0&&a!==0;return b?'</tr><tr role="row">':''},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],initHour:12,numDays:42,initComponent:function(){var a=this,b=Ext.Date.clearTime;a.selectedCls=a.baseCls+'-selected';a.disabledCellCls=a.baseCls+'-disabled';a.prevCls=a.baseCls+'-prevday';a.activeCls=a.baseCls+'-active';a.cellCls=a.baseCls+'-cell';a.nextCls=a.baseCls+'-prevday';a.todayCls=a.baseCls+'-today';if(!a.format){a.format=Ext.Date.defaultFormat}if(!a.dayNames){a.dayNames=Ext.Date.dayNames}a.dayNames=a.dayNames.slice(a.startDay).concat(a.dayNames.slice(0,a.startDay));Ext.Component.prototype.initComponent.call(this);a.value=a.value?b(a.value,!0):b(new Date());a.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var a=[],b=this.monthBtn,c=this.todayBtn;if(b){a.push(b)}if(c){a.push(c)}return a},beforeRender:function(){var a=this,b=Ext.String.htmlEncode,d=new Array(a.numDays),c=Ext.Date.format(new Date(),a.format);if(a.padding&&!a.width){a.cacheWidth()}a.monthBtn=new Ext.button.Split({ownerCt:a,ownerLayout:a.getComponentLayout(),text:'',tooltip:a.monthYearText,tabIndex:-1,ariaRole:'presentation',listeners:{click:a.doShowMonthPicker,arrowclick:a.doShowMonthPicker,scope:a}});if(a.showToday){a.todayBtn=new Ext.button.Button({ui:a.footerButtonUI,ownerCt:a,ownerLayout:a.getComponentLayout(),text:Ext.String.format(a.todayText,c),tooltip:Ext.String.format(a.todayTip,c),tooltipType:'title',tabIndex:-1,ariaRole:'presentation',handler:a.selectToday,scope:a})}Ext.Component.prototype.beforeRender.call(this);Ext.applyIf(a,{renderData:{}});Ext.apply(a.renderData,{dayNames:a.dayNames,showToday:a.showToday,prevText:b(a.prevText),nextText:b(a.nextText),todayText:b(a.todayText),ariaMinText:b(a.ariaMinText),ariaMaxText:b(a.ariaMaxText),ariaDisabledDaysText:b(a.ariaDisabledDaysText),ariaDisabledDatesText:b(a.ariaDisabledDatesText),days:d});a.protoEl.unselectable()},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+' '+a.borderBoxCls,style:'position:absolute;top:-1000px;left:-1000px;'});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},onRender:function(b,c){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);a.cells=a.eventEl.select('tbody td');a.textNodes=a.eventEl.query('tbody td div');a.eventEl.set({'aria-labelledby':a.monthBtn.id});a.mon(a.eventEl,{scope:a,mousewheel:a.handleMouseWheel,click:{fn:a.handleDateClick,delegate:'div.'+a.baseCls+'-date'}})},initEvents:function(){var a=this,c=a.pickerField,b=Ext.Date,d=b.DAY;Ext.Component.prototype.initEvents.call(this);if(c){a.el.on('mousedown',a.onMouseDown,a)}a.monthBtn.el.on('mousedown',a.onMouseDown,a);a.prevRepeater=new Ext.util.ClickRepeater(a.prevEl,{handler:a.showPrevMonth,scope:a,mousedownStopEvent:!0});a.nextRepeater=new Ext.util.ClickRepeater(a.nextEl,{handler:a.showNextMonth,scope:a,mousedownStopEvent:!0});a.keyNav=new Ext.util.KeyNav(a.eventEl,Ext.apply({scope:a,left:function(c){if(c.ctrlKey){c.preventDefault();a.showPrevMonth()}else {a.update(b.add(a.activeDate,d,-1))}},right:function(c){if(c.ctrlKey){c.preventDefault();a.showNextMonth()}else {a.update(b.add(a.activeDate,d,1))}},up:function(c){if(c.ctrlKey){a.showNextYear()}else {a.update(b.add(a.activeDate,d,-7))}},down:function(c){if(c.ctrlKey){a.showPrevYear()}else {a.update(b.add(a.activeDate,d,7))}},pageUp:function(b){if(b.ctrlKey){a.showPrevYear()}else {a.showPrevMonth()}},pageDown:function(b){if(b.ctrlKey){a.showNextYear()}else {a.showNextMonth()}},tab:function(b){a.handleTabKey(b);return !0},enter:function(b){a.handleDateClick(b,a.activeCell.firstChild)},space:function(){a.setValue(new Date(a.activeCell.firstChild.dateValue));var d=a.startValue,e=a.value,b;if(c){b=c.getValue();if(b&&d&&b.getTime()===e.getTime()){c.setValue(d)}else {c.setValue(e)}}},home:function(c){a.update(b.getFirstDateOfMonth(a.activeDate))},end:function(c){a.update(b.getLastDateOfMonth(a.activeDate))}},a.keyNavConfig));if(a.disabled){a.syncDisabled(!0)}a.update(a.value)},onMouseDown:function(a){a.preventDefault()},handleTabKey:function(d){var a=this,b=a.getSelectedDate(a.activeDate),c=a.handler;if(!a.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasCls(a.disabledCellCls)){a.setValue(new Date(b.dateValue));a.fireEvent('select',a,a.value);if(c){c.call(a.scope||a,a,a.value)}a.onSelect()}else {a.fireEventArgs('tabout',[a])}},getSelectedDate:function(g){var e=this,i=g.getTime(),d=e.cells,h=e.selectedCls,c=d.elements,f=c.length,b,a;d.removeCls(h);for(a=0;a<f;a++){b=c[a].firstChild;if(b.dateValue===i){return b}}return null},initDisabledDays:function(){var d=this,c=d.disabledDates,e='(?:',g,a,f,b;if(!d.disabledDatesRE&&c){g=c.length-1;f=c.length;for(a=0;a<f;a++){b=c[a];e+=Ext.isDate(b)?'^'+Ext.String.escapeRegex(Ext.Date.dateFormat(b,d.format))+'$':b;if(a!==g){e+='|'}}d.disabledDatesRE=new RegExp(e+')')}},setDisabledDates:function(b){var a=this;if(Ext.isArray(b)){a.disabledDates=b;a.disabledDatesRE=null}else {a.disabledDatesRE=b}a.initDisabledDays();a.update(a.value,!0);return a},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,!0)},setMinDate:function(a){this.minDate=a;return this.update(this.value,!0)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,!0)},setValue:function(a){this.value=Ext.Date.clearTime(a||new Date(),!0);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(a){return a.substr(0,1)},onEnable:function(){var a=this;Ext.Component.prototype.onEnable.call(this);a.syncDisabled(!1);a.update(a.activeDate)},onShow:function(){var a=this;Ext.Component.prototype.onShow.call(this);a.syncDisabled(!1);if(a.pickerField){a.startValue=a.pickerField.getValue()}},onHide:function(){Ext.Component.prototype.onHide.call(this);this.syncDisabled(!0)},onDisable:function(){Ext.Component.prototype.onDisable.call(this);this.syncDisabled(!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var a=this.monthPicker,b={duration:200,callback:function(){a.setVisible(!c)}};if(c){a.el.slideOut('t',b)}else {a.el.slideIn('t',b)}},hideMonthPicker:function(c){var a=this,b=a.monthPicker;if(b&&b.isVisible()){if(a.shouldAnimate(c)){a.runAnimation(!0)}else {b.hide()}}return a},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(d){var a=this,c=a.el,b;if(a.rendered&&!a.disabled){b=a.createMonthPicker();if(!b.isVisible()){b.setValue(a.getActive());b.setSize(c.getSize());b.floatParent=null;b.setPosition(-c.getBorderWidth('l'),-c.getBorderWidth('t'));if(a.shouldAnimate(d)){a.runAnimation(!1)}else {b.show()}}}return a},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var a=this,b=a.monthPicker;if(!b){a.monthPicker=b=new Ext.picker.Month({renderTo:a.el,ownerCmp:a,floating:!0,padding:a.padding,shadow:!1,small:a.showToday===!1,footerButtonUI:a.footerButtonUI,listeners:{scope:a,cancelclick:a.onCancelClick,okclick:a.onOkClick,yeardblclick:a.onOkClick,monthdblclick:a.onOkClick}});if(!a.disableAnim){b.el.setStyle('display','none')}b.hide();a.on('beforehide',a.doHideMonthPicker,a)}return b},onOkClick:function(f,d){var c=this,a=d[0],e=d[1],b=new Date(e,a,c.getActive().getDate());if(b.getMonth()!==a){b=Ext.Date.getLastDateOfMonth(new Date(e,a,1))}c.setValue(b);c.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(b){var a;b.stopEvent();if(!this.disabled){a=b.getWheelDelta();if(a>0){this.showPrevMonth()}else {if(a<0){this.showNextMonth()}}}},handleDateClick:function(d,b){var a=this,c=a.handler;d.stopEvent();if(!a.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasCls(a.disabledCellCls)){a.setValue(new Date(b.dateValue));a.fireEvent('select',a,a.value);if(c){c.call(a.scope||a,a,a.value)}a.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var a=this,c=a.todayBtn,b=a.handler;if(c&&!c.disabled){a.setValue(Ext.Date.clearTime(new Date()));a.fireEvent('select',a,a.value);if(b){b.call(a.scope||a,a,a.value)}a.onSelect()}return a},selectedUpdate:function(g){var b=this,h=g.getTime(),d=b.cells,e=b.selectedCls,c,f=d.getCount(),a;b.eventEl.dom.setAttribute('aria-busy','true');a=b.activeCell;if(a){Ext.fly(a).removeCls(e);a.setAttribute('aria-selected',!1)}for(c=0;c<f;c++){a=d.item(c);if(b.textNodes[c].dateValue===h){b.activeCell=a.dom;b.eventEl.dom.setAttribute('aria-activedescendant',a.dom.id);a.dom.setAttribute('aria-selected',!0);a.addCls(e);b.fireEvent('highlightitem',b,a);break}}b.eventEl.dom.removeAttribute('aria-busy')},fullUpdate:function(h){var a=this,z=a.cells.elements,w=a.textNodes,i=a.disabledCellCls,b=Ext.Date,d=0,E=0,x=+b.clearTime(h,!0),A=+b.clearTime(new Date()),v=a.minDate?b.clearTime(a.minDate,!0):Number.NEGATIVE_INFINITY,u=a.maxDate?b.clearTime(a.maxDate,!0):Number.POSITIVE_INFINITY,j=a.disabledDatesRE,y=a.disabledDatesText,l=a.disabledDays?a.disabledDays.join(''):!1,D=a.disabledDaysText,k=a.format,t=b.getDaysInMonth(h),C=b.getFirstDateOfMonth(h),e=C.getDay()-a.startDay,o=b.add(h,b.MONTH,-1),B=a.ariaTitleDateFormat,q,c,r,g,s,m,n,p,f;if(e<0){e+=7}t+=e;q=b.getDaysInMonth(o)-e;c=new Date(o.getFullYear(),o.getMonth(),q,a.initHour);if(a.showToday){g=b.clearTime(new Date());r=g<v||g>u||j&&k&&j.test(b.dateFormat(g,k))||l&&l.indexOf(g.getDay())!==-1;if(!a.disabled){a.todayBtn.setDisabled(r)}}s=function(m,g){var d=z[m],e=[];if(!d.hasAttribute('id')){d.setAttribute('id',a.id+'-cell-'+m)}f=+b.clearTime(c,!0);d.firstChild.dateValue=f;d.setAttribute('aria-label',b.format(c,B));d.removeAttribute('aria-describedby');d.removeAttribute('data-qtip');if(f===A){g+=' '+a.todayCls;e.push(a.id+'-todayText')}if(f===x){a.activeCell=d;a.eventEl.dom.setAttribute('aria-activedescendant',d.id);d.setAttribute('aria-selected',!0);g+=' '+a.selectedCls;a.fireEvent('highlightitem',a,d)}else {d.setAttribute('aria-selected',!1)}if(f<v){g+=' '+i;e.push(a.id+'-ariaMinText');d.setAttribute('data-qtip',a.minText)}else {if(f>u){g+=' '+i;e.push(a.id+'-ariaMaxText');d.setAttribute('data-qtip',a.maxText)}else {if(l&&l.indexOf(c.getDay())!==-1){d.setAttribute('data-qtip',D);e.push(a.id+'-ariaDisabledDaysText');g+=' '+i}else {if(j&&k){p=b.dateFormat(c,k);if(j.test(p)){d.setAttribute('data-qtip',y.replace('%0',p));e.push(a.id+'-ariaDisabledDatesText');g+=' '+i}}}}}if(e.length){d.setAttribute('aria-describedby',e.join(' '))}d.className=g+' '+a.cellCls};a.eventEl.dom.setAttribute('aria-busy','true');for(;d<a.numDays;++d){if(d<e){m=++q;n=a.prevCls}else {if(d>=t){m=++E;n=a.nextCls}else {m=d-e+1;n=a.activeCls}}w[d].innerHTML=m;c.setDate(c.getDate()+1);s(d,n)}a.eventEl.dom.removeAttribute('aria-busy');a.monthBtn.setText(Ext.Date.format(h,a.monthYearFormat))},update:function(c,d){var a=this,b=a.activeDate;if(a.rendered){a.activeDate=c;if(!d&&b&&a.el&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()){a.selectedUpdate(c,b)}else {a.fullUpdate(c,b)}}return a},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn,a.todayElSpan);delete a.textNodes;delete a.cells.elements}Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var a=this;Ext.Component.prototype.finishRenderChildren.call(this);a.monthBtn.finishRender();if(a.showToday){a.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(b){var a=this,c=a.keyNav;if(c){c.setDisabled(b);a.prevRepeater.setDisabled(b);a.nextRepeater.setDisabled(b);if(a.todayBtn){a.todayBtn.setDisabled(b)}}}}},0,['datepicker'],['component','box','datepicker'],{'component':!0,'box':!0,'datepicker':!0},['widget.datepicker'],0,[Ext.picker,'Date',Ext,'DatePicker'],0);Ext.define('Ext.theme.triton.picker.Date',{override:'Ext.picker.Date',footerButtonUI:'default-toolbar'});Ext.cmd.derive('Gnt.widget.calendar.DatePicker',Ext.picker.Date,{workingDayCls:'gnt-datepicker-workingday',nonWorkingDayCls:'gnt-datepicker-nonworkingday',overriddenDayCls:'gnt-datepicker-overriddenday',overriddenWeekDayCls:'gnt-datepicker-overriddenweekday',weekOverridesStore:null,dayOverridesCalendar:null,update:function(){Ext.picker.Date.prototype.update.apply(this,arguments);this.refreshCssClasses()},refreshCssClasses:function(){var c=this,b=c.cells.elements;this.removeCustomCls();for(var a=0;a<c.numDays;a++){var d=b[a].firstChild.dateValue;b[a].className+=' '+this.getDateCls(new Date(d))}},getDateCls:function(a){var b='';if(a.getMonth()!==this.getActive().getMonth()){return}var c=this.dayOverridesCalendar;if(c.getOwnCalendarDay(a)){b+=' '+this.overriddenDayCls;if(!c.isWorkingDay(a)){b+=' '+this.nonWorkingDayCls}}else {var e=null;this.weekOverridesStore.each(function(b){var c=b.get('startDate'),d=b.get('endDate');if(c!=null&&d!=null&&Ext.Date.between(a,c,d)){e=b;return !1}});if(e){b+=' '+this.overriddenWeekDayCls;var f=a.getDay(),d=e.get('weekAvailability');if(d&&d[f]&&!d[f].getIsWorkingDay()){b+=' '+this.nonWorkingDayCls}}else {if(!c.isWorkingDay(a)){b+=' '+this.nonWorkingDayCls}}}return b||this.workingDayCls},removeCustomCls:function(){this.cells.removeCls([this.overriddenDayCls,this.nonWorkingDayCls,this.workingDayCls,this.overriddenWeekDayCls])}},0,['gntdatepicker'],['component','box','datepicker','gntdatepicker'],{'component':!0,'box':!0,'datepicker':!0,'gntdatepicker':!0},['widget.gntdatepicker'],0,[Gnt.widget.calendar,'DatePicker'],0);Ext.cmd.derive('Gnt.template.CalendarLegend',Ext.Template,{disableFormats:!0,markup:'<ul class="gnt-calendar-legend"><li class="gnt-calendar-legend-item"><div class="gnt-calendar-legend-itemstyle {workingDayCls}"></div><span class="gnt-calendar-legend-itemname">{workingDayText}</span><div style="clear: both"></div></li><li><div class="gnt-calendar-legend-itemstyle {nonWorkingDayCls}"></div><span class="gnt-calendar-legend-itemname">{weekendsText}</span><div style="clear: both"></div></li><li class="gnt-calendar-legend-override"><div class="gnt-calendar-legend-itemstyle {overriddenDayCls}">31</div><span class="gnt-calendar-legend-itemname">{overriddenDayText}</span><div style="clear: both"></div></li><li class="gnt-calendar-legend-override"><div class="gnt-calendar-legend-itemstyle {overriddenWeekDayCls}">31</div><span class="gnt-calendar-legend-itemname">{overriddenWeekText}</span><div style="clear: both"></div></li></ul>',constructor:function(){Ext.Template.prototype.constructor.call(this,this.markup)}},1,0,0,0,0,0,[Gnt.template,'CalendarLegend'],0);Ext.cmd.derive('Gnt.template.CalendarDateInfo',Ext.XTemplate,{disableFormats:!0,workingHoursText:null,nonWorkingText:null,basedOnText:null,overrideText:null,inCalendarText:null,dayInCalendarText:null,markup:'<div class="gnt-calendar-overridedate"><tpl if="isWorkingDay">__WORKINGHOURS__ {date}:<tpl else>{date} __NONWORKING__</tpl></div><ul class="gnt-calendar-availabilities"><tpl for="availability"><li>{.}</li></tpl></ul><span class="gnt-calendar-overridesource"> __BASEDON__: <tpl if="override">__OVERRIDE__ "{name}" __INCALENDAR__ "{calendarName}"<tpl else>__DAYINCALENDAR__ "{calendarName}"</tpl></span>',constructor:function(a){Ext.apply(this,a);this.markup=this.markup.replace('__WORKINGHOURS__',this.workingHoursText).replace('__NONWORKING__',this.nonWorkingText).replace('__BASEDON__',this.basedOnText).replace('__OVERRIDE__',this.overrideText).replace('__INCALENDAR__',this.inCalendarText).replace('__DAYINCALENDAR__',this.dayInCalendarText);Ext.XTemplate.prototype.constructor.call(this,this.markup)}},1,0,0,0,0,0,[Gnt.template,'CalendarDateInfo'],0);Ext.cmd.derive('Gnt.patches.CellEditor_2',Sch.util.Patch,{target:'Ext.grid.CellEditor',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{completeEdit:function(b){var a=this;if(a.editing){a.context.value=a.field.value}a.callParent(arguments)}}},0,0,0,0,0,0,[Gnt.patches,'CellEditor_2'],0);Ext.cmd.derive('Gnt.widget.calendar.Calendar',Ext.form.Panel,{defaults:{border:!1},workingDayCls:'gnt-datepicker-workingday',nonWorkingDayCls:'gnt-datepicker-nonworkingday',overriddenDayCls:'gnt-datepicker-overriddenday',overriddenWeekDayCls:'gnt-datepicker-overriddenweekday',calendar:null,calendarManager:null,dayGridConfig:null,weekGridConfig:null,datePickerConfig:null,readOnly:!1,dayGrid:null,weekGrid:null,datePicker:null,legendTpl:null,dateInfoTpl:null,dayOverridesCalendar:null,weekOverridesStore:null,currentDayOverrideEditor:null,calendarDayModel:null,scrollable:!0,layout:{type:'vbox',align:'stretch'},initComponent:function(){var a=this;a.setupTemplates();var b=a.calendar;if(!b&&a.calendarManager){b=a.calendarManager.getProjectCalendar()||a.calendarManager.getRoot().firstChild}if(!a.calendarDayModel){a.calendarDayModel=b&&b.getModel&&b.getModel()||b.model}a.buildItems();a.bindListeners();Ext.form.Panel.prototype.initComponent.apply(this,arguments);a.projectCalendarCheckbox=a.down('#projectCalendarCheckbox');a.projectCalendarCheckbox.setVisible(a.calendarManager);a.setReadOnly(a.readOnly);b&&a.setCalendar(b)},setReadOnly:function(a){this.readOnly=a;this.cmbParentCalendar.setDisabled(a);this.down('#calendarName').setDisabled(a);if(this.calendarManager&&this.calendarManager.getProjectCalendar()!==this.calendar){this.projectCalendarCheckbox.setDisabled(a)}this.setGridReadOnly(this.dayGrid,a);this.setGridReadOnly(this.weekGrid,a)},getReadOnly:function(){return this.readOnly},isReadOnly:function(){return this.getReadOnly()},setGridReadOnly:function(b,a){var c=b.getPlugin('editingPlugin');c&&c[a?'disable':'enable']();b.down('#btnAdd').setDisabled(a);b.down('#btnEdit').setDisabled(a);b.down('#btnRemove').setDisabled(a)},bindListeners:function(){var a=this;a.on('calendarset',a.onCalendarSet);a.on('afterrender',a.onCalendarSet);a.dayGrid.on({selectionchange:a.onDayGridSelectionChange,validateedit:a.onDayGridValidateEdit,edit:a.onDayGridEdit,scope:a});a.dayGrid.store.on({update:a.refreshView,remove:a.refreshView,add:a.refreshView,scope:a});a.weekGrid.on({selectionchange:a.onWeekGridSelectionChange,validateedit:a.onWeekGridValidateEdit,edit:a.onWeekGridEdit,scope:a});a.weekGrid.store.on({update:a.refreshView,remove:a.refreshView,add:a.refreshView,scope:a});a.datePicker.on({select:a.onDateSelect,scope:a})},buildItems:function(){this.dateInfoPanel=new Ext.Component({cls:'gnt-calendar-dateinfo',margin:'20 10',flex:1,border:!1});this.cmbParentCalendar=new Ext.form.field.ComboBox({name:'cmb_parentCalendar',fieldLabel:this.L('parentCalendarText'),labelAlign:'top',store:{autoDestroy:!0,fields:['Id','Name']},queryMode:'local',displayField:'Name',valueField:'Id',anchor:'100%',editable:!1,emptyText:this.L('selectParentText')});this.buildWeekGrid();this.buildDayGrid();this.buildDatePicker();this.items=[{xtype:'container',layout:'hbox',items:[{xtype:'container',flex:1,margin:'15 5 15 15',layout:'anchor',items:[{xtype:'fieldcontainer',defaults:{width:'100%'},layout:'vbox',items:[{xtype:'textfield',itemId:'calendarName',labelAlign:'top',fieldLabel:this.L('calendarNameText')},{xtype:'checkbox',itemId:'projectCalendarCheckbox',fieldLabel:this.L('isProjectCalendarText')},this.cmbParentCalendar]},{xtype:'component',padding:'10 0 0 0',renderTpl:this.legendTpl,anchor:'100%',renderData:{workingDayText:this.L('workingDayText'),weekendsText:this.L('weekendsText'),overriddenDayText:this.L('overriddenDayText'),overriddenWeekText:this.L('overriddenWeekText'),workingDayCls:this.workingDayCls,nonWorkingDayCls:this.nonWorkingDayCls,overriddenDayCls:this.overriddenDayCls,overriddenWeekDayCls:this.overriddenWeekDayCls}}]},this.datePicker,this.dateInfoPanel]},{xtype:'tabpanel',minHeight:200,flex:1,items:[this.dayGrid,this.weekGrid]}]},buildDayGrid:function(){var a=this.calendarDayModel.prototype;this.dayGrid=new Ext.grid.Panel(Ext.apply({title:this.L('dayOverridesText'),itemId:'dayGrid',tbar:[{text:this.L('addText'),itemId:'btnAdd',action:'add',iconCls:'gnt-action-add',handler:this.addDay,scope:this},{text:this.L('editText'),itemId:'btnEdit',action:'edit',iconCls:'gnt-action-edit',handler:this.editDay,scope:this},{text:this.L('removeText'),itemId:'btnRemove',action:'remove',iconCls:'gnt-action-remove',handler:this.removeDay,scope:this}],store:new Gnt.data.Calendar(),plugins:[new Ext.grid.plugin.CellEditing({clicksToEdit:2,pluginId:'editingPlugin'})],columns:[{header:this.L('dayOverrideNameHeaderText'),dataIndex:a.nameField,flex:1,editor:{allowBlank:!1}},{header:this.L('dateText'),dataIndex:a.dateField,width:100,xtype:'datecolumn',editor:{xtype:'datefield'}}]},this.dayGridConfig||{}));this.dayOverridesCalendar=this.dayGrid.store},updateGrids:function(){this.dayGrid&&this.fillDaysStore();this.weekGrid&&this.fillWeeksStore()},buildWeekGrid:function(){this.weekGrid=new Ext.grid.Panel(Ext.apply({title:this.L('weekOverridesText'),itemId:'weekGrid',plugins:[new Ext.grid.plugin.CellEditing({clicksToEdit:2,pluginId:'editingPlugin'})],store:new Ext.data.Store({autoDestroy:!0,model:'Gnt.model.Week'}),tbar:[{text:this.L('addText'),itemId:'btnAdd',action:'add',iconCls:'gnt-action-add',handler:this.addWeek,scope:this},{text:this.L('editText'),itemId:'btnEdit',action:'edit',iconCls:'gnt-action-edit',handler:this.editWeek,scope:this},{text:this.L('removeText'),itemId:'btnRemove',action:'remove',iconCls:'gnt-action-remove',handler:this.removeWeek,scope:this}],columns:[{header:this.L('overrideName'),dataIndex:'name',flex:1,editor:{allowBlank:!1}},{xtype:'datecolumn',header:this.L('startDate'),dataIndex:'startDate',width:100,editor:{xtype:'datefield',allowBlank:!1}},{xtype:'datecolumn',header:this.L('endDate'),dataIndex:'endDate',width:100,editor:{xtype:'datefield',allowBlank:!1}}]},this.weekGridConfig||{}));this.weekOverridesStore=this.weekGrid.store},buildDatePicker:function(){this.datePicker=new Gnt.widget.calendar.DatePicker(Ext.apply({dayOverridesCalendar:this.dayGrid.store,weekOverridesStore:this.weekGrid.store,margin:'15 10 0 10',showToday:!1},this.datePickerConfig))},onCalendarSet:function(){this.weekOverridesStore.commitChanges()},setCalendar:function(a){if(this.calendar){this.mun(this.calendar,{load:this.onCalendarChange,add:this.onCalendarChange,remove:this.onCalendarChange,update:this.onCalendarChange,parentchange:this.onParentChange,scope:this})}this.calendar=a;if(a){this.mon(this.calendar,{load:this.onCalendarChange,add:this.onCalendarChange,remove:this.onCalendarChange,update:this.onCalendarChange,parentchange:this.onParentChange,scope:this})}this.onCalendarChange();this.fireEvent('calendarset',a)},onParentChange:function(){this.updateComboBox()},updateComboBox:function(){var a=this,b=[];if(a.calendarManager){var e=a.calendarManager.getRoot();var c=a.calendarManager.getNodeByCalendar(a.calendar);e.cascadeBy(function(a){var d=a.getCalendar();if(a!==e&&a!==c&&!c.contains(a)){b.push({Id:d.calendarId,Name:a.getName()||d.calendarId})}})}else {b=a.calendar.getParentableCalendars()}this.cmbParentCalendar.store.loadData([{Id:-1,Name:this.L('noParentText')}].concat(b));var d=this.calendar&&this.calendar.parent,f=d&&d.calendarId;this.cmbParentCalendar.setValue(f||-1)},onCalendarChange:function(){this.updateComboBox();if(this.calendarManager){var a=this.calendar===this.calendarManager.getProjectCalendar();this.projectCalendarCheckbox.setDisabled(a);this.projectCalendarCheckbox.setValue(a)}this.fillDaysStore();this.fillWeeksStore();this.refreshView()},setupTemplates:function(){var a=this.L('tplTexts');if(!(this.dateInfoTpl instanceof Ext.Template)){this.dateInfoTpl=new Gnt.template.CalendarDateInfo({workingHoursText:a.tplWorkingHours,nonWorkingText:a.tplIsNonWorking,basedOnText:a.tplBasedOn,overrideText:a.tplOverride,inCalendarText:a.tplInCalendar,dayInCalendarText:a.tplDayInCalendar})}if(!(this.legendTpl instanceof Ext.Template)){this.legendTpl=new Gnt.template.CalendarLegend()}},afterRender:function(){Ext.form.Panel.prototype.afterRender.apply(this,arguments);this.onDateSelect(this.datePicker,new Date())},fillDaysStore:function(){var a=Gnt.util.Data.cloneModelSet(this.calendar,function(a){return a.getType()=='DAY'&&a.getDate()});this.dayOverridesCalendar.loadData(a)},copyCalendarDay:function(a){var b=a.copy(null);b.__COPYOF__=a.getId();return b},fillWeeksStore:function(){var b=this;var a=[];this.calendar.forEachNonStandardWeek(function(d){var c=Ext.apply({},d);c.weekAvailability=Ext.Array.map(c.weekAvailability,function(a){return a&&b.copyCalendarDay(a)||null});c.mainDay=b.copyCalendarDay(c.mainDay);a.push(c)});this.weekOverridesStore.loadData(a)},addDay:function(){var d=this.datePicker.getValue();if(this.dayOverridesCalendar.getOwnCalendarDay(d)){this.alert({msg:this.L('overrideErrorText')});return}var c=this.calendar.model;var b=c.prototype;var a={};a[b.nameField]=this.L('newDayName');a[b.typeField]='DAY';a[b.dateField]=d;a=new c(a);this.dayGrid.getStore().insert(0,a);this.dayGrid.getSelectionModel().select([a],!1,!1)},editDay:function(){var d=this,e=this.dayGrid.getSelection(),c=e[0];if(c){var a=this.currentDayOverrideEditor=new Gnt.widget.calendar.DayEditor({addText:this.L('addText'),removeText:this.L('removeText'),workingTimeText:this.L('workingTimeText'),nonworkingTimeText:this.L('nonworkingTimeText'),calendarDay:c});var b=Ext.create('Ext.window.Window',{title:this.L('dayOverridesText'),modal:!0,width:280,height:260,layout:'fit',items:a,buttons:[{text:this.L('okText'),handler:function(){if(a.isValid()){var e=a.calendarDay;e.setIsWorkingDay(a.isWorkingDay());e.setAvailability(a.getIntervals());d.applyCalendarDay(e,c);d.refreshView();b.close()}}},{text:this.L('cancelText'),handler:function(){b.close()}}]});b.show()}},removeDay:function(){var b=this.dayGrid,a=b.getSelection();if(!a[0]){return}b.getStore().remove(a[0]);this.refreshView()},refreshView:function(){var c=this.datePicker.getValue(),e=this.getCalendarDay(c),f=this.weekGrid,h=this.dayGrid,b=this.dayOverridesCalendar.getOwnCalendarDay(c),a;var d;if(b){h.getSelectionModel().select([b],!1,!0);d=b.getName()}else {a=this.getWeekOverrideByDate(c);if(a){f.getSelectionModel().select([a],!1,!0);d=a.get('name')}}var g={name:d||e.getName(),date:Ext.Date.format(c,'M j, Y'),calendarName:this.calendar.name||this.calendar.calendarId,availability:e.getAvailability(!0),override:Boolean(b||a),isWorkingDay:e.getIsWorkingDay()};this.dateInfoPanel.update(this.dateInfoTpl.apply(g));this.down('#calendarName').setValue(this.calendar.name);this.datePicker.rendered&&this.datePicker.refreshCssClasses()},onDayGridSelectionChange:function(b,a){if(a[0]){this.datePicker.setValue(a[0].getDate());this.refreshView()}},onDayGridEdit:function(b,a){if(a.field==='Date'){a.grid.getStore().clearCache();this.datePicker.setValue(a.value)}this.refreshView()},onDayGridValidateEdit:function(c,a){var b=this.dayGrid.store;if(a.value&&a.field===b.model.prototype.dateField&&b.getOwnCalendarDay(a.value)&&a.value!==a.originalValue){this.alert({msg:this.L('overrideErrorText')});return !1}},onDateSelect:function(){this.refreshView()},getCalendarDay:function(b){var a=this.dayOverridesCalendar.getOwnCalendarDay(b);if(a){return a}a=this.getWeekOverrideDay(b);if(a){return a}return this.calendar.weekAvailability[b.getDay()]||this.calendar.defaultWeekAvailability[b.getDay()]},getWeekOverrideDay:function(c){var a=this.getWeekOverrideByDate(c),d=c.getDay();if(a==null){return null}var b=a.get('weekAvailability');if(!b){return null}return b[d]},getWeekOverrideByDate:function(b){var a=null;this.weekOverridesStore.each(function(c){if(Ext.Date.between(b,c.get('startDate'),c.get('endDate'))){a=c;return !1}});return a},intersectsWithCurrentWeeks:function(a,b,d){var c=!1;this.weekOverridesStore.each(function(e){if(e==d){return}var f=e.get('startDate');var g=e.get('endDate');if(f<=a&&a<g||f<b&&b<=g){c=!0;return !1}});return c},addWeek:function(){var e=this.weekOverridesStore;var b=this.datePicker.getValue();var d;for(var c=7;c>0;c--){d=Sch.util.Date.add(b,Sch.util.Date.DAY,c);if(!this.intersectsWithCurrentWeeks(b,d)){break}}if(!c){this.alert({msg:Ext.String.format(this.L('overrideDateError'),Ext.Date.format(b,'Y/m/d'))});return}var a=new this.calendar.model();a.setType('WEEKDAYOVERRIDE');a.setName(this.L('newDayName'));a.setOverrideStartDate(b);a.setOverrideEndDate(d);a.setWeekday(-1);var f=e.insert(0,{name:this.L('newDayName'),startDate:b,endDate:d,weekAvailability:[],mainDay:a})[0];this.weekGrid.getSelectionModel().select([f],!1,!1)},editWeek:function(){var c=this.weekGrid.getSelection(),e=this;if(c.length===0){return}var a=c[0];var d=new Gnt.widget.calendar.WeekEditor({startDate:a.get('startDate'),endDate:a.get('endDate'),weekName:a.get('name'),calendarDayModel:this.calendar.model,weekAvailability:a.get('weekAvailability'),calendarWeekAvailability:this.calendar.weekAvailability,defaultWeekAvailability:this.calendar.defaultWeekAvailability});var b=Ext.create('Ext.window.Window',{title:this.L('weekOverridesText'),modal:!0,width:370,defaults:{border:!1},layout:'fit',items:d,buttons:[{action:'ok',text:this.L('okText'),handler:function(){if(d.applyChanges(a.get('weekAvailability'))){e.refreshView();b.close()}}},{text:this.L('cancelText'),handler:function(){b.close()}}]});b.show()},removeWeek:function(){var a=this.weekGrid.getSelection();if(a[0]){this.weekOverridesStore.remove(a[0]);this.refreshView()}},onWeekGridSelectionChange:function(b,a){if(a[0]){this.datePicker.setValue(a[0].get('startDate'))}},onWeekGridEdit:function(e,b){var a=b.record,c=a.get('startDate'),d=a.get('endDate');if(b.field=='startDate'||b.field=='endDate'){Ext.Array.each(a.get('weekAvailability').concat(a.get('mainDay')),function(a){if(a){a.setOverrideStartDate(c);a.setOverrideEndDate(d)}});this.datePicker.setValue(c)}this.refreshView()},alert:function(a){a=a||{};Ext.MessageBox.show(Ext.applyIf(a,{title:this.L('error'),icon:Ext.MessageBox.WARNING,buttons:Ext.MessageBox.OK}))},onWeekGridValidateEdit:function(e,a){var b=a.record,c=a.field=='startDate'?a.value:b.get('startDate'),d=a.field=='endDate'?a.value:b.get('endDate');if(c>d){this.alert({msg:this.L('startAfterEndError')});a.cancel=!0;return !1}if(this.intersectsWithCurrentWeeks(c,d,b)){this.alert({msg:this.L('weeksIntersectError')});a.cancel=!0;return !1}},applyCalendarDay:function(b,a){a.beginEdit();a.setName(b.getName());a.setIsWorkingDay(b.getIsWorkingDay());a.setDate(b.getDate());a.setOverrideStartDate(b.getOverrideStartDate());a.setOverrideEndDate(b.getOverrideEndDate());var c=b.getAvailability(!0);var d=a.getAvailability(!0);if(c+''!=d+''){a.setAvailability(b.getAvailability())}a.endEdit()},applySingleDay:function(a,b){if(a.__COPYOF__){this.applyCalendarDay(a,this.calendar.getModelById(a.__COPYOF__))}else {if(a.store){a.unjoin(a.store)}a.setId(null);b.push(a.getData())}},applyChanges:function(){var i=this;var a=this.calendar;var f=this.down('combobox[name="cmb_parentCalendar"]').getValue(),e=this.down('#calendarName').getValue(),h=this.projectCalendarCheckbox.getValue();if(this.calendarManager){var g=this.calendarManager.getModelById(a.calendarId);if(g){g.setName(e)}if(this.calendarManager.getProjectCalendar()!==a&&h){this.projectCalendarCheckbox.setDisabled(!0);this.calendarManager.setProjectCalendar(a)}}a.suspendEvents(!0);a.suspendCacheUpdate++;a.name=e;a.setParent(f?Gnt.data.Calendar.getCalendar(f):null);if(a.getProxy()&&a.getProxy().extraParams){a.getProxy().extraParams.calendarId=a.calendarId}Gnt.util.Data.applyCloneChanges(this.dayOverridesCalendar,a,function(b,a){a.originalRecord&&a.originalRecord.setAvailability(a.getAvailability(!0))});var d=[];var c=[];var b={};this.weekOverridesStore.each(function(a){Ext.Array.each(a.get('weekAvailability').concat(a.get('mainDay')),function(c){if(c){if(c.__COPYOF__){b[c.__COPYOF__]=!0}i.applySingleDay(c,d)}})});a.forEachNonStandardWeek(function(a){Ext.Array.each(a.weekAvailability.concat(a.mainDay),function(d){if(d&&!b[d.getId()]){c.push(d)}})});a.add(d);a.remove(c);a.suspendCacheUpdate--;a.clearCache();a.resumeEvents();this.fireEvent('calendarset',a)},hasChanges:function(){if(!this.calendar){return !1}var e=this.dayOverridesCalendar.getModifiedRecords().length||this.dayOverridesCalendar.getRemovedRecords().length,d=this.weekOverridesStore.getModifiedRecords().length||this.weekOverridesStore.getRemovedRecords().length,c=this.down('#calendarName').getValue()!=this.calendar.name,f=this.calendar.parent&&this.calendar.parent.calendarId||-1,b=this.cmbParentCalendar.getValue()!=f,a=!1;if(this.calendarManager){a=this.projectCalendarCheckbox.getValue()&&this.calendarManager.getProjectCalendar()!==this.calendar}return e||d||c||b||a}},0,['calendar'],['component','box','container','panel','form','calendar'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'calendar':!0},['widget.calendar'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.calendar,'Calendar'],0);Ext.cmd.derive('Gnt.data.calendar.BusinessTime',Gnt.data.Calendar,{daysPerMonth:20,daysPerWeek:5,hoursPerDay:8,defaultAvailability:['08:00-12:00','13:00-17:00']},0,0,0,0,0,0,[Gnt.data.calendar,'BusinessTime'],0);Ext.cmd.derive('CGA.widget.calendar.CalendarManager',Ext.panel.Panel,{treePanelConfig:null,treePanel:null,calendarPanelConfig:null,calendarManager:null,readOnly:!1,calendarPanel:null,layout:'border',width:800,height:600,showCalendarsTree:!1,initComponent:function(){var a=this;a.cls=a.cls+' gnt-calendarmanager';a.items=[];if(a.showCalendarsTree==!0){a.treePanel=a.buildTreePanel();a.items=[a.treePanel]}a.calendarPanel=new Gnt.widget.calendar.Calendar(Ext.apply({region:'center',calendar:a.calendarManager.getProjectCalendar(),split:!0,calendarManager:a.calendarManager,readOnly:a.readOnly},a.calendarPanelConfig));a.items.push(a.calendarPanel);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.contextMenu=a.buildContextMenu();a.setReadOnly(a.readOnly);var b=a.calendarManager;a.setCalendar(a.calendar||b.getProjectCalendar()||b.getRoot().firstChild);a.counter=1},setReadOnly:function(a){this.readOnly=a;if(this.showCalendarsTree==!0){var c=this.treePanel;c.down('#btnAdd').setDisabled(a);c.down('#btnRemove').setDisabled(a);var b=c.getView(),d=a?'disable':'enable';if(b.rendered){b.getPlugin('treeDragDrop')[d]()}else {b.on('render',function(){b.getPlugin('treeDragDrop')[d]()},this,{single:!0})}}this.contextMenu.setDisabled(a);this.calendarPanel.setReadOnly(a)},getReadOnly:function(){return this.readOnly},isReadOnly:function(){return this.getReadOnly()},buildTreePanel:function(){var a=this;return new Ext.tree.Panel(Ext.apply({split:!0,region:'west',width:200,store:a.calendarManager,displayField:a.calendarManager.model.prototype.nameField,rootVisible:!1,tbar:[{itemId:'btnAdd',text:a.L('addText'),action:'add',iconCls:'gnt-action-add',handler:a.doAddRootNode,scope:a},{itemId:'btnRemove',text:a.L('removeText'),action:'remove',iconCls:'gnt-action-remove',handler:a.doRemoveCalendar,scope:a}],viewConfig:{plugins:{ptype:'treeviewdragdrop',pluginId:'treeDragDrop',allowContainerDrops:!0,dropZone:{onNodeDrop:function(b,d,e,c){var a=!0;this.overRecord=this.view.getRecord(b);this.currentPosition='append';Ext.Array.each(c.records,function(f){if(f.contains(this.overRecord)){a=!1;return !1}},this);this.valid=a;if(this.overRecord.isLeaf()){this.overRecord.set('expanded',!0);this.overRecord.childNodes=[]}return this.self.prototype.onNodeDrop.apply(this,arguments)}}},getRowClass:function(b){if(a.calendarManager.getProjectCalendar()==b.calendar){return 'gnt-project-calendar-row'}},listeners:{drop:a.onDrop,scope:a}},listeners:{containercontextmenu:a.onContainerContextMenu,itemcontextmenu:a.onItemContextMenu,selectionchange:a.onSelectionChange,scope:a}},a.treePanelConfig))},buildContextMenu:function(){return new Ext.menu.Menu({margin:'0 0 10 0',items:[{text:this.L('add_node'),handler:this.doAddRootNode,itemId:'add-node',scope:this},{text:this.L('add_child'),handler:this.doAddChildNode,scope:this},{text:this.L('add_sibling'),handler:this.doAddSiblingCalendar,scope:this},{text:this.L('remove'),handler:this.doRemoveCalendar,itemId:'remove-node',scope:this}]})},showContextMenu:function(b,a){var c=this.contextMenu.query('menuitem');Ext.Array.each(c,function(c){c.setVisible(!!a)});this.contextMenu.down('#add-node').setVisible(!a);b.stopEvent();this.contextMenu.showAt(b.getXY())},onContainerContextMenu:function(b,a){this.showContextMenu(a)},onItemContextMenu:function(e,a,d,c,b){this.showContextMenu(b,a)},hasChanges:function(){return this.calendarPanel.hasChanges()},onSelectionChange:function(e,i,j){var a=this,h=a.calendarManager,b=a.calendarPanel;if(i.length>0){var f=i[0];var c=f.getCalendar();var d=h.getProjectCalendar();var g=c===d||d&&Boolean(f.findChild(f.idProperty,d.calendarId));if(!a.isReadOnly()&&a.showCalendarsTree){a.treePanel.down('#btnRemove').setDisabled(g);a.contextMenu.down('#remove-node').setDisabled(g)}if(b.calendar&&b.hasChanges()){Ext.Msg.show({title:a.L('confirm_action'),msg:a.L('confirm_message'),buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(d){if(d=='yes'){a.applyChanges();b.setCalendar(c)}else {if(d=='no'){b.setCalendar(c)}else {e.suspendEvents();e.select(h.getNodeByCalendar(b.calendar));e.resumeEvents()}}}})}else {b.setCalendar(c)}}},onDrop:function(d,c,a,b){a=a||this.calendarManager.getRootNode();a.expand()},onDestroy:function(){this.contextMenu.destroy();Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},applyChanges:function(){this.calendarPanel.applyChanges()},doAddRootNode:function(){this.addCalendar()},doAddChildNode:function(){var a=this.treePanel.getSelectionModel().getSelection();this.addCalendar(a[0])},doAddSiblingCalendar:function(){var a=this.treePanel.getSelectionModel().getSelection();this.addCalendar(a[0]&&a[0].parentNode)},doRemoveCalendar:function(){var a=this.treePanel.getSelectionModel().getSelection();this.removeCalendar(a[0])},addCalendar:function(b){var d=Ext.ClassManager.get(this.calendarManager.calendarClass).prototype;var c=this.calendarManager.model.prototype;var a=c.getModelConfig(d);a[c.nameField]=this.L('calendarName')+this.counter++;a.expanded=!0;a.leaf=!0;b=b||this.treePanel.getRootNode();b.data.expanded=!0;b.appendChild(a)},removeCalendar:function(a){var c=this.treePanel.getRootNode();if(a){var b=a.nextSibling||a.previousSibling||(a.parentNode==c?c.firstChild:a.parentNode);if(b){this.treePanel.getSelectionModel().select(b)}a.remove()}},setCalendar:function(a){if(this.showCalendarsTree==!0){if(a instanceof Gnt.model.Calendar){this.treePanel.setSelection(a)}else {this.treePanel.setSelection(this.calendarManager.getNodeByCalendar(a))}}}},0,0,['component','box','container','panel'],{'component':!0,'box':!0,'container':!0,'panel':!0},['cga.widget.calendarmanager'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.widget.calendar,'CalendarManager'],0);Ext.cmd.derive('CGA.widget.calendar.CalendarManagerWindow',Ext.window.Window,{width:850,height:600,layout:'fit',border:!1,calendarConfig:null,calendarManager:null,panel:null,closing:!1,initComponent:function(){this.panel=new CGA.widget.calendar.CalendarManager({calendarManager:this.calendarManager,calendarConfig:this.calendarConfig,readOnly:!0});Ext.apply(this,{title:this.title||this.L('title'),items:[this.panel],buttons:[{text:this.L('ok'),handler:function(){this.applyChanges()},scope:this},{text:this.L('cancel'),handler:function(){this.close()},scope:this}],listeners:{beforeclose:this.onBeforeClose,close:this.onAfterClose}});Ext.window.Window.prototype.initComponent.apply(this,arguments)},applyChanges:function(){this.panel.applyChanges()},onBeforeClose:function(){var a=this;var b=this.panel;if(!a.closing&&b.hasChanges()){Ext.Msg.show({title:a.L('confirm_action'),msg:a.L('confirm_message'),buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(c){switch(c){case 'yes':b.applyChanges();a.close();break;case 'no':a.closing=!0;a.close();break;}}});return !1}},onAfterClose:function(){this.closing=!1}},0,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},['cga.widget.calendarmanagerwindow'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.widget.calendar,'CalendarManagerWindow'],0);Ext.cmd.derive('issuesProgress.view.issuesTableController',Ext.app.ViewController,{loadTableData:function(d,f,h,e,c,a,b,j,i,g,k){var l=this;return d.getIssuesDataTable(f,h,e,c,a,b,j,i,g,k).then(function(l){return l})},getFilters:function(a){return a.getFilters(a.externalConfig.projectId).then(function(b){return b})},getDates:function(a,b){return a.getDates(b).then(function(c){return c})}},0,0,0,0,['controller.issuesTableController'],0,[issuesProgress.view,'issuesTableController'],0);Ext.cmd.derive('issuesProgress.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!issuesProgress.locale.Active){issuesProgress.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=issuesProgress.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in issuesProgress.locale.Active){issuesProgress.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {issuesProgress.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[issuesProgress.locale,'Locale'],0);Ext.cmd.derive('issuesProgress.locale.En',issuesProgress.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesProgress.view.dateFilterView':{Filter:'Filter'},'issuesProgress.view.filtersToolView':{Filters:'Filters',Significant:'Significant',Management:'Management',Accountable:'Accountable',Responsible:'Responsible',Projects:'Projects',SubKind:'Sub Kind',Level:'Level',All:'All',Hammock:'Hammock',Leaf:'Leaf'},'issuesProgress.view.legendView':{ProgressStatus:'Progress Status',Progress:'Progress'},'issuesProgress.view.updateDatesView':{ExpectedStartDate:'Expected Start Date',ExpectedEndDate:'Expected End Date',StartedDate:'Started Date',CompletedDate:'Completed Date',Submit:'Submit'}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesProgress.locale,'En'],0);Ext.cmd.derive('issuesProgress.locale.He',issuesProgress.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesProgress.view.dateFilterView':{Filter:''},'issuesProgress.view.filtersToolView':{Filters:'',Significant:'',Management:'',Accountable:'',Responsible:'',Projects:'',SubKind:' ',Level:'',All:'',Hammock:'',Leaf:''},'issuesProgress.view.legendView':{ProgressStatus:' ',Progress:''},'issuesProgress.view.updateDatesView':{ExpectedStartDate:'  ',ExpectedEndDate:'  ',StartedDate:'  ',CompletedDate:'  ',Submit:''}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesProgress.locale,'He'],0);Ext.cmd.derive('issuesProgress.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in issuesProgress.locale.Active){if(a===issuesProgress.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in issuesProgress.locale.Active){issuesProgress.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[issuesProgress.mixin,'Localizable'],0);Ext.cmd.derive('issuesProgress.view.dateFilterView',Ext.panel.Panel,{initComponent:function(){var a=this;var b=a.modelView;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'datefield',itemId:'from_date',format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',allowBlank:!1,validation:!0,value:a.fromDate,width:'45%'},{xtype:'tbspacer',width:'10%',height:1},{xtype:'datefield',itemId:'to_date',format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',allowBlank:!1,validation:!0,value:a.toDate,width:'45%'},{xtype:'button',text:this.L('Filter'),scale:'medium',cls:'submitButton',margin:'10 0 0 0',listeners:{click:function(a){var c=a.up().items.getRange().every(function(b){if(b.xtype=='datefield'){return b.validate()}return !0});if(!c){return !1}else {b.set('fromDate',a.up().down('#from_date').value);b.set('toDate',a.up().down('#to_date').value);b.filterData(!1);this.up('window').close()}}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.modelView=b.modelView;a.fromDate=a.modelView.get('fromDate');a.toDate=a.modelView.get('toDate');Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['dateFilterView'],['component','box','container','panel','dateFilterView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'dateFilterView':!0},['widget.dateFilterView'],[[issuesProgress.mixin.Localizable.prototype.mixinId||issuesProgress.mixin.Localizable.$className,issuesProgress.mixin.Localizable]],[issuesProgress.view,'dateFilterView'],0);Ext.cmd.derive('issuesProgress.view.filtersToolView',Ext.toolbar.Toolbar,{initComponent:function(){var b=this;var a=b.up('issuesTableView').getViewModel();a.set('projectId',b.currentProjectId);Ext.apply(b,{listeners:{afterRender:function(b){a.resetFilters()}},items:[{xtype:'button',text:this.L('Filters'),cls:'filterButtonsStyle',menu:{style:{padding:20},defaults:{listeners:{click:function(b,c){a.set(b.filterName,b.checked);a.filterData(!1)},change:function(c,b,d){a.set(c.filterName,b);a.filterData(!1)}}},items:[{text:this.L('Significant'),xtype:'menucheckitem',filterName:'significant',bind:{checked:'{significant}'}},{fieldLabel:this.L('Accountable'),xtype:'combobox',store:b.userStore,value:b.userStore.data.items[0].data.label,queryMode:'local',displayField:'label',valueField:'value',editable:!1,filterName:'accountableId',bind:{value:'{accountableId}'}},{fieldLabel:this.L('Responsible'),xtype:'combobox',store:b.userStore,value:b.userStore.data.items[0].data.label,queryMode:'local',displayField:'label',valueField:'value',editable:!1,filterName:'responsibleId',bind:{value:'{responsibleId}'}},{fieldLabel:this.L('SubKind'),xtype:'combobox',store:b.subKindsStore,value:b.subKindsStore.data.items[0].data.label,queryMode:'local',displayField:'label',valueField:'value',editable:!1,filterName:'subKind',padding:'0 0 10 0',bind:{value:'{subKind}'}}]}},{xtype:'button',text:this.L('Level'),cls:'filterButtonsStyle',menu:{defaults:{listeners:{click:function(b){a.set('level',b.value);if(b.value=='All'){a.set('allLevel',!0);a.set('hammockLevel',!1);a.set('leafLevel',!1)}else {if(b.value=='Hammock'){a.set('hammockLevel',!0);a.set('allLevel',!1);a.set('leafLevel',!1)}else {a.set('leafLevel',!0);a.set('allLevel',!1);a.set('hammockLevel',!1)}}a.filterData(!1)}}},items:[{text:this.L('All'),value:'All',xtype:'menucheckitem',group:'check',bind:{checked:'{allLevel}'}},{text:this.L('Hammock'),value:'Hammock',xtype:'menucheckitem',group:'check',bind:{checked:'{hammockLevel}'}},{text:this.L('Leaf'),value:'Leaf',xtype:'menucheckitem',group:'check',bind:{checked:'{leafLevel}'}}]}},{xtype:'combobox',store:b.projectsStore,value:b.currentProjectId,fieldStyle:'margin-top: 0px !important;',queryMode:'local',displayField:'label',valueField:'value',editable:!1,filterName:'projectId',cls:'projectFilter',listeners:{change:function(c,b,d){a.set(c.filterName,b);a.set('projectChanged',!0);a.filterData(!1)}}},{xtype:'button',iconCls:'fa fa-external-link',cls:'iconDateFilterStyle',listeners:{click:function(c){var d=this;var b=new Ext.Window({width:300,height:150,modal:!0,resizable:!1,hideOnMaskTap:!0,closeAction:'destroy',titleAlign:'center',id:'filterDateWindow',cls:'extjsWizardWrapper',items:[{xtype:'dateFilterView',padding:10,modelView:a}]});b.show()}}},{xtype:'button',iconCls:'fa fa-ban icon-attention',cls:'iconDateFilterStyle',bind:{disabled:'{disableFilterButton}'},listeners:{click:function(b){a.resetFilters()}}}]});Ext.toolbar.Toolbar.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.userStore=a.usersStore;b.subKindsStore=a.subKindsStore;b.projectsStore=a.projectsStore;b.levelsStore=a.levelsStore;b.currentProjectId=a.projectId;Ext.toolbar.Toolbar.prototype.constructor.apply(this,arguments)}},1,['filtersToolView'],['component','box','container','toolbar','filtersToolView'],{'component':!0,'box':!0,'container':!0,'toolbar':!0,'filtersToolView':!0},['widget.filtersToolView'],[[issuesProgress.mixin.Localizable.prototype.mixinId||issuesProgress.mixin.Localizable.$className,issuesProgress.mixin.Localizable]],[issuesProgress.view,'filtersToolView'],0);Ext.cmd.derive('Ext.grid.column.Number',Ext.grid.column.Column,{alternateClassName:'Ext.grid.NumberColumn',defaultFilterType:'number',format:'0,000.00',producesHTML:!1,defaultRenderer:function(a){return Ext.util.Format.number(a,this.format)},updater:function(b,a){Ext.fly(b).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Number.prototype.defaultRenderer.call(this,a)}},0,['numbercolumn'],['component','box','container','headercontainer','gridcolumn','numbercolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'numbercolumn':!0},['widget.numbercolumn'],0,[Ext.grid.column,'Number',Ext.grid,'NumberColumn'],0);Ext.cmd.derive('issuesProgress.view.updateDatesController',Ext.app.ViewController,{setDates:function(d,f,a,b,e,c){var g=this;return d.setDates(f,a,b,e,c).then(function(g){return g})}},0,0,0,0,['controller.updateDatesController'],0,[issuesProgress.view,'updateDatesController'],0);Ext.cmd.derive('issuesProgress.view.updateDatesView',Ext.panel.Panel,{controller:'updateDatesController',initComponent:function(){var a=this;Ext.apply(a,{layout:{type:'column'},defaults:{listeners:{change:function(c,b,d){a[c.itemId]=b}}},items:[{xtype:'datefield',itemId:'expectedStartDate',fieldLabel:this.L('ExpectedStartDate'),format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',value:a.expectedStartDate!=null?new Date(a.expectedStartDate):null,width:'45%'},{xtype:'tbspacer',width:'10%',height:1},{xtype:'datefield',itemId:'expectedEndDate',fieldLabel:this.L('ExpectedEndDate'),format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',value:a.expectedEndDate!=null?new Date(a.expectedEndDate):null,width:'45%',padding:'0 0 10 0'},{xtype:'datefield',itemId:'startDate',fieldLabel:this.L('StartedDate'),format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',value:a.startDate!=null?new Date(a.startDate):null,width:'45%'},{xtype:'tbspacer',width:'10%',height:1},{xtype:'datefield',itemId:'completedDate',fieldLabel:this.L('CompletedDate'),format:'d/m/Y',altFormats:'d/m/Y',emptyText:'dd/mm/yy',value:a.completedDate!=null?new Date(a.completedDate):null,width:'45%'},{xtype:'button',text:this.L('Submit'),scale:'medium',margin:'10 0 0 0',cls:'btnStyle',listeners:{click:function(c){var b=c.up().items.getRange().every(function(a){if(a.xtype=='datefield'){return a.validate()}return !0});if(!b){return !1}else {a.getController().setDates(a.crudManager,a.stageId,a.expectedStartDate,a.expectedEndDate,a.startDate,a.completedDate).then(function(b){a.up('window').close()})}}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.stageId=a.stageId;b.expectedEndDate=a.expectedEndDate!=''?a.expectedEndDate:null;b.expectedStartDate=a.expectedStartDate!=''?a.expectedStartDate:null;b.startDate=a.startDate!=''?a.startDate:null;b.completedDate=a.completedDate!=''?a.completedDate:null;b.crudManager=a.crudManager;Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['updateDatesView'],['component','box','container','panel','updateDatesView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'updateDatesView':!0},['widget.updateDatesView'],[[issuesProgress.mixin.Localizable.prototype.mixinId||issuesProgress.mixin.Localizable.$className,issuesProgress.mixin.Localizable]],[issuesProgress.view,'updateDatesView'],0);Ext.cmd.derive('issuesProgress.view.tableView',Ext.grid.Panel,{columns:[],scrollable:!0,initComponent:function(){var a=this;Ext.grid.Panel.prototype.initComponent.apply(this,arguments);a.setGridColumns(a.store)},setGridColumns:function(b){var a=this;a.headerCt.removeAll();Ext.each(b.model.getFields(),function(c){if(c.name!='id'){a.headerCt.insert(a.columns.length,{text:c.label,dataIndex:c.name,flex:1,minWidth:100,renderer:function(a,d,g,f,e,h,i){if(a!=null){d.tdCls=a.cssClass+' border-'+a.cssBorderClass;d.tdAttr='data-stageid="'+a.stageTypeId+'"data-projectId="'+a.projectId+'"data-constructPrototypeId="'+a.constructPrototypeId+'"data-constructId="'+a.constructId+'"';return a.value}return ''}})}})},listeners:{celldblclick:function(i,a,d,e,h,f,g){var c=this.up();var b=a.attributes['data-projectId'].value!=null&&a.attributes['data-projectId'].value!='undefined'?a.attributes['data-projectId'].value:a.attributes['data-constructPrototypeId'].value!=null&&a.attributes['data-constructPrototypeId'].value!='undefined'?a.attributes['data-constructPrototypeId'].value:a.attributes['data-constructId'].value;c.state.go('app.journal.issues',{stageTypeId:a.attributes['data-stageid'].value,areaId:b})}},constructor:function(b){var a=this;a.store=Ext.data.StoreManager.lookup('IssuesByStagesTable');a.crudManager=b.crudManager;Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['tableView'],['component','box','container','panel','tablepanel','gridpanel','grid','tableView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'tableView':!0},['widget.tableView'],0,[issuesProgress.view,'tableView'],0);Ext.cmd.derive('issuesProgress.view.legendView',Ext.panel.Panel,{data:'',padding:'10',initComponent:function(){var a=this;Ext.apply(a,{items:[{xtype:'label',text:this.L('ProgressStatus')+' :',cls:'legendTitle'}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(b){var a=this;var c=a.up('issuesTableView').getViewModel();a.statusFilter=[];Ext.each(b.progressStatusLegend,function(d){var e=[{xtype:'checkbox',checked:!0,cls:d.color+'light',progressFilterValue:d.value,bind:{boxLabel:d.data+' ({'+d.value.toLowerCase().replace(' ','')+'})'},listeners:{change:function(e,f,g){if(f==!0){a.statusFilter.push(e.progressFilterValue)}else {a.statusFilter.splice(a.statusFilter.indexOf(e.progressFilterValue),1)}c.filterData(!0)}}}];b.add(e);a.statusFilter.push(d.value)});c.set('statuses',a.statusFilter);b.add({xtype:'label',text:this.L('Progress')+' :',cls:'legendTitle'});Ext.each(b.progressLegend,function(a){var c=[{xtype:'checkbox',readOnly:!0,cls:a.color+' readonlyCheckBox',boxLabel:a.data}];b.add(c)})}},constructor:function(a){var b=this;b.progressStatusLegend=a.progressStatusLegend;b.progressLegend=a.progressLegend;Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['legendView'],['component','box','container','panel','legendView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'legendView':!0},['widget.legendView'],[[issuesProgress.mixin.Localizable.prototype.mixinId||issuesProgress.mixin.Localizable.$className,issuesProgress.mixin.Localizable]],[issuesProgress.view,'legendView'],0);Ext.cmd.derive('Ext.util.Bag',Ext.Base,{isBag:!0,constructor:function(){this.items=[];this.map={}},generation:0,length:0,add:function(b){var a=this,g=a.getKey(b),f=a.map,c=a.items,d=f[g],e;if(d===undefined){c.push(b);f[g]=a.length++;e=b}else {e=c[d];c[d]=b}++a.generation;return e},clear:function(){var a=this,b=a.generation||a.length,c=b?a.items:[];if(b){a.items=[];a.length=0;a.map={};++a.generation}return c},clone:function(){var a=this,b=new a.self(),c=a.length;if(c){Ext.apply(b.map,a.map);b.items=a.items.slice();b.length=a.length}return b},contains:function(a){var d=!1,c=this.map,b;if(a!=null){b=this.getKey(a);if(b in c){d=this.items[c[b]]===a}}return d},containsKey:function(a){return a in this.map},destroy:function(){this.items=this.map=null;this.callParent()},getAt:function(a){var b=null;if(a<this.length){b=this.items[a]}return b},getByKey:function(a){var b=this.map,c=null;if(a in b){c=this.items[b[a]]}return c},getCount:function(){return this.length},getKey:function(a){return a.id||a.getId()},remove:function(h){var a=this,e=a.map,c=a.items,f=null,b,g,d;if(a.length){b=e[g=a.getKey(h)];if(b!==undefined){delete e[g];f=c[b];d=c.pop();if(b<--a.length){c[b]=d;e[a.getKey(d)]=b}++a.generation}}return f},removeByKey:function(b){var a=this.getByKey(b);if(a){this.remove(a)}return a||null},sort:function(e){var a=this,c=a.items,b=c.length,d;if(b){Ext.Array.sort(c,e);a.map={};while(b-->0){d=c[b];a.map[a.getKey(d)]=b}++a.generation}}},1,0,0,0,0,0,[Ext.util,'Bag'],0);Ext.cmd.derive('Ext.util.Scheduler',Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.items=new Ext.util.Bag()},destroy:function(){var a=this,b=a.timer;if(b){window.clearTimeout(b);a.timer=null}a.items.destroy();a.items=a.orderedItems=null;a.callParent()},add:function(c){var a=this,b=a.items;if(b===a.firing){a.items=b=b.clone()}c.id=c.id||++a.nextId;c.scheduler=a;b.add(c);if(!a.sortMap){a.orderedItems=null}},remove:function(c){var a=this,b=a.items;if(a.destroyed){return}if(b===a.firing){a.items=b=b.clone()}if(c.scheduled){a.unscheduleItem(c);c.scheduled=!1}b.remove(c);a.orderedItems=null},sort:function(){var a=this,b=a.items,f={},e=a.getPreSort(),c,d;a.orderedItems=[];a.sortMap=f;if(e){b.sort(e)}b=b.items;for(c=0;c<b.length;++c){d=b[c];if(!f[d.id]){a.sortItem(d)}}a.sortMap=null},sortItem:function(a){var b=this,d=b.sortMap,e=b.orderedItems,c;if(!a.scheduler){b.add(a)}c=a.id;if(!(c in d)){d[c]=0;if(!a.sort.$nullFn){a.sort()}d[c]=1;a.order=b.orderedItems.length;e.push(a)}return b},sortItems:function(a){var b=this,c=b.sortItem;if(a){if(a instanceof Array){Ext.each(a,c,b)}else {Ext.Object.eachValue(a,c,b)}}return b},applyPreSort:function(e){if(typeof e==='function'){return e}var b=e.split(','),d=[],g=b.length,c,a,f;for(a=0;a<g;++a){d[a]=1;f=b[a];if((c=f.charAt(0))==='-'){d[a]=-1}else {if(c!=='+'){c=0}}if(c){b[a]=f.substring(1)}}return function(j,k){var f=0,a,c,h,i;for(a=0;!f&&a<g;++a){c=b[a];h=j[c];i=k[c];f=d[a]*(h<i?-1:i<h?1:0)}return f}},notify:function(){var a=this,k=a.timer,h=a.getCycleLimit(),f=Ext.GlobalEvents,j=a.suspendOnNotify,g,b,d,e,c,i;if(k){window.clearTimeout(k);a.timer=null}if(j){Ext.suspendLayouts()}while(a.scheduledCount){if(h){--h}else {a.firing=null;break}if(!i){i=!0;if(f.hasListeners.beforebindnotify){f.fireEvent('beforebindnotify',a)}}++a.passes;if(!(c=a.orderedItems)){a.sort();c=a.orderedItems}e=c.length;if(e){a.firing=a.items;for(b=0;b<e;++b){d=c[b];if(d.scheduled){d.scheduled=!1;--a.scheduledCount;a.notifyIndex=b;d.react();if(!a.scheduledCount){break}}}}}a.firing=null;a.notifyIndex=-1;if(j){Ext.resumeLayouts(!0)}if((g=a.busyCounter)!==a.lastBusyCounter){if(!(a.lastBusyCounter=g)){a.fireEvent('idle',a)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(b){var a=this;++a.scheduledCount;if(!a.timer&&!a.firing){a.scheduleTick()}},scheduleTick:function(){var a=this;if(!a.destroyed&&!a.timer){a.timer=Ext.Function.defer(a.onTick,a.getTickDelay(),a)}},unscheduleItem:function(a){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(c){var a=this,b=a.busyCounter+c;a.busyCounter=b;if(b){if(!a.lastBusyCounter){a.lastBusyCounter=b;a.fireEvent('busy',a)}}else {if(a.lastBusyCounter&&!a.timer){a.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'Scheduler'],0);Ext.cmd.derive('Ext.data.Batch',Ext.Base,{config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.operations=[];a.exceptions=[]},add:function(a){var b=this,c,d;if(Ext.isArray(a)){for(c=0,d=a.length;c<d;++c){b.add(a[c])}}else {b.total++;a.setBatch(b);b.operations.push(a)}return b},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(b,e){var f=b.order-e.order;if(f){return f}var a=b.entityType,d=e.entityType,c;if(!a||!d){return 0}if(!(c=a.rank)){a.schema.rankEntities();c=a.rank}return (c-d.rank)*b.foreignKeyDirection},start:function(b){var a=this;if(!a.operations.length||a.running){return a}a.exceptions.length=0;a.exception=!1;a.running=!0;return a.runOperation(Ext.isDefined(b)?b:a.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=!1;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var b=null,a=this.current;if(!(a===-1||this.complete)){b=this.operations[a]}return b},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(d){var a=this,c=a.operations,b=c[d];if(b===undefined){a.running=!1;a.complete=!0;a.fireEvent('complete',a,c[c.length-1])}else {a.current=d;b.setInternalCallback(a.onOperationComplete);b.setInternalScope(a);b.execute()}return a},onOperationComplete:function(b){var a=this,c=b.hasException();if(c){a.exception=!0;a.exceptions.push(b);a.fireEvent('exception',a,b)}if(c&&a.getPauseOnException()){a.pause()}else {a.fireEvent('operationcomplete',a,b);a.runNextOperation()}}},1,0,0,0,0,[['observable',Ext.mixin.Observable]],[Ext.data,'Batch'],0);Ext.cmd.derive('Ext.data.matrix.Slice',Ext.Base,{constructor:function(a,b){this.id=b;this.side=a;this.members={}},attach:function(b){var a=this;a.store=b;b.matrix=a;b.on('load',a.onStoreLoad,a,{single:!0})},commit:function(){var a=this.members,b;for(b in a){a[b][2]=0}},onStoreLoad:function(a){this.update(a.getData().items,0)},update:function(l,d){var e=this,p=Ext.data.matrix.Slice,o=e.side,q=o.index,r=l.length,i=e.id,k=e.members,m=o.inverse,g=m.slices,c,f,j,h,b,a,n;for(j=0;j<r;++j){f=n=null;h=l[j];b=h.isEntity?(n=h).id:h;c=k[b];if(d<0&&c&&c[2]===1){delete k[b];a=g[b];if(a){delete a.members[i]}f=1}else {if(!c){c=[b,b,d];c[q]=i;k[b]=c;a=g[b];if(!a){g[b]=a=new p(m,b)}a.members[i]=c;f=1}else {if(d!==c[2]&&d!==0){c[2]=d;a=g[b];f=1}}}if(f){if(e.notify){e.notify.call(e.scope,e,b,d)}if(a&&a.notify){a.notify.call(a.scope,a,i,d)}}}},updateId:function(b){var g=this,c=g.id,f=g.side,e=f.slices,j=e[c],h=j.members,l=f.index,k=f.inverse.slices,i,d,a;g.id=b;e[b]=j;delete e[c];for(d in h){i=h[d];i[l]=b;a=k[d].members;a[b]=a[c];delete a[c]}},destroy:function(){var a=this,b=a.store;if(b){b.matrix=null;b.un('load',a.onStoreLoad,a)}a.notify=a.scope=a.store=a.side=a.members=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Slice'],0);Ext.cmd.derive('Ext.data.matrix.Side',Ext.Base,{constructor:function(b,c,d){var a=this;a.matrix=b;a.index=c;a.role=d;a.slices={}},commit:function(){var a=this.slices,b;for(b in a){a[b].commit()}},get:function(a,b){var e=this,c=e.slices,d=c[a]||(c[a]=new Ext.data.matrix.Slice(e,a));return b||b===0?d.members[b]:d},update:function(c,d,b){var a=this.get(c);return a.update(d,b)},updateId:function(c,b){var a=this.get(c);if(a){a.updateId(b)}},destroy:function(){var a=this,b=a.slices,c;for(c in b){b[c].destroy()}a.inverse=a.matrix=a.role=a.slices=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Side'],0);Ext.cmd.derive('Ext.data.matrix.Matrix',Ext.Base,{constructor:function(f,c){var a=this,b=c.isManyToMany?c:f.getSchema().getAssociation(c),g=Ext.data.matrix.Side,e=new g(a,0,b.left),d=new g(a,1,b.right);a.association=b;a.session=f;a.left=e;a.right=d;e.inverse=d;d.inverse=e},commit:function(){this.left.commit();this.right.commit()},update:function(b,c,a){return this.left.update(b,c,a)},updateId:function(e,g,f){var c=e.self,d=this.left,b=this.right,a;if(c===d.role.cls){a=d}if(c===b.role.cls){a=b}if(a){a.updateId(g,f)}},destroy:function(){var a=this;a.left.destroy();a.right.destroy();a.association=a.session=a.left=a.right=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Matrix'],0);Ext.cmd.derive('Ext.data.session.ChangesVisitor',Ext.Base,{constructor:function(c){var a=this,b;a.session=c;b=c.getCrudProperties();a.result=null;a.writerOptions={};a.createKey=b.create;a.readKey=b.read;a.updateKey=b.update;a.dropKey=b.drop},onDirtyRecord:function(b){var c=this,j=c.crud,g=b.phantom,e=b.dropped,n=!g&&!e,m=b.$className,k=g||e?'allDataOptions':'partialDataOptions',d=c.writerOptions,l=b.entityName,a,f,h,i;if(g&&e){return !1}j=g?c.createKey:e?c.dropKey:c.updateKey;d=d[m]||(d[m]={});if(e){if(!(a=d.drop)){d.drop=a={all:b.getProxy().getWriter().getWriteAllFields()}}if(!a.all){h=b.id}}if(!h){if(!(a=d[k])){a=b.getProxy().getWriter().getConfig(k);d[k]=a=Ext.Object.chain(a);c.setupOptions(a)}h=b.getData(a)}i=c.result||(c.result={});f=i[l]||(i[l]={});f=f[j]||(f[j]=[]);f.push(h)},setupOptions:function(a){a.serialize=!0},onMatrixChange:function(d,h,j,i){var b=this,g=d.left.type,e=d.right.role,f=i<0?b.dropKey:b.createKey,a,c;c=b.result||(b.result={});a=c[g]||(c[g]={});a=a[e]||(a[e]={});a=a[f]||(a[f]={});a=a[h]||(a[h]=[]);a.push(j)}},1,0,0,0,0,0,[Ext.data.session,'ChangesVisitor'],0);Ext.cmd.derive('Ext.data.session.ChildChangesVisitor',Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(a){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,a);a.serialize=!1},onDirtyRecord:function(a){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==!1){if(!a.$source&&(a.dropped||!a.phantom)){this.readEntity(a)}}},readEntity:function(b){var c=this,f=c.readKey,e=b.entityName,i=b.id,h=c.seen,g=e+i,d,a;if(h[g]){return}h[g]=!0;d=c.result||(c.result={});a=d[e]||(d[e]={});a=a[f]||(a[f]=[]);a.push(Ext.apply({},b.modified,b.data))}},1,0,0,0,0,0,[Ext.data.session,'ChildChangesVisitor'],0);Ext.cmd.derive('Ext.data.session.BatchVisitor',Ext.Base,{map:null,constructor:function(a){this.batch=a},getBatch:function(h){var e=this.map,b=this.batch,c,d,g,a,f;if(e){if(!b){b=new Ext.data.Batch()}for(g in e){c=e[g];d=c.entity;f=d.getProxy();delete c.entity;for(a in c){a=f.createOperation(a,{records:c[a]});a.entityType=d;b.add(a)}}}if(b&&h!==!1){b.sort()}return b},onDirtyRecord:function(a){var f=this,c=a.phantom?'create':a.dropped?'destroy':'update',d=a.$className,e=f.map||(f.map={}),b=e[d]||(e[d]={entity:a.self});b=b[c]||(b[c]=[]);b.push(a)}},1,0,0,0,0,0,[Ext.data.session,'BatchVisitor'],0);Ext.cmd.derive('Ext.data.Session',Ext.Base,{isSession:!0,config:{schema:'default',parent:null,autoDestroy:!0,crudProperties:{create:'C',read:'R',update:'U',drop:'D'}},destroyed:!1,crudOperations:[{type:'R',entityMethod:'readEntities'},{type:'C',entityMethod:'createEntities'},{type:'U',entityMethod:'updateEntities'},{type:'D',entityMethod:'dropEntities'}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(b){var a=this;a.data={};a.matrices={};a.identifierCache={};a.recordCreator=a.recordCreator.bind(a);a.initConfig(b)},destroy:function(){var a=this,f=a.matrices,g=a.data,e,d,b,c;for(c in f){f[c].destroy()}for(e in g){d=g[e];for(c in d){b=d[c].record;if(b){b.$source=b.session=null}}}a.recordCreator=a.matrices=a.data=null;a.setSchema(null);a.callParent()},adopt:function(a){var b=this,c=a.associations,d;if(a.session!==b){a.session=b;b.add(a);if(c){for(d in c){c[d].adoptAssociated(a,b)}}}},commit:function(){var f=this.data,e=this.matrices,d,b,a,c;for(d in f){b=f[d];for(a in b){c=b[a].record;if(c){c.commit()}}}for(a in e){e[a].commit()}},createRecord:function(c,b){var a=c.$isClass?c:this.getSchema().getEntity(c),e=this.getParent(),d;if(b&&e){d=a.getIdFromData(b);if(e.peekRecord(a,d)){Ext.raise('A parent session already contains an entry for '+a.entityName+': '+d)}}return new a(b,this)},getChanges:function(){var a=new Ext.data.session.ChangesVisitor(this);this.visitData(a);return a.result},getChangesForParent:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);return a.result},getRecord:function(b,f,g){var c=this,d=b.isModel,a,i,h,e;if(d){d=b;f=b.id;b=b.self}a=c.peekRecord(b,f);if(!a){i=b.$isClass?b:c.getSchema().getEntity(b);h=c.getParent();if(h){e=h.peekRecord(i,f)}if(e){if(e.isLoading()){d=!1}else {a=e.copy(undefined,c);a.$source=e}}if(!a){if(d){a=d;c.adopt(a)}else {a=i.createWithId(f,null,c);if(g!==!1){a.load(Ext.isObject(g)?g:undefined)}}}}return a},getSaveBatch:function(b){var a=new Ext.data.session.BatchVisitor();this.visitData(a);return a.getBatch(b)},onInvalidAssociationEntity:function(a,b){Ext.raise('Unable to read association entity: '+this.getModelIdentifier(a,b))},onInvalidEntityCreate:function(a,b){Ext.raise('Cannot create, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityDrop:function(a,b){Ext.raise('Cannot drop, record does not exist: '+this.getModelIdentifier(a,b))},onInvalidEntityRead:function(a,b){Ext.raise('Cannot read, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityUpdate:function(a,b,c){if(c){Ext.raise('Cannot update, record dropped: '+this.getModelIdentifier(a,b))}else {Ext.raise('Cannot update, record does not exist: '+this.getModelIdentifier(a,b))}},peekRecord:function(b,f,e){var h=b.$isClass?b:this.getSchema().getEntity(b),g=h.entityName,a=this.data[g],c,d;a=a&&a[f];c=a&&a.record;if(!c&&e){d=this.getParent();c=d&&d.peekRecord(b,f,e)}return c||null},save:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);this.getParent().update(a.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var b=this,n=b.getSchema(),l=b.crudOperations,p=l.length,o=b.crudKeys,a,d,c,f,g,h,m,j,i,k;b.getSchema().processKeyChecks(!0);for(a in e){d=n.getEntity(a);c=e[a];for(f=0;f<p;++f){g=l[f];h=c[g.type];if(h){b[g.entityMethod](d,h)}}}for(a in e){d=n.getEntity(a);m=d.associations;c=e[a];for(j in c){if(o[j]){continue}i=m[j];k=c[i.role];i.processUpdate(b,k)}}},privates:{add:function(a){var c=this,f=a.id,e=c.getEntry(a.self,f),b,d;e.record=a;c.registerReferences(a);b=a.associations;for(d in b){b[d].checkMembership(c,a)}},afterErase:function(a){this.evict(a)},applySchema:function(a){return Ext.data.schema.Schema.get(a)},createEntities:function(a,f){var g=f.length,c,d,b,e;for(c=0;c<g;++c){d=f[c];e=a.getIdFromData(d);b=this.peekRecord(a,e);if(!b){b=this.createRecord(a,d)}else {this.onInvalidEntityCreate(a,e)}b.phantom=!0}},dropEntities:function(c,d){var g=d.length,b,e,a,f;if(g){f=Ext.isObject(d[0])}for(b=0;b<g;++b){a=d[b];if(f){a=c.getIdFromData(a)}e=this.peekRecord(c,a);if(e){e.drop()}else {this.onInvalidEntityDrop(c,a)}}},evict:function(b){var c=b.entityName,a=this.data[c],d=b.id,e;if(a){delete a[d]}},getEntityList:function(e,a){var g=a.length,b,d,c,f;for(b=0;b<g;++b){d=a[b];c=this.peekRecord(e,d);if(c){a[b]=c}else {f=!0;a[b]=null;this.onInvalidAssociationEntity(e,d)}}if(f){a=Ext.Array.clean(a)}return a},getEntry:function(a,c){if(a.isModel){c=a.getId();a=a.self}var f=a.$isClass?a:this.getSchema().getEntity(a),d=f.entityName,e=this.data,b;b=e[d]||(e[d]={});b=b[c]||(b[c]={});return b},getRefs:function(h,d,i){var a=this.getEntry(h),c=a&&a.refs&&a.refs[d.role],g=i&&this.getParent(),b,f,e;if(g){b=g.getRefs(h,d);if(b){for(f in b){e=b[f];if(!c||!c[f]){this.getRecord(e.self,e.id)}}c=a&&a.refs&&a.refs[d.role]}}return c||null},getIdentifier:function(d){var f=this.getParent(),c,b,e,a;if(f){a=f.getIdentifier(d)}else {c=this.identifierCache;b=d.identifier;e=b.id||d.entityName;a=c[e];if(!a){if(b.clone){a=b.clone({cache:c})}else {a=b}c[e]=a}}return a},getMatrix:function(a,e){var d=a.isManyToMany?a.name:a,c=this.matrices,b;b=c[d];if(!b&&!e){b=c[d]=new Ext.data.matrix.Matrix(this,a)}return b||null},getMatrixSlice:function(a,d){var b=this.getMatrix(a.association),c=b[a.side];return c.get(d)},getModelIdentifier:function(a,b){return b+'@'+a.entityName},onIdChanged:function(a,b,l){var c=this,j=c.matrices,q=a.entityName,s=a.id,g=c.data[q],k=g[b],p=a.associations,h=k.refs,r=c._setNoRefs,d,i,t,m,n,e,f,o;delete g[b];g[l]=k;for(o in j){j[o].updateId(a,b,l)}if(h){for(e in h){f=h[e];n=p[e];d=n.association;if(!d.isManyToMany){i=d.field.name;for(m in f){f[m].set(i,s,r)}}}}c.registerReferences(a,b)},processManyBlock:function(f,e,d,i){var c=this,b,a,g,h;if(d){for(b in d){a=c.peekRecord(f,b);if(a){g=c.getEntityList(e.cls,d[b]);h=e.getAssociatedItem(a);c[i](e,h,a,g)}else {c.onInvalidAssociationEntity(f,b)}}}},processManyCreate:function(d,b,c,a){if(b){b.add(a)}else {c[d.getterName](null,null,a)}},processManyDrop:function(d,a,c,b){if(a){a.remove(b)}},processManyRead:function(d,b,c,a){if(b){b.setRecords(a)}else {c[d.getterName](null,null,a)}},readEntities:function(a,f){var g=f.length,c,d,b,e;for(c=0;c<g;++c){d=f[c];e=a.getIdFromData(d);b=this.peekRecord(a,e);if(!b){b=this.createRecord(a,d)}else {this.onInvalidEntityRead(a,e)}b.phantom=!1}},recordCreator:function(d,b){var c=this,e=b.getIdFromData(d),a=c.peekRecord(b,e,!0);if(!a){a=new b(d,c)}else {a=c.getRecord(b,e)}return a},registerReferences:function(c,h){var k=c.entityName,n=c.id,l=c.data,m=h||h===0,g,e,d,j,a,i,b,f;j=(i=c.references).length;for(e=0;e<j;++e){a=i[e];d=l[a.name];if(d||d===0){a=a.reference;k=a.type;f=a.inverse.role;g=this.getEntry(a.cls,d);b=g.refs||(g.refs={});b=b[f]||(b[f]={});b[n]=c;if(m){delete b[h]}}}},updateEntities:function(c,d){var h=d.length,f,e,a,b,g;if(Ext.isArray(d)){for(f=0;f<h;++f){e=d[f];b=c.getIdFromData(e);a=this.peekRecord(c,b);if(a){a.set(e)}else {this.onInvalidEntityUpdate(c,b)}}}else {for(b in d){e=d[b];a=this.peekRecord(c,b);if(a&&!a.dropped){g=a.set(e)}else {this.onInvalidEntityUpdate(c,b,!!a)}}}},updateReference:function(h,j,b,c){var g=j.reference,f=g.type,d=g.inverse.role,i=h.id,e,a;if(c||c===0){a=this.getEntry(f,c).refs[d];delete a[i]}if(b||b===0){e=this.getEntry(f,b);a=e.refs||(e.refs={});a=a[d]||(a[d]={});a[i]=h}},visitData:function(b){var j=this,n=j.data,k=j.matrices,i,l,d,o,f,e,c,a,m,g,h;j.getSchema().processKeyChecks(!0);for(c in n){i=n[c];for(d in i){a=i[d].record;if(a){if(a.phantom||a.dirty||a.dropped){if(b.onDirtyRecord){b.onDirtyRecord(a)}}else {if(b.onCleanRecord){b.onCleanRecord(a)}}}}}if(b.onMatrixChange){for(c in k){f=k[c].left;g=f.slices;l=f.role.association;for(d in g){m=g[d];e=m.members;for(o in e){h=(a=e[o])[2];if(h){b.onMatrixChange(l,a[0],a[1],h)}}}}}return b},_setNoRefs:{refs:!1}}},1,0,0,0,0,0,[Ext.data,'Session'],0);Ext.cmd.derive('Ext.util.Schedulable',Ext.Base,{'abstract':!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var a=this,b=a.getScheduler();if(b){b.remove(a)}a.scheduler=null;a.schedule=a.react=Ext.emptyFn;a.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var a=this,b;if(!a.scheduled){b=a.getScheduler();if(b){a.scheduled=!0;if(a.onSchedule){a.onSchedule()}b.scheduleItem(a)}}},unschedule:function(){var a=this,b;if(a.scheduled){b=a.getScheduler();if(b){b.unscheduleItem(a)}a.scheduled=!1}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,'Schedulable'],0);Ext.cmd.derive('Ext.app.bind.BaseBinding',Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(d,c,e,b){var a=this;a.options=b;a.owner=d;a.scope=e;a.callback=c;a.lateBound=Ext.isString(c);if(b&&b.deep){a.deep=!0}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var a=this,b=a.owner;Ext.util.Schedulable.prototype.destroy.call(this);if(b){b.onBindDestroy(a)}a.scope=a.callback=a.owner=null},isReadOnly:function(){return !0},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},notify:function(b){var a=this,d=a.options||a.defaultOptions,c=a.lastValue;if(!a.calls||a.deep||c!==b||Ext.isArray(b)){++a.calls;a.lastValue=b;if(a.lateBound){a.scope[a.callback](b,c,a)}else {a.callback.call(a.scope,b,c,a)}if(d.single){a.destroy()}}}}},1,0,0,0,0,0,[Ext.app.bind,'BaseBinding'],0);Ext.cmd.derive('Ext.app.bind.Binding',Ext.app.bind.BaseBinding,{constructor:function(a,c,e,d){var b=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,a.owner,c,e,d);b.stub=a;b.depth=a.depth;if(!a.isLoading()&&!a.scheduled){b.schedule()}},destroy:function(c){var a=this,b=a.stub;if(b&&!c){b.unbind(a);a.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(b,c){var a=this.stub;return a&&a.bindValidation(b,c)},bindValidationField:function(b,c){var a=this.stub;return a&&a.bindValidationField(b,c)},getFullName:function(){return this.fullName||(this.fullName='@('+this.stub.getFullName()+')')},getValue:function(){var b=this,c=b.stub,a=c&&c.getValue();if(b.transform){a=b.transform(a)}return a},isLoading:function(){var a=this.stub;return a&&a.isLoading()},isReadOnly:function(){var b=this.stub,a=this.options;if(!(a&&a.twoWay===!1)){if(b){return b.isReadOnly()}}return !0},refresh:function(){},setValue:function(a){this.stub.set(a)},privates:{getDataObject:function(){var a=this.stub;return a&&a.getDataObject()},getRawValue:function(){var b=this,c=b.stub,a=c&&c.getRawValue();if(b.transform){a=b.transform(a)}return a},isDescendantOf:function(b){var a=this.stub;return a?b===a||a.isDescendantOf(b):!1},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var a=this.stub;a.scheduler.sortItem(a)}}},1,0,0,0,0,0,[Ext.app.bind,'Binding'],0);Ext.cmd.derive('Ext.app.bind.AbstractStub',Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(b,c){var a=this;a.owner=b;a.name=c;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var a=this,d=a.children,c=a.bindings,f,b,e;if(c){for(b=0,f=c.length;b<f;++b){c[b].destroy(!0)}}for(e in d){d[e].destroy()}Ext.util.Schedulable.prototype.destroy.call(this);a.bindings=a.children=a.owner=null},add:function(a){var b=this;(b.children||(b.children={}))[a.name]=a;a.depth=b.depth+1;a.parent=b},getChild:function(b){var a=Ext.isString(b)?b.split('.'):b;if(a&&a.length){return this.descend(a,0)}return this},getFullName:function(){var b=this,a=b.fullName,d=b.parent,c;if(!a){a=b.name||b.id;if(d&&(c=d.getFullName())){a=(c.charAt(c.length-1)!==':'?c+'.':c)+a}b.fullName=a}return a},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},bind:function(d,f,e){var a=this,b=new Ext.app.bind.Binding(a,d,f,e),c=a.bindings||(a.bindings=[]);b.depth=a.depth;c.push(b);return b},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(b){var a=this,c=a.bindings,e=a.name,d;a.parent=a.bindings=null;a.destroy();b.depth=a.depth;b.bindings=c;b.generation=a.generation+1;b.name=e;b.id=a.id;b.path=a.path;if(c){for(d=c.length;d-->0;){c[d].stub=b}}return b},isDescendantOf:function(b){for(var a=this;a=a.parent;){if(a===b){return !0}}return !1},onSchedule:function(){for(var c,e,b,a,d=this.parent;d;d=d.parent){a=d.bindings;if(a){for(c=0,e=a.length;c<e;++c){b=a[c];if(b.deep&&!b.scheduled){b.schedule()}}}}},react:function(){var b=this.bindings,c,a,d;if(b){for(a=0,d=b.length;a<d;++a){c=b[a];if(!c.scheduled){c.schedule()}}}},unbind:function(b){var a=this.bindings;if(a&&a.length){Ext.Array.remove(a,b)}},privates:{collect:function(){var a=this.children,f=this.bindings,b=0,d=0,c,e;if(a){for(e in a){c=a[e];d=c.collect();if(d===0){c.destroy();delete a[e]}b+=d}}if(f){b+=f.length}return b},getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this.parent;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'AbstractStub'],0);Ext.cmd.derive('Ext.app.bind.Stub',Ext.app.bind.AbstractStub,{isStub:!0,dirty:!0,formula:null,validationKey:'validation',statics:{trackHadValue:function(a,e,f,b){var g=b&&b.children,h,c,d;d=a!==undefined;if(!e.hadValue[f]){e.hadValue[f]=d}if(b){b.hadValue=d}if(a&&(a.constructor===Object||a.isModel)){if(a.isModel){a=a.data}for(c in a){Ext.app.bind.Stub.trackHadValue(a[c],e,f+'.'+c,g&&g[c])}}}},constructor:function(e,c,a){var b=this,d=c;Ext.app.bind.AbstractStub.prototype.constructor.call(this,e,c);b.boundValue=null;if(a){a.add(b);if(!a.isRootStub){d=a.path+'.'+c}}b.hadValue=e.hadValue[d];b.path=d},destroy:function(){var a=this,c=a.formula,d=a.parent,b=a.storeBinding;if(c){c.destroy()}if(b){b.destroy()}a.detachBound();a.parentValue=a.formula=a.storeBinding=null;Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(b,c){var a=this.parent;return a&&a.descend([this.validationKey,this.name]).bind(b,c)},bindValidationField:function(a,c){var b=this.parent,f=this.name,e=typeof a==='string',d;if(b){d=b.bind(function(d){var b=null;if(d&&d.isModel){b=d.getField(f)}if(e){c[a](b,null,this)}else {a.call(c,b,null,this)}})}return d||null},descend:function(c,g){var b=this,f=b.children||(b.children={}),d=g||0,e=c[d++],a;if(!(a=f[e])){a=new Ext.app.bind.Stub(b.owner,e,b)}if(d<c.length){a=a.descend(c,d)}return a},getChildValue:function(a){var c=this,d=c.name,b;if(!a&&!Ext.isString(a)){b=c.hadValue?null:undefined}else {b=c.inspectValue(a);if(!b){if(a.isEntity){b=a.data[d]}else {b=a[d]}}}return b},getDataObject:function(){var c=this,a=c.parent.getDataObject(),e=c.name,b=a?a[e]:null,d,f;if(!b&&a&&a.isEntity){d=a.associations;if(d&&e in d){b=a[d[e].getterName]()}}if(!b||!(b.$className||Ext.isObject(b))){a[e]=b={};c.hadValue=c.owner.hadValue[c.path]=!0;c.invalidate(!0,!0)}return b},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(a){var c=this,d=c.parent,b=c.children,f=c.name,e;a.parent=d;a.children=b;if(d){d.children[f]=a}if(b){for(e in b){b[e].parent=a}}c.children=null;return Ext.app.bind.AbstractStub.prototype.graft.call(this,a)},isLoading:function(){var a=this,g=a.parent,c=!1,d,b,e,f;if(g&&!(c=g.isLoading())){b=a.getParentValue();e=a.inspectValue(b);if(e){c=e.isLoading()}else {if(b&&b.isModel){d=b.associations;if(!(d&&a.name in d)){c=!1;f=!0}}if(!f){c=!a.hadValue&&a.getRawValue()===undefined}}}return c},invalidate:function(d,c){var a=this,b=a.children,e;a.dirty=!0;if(!c&&!a.isLoading()){if(!a.scheduled){a.schedule()}}if(d&&b){for(e in b){b[e].invalidate(d,c)}}},isReadOnly:function(){var a=this.formula;return !!(a&&!a.set)},set:function(b){var a=this,i=a.parent,e=a.name,d=a.formula,c,f,h,g;if(d&&!d.settingValue&&d.set){d.setValue(b);return}else {if(a.isLinkStub){g=a.getLinkFormulaStub();d=g?g.formula:null;if(d){d.setValue(b);return}}}c=i.getDataObject();if(c.isEntity){f=c.associations;if(f&&e in f){h=f[e];c[h.setterName](b);a.invalidate(!0)}else {c.set(e,b)}}else {if(b&&b.constructor===Object||b!==c[e]){if(!a.setByLink(b)){if(b===undefined){delete c[e]}else {c[e]=b;Ext.app.bind.Stub.trackHadValue(b,a.owner,a.path,a)}a.inspectValue(c);a.invalidate(!0)}}}},onStoreLoad:function(){this.invalidate(!0)},afterLoad:function(a){this.invalidate(!0)},afterCommit:function(a){this.afterEdit(a,null)},afterEdit:function(h,c){var a=this.children,g=c&&c.length,f=h.associations,e,b,d,i;if(a){if(g){for(b=0;b<g;++b){d=a[c[b]];if(d){d.invalidate()}}}else {for(e in a){if(!(f&&e in f)){a[e].invalidate()}}}}this.invalidate()},afterReject:function(a){this.afterEdit(a,null)},setByLink:function(g){var f=this,e=0,d,b,c,a;for(a=f;a;a=a.parent){if(a.isLinkStub){b=a;if(e){for(c=[],d=0,a=f;a!==b;a=a.parent){++d;c[e-d]=a.name}}break}++e}if(!b||!(a=b.getTargetStub())){return !1}if(c){a=a.descend(c)}a.set(g);return !0},setFormula:function(c){var a=this,b=a.formula;if(b){b.destroy()}a.formula=new Ext.app.bind.Formula(a,c)},react:function(){var b=this,a=this.boundValue,d=b.children,c;if(a){if(a.isValidation){a.refresh();c=a.generation;if(b.lastValidationGeneration===c){return}b.lastValidationGeneration=c}else {if(a.isModel){if(d&&d[b.validationKey]){a.isValid()}}else {if(a.isStore){if(a.isLoading()&&!a.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{collect:function(){var a=this,d=Ext.app.bind.AbstractStub.prototype.collect.call(this),b=a.storeBinding?1:0,c=a.formula?1:0;return d+b+c},getLinkFormulaStub:function(){var a=this;while(a.isLinkStub){a=a.binding.stub}return a.formula?a:null},getParentValue:function(){var a=this;if(a.dirty){a.parentValue=a.parent.getValue();a.dirty=!1}return a.parentValue},setStore:function(a){this.storeBinding=a},inspectValue:function(c){var b=this,f=b.name,i=b.boundValue,a=null,e,d,h,g;if(c&&c.isEntity){e=c.associations;if(e&&f in e){a=c[e[f].getterName]();if(a&&a.isStore){a.$associatedStore=!0}}else {if(f===b.validationKey){a=c.getValidation();b.lastValidationGeneration=null}}}else {if(c){d=c[f];if(d&&(d.isModel||d.isStore)){a=d}}}h=i!==a;if(h){if(i){b.detachBound()}if(a){if(a.isModel){a.join(b)}else {g=a.associatedEntity;if(g&&!g.phantom&&!a.complete&&!a.hasPendingLoad()){a.load()}a.on('load',b.onStoreLoad,b,{single:!0})}}b.boundValue=a}return a},detachBound:function(){var b=this,a=b.boundValue;if(a){if(a.isModel){a.unjoin(b)}else {a.un('load',b.onStoreLoad,b)}}},sort:function(){var a=this,d=a.formula,c=a.scheduler,b=a.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(b){c.sortItem(b)}if(d){c.sortItem(d)}}}},1,0,0,0,0,0,[Ext.app.bind,'Stub'],0);Ext.cmd.derive('Ext.app.bind.LinkStub',Ext.app.bind.Stub,{isLinkStub:!0,binding:null,destroy:function(){var a=this,b=a.binding,c=a.owner;if(b){a.binding=null;b.destroy();if(c){delete c.linkData[a.name]}}a.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var a=this;return a.fullName||(a.fullName='('+Ext.app.bind.Stub.prototype.getFullName.call(this)+' -> '+a.binding.getFullName()+')')},getDataObject:function(){var a=this.binding;return a&&a.getDataObject()},getRawValue:function(){var a=this.binding;return a&&a.getRawValue()},getValue:function(){var a=this.binding;return a&&a.getValue()},getTargetStub:function(){var a=this.binding;return a&&a.stub},isLoading:function(){var a=this.binding;return a?a.isLoading():!1},link:function(c,b){var a=this,d=a.binding;if(d){d.destroy()}b=a.target=b||a.owner;a.linkDescriptor=c;a.binding=b.bind(c,a.onChange,a);a.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){var a=this,b=a.owner.linkData;b[a.name]=a.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var c=this,b=Ext.app.bind.Stub.prototype.collect.call(this),a=c.binding?1:0;return b+a},sort:function(){var a=this.binding;if(a){this.scheduler.sortItem(a)}}}},0,0,0,0,0,0,[Ext.app.bind,'LinkStub'],0);Ext.cmd.derive('Ext.app.bind.RootStub',Ext.app.bind.AbstractStub,{isRootStub:!0,depth:0,createRootChild:function(a,j){var e=this,d=e.owner,i=d.getData(),g=e.children,c=g&&g[a],f=c?null:e,h,b;if(j||i.hasOwnProperty(a)||!(h=d.getParent())){b=new Ext.app.bind.Stub(d,a,f)}else {b=new Ext.app.bind.LinkStub(d,a,c?null:f);b.link('{'+a+'}',h)}if(c){c.graft(b)}return b},createStubChild:function(a){return this.createRootChild(a,!0)},descend:function(a,g){var f=this,d=f.children,b=g||0,e=a[b++],c=d&&d[e]||f.createRootChild(e);if(b<a.length){c=c.descend(a,b)}return c},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+':')},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return !1},isLoading:function(){return !1},set:function(g){var c=this,e=c.children||(c.children={}),d=c.owner,h=d.data,j=d.getParent(),f,a,i,b;for(b in g){if((i=g[b])!==undefined){if(!(a=e[b])){a=new Ext.app.bind.Stub(d,b,c)}else {if(a.isLinkStub){if(!a.getLinkFormulaStub()){f=a;a=new Ext.app.bind.Stub(d,b);f.graft(a)}}}a.set(i)}else {if(h.hasOwnProperty(b)){delete h[b];a=e[b];if(a&&!a.isLinkStub&&j){a=c.createRootChild(b)}a.invalidate(!0)}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,'RootStub'],0);Ext.cmd.derive('Ext.app.bind.Multi',Ext.app.bind.BaseBinding,{isMultiBinding:!0,missing:1,deep:!0,constructor:function(b,f,e,g,c){var a=this,d=c&&c.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,f,e,g,c);a.bindings=[];a.literal=b.$literal;if(b.constructor===Object){if(d){a.staticKeys=[]}a.addObject(b,a.lastValue={},a.staticKeys)}else {a.addArray(b,a.lastValue=[])}if(!--a.missing&&!a.scheduled){a.schedule()}},destroy:function(){var a=this;a.bindings=Ext.destroy(a.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(d,i,f){var a=this,h=a.owner,e=a.bindings,g=a.literal?d.reference?'bindEntity':'bindExpression':'bind',b,c;++a.missing;b=h[g](d,function(c){i[f]=c;if(b.calls===1){--a.missing}if(!a.missing&&!a.scheduled){a.schedule()}},a,null);c=b.depth;if(!e.length||c<a.depth){a.depth=c}e.push(b);return !this.isBindingStatic(b)},addArray:function(g,d){var f=this,h=g.length,e=!1,c,a,b;for(b=0;b<h;++b){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}e=e||c}return e},addObject:function(g,d,h){var f=this,e=!1,c,a,b;for(b in g){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}if(h&&!c){h.push(b)}e=e||c}return e},getFullName:function(){var c=this,a=c.fullName,d=c.bindings,e=d.length,b;if(!a){a='@[';for(b=0;b<e;++b){if(b){a+=','}a+=d[b].getFullName()}a+=']';c.fullName=a}return a},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return !1},isLoading:function(){for(var a=this.bindings,b=a.length;b-->0;){if(a[b].isLoading()){return !0}}return !1},isBindingStatic:function(a){return a.isTemplateBinding&&a.isStatic},isStatic:function(){var b=this.bindings,d=b.length,a,c;for(a=0;a<d;++a){c=b[a];if(!this.isBindingStatic(c)){return !1}}return !0},pruneStaticKeys:function(){var b=Ext.apply({},this.lastValue),c=this.staticKeys,d=c.length,a;for(a=0;a<d;++a){delete b[c[a]]}return b},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,'Multi'],0);Ext.cmd.derive('Ext.app.bind.Formula',Ext.util.Schedulable,{statics:{getFormulaParser:function(c){var b=this.formulaCache,a,d;if(!b){b=this.formulaCache=new Ext.util.LruCache({maxSize:20})}a=b.get(c);if(!a){d='[^\\.a-z0-9_]'+c+'\\(\\s*([\'"])(.*?)\\1\\s*\\)';a=new RegExp(d,'gi');b.add(c,a)}return a}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(h,c){var a=this,g=h.owner,f,b,d,e;a.owner=g;a.stub=h;Ext.util.Schedulable.prototype.constructor.call(this);if(c instanceof Function){a.get=d=c}else {a.get=d=c.get;a.set=c.set;b=c.bind;if(c.single){a.single=c.single}if(b){f=b.bindTo;if(f){e=Ext.apply({},b);delete e.bindTo;b=f}}}if(b){a.explicit=!0}else {b=d.$expressions||a.parseFormula(d)}a.binding=g.bind(b,a.onChange,a,e)},destroy:function(){var a=this,b=a.binding,c=a.stub;if(b){b.destroy();a.binding=null}if(c){c.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);a.getterFn=a.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+'='+Ext.util.Schedulable.prototype.getFullName.call(this)+')')},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(f){var g=f.toString(),b={$literal:!0},a,d,e,c;a=this.argumentNamesRe.exec(g);d=a?a[1]:'get';e=Ext.app.bind.Formula.getFormulaParser(d);while(a=e.exec(g)){c=a[2];b[c]=c}b.$literal=!0;f.$expressions=b;return b},react:function(){var a=this,c=a.owner,d=a.binding.lastValue,e=a.getterFn,b;if(a.explicit){b=d}else {b=c.getFormulaFn(d)}a.settingValue=!0;a.stub.set(a.calculation=a.get.call(c,b));a.settingValue=!1;if(a.single){a.destroy()}},setValue:function(a){this.set.call(this.stub.owner,a)},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var b=this,a=b.binding;if(!a.destroyed){b.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'Formula'],0);Ext.cmd.derive('Ext.app.bind.TemplateBinding',Ext.app.bind.BaseBinding,{isTemplateBinding:!0,lastValue:undefined,value:undefined,constructor:function(f,d,e,h,g){var a=this,c=new Ext.app.bind.Template(f),b=c.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,d,e,h,g);a.tpl=c;a.tokens=b;b.$literal=!0;if(b.length){a.multiBinding=new Ext.app.bind.Multi(b,d,a.onBindData,a)}else {a.isStatic=!0;a.onData(c.text)}},destroy:function(){var a=this;Ext.destroy(a.multiBinding);a.tpl=a.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var a=this.multiBinding;return this.fullName||(this.fullName='$'+(a?a.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return !1},isLoading:function(){var a=this.multiBinding;return a?a.isLoading():!1},onBindData:function(a){this.onData(this.tpl.apply(a,this.getTemplateScope()))},onData:function(c){var a=this,b=a.value;if(b!==(a.value=c)){a.lastValue=b;a.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var a=this.multiBinding;if(a){a.refresh()}},privates:{sort:function(){var a=this.multiBinding;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'TemplateBinding'],0);Ext.cmd.derive('Ext.data.ChainedStore',Ext.data.AbstractStore,{config:{source:null,remoteFilter:!1,remoteSort:!1},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);this.getData().addObserver(this)},remove:function(){var a=this.getSource();return a.remove.apply(a,arguments)},removeAll:function(){var a=this.getSource();return a.removeAll()},getData:function(){var b=this,a=b.data;if(!a){b.data=a=b.constructDataCollection()}return a},getSession:function(){return this.getSource().getSession()},applySource:function(a){if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateSource:function(b,c){var a=this,d;if(c){c.removeObserver(a)}if(b){d=a.getData();d.setSource(b.getData());if(!a.isInitializing){a.fireEvent('refresh',a);a.fireEvent('datachanged',a)}b.addObserver(a)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionAdd){return}a.fireEvent('add',a,d,b.at);if(c){a.fireEvent('datachanged',a)}},onCollectionItemChange:function(f,a){var b=this,d=a.item,c=a.modified||null,e=a.meta;b.onUpdate(d,e,c,a);b.fireEvent('update',b,d,e,c,a)},onUpdate:Ext.emptyFn,onCollectionRemove:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionRemove){return}a.fireEvent('remove',a,d,b.at,!1);if(c){a.fireEvent('datachanged',a)}},onSourceBeforeLoad:function(b,a){this.fireEvent('beforeload',this,a)},onSourceAfterLoad:function(d,c,a,b){this.fireEvent('load',this,c,a,b)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers('Filter')},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0;this.callObservers('BeforePopulate')},onSourceAfterPopulate:function(){var a=this;a.ignoreCollectionAdd=!1;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);this.callObservers('AfterPopulate')},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeClear')},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1;this.callObservers('AfterClear')},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeRemoveAll')},onSourceAfterRemoveAll:function(c,b){var a=this;a.ignoreCollectionRemove=!1;if(!b){a.fireEvent('clear',a);a.fireEvent('datachanged',a)}this.callObservers('AfterRemoveAll',[b])},onSourceFilter:function(){var a=this;a.fireEvent('refresh',a);a.fireEvent('datachanged',a)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var a=this;a.observers=null;a.setSource(null);a.getData().destroy(!0);a.data=null},privates:{isMoving:function(){var a=this.getSource();return a.isMoving?a.isMoving.apply(a,arguments):!1},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,['store.chained'],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,'ChainedStore'],0);Ext.cmd.derive('Ext.app.ViewModel',Ext.Base,{isViewModel:!0,factoryConfig:{name:'viewModel'},collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(c,a,d,b){return this.mergeNew(c,a,d,b)}},links:null,parent:null,root:!0,scheduler:null,schema:'default',session:null,stores:null,view:null},constructor:function(a){this.hadValue={};this.bindings={};this.initConfig(a)},destroy:function(){var a=this,d=a._scheduler,g=a.storeInfo,i=a.getParent(),j=a.collectTask,f=a.children,h=a.bindings,b,c,e;a.destroying=!0;if(j){j.cancel();a.collectTask=null}if(f){for(b in f){f[b].destroy()}}if(g){for(b in g){c=g[b];e=c.autoDestroy;if(e||!c.$wasInstance&&e!==!1){c.destroy()}Ext.destroy(c.$binding)}}if(i){i.unregisterChild(a)}a.getRoot().destroy();for(b in h){h[b].destroy()}if(d&&d.$owner===a){d.$owner=null;d.destroy()}a.hadValue=a.children=a.storeInfo=a._session=a._view=a._scheduler=a.bindings=a._root=a._parent=a.formulaFn=a.$formulaData=null;a.destroying=!1;a.callParent()},bind:function(a,f,e,c){var d=this,b,g;e=e||d;if(!c&&a.bindTo!==undefined&&!Ext.isString(a)){c=a;a=c.bindTo}if(!Ext.isString(a)){b=new Ext.app.bind.Multi(a,d,f,e,c);g=!0}else {if(d.expressionRe.test(a)){a=a.substring(1,a.length-1);b=d.bindExpression(a,f,e,c)}else {b=new Ext.app.bind.TemplateBinding(a,d,f,e,c);g=!0}}if(g){d.bindings[b.id]=b}return b},getSession:function(){var b=this,a=b._session,c;if(!a&&(c=b.getParent())){b.setSession(a=c.getSession())}return a||null},getStore:function(c){var a=this.storeInfo,b;if(a){b=a[c]}return b||null},linkTo:function(i,a){var e=this,b,d,h,f,g,c;if(a.isModel){a={type:a.entityName,id:a.id}}f=a.type||a.reference;d=a.create;if(f){h=a.id;if(d){h=undefined}c=e.getRecord(f,h);if(Ext.isObject(d)){c.set(d);c.commit();c.phantom=!0}b=e.getRoot().createStubChild(i);b.set(c)}else {b=e.getStub(i);if(!b.isLinkStub){g=new Ext.app.bind.LinkStub(e,b.name);b.graft(g);b=g}b.link(a)}},notify:function(){this.getScheduler().notify()},get:function(a){return this.getStub(a).getValue()},set:function(a,b){var d=this,e,c;d.getData();if(b===undefined&&a&&a.constructor===Object){c=d.getRoot();b=a}else {if(a&&a.indexOf('.')<0){e={};e[a]=b;b=e;c=d.getRoot()}else {c=d.getStub(a)}}c.set(b)},privates:{registerChild:function(b){var a=this.children;if(!a){this.children=a={}}a[b.getId()]=b},unregisterChild:function(b){var a=this.children;if(!this.destroying&&a){delete a[b.getId()]}},getRecord:function(d,e){var c=this.getSession(),b=d,f=e!==undefined,a;if(c){if(f){a=c.getRecord(d,e)}else {a=c.createRecord(d)}}else {if(!b.$isClass){b=this.getSchema().getEntity(b)}if(f){a=b.createWithId(e);a.load()}else {a=new b()}}return a},notFn:function(a){return !a},bindExpression:function(a,d,f,e){var i=a.charAt(0),c=i==='!',g=c?a.substring(1):a,h=this.getStub(g),b;b=h.bind(d,f,e);if(c){b.transform=this.notFn}return b},applyScheduler:function(a){if(a&&!a.isInstance){a=new Ext.util.Scheduler(a);a.$owner=this}return a},getScheduler:function(){var b=this,a=b._scheduler,c;if(!a){if(!(c=b.getParent())){a=new Ext.util.Scheduler({preSort:'kind,-depth'});a.$owner=b}else {a=c.getScheduler()}b.setScheduler(a)}return a},getStub:function(a){var b=this.getRoot();return a?b.getChild(a):b},collect:function(){var a=this,c=a.getParent(),b=a.collectTask;if(c){c.collect();return}if(!b){b=a.collectTask=new Ext.util.DelayedTask(a.doCollect,a)}if(a.collectTimeout===0){a.doCollect()}else {b.delay(a.collectTimeout)}},doCollect:function(){var a=this.children,b;if(a){for(b in a){a[b].doCollect()}}this.getRoot().collect()},onBindDestroy:function(c,d){var a=this,b;if(a.destroying){return}if(!d){delete a.bindings[c.id]}b=a.getParent();if(b){b.onBindDestroy(c,!0)}else {a.collect()}},applyData:function(b,e){var a=this,d,c;a.getSession();if(!e){c=a.getParent();a.linkData=d=c?Ext.Object.chain(c.getData()):{};a.data=a._data=Ext.Object.chain(d)}if(b&&b.constructor===Object){a.getRoot().set(b)}},applyParent:function(a){if(a){a.registerChild(this)}return a},applyStores:function(f){var b=this,h=b.getRoot(),d,a,c,g,e,i;b.storeInfo={};b.listenerScopeFn=function(){return b.getView().getInheritedConfig('defaultListenerScope')};for(d in f){a=f[d];if(a.isStore){a.$wasInstance=!0;b.setupStore(a,d);continue}else {if(Ext.isString(a)){a={source:a}}else {a=Ext.apply({},a)}}e=a.listeners;delete a.listeners;c=b.bind(a,b.onStoreBind,b,{trackStatics:!0});if(c.isStatic()){c.destroy();b.createStore(d,a,e)}else {c.$storeKey=d;c.$listeners=e;g=h.createStubChild(d);g.setStore(c)}}},onStoreBind:function(a,g,c){var f=this.storeInfo,e=c.$storeKey,d=f[e],b;if(!d){this.createStore(e,a,c.$listeners,c)}else {a=Ext.merge({},c.pruneStaticKeys());b=a.proxy;delete a.type;delete a.model;delete a.fields;delete a.proxy;delete a.listeners;if(b){delete b.reader;delete b.writer;d.getProxy().setConfig(b)}d.setConfig(a)}},createStore:function(f,a,c,d){var e=this.getSession(),b;a=Ext.apply({},a);if(a.session){a.session=e}if(a.source){a.type=a.type||'chained'}a.listeners=c;b=Ext.Factory.store(a);b.$binding=d;this.setupStore(b,f)},setupStore:function(a,b){a.resolveListenerScope=this.listenerScopeFn;this.storeInfo[b]=a;this.set(b,a)},applyFormulas:function(b){var c=this,e=c.getRoot(),a,d;c.getData();for(a in b){e.createStubChild(a);d=c.getStub(a);d.setFormula(b[a])}return b},applyLinks:function(a){for(var b in a){this.linkTo(b,a[b])}},applySchema:function(a){return Ext.data.schema.Schema.get(a)},applyRoot:function(){var b=new Ext.app.bind.RootStub(this),a=this.getParent();if(a){b.depth=a.getRoot().depth-1000}return b},getFormulaFn:function(c){var a=this,b=a.formulaFn;if(!b){b=a.formulaFn=function(b){return a.$formulaData[b]}}a.$formulaData=c;return b}}},1,0,0,0,['viewmodel.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,'ViewModel'],0);Ext.cmd.derive('issuesProgress.view.filtersViewModel',Ext.app.ViewModel,{data:{statuses:[],significant:null,accountableId:null,responsibleId:null,level:null,allLevel:null,hammockLevel:null,leafLevel:null,projectId:null,subKind:null,projectChanged:!1,fromDate:null,toDate:null,disableFilterButton:!0,notstarted:0,latestart:0,behind:0,inwork:0,completed:0},filterData:function(b){var a=this;a.getView().getController().loadTableData(a.getView().crudManager,a.data.projectId,a.data.statuses,a.data.significant,a.data.accountableId,a.data.responsibleId,a.data.level,a.data.subKind,a.data.fromDate,a.data.toDate).then(function(c){a.getView().loadIssueTableStore(c,Ext.getStore('IssuesByStagesTable'),a.data.projectChanged,b)});a.getDisableFilterButton()},getDisableFilterButton:function(){var a=this;if(a.data.significant==!0||a.data.accountableId!=null&&a.data.accountableId!='All'||a.data.responsibleId!=null&&a.data.responsibleId!='All'||a.data.subKind!=null&&a.data.subKind!='All'||a.data.level!=null&&a.data.level!='All'||a.data.fromDate!=null||a.data.toDate!=null){a.set('disableFilterButton',!1)}else {a.set('disableFilterButton',!0)}},resetFilters:function(){var a=this;a.set('significant',!1);a.set('accountableId','All');a.set('responsibleId','All');a.set('subKind','All');a.set('level','All');a.set('allLevel',!0);a.set('hammockLevel',!1);a.set('leafLevel',!1);a.set('fromDate',null);a.set('toDate',null);a.getDisableFilterButton();a.filterData(!1)},resetProgressStatus:function(){var a=this;a.set('notstarted',0);a.set('latestart',0);a.set('behind',0);a.set('inwork',0);a.set('completed',0)}},0,0,0,0,['viewmodel.filtersViewModel'],0,[issuesProgress.view,'filtersViewModel'],0);Ext.cmd.derive('issuesProgress.view.issuesTableView',Ext.panel.Panel,{width:'100%',controller:'issuesTableController',viewModel:'filtersViewModel',crudManager:null,stores:[],layout:'border',scrollable:!0,listeners:{afterrender:function(b){var a=this;b.setHeight($(document).height()-60);this.getController().getFilters(this.crudManager).then(function(c){a.stores['users']=Ext.create('Ext.data.Store');c.usersStore.forEach(function(d){a.stores['users'].add({value:d.value,label:d.label})});a.stores['subKinds']=Ext.create('Ext.data.Store');c.subKindsStore.forEach(function(d){a.stores['subKinds'].add({value:d.value,label:d.label})});a.stores['projects']=Ext.create('Ext.data.Store');c.projectsStore.forEach(function(d){a.stores['projects'].add({value:d.value,label:d.label})});a.stores['levels']=Ext.create('Ext.data.Store');c.levelsStore.forEach(function(d){a.stores['levels'].add({value:d.value,label:d.label})});var d={dockedItems:[{xtype:'filtersToolView',dock:'top',usersStore:a.stores['users'],subKindsStore:a.stores['subKinds'],projectsStore:a.stores['projects'],levelsStore:a.stores['levels'],projectId:a.projectId,cls:'filterToolBarStyle'}]};b.addDocked(d)});a.getController().loadTableData(a.crudManager,a.crudManager.externalConfig.projectId).then(function(c){var d=Ext.create('Ext.data.Store',{storeId:'IssuesByStagesTable',fields:c.headers});a.loadIssueTableStore(c,d,!1,!1);var e=[{xtype:'tableView',tableColumns:c.rows,region:'center',scrollable:!0,crudManager:a.crudManager},{xtype:'legendView',cls:'legendStyle',progressStatusLegend:c.progressStatusLegend,progressLegend:c.progressLegend,header:!1,collapsible:!0,region:'west',split:!0,width:'15%'}];b.add(e)})}},loadIssueTableStore:function(d,b,c,e){var a=this.getViewModel();if(c==!0){a.resetProgressStatus();a.set('projectChanged',!1);b=Ext.create('Ext.data.Store',{storeId:'IssuesByStagesTable',fields:d.headers})}if(e!=!0){a.resetProgressStatus()}var f=[];Ext.each(d.rows,function(g){var h={};Ext.each(d.headers,function(f){h[f.name]={};if(g[f.name]!=null){h[f.name].value=g[f.name].value;h[f.name].cssClass=g[f.name].cssClass;h[f.name].cssBorderClass=g[f.name].cssBorderClass;h[f.name].projectId=g[f.name].id;h[f.name].stageTypeId=g[f.name].stageTypeId}else {if(g.constructProtoypesData[f.name]!=null){h[f.name].value=g.constructProtoypesData[f.name].constructPrototype.value;h[f.name].cssClass=g.constructProtoypesData[f.name].constructPrototype.cssClass;h[f.name].cssBorderClass=g.constructProtoypesData[f.name].constructPrototype.cssBorderClass;h[f.name].constructPrototypeId=g.constructProtoypesData[f.name].constructPrototype.id;h[f.name].stageTypeId=g.constructProtoypesData[f.name].constructPrototype.stageTypeId}else {if(g.constructProtoypesData[f.parent]!=null){if(g.constructProtoypesData[f.parent].constructsData[f.name]!=null){h[f.name].value=g.constructProtoypesData[f.parent].constructsData[f.name].value;h[f.name].cssClass=g.constructProtoypesData[f.parent].constructsData[f.name].cssClass;h[f.name].cssBorderClass=g.constructProtoypesData[f.parent].constructsData[f.name].cssBorderClass;h[f.name].stageTypeId=g.constructProtoypesData[f.parent].constructsData[f.name].stageTypeId;h[f.name].constructId=g.constructProtoypesData[f.parent].constructsData[f.name].id;if(c==!0||e!=!0){a.set(g.constructProtoypesData[f.parent].constructsData[f.name].progressStatus,a.get(g.constructProtoypesData[f.parent].constructsData[f.name].progressStatus)+1)}}}}}});f.push(h)});b.loadData(f);if(c==!0){this.down('tableView').setGridColumns(b);this.down('tableView').setStore(b)}},constructor:function(b){var a=this;a.crudManager=Ext.create('issuesProgress.store.CrudManager');a.crudManager.setExternalConfig({client:b.clientInstance,projectId:b.projectId});a.projectId=b.projectId;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';a.state=b.state;issuesProgress.locale[a.currentLocale].apply();Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['issuesTableView'],['component','box','container','panel','issuesTableView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'issuesTableView':!0},['widget.issuesTableView'],0,[issuesProgress.view,'issuesTableView'],0);Ext.cmd.derive('CGA.window.milestonesAlertWindow',Ext.Window,{required:['genericGrid.view.View'],cls:'milestonesAlertWindow',modal:!0,resizable:!1,width:'90%',height:'90%',layout:'fit',initComponent:function(){var a=this;var b=[];a.getInitialConfig('data').forEach(function(a){if(a.Id.indexOf(':')==-1){b.push(a.Id)}});Ext.apply(a,{title:a.L('milestonesAlert'),closeToolText:a.L('CloseWindow'),rtl:a.getInitialConfig('locale')=='he',items:[{xtype:'genericGridView',initSignature:{'actionName':'getTable','className':'PhaseViewRequest','projectId':a.getInitialConfig('projectId'),'researchId':a.getInitialConfig('researchId'),'rowsIds':b},clientInstance:a.getInitialConfig('clientInstance'),locale:a.getInitialConfig('locale'),showCloseButton:a.getInitialConfig('showCloseButton')}]});Ext.window.Window.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){var c=a.down('genericGridGrid');var b=a;c.on('beforereconfigure',function(e,d,c,g,f,h){a.getInitialConfig('data').forEach(function(i){var b=d.getById(i.Id);if(b&&b.data.end_date__c!==null){b.set('modifiedEndDate',Ext.Date.format(new Date(i.EndDate),e.isParentRtl()?'d/m/Y':'m/d/Y'));var m=Ext.Date.diff(new Date(b.data.end_date__c),new Date(i.EndDate),'d')||'';b.set('modifiedGap',m);var l=Ext.Date.diff(new Date(i.EndDate),new Date(b.get('planned_end_date__c')),'d')||'';b.set('end_date_planned_gap__c',l);var k=Ext.Date.diff(new Date(i.EndDate),new Date(b.get('internal_due_date__c')),'d')||'';b.set('internal_due_date_gap__c',k);var j=Ext.Date.diff(new Date(i.EndDate),new Date(b.get('external_due_date__c')),'d')||'';b.set('external_due_date_gap__c',j)}});c.forEach(function(b){b.renderer=function(i){if(i==0){i=''}if(b.xtype=='datecolumn'&&i){if(this.isParentRtl()){return Ext.Date.format(new Date(i),'d/m/Y')}else {return Ext.Date.format(new Date(i),'m/d/Y')}}return i}});c.filter(function(b){return b.dataIndex=='end_date_planned_gap__c'||b.dataIndex=='external_due_date_gap__c'||b.dataIndex=='internal_due_date_gap__c'||b.dataIndex=='internal_due_date_planned_gap__c'}).forEach(function(b){b.renderer=function(i,l,j,m,k,n,o){return '<span class="makeMinusLeftSide"'+(i<0?'style="color: red"':'')+'> '+(i==0?'':i)+(i<0&&(b.dataIndex=='external_due_date_gap__c'||j.data.completed__c==!1)?'<img class="warningSign" style="height: 16px; width: 20px; vertical-align:middle;padding: 0px 2px 0px 2px;" src="'+screenConfig.resourceUrl+'resources/images/warning_16.png" />':'')+'</span>'}});c.filter(function(b){return b.dataIndex=='modifiedGap'}).forEach(function(b){b.renderer=function(i,k,m,l,j,n,o){return '<span '+(i>0?'style="color: red"':'')+'> '+(i<=0?'':i)+'</span>'}});c.filter(function(b){return b.dataIndex=='completed__c'})[0].renderer=function(b){if(b===!0){return '<span> <i title="Completed" class="fa fa-check greenCheck"></i> </span>'}else {return ''}};c.splice(3,0,{align:'center',flex:1,cls:'dataTableHeader',dataIndex:'modifiedGap',header:b.L('modifiedGap'),renderer:function(b,j,l,k,i,m,n){return '<span class="makeMinusLeftSide"'+(b>0?'':'style="color: red"')+'> '+(b==0?'':b)+'</span>'}});c.splice(3,0,{align:'center',flex:1,cls:'dataTableHeader',dataIndex:'modifiedEndDate',header:b.L('modifiedEndDate')})})}}},0,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.window,'milestonesAlertWindow'],0);Ext.cmd.derive('CGA.view.MainViewportController',Ext.app.ViewController,{control:{'[reference=gantt]':{selectionchange:'onGanttSelectionChange'},'#':{afterrender:'onAfterRender'},'[reference=undo]':{click:'onUndo'},'[reference=redo]':{click:'onRedo'},'[reference=updateTaskStartToday]':{click:'updateTaskStartToday'},'[reference=filterSchedule]':{click:'filterSchedule'},'[reference=filterPred]':{click:'filterPred'},'[reference=adjustToCalendar]':{click:'adjustToCalendar'},'[reference=addDependencies]':{click:'addDependencies'},'[reference=toggleBaseline]':{click:'toggleBaseline'},'[reference=toggleWeeklyBaseline]':{click:'toggleWeeklyBaseline'},'[reference=toggleMonthlyBaseline]':{click:'toggleMonthlyBaseline'},'[reference=toggleHistoryBaseline]':{click:'toggleHistoryBaseline'},'[reference=deleteSelectedBaseline]':{click:'deleteSelectedBaseline'},'[reference=changeSelectedBaseline]':{click:'changeSelectedBaseline'},'[reference=openEditBaselineWindow]':{click:'openEditBaselineWindow'},'[reference=saveMainBaseLineSelected]':{click:'saveMainBaseLineSelected'},'[reference=saveMainBaseLine]':{click:'saveMainBaseLine'},'[reference=saveProjectBaseLine]':{click:'saveProjectBaseLine'},'[reference=saveWeeklyBaseLine]':{click:'saveWeeklyBaseLine'},'[reference=saveWeeklyBaseLineSelected]':{click:'saveWeeklyBaseLineSelected'},'[reference=saveMonthlyBaseLine]':{click:'saveMonthlyBaseLine'},'[reference=saveMonthlyBaseLineSelected]':{click:'saveMonthlyBaseLineSelected'},'[reference=setBaselineAll]':{click:'setBaselineAll'},'[reference=shiftPrevious]':{click:'onShiftPrevious'},'[reference=shiftNext]':{click:'onShiftNext'},'[reference=collapseAll]':{click:'onCollapseAll'},'[reference=expandAll]':{click:'onExpandAll'},'[reference=zoomOut]':{click:'onZoomOut'},'[reference=zoomIn]':{click:'onZoomIn'},'[reference=zoomToFit]':{click:'onZoomToFit'},'[reference=viewFullScreen]':{click:'onFullScreen'},'[reference=criticalPath]':{click:'onHighlightCriticalPath'},'[reference=milestoneCriticalPath]':{click:'onMilestoneCriticalPath'},'[reference=addTask]':{click:'onAddTask'},'[reference=removeSelected]':{click:'onRemoveSelectedTasks'},'[reference=indentTask]':{click:'onIndent'},'[reference=outdentTask]':{click:'onOutdent'},'[reference=manageCalendars]':{click:'onManageCalendars'},'[reference=saveChanges]':{click:'onSaveChanges'},'[reference=toggleGrouping]':{click:'onToggleGrouping'},'[reference=toggleRollup]':{click:'onToggleRollup'},'[reference=highlightLong]':{click:'onHighlightLongTasks'},'[reference=filterTasks]':{click:'onFilterTasks'},'[reference=clearTasksFilter]':{click:'onClearTasksFilter'},'[reference=scrollToLast]':{click:'onScrollToLast'},'[reference=toggleHamoks]':{click:'onToggleHamoks'},'[reference=downloadStore]':{click:'onDownloadStore'},'[reference=downloadMsProject]':{click:'downloadMsProject'},'combo[reference=langSelector]':{select:'onLanguageSelected'},'combo[reference=baselineSelector]':{select:'onBaselineSelected'},'[reference=zoomToWeekLevel]':{click:'zoomToWeekLevel'},'[reference=zoomToQuarterLevel]':{click:'zoomToQuarterLevel'},'[reference=zoomToMonthLevel]':{click:'zoomToMonthLevel'},'[reference=betweenDates]':{click:'betweenDates'},'[reference=manuallyScheduled]':{click:'manuallyScheduled'},'[reference=constraintDate]':{click:'constraintDate'},'[reference=level1]':{click:'level1'},'[reference=level2]':{click:'level2'},'[reference=level3]':{click:'level3'},'[reference=level4]':{click:'level4'},'[reference=level5]':{click:'level5'},'[reference=level6]':{click:'level6'},'[reference=level7]':{click:'level7'},'[reference=significantTasks]':{click:'significantTasks'},'[reference=administrativeTasks]':{click:'administrativeTasks'},'[reference=releaseLock]':{click:'releaseLock'},'[reference=hideTasks]':{click:'hideTasks'},'[reference=bulkOperations]':{click:'openBulkOperations'},'[reference=recalculateDynamicPredecessors]':{click:'recalculateDynamicPredecessors'},'[reference=printGantt]':{click:'printGantt'},'[reference=printGantt]':{click:'printGantt'},'[reference=weeklyFilter]':{click:'weeklyFilter'},'[reference=monthlyFilter]':{click:'monthlyFilter'},'[reference=milestonesAlert]':{click:'onMilestonesAlert'}},getSelectedTasks:function(){var b=[];if(this.getViewModel().get('hasSelection')){var a=this.getGantt().getSelectionModel().getSelected();if(a instanceof Ext.grid.selection.Rows){b=a.getRecords()}else {if(a instanceof Ext.grid.selection.Cells){a.eachRow(function(a){b.push(a)})}}}return b},filterPred:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('filterPred',a);b.setChecked(a);this.applySingleFilter({dataIndex:'predecessors',dataType:null,value:!0,opr:'=',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},filterSchedule:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('filterSchedule',a);b.setChecked(a);this.applySingleFilter({dataIndex:'filterSchedule',dataType:null,value:!0,opr:'=',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},updateTaskStartToday:function(){var e=this;var d=!1;var c=!1;var a=this.getGantt().getSelectedRows();if(a==null||a.length==0){a=[];c=!0;var f=this.getGantt().getTaskStore();this.getGantt().getTaskStore().getRoot().cascadeBy(function(b){if(b!=null&&b.id!='root'&&f.isNodeFilteredIn(b)&&b.isLeaf()&&b.getPercentDone()==0&&b.getStartDate()){a.push(b)}})}Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.adjustingOnLoad=!0;Ext.MessageBox.wait('Adjusting Tasks Schedule...');var b=new Date();b=CGA.utils.date.resetStart(b);setTimeout(function(){a.sort(function(a,b){if(a.getStartDate()&&b.getStartDate()){if(a.getStartDate().getTime()<b.getStartDate().getTime()){return -1}if(a.getStartDate().getTime()>b.getStartDate().getTime()){return 1}}return 0});a.forEach(function(a){if(a.get('isVirtual')!=!0){if(a.getStartDate()&&a.getStartDate().getTime()<b.getTime()&&a.getStartedDate()==null&&a.getCompletedDate()==null&&a.isLeaf()){a.setStartDate(b,null,null,null,!1,!0);d=!0}}});if(d==!0){e.getGantt().getCrudManager().getTaskStore().adjustToCalendar(function(){Ext.MessageBox.hide();Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.adjustingOnLoad=!1;if(c==!0){e.onClearTasksFilter()}})}else {Ext.MessageBox.hide();Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.adjustingOnLoad=!1}},50)},onUndo:function(){this.getViewModel().get('undoManager').undo();this.onMilestoneChanged(!1)},onRedo:function(){this.getViewModel().get('undoManager').redo();this.onMilestoneChanged(!1)},adjustToCalendar:function(a){var b=this;this.getGantt().getCrudManager().getTaskStore().adjustToCalendar(a)},toggleBaseline:function(){this.getGantt().el.toggleCls('showMainBaseline')},toggleWeeklyBaseline:function(){this.getGantt().el.toggleCls('showWeeklyBaseline')},toggleMonthlyBaseline:function(){this.getGantt().el.toggleCls('showMonthlyBaseline')},toggleHistoryBaseline:function(){var a=this.getGantt().getCrudManager();if(a.historyChecked==null){a.historyChecked=!0}else {a.historyChecked=!a.historyChecked}if(!this.getGantt().el.hasCls('showHistoryBaseline')){this.getGantt().el.toggleCls('showHistoryBaseline')}},deleteSelectedBaseline:function(a){var b=this;var c=new Ext.Window({title:b.L('DeleteHistoryBaseline'),rtl:b.getViewModel().get('currentLocale')=='he',width:300,modal:!0,closeAction:'hide',resizable:!1,hideOnMaskTap:!0,titleAlign:'center',padding:10,items:[Ext.create('Ext.form.Panel',{layout:{type:'column'},items:[{xtype:'label',text:b.L('ConfirmDeleteHistoryBaseline')+': "'+a.text+'"',width:'100%',padding:'0 0 15 0'},{xtype:'tbspacer',width:'15%',height:1},{xtype:'button',text:this.L('Cancel'),itemId:'close',scale:'medium',width:'30%',cls:'baseLineButton closeBaseLineButton',listeners:{click:function(b){b.up('window').close()}}},{xtype:'tbspacer',width:'10%',height:1},{xtype:'button',text:this.L('Submit'),itemId:'submit',scale:'medium',width:'30%',cls:'baseLineButton',listeners:{click:function(c){b.getGantt().getCrudManager().deleteBaseLine(a).then(function(e){var b=Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].menu;b.remove(b.queryBy(function(b){return b.baseLineId==a.baseLineId})[0]);var d=Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].menu;d.remove(d.queryBy(function(b){return b.value==a.baseLineId})[0]);if(b.items.getRange().length==0){Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].setDisabled(!0);Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].setDisabled(!0)}else {Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].setDisabled(!1);Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].setDisabled(!1)}});c.up('window').close()}}},{xtype:'tbspacer',width:'15%',height:1}]})]});c.show()},changeSelectedBaseline:function(b){var a=this;var c=new Ext.Window({title:a.L('LoadHistoryBaseline'),rtl:a.getViewModel().get('currentLocale')=='he',width:300,modal:!0,closeAction:'hide',resizable:!1,hideOnMaskTap:!0,titleAlign:'center',padding:10,items:[Ext.create('Ext.form.Panel',{layout:{type:'column'},items:[{xtype:'label',text:a.L('LoadBaseline')+': "'+b.text+'"',width:'100%',padding:'0 0 15 0'},{xtype:'tbspacer',width:'15%',height:1},{xtype:'button',text:this.L('Cancel'),itemId:'close',scale:'medium',width:'30%',cls:'baseLineButton closeBaseLineButton',listeners:{click:function(a){a.up('window').close()}}},{xtype:'tbspacer',width:'10%',height:1},{xtype:'button',text:this.L('Submit'),itemId:'submit',scale:'medium',width:'30%',cls:'baseLineButton',listeners:{click:function(c){a.getGantt().getCrudManager().changeSelectedBaseline(b);c.up('window').close()}}},{xtype:'tbspacer',width:'15%',height:1}]})]});c.show()},openEditBaselineWindow:function(c){var a=this;var b=c.up().down('#baselineCheckItem');var d=new Ext.Window({title:a.L('EditBaseline'),rtl:a.getViewModel().get('currentLocale')=='he',width:300,modal:!0,closeAction:'hide',resizable:!1,hideOnMaskTap:!0,titleAlign:'center',padding:10,items:[Ext.create('Ext.form.Panel',{layout:{type:'column'},items:[{xtype:'textfield',value:b.baselineName,width:'100%',allowBlank:!1,padding:'0 0 15 0'},{xtype:'tbspacer',width:'15%',height:1},{xtype:'button',text:this.L('Cancel'),itemId:'close',scale:'medium',width:'30%',cls:'baseLineButton closeBaseLineButton',listeners:{click:function(a){a.up('window').close()}}},{xtype:'tbspacer',width:'10%',height:1},{xtype:'button',text:this.L('Submit'),itemId:'submit',scale:'medium',width:'30%',cls:'baseLineButton',listeners:{click:function(d){a.getGantt().getCrudManager().editBaseline(b.baselineId,d.up().down('textfield').value);d.up('window').close()}}},{xtype:'tbspacer',width:'15%',height:1}]})]});d.show()},saveMainBaseLine:function(){this.getGantt().getCrudManager().saveBaseLine('MAIN','SavingMainBaseline')},saveMainBaseLineSelected:function(){var a=this.getGantt().getSelectionModel().getSelected();var b;if(a instanceof Ext.grid.selection.Rows){b=a.getRecords()}this.getGantt().getCrudManager().saveBaseLine('MAIN','SavingMainBaseline',null,null,b)},saveWeeklyBaseLine:function(){this.getGantt().getCrudManager().saveBaseLine('WEEKLY','SavingWeeklyBaseline')},saveWeeklyBaseLineSelected:function(){var a=this.getGantt().getSelectionModel().getSelected();var b;if(a instanceof Ext.grid.selection.Rows){b=a.getRecords()}this.getGantt().getCrudManager().saveBaseLine('WEEKLY','SavingWeeklyBaseline',null,null,b)},saveMonthlyBaseLine:function(){this.getGantt().getCrudManager().saveBaseLine('MONTHLY','SavingMonthlyBaseline')},saveMonthlyBaseLineSelected:function(){var a=this.getGantt().getSelectionModel().getSelected();var b;if(a instanceof Ext.grid.selection.Rows){b=a.getRecords()}this.getGantt().getCrudManager().saveBaseLine('MONTHLY','SavingMonthlyBaseline',null,null,b)},onMilestonesAlert:function(){var c=this;this.getViewModel().set('hasUnreadAlerts','');var a=this.getGantt().getCrudManager();var b=Ext.create('CGA.window.milestonesAlertWindow',{data:this.getAllChangedMilestones(),locale:c.getViewModel().get('currentLocale'),projectId:a.projectId,researchId:a.researchId,clientInstance:window.client,showCloseButton:!1});b.show()},getAllChangedMilestones:function(){var a=this.getGantt().getCrudManager().getChangeSetPackage();var b=[];if(a){for(i in a.tasks.updated){if(a.tasks.updated[i].isMilestone){var c=this.getGantt().getCrudManager().getTaskStore().byIdMap[a.tasks.updated[i].Id].modified;for(field in c){if(field=='EndDate'){a.tasks.updated[i].Note=null;b.push(a.tasks.updated[i])}}}}}return b},onMilestoneChanged:function(b){var c=this;var a=this.getViewModel();if(b||this.getAllChangedMilestones().length>0){a.set('disableMilestonesAlert',!1);a.set('hasUnreadAlerts','icon-attention')}else {c.resetMilestoneAlerts()}},resetMilestoneAlerts:function(){var b=this;var a=this.getViewModel();a.set('disableMilestonesAlert',!0);a.set('hasUnreadAlerts','')},saveProjectBaseLine:function(){var a=this;var b=new Ext.Window({title:a.L('CreateBaseLine'),rtl:a.getViewModel().get('currentLocale')=='he',width:300,height:160,modal:!0,closeAction:'hide',resizable:!1,hideOnMaskTap:!0,titleAlign:'center',padding:10,items:[Ext.create('Ext.form.Panel',{layout:{type:'column'},items:[{xtype:'textfield',emptyText:this.L('NewBaseLineName'),itemId:'baseLineName',allowOnlyWhitespace:!1,allowBlank:!1,requiredField:!0,width:'100%',padding:'0 0 15 0'},{xtype:'tbspacer',width:'15%',height:1},{xtype:'button',text:this.L('Cancel'),itemId:'close',scale:'medium',width:'30%',cls:'baseLineButton closeBaseLineButton',listeners:{click:function(a){a.up('window').close()}}},{xtype:'tbspacer',width:'10%',height:1},{xtype:'button',text:this.L('Submit'),itemId:'submit',scale:'medium',width:'30%',cls:'baseLineButton',listeners:{click:function(b){var c=b.up().query('[requiredField=true]').every(function(a){return a.validate()});if(!c){return !1}a.getGantt().getCrudManager().saveBaseLine('HISTORY','SavingProjectBaseline',Math.random(),b.up().down('#baseLineName').value);b.up('window').close()}}},{xtype:'tbspacer',width:'15%',height:1}]})]});b.show()},setBaselineAll:function(){this.getGantt().getTaskStore().getRoot().cascadeBy(function(a){a.beginEdit();a.setBaselineStartDate(a.getStartDate());a.setBaselineEndDate(a.getEndDate());a.endEdit()})},addDependencies:function(){var c=!1;var b='';var a=[];this.getGantt().getSelectedRows().forEach(function(d){if(d.get('isReadOnly')==!0||d.get('isVirtual')==!0){c=!0;b=d.getName()}else {a.push(d)}});if(c){Ext.Msg.show({title:'',msg:'Cannot add predecessor to read only task '+b,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:Ext.Msg.minWidth})}else {if(a.length>1){this.getGantt().getCrudManager().addDependencies(a,0)}else {Ext.Msg.show({title:'',msg:'Please select tasks',icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:Ext.Msg.minWidth})}}},getGantt:function(){return this.getView().lookupReference('gantt')},onShiftPrevious:function(){this.getGantt().shiftPrevious()},onShiftNext:function(){this.getGantt().shiftNext()},onCollapseAll:function(){this.getGantt().collapseAll()},onExpandAll:function(){this.getGantt().expandAll()},expandLevel:function(b){var a=this;a.getGantt().collapseAll();Ext.suspendLayouts();a.getGantt().getTaskStore().getRoot().cascadeBy(function(c){if(c.data.depth<=b){a.view.items.items[0].expandPath(c.getPath())}else {}});Ext.resumeLayouts(!0)},onZoomOut:function(){this.getGantt().zoomOut()},onZoomIn:function(){this.getGantt().zoomIn()},onZoomToFit:function(){this.getGantt().zoomToFit(null,{leftMargin:100,rightMargin:100})},zoomToWeekLevel:function(){this.getGantt().zoomToLevel(10)},zoomToQuarterLevel:function(){this.getGantt().zoomToLevel(3)},zoomToMonthLevel:function(){this.getGantt().zoomToLevel(6)},onFullScreen:function(){this.getGantt().getEl().down('.x-panel-body').dom[this.getFullscreenFn()](Element.ALLOW_KEYBOARD_INPUT)},getFullscreenFn:function(){var b=document.documentElement,a;if(b.requestFullscreen){a='requestFullscreen'}else {if(b.mozRequestFullScreen){a='mozRequestFullScreen'}else {if(b.webkitRequestFullScreen){a='webkitRequestFullScreen'}else {if(b.msRequestFullscreen){a='msRequestFullscreen'}}}}return a},openBulkOperations:function(){var a=Ext.create('CGA.view.BulkOperationBaseForm',{grid:this.getGantt()});a.show()},onGanttSelectionChange:function(d,a){this.getViewModel().set('hasSelection',!!a.getCount());var b=!1;if(a.getCount()>0){Ext.Array.forEach(a.getRecords(),function(c){if(c.get('isVirtual')==!0||c.get('isBuildingGroup')==!0){b=!0;return}})}var c=this.getViewModel();if(a.getCount()==1&&a.getRecords()[0].getCls()=='phaseMilestone'){c.set('singleMilestoneSelected',!0)}else {c.set('singleMilestoneSelected',!1)}this.getViewModel().set('hasVirtualSelection',b)},onHighlightCriticalPath:function(d){var b=d.checked;var e=this.getGantt().getSchedulingView();var a=this;this.clearRadioBtnFilters();var c=[];a.tempTaskArray={};Ext.Array.each(e.getCriticalPaths(),function(a){for(i=0,l=a.length;i<l;i++){c.push(a[i])}});if(b){this.onExpandAll();this.getViewModel().set('filterSet',b);this.getViewModel().set('highlightCriticalPaths',b);d.setChecked(b);a.highlightCriticalPathsByTask(c,e);Ext.Array.each(c,function(b){a.tempTaskArray[b.id]=!0});a.applySingleFilter({dataIndex:'filterSelectedTasks',value:a.tempTaskArray})}else {this.checkIfClearFiltersNeeded(d);a.unHighlightCriticalPathsByTask(c,e);a.clearFilters()}a.tempTaskArray={}},onAddTask:function(){var a=this.getGantt(),e=this.getSelectedTasks(),b=e[0],d=a.lockedGrid.getPlugin('editingInterface'),f=b.isLeaf()?b.parentNode:b;var c=f.appendChild({Name:'New Task',leaf:!0});d.completeEdit();a.getSchedulingView().scrollEventIntoView(c,!1,!1,function(){a.getSelectionModel().select(c);setTimeout(function(){a.lockedGrid.getPlugin('editingInterface').startEdit(c,2)},20)})},onRemoveSelectedTasks:function(){this.getGantt().getTaskStore().removeTasks(this.getSelectedTasks())},onIndent:function(){var d=this.getGantt();var b=Ext.Array.filter(this.getSelectedTasks(),function(a){return a.previousSibling&&!a.previousSibling.isReadOnly()});if(b[0]){var a=b[0].previousSibling;if(a.getConstraintType()!=''&&a.getConstraintDate()!=null){b[0].setConstraintType(a.getConstraintType());b[0].setConstraintDate(a.getConstraintDate());a.setConstraintType('');a.setConstraintDate(null)}}var c=!1;Ext.Array.forEach(b,function(a){if(a.get('isVirtual')==!0||a.get('isBuildingGroup')==!0){c=!0;return}});if(!c){d.getTaskStore().indent([].concat(b))}},onOutdent:function(){var d=this.getGantt();var c=Ext.Array.filter(this.getSelectedTasks(),function(a){return !a.isReadOnly()});var b=!1;var a=!1;Ext.Array.forEach(c,function(c){if(c.get('isVirtual')==!0||c.get('isBuildingGroup')==!0){b=!0;return}if(c.parentNode){var d=c.parentNode;if(d.get('isVirtual')==!0||d.get('isBuildingGroup')==!0){a=!0;return}}});if(!b&&!a){d.getTaskStore().outdent([].concat(c))}},printGantt:function(){this.getGantt().print()},weeklyFilter:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){var c=new Date();var d=c.getDate()-c.getDay();var g=d+6;var e=new Date(c.setDate(d));var f=new Date(c.setDate(g));this.getViewModel().set('filterSet',a);if(this.getViewModel().get('monthlyTasks')==!0){this.getViewModel().set('monthlyTasks',!1);this.getGantt().el.toggleCls('showMonthlyBaseline')}this.getViewModel().set('weeklyTasks',a);b.setChecked(a);this.applySingleFilter({dataIndex:'WeeklyStartDate',dataIndexEnd:'WeeklyEndDate',dataType:'date',value:e,opr:'workPlan',toValue:f});this.toggleWeeklyBaseline()}else {this.checkIfClearFiltersNeeded(b);this.getGantt().el.toggleCls('showWeeklyBaseline');this.getViewModel().set('weeklyTasks',!1)}b.up('cga-controlheader').down('#toggleWeeklyBaseline').setChecked(a)},monthlyFilter:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){var c=new Date(),e=c.getFullYear(),d=c.getMonth();var f=new Date(e,d,1);var g=new Date(e,d+1,0);this.getViewModel().set('filterSet',a);if(this.getViewModel().get('weeklyTasks')==!0){this.getViewModel().set('weeklyTasks',!1);this.getGantt().el.toggleCls('showWeeklyBaseline')}this.getViewModel().set('monthlyTasks',a);b.setChecked(a);this.applySingleFilter({dataIndex:'MonthlyStartDate',dataIndexEnd:'MonthlyEndDate',dataType:'date',value:f,opr:'workPlan',toValue:g});this.toggleMonthlyBaseline()}else {this.checkIfClearFiltersNeeded(b);this.getGantt().el.toggleCls('showMonthlyBaseline');this.getViewModel().set('monthlyTasks',!1)}},milestoneChangedMagBox:function(){var a=this;var b=Ext.create('Ext.window.MessageBox',{rtl:a.getViewModel().get('currentLocale')=='he'});b.show({title:a.L('MilestonesChanged'),message:a.L('MilestonesChangedMessage'),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(b){if(b==='yes'){a.getGantt().crudManager.sync();a.resetMilestoneAlerts()}}})},onSaveChanges:function(){var a=this;var b=a.getViewModel();if(!b.get('disableMilestonesAlert')){a.milestoneChangedMagBox()}else {this.getGantt().crudManager.sync();a.resetMilestoneAlerts()}},onLanguageSelected:function(b,a){this.fireEvent('locale-change',a.get('id'),a)},onBaselineSelected:function(c,a){var b=this.getGantt();b.getCrudManager().loadBaseLine(a.get('Id'))},onToggleGrouping:function(b){var a=b.checked;if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('toggleGrouping',a);b.setChecked(a)}else {this.checkIfClearFiltersNeeded(b)}var c=this.getGantt().getPlugin('highlightsubtasksarea');c.setEnabled(a)},onToggleRollup:function(b){var a=b.checked;if(a){this.getViewModel().set('filterSet',a)}else {this.checkIfClearFiltersNeeded(b)}this.getViewModel().set('toggleRollup',a);b.setChecked(a);var c=this.getGantt();c.setShowRollupTasks(a)},onHighlightLongTasks:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('highlightLong',a);b.setChecked(a);this.applySingleFilter({dataIndex:'Duration',dataType:null,value:11,opr:'>',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},onFilterTasks:function(){this.clearRadioBtnFilters();this.getGantt().taskStore.filterTreeBy(function(a){return a.getPercentDone()<=30})},onClearTasksFilter:function(){this.clearFilters()},recalculateDynamicPredecessors:function(){var d=this;var a=this.getGantt().getCrudManager();var b=a.dependencyStore.store;var c=b.query('Cls','dynamic-dep');b.remove(c.getRange());a.createDynamicPredecessors(a.dynamicPredecessorsList).then(function(a){d.getViewModel().set('dynamicPredecessorChanged',!1)})},onScrollToLast:function(){var a=new Date(0),c=this.getGantt(),b;c.taskStore.getRoot().cascadeBy(function(c){if(c.get('EndDate')>=a){a=c.get('EndDate');b=c}});c.getSchedulingView().scrollEventIntoView(b,!0)},onAfterRender:function(){var a=this,b=a.getViewModel(),d=b.get('taskStore');b.set('fullscreenEnabled',!!this.getFullscreenFn());a.mon(b.get('crud'),{haschanges:function(){a.getViewModel().set('hasChanges',!0)},nochanges:function(){a.getViewModel().set('hasChanges',!1)},'has-removed-dependencies':function(b){a.getGantt().refreshTasksForDependencies(b)}});var c=Ext.ComponentQuery.query('advanced-viewport')[0].crudManager;a.mon(c.taskStore.store,{update:function(c,b){if(b.affectedByDynamicPredecessor){a.getViewModel().set('dynamicPredecessorChanged',!0)}}});a.mon(b.get('undoManager'),{undoqueuechange:function(c,b){a.getViewModel().set('canUndo',b.length>0)},redoqueuechange:function(c,b){a.getViewModel().set('canRedo',b.length>0)}});b.get('undoManager').start();a.mon(c,'ganttLoaded',function(){a.zoomToMonthLevel()})},onManageCalendars:function(){var a=this.getGantt();this.calendarsWindow=new CGA.widget.calendar.CalendarManagerWindow({calendarManager:a.getTaskStore().calendarManager,maximized:!1,width:950,height:600,modal:!0,calendarConfig:{readOnly:!0},calendarPanelConfig:{}});this.calendarsWindow.show()},onTryMore:function(){var a=this.getView().down('gantt-secondary-toolbar');a.setVisible(!a.isVisible())},downloadMsProject:function(){var c={};Ext.each(this.getGantt().columns,function(a,b){c[a.dataIndex]=a});var a=[];a.push(this.getGantt().columns[0]);a[0].msProjectPrintType='WBS';a.push({dataIndex:'index'});a.push({dataIndex:'Name'});a.push({dataIndex:'StartDate',msProjectPrintType:'DateTime'});a.push({dataIndex:'EndDate',msProjectPrintType:'DateTime'});a.push({dataIndex:'Duration'});a.push({dataIndex:'PercentDone'});a.push({dataIndex:'Predecessor'});a.push({dataIndex:'StartedDate',msProjectPrintType:'DateTime'});a.push({dataIndex:'CompletedDate',msProjectPrintType:'DateTime'});a.push({dataIndex:'Note'});a.push({dataIndex:'BaselineStartDate',msProjectPrintType:'Date'});a.push({dataIndex:'BaselineEndDate',msProjectPrintType:'Date'});a.push({dataIndex:'BaselineDuration',msProjectPrintName:'Baseline_Duration'});a.push({dataIndex:'ConstraintDate',msProjectPrintType:'Date'});a.push({dataIndex:'ConstraintType'});Ext.each(a,function(a,d){for(var b in c[a.dataIndex]){a[b]=c[a.dataIndex][b]}});var e=CGA.ux.exporter.Exporter.exportStore(this.getGantt().getTaskStore(),'msProject',{columns:a});var f=this.L('Task_data')+'.csv';var b=document.createElement('a');b.style='display: none';var g=new Blob(['\ufeff'+e],{type:'text/csv;charset=utf-16'});var d=window.URL.createObjectURL(g);b.href=d;b.charset='utf-16';b.download=f;document.body.appendChild(b);b.click();setTimeout(function(){document.body.removeChild(b);window.URL.revokeObjectURL(d)},100)},onDownloadStore:function(){var b=[];Ext.each(this.getGantt().columns,function(a,c){if(!a.hidden&&a.xtype!='timeaxiscolumn'&&a.xtype!='dragdropcolumn'&&a.xtype!='cyclecolumn'&&a.xtype!='wbscolumn'&&a.xtype!='flagscolumn'&&a.xtype!='dirtycolumn'){b.push(a)}});var d=CGA.ux.exporter.Exporter.exportStore(this.getGantt().getTaskStore(),'csv',{columns:b});var e=this.getView().rawTitle+' - '+Ext.util.Format.date(new Date(),Ext.Date.defaultFormat)+'_gantt.csv';var a=document.createElement('a');a.style='display: none';var f=new Blob(['\ufeff'+d],{type:'text/csv;charset=utf-16'});var c=window.URL.createObjectURL(f);a.href=c;a.charset='utf-16';a.download=e;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(c)},100)},onToggleHamoks:function(b){var a=b.checked;this.getViewModel().set('filterSet',a);b.setChecked(a);var d=this;var c=d.getGantt();this.getViewModel().set('parentRowHidden',a);if(a){c.addCls('hide-dep')}else {c.removeCls('hide-dep')}this.getViewModel().set('filterSet',a);c.getView().refreshView();if(!a){this.checkIfClearFiltersNeeded(b)}},filterDatesRange:function(b,c,a){var d=this;d.getGantt().getColumnManager().getColumns().forEach(function(d){if(d.dataIndex==a){var e=0;if(!Ext.isEmpty(d.items.items[0].getValue())){d.items.items[0].setValue('');d.items.items[0].fireEvent('keyup',d.items.items[0]);e=100}Ext.defer(function(){d.items.items[0].setValue(Ext.Date.format(b,Ext.Date.defaultDateFormat||Ext.Date.defaultFormat)+'-'+Ext.Date.format(c,Ext.Date.defaultDateFormat||Ext.Date.defaultFormat));d.items.items[0].fireEvent('keyup',d.items.items[0])},e);return !1}})},resetFormDates:function(e,f){var c=e.up('form').getForm().findField('date_from'),d=e.up('form').getForm().findField('date_to'),a=new Date(),b=new Date(a.getTime()+f*24*60*60*1000);c.setReadOnly(!0);d.setReadOnly(!0);a=CGA.utils.date.resetStart(a);b=CGA.utils.date.resetEnd(b);c.setValue(a);d.setValue(b)},betweenDates:function(b){var a=this;var c=new Ext.Window({title:a.L('DatesFilter'),width:600,modal:!0,closeAction:'hide',resizable:!1,hideOnMaskTap:!0,items:[Ext.create('Ext.form.Panel',{bodyStyle:'margin: 10px;',items:[{xtype:'radiogroup',fieldLabel:a.L('DatesRange'),name:'range_selector',cls:'x-check-group-alt',columns:3,items:[{boxLabel:a.L('Week'),name:'rb',inputValue:1,listeners:{change:function(d,c,e){if(c){a.resetFormDates(d,7)}}}},{boxLabel:a.L('Twoweeks'),name:'rb',inputValue:2,checked:!0,listeners:{change:function(d,c,e){if(c){a.resetFormDates(d,14)}}}},{boxLabel:a.L('Month'),name:'rb',inputValue:3,listeners:{change:function(d,c,e){if(c){a.resetFormDates(d,31)}}}},{boxLabel:a.L('Custom'),name:'rb',inputValue:4,listeners:{change:function(d,a,c){if(a){this.up('form').getForm().findField('date_from').setReadOnly(!1);this.up('form').getForm().findField('date_to').setReadOnly(!1)}}}}]},{xtype:'datefield',fieldLabel:a.L('FromDate'),name:'date_from',readOnly:!0,allowBlank:!1},{xtype:'datefield',fieldLabel:a.L('ToDate'),name:'date_to',readOnly:!0,allowBlank:!1},{xtype:'combo',fieldLabel:a.L('DateField'),name:'date_field',readOnly:!1,allowBlank:!1,store:new Ext.data.SimpleStore({data:[['StartDate',a.L('StartDate')],['EndDate',a.L('EndDate')]],id:0,fields:['value','text']}),valueField:'value',value:'StartDate',displayField:'text'}],buttons:[{text:a.L('Filter'),handler:function(){var d=this.up('form').getForm().findField('date_from').getValue();var e=this.up('form').getForm().findField('date_to').getValue();var c=this.up('form').getForm().findField('date_field').getValue();a.filterDatesRange(d,e,c);this.up('window').close();a.clearRadioBtnFilters();b.setChecked(!0);a.getViewModel().set('filterSet',!0);a.getViewModel().set('betweenDates',!0)}},{text:a.L('Cancel'),handler:function(){this.up('window').close();a.clearRadioBtnFilters();b.setChecked(!1);a.checkIfClearFiltersNeeded(b)}}]})]});a.resetFormDates(c.down('form').down('radiogroup'),14);c.show()},manuallyScheduled:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('manuallyScheduled',a);b.setChecked(a);this.applySingleFilter({dataIndex:'ManuallyScheduled',dataType:'checkbox',value:!0,opr:'=',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},unHighlightCriticalPathsByTask:function(c,b){b.removeCls('sch-gantt-critical-chain');b.clearSelectedTasksAndDependencies();var f=b.ownerGrid.getDependencyView(),a,g,e,d;e=c.length;Ext.Array.each(c,function(i,h){a=i;this.unhighlightTask(a,!1);if(h<e-1){for(var g=0,j=a.predecessors.length;g<j;g++){if(a.predecessors[g].getSourceId()==c[h+1].getId()){d=a.predecessors[g];break}}f.unhighlightDependency(d)}},b)},highlightCriticalPathsByTask:function(c,b){b.clearSelectedTasksAndDependencies();var f=b.ownerGrid.getDependencyView(),a,g,e,d;e=c.length;Ext.Array.each(c,function(i,h){a=i;this.highlightTask(a,!1);if(h<e-1){for(var g=0,j=a.predecessors.length;g<j;g++){if(a.predecessors[g].getSourceId()==c[h+1].getId()){d=a.predecessors[g];break}}f.highlightDependency(d)}},b);b.addCls('sch-gantt-critical-chain')},getAllDependenciesRecursive:function(a,e){var d=this;if(!a||a&&a.getPredecessors().length==0){return}var c=a.getPredecessors();for(var b=0;b<a.getPredecessors().length;b++){d.tempTaskArray[c[b].id]=!0;d.getAllDependenciesRecursive(c[b],e+1)}},tempTaskArray:{},onMilestoneCriticalPath:function(b){var a=this;var d=b.checked;this.clearRadioBtnFilters();if(d){a.getViewModel().set('filterSet',d);a.getViewModel().set('milestoneCriticalPath',d);b.setChecked(d);var c=a.getGantt().getSelectedRows()[0];a.getAllDependenciesRecursive(c,0);a.tempTaskArray[c.id]=!0;b.currentlyActiveTask=c;a.applySingleFilter({dataIndex:'filterSelectedTasks',value:a.tempTaskArray});a.highlightCriticalPathsByTask(c.getCriticalPaths(),this.getGantt().down('ganttview'))}else {a.unHighlightCriticalPathsByTask(b.currentlyActiveTask.getCriticalPaths(),this.getGantt().down('ganttview'));delete b.currentlyActiveTask;a.checkIfClearFiltersNeeded(b)}a.tempTaskArray={}},constraintDate:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('constraintDate',a);b.setChecked(a);this.applySingleFilter({dataIndex:'ConstraintType',dataType:null,value:'BLANK',opr:'!',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},level1:function(){this.expandLevel(1)},level2:function(){this.expandLevel(2)},level3:function(){this.expandLevel(3)},level4:function(){this.expandLevel(4)},level5:function(){this.expandLevel(5)},level6:function(){this.expandLevel(6)},level7:function(){this.expandLevel(7)},significantTasks:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('significantTasks',a);b.setChecked(a);this.applySingleFilter({dataIndex:'Significant',dataType:'checkbox',value:!0,opr:'=',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},administrativeTasks:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('administrativeTasks',a);b.setChecked(a);this.applySingleFilter({dataIndex:'Rollup',dataType:'checkbox',value:!0,opr:'=',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},hideTasks:function(b){var a=b.checked;this.clearRadioBtnFilters();if(a){this.getViewModel().set('filterSet',a);this.getViewModel().set('hideTasks',a);b.setChecked(a);this.applySingleFilter({dataIndex:'Hide',dataType:'checkbox',value:!0,opr:'!',toValue:''})}else {this.checkIfClearFiltersNeeded(b)}},releaseLock:function(){var a=Ext.ComponentQuery.query('advanced-viewport')[0].crudManager;a.ScheduleLock(a.projectId||a.researchId,!0,!0);this.getViewModel().set('readOnlyMode',!1);this.getViewModel().set('lockingUser',null);this.getGantt().setReadOnly(!1);var b=Ext.ComponentQuery.query('[xtype=lockingUserContainer]')[0];b.setHtml('')},applySingleFilter:function(d){this.getGantt().getCrudManager().getTaskStore().clearTreeFilter();this.getGantt().getCrudManager().getTaskStore().customFilters=[];this.getGantt().getCrudManager().getTaskStore().customFilters.push(d);this.getGantt().getCrudManager().getTaskStore().doFilters();var c={};var a={};this.getGantt().getCrudManager().getTaskStore().getRange().forEach(function(a){c[a.data.Id]=!0});var b=function(e){a[e.id]=e.childNodes.length>0;e.childNodes.forEach(function(b){if(c[b.data.Id]){a[e.id]=!1}});if(a[e.id]&&e.parentNode){b(e.parentNode)}};this.getGantt().getCrudManager().getTaskStore().getRange().reverse().forEach(b);this.getGantt().getCrudManager().getTaskStore().clearTreeFilter();this.getGantt().getCrudManager().getTaskStore().filterTreeBy({filter:function(b){return a[b.id]==!1}})},clearRadioBtnFilters:function(){var a=this.getViewModel();if(!a.get('parentRowHidden')&&!a.get('toggleGrouping')&&!a.get('toggleRollup')){this.clearFilters()}else {this.getGantt().getCrudManager().getTaskStore().clearTreeFilter();this.getGantt().getCrudManager().getTaskStore().customFilters=[];a.set('milestoneCriticalPath',!1);a.set('highlightLong',!1);a.set('filterSchedule',!1);a.set('highlightCriticalPaths',!1);a.set('filterPred',!1);a.set('manuallyScheduled',!1);a.set('constraintDate',!1);a.set('betweenDates',!1);a.set('significantTasks',!1);a.set('administrativeTasks',!1);a.set('hideTasks',!1);a.set('weeklyTasks',!1);a.set('monthlyTasks',!1)}},clearFilters:function(){this.getGantt().getCrudManager().getTaskStore().clearTreeFilter();this.getGantt().getCrudManager().getTaskStore().customFilters=[];var a=this.getViewModel();a.set('milestoneCriticalPath',!1);a.set('highlightCriticalPaths',!1);a.set('toggleGrouping',!1);a.set('toggleRollup',!1);a.set('highlightLong',!1);a.set('filterSchedule',!1);a.set('filterPred',!1);a.set('manuallyScheduled',!1);a.set('constraintDate',!1);a.set('betweenDates',!1);a.set('significantTasks',!1);a.set('administrativeTasks',!1);a.set('hideTasks',!1);a.set('filterSet',!1);this.getGantt().getSchedulingView().unhighlightCriticalPaths(!0);var c=this.getGantt();c.setShowRollupTasks(!1);var b=this.getGantt().getPlugin('highlightsubtasksarea');b.setEnabled(!1);if(a.get('parentRowHidden')){this.getGantt().removeCls('hide-dep');a.set('parentRowHidden',!1);this.getGantt().getView().refreshView()}},checkIfClearFiltersNeeded:function(b){var a=!0;var e=Ext.ComponentQuery.query('[xtype=filterMenuBtn]')[0].getMenu();e.items.items.forEach(function(c){if(c.xtype=='menucheckitem'&&c.checked&&b.reference!=c.reference){a=!1}});var d=Ext.ComponentQuery.query('[xtype=weeklyMethodFilterBtn]')[0].getMenu();d.items.items.forEach(function(c){if(c.xtype=='menucheckitem'&&c.checked&&b.reference!=c.reference){a=!1}});var c=Ext.ComponentQuery.query('[xtype=ganttQualityFilterBtn]')[0].getMenu();c.items.items.forEach(function(c){if(c.xtype=='menucheckitem'&&c.checked&&b.reference!=c.reference){a=!1}});if(a){this.clearFilters()}}},0,0,0,0,['controller.advanced-viewport'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.view,'MainViewportController'],0);Ext.cmd.derive('CGA.view.MainViewportModel',Ext.app.ViewModel,{data:{gantt:null,crud:null,undoManager:null,taskStore:null,dependencyStore:null,hasSelection:null,hasVirtualSelection:null,selectedVirtual:!1,fullscreenEnabled:!1,filterSet:!1,availableLocales:null,currentLocale:null,calendarManager:null,hasChanges:!1,columns:null,availableSimulations:null,currenSimulation:null,title:null,canUndo:!1,canRedo:!1,parentRowHidden:!1,adjustingOnLoad:!1,readOnlyMode:!1,lockingUser:null,highlightCriticalPaths:!1,filterSchedule:!1,betweenDates:!1,significantTasks:!1,filterPred:!1,manuallyScheduled:!1,constraintDate:!1,highlightLong:!1,toggleGrouping:!1,toggleRollup:!1,dynamicPredecessorChanged:!1,administrativeTasks:!1,hideTasks:!1,irrelevantPermission:!1,disableMilestonesAlert:!0,hasUnreadAlerts:'',milestoneCriticalPath:!1,singleMilestoneSelected:!1,historyBaseLinesEmpty:!0},formulas:{disableInstanceSelected:function(a){return !a('hasSelection')||a('hasVirtualSelection')||a('readOnlyMode')},disableSelectedBaseLine:function(a){return !a('hasSelection')||a('readOnlyMode')},disableBaseLines:function(a){return a('readOnlyMode')},disableSaveButton:function(a){return !a('hasChanges')||a('readOnlyMode')},disableUndo:function(a){return !a('canUndo')||a('readOnlyMode')},disableRedo:function(a){return !a('canRedo')||a('readOnlyMode')},disableFilterButton:function(a){return !a('filterSet')},disableDynamicPredecessor:function(a){return !a('dynamicPredecessorChanged')},disableBulkOperation:function(a){return a('readOnlyMode')},disableMilestoneCriticalPath:{bind:{singleMilestoneSelected:'{singleMilestoneSelected}',milestoneCriticalPath:'{milestoneCriticalPath}'},get:function(a){return !(a.milestoneCriticalPath||a.singleMilestoneSelected)}}}},0,0,0,0,['viewmodel.advanced-viewport'],0,[CGA.view,'MainViewportModel'],0);Ext.cmd.derive('MeetingsCalendar.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!MeetingsCalendar.locale.Active){MeetingsCalendar.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=MeetingsCalendar.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in MeetingsCalendar.locale.Active){MeetingsCalendar.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {MeetingsCalendar.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[MeetingsCalendar.locale,'Locale'],0);Ext.cmd.derive('MeetingsCalendar.locale.En',MeetingsCalendar.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'MeetingsCalendar.view.MeetingCalendarView':{Filters:'Filters',Status:'Status',OtherFilters:'Other Filters:',Zoom:'Zoom',Today:'Today',NoAreaFilters:'No Area Filters',Loading:'Loading...'},'MeetingsCalendar.view.Calendar':{NewMeetingByStage:'New Meeting By Stage',NewMeetingByType:'New Meeting By Type',RollingMeeting:'Rolling Meeting',ShowDetails:'Show Details',ScheduleInfo:'Schedule Information',closePanel:'Close Panel'},'MeetingsCalendar.template.WeekRow':{more:'more'},'MeetingsCalendar.view.MeetingCalendarViewController':{Task:'Task',Event:'Event',Meeting:'Meeting',Other:'Other'},'MeetingsCalendar.window.EventEditor':{nameText:'Name',Type:'Type',Stage:'Stage',saveText:'Save',deleteText:'Delete',cancelText:'Cancel',startDateText:'Start Date',endDateText:'End Date',closePanel:'Close Panel',MeetingByStage:'Meeting By Stage',MeetingByType:'Meeting By Type',Schedual:'Schedule Information'},'MeetingsCalendar.view.TreePickerOverride':{AreaFilterExist:'Area Filter Exist'}}});this.callParent(arguments)}},1,0,0,0,0,0,[MeetingsCalendar.locale,'En'],0);Ext.cmd.derive('MeetingsCalendar.locale.He',MeetingsCalendar.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'MeetingsCalendar.view.MeetingCalendarView':{Filters:'',Status:'',OtherFilters:' :',Zoom:'',Today:'',NoAreaFilters:'  ',Loading:'...'},'MeetingsCalendar.view.Calendar':{NewMeetingByStage:'   ',NewMeetingByType:'   ',RollingMeeting:' ',ShowDetails:' ',ScheduleInfo:' ',closePanel:' '},'MeetingsCalendar.template.WeekRow':{more:''},'MeetingsCalendar.view.MeetingCalendarViewController':{Task:'',Event:'',Meeting:'',Other:''},'MeetingsCalendar.window.EventEditor':{nameText:'',Type:'',Stage:'',saveText:'',deleteText:'',cancelText:'',startDateText:' ',endDateText:' ',closePanel:' ',MeetingByStage:'  ',MeetingByType:'  ',Schedual:' '},'MeetingsCalendar.view.TreePickerOverride':{AreaFilterExist:'  '}}});this.callParent(arguments)}},1,0,0,0,0,0,[MeetingsCalendar.locale,'He'],0);Ext.cmd.derive('MeetingsCalendar.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in MeetingsCalendar.locale.Active){if(a===MeetingsCalendar.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in MeetingsCalendar.locale.Active){MeetingsCalendar.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[MeetingsCalendar.mixin,'Localizable'],0);Ext.cmd.derive('MeetingsCalendar.view.MeetingsCalendarModel',Ext.app.ViewModel,{data:{date:new Date(),filtersCount:{}},formulas:{dateLabel:function(a){return Ext.Date.format(a('date'),'F Y')}}},0,0,0,0,['viewmodel.MeetingsCalendarModel'],0,[MeetingsCalendar.view,'MeetingsCalendarModel'],0);Ext.cmd.derive('MeetingsCalendar.view.MeetingCalendarViewController',Ext.app.ViewController,{stores:{},colors:[{hex:'#3453f4',typeIdentifier:''},{hex:'#9a1b0f',typeIdentifier:''},{hex:'#0f950f',typeIdentifier:''},{hex:'#9127be',typeIdentifier:''},{hex:'#2ecf8c',typeIdentifier:''},{hex:'#be792e',typeIdentifier:''},{hex:'#ff77a7',typeIdentifier:''},{hex:'#bfd27e',typeIdentifier:''},{hex:'#000000',typeIdentifier:''},{hex:'#3aceff',typeIdentifier:''}],loadDataToStore:function(b,d){var a=this;var c=new Ext.Deferred();b.model.addFields([{name:'Type',type:'string'},{name:'MeetingtypeType',type:'string'},{name:'MeetingtypeId',type:'string'},{name:'StageId',type:'string'},{name:'Status',type:'string'}]);d.fetchFromServer().then(function(e){var g=[];var m={};var i={};e.meetings.forEach(function(a){switch(a.mt){case 'MEETING':g.push({Id:a.i,StartDate:a.ft,EndDate:a.tt,Name:a.n,Type:a.mt,MeetingtypeType:a.mtt,MeetingtypeTypeName:a.mtn,MeetingtypeId:a.mti,Status:a.s,StageId:a.st,Areas:a.ai,Signed:a.si,ReachDescription:a.rd});m[a.s]=!0;a.ai.forEach(function(c){i[c]=!0});break;case 'EVENT':case 'TASK':g.push({Id:a.i,StartDate:a.ad,EndDate:a.ad,Name:a.su,Type:a.mt});break;}});b.loadData(g);a.loadStatusesFilters(m);a.stores.meetingTypeStore=Ext.create('Ext.data.Store',{fields:[{name:'type',type:'string'},{name:'id',type:'string'},{name:'name',type:'string'}]});var j=a.view.down('[itemId=filterMeetingTypeContainer]');j.insert(0,{checked:!0,filterValue:'mTypeOther',filterField:'MeetingtypeType',style:{color:a.colors[0].hex,fontWeight:'bold'},bind:{boxLabel:a.L('Other')+' ({filtersCount.mTypeOther})'}});var f={};var k=[];e.meetingTypes.forEach(function(a,c){f[a.value]=a.label;k.push({type:a.value,id:a.meetingTypeId,name:a.name})});var h=1;for(prop in f){a.view.viewModel.set('filtersCount.'+prop,0);if(!a.colors[h]){a.colors.push({typeIdentifier:'',hex:function(a,c,f){return (f?arguments.callee(a,c,f-1):'#')+c[a.floor(a.random()*c.length)]}(Math,'0123456789ABCDEF',5)})}a.colors[h].typeIdentifier=prop;h++;j.insert(0,{checked:!0,filterValue:prop,filterField:'MeetingtypeType',style:{color:a.colors.find(function(a){return a.typeIdentifier==prop}).hex,fontWeight:'bold'},bind:{boxLabel:f[prop]+' ({filtersCount.'+prop+'})'}})}a.stores.meetingTypeStore.loadData(k);a.stores.adminStagesStore=Ext.create('Ext.data.Store',{fields:[{name:'name',type:'string'},{name:'type',type:'string'},{name:'area',type:'string'},{name:'MeetingtypeType',type:'string'}]});var l=[];e.administrativeStages.forEach(function(a){l.push({id:a.i,name:a.n,type:a.t,area:a.a,MeetingtypeType:a.mtt})});a.stores.adminStagesStore.loadData(l);a.loadAreaTree(e.areasStore,b,i);var n=a.view.down('[itemId=filterTypeContainer]');a.view.viewModel.set('filtersCount.TASK',0);a.view.viewModel.set('filtersCount.EVENT',0);a.view.viewModel.set('filtersCount.MEETING',0);n.insert(1,[{checked:!0,filterValue:'TASK',filterField:'Type',style:{fontWeight:'bold'},bind:{boxLabel:'<i class="fa fa-bell"></i> '+a.L('Task')+' ({filtersCount.TASK})'}},{checked:!0,filterValue:'EVENT',filterField:'Type',style:{fontWeight:'bold'},bind:{boxLabel:'<i class="fa fa-calendar-check-o"></i> '+a.L('Event')+' ({filtersCount.EVENT})'}},{checked:!0,filterValue:'MEETING',filterField:'Type',style:{fontWeight:'bold'},bind:{boxLabel:'<i class="fa fa-calendar"></i> '+a.L('Meeting')+' ({filtersCount.MEETING})'}}]);a.setFiltersCount(b,a.view.viewModel);c.resolve(e)},function(a){});return c.promise},loadAreaTree:function(c,e,b){var a=Ext.ComponentQuery.query('MeetingsCalendar-treepicker')[0].getStore();var d={};a.setRoot({children:c});a.filterBy(function(a){if(b[a.data.value]){return !0}else {return !1}})},loadStatusesFilters:function(c){var b=this.view.down('[itemId=statusFilterMenu]');var a=this.view.down('meetingsCalendar').getController();for(prop in c){b.menu.add({text:prop,xtype:'menucheckitem',filterField:'Status',checked:!0,listeners:{'checkchange':function(b,d,e){a.applyFilter(b.filterField,b.text,d)}}})}},setFiltersCount:function(b,c){var a={mTypeOther:0};b.getRange().forEach(function(e){var d=e.getData();if(d.MeetingtypeType){if(a[d.MeetingtypeType]){a[d.MeetingtypeType]++}else {a[d.MeetingtypeType]=1}}else {if(d.Type=='MEETING'){a.mTypeOther++}}if(a[d.Type]){a[d.Type]++}else {a[d.Type]=1}});for(prop in a){c.set('filtersCount.'+prop,a[prop])}}},0,0,0,0,['controller.MeetingCalendarViewController'],[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.view,'MeetingCalendarViewController'],0);Ext.cmd.derive('MeetingsCalendar.view.TreePickerOverride',Ext.form.field.Picker,{disabledCls:'x-tree-checkbox-checked-disabled',triggerCls:'x-form-arrow-trigger',config:{store:null,triggerCls:'MeetingsCalendar-treepicker-trigger',grow:!0,displayField:null,columns:null,selectOnTab:!0,maxPickerHeight:300,minPickerHeight:100},editable:!1,initComponent:function(){var a=this;Ext.form.field.Picker.prototype.initComponent.apply(this,arguments);a.mon(a.store,{scope:a,load:a.onLoad,update:a.onUpdate})},createPicker:function(){var a=this,b=new Ext.tree.Panel({shrinkWrapDock:2,store:a.store,floating:!0,displayField:a.displayField,columns:a.columns,minHeight:a.minPickerHeight,height:a.maxPickerHeight,manageHeight:!1,rootVisible:!1,selModel:{selType:'checkboxmodel',mode:'MULTI',checkOnly:!0},shadow:!0,listeners:{scope:a,itemclick:a.onItemClick,select:function(c,b){b.expand();b.cascadeBy(function(a){c.select(a,!0,!0)});a.checkTriState(c,b);a.notifyView(!0)},deselect:function(b,c){c.cascadeBy(function(a){b.deselect(a,!0)});a.checkTriState(b,c);a.notifyView(!1,b)}},viewConfig:{listeners:{scope:a,render:a.onViewRender}}}),c=b.getView();if(Ext.isIE9&&Ext.isStrict){c.on({scope:a,highlightitem:a.repaintPickerView,unhighlightitem:a.repaintPickerView,afteritemexpand:a.repaintPickerView,afteritemcollapse:a.repaintPickerView})}return b},onViewRender:function(a){a.getEl().on('keypress',this.onPickerKeypress,this)},repaintPickerView:function(){var a=this.picker.getView().getEl().dom.style;a.display=a.display},notifyView:function(c,b){if(c){var a=this.up('panel').getViewModel();a.set('NoAreaFiltersApplied',!1)}else {if(b.getSelection().length==0){var a=this.up('panel').getViewModel();a.set('NoAreaFiltersApplied',!0);this.unSelectAll()}}},onItemClick:function(h,d,g,f,i){var e=this;var a=this.up('panel').down('meetingsCalendar').getController();var c=e.getPicker().getSelection();var b=[];c.forEach(function(a){b.push(a.data.value)});if(c.length>0){a.applyFilter('area',b,!1);this.selectItem(d)}else {a.applyFilter('area',[],!0)}},unSelectAll:function(){var a=this;a.setRawValue('');a.getPicker().setSelection(null);a.getPicker().collapseAll();var b=this.up('panel').down('meetingsCalendar').getController();b.applyFilter('area',[],!0)},checkTriState:function(b,a){var d=this;if(!a.parentNode.isRoot()&&!b.isSelected(a.parentNode)){var c=a.parentNode.childNodes;if(c.every(function(c){return b.isSelected(c)})){a.parentNode.set('cls','');b.select(a.parentNode,!0,!0)}else {if(c.some(function(c){return b.isSelected(c)})){a.parentNode.set('cls',d.disabledCls);b.deselect(a.parentNode)}else {a.parentNode.set('cls','')}}}},onPickerKeypress:function(a,c){var b=a.getKey();if(b===a.ENTER||b===a.TAB&&this.selectOnTab){this.selectItem(this.picker.getSelectionModel().getSelection()[0])}},selectItem:function(b){var a=this;a.setValue(b.getId());a.fireEvent('select',a,b)},onExpand:function(){var d=this,e=d.picker,b=e.store,c=d.value,a;if(c){a=b.getNodeById(c)}if(!a){a=b.getRoot()}},setValue:function(c){var a=this,b;var e=a.getPicker().getSelection();a.value=[];if(a.store.loading){return a}b=c?a.store.getNodeById(c):a.store.getRoot();if(c===undefined){b=a.store.getRoot();a.value=b.getId()}else {b=a.store.getNodeById(c)}var d='';e.forEach(function(b,f){a.value.push(b.getId());d+=b.getData().text;d+=f==e.length-1?'':', '});a.setRawValue(this.L('AreaFilterExist'));return a},getSubmitValue:function(){return this.value},getValue:function(){return this.value},onLoad:function(){var a=this.value;if(a){this.setValue(a)}},onUpdate:function(e,c,d,a){var b=this.displayField;if(d==='edit'&&a&&Ext.Array.contains(a,b)&&this.value===c.getId()){this.setRawValue(c.get(b))}}},0,['MeetingsCalendar-treepicker'],['component','box','field','textfield','pickerfield','MeetingsCalendar-treepicker'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'MeetingsCalendar-treepicker':!0},['widget.MeetingsCalendar-treepicker'],[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.view,'TreePickerOverride'],0);Ext.cmd.derive('Ext.data.JsonStore',Ext.data.Store,{constructor:function(a){a=Ext.apply({proxy:{type:'ajax',reader:'json',writer:'json'}},a);Ext.data.Store.prototype.constructor.call(this,a)}},1,0,0,0,['store.json'],0,[Ext.data,'JsonStore'],0);Ext.cmd.derive('Sch.model.TimeAxisTick',Sch.model.Range,{startDateField:'start',endDateField:'end'},0,0,0,0,0,0,[Sch.model,'TimeAxisTick'],0);Ext.cmd.derive('Sch.data.TimeAxis',Ext.data.JsonStore,{model:'Sch.model.TimeAxisTick',continuous:!0,originalContinuous:null,autoAdjust:!0,unit:null,increment:null,resolutionUnit:null,resolutionIncrement:null,weekStartDay:null,mainUnit:null,shiftUnit:null,shiftIncrement:1,defaultSpan:1,isConfigured:!1,adjustedStart:null,adjustedEnd:null,visibleTickStart:null,visibleTickEnd:null,presetName:null,mode:'plain',startTime:0,endTime:24,constructor:function(b){var a=this;b=b||{};if(a.setModel){a.setModel(a.model)}a.setMode(b.mode||a.mode);a.originalContinuous=a.continuous;Ext.data.JsonStore.prototype.constructor.apply(this,arguments);a.on(Ext.versions.touch?'refresh':'datachanged',function(){a.fireEvent('reconfigure',a,!1)});a.on('endreconfigure',function(a,c){a.fireEvent('reconfigure',a,c)});if(b.viewPreset){var c=Sch.preset.Manager.getPreset(b.viewPreset);c&&a.consumeViewPreset(c)}if(b.start||a.start){a.reconfigure(b)}},reconfigure:function(c,k){this.isConfigured=!0;Ext.apply(this,c);var h=this.getAdjustedDates(c.start,c.end,!0);var g=this.getAdjustedDates(c.start,c.end);var i=g.start;var j=g.end;if(this.fireEvent('beforereconfigure',this,i,j)!==!1){this.fireEvent('beginreconfigure',this);var a=this.unit;var b=this.increment||1;var f=this.generateTicks(i,j,a,b);this.removeAll(!0);this.suspendEvents();this.add(f);if(this.getCount()===0){Ext.Error.raise('Invalid time axis configuration or filter, please check your input data.')}this.resumeEvents();var e=Sch.util.Date;var d=f.length;if(this.isContinuous()){this.adjustedStart=h.start;this.adjustedEnd=this.getNext(d>1?f[d-1].start:h.start,a,b)}else {this.adjustedStart=this.getStart();this.adjustedEnd=this.getEnd()}do{this.visibleTickStart=(this.getStart()-this.adjustedStart)/(e.getUnitDurationInMs(a)*b);if(this.visibleTickStart>=1){this.adjustedStart=e.getNext(this.adjustedStart,a,b)}}while(this.visibleTickStart>=1);do{this.visibleTickEnd=d-(this.adjustedEnd-this.getEnd())/(e.getUnitDurationInMs(a)*b);if(d-this.visibleTickEnd>=1){this.adjustedEnd=e.getNext(this.adjustedEnd,a,-1)}}while(d-this.visibleTickEnd>=1);this.fireEvent('endreconfigure',this,k)}},isWeek:function(){return this.mode!=='plain'},setMode:function(a){this.mode=a;if(this.isWeek()){this.generateTicksValidatorFn=function(b){if(this.startTime>0||this.endTime<24){return b.getHours()>=this.startTime&&b.getHours()<this.endTime}else {return !0}}}else {this.generateTicksValidatorFn=function(){return !0}}},setTimeSpan:function(a,b){var c=this.getAdjustedDates(a,b);a=c.start;b=c.end;if(this.getStart()-a!==0||this.getEnd()-b!==0){this.reconfigure({start:a,end:b})}},filterBy:function(b,a){this.continuous=!1;a=a||this;this.clearFilter(!0);this.suspendEvents(!0);this.filter([{filterFn:function(d,c){return b.call(a,d.data,c)}}]);if(this.getCount()===0){this.clearFilter();this.resumeEvents();Ext.Error.raise('Invalid time axis filter - no ticks passed through the filter. Please check your filter method.')}this.resumeEvents()},isContinuous:function(){var a=this.continuous&&!this.isFiltered();if(this.isWeek()){a=a&&this.startTime===0&&this.endTime===24}return a},clearFilter:function(){this.continuous=this.originalContinuous;Ext.data.JsonStore.prototype.clearFilter.apply(this,arguments)},generateTicks:function(b,e,g,c){var d=[],a,h=Sch.util.Date,f=0;g=g||this.unit;c=c||this.increment;var i=this.getAdjustedDates(b,e);b=i.start;e=i.end;while(b<e){a=this.getNext(b,g,c);if(!this.autoAdjust&&a>e){a=e}if(g===h.HOUR&&c>1&&d.length>0&&f===0){var j=d[d.length-1];f=(j.start.getHours()+c)%24-j.end.getHours();if(f!==0){a=h.add(a,h.HOUR,f)}}this.generateTicksValidatorFn(b)&&d.push({start:b,end:a});b=a}return d},getVisibleTickTimeSpan:function(){return this.isContinuous()?this.visibleTickEnd-this.visibleTickStart:this.getCount()},getAdjustedDates:function(b,a,i){var d=Sch.util.Date;b=b||this.getStart();a=a||d.add(b,this.mainUnit,this.defaultSpan);if(this.isWeek()){if(this.shiftUnit===d.MONTH){var h=d.add(b,d.WEEK,1);var g=d.add(a,d.WEEK,-1);if(!a){a=this.getNext(b,this.shiftUnit,1);a=this.ceilDate(a,!1,this.shiftUnit);a=this.ceilDate(a,!1,this.mainUnit)}if(h.getMonth()!==b.getMonth()&&g.getMonth()!==a.getMonth()){return {start:b,end:a}}}var e,c,f;e=this.floorDate(b,!1,this.shiftUnit,1);e=this.floorDate(e,!1,this.mainUnit,1);if(this.autoAdjust){f=this.getNext(b,this.shiftUnit,1);c=this.ceilDate(f,!1,this.shiftUnit);c=this.ceilDate(c,!1,this.mainUnit)}else {c=this.ceilDate(a,!1,this.shiftUnit);c=this.ceilDate(c,!1,this.mainUnit)}return {start:e,end:c}}else {return this.autoAdjust||i?{start:this.floorDate(b,!1,this.autoAdjust?this.mainUnit:this.unit,1),end:this.ceilDate(a,!1,this.autoAdjust?this.mainUnit:this.unit,1)}:{start:b,end:a}}},getTickFromDate:function(b){var a=this.data.items;var e=a.length-1;if(b.valueOf()<a[0].data.start.valueOf()||b.valueOf()>a[e].data.end.valueOf()){return -1}var f,d,g;if(this.isContinuous()){if(b-a[0].data.start===0){return this.visibleTickStart}if(b-a[e].data.end===0){return this.visibleTickEnd}var i=this.adjustedStart;var j=this.adjustedEnd;var c=Math.floor(a.length*(b-i)/(j-i));if(c>e){c=e}d=c===0?i:a[c].data.start;g=c==e?j:a[c].data.end;f=c+(b-d)/(g-d);if(f<this.visibleTickStart||f>this.visibleTickEnd){return -1}return f}else {for(var h=0;h<=e;h++){g=a[h].data.end;if(b<=g){d=a[h].data.start;f=h+(b>d?(b-d)/(g-d):0);return f}}}return -1},getDateFromTick:function(c,d){if(c===this.visibleTickEnd){return this.getEnd()}var a=Math.floor(c),h=c-a,g=this.getAt(a);if(!g){return null}var e=g.data;var f=a===0?this.adjustedStart:e.start;var i=a==this.getCount()-1&&this.isContinuous()?this.adjustedEnd:e.end;var b=Sch.util.Date.add(f,Sch.util.Date.MILLI,h*(i-f));if(d){b=this[d+'Date'](b)}return b},getTicks:function(){var a=[];this.each(function(b){a.push(b.data)});return a},getStart:function(){var a=this.first();if(a){return new Date(a.data.start)}return null},getEnd:function(){var a=this.last();if(a){return new Date(a.data.end)}return null},floorDate:function(k,f,j,l){f=f!==!1;var a=Ext.Date.clone(k),c=f?this.getStart():null,d=l||this.resolutionIncrement,h;if(j){h=j}else {h=f?this.resolutionUnit:this.mainUnit}var b=Sch.util.Date;var e=function(b,a){return Math.floor(b/a)*a};switch(h){case b.MILLI:if(f){a=b.add(c,b.MILLI,e(b.getDurationInMilliseconds(c,a),d))};break;case b.SECOND:if(f){a=b.add(c,b.MILLI,e(b.getDurationInSeconds(c,a),d)*1000)}else {a.setMilliseconds(0);a.setSeconds(e(a.getSeconds(),d))};break;case b.MINUTE:if(f){a=b.add(c,b.SECOND,e(b.getDurationInMinutes(c,a),d)*60)}else {a.setMinutes(e(a.getMinutes(),d));a.setSeconds(0);a.setMilliseconds(0)};break;case b.HOUR:if(f){a=b.add(c,b.MINUTE,e(b.getDurationInHours(this.getStart(),a),d)*60)}else {a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(e(a.getHours(),d))};break;case b.DAY:if(f){a=b.add(c,b.DAY,e(b.getDurationInDays(c,a),d))}else {Sch.util.Date.clearTime(a);a.setDate(e(a.getDate()-1,d)+1)};break;case b.WEEK:var i=a.getDay()||7;var g=this.weekStartDay||7;Sch.util.Date.clearTime(a);a=b.add(a,b.DAY,i>=g?g-i:-(7-g+i));if(a.getDay()!==g&&a.getHours()===23){a=b.add(a,b.HOUR,1)};break;case b.MONTH:if(f){a=b.add(c,b.MONTH,e(b.getDurationInMonths(c,a),d))}else {Sch.util.Date.clearTime(a);a.setDate(1);a.setMonth(e(a.getMonth(),d))};break;case b.QUARTER:Sch.util.Date.clearTime(a);a.setDate(1);a=b.add(a,b.MONTH,-(a.getMonth()%3));break;case b.YEAR:if(f){a=b.add(c,b.YEAR,e(b.getDurationInYears(c,a),d))}else {a=new Date(e(k.getFullYear()-1,d)+1,0,1)};break;}return a},roundDate:function(t,b){var a=Ext.Date.clone(t),c=this.resolutionIncrement;b=b||this.getStart();switch(this.resolutionUnit){case Sch.util.Date.MILLI:var j=Sch.util.Date.getDurationInMilliseconds(b,a),f=Math.round(j/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.MILLI,f);break;case Sch.util.Date.SECOND:var s=Sch.util.Date.getDurationInSeconds(b,a),h=Math.round(s/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.MILLI,h*1000);break;case Sch.util.Date.MINUTE:var q=Sch.util.Date.getDurationInMinutes(b,a),g=Math.round(q/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.SECOND,g*60);break;case Sch.util.Date.HOUR:var o=Sch.util.Date.getDurationInHours(b,a),k=Math.round(o/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.MINUTE,k*60);break;case Sch.util.Date.DAY:var r=Sch.util.Date.getDurationInDays(b,a),m=Math.round(r/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.DAY,m);break;case Sch.util.Date.WEEK:Sch.util.Date.clearTime(a);var d=a.getDay()-this.weekStartDay,e;if(d<0){d=7+d};if(Math.round(d/7)===1){e=7-d}else {e=-d};a=Sch.util.Date.add(a,Sch.util.Date.DAY,e);break;case Sch.util.Date.MONTH:var n=Sch.util.Date.getDurationInMonths(b,a)+a.getDate()/Ext.Date.getDaysInMonth(a),i=Math.round(n/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.MONTH,i);break;case Sch.util.Date.QUARTER:Sch.util.Date.clearTime(a);a.setDate(1);a=Sch.util.Date.add(a,Sch.util.Date.MONTH,3-a.getMonth()%3);break;case Sch.util.Date.YEAR:var p=Sch.util.Date.getDurationInYears(b,a),l=Math.round(p/c)*c;a=Sch.util.Date.add(b,Sch.util.Date.YEAR,l);break;}return a},ceilDate:function(c,d,f){var a=Ext.Date.clone(c);d=d!==!1;var g=d?this.resolutionIncrement:1,b=!1,e;if(f){e=f}else {e=d?this.resolutionUnit:this.mainUnit}switch(e){case Sch.util.Date.HOUR:if(a.getMinutes()>0||a.getSeconds()>0||a.getMilliseconds()>0){b=!0};break;case Sch.util.Date.DAY:if(a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0||a.getMilliseconds()>0){b=!0};break;case Sch.util.Date.WEEK:Sch.util.Date.clearTime(a);if(a.getDay()!==this.weekStartDay||c.getTime()-a.getTime()>0){b=!0};break;case Sch.util.Date.MONTH:Sch.util.Date.clearTime(a);if(a.getDate()!==1||c.getTime()-a.getTime()>0){b=!0};break;case Sch.util.Date.QUARTER:Sch.util.Date.clearTime(a);if(a.getMonth()%3!==0||a.getDate()!==1||c.getTime()-a.getTime()>0){b=!0};break;case Sch.util.Date.YEAR:Sch.util.Date.clearTime(a);if(a.getMonth()!==0||a.getDate()!==1||c.getTime()-a.getTime()>0){b=!0};break;default:break;}if(b){return this.getNext(a,e,g)}else {return a}},getNext:function(b,c,a){return Sch.util.Date.getNext(b,c,a,this.weekStartDay)},getResolution:function(){return {unit:this.resolutionUnit,increment:this.resolutionIncrement}},setResolution:function(b,a){this.resolutionUnit=b;this.resolutionIncrement=a||1},shift:function(a,b){this.setTimeSpan(Sch.util.Date.add(this.getStart(),b,a),Sch.util.Date.add(this.getEnd(),b,a))},shiftNext:function(a){a=a||this.getShiftIncrement();var b=this.getShiftUnit();this.setTimeSpan(Sch.util.Date.add(this.getStart(),b,a),Sch.util.Date.add(this.getEnd(),b,a))},shiftPrevious:function(a){a=-(a||this.getShiftIncrement());var b=this.getShiftUnit();this.setTimeSpan(Sch.util.Date.add(this.getStart(),b,a),Sch.util.Date.add(this.getEnd(),b,a))},getShiftUnit:function(){return this.shiftUnit||this.mainUnit},getShiftIncrement:function(){return this.shiftIncrement||1},getUnit:function(){return this.unit},getIncrement:function(){return this.increment},getRowTicks:function(){if(this.isWeek()){var b=this.getStart();var c=Sch.util.Date.add(b,this.headerConfig.middle.splitUnit,1);var a=this.findBy(function(a){return a.getStartDate().getTime()>=c.getTime()});if(a===-1){return this.getRange()}return this.getRange(0,a-1)}},dateInAxis:function(a){var b=Sch.util.Date.betweenLesser(a,this.getStart(),this.getEnd());if(b&&!this.isContinuous()){var d=this.getTickFromDate(a);var c=this.getAt(Math.floor(d));b=c.getStartDate()<=a&&c.getEndDate()>=a}return b},timeSpanInAxis:function(a,b){if(this.isContinuous()){return Sch.util.Date.intersectSpans(a,b,this.getStart(),this.getEnd())}else {return a<this.getStart()&&b>this.getEnd()||this.getTickFromDate(a)!==this.getTickFromDate(b)}},isRangeInAxis:function(a){var b=a.getStartDate(),c=a.getEndDate();if(!b||!c){return !1}return this.timeSpanInAxis(b,c)},forEachAuxInterval:function(h,g,f,c){c=c||this;var d=this.getEnd(),a=this.getStart(),e=0,b;if(a>d){throw new Error('Invalid time axis configuration')}while(a<d){b=Sch.util.Date.min(this.getNext(a,h,g||1),d);f.call(c,a,b,e);a=b;e++}},consumeViewPreset:function(a){Ext.apply(this,{unit:a.getBottomHeader().unit,increment:a.getBottomHeader().increment||1,resolutionUnit:a.timeResolution.unit,resolutionIncrement:a.timeResolution.increment,mainUnit:a.getMainHeader().unit,shiftUnit:a.shiftUnit,shiftIncrement:a.shiftIncrement||1,defaultSpan:a.defaultSpan||1,presetName:a.name,headerConfig:a.headerConfig})}},1,0,0,0,0,0,[Sch.data,'TimeAxis'],0);Ext.cmd.derive('Sch.preset.ViewPreset',Ext.Base,{name:null,rowHeight:24,timeColumnWidth:50,timeRowHeight:null,timeAxisColumnWidth:null,displayDateFormat:'G:i',shiftUnit:'HOUR',shiftIncrement:1,defaultSpan:12,timeResolution:null,headerConfig:null,columnLinesFor:'middle',headers:null,mainHeader:0,ptype:'',constructor:function(a){Ext.apply(this,a);this.normalizeUnits()},normalizeUnits:function(){var a=this.headerConfig;var b=Sch.util.Date;for(var c in a){if(a.hasOwnProperty(c)){if(b[a[c].unit]){a[c].unit=b[a[c].unit.toUpperCase()]}if(b[a[c].splitUnit]){a[c].splitUnit=b[a[c].splitUnit.toUpperCase()]}}}var d=this.timeResolution;if(d&&b[d.unit]){d.unit=b[d.unit.toUpperCase()]}var e=this.shiftUnit;if(e&&b[e]){this.shiftUnit=b[e.toUpperCase()]}},getHeaders:function(){if(this.headers){return this.headers}var a=this.headerConfig;this.mainHeader=a.top?1:0;return this.headers=[].concat(a.top||[],a.middle||[],a.bottom||[])},getMainHeader:function(){return this.getHeaders()[this.mainHeader]},getBottomHeader:function(){var a=this.getHeaders();return a[a.length-1]},clone:function(){var a={};var b=this;Ext.Array.each(['rowHeight','timeColumnWidth','timeRowHeight','timeAxisColumnWidth','displayDateFormat','shiftUnit','shiftIncrement','defaultSpan','timeResolution','headerConfig'],function(c){a[c]=b[c]});return new this.self(Ext.clone(a))},isValid:function(){var e=Sch.util.Date,a=!0,b=Sch.util.Date.units,d={};for(var c in this.headerConfig){if(this.headerConfig.hasOwnProperty(c)){d[c]=!0;a=a&&Ext.Array.indexOf(b,this.headerConfig[c].unit)>=0}}if(!(this.columnLinesFor in d)){this.columnLinesFor='middle'}if(this.timeResolution){a=a&&Ext.Array.indexOf(b,this.timeResolution.unit)>=0}if(this.shiftUnit){a=a&&Ext.Array.indexOf(b,this.shiftUnit)>=0}return a}},1,0,0,0,0,0,[Sch.preset,'ViewPreset'],0);Ext.cmd.derive('Sch.preset.Manager',Ext.util.MixedCollection,{singleton:!0,defaultPresets:{secondAndMinute:{timeColumnWidth:30,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'G:i:s',shiftIncrement:10,shiftUnit:'MINUTE',defaultSpan:24,timeResolution:{unit:'SECOND',increment:5},headerConfig:{middle:{unit:'SECOND',increment:10,align:'center',dateFormat:'s'},top:{unit:'MINUTE',align:'center',dateFormat:'D, d g:iA'}}},minuteAndHour:{timeColumnWidth:100,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'G:i',shiftIncrement:1,shiftUnit:'HOUR',defaultSpan:24,timeResolution:{unit:'MINUTE',increment:30},headerConfig:{middle:{unit:'MINUTE',increment:'30',align:'center',dateFormat:'i'},top:{unit:'HOUR',align:'center',dateFormat:'D, gA/d'}}},hourAndDay:{timeColumnWidth:60,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'G:i',shiftIncrement:1,shiftUnit:'DAY',defaultSpan:24,timeResolution:{unit:'MINUTE',increment:30},headerConfig:{middle:{unit:'HOUR',align:'center',dateFormat:'G:i'},top:{unit:'DAY',align:'center',dateFormat:'D d/m'}}},dayAndWeek:{timeColumnWidth:100,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d G:i',shiftUnit:'DAY',shiftIncrement:1,defaultSpan:5,timeResolution:{unit:'HOUR',increment:1},headerConfig:{middle:{unit:'DAY',align:'center',dateFormat:'D d M'},top:{unit:'WEEK',align:'center',renderer:function(a,c,b){return Sch.util.Date.getShortNameOfUnit('WEEK')+'.'+Ext.Date.format(a,'W M Y')}}}},weekAndDay:{timeColumnWidth:100,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'WEEK',shiftIncrement:1,defaultSpan:1,timeResolution:{unit:'DAY',increment:1},headerConfig:{bottom:{unit:'DAY',align:'center',increment:1,dateFormat:'d/m'},middle:{unit:'WEEK',dateFormat:'D d M'}}},weekAndMonth:{timeColumnWidth:100,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'WEEK',shiftIncrement:5,defaultSpan:6,timeResolution:{unit:'DAY',increment:1},headerConfig:{middle:{unit:'WEEK',align:'center',renderer:function(a,c,b){return Ext.Date.format(a,'d M')}},top:{unit:'MONTH',align:'center',dateFormat:'M Y'}}},monthAndYear:{timeColumnWidth:110,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftIncrement:3,shiftUnit:'MONTH',defaultSpan:12,timeResolution:{unit:'DAY',increment:1},headerConfig:{middle:{unit:'MONTH',align:'center',dateFormat:'M Y'},top:{unit:'YEAR',align:'center',dateFormat:'Y'}}},year:{timeColumnWidth:100,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'YEAR',shiftIncrement:1,defaultSpan:1,timeResolution:{unit:'MONTH',increment:1},headerConfig:{middle:{unit:'QUARTER',align:'center',renderer:function(a,c,b){return Ext.String.format(Sch.util.Date.getShortNameOfUnit('QUARTER').toUpperCase()+'{0}',Math.floor(a.getMonth()/3)+1)}},top:{unit:'YEAR',align:'center',dateFormat:'Y'}}},manyYears:{timeColumnWidth:50,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'YEAR',shiftIncrement:1,defaultSpan:1,timeResolution:{unit:'YEAR',increment:1},headerConfig:{middle:{unit:'YEAR',align:'center',dateFormat:'Y',increment:5},bottom:{unit:'YEAR',align:'center',dateFormat:'y',increment:1}}},weekAndDayLetter:{timeColumnWidth:20,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'WEEK',shiftIncrement:1,defaultSpan:10,timeResolution:{unit:'DAY',increment:1},headerConfig:{bottom:{unit:'DAY',align:'center',renderer:function(a){return Ext.Date.dayNames[a.getDay()].substring(0,1)},verticalColumnWidth:25},middle:{unit:'WEEK',dateFormat:'D d M Y',verticalColumnWidth:115}}},weekDateAndMonth:{timeColumnWidth:30,rowHeight:24,resourceColumnWidth:100,displayDateFormat:'Y-m-d',shiftUnit:'WEEK',shiftIncrement:1,defaultSpan:10,timeResolution:{unit:'DAY',increment:1},headerConfig:{middle:{unit:'WEEK',align:'center',dateFormat:'d'},top:{unit:'MONTH',dateFormat:'Y F'}}},day:{timeRowHeight:40,displayDateFormat:'G:i',shiftIncrement:1,shiftUnit:'DAY',defaultSpan:1,timeResolution:{unit:'MINUTE',increment:30},columnLinesFor:'bottom',headerConfig:{bottom:{unit:'HOUR',align:'center',renderer:function(a){return Ext.String.format('<div class="sch-calendarcolumn-ct"><span class="sch-calendarcolumn-hours">{0}</span><span class="sch-calendarcolumn-minutes">{1}</span></div>',Ext.Date.format(a,'H'),Ext.Date.format(a,'i'))}},middle:{unit:'DAY',align:'center',dateFormat:'D d/m',splitUnit:'DAY'}}},week:{timeRowHeight:40,displayDateFormat:'G:i',shiftIncrement:1,shiftUnit:'WEEK',defaultSpan:24,timeResolution:{unit:'MINUTE',increment:30},columnLinesFor:'bottom',headerConfig:{bottom:{unit:'HOUR',align:'center',dateFormat:'H:i',renderer:function(a){return Ext.String.format('<div class="sch-calendarcolumn-ct"><span class="sch-calendarcolumn-hours">{0}</span><span class="sch-calendarcolumn-minutes">{1}</span></div>',Ext.Date.format(a,'H'),Ext.Date.format(a,'i'))}},middle:{unit:'WEEK',align:'center',dateFormat:'D d',splitUnit:'DAY'}}}},constructor:function(){this.callParent(arguments);this.registerDefaults()},onLocalized:function(){var a=this;this.eachKey(function(d,c){if(a.l10n[d]){var b=a.L(d);b.displayDateFormat&&(c.displayDateFormat=b.displayDateFormat);b.middleDateFormat&&(c.headerConfig.middle.dateFormat=b.middleDateFormat);b.topDateFormat&&(c.headerConfig.top.dateFormat=b.topDateFormat);b.bottomDateFormat&&(c.headerConfig.bottom.dateFormat=b.bottomDateFormat)}})},registerPreset:function(a,c){c.name=a;var b=new Sch.preset.ViewPreset(c);if(b.isValid()){if(this.containsKey(a)){this.removeAtKey(a)}this.add(a,b)}else {throw 'Invalid preset, please check your configuration'}},getPreset:function(a){return this.get(a)},deletePreset:function(a){this.removeAtKey(a)},registerDefaults:function(){var c=this,a=this.defaultPresets;for(var b in a){c.registerPreset(b,a[b])}}},1,0,0,0,0,[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.preset,'Manager'],0);Ext.cmd.derive('Sch.view.model.TimeAxis',Ext.util.Observable,{timeAxis:null,availableWidth:0,tickWidth:100,snapToIncrement:!1,forceFit:!1,headerConfig:null,headers:null,mainHeader:0,calendar:null,timeAxisColumnWidth:null,resourceColumnWidth:null,weekViewColumnWidth:null,calendarColumnDates:null,headersDatesCache:null,timeColumnWidth:null,rowHeightHorizontal:null,rowHeightVertical:null,mode:'horizontal',suppressFit:!1,refCount:0,columnConfig:{},viewPreset:null,columnLinesFor:'middle',eventStore:null,originalTickWidth:null,constructor:function(c){var a=this;Ext.apply(this,c);a.headersDatesCache={};if(this.viewPreset){if(this.viewPreset instanceof Sch.preset.ViewPreset){this.consumeViewPreset(this.viewPreset)}else {var b=Sch.preset.Manager.getPreset(this.viewPreset);b&&this.consumeViewPreset(b)}}a.timeAxis.on('reconfigure',a.onTimeAxisReconfigure,a);Ext.util.Observable.prototype.constructor.apply(this,arguments)},isHorizontal:function(){return this.mode==='horizontal'},isVertical:function(){return this.mode==='vertical'},isWeek:function(){return this.mode==='weekview'},destroy:function(){this.timeAxis.un('reconfigure',this.onTimeAxisReconfigure,this)},onTimeAxisReconfigure:function(b,a){if(!a){this.update()}},reconfigure:function(b){this.headers=null;Ext.apply(this,b);var a;if(this.isHorizontal()){a=this.timeColumnWidth}else {a=this.rowHeightVertical}this.setTickWidth(a);this.fireEvent('reconfigure',this)},getColumnConfig:function(){return this.columnConfig},update:function(e,f){var d=this.timeAxis,b=this.headerConfig;this.availableWidth=Math.max(e||this.availableWidth,0);if(!Ext.isNumber(this.availableWidth)){throw new Error('Invalid available width provided to Sch.view.model.TimeAxis')}if(this.forceFit&&this.availableWidth<=0){return}this.columnConfig={};for(var a in b){if(b[a].cellGenerator){this.columnConfig[a]=b[a].cellGenerator.call(this,d.getStart(),d.getEnd())}else {this.columnConfig[a]=this.createHeaderRow(a,b[a])}}var c=this.calculateTickWidth(this.originalTickWidth);if(!Ext.isNumber(c)||c<=0){throw new Error('Invalid column width calculated in Sch.view.model.TimeAxis')}this.updateTickWidth(c);if(!f){this.fireEvent('update',this)}},updateCalendarColumnDates:function(b){this.calendarColumnDates=[];for(var a=0;a<b.length;a++){var c=b[a];this.calendarColumnDates.push([c.start,c.end])}},getCalendarColumnDates:function(){return this.calendarColumnDates},createHeaderRow:function(c,a){var d=[],b=this,e=a.align,f=Ext.Date.clearTime(new Date());b.headersDatesCache[c]={};b.forEachInterval(c,function(h,i,j){var g={align:e,start:h,end:i,headerCls:''};b.headersDatesCache[c][h.getTime()]=1;if(a.renderer){g.header=a.renderer.call(a.scope||b,h,i,g,j,b.eventStore)}else {g.header=Ext.Date.format(h,a.dateFormat)}if(a.unit===Sch.util.Date.DAY&&(!a.increment||a.increment===1)){g.headerCls+=' sch-dayheadercell-'+h.getDay();if(this.calendar&&this.calendar.isWeekend(h)){g.headerCls+=' sch-dayheadercell-nonworking'}if(Ext.Date.clearTime(h,!0)-f===0){g.headerCls+=' sch-dayheadercell-today'}}d.push(g)});return d},getDistanceBetweenDates:function(a,b){return Math.round(this.getPositionFromDate(b,!0)-this.getPositionFromDate(a))},getPositionFromDate:function(e,i){var a=-1;if(this.isWeek()){var b=this.rowHeightVertical;var d=this.getHeaders();var c=this.timeAxis.getStart();var g=Sch.util.Date;var h=g.mergeDates(c,e,d[1].unit);a=g.getDurationInUnit(c,h,d[1].unit,!0)*b;if(a===0&&i){a=this.calendarRowsAmount*b}}else {var f=this.timeAxis.getTickFromDate(e);if(f>=0){a=this.tickWidth*(f-this.timeAxis.visibleTickStart)}}return Math.round(a)},getDateFromPosition:function(b,a){if(this.isWeek()){var c=this.getCalendarColumnDates();if(!c){return null}var j=Math.min(Math.floor(Math.max(b[0],0)/this.weekViewColumnWidth),c.length-1),i=c[j][0],f=this.timeAxis.first(),h=(f.get('end')-f.get('start'))/this.rowHeightVertical,g=Sch.util.Date,d=g.add(i,g.MILLI,Math.round(b[1]*h));if(a){d=this.timeAxis[a+'Date'](d)}return d}else {var e=b/this.getTickWidth()+this.timeAxis.visibleTickStart,k=this.timeAxis.getCount();if(e<0||e>k){return null}return this.timeAxis.getDateFromTick(e,a)}},getSingleUnitInPixels:function(a){return Sch.util.Date.getUnitToBaseUnitRatio(this.timeAxis.getUnit(),a)*this.tickWidth/this.timeAxis.increment},getSnapPixelAmount:function(){if(this.snapToIncrement){var a=this.timeAxis.getResolution();return (a.increment||1)*this.getSingleUnitInPixels(a.unit)}else {return 1}},getTickWidth:function(){return this.tickWidth},setTickWidth:function(a,b){this.originalTickWidth=a;this.updateTickWidth(a);this.update(null,b)},updateTickWidth:function(a){this.tickWidth=a;this[this.isHorizontal()?'timeColumnWidth':'rowHeightVertical']=a},getTotalWidth:function(){return Math.round(this.tickWidth*this.timeAxis.getVisibleTickTimeSpan())},calculateTickWidth:function(e){var b=this.forceFit;var c=this.timeAxis;var d=0,f=c.getUnit(),a=Number.MAX_VALUE,g=Sch.util.Date;if(this.snapToIncrement){var i=c.getResolution();a=g.getUnitToBaseUnitRatio(f,i.unit)*i.increment}else {var j=g.getMeasuringUnit(f);a=Math.min(a,g.getUnitToBaseUnitRatio(f,j))}if(!this.suppressFit){var l=this.isWeek()?c.endTime-c.startTime:c.getVisibleTickTimeSpan(),h=Math[b?'floor':'round'](this.getAvailableWidth()/l);d=b||e<h?h:e;if(a>0&&(!b||a<1)){var k=Ext.versions.touch&&b?'ceil':b?'floor':'round';d=Math.round(Math.max(1,Math[k](a*d))/a)}}else {d=e}return d},getAvailableWidth:function(){return this.availableWidth},setAvailableWidth:function(b){this.availableWidth=Math.max(0,b);if(this.availableWidth>0){var a=this.calculateTickWidth(this.originalTickWidth);if(a>0&&a!==this.tickWidth){this.update()}}},fitToAvailableWidth:function(b){var a=Math.floor(this.availableWidth/this.timeAxis.getVisibleTickTimeSpan());this.setTickWidth(a,b)},setForceFit:function(a){if(a!==this.forceFit){this.forceFit=a;this.update()}},setSnapToIncrement:function(a){if(a!==this.snapToIncrement){this.snapToIncrement=a;this.update()}},getViewRowHeight:function(){var a=this.isHorizontal()?this.rowHeightHorizontal:this.rowHeightVertical;if(!a){throw new Error('rowHeight info not available')}return a},setViewRowHeight:function(a,b){var c='rowHeight'+Ext.String.capitalize(this.mode);if(this[c]!=a){this[c]=a;if(this.isHorizontal()){if(!b){this.fireEvent('update',this)}}else {this.setTickWidth(a,b)}}},setViewColumnWidth:function(a,b){if(this.isHorizontal()){this.setTickWidth(a,b)}else {if(this.isVertical()){this.resourceColumnWidth=a}else {if(this.isWeek()){this.weekViewColumnWidth=a}}}if(!b){this.fireEvent('columnwidthchange',this,a)}},getHeaders:function(){if(this.headers){return this.headers}var a=this.headerConfig;this.mainHeader=a.top?1:0;return this.headers=[].concat(a.top||[],a.middle||[],a.bottom||[])},getMainHeader:function(){return this.getHeaders()[this.mainHeader]},getBottomHeader:function(){var a=this.getHeaders();return a[a.length-1]},getLowestHeader:function(){return 'bottom' in this.headerConfig?'bottom':'middle'},getMajorHeaderName:function(){var a=this.headerConfig;if(a.bottom){return 'middle'}if(a.top){return 'top'}return null},isMajorTick:function(b){var a=this.getMajorHeaderName();return a&&this.headersDatesCache[a]&&this.headersDatesCache[a][b.getTime()]||!1},forEachInterval:function(c,d,a){a=a||this;var b=this.headerConfig;if(!b){return}if(c==='top'||c==='middle'&&b.bottom){var e=b[c];this.timeAxis.forEachAuxInterval(e.unit,e.increment,d,a)}else {this.timeAxis.each(function(b,e){return d.call(a,b.data.start,b.data.end,e)})}},forEachMainInterval:function(a,b){this.forEachInterval('middle',a,b)},consumeViewPreset:function(a){this.headers=null;Ext.apply(this,{headerConfig:a.headerConfig,columnLinesFor:a.columnLinesFor||'middle',rowHeightHorizontal:a.rowHeight,tickWidth:this.isHorizontal()?a.timeColumnWidth:a.timeRowHeight||a.timeColumnWidth||60,timeColumnWidth:a.timeColumnWidth,rowHeightVertical:a.timeRowHeight||a.timeColumnWidth||60,timeAxisColumnWidth:a.timeAxisColumnWidth,resourceColumnWidth:a.resourceColumnWidth||100});this.originalTickWidth=this.tickWidth},setEventStore:function(a){this.eventStore=a},setCalendar:function(a){if(a!==this.calendar){this.calendar=a;if(a){this.update()}}}},1,0,0,0,0,0,[Sch.view.model,'TimeAxis'],0);Ext.cmd.derive('Sch.feature.AbstractTimeSpan',Ext.AbstractPlugin,{lockableScope:'top',schedulerView:null,timeAxis:null,expandToFitView:!1,disabled:!1,cls:null,clsField:'Cls',template:null,store:null,renderElementsBuffered:!1,renderDelay:0,refreshSizeOnItemUpdate:!0,_renderTimer:null,showHeaderElements:!1,headerTemplate:null,innerHeaderTpl:null,headerContainerCls:'sch-header-secondary-canvas',headerContainerEl:null,renderingDoneEvent:null,constructor:function(a){this.uniqueCls=this.uniqueCls||'sch-timespangroup-'+Ext.id();Ext.apply(this,a);this.mixins.observable.constructor.call(this);Ext.plugin.Abstract.prototype.constructor.apply(this,arguments)},init:function(a){if(Ext.versions.touch&&!a.isReady()){a.on('viewready',function(){this.init(a)},this);return}if(typeof this.innerHeaderTpl==='string'){this.innerHeaderTpl=new Ext.XTemplate(this.innerHeaderTpl)}var b=this.innerHeaderTpl;if(!this.headerTemplate){this.headerTemplate=new Ext.XTemplate('<tpl for=".">','<div id="{id}" class="{cls}" style="{side}:{position}px;">'+(b?'{[this.renderInner(values)]}':'')+'</div>','</tpl>',{renderInner:function(c){return b.apply(c)}})}this.schedulerView=a.getSchedulingView();this.panel=a;this.timeAxis=a.getTimeAxis();this.store=Ext.StoreManager.lookup(this.store);if(!this.store){Ext.Error.raise('Error: You must define a store for this plugin')}this.panel.on({horizontaltimeaxiscolumnrender:this.renderHeaderElements,scope:this});if(!this.schedulerView.getEl()){this.schedulerView.on({viewready:this.onViewReady,scope:this})}else {this.onViewReady()}},setDisabled:function(a){if(a){this.removeElements()}this.disabled=a},removeElements:function(){this.removeBodyElements();if(this.showHeaderElements){this.removeHeaderElements()}},getBodyElements:function(){var a=this.getContainerEl();if(a){return a.select('.'+this.uniqueCls)}return null},getHeaderContainerEl:function(){var a=this.headerContainerEl,d='x-',b;if(!a||!a.dom){if(this.schedulerView.isHorizontal()){var c=this.panel.getHorizontalTimeAxisColumn();if(c.headerView){b=c.headerView.containerEl}else {return null}}else {b=this.panel.lockedGrid.getView().el}if(b){a=b.down('.'+this.headerContainerCls);if(!a){a=b.appendChild({cls:this.headerContainerCls})}this.headerContainerEl=a}}return a},getHeaderElements:function(){var a=this.getHeaderContainerEl();if(a){return a.select('.'+this.uniqueCls)}return null},removeBodyElements:function(){var a=this.getBodyElements();if(a){a.each(function(a){a.destroy()})}},removeHeaderElements:function(){var a=this.getHeaderElements();if(a){a.each(function(a){a.destroy()})}},getElementId:function(a){return this.uniqueCls+'-'+a.internalId},getHeaderElementId:function(a){return this.uniqueCls+'-header-'+a.internalId},getTemplateData:function(a){return this.prepareTemplateData?this.prepareTemplateData(a):a.data},getElementCls:function(b,a){var c=b.clsField||this.clsField;if(!a){a=this.getTemplateData(b)}return this.cls+' '+this.uniqueCls+' '+(a[c]||'')},getHeaderElementCls:function(b,a){var c=b.clsField||this.clsField;if(!a){a=this.getTemplateData(b)}return 'sch-header-indicator '+this.uniqueCls+' '+(a[c]||'')},getContainerEl:function(){return this.schedulerView.getSecondaryCanvasEl()},onViewReady:function(b){var a=this.schedulerView;this.storeListeners={load:this.renderElements,datachanged:this.renderElements,clear:this.renderElements,update:this.refreshSingle,scope:this};this.store.on(this.storeListeners);this.panel.on({beforemodechange:this.onTimelinePanelBeforeModeChange,modechange:this.onTimelinePanelModeChange,scope:this});this.viewListeners={refresh:this.renderElements,scope:this};this.headerListeners={afterlayout:this.renderElements,scope:this};if(a.isWeekView()){a.headerCt.on(this.headerListeners)}else {a.on(this.viewListeners);this.renderElements()}},onTimelinePanelBeforeModeChange:function(){var a=this.schedulerView;if(a.isWeekView()){a.headerCt.un(this.headerListeners)}else {this.schedulerView.un(this.viewListeners)}},onTimelinePanelModeChange:function(){var a=this.schedulerView;if(a.isWeekView()){a.headerCt.on(this.headerListeners)}else {a.on(this.viewListeners)}this.forceNewRenderingTimeout()},forceNewRenderingTimeout:function(){this.renderElementsBuffered=!1;clearTimeout(this._renderTimer);this.renderElements()},renderElements:function(){if(this.renderElementsBuffered||this.disabled){return}this.renderElementsBuffered=!0;clearTimeout(this._renderTimer);this._renderTimer=Ext.Function.defer(this.renderElementsInternal,this.renderDelay,this)},setElementX:function(a,b){if(this.panel.rtl){a.setRight(b)}else {a.setLeft(b)}},getHeaderElementPosition:function(b){var a=this.schedulerView.getTimeAxisViewModel();return Math.round(a.getPositionFromDate(b))},renderBodyElementsInternal:function(a){var b=this.timeAxis.getStart(),d=this.timeAxis.getEnd(),c=this.getElementData(b,d,a);this.template.append(this.getContainerEl(),c)},getHeaderElementData:function(b,a){throw 'Abstract method call'},renderHeaderElements:function(b){var a=this.getHeaderContainerEl();if(a){var c=this.getHeaderElementData(b);this.headerTemplate.append(a,c)}},renderElementsInternal:function(){this.renderElementsBuffered=!1;var a=this.schedulerView;if(this.disabled||a.isDestroyed||!this.getContainerEl()||a.store.getCount()===0){return}if(a.isWeekView()){var b=a.getColumnManager().getColumns();if(b[0]&&!b[0].rendered){return}}this.removeElements();this.renderBodyElementsInternal();if(this.showHeaderElements){this.headerContainerEl=null;this.renderHeaderElements()}if(this.renderingDoneEvent){this.fireEvent(this.renderingDoneEvent,this)}},getElementData:function(a,d,c,b){throw 'Abstract method call'},updateBodyElement:function(c){var b=Ext.get(this.getElementId(c));if(b){var d=this.timeAxis.getStart(),e=this.timeAxis.getEnd(),a=this.getElementData(d,e,[c])[0];if(a){b.dom.className=a.$cls;b.setTop(a.top);this.setElementX(b,a.left);b.setSize(a.width,a.height)}else {Ext.destroy(b)}}else {this.renderBodyElementsInternal([c])}},updateHeaderElement:function(c){var a=Ext.get(this.getHeaderElementId(c));if(a){var b=this.getHeaderElementData([c])[0];if(b){a.dom.className=b.cls;if(this.schedulerView.isHorizontal()){this.setElementX(a,b.position);a.setWidth(b.size)}else {a.setTop(b.position);a.setHeight(b.size)}}else {Ext.destroy(a)}}else {this.renderHeaderElements([c])}},destroy:function(){clearTimeout(this._renderTimer);this.store.un(this.storeListeners);if(this.store.autoDestroy){this.store.destroy()}},refreshSingle:function(b,a){a=a instanceof Array?a:[a];Ext.Array.each(a,function(c){this.updateBodyElement(c);if(this.showHeaderElements){this.updateHeaderElement(c)}},this)}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Sch.feature,'AbstractTimeSpan'],0);Ext.cmd.derive('Sch.plugin.Lines',Sch.feature.AbstractTimeSpan,{cls:'sch-timeline',showTip:!0,innerTpl:null,prepareTemplateData:null,side:null,init:function(a){if(typeof this.innerTpl==='string'){this.innerTpl=new Ext.XTemplate(this.innerTpl)}this.side=a.rtl?'right':'left';var b=this.innerTpl;if(!this.template){this.template=new Ext.XTemplate('<tpl for=".">','<div id="{id}" '+(this.showTip?'title="{[this.getTipText(values)]}" ':'')+'class="{$cls}" style="'+this.side+':{left}px;top:{top}px;width:{width}px">'+(b?'{[this.renderInner(values)]}':'')+'</div>','</tpl>',{getTipText:function(b){return a.getSchedulingView().getFormattedDate(b.Date)+' '+(b.Text||'')},renderInner:function(c){return b.apply(c)}})}Sch.feature.AbstractTimeSpan.prototype.init.apply(this,arguments)},getElementData:function(l,p,m){var o=this.store,b=this.schedulerView,j=b.isHorizontal(),k=b.isWeekView(),i=m||o.getRange(),e=b.getTimeSpanRegion(l,null,this.expandToFitView),g=[],q,r,d,c,a;for(var f=0,n=i.length;f<n;f++){d=i[f];c=d.get('Date');if(c&&b.timeAxis.dateInAxis(c)){a=Ext.apply({},this.getTemplateData(d));a.id=this.getElementId(d);a.$cls=this.getElementCls(d,a);if(k){e=b.getTimeSpanRegion(c,c);a.left=e.x;a.top=e.y;a.width=e.right-e.left}else {var h=b.getCoordinateFromDate(c);if(j){a.left=h}else {a.top=h}}g.push(a)}}return g},getHeaderElementData:function(c){var i=this.timeAxis.getStart(),j=this.timeAxis.getEnd(),h=this.schedulerView.isHorizontal(),g=[],b,d,f,a;c=c||this.store.getRange();for(var e=0,k=c.length;e<k;e++){b=c[e];d=b.get('Date');if(d&&Sch.util.Date.betweenLesser(d,i,j)){f=this.getHeaderElementPosition(d);a=this.getTemplateData(b);a=Ext.apply({side:h?this.side:'top',cls:this.getHeaderElementCls(b,a),position:f},a);a.id=this.getHeaderElementId(b);g.push(a)}}return g}},0,0,0,0,['plugin.scheduler_lines'],0,[Sch.plugin,'Lines'],0);Ext.cmd.derive('Sch.feature.ColumnLines',Sch.plugin.Lines,{showTip:!1,timeAxisViewModel:null,renderingDoneEvent:'columnlinessynced',useLowestHeader:null,init:function(a){this.timeAxis=a.getTimeAxis();this.timeAxisViewModel=a.timeAxisViewModel;this.panel=a;this.cls+=' sch-column-line';this.store=new Ext.data.JsonStore({fields:['Date']});Sch.plugin.Lines.prototype.init.apply(this,arguments);a.on({destroy:this.onHostDestroy,scope:this});this.timeAxisViewModel.on('update',this.populate,this);this.populate()},onHostDestroy:function(){this.timeAxisViewModel.un('update',this.populate,this)},populate:function(){this.store.setData(this.getData())},getData:function(){var h=this.panel,c=[];var a=this.timeAxisViewModel;var b=this.useLowestHeader?a.getLowestHeader():a.columnLinesFor;var f=!!(a.headerConfig&&a.headerConfig[b].cellGenerator);if(f){var e=a.getColumnConfig()[b];for(var d=1,g=e.length;d<g;d++){c.push({Date:e[d].start})}}else {a.forEachInterval(b,function(b,e,d){if(d>0){c.push({Date:b,Cls:a.isMajorTick(b)?'sch-column-line-solid':''})}})}return c}},0,0,0,0,0,0,[Sch.feature,'ColumnLines'],0);Ext.cmd.derive('Sch.mixin.Zoomable',Ext.Base,{zoomLevels:[{width:40,increment:1,resolution:1,preset:'manyYears',resolutionUnit:'YEAR'},{width:80,increment:1,resolution:1,preset:'manyYears',resolutionUnit:'YEAR'},{width:30,increment:1,resolution:1,preset:'year',resolutionUnit:'MONTH'},{width:50,increment:1,resolution:1,preset:'year',resolutionUnit:'MONTH'},{width:100,increment:1,resolution:1,preset:'year',resolutionUnit:'MONTH'},{width:200,increment:1,resolution:1,preset:'year',resolutionUnit:'MONTH'},{width:100,increment:1,resolution:7,preset:'monthAndYear',resolutionUnit:'DAY'},{width:30,increment:1,resolution:1,preset:'weekDateAndMonth',resolutionUnit:'DAY'},{width:35,increment:1,resolution:1,preset:'weekAndMonth',resolutionUnit:'DAY'},{width:50,increment:1,resolution:1,preset:'weekAndMonth',resolutionUnit:'DAY'},{width:20,increment:1,resolution:1,preset:'weekAndDayLetter'},{width:50,increment:1,resolution:1,preset:'weekAndDay',resolutionUnit:'HOUR'},{width:100,increment:1,resolution:1,preset:'weekAndDay',resolutionUnit:'HOUR'},{width:50,increment:6,resolution:30,preset:'hourAndDay',resolutionUnit:'MINUTE'},{width:100,increment:6,resolution:30,preset:'hourAndDay',resolutionUnit:'MINUTE'},{width:60,increment:2,resolution:30,preset:'hourAndDay',resolutionUnit:'MINUTE'},{width:60,increment:1,resolution:30,preset:'hourAndDay',resolutionUnit:'MINUTE'},{width:30,increment:15,resolution:5,preset:'minuteAndHour'},{width:60,increment:15,resolution:5,preset:'minuteAndHour'},{width:130,increment:15,resolution:5,preset:'minuteAndHour'},{width:60,increment:5,resolution:5,preset:'minuteAndHour'},{width:100,increment:5,resolution:5,preset:'minuteAndHour'},{width:50,increment:2,resolution:1,preset:'minuteAndHour'},{width:30,increment:10,resolution:5,preset:'secondAndMinute'},{width:60,increment:10,resolution:5,preset:'secondAndMinute'},{width:130,increment:5,resolution:5,preset:'secondAndMinute'}],minZoomLevel:null,maxZoomLevel:null,visibleZoomFactor:5,zoomKeepsOriginalTimespan:!1,initializeZooming:function(){this.zoomLevels=this.zoomLevels.slice();this.setMinZoomLevel(this.minZoomLevel||0);this.setMaxZoomLevel(this.maxZoomLevel!==null?this.maxZoomLevel:this.zoomLevels.length-1)},getZoomLevelUnit:function(a){return Sch.preset.Manager.getPreset(a.preset).getBottomHeader().unit},getMilliSecondsPerPixelForZoomLevel:function(a,b){var c=Sch.util.Date;return Math.round((c.add(new Date(1,0,1),this.getZoomLevelUnit(a),a.increment)-new Date(1,0,1))/(b?a.width:a.actualWidth||a.width))},presetToZoomLevel:function(b){var a=Sch.preset.Manager.getPreset(b);return {preset:b,increment:a.getBottomHeader().increment||1,resolution:a.timeResolution.increment,resolutionUnit:a.timeResolution.unit,width:a.timeColumnWidth}},calculateCurrentZoomLevel:function(){var a=this.presetToZoomLevel(this.viewPreset),g=Number.MAX_VALUE,e=this.timeAxisViewModel,d=e.timeColumnWidth;a.width=d;a.increment=e.getBottomHeader().increment||1;for(var c=0,h=this.zoomLevels.length;c<h;c++){var b=this.zoomLevels[c];if(b.preset!==a.preset){continue}var f=Math.abs(b.width-d);if(f<g){g=f;a.actualWidth=b.actualWidth;a.width=b.width}}return a},getCurrentZoomLevelIndex:function(){var e=this.calculateCurrentZoomLevel();var b=this.getMilliSecondsPerPixelForZoomLevel(e);var c=this.zoomLevels;for(var a=0;a<c.length;a++){var d=this.getMilliSecondsPerPixelForZoomLevel(c[a]);if(d==b){return a}if(a===0&&b>d){return -0.5}if(a==c.length-1&&b<d){return c.length-1+0.5}var f=this.getMilliSecondsPerPixelForZoomLevel(c[a+1]);if(d>b&&b>f){return a+0.5}}throw new Error("Can't find current zoom level index")},setMaxZoomLevel:function(a){if(a<0||a>=this.zoomLevels.length){throw new Error('Invalid range for `setMinZoomLevel`')}this.maxZoomLevel=a},setMinZoomLevel:function(a){if(a<0||a>=this.zoomLevels.length){throw new Error('Invalid range for `setMinZoomLevel`')}this.minZoomLevel=a},zoomToLevel:function(d,c,f){d=Ext.Number.constrain(d,this.minZoomLevel,this.maxZoomLevel);f=f||{};var k=this.calculateCurrentZoomLevel();var l=this.getMilliSecondsPerPixelForZoomLevel(k);var a=this.zoomLevels[d];var m=this.getMilliSecondsPerPixelForZoomLevel(a);if(l==m&&!c){return null}var e=this;e.fireEvent('beforezoomchange',e,d);var j=this.getSchedulingView();var o=j.getOuterEl();var i=this.isVertical();var h=f.centerDate||(c?new Date((c.start.getTime()+c.end.getTime())/2):this.getViewportCenterDateCached());var n=i?j.getViewContainerHeight():o.getWidth();var b=Sch.preset.Manager.getPreset(a.preset).clone();b.name=a.preset;var g=b.getBottomHeader();c=this.calculateOptimalDateRange(h,n,a,c);b[i?'timeRowHeight':'timeColumnWidth']=f.customWidth||a.width;g.increment=a.increment;this.isZooming=!0;b.increment=a.increment;b.timeResolution.unit=Sch.util.Date.getUnitByName(a.resolutionUnit||b.timeResolution.unit||g.unit);b.timeResolution.increment=a.resolution;this.setViewPreset(b,c.start||this.getStart(),c.end||this.getEnd(),!1,{centerDate:h});a.actualWidth=this.timeAxisViewModel.getTickWidth();e.isZooming=!1;e.fireEvent('zoomchange',e,d);return d},setZoomLevel:function(){this.zoomToLevel.apply(this,arguments)},zoomToSpan:function(l,a){a=a||{};if(a.leftMargin||a.rightMargin){a.adjustStart=0;a.adjustEnd=0}Ext.applyIf(a,{leftMargin:0,rightMargin:0});if(l.start&&l.end){var b=l.start,c=l.end,n=a.adjustStart>=0&&a.adjustEnd>=0;if(n){b=Sch.util.Date.add(b,this.timeAxis.mainUnit,-a.adjustStart);c=Sch.util.Date.add(c,this.timeAxis.mainUnit,a.adjustEnd)}if(b<=c){var g=this.getSchedulingView().getTimeAxisViewModel().getAvailableWidth();var i=Math.floor(this.getCurrentZoomLevelIndex());if(i==-1){i=0}var k=this.zoomLevels;var r=c-b||1,h=this.getMilliSecondsPerPixelForZoomLevel(k[i],!0),j=r/h+a.leftMargin+a.rightMargin>g?-1:1,d=i+j;var f,e=null;while(d>=0&&d<=k.length-1){f=k[d];h=this.getMilliSecondsPerPixelForZoomLevel(f,!0);var q=r/h+a.leftMargin+a.rightMargin;if(j==-1){if(q<=g){e=d;break}}else {if(q<=g){if(i!==d-j){e=d}}else {break}}d+=j}e=e!==null?e:d-j;f=k[e];var t=Sch.preset.Manager.getPreset(f.preset).getBottomHeader().unit;if(a.leftMargin||a.rightMargin){b=new Date(b.getTime()-h*a.leftMargin);c=new Date(c.getTime()+h*a.rightMargin)}var o=Sch.util.Date.getDurationInUnit(b,c,t,!0)/f.increment;if(o===0){return}var s=Math.floor(g/o);var p=new Date((b.getTime()+c.getTime())/2);var m;if(n){m={start:b,end:c}}else {m=this.calculateOptimalDateRange(p,g,f)}return this.zoomToLevel(e,m,{customWidth:s,centerDate:p})}}return null},zoomIn:function(a){a=a||1;var b=this.getCurrentZoomLevelIndex();if(b>=this.zoomLevels.length-1){return null}return this.zoomToLevel(Math.floor(b)+a)},zoomOut:function(a){a=a||1;var b=this.getCurrentZoomLevelIndex();if(b<=0){return null}return this.zoomToLevel(Math.ceil(b)-a)},zoomInFull:function(){return this.zoomToLevel(this.maxZoomLevel)},zoomOutFull:function(){return this.zoomToLevel(this.minZoomLevel)},calculateOptimalDateRange:function(e,h,a,d){if(d){return d}var b=this.timeAxis;if(this.zoomKeepsOriginalTimespan){return {start:b.getStart(),end:b.getEnd()}}var g=Sch.util.Date;var c=this.getZoomLevelUnit(a);var f=Math.ceil(h/a.width*a.increment*this.visibleZoomFactor/2);var i=g.add(e,c,-f);var j=g.add(e,c,f);return {start:b.floorDate(i,!1,c,a.increment),end:b.ceilDate(j,!1,c,a.increment)}}},0,0,0,0,0,0,[Sch.mixin,'Zoomable'],0);Ext.cmd.derive('Sch.mixin.AbstractTimelinePanel',Ext.Base,{snapToIncrement:!1,readOnly:!1,forceFit:!1,eventResizeHandles:'both',timeAxis:null,autoAdjustTimeAxis:!0,timeAxisViewModel:null,crudManager:null,viewPreset:'weekAndDay',trackHeaderOver:!0,startDate:null,endDate:null,startTime:0,endTime:24,columnLines:!0,getDateConstraints:Ext.emptyFn,snapRelativeToEventStartDate:!1,trackMouseOver:!1,readRowHeightFromPreset:!0,eventBorderWidth:1,cachedCenterDate:null,cellBorderWidth:1,cellTopBorderWidth:1,cellBottomBorderWidth:1,renderers:null,getMode:function(){return this.mode},isHorizontal:function(){return this.getMode()==='horizontal'},isVertical:function(){return this.getMode()==='vertical'},isWeekView:function(){return this.getMode()==='weekview'},_initializeTimelinePanel:function(){if(this.mode){if(this.mode==='calendar'){this.mode='weekview'}}else {this.mode='horizontal'}this.applyViewPreset(this.viewPreset);if(this.isWeekView()){if(!this.viewPreset.headerConfig.middle.splitUnit){this._oldViewPresetArgs=[this.viewPreset];this.viewPreset=this.calendarViewPreset||'week'}}this.initializeZooming();this.on('viewchange',this.clearCenterDateCache,this);this.on('viewready',this.setupClearCenterDateCache,this);this.renderers=[];if(this.readRowHeightFromPreset){this.readRowHeightFromPreset=!this.rowHeight}if(!(this.timeAxis instanceof Sch.data.TimeAxis)){this.timeAxis=Ext.create(Ext.applyIf(this.timeAxis||{},{xclass:'Sch.data.TimeAxis',autoAdjust:this.autoAdjustTimeAxis,mode:this.isWeekView()?'week':'plain'}))}if(!this.timeAxisViewModel||!(this.timeAxisViewModel instanceof Sch.view.model.TimeAxis)){var b=Ext.apply({mode:this.mode,snapToIncrement:this.snapToIncrement,forceFit:this.forceFit,timeAxis:this.timeAxis,eventStore:this.getEventStore(),viewPreset:this.viewPreset},this.timeAxisViewModel||{});this.timeAxisViewModel=new Sch.view.model.TimeAxis(b)}this.timeAxisViewModel.on('update',this.onTimeAxisViewModelUpdate,this);this.timeAxisViewModel.refCount++;this.on('destroy',this.onPanelDestroyed,this);var a;if(this.isHorizontal()){a=['sch-horizontal']}else {if(this.isVertical()){a=['sch-vertical','sch-vertical-resource']}else {if(this.isWeekView()){a=['sch-vertical','sch-calendar']}}}this.addCls([].concat.apply(['sch-timelinepanel'],a))},applyViewPreset:function(a){var b;if(Ext.isString(a)){b=Sch.preset.Manager.getPreset(a);if(!b){throw 'You must define a valid view preset object. See Sch.preset.Manager class for reference'}}else {if(Ext.isObject(a)){var c=a.name&&Sch.preset.Manager.getPreset(a.name);if(c){b=new Sch.preset.ViewPreset(Ext.applyIf(a,c))}else {var d=a.name||'preset'+Sch.preset.Manager.getCount();Sch.preset.Manager.registerPreset(d,a);b=Sch.preset.Manager.getPreset(d)}}}this.viewPreset=b},onTimeAxisViewModelUpdate:function(){var a=this.getSchedulingView();if(a&&a.viewReady){a.refreshKeepingScroll();this.fireEvent('viewchange',this)}},onPanelDestroyed:function(){var a=this.timeAxisViewModel;a.un('update',this.onTimeAxisViewModelUpdate,this);a.refCount--;if(a.refCount<=0){a.destroy()}},getSchedulingView:function(){throw 'Abstract method call'},setReadOnly:function(a){this.getSchedulingView().setReadOnly(a)},isReadOnly:function(){return this.getSchedulingView().isReadOnly()},setupClearCenterDateCache:function(){this.mon(this.getSchedulingView().getScrollable(),'scroll',this.clearCenterDateCache,this)},getViewportCenterDateCached:function(){if(this.cachedCenterDate){return this.cachedCenterDate}return this.cachedCenterDate=this.getViewportCenterDate()},clearCenterDateCache:function(f,d,e){var c=this.isHorizontal(),a=this.viewPresetActiveScroll;var b=a&&(c?d===a.left:e==a.top);if(!b){this.cachedCenterDate=null;this.viewPresetActiveScroll=null}},switchViewPreset:function(){this.setViewPreset.apply(this,arguments)},setViewPreset:function(a,e,g,n,i){i=i||{};var c=i.centerDate,f=this.timeAxis,b=this.getSchedulingView();if(typeof a==='string'){a=Sch.preset.Manager.getPreset(a)}if(!a){throw new Error('View preset not found')}if(this.fireEvent('beforeviewchange',this,a,e,g)!==!1){this.viewPreset=a.name;var l=this.isHorizontal(),m=this.isVertical();if(!(n&&f.isConfigured)){var d={weekStartDay:this.weekStartDay!==undefined?this.weekStartDay:this.L?this.L('weekStartDay'):1,startTime:this.startTime,endTime:this.endTime};if(n){if(f.getCount()===0||e){d.start=e||new Date();d.end=g}}else {if(e){d.start=e;d.end=g;if(!c&&g){if(this.infiniteScroll&&b.cachedScrollDate&&b.cachedScrollDateIsCentered){c=b.cachedScrollDate}else {c=new Date((e.getTime()+g.getTime())/2)}}}else {d.start=f.getStart();d.end=g||f.getEnd();if(!c){if(this.infiniteScroll&&b.cachedScrollDate&&b.cachedScrollDateIsCentered){c=b.cachedScrollDate}else {c=this.getViewportCenterDateCached()}}}}f.consumeViewPreset(a);f.reconfigure(d,!0);this.timeAxisViewModel.reconfigure({viewPreset:this.viewPreset,headerConfig:a.headerConfig,columnLinesFor:a.columnLinesFor||'middle',rowHeightHorizontal:this.readRowHeightFromPreset?a.rowHeight:this.rowHeight||this.timeAxisViewModel.getViewRowHeight(),tickWidth:l?a.timeColumnWidth:a.timeRowHeight||a.timeColumnWidth||60,timeColumnWidth:a.timeColumnWidth,rowHeightVertical:a.timeRowHeight||a.timeColumnWidth||60,timeAxisColumnWidth:a.timeAxisColumnWidth,resourceColumnWidth:this.resourceColumnWidth||a.resourceColumnWidth||100})}b.setDisplayDateFormat(a.displayDateFormat);if(m){b.setColumnWidth(this.resourceColumnWidth||a.resourceColumnWidth||100,!0)}var o=b.getOuterEl();if(!i.notScroll&&o){if(c){this.cachedCenterDate=c;var h=null,j=null;if(m){j=Math.max(Math.floor(b.getCoordinateFromDate(c,!0)-b.getViewContainerHeight()/2),0);this.viewPresetActiveScroll={top:j};b.scrollVerticallyTo(j)}else {h=Math.max(Math.floor(b.getCoordinateFromDate(c,!0)-o.getWidth()/2),0);this.viewPresetActiveScroll={left:h};if(Ext.getVersion().isGreaterThan('6.2.0')){var k=b.up('timelinegrid,timelinetree').normalScrollbarScroller;k&&k.scrollTo(h)}b.headerCt.scrollTo(h);b.scrollTo(h)}}else {if(l){b.scrollHorizontallyTo(0)}else {b.scrollVerticallyTo(0)}}}}},getViewPreset:function(){return this.viewPreset},getStart:function(){return this.getStartDate()},getStartDate:function(){return this.timeAxis.getStart()},getEnd:function(){return this.getEndDate()},getEndDate:function(){return this.timeAxis.getEnd()},setTimeColumnWidth:function(b,a){this.timeAxisViewModel.setTickWidth(b,a)},getTimeColumnWidth:function(){return this.timeAxisViewModel.getTickWidth()},getRowHeight:function(){return this.timeAxisViewModel.getViewRowHeight()},shiftNext:function(a){this.suspendLayouts&&this.suspendLayouts();this.timeAxis.shiftNext(a);this.suspendLayouts&&this.resumeLayouts(!0)},shiftPrevious:function(a){this.suspendLayouts&&this.suspendLayouts();this.timeAxis.shiftPrevious(a);this.suspendLayouts&&this.resumeLayouts(!0)},goToNow:function(){this.setTimeSpan(new Date())},setTimeSpan:function(a,b){if(this.timeAxis){this.timeAxis.setTimeSpan(a,b)}},setStart:function(a){this.setStartDate(a)},setEnd:function(a){this.setEndDate(a)},setStartDate:function(a){this.setTimeSpan(a)},setEndDate:function(a){this.setTimeSpan(null,a)},getTimeAxis:function(){return this.timeAxis},scrollToDate:function(a,c){var d=this.getSchedulingView();var b=d.getCoordinateFromDate(a,!0);this.scrollToCoordinate(b,a,c,!1)},scrollToDateCentered:function(c,e){var a=this.getSchedulingView();var b=0;if(a.isHorizontal()){b=a.getBox().width/2}else {b=a.getBox().height/2}var d=Math.round(a.getCoordinateFromDate(c,!0)-b);this.scrollToCoordinate(d,c,e,!0)},scrollToCoordinate:function(d,a,b,h){var c=this.getSchedulingView();var i=this;if(d<0&&!c.isWeekView()){if(this.infiniteScroll){c.shiftToDate(a,h)}else {var e=(this.timeAxis.getEnd()-this.timeAxis.getStart())/2;var f=new Date(a.getTime()-e);var g=new Date(a.getTime()+e);if(f-this.getStart()!==0&&g-this.getEnd()!==0){this.setTimeSpan(f,g);if(h){i.scrollToDateCentered(a,b)}else {i.scrollToDate(a,b)}}}return}if(this.isHorizontal()){c.scrollHorizontallyTo(d,b)}else {c.scrollVerticallyTo(d,b)}},getViewportCenterDate:function(){return this.getSchedulingView().getViewportCenterDate()},addCls:function(){throw 'Abstract method call'},removeCls:function(){throw 'Abstract method call'},registerRenderer:function(b,a){this.renderers.push({fn:b,scope:a})},deregisterRenderer:function(a,b){Ext.each(this.renderers,function(c,d){if(a===c){Ext.Array.removeAt(this.renderers,d);return !1}})},getCrudManager:function(){return this.crudManager},setCrudManager:function(a){this.crudManager=a}},0,0,0,0,0,[[Sch.mixin.Zoomable.prototype.mixinId||Sch.mixin.Zoomable.$className,Sch.mixin.Zoomable]],[Sch.mixin,'AbstractTimelinePanel'],0);Ext.cmd.derive('Sch.view.HorizontalTimeAxis',Ext.util.Observable,{trackHeaderOver:!0,compactCellWidthThreshold:15,baseCls:'sch-column-header',tableCls:'sch-header-row',headerHtmlRowTpl:'<table border="0" cellspacing="0" cellpadding="0" style="width: {totalWidth}px; {tstyle}" class="{{tableCls}} sch-header-row-{position} {cls}"><thead><tr style="height:{rowHeight}px"><tpl for="cells"><td class="{{baseCls}} {headerCls} sch-header-cell-{align}" data-date="{[fm.date(values.start, \'Ymd_His\')]}" style="position : static; text-align: {align}; width: {width}px; {style}" tabIndex="0"headerPosition="{parent.position}" headerIndex="{[xindex-1]}"><div class="sch-simple-timeheader">{header}</div></td></tpl></tr></thead></table>',model:null,hoverCls:'',containerEl:null,height:null,constructor:function(d){var a=this;var c=!!Ext.versions.touch;Ext.apply(this,d);Ext.util.Observable.prototype.constructor.apply(this,arguments);a.model.on('update',a.onModelUpdate,this,{priority:5});a.containerEl=Ext.get(a.containerEl);if(!(a.headerHtmlRowTpl instanceof Ext.Template)){a.headerHtmlRowTpl=a.headerHtmlRowTpl.replace('{{baseCls}}',this.baseCls).replace('{{tableCls}}',this.tableCls);a.headerHtmlRowTpl=new Ext.XTemplate(a.headerHtmlRowTpl)}if(a.trackHeaderOver&&a.hoverCls){a.containerEl.on({mousemove:a.highlightCell,delegate:'.sch-column-header',scope:a});a.containerEl.on({mouseleave:a.clearHighlight,scope:a})}var b={scope:this,delegate:'.sch-column-header'};if(c){b.tap=this.onElClick('tap');b.doubletap=this.onElClick('doubletap')}else {b.click=this.onElClick('click');b.dblclick=this.onElClick('dblclick');b.contextmenu=this.onElClick('contextmenu')}a._listenerCfg=b;if(a.containerEl){a.containerEl.on(b)}},destroy:function(){var a=this;if(a.containerEl){a.containerEl.un(a._listenerCfg);a.containerEl.un({mousemove:a.highlightCell,delegate:'.sch-simple-timeheader',scope:a});a.containerEl.un({mouseleave:a.clearHighlight,scope:a})}a.model.un('update',a.onModelUpdate,this,{priority:5})},onModelUpdate:function(){this.height=null;this.render()},getHTML:function(){var a=this.model.getColumnConfig();var c=this.model.getTotalWidth();var e=Ext.Object.getKeys(a).length;var d=this.height&&Math.floor(this.height/e);var b='';if(a.top){this.embedCellWidths(a.top);b+=this.headerHtmlRowTpl.apply({totalWidth:c,cells:a.top,position:'top',tstyle:'border-top : 0;',rowHeight:d})}if(a.middle){this.embedCellWidths(a.middle);b+=this.headerHtmlRowTpl.apply({totalWidth:c,cells:a.middle,position:'middle',tstyle:a.top?'':'border-top : 0;',rowHeight:d,cls:!a.bottom&&this.model.getTickWidth()<=this.compactCellWidthThreshold?'sch-header-row-compact':''})}if(a.bottom){this.embedCellWidths(a.bottom);b+=this.headerHtmlRowTpl.apply({totalWidth:c,cells:a.bottom,position:'bottom',rowHeight:d,cls:this.model.getTickWidth()<=this.compactCellWidthThreshold?'sch-header-row-compact':''})}return b},render:function(){if(!this.containerEl){return}var e=this.containerEl,a=e.dom,d=a.style.display,c=this.model.getColumnConfig(),b=a.parentNode;a.style.display='none';b.removeChild(a);Ext.fly(a).select('table').remove();a.insertAdjacentHTML('afterbegin',this.getHTML());if(!c.top&&!c.middle){this.containerEl.addCls('sch-header-single-row')}else {this.containerEl.removeCls('sch-header-single-row')}b&&b.appendChild(a);a.style.display=d;this.fireEvent('refresh',this)},embedCellWidths:function(c){for(var b=0;b<c.length;b++){var a=c[b];var d=this.model.getDistanceBetweenDates(a.start,a.end);if(d){a.width=d}else {a.width=0;a.style='display: none'}}},onElClick:function(a){return function(d,b){b=d.delegatedTarget||b;var e=Ext.fly(b).getAttribute('headerPosition'),f=Ext.fly(b).getAttribute('headerIndex'),c=this.model.getColumnConfig()[e][f];this.fireEvent('timeheader'+a,this,c.start,c.end,d)}},highlightCell:function(c,b){var a=this;if(b!==a.highlightedCell){a.clearHighlight();a.highlightedCell=b;Ext.fly(b).addCls(a.hoverCls)}},clearHighlight:function(){var a=this,b=a.highlightedCell;if(b){Ext.fly(b).removeCls(a.hoverCls);delete a.highlightedCell}}},1,0,0,0,0,0,[Sch.view,'HorizontalTimeAxis'],0);Ext.cmd.derive('Sch.column.timeAxis.Horizontal',Ext.grid.column.Column,{draggable:!1,groupable:!1,hideable:!1,sortable:!1,resizable:!1,menuDisabled:!0,cls:'sch-simple-timeaxis',tdCls:'sch-timetd',enableLocking:!1,locked:!1,lockable:!1,cellFocusable:!1,timeAxisViewModel:null,headerView:null,hoverCls:'',ownHoverCls:'sch-column-header-over',trackHeaderOver:!0,compactCellWidthThreshold:Ext.theme&&Ext.theme.name.toLowerCase()==='classic'?15:35,afterRender:function(){var a=this;var b=a.titleEl.createChild({cls:'sch-horizontaltimeaxis-ct'});a.headerView=new Sch.view.HorizontalTimeAxis({model:a.timeAxisViewModel,containerEl:b,hoverCls:a.ownHoverCls,trackHeaderOver:a.trackHeaderOver,compactCellWidthThreshold:a.compactCellWidthThreshold});a.headerView.on('refresh',a.onTimeAxisViewRefresh,a);a.ownerCt.on('afterlayout',function(){if(!a.ownerCt){return}a.mon(a.ownerCt,'resize',a.onHeaderContainerResize,a);if(this.getWidth()>0){a.headerView.height=a.getHeight();if(a.getAvailableWidthForSchedule()===a.timeAxisViewModel.getAvailableWidth()){a.headerView.render()}else {a.timeAxisViewModel.update(a.getAvailableWidthForSchedule())}a.setWidth(a.timeAxisViewModel.getTotalWidth())}},null,{single:!0});this.enableBubble('timeheaderclick','timeheaderdblclick','timeheadercontextmenu','horizontaltimeaxiscolumnrender');a.relayEvents(a.headerView,['timeheaderclick','timeheaderdblclick','timeheadercontextmenu']);Ext.grid.column.Column.prototype.afterRender.apply(this,arguments);a.focusable=!1;this.fireEvent('horizontaltimeaxiscolumnrender',this)},initRenderData:function(){var a=this;a.renderData.headerCls=a.renderData.headerCls||a.headerCls;return Ext.grid.column.Column.prototype.initRenderData.apply(this,arguments)},destroy:function(){if(this.headerView){this.headerView.destroy();this.headerView=null}Ext.grid.column.Column.prototype.destroy.apply(this,arguments)},onTimeAxisViewRefresh:function(){this.headerView.un('refresh',this.onTimeAxisViewRefresh,this);this.setWidth(this.timeAxisViewModel.getTotalWidth());this.headerView.on('refresh',this.onTimeAxisViewRefresh,this)},getAvailableWidthForSchedule:function(){if(!this.ownerCt){return 0}var c=this.ownerCt.isVisible(!0)?this.ownerCt.getWidth():this.ownerCt.lastBox&&this.ownerCt.lastBox.width||0,d=this.ownerCt.items,a;for(var b=1;b<d.length;b++){a=d.get(b);if(!a.hidden){c-=a.isVisible(!0)?a.getWidth():a.lastBox&&a.lastBox.width||0}}return c-Ext.getScrollbarSize().width-1},onResize:function(){Ext.grid.column.Column.prototype.onResize.apply(this,arguments);this.timeAxisViewModel.setAvailableWidth(this.getAvailableWidthForSchedule())},onHeaderContainerResize:function(d,e,a,c,b){this.timeAxisViewModel.setAvailableWidth(this.getAvailableWidthForSchedule());if(a!==b){this.headerView.height=a;this.headerView.render()}},refresh:function(){if(this.rendered){this.timeAxisViewModel.update(null,!0);this.headerView.render()}}},0,['timeaxiscolumn'],['component','box','container','headercontainer','gridcolumn','timeaxiscolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'timeaxiscolumn':!0},['widget.timeaxiscolumn'],0,[Sch.column.timeAxis,'Horizontal'],0);Ext.cmd.derive('Sch.plugin.CurrentTimeLine',Sch.plugin.Lines,{updateInterval:60000,showHeaderElements:!0,autoUpdate:!0,expandToFitView:!0,timer:null,init:function(c){if(Ext.getVersion('touch')){this.showHeaderElements=!1}var a=new Ext.data.JsonStore({fields:['Date','Cls','Text'],data:[{Date:new Date(),Cls:'sch-todayLine',Text:this.L('tooltipText')}]});var b=a.first();if(this.autoUpdate){this.timer=setInterval(function(){b.set('Date',new Date())},this.updateInterval)}this.store=a;Sch.plugin.Lines.prototype.init.apply(this,arguments)},destroy:function(){if(this.timer){clearInterval(this.timer);this.timer=null}if(this.store.autoDestroy){this.store.destroy()}Sch.plugin.Lines.prototype.destroy.apply(this,arguments)}},0,0,0,0,['plugin.scheduler_currenttimeline'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.plugin,'CurrentTimeLine'],0);Ext.cmd.derive('Sch.layout.TableLayout',Ext.view.TableLayout,{beginLayout:function(a){var b=this,g=b.owner,e=g.ownerGrid,c=g.lockingPartner,d=c&&c.grid.isVisible()&&!c.grid.collapsed,f=a.context;a.doSyncRowHeights=d&&(e.syncRowHeight||e.syncRowHeightOnNextLayout);if(!b.columnFlusherId){b.columnFlusherId=b.id+'-columns';b.rowHeightFlusherId=b.id+'-rows'}if(b.owner.bufferedRenderer){b.owner.bufferedRenderer.beforeTableLayout(a)}b.superclass.superclass.beginLayout.apply(this,[a]);if(d&&c.componentLayout.isRunning()){if(!a.lockingPartnerContext){(a.lockingPartnerContext=f.getCmp(c)).lockingPartnerContext=a}if(a.doSyncRowHeights){a.rowHeightSynchronizer=b.owner.syncRowHeightBegin()}}(a.headerContext=f.getCmp(b.headerCt)).viewContext=a}},0,0,0,0,['layout.timeline_tablelayout'],0,[Sch.layout,'TableLayout'],0);Ext.cmd.derive('Sch.mixin.PartnerTimelinePanel',Ext.Mixin,{setupPartnerTimelinePanel:function(e){var b=this.partnerTimelinePanel;var c=b.lockedGrid;var a=this.lockedGrid;c.mon(a,'resize',this.onLockedGridResize,c);a.mon(c,'resize',this.onLockedGridResize,a);var d=b.isVisible()?b.lockedGrid.getWidth():b.lockedGrid.width;if(c.getCollapsed()){this.mon(c,'viewready',function(b){a.setWidth(b.getWidth())})}else {a.setWidth(d)}this.on('afterlayout',function(){if(c.getCollapsed()){a.collapse()}else {a.expand();a.setWidth(d)}},this,{single:!0});c.on({collapse:this.onPartnerCollapseExpand,expand:this.onPartnerCollapseExpand,scope:this});a.on({collapse:this.onPartnerCollapseExpand,expand:this.onPartnerCollapseExpand,scope:b});this.setupScrollSync();b.mon(this,'beforezoomchange',this.onBeforeZoomChange,this);b.mon(this,'viewchange',this.onViewChange,this);this.mon(b,'beforezoomchange',this.onBeforeZoomChange,this);this.mon(b,'viewchange',this.onViewChange,this)},onLockedGridResize:function(b,a){this.setWidth(a)},onPartnerCollapseExpand:function(a){if(a.getCollapsed()){this.lockedGrid.collapse()}else {this.lockedGrid.expand()}},setupScrollSync:function(){var c=this.partnerTimelinePanel.getSchedulingView(),b=c.getScrollable(),d=this.getSchedulingView(),a=d.getScrollable(),e;function onSyncScrollStart(d){var c=d===a?a:b,e=d===a?b:a;c.component.mun(c,'scrollstart',onSyncScrollStart);e.component.mun(e,'scrollstart',onSyncScrollStart);c.component.mon(c,'scroll',onSyncScroll);c.component.mon(c,'scrollend',onSyncScrollEnd)}function onSyncScroll(c,e){var f=c===a?a:b,d=c===a?b:a;d.component.headerCt.getScrollable().scrollTo(e);d.scrollTo(e)}function onSyncScrollEnd(d){var c=d===a?a:b,e=d===a?b:a;c.component.mun(c,'scroll',onSyncScroll);c.component.mun(c,'scrollend',onSyncScrollEnd);c.component.mon(c,'scrollstart',onSyncScrollStart);e.component.mon(e,'scrollstart',onSyncScrollStart)}a.component.mon(a,'scrollstart',onSyncScrollStart);b.component.mon(b,'scrollstart',onSyncScrollStart)},onViewChange:function(a){if(a===this){this.partnerTimelinePanel.viewPreset=this.viewPreset=this.timeAxisViewModel.viewPreset}},onBeforeZoomChange:function(){var b=this.partnerTimelinePanel;var a=b.getSchedulingView().getScrollable(),c=a.suspendPartnerSync;a.suspendPartnerSync=Ext.emptyFn;a.on('scrollend',function(){a.suspendPartnerSync=c},null,{single:!0})}},0,0,0,0,0,0,[Sch.mixin,'PartnerTimelinePanel'],0);Ext.cmd.derive('Sch.mixin.TimelinePanel',Sch.mixin.AbstractTimelinePanel,{destroyStores:!1,bufferCoef:5,bufferThreshold:0.2,infiniteScroll:!1,showCrudManagerMask:!0,highlightWeekends:!1,showTodayLine:!1,calendar:null,waitingForAutoTimeSpan:!1,columnLinesFeature:null,renderWaitListener:null,schedulePinchThreshold:30,pinchStartDistanceX:null,pinchStartDistanceY:null,pinchDistanceX:null,pinchDistanceY:null,horizontalColumns:null,forceDefineTimeSpanByStore:!1,workingTimePlugin:null,split:!0,refreshSuspensionCount:0,tipCfg:{cls:'sch-tip',showDelay:400,hideDelay:0,constrain:!0,autoHide:!0,anchor:'t'},inheritables:function(){return {columnLines:!0,enableLocking:!0,lockable:!0,stateEvents:['viewchange'],syncRowHeight:!1,cellTopBorderWidth:0,layout:'border',initComponent:function(){if(this.partnerTimelinePanel){if(typeof this.partnerTimelinePanel==='string'){this.partnerTimelinePanel=Ext.getCmp(this.partnerTimelinePanel)}this.timeAxisViewModel=this.partnerTimelinePanel.timeAxisViewModel;this.timeAxis=this.partnerTimelinePanel.getTimeAxis();this.startDate=this.timeAxis.getStart();this.endDate=this.timeAxis.getEnd()}this._initializeTimelinePanel();this.configureChildGrids();this.forceFit=!1;this.configureColumns(this.columns);if(Ext.getVersion().equals('6.0.2.437')){this.viewConfig=Ext.apply(this.viewConfig||{},{componentLayout:'timeline_tablelayout'})}var g=this.normalViewConfig=this.normalViewConfig||{};var f=this.getId();Ext.apply(this.normalViewConfig,{id:f+'-timelineview',eventPrefix:this.autoGenId?null:f,timeAxisViewModel:this.timeAxisViewModel,eventBorderWidth:this.eventBorderWidth,timeAxis:this.timeAxis,readOnly:this.readOnly,mode:this.mode,rtl:this.rtl,cellBorderWidth:this.cellBorderWidth,cellTopBorderWidth:this.cellTopBorderWidth,cellBottomBorderWidth:this.cellBottomBorderWidth,infiniteScroll:this.infiniteScroll,bufferCoef:this.bufferCoef,bufferThreshold:this.bufferThreshold});Ext.Array.each(['eventRendererScope','eventRenderer','dndValidatorFn','resizeValidatorFn','createValidatorFn','tooltipTpl','validatorFnScope','eventResizeHandles','enableEventDragDrop','enableDragCreation','resizeConfig','createConfig','tipCfg','getDateConstraints'],function(a){if(a in this){g[a]=this[a]}},this);this.callParent(arguments);this.lockedGrid.view.addCls('sch-lockedview');if(this.rtl){this.lockedGrid.view.addCls('sch-locked-column-fixer');this.addCls('sch-rtl')}else {this.addCls('sch-ltr')}var d=this.plugins=[].concat(this.plugins||[]);if(this.highlightWeekends){var a=this.getCalendar();a=a&&Ext.StoreMgr.lookup(a)||new Sch.data.Calendar();this.workingTimePlugin=Ext.create('Sch.plugin.NonWorkingTime',{calendar:a});this.timeAxisViewModel.setCalendar(a);d.push(this.workingTimePlugin);this.addCls('sch-timelinepanel-highlightweekends')}if(this.showTodayLine){this.todayLinePlugin=new Sch.plugin.CurrentTimeLine();d.push(this.todayLinePlugin)}this.patchNavigationModel(this);if(Ext.supports.Touch){this.timeAxisViewModel.on('update',this.refreshHeaderContainerScrollable,this)}this.setViewPreset(this.viewPreset,this.startDate||this.timeAxis.getStart(),this.endDate||this.timeAxis.getEnd(),!0);if(!this.startDate){var e=this.crudManager;if(e&&!e.loaded){this.bindAutoTimeSpanListeners()}else {var b=this.getTimeSpanDefiningStore();if(b.isTreeStore?b.getRoot().childNodes.length:b.getCount()){this.applyStartEndDatesFromStore()}else {if(b.isLoading()||this.forceDefineTimeSpanByStore){this.bindAutoTimeSpanListeners()}}}}var c=this.columnLines;if(c){this.columnLinesFeature=new Sch.feature.ColumnLines(Ext.isObject(c)?c:undefined);this.columnLinesFeature.init(this);this.columnLines=!0}this.relayEvents(this.getSchedulingView(),['beforetooltipshow','scheduleclick','scheduledblclick','schedulecontextmenu','schedulepinch','schedulepinchstart','schedulepinchend']);this.on('zoomchange',function(){this.normalGrid.scrollTask.cancel()});if(this.crudManager){if(!this.crudManager.autoSync&&this.showCrudManagerMask){this.mon(this.crudManager,{beforesend:this.beforeCrudOperationStart,synccanceled:this.onCrudOperationComplete,loadcanceled:this.onCrudOperationComplete,load:this.onCrudOperationComplete,sync:this.onCrudOperationComplete,requestfail:this.onCrudOperationComplete,scope:this});if(this.crudManager.isLoading()){this.beforeCrudOperationStart(this.crudManager,null,'load')}}this.mon(this.crudManager,{beforeloadapply:this.onCrudBeforeLoad,load:this.onCrudLoad,scope:this})}this.afterInitComponent()},refreshHeaderContainerScrollable:function(){var a=this.getSchedulingView().headerCt.getScrollable();if(!a){return}if(Ext.getVersion().isLessThan('6.0.1')){var b=a.isConfiguring;a.isConfiguring=!0;a.refresh();a.refreshAxes();a.isConfiguring=b}else {a.refresh()}},getState:function(){var a=this,b=a.callParent(arguments);Ext.apply(b,{viewPreset:a.viewPreset,startDate:a.getStart(),endDate:a.getEnd(),zoomMinLevel:a.zoomMinLevel,zoomMaxLevel:a.zoomMaxLevel,currentZoomLevel:a.currentZoomLevel});return b},applyState:function(a){var b=this;b.callParent(arguments);if(a&&a.viewPreset){b.setViewPreset(a.viewPreset,a.startDate,a.endDate)}if(a&&a.currentZoomLevel){b.zoomToLevel(a.currentZoomLevel)}},setTimeSpan:function(){this.callParent(arguments);if(this.waitingForAutoTimeSpan){this.unbindAutoTimeSpanListeners(!1);this.getView().refresh()}if(!this.normalGrid.getView().viewReady){this.getView().refresh()}},onBoxReady:function(){var a=this;a.callParent(arguments);if(a.partnerTimelinePanel){if(a.partnerTimelinePanel.rendered){a.setupPartnerTimelinePanel(a.partnerTimelinePanel)}else {a.partnerTimelinePanel.on('boxready',a.setupPartnerTimelinePanel,a)}}a.normalGrid.on({collapse:a.onNormalGridCollapse,expand:a.onNormalGridExpand,scope:a});a.lockedGrid.on({collapse:a.onLockedGridCollapse,expand:a.onLockedGridExpand,scope:a});a.lockedGrid.on({itemdblclick:a.onLockedGridItemDblClick,scope:a});if(Ext.supports.Touch){this.getSchedulingView().on({schedulepinchstart:this.onSchedulePinchStart,schedulepinch:this.onSchedulePinch,schedulepinchend:this.onSchedulePinchEnd,scope:this})}}}},scrollToDate:function(b,d){var a=this.getSchedulingView();if(a.isWeekView()){var c=a.weekview.getColumnsBy(function(a){return a.start<=b&&a.end>b})[0];if(c){a.scrollHorizontallyTo(c.getLocalX());a.scrollVerticallyTo(a.getCoordinateFromDate(b,!0))}}else {return Sch.mixin.AbstractTimelinePanel.prototype.scrollToDate.apply(this,arguments)}},bindAutoTimeSpanListeners:function(){var a=this.getTimeSpanDefiningStore();this.waitingForAutoTimeSpan=!0;this.suspendRefresh();this.mon(a,'load',this.applyStartEndDatesFromStore,this);if(a.isTreeStore){this.mon(a,'rootchange',this.applyStartEndDatesFromStore,this);this.mon(a,'nodeappend',this.applyStartEndDatesAfterTreeAppend,this)}else {this.mon(a,'add',this.applyStartEndDatesFromStore,this)}},getTimeSpanDefiningStore:function(){throw 'Abstract method called'},unbindAutoTimeSpanListeners:function(b){this.waitingForAutoTimeSpan=!1;var a=this.getTimeSpanDefiningStore();this.resumeRefresh(b);a.un('load',this.applyStartEndDatesFromStore,this);if(a.isTreeStore){a.un('rootchange',this.applyStartEndDatesFromStore,this);a.un('nodeappend',this.applyStartEndDatesAfterTreeAppend,this)}else {a.un('add',this.applyStartEndDatesFromStore,this)}},applyStartEndDatesAfterTreeAppend:function(){var a=this.getTimeSpanDefiningStore();if(!a.isSettingRoot&&!a.__loading){this.applyStartEndDatesFromStore()}},applyStartEndDatesFromStore:function(){var b=this.getTimeSpanDefiningStore();var a=b.getTotalTimeSpan();if(a.end&&a.start&&a.end-a.start===0){a.start=Sch.util.Date.add(a.start,this.timeAxis.mainUnit,-1);a.end=Sch.util.Date.add(a.end,this.timeAxis.mainUnit,1)}this.setTimeSpan(a.start||new Date(),a.end)},onLockedGridItemDblClick:function(d,a,e,b,c){if(this.isVertical()&&a){this.fireEvent('timeheaderdblclick',this,a.get('start'),a.get('end'),b,c)}},getSchedulingView:function(){return this.normalGrid&&this.normalGrid.view},getHorizontalTimeAxisColumn:function(){return this.getSchedulingView().getHorizontalTimeAxisColumn()},configureColumns:function(a){var b=[];var c=[];a=a||[];if(a.items){this.columns=Ext.apply({},this.columns);a=this.columns.items=a.items.slice()}else {a=this.columns=a.slice()}Ext.Array.each(a,function(d){if(d.position==='right'||d.locked===!1){if(!Ext.isNumber(d.width)){Ext.Error.raise('"Right" columns must have a fixed width')}d.locked=!1;c.push(d)}else {d.locked=!0;b.push(d)}d.lockable=!1});if(a.length===0){this.split=!1}Ext.Array.erase(a,0,a.length);Ext.Array.insert(a,0,b.concat({xtype:'timeaxiscolumn',timeAxisViewModel:this.timeAxisViewModel,trackHeaderOver:this.trackHeaderOver,renderer:this.mainRenderer,variableRowHeight:this.variableRowHeight,scope:this}).concat(c));this.horizontalColumns=a.slice()},mainRenderer:function(k,a,h,j,d){var c=this.renderers,i=this.isVertical()?this.getResourceStore().getAt(d):h,e='&nbsp;';a.rowHeight=null;for(var b=0;b<c.length;b++){e+=c[b].fn.call(c[b].scope||this,k,a,i,j,d)||''}if(this.variableRowHeight){var f=this.getSchedulingView();var g=this.getRowHeight();a.style='height:'+((a.rowHeight||g)-f.cellTopBorderWidth-f.cellBottomBorderWidth)+'px'}return e},onNormalGridCollapse:function(){var a=this;if(!a.normalGrid.reExpander){a.normalGrid.reExpander=a.normalGrid.placeholder}if(!a.lockedGrid.rendered){a.lockedGrid.on('render',a.onNormalGridCollapse,a,{delay:1})}else {a.lockedGrid.savedWidth=a.lockedGrid.getWidth();if(a.lockedGrid.collapsed){a.lockedGrid.expand()}a.lockedGrid.setWidth(a.getWidth()-a.normalGrid.getPlaceholder().getWidth());a.addCls('sch-normalgrid-collapsed')}},onNormalGridExpand:function(){this.removeCls('sch-normalgrid-collapsed')},onLockedGridCollapse:function(){var a=this;if(a.normalGrid.collapsed){a.normalGrid.expand()}},onLockedGridExpand:function(){if(this.lockedGrid.savedWidth){this.lockedGrid.setWidth(this.lockedGrid.savedWidth)}},beforeCrudOperationStart:function(b,c,a){if(this.rendered){this.setLoading({msg:a==='load'?this.L('loadingText'):this.L('savingText')})}else {Ext.destroy(this.renderWaitListener);this.renderWaitListener=this.on('render',Ext.Function.bind(this.beforeCrudOperationStart,this,Array.prototype.slice.apply(arguments)),this,{delay:1,destroyable:!0})}},onCrudBeforeLoad:function(){this.suspendRefresh()},onCrudLoad:function(){this.resumeRefresh(!0)},onCrudOperationComplete:function(){Ext.destroy(this.renderWaitListener);this.setLoading(!1)},onSchedulePinchStart:function(b,a){this.pinchStartDistanceX=Math.abs(a.touches[0].pageX-a.touches[1].pageX);this.pinchStartDistanceY=Math.abs(a.touches[0].pageY-a.touches[1].pageY)},onSchedulePinch:function(b,a){this.pinchDistanceX=Math.abs(a.touches[0].pageX-a.touches[1].pageX);this.pinchDistanceY=Math.abs(a.touches[0].pageY-a.touches[1].pageY)},onSchedulePinchEnd:function(d){var a=this.pinchDistanceX;var b=this.pinchDistanceY;var e=this.isHorizontal();if(Math.abs(a-this.pinchStartDistanceX)>this.schedulePinchThreshold){var c=Math.abs(a/this.pinchStartDistanceX);if(e){c>1?this.zoomIn():this.zoomOut()}else {this.timeAxisViewModel.setViewColumnWidth(c*this.timeAxisViewModel.resourceColumnWidth)}}if(Math.abs(b-this.pinchStartDistanceY)>this.schedulePinchThreshold){var f=Math.abs(b/this.pinchStartDistanceY);d.setRowHeight(d.getRowHeight()*f)}this.pinchStartDistanceX=this.pinchStartDistanceY=this.pinchDistanceX=this.pinchDistanceY=null},patchNavigationModel:function(c){c.getView().getNavigationModel().focusItem=function(a){a.addCls(this.focusCls);if((Ext.isIE||Ext.isEdge)&&!a.hasCls('sch-timetd')||!(Ext.isIE||Ext.isEdge)&&c.isHorizontal()){a.focus()}};var a=c.lockedGrid.getView();var b=c.normalGrid.getView();a.on('rowclick',function(e,d,f,a){if(b.lastFocused){b.lastFocused.rowIdx=a;b.lastFocused.record=d}else {if(Ext.isIE){b.lastFocused=this.lastFocused}}});b.on('rowclick',function(e,d,f,b){if(a.lastFocused){a.lastFocused.rowIdx=b;a.lastFocused.record=d}else {if(Ext.isIE){a.lastFocused=this.lastFocused}}})},configureChildGrids:function(){var a=this;a.lockedGridConfig=Ext.apply({},a.lockedGridConfig||{});a.normalGridConfig=Ext.apply({},a.schedulerConfig||a.normalGridConfig||{});var b=a.lockedGridConfig,c=a.normalGridConfig;if(a.lockedXType){b.xtype=a.lockedXType}if(a.normalXType){c.xtype=a.normalXType}Ext.applyIf(b,{useArrows:!0,animCollapse:!1,collapseDirection:'left',trackMouseOver:!1});Ext.applyIf(c,{viewType:a.viewType,enableColumnMove:!1,enableColumnResize:!1,enableColumnHide:!1,trackMouseOver:!1,collapseDirection:'right',collapseMode:'placeholder',animCollapse:!1});if(a.isVertical()){b.store=c.store=a.timeAxis}if(b.width){a.syncLockedWidth=Ext.emptyFn;b.scroll=Ext.supports.Touch?'both':'horizontal';b.scrollerOwner=!0}},afterInitComponent:function(){var a=this;var b=a.lockedGrid.getView();var e=a.normalGrid.getView();var f=Ext.data.TreeStore&&a.store instanceof Ext.data.TreeStore;if(a.normalGrid.collapsed){a.normalGrid.collapsed=!1;e.on('boxready',function(){a.normalGrid.collapse()},a,{delay:10})}if(a.lockedGrid.collapsed){a.lockedGrid.collapsed=!1;b.on('boxready',function(){a.lockedGrid.collapse()},a,{delay:10});if(b.bufferedRenderer){b.bufferedRenderer.disabled=!0}}if(f){this.setupLockableFilterableTree()}var c=this.getSplitter();if(c){c.addCls('sch-timelinepanel-splitter');c.setVisible(this.isHorizontal())}var d=function(a,b){if(!('TouchEvent' in window&&(a.parentEvent&&a.parentEvent.type.match(/touch/i)))){Ext.getBody().un('mousemove',d,this);this.setTouchEnhancementsEnabled(!1)}};Ext.getBody().on('mousemove',d,this);this.setTouchEnhancementsEnabled(!0);if(Ext.versions.extjs.isGreaterThan('6.2.0')){this.normalGrid.on('cellclick',this.onNormalGridCellClick,this)}},onNormalGridCellClick:function(g,c,e,f,h,a,d){if(c.className.match('sch-timetd')){var b=d.ctrlKey&&this.getSelectionModel().isSelected(a);if(b){this.getSelectionModel().deselect(a)}else {this.getSelectionModel().select(a)}}},getSplitter:function(){return this.child('splitter')},setTouchEnhancementsEnabled:function(a){if(a){this.addCls('sch-touch-only')}else {this.removeCls('sch-touch-only')}},setupLockableFilterableTree:function(){var c=this;var a=c.lockedGrid.getView();var b=Sch.mixin.FilterableTreeView.prototype;a.initTreeFiltering=b.initTreeFiltering;a.onFilterChangeStart=b.onFilterChangeStart;a.onFilterChangeEnd=b.onFilterChangeEnd;a.onFilterCleared=b.onFilterCleared;a.onFilterSet=b.onFilterSet;a.initTreeFiltering()},showMenuBy:function(f,e){var b=this.getMenu(),a=b.down('#unlockItem'),c=b.down('#lockItem'),d=a.prev();d.hide();a.hide();c.hide()},zoomToFit:function(a){a=Ext.apply({adjustStart:1,adjustEnd:1},a);var c=this.getEventStore();var b=this.getEventStore().getTotalTimeSpan();if(this.zoomToSpan(b,a)===null){this.getSchedulingView().fitColumns()}},refreshViews:function(f){if(!this.rendered){return}var c=!1;var d=function(){c=!0};var b=this.normalGrid.getView();var a=this.lockedGrid.getView(),e={left:a.getScrollX(),top:b.getVerticalScroll()};b.on('refresh',d);a.refreshView();b.un('refresh',d);if(f!==!1){!c&&this.getSchedulingView().refreshKeepingScroll();a.setScrollX(e.left);a.setScrollY(e.top)}else {if(!c){this.getSchedulingView().refreshView()}}},getCalendar:function(){return this.calendar},disableWeekendHighlighting:function(a){this.workingTimePlugin.setDisabled(a);if(a){this.removeCls('sch-timelinepanel-highlightweekends')}else {this.addCls('sch-timelinepanel-highlightweekends')}},preventRefresh:function(){return !1},suspendRefresh:function(){var a=this;if(a.refreshSuspensionCount++===0){a.getView().on('beforerefresh',a.preventRefresh,a);a.normalGrid.view.blockRefresh=!0;a.lockedGrid.view.blockRefresh=!0}},resumeRefresh:function(b){var a=this;if(a.refreshSuspensionCount&&!--a.refreshSuspensionCount){a.getView().un('beforerefresh',a.preventRefresh,a);a.normalGrid.view.blockRefresh=!1;a.lockedGrid.view.blockRefresh=!1;if(b){a.getView().refresh()}}}},0,0,0,0,0,[[Sch.mixin.Zoomable.prototype.mixinId||Sch.mixin.Zoomable.$className,Sch.mixin.Zoomable],[Sch.mixin.PartnerTimelinePanel.prototype.mixinId||Sch.mixin.PartnerTimelinePanel.$className,Sch.mixin.PartnerTimelinePanel]],[Sch.mixin,'TimelinePanel'],function(){var a='6.0.0';Ext.apply(Sch,{VERSION:'5.0.3'});if(Ext.versions.extjs.isLessThan(a)){var b=console;b&&b.log('The Ext JS version you are using needs to be updated to at least '+a)}if(Ext.getVersion().isGreaterThan('6.0.2')){Ext.define(null,{override:'Ext.grid.plugin.BufferedRenderer',doRefreshView:function(){if(this.view.ownerGrid.is('timelinegrid,timelinetree')){var a=Ext.Error.ignore;Ext.Error.ignore=!0;this.callParent(arguments);Ext.Error.ignore=a}else {this.callParent(arguments)}}})}});Ext.cmd.derive('Sch.panel.TimelineGridPanel',Ext.grid.Panel,{subGridXType:'gridpanel',isTimelineGridPanel:!0,initComponent:function(){Ext.grid.Panel.prototype.initComponent.apply(this,arguments);this.getSchedulingView()._initializeTimelineView()}},0,['timelinegrid'],['component','box','container','panel','tablepanel','gridpanel','grid','timelinegrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'timelinegrid':!0},['widget.timelinegrid'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable],[Sch.mixin.TimelinePanel.prototype.mixinId||Sch.mixin.TimelinePanel.$className,Sch.mixin.TimelinePanel]],[Sch.panel,'TimelineGridPanel'],function(){this.override(Sch.mixin.TimelinePanel.prototype.inheritables()||{})});Ext.cmd.derive('Sch.model.Event',Sch.model.Range,{idProperty:'Id',customizableFields:[{name:'IconCls'},{name:'ResourceId'},{name:'Draggable',type:'boolean',persist:!1,defaultValue:!0},{name:'Resizable',persist:!1,defaultValue:!0}],resourceIdField:'ResourceId',draggableField:'Draggable',resizableField:'Resizable',iconClsField:'IconCls',getInternalId:function(){return this.internalId},getEventStore:function(){var b=this,a=b.joined&&b.joined[0];if(a&&!a.isEventStore){Ext.Array.sort(b.joined,function(a,b){return (a.isEventStore||!1)>(b.isEventStore||!1)&&-1||1});a=b.joined[0];a=a.isEventStore?a:null}return a},getResourceStore:function(){var a=this.getEventStore();return a&&a.getResourceStore()},getAssignmentStore:function(){var a=this.getEventStore();return a&&a.getAssignmentStore()},getResources:function(){var b=this,a=b.getEventStore();return a&&a.getResourcesForEvent(b)||[]},forEachResource:function(d,c){var b=this.getResources();for(var a=0;a<b.length;a++){if(d.call(c||this,b[a])===!1){return}}},getResource:function(b){var d=this,a=null,c=d.getEventStore(),e=c&&c.getResourceStore();b=b==null?d.getResourceId():b;if(c&&(b===null||b===undefined)){a=c.getResourcesForEvent(d);if(a.length==1){a=a[0]}else {if(a.length>1){Ext.Error.raise('Event::getResource() is not applicable for events with multiple assignments, please use Event::getResources() instead.')}else {a=null}}}else {if(e){a=e.getModelById(b)}}return a},setResource:function(c){var a=this,b=a.getEventStore();b&&b.removeAssignmentsForEvent(a);a.assign(c)},assign:function(a){var b=this,c=b.getEventStore();a=a instanceof Sch.model.Resource?a.getId():a;if(c){c.assignEventToResource(b,a)}else {b.setResourceId(a)}},unassign:function(a){var b=this,c=b.getEventStore();a=a instanceof Sch.model.Resource?a.getId():a;if(c){c.unassignEventFromResource(b,a)}else {if(b.getResourceId()==a){b.setResourceId(null)}}},reassign:function(b,a){var c=this,d=c.getEventStore();b=b instanceof Sch.model.Resource?b:b;a=a instanceof Sch.model.Resource?a:a;if(d){d.reassignEventFromResourceToResource(c,b,a)}else {c.setResourceId(a)}},isAssignedTo:function(a){var c=this,d=c.getEventStore(),b=!1;a=a instanceof Sch.model.Resource&&a.getId()||a;if(d){b=d.isEventAssignedToResource(c,a)}else {b=c.getResourceId()==a}return b},getAssignments:function(){var b=this,a=b.getEventStore();return a&&a.getAssignmentsForEvent(b)},isDraggable:function(){return this.getDraggable()},isResizable:function(){return this.getResizable()},isPersistable:function(){var b=this,a=b.getEventStore();return a&&a.isEventPersistable(b)}},0,0,0,0,0,0,[Sch.model,'Event'],0);Ext.cmd.derive('Sch.data.EventStore',Ext.data.Store,{storeId:'events',model:'Sch.model.Event',config:{model:'Sch.model.Event'},constructor:function(b){var a=this;Ext.data.Store.prototype.constructor.call(this,b);a.resourceStore&&a.setResourceStore(a.resourceStore);a.assignmentStore&&a.setAssignmentStore(a.assignmentStore);if(a.getModel()!==Sch.model.Event&&!(a.getModel().prototype instanceof Sch.model.Event)){throw 'The model for the EventStore must subclass Sch.model.Event'}},append:function(a){this.add(a)}},1,0,0,0,['store.eventstore'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Sch.data.mixin.EventStore.prototype.mixinId||Sch.data.mixin.EventStore.$className,Sch.data.mixin.EventStore],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'EventStore'],0);Ext.cmd.derive('Sch.plugin.Zones',Sch.feature.AbstractTimeSpan,{innerTpl:null,cls:'sch-zone',side:null,init:function(b){if(typeof this.innerTpl==='string'){this.innerTpl=new Ext.XTemplate(this.innerTpl)}this.side=b.rtl?'right':'left';var a=this.innerTpl;if(!this.template){this.template=new Ext.XTemplate('<tpl for="."><div id="{id}" class="{$cls}" style="'+this.side+':{left}px;top:{top}px;height:{height}px;width:{width}px;{style}">'+(a?'{[this.renderInner(values)]}':'')+'</div></tpl>',{renderInner:function(c){return a.apply(c)}})}if(typeof this.innerHeaderTpl==='string'){this.innerHeaderTpl=new Ext.XTemplate(this.innerHeaderTpl)}Sch.feature.AbstractTimeSpan.prototype.init.apply(this,arguments)},getElementData:function(l,m,i,h){var c=this.schedulerView,p=[];var o=c.getTimeSpanRegion(l,m,this.expandToFitView);var e,f,g,a,r,k;i=i||this.store.getRange();for(var n=0,q=i.length;n<q;n++){e=i[n];f=e.getStartDate();g=e.getEndDate();k=this.getTemplateData(e);if(f&&g&&Sch.util.Date.intersectSpans(f,g,l,m)){a=Ext.apply({},k);a.id=this.getElementId(e);a.$cls=this.getElementCls(e,k);if(c.isWeekView()){var b=c.getTimeSpanRegion(f,g);a.left=b.left;a.top=b.top;a.height=b.bottom-b.top;a.width=b.right-b.left}else {var d=c.getCoordinateFromDate(Sch.util.Date.max(f,l));var j=c.getCoordinateFromDate(Sch.util.Date.min(g,m));if(c.isHorizontal()){a.left=d;a.top=o.top;a.width=h?0:j-d;a.style=h?'border-left-width:'+(j-d)+'px':''}else {a.left=o.left;a.top=d;a.height=h?0:j-d;a.style=h?'border-top-width:'+(j-d)+'px':''}}p.push(a)}}return p},getHeaderElementId:function(b,a){return Sch.feature.AbstractTimeSpan.prototype.getHeaderElementId.call(this,b)+(a?'-start':'-end')},getHeaderElementCls:function(b,a,d){var c=b.clsField||this.clsField;if(!a){a=this.getTemplateData(b)}return 'sch-header-indicator sch-header-indicator-'+(d?'start ':'end ')+this.uniqueCls+' '+(a[c]||'')},getZoneHeaderElementData:function(h,i,a,b){var d=b?a.getStartDate():a.getEndDate(),g=null,f,e,c;if(d&&Sch.util.Date.betweenLesser(d,h,i)){f=this.getHeaderElementPosition(d);e=this.schedulerView.isHorizontal();c=this.getTemplateData(a);g=Ext.apply({id:this.getHeaderElementId(a,b),cls:this.getHeaderElementCls(a,c,b),isStart:b,side:e?this.side:'top',position:f},c)}return g},getHeaderElementData:function(a){var g=this.timeAxis.getStart(),h=this.timeAxis.getEnd(),e=[],d,b,c;a=a||this.store.getRange();for(var f=0,i=a.length;f<i;f++){d=a[f];b=this.getZoneHeaderElementData(g,h,d,!0);if(b){e.push(b)}c=this.getZoneHeaderElementData(g,h,d,!1);if(c){e.push(c)}}return e},updateZoneHeaderElement:function(b,a){b.dom.className=a.cls;if(this.schedulerView.isHorizontal()){this.setElementX(b,a.position)}else {b.setTop(a.position)}},updateHeaderElement:function(b){var f=this.timeAxis.getStart(),g=this.timeAxis.getEnd(),a=Ext.get(this.getHeaderElementId(b,!0)),c=Ext.get(this.getHeaderElementId(b,!1)),e=this.getZoneHeaderElementData(f,g,b,!0),d=this.getZoneHeaderElementData(f,g,b,!1);if(!(a&&d)||!(c&&d)){Ext.destroy(a,c);this.renderHeaderElements([b])}else {if(a){if(!e){Ext.destroy(a)}else {this.updateZoneHeaderElement(a,e)}}if(c){if(!d){Ext.destroy(c)}else {this.updateZoneHeaderElement(c,d)}}}}},0,0,0,0,['plugin.scheduler_zones'],0,[Sch.plugin,'Zones'],0);Ext.cmd.derive('Sch.plugin.ResourceZones',Sch.plugin.Zones,{innerTpl:null,store:null,cls:'sch-resourcezone',init:function(a){this.store=Ext.StoreManager.lookup(this.store);this.uniqueCls=this.uniqueCls||'sch-timespangroup-'+Ext.id();this.scheduler=a;a.registerRenderer(this.renderer,this);if(typeof this.innerTpl==='string'){this.innerTpl=new Ext.XTemplate(this.innerTpl)}var b=this.innerTpl;if(!this.template){this.template=new Ext.XTemplate('<tpl for="."><div id="'+this.uniqueCls+'-{id}" class="'+this.cls+' '+this.uniqueCls+' {Cls}" style="'+(a.rtl?'right':'left')+':{start}px;width:{width}px;top:{start}px;height:{width}px;{style}">'+(b?'{[this.renderInner(values)]}':'{'+this.store.getModel().prototype.nameField+'}')+'</div></tpl>',{renderInner:function(c){return b.apply(c)}})}this.storeListeners={load:this.fullRefresh,datachanged:this.fullRefresh,clear:this.fullRefresh,add:this.fullRefresh,remove:this.fullRefresh,update:this.onModelUpdate,addrecords:this.fullRefresh,removerecords:this.fullRefresh,updaterecord:this.onModelUpdate,scope:this};this.store.on(this.storeListeners)},destroy:function(){this.store.un(this.storeListeners);Sch.plugin.Zones.prototype.destroy.apply(this,arguments)},fullRefresh:function(){this.scheduler.getSchedulingView().refreshView()},renderer:function(d,c,a,b){if(this.scheduler.isHorizontal()||b===0){return this.renderZones(a)}return ''},renderZones:function(m){var l=this.store,a=this.scheduler,k=a.timeAxis.getStart(),n=a.timeAxis.getEnd(),h=[],j=m.getEvents(l),d,e;for(var i=0,o=j.length;i<o;i++){var b=j[i];d=b.getStartDate();e=b.getEndDate();if(d&&e&&Sch.util.Date.intersectSpans(d,e,k,n)){var c=a.getSchedulingView()[a.getMode()].getEventRenderData(b);var f,g;if(a.isHorizontal()){f=a.rtl?c.right:c.left;g=c.width}else {f=c.top;g=c.height}h[h.length]=Ext.apply({id:b.internalId,start:f,width:g,Cls:b.getCls()},b.data)}}return this.template.apply(h)},onModelUpdate:function(k,c){var a=document.getElementById(this.uniqueCls+'-'+c.internalId);if(a){var b=this.scheduler,f=b.timeAxis.getStart(),g=b.timeAxis.getEnd();var h=Sch.util.Date.max(f,c.getStartDate()),j=Sch.util.Date.min(g,c.getEndDate()),i=c.getCls();var d=b.getSchedulingView().getCoordinateFromDate(h);var e=b.getSchedulingView().getCoordinateFromDate(j)-d;a.className=this.cls+' '+this.uniqueCls+' '+(i||'');a.style.left=d+'px';a.style.top=d+'px';a.style.height=e+'px';a.style.width=e+'px'}}},0,0,0,0,['plugin.scheduler_resourcezones'],0,[Sch.plugin,'ResourceZones'],0);Ext.cmd.derive('Sch.mixin.AbstractSchedulerPanel',Ext.Base,{eventBarIconClsField:'',enableEventDragDrop:!0,resourceColumnClass:'Sch.column.Resource',resourceColumnWidth:null,allowOverlap:!0,startParamName:'startDate',endParamName:'endDate',passStartEndParameters:!1,eventRenderer:null,eventRendererScope:null,eventStore:null,resourceStore:null,onEventCreated:function(a){},resourceZones:null,resourceZonesConfig:null,initStores:function(){var a=this.resourceStore||this.store;if(this.crudManager){if(!Sch.crud.AbstractManager){throw new Error('Sch.crud.AbstractManager not loaded, did you forget to require crudManager class (e.g. Sch.data.CrudManager)?')}if(!(this.crudManager instanceof Sch.crud.AbstractManager)){this.crudManager=Ext.create(this.crudManager.xclass||'Sch.data.CrudManager',Ext.clone(this.crudManager))}}if(!a){if(this.crudManager){a=this.resourceStore=this.crudManager.getResourceStore()}if(!a){if(this.isTree){a=new Sch.data.ResourceTreeStore({proxy:'memory'})}else {a=new Sch.data.ResourceStore()}}}if(!this.dependencyStore){if(this.crudManager){this.dependencyStore=this.crudManager.getDependencyStore()}}if(!this.eventStore){if(this.crudManager){this.eventStore=this.crudManager.getEventStore()}this.eventStore=this.eventStore||new Sch.data.EventStore()}this.store=Ext.StoreManager.lookup(a);this.resourceStore=this.store;this.setEventStore(this.eventStore);if(!this.eventStore||!this.eventStore.isEventStore){Ext.Error.raise('Your eventStore should be a subclass of Sch.data.EventStore (or consume the EventStore mixin)')}this.resourceStore.eventStore=this.getEventStore()},_initializeSchedulerPanel:function(){this.initStores();if(this.eventBodyTemplate&&typeof this.eventBodyTemplate==='string'){this.eventBodyTemplate=new Ext.XTemplate(this.eventBodyTemplate)}this.on('destroy',function(){this.setResourceStore(null);this.setEventStore(null)})},getResourceStore:function(){return this.resourceStore},setResourceStore:function(a){var b=this.getResourceStore();var e=b===this.store;a=a&&Ext.StoreManager.lookup(a);var c=this.getEventStore();var f=this.getAssignmentStore();this.resourceStore=a;if(c){c.setResourceStore(a)}var d=this.getSchedulingView();d&&d.setResourceStore(a);if(a){this.fireEvent('resourcestorechange',this,a,b);if(e){this.reconfigure(this.resourceStore)}else {this.refreshViews(!1)}}},getEventStore:function(){return this.eventStore},setEventStore:function(a){var f=this.getEventStore();a=a&&Ext.StoreManager.lookup(a);if(this.getEventStore()){this.mun(this.getEventStore(),'beforeload',this.applyStartEndParameters,this)}var d=this.getResourceStore();var b=this.getAssignmentStore();var c=this.getDependencyStore();this.eventStore=a;if(d){d.setEventStore(a)}if(b&&a&&!a.getAssignmentStore()){a.setAssignmentStore(b)}if(c&&a&&!a.getDependencyStore()){a.setDependencyStore(c)}var e=this.getSchedulingView();e&&e.setEventStore(a);if(a){this.fireEvent('eventstorechange',this,a,f);if(this.passStartEndParameters){this.mon(a,'beforeload',this.applyStartEndParameters,this)}this.refreshViews(!1)}},applyStartEndParameters:function(b,c){var a=b.getProxy();a.setExtraParam(this.startParamName,this.getStart());a.setExtraParam(this.endParamName,this.getEnd())},getAssignmentStore:function(){var b=this,a=b.getEventStore();return a&&a.isStore&&a.getAssignmentStore()||b.assignmentStore},setAssignmentStore:function(a){var b=this.getAssignmentStore();this.getEventStore().setAssignmentStore(a);if(a){this.fireEvent('assignmentstorechange',this,a,b);this.refreshViews(!1)}},getDependencyStore:function(){var b=this,a=b.getEventStore();return a&&a.isStore&&a.getDependencyStore()||b.dependencyStore},setDependencyStore:function(a){var b=this.getDependencyStore();this.getEventStore().setDependencyStore(a);if(a){this.fireEvent('dependencystorechange',this,a,b);this.refreshViews(!1)}},createResourceColumns:function(a){return Ext.Array.map(this.resourceStore.getRange(),function(b){return {xclass:this.resourceColumnClass,renderer:this.mainRenderer,scope:this,width:a||100,text:b.getName(),model:b}},this)}},0,0,0,0,0,0,[Sch.mixin,'AbstractSchedulerPanel'],0);Ext.cmd.derive('Sch.template.Event',Ext.XTemplate,{eventPrefix:null,resizeHandles:null,resizeTpl:'<div class="sch-resizable-handle sch-resizable-handle-DIR"></div>',terminalSides:null,terminalTpl:'<div class="sch-terminal sch-terminal-SIDE"></div>',constructor:function(c){var a=this;Ext.apply(a,c);var b=Ext.Array.map(a.terminalSides||[],function(b){return a.terminalTpl.replace(/SIDE/,b)}).join('');Ext.XTemplate.prototype.constructor.call(this,'<tpl for="."><div unselectable="on" tabindex="-1" id="'+a.eventPrefix+'{id}" style="right:{right}px;left:{left}px;top:{top}px;height:{height}px;width:{width}px;{style}" class="sch-event x-unselectable {internalCls} {cls}">'+(a.resizeHandles==='start'||a.resizeHandles==='both'?a.resizeTpl.replace(/DIR/,'start'):'')+'<div unselectable="on" class="sch-event-inner {iconCls}">{body}</div>'+(a.resizeHandles==='end'||a.resizeHandles==='both'?a.resizeTpl.replace(/DIR/,'end'):'')+b+'</div></tpl>')}},1,0,0,0,0,0,[Sch.template,'Event'],0);Ext.cmd.derive('Sch.view.Horizontal',Ext.Base,{view:null,constructor:function(a){Ext.apply(this,a)},getElementsFromEventRecord:function(e,d,f,c){var b=this.view,a;c=c||!1;if(d){a='[id^='+b.eventPrefix+e.internalId+'-'+d.internalId+'-]'}else {a='[id^='+b.eventPrefix+e.internalId+'-]'}return b.getEl().query(a,c)},translateToScheduleCoordinate:function(c){var a=this.view;var b;if(a.shouldAdjustForRtl()){b=a.getEl().getRight()-c}else {b=c-a.getEl().getX()}return b+a.getScroll().left},translateToPageCoordinate:function(b){var a=this.view;return b+a.getEl().getX()-a.getScroll().left},getDateFromXY:function(d,b,c){var a=d[0];if(!c){a=this.translateToScheduleCoordinate(a)}return this.view.timeAxisViewModel.getDateFromPosition(a,b)},getEventRenderData:function(g){var d=g.getStartDate(),e=g.getEndDate()||d,a=this.view,i=a.timeAxis.getStart(),j=a.timeAxis.getEnd(),c=Math,f=a.getCoordinateFromDate(Sch.util.Date.max(d,i)),h=a.getCoordinateFromDate(Sch.util.Date.min(e,j)),b={event:g};if(this.view.rtl){b.right=c.min(f,h)}else {b.left=c.min(f,h)}b.width=c.max(1,c.abs(h-f))-a.eventBorderWidth;if(a.managedEventSizing){b.top=c.max(0,a.barMargin-(Ext.isIE&&!Ext.isStrict?0:a.eventBorderWidth-a.cellTopBorderWidth));b.height=a.timeAxisViewModel.rowHeightHorizontal-2*a.barMargin-a.eventBorderWidth}b.start=d;b.end=e;b.startsOutsideView=d<i;b.endsOutsideView=e>j;return b},getScheduleRegion:function(c,d){var b=this.view,a;if(c){var g=d&&b.getElementsFromEventRecord(d,c)[0];a=Ext.fly(b.getRowNode(c)).getRegion();if(g){var f=g.getRegion();a.top=f.top;a.bottom=f.bottom}else {a.top=a.top+b.barMargin;a.bottom=a.bottom-b.barMargin-b.eventBorderWidth}}else {a=b.getTableRegion();a.top=a.top+b.barMargin;a.bottom=a.bottom-b.barMargin-b.eventBorderWidth}var h=b.timeAxis.getStart(),j=b.timeAxis.getEnd(),e=b.getDateConstraints(c,d)||{start:h,end:j},i=this.translateToPageCoordinate(b.getCoordinateFromDate(Sch.util.Date.max(h,e.start))),k=this.translateToPageCoordinate(b.getCoordinateFromDate(Sch.util.Date.min(j,e.end))),m=a.top,l=a.bottom;return new Ext.util.Region(m,Math.max(i,k),l,Math.min(i,k))},getResourceRegion:function(m,c,d){var a=this.view,f=a.getRowNode(m),e=Ext.fly(f).getOffsetsTo(a.getEl()),g=a.timeAxis.getStart(),j=a.timeAxis.getEnd(),n=c?Sch.util.Date.max(g,c):g,o=d?Sch.util.Date.min(j,d):j,i=a.getCoordinateFromDate(n),k=a.getCoordinateFromDate(o),l=e[1]+a.cellTopBorderWidth,h=e[1]+Ext.fly(f).getHeight()-a.cellBottomBorderWidth;if(!Ext.versions.touch){var b=a.getScroll();l+=b.top;h+=b.top}return new Ext.util.Region(l,Math.max(i,k),h,Math.min(i,k))},columnRenderer:function(j,h,b,f,i){var a=this.view;var d=a.getEventStore().filterEventsForResource(b,function(c){return a.timeAxis.isRangeInAxis(c)});if(d.length===0){return}var e=Ext.Array.map(d,function(c){return a.generateTplData(c,b,f)});if(a.dynamicRowHeight){var g=a.eventLayout.horizontal;var c=g.applyLayout(e,b,this.layoutEventVertically,this);h.rowHeight=c*a.timeAxisViewModel.rowHeightHorizontal-(c-1)*a.barMargin}return a.eventTpl.apply(e)},layoutEventVertically:function(b,d){var a=this.view;var c=b===0?a.barMargin:b*a.timeAxisViewModel.rowHeightHorizontal-(b-1)*a.barMargin;if(c>=a.cellBottomBorderWidth){c-=a.cellBottomBorderWidth}return c},resolveResource:function(a){var e=this,b=e.view,c,d;c=Ext.fly(a).is(b.eventSelector)&&a||Ext.fly(a).up(b.eventSelector,null,!0);if(c){d=b.getResourceRecordFromDomId(c.id)}else {a=b.findRowByChild(a);d=a&&b.getRecordForRowNode(a)||null}return d},getTimeSpanRegion:function(h,e,g){var b=this.view,d=b.getCoordinateFromDate(h),f=e?b.getCoordinateFromDate(e):d,c,a;a=b.getTableRegion();if(g){c=Math.max(a?a.bottom-a.top:0,b.getEl().dom.clientHeight)}else {c=a?a.bottom-a.top:0}return new Ext.util.Region(0,Math.max(d,f),c,Math.min(d,f))},getStartEndDatesFromRegion:function(d,c){var e=this.view;var b=e.getDateFromCoordinate(d.left,c),a=e.getDateFromCoordinate(d.right,c);if(b&&a){return {start:Sch.util.Date.min(b,a),end:Sch.util.Date.max(b,a)}}return null},onEventAdd:function(m,g){var i=this.view,j={},h,d,f,c,e,a,l,b,k;for(a=0,l=g.length;a<l;a++){h=g[a];d=h.getStartDate();f=h.getEndDate();if(d&&f&&i.timeAxis.timeSpanInAxis(d,f)){c=g[a].getResources(i.getEventStore());for(b=0,k=c.length;b<k;b++){e=c[b];j[e.getId()]=e}}}Ext.Object.each(j,function(b,a){i.repaintEventsForResource(a)})},onEventRemove:function(g,c){var f=this,a=f.view,e=a.getEventStore(),d,b;d=Ext.Array.unique(Ext.Array.reduce(c,function(a,b){return a.concat(e.getResourcesForEvent(b))},[]));b=Ext.Array.reduce(c,function(b,d){return b.concat(a.getElementsFromEventRecord(d,null,null,!0))},[]);b=new Ext.CompositeElementLite(b);b.fadeOut({callback:function(b){Ext.Array.forEach(d,function(d){if(a&&!a.isDestroyed){a.store.indexOf(d)>=0&&a.repaintEventsForResource(d)}})}})},onEventUpdate:function(k,a){var b=a.previous||{};var f=this.view;var i=f.timeAxis;var c=a.getStartDate();var d=a.getEndDate();var h=b.StartDate||c;var j=b.EndDate||d;var g=h&&j&&i.timeSpanInAxis(h,j);var e;if(a.resourceIdField in b&&g){e=k.getResourceStore().getById(b[a.resourceIdField]);e&&f.repaintEventsForResource(e,!0)}if(c&&d&&i.timeSpanInAxis(c,d)||g){Ext.Array.each(a.getResources(),function(b){f.repaintEventsForResource(b,!0)})}},setColumnWidth:function(b,a){var c=this.view;c.getTimeAxisViewModel().setViewColumnWidth(b,a)},getVisibleDateRange:function(){var a=this.view;if(!a.getEl()){return null}var c=a.getTableRegion(),f=a.timeAxis.getStart(),g=a.timeAxis.getEnd(),e=a.getWidth();if(c.right-c.left<e){return {startDate:f,endDate:g}}var d=a.getScroll();var b={startDate:a.getDateFromCoordinate(d.left,null,!0),endDate:a.getDateFromCoordinate(d.left+e,null,!0)||a.timeAxis.getEnd()};if(!b.endDate){b.endDate=a.timeAxis.getEnd()}return b},getItemBox:function(a){var b=this;return Ext.Array.map(a.getResources(),function(c){return b.getResourceEventBox(a,c)})},isRowVisible:function(a){var b=Ext.isFunction(a.isVisible)&&!a.isVisible();if(!b&&this.view.groupingFeature&&!this.view.groupingFeature.disabled){var c=this.view.resourceStore.getGroups();if(c){var d=c.getByKey(a.get(this.view.resourceStore.groupField));b=d&&!this.view.groupingFeature.isExpanded(d)}}return !b},isElementRenderedAndDisplayed:function(a){if(a instanceof Sch.model.Resource){a=this.view.getRowNode(a)}return !!(a&&Ext.fly(a).getHeight())},getResourceEventBox:function(f,d){var t=Sch.util.Date,g=this,b=null,a=g.view,w=a.timeAxis.getStart(),y=a.timeAxis.getEnd(),m=f.getStartDate(),o=f.getEndDate(),x,l,c,k,z,s,e,B,q,r,h,p,v,u,i,n,j;if(m&&o&&t.intersectSpans(m,o,w,y)&&this.isRowVisible(d)){k=a.getRowNode(d);if(k&&g.isElementRenderedAndDisplayed(k)){if(a.managedEventSizing){x=a.eventLayout.horizontal;var A=a.getEventStore().filterEventsForResource(d,a.timeAxis.isRangeInAxis,a.timeAxis);l=Ext.Array.map(A,g.getEventRenderData,g);x.applyLayout(l,d);c=Ext.Array.findBy(l,function(a){return a.event==f});if(c){s=Ext.fly(k).getOffsetsTo(a.getNodeContainer())[1];b={rendered:!0,start:c.hasOwnProperty('left')?c.left:c.right,end:(c.hasOwnProperty('left')?c.left:c.right)+c.width,top:s+c.top,bottom:s+c.top+c.height}}}else {q=a.getElementsFromEventRecord(f,f!==d&&d);if(q.length){r=q[0];h=r.getOffsetsTo(a.getEl());p=r.getBox();b={rendered:!0,start:h[0],end:h[0]+p.width,top:h[1],bottom:h[1]+p.height}}}}else {b={rendered:!1,start:a.getCoordinateFromDate(t.max(m,w)),end:a.getCoordinateFromDate(t.min(o,y))};v=a.all.startIndex;u=a.getRecord(v);i=a.all.endIndex;n=a.getRecord(i);e=a.getRowHeight();if(d.isAbove(u)){b.top=-e;b.bottom=b.top+e;b.relPos='before'}else {if(d==n||d.isAbove(n)){z=a.indexOf(d);b.top=z*e;b.bottom=b.top+e}else {j=a.getNode(i);if(g.isElementRenderedAndDisplayed(j)){b.top=Ext.fly(j).getOffsetsTo(a.getNodeContainer())[1]+Ext.fly(j).getHeight()}else {b.top=(i+1)*e}b.bottom=b.top+e;b.relPos='after'}}}if(b){b=g.adjustItemBox(f,b)}}return b},adjustItemBox:function(b,a){return a},getConnectorStartSide:function(a){return 'left'},getConnectorEndSide:function(a){return 'right'}},1,0,0,0,0,0,[Sch.view,'Horizontal'],0);Ext.cmd.derive('Sch.mixin.AbstractTimelineView',Ext.Base,{selectedEventCls:'sch-event-selected',readOnly:!1,horizontalViewClass:'Sch.view.Horizontal',timeCellCls:'sch-timetd',timeCellSelector:'.sch-timetd',eventBorderWidth:1,timeAxis:null,timeAxisViewModel:null,eventPrefix:null,rowHeight:null,mode:'horizontal',horizontal:null,vertical:null,panel:null,displayDateFormat:null,el:null,_initializeTimelineView:function(){if(this.horizontalViewClass){this.horizontal=Ext.create(this.horizontalViewClass,{view:this})}if(this.verticalViewClass){this.vertical=Ext.create(this.verticalViewClass,{view:this})}if(this.weekViewClass){this.weekview=Ext.create(this.weekViewClass,{view:this})}this.eventPrefix=(this.eventPrefix||this.getId())+'-'},getTimeAxisViewModel:function(){return this.timeAxisViewModel},getFormattedDate:function(a){return Ext.Date.format(a,this.getDisplayDateFormat())},getFormattedEndDate:function(a,b){var c=this.getDisplayDateFormat();if(a.getHours()===0&&a.getMinutes()===0&&(!b||!(a.getYear()===b.getYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()))&&!Sch.util.Date.hourInfoRe.test(c.replace(Sch.util.Date.stripEscapeRe,''))){a=Sch.util.Date.add(a,Sch.util.Date.DAY,-1)}return Ext.Date.format(a,c)},getDisplayDateFormat:function(){return this.displayDateFormat},setDisplayDateFormat:function(a){this.displayDateFormat=a},fitColumns:function(a){if(this.isHorizontal()){this.getTimeAxisViewModel().fitToAvailableWidth(a)}else {var b=Math.floor((this.panel.getWidth()-Ext.getScrollbarSize().width-1)/this.headerCt.getColumnCount());this.setColumnWidth(b,a)}},getElementsFromEventRecord:function(b,a,c,d){return this[this.mode].getElementsFromEventRecord(b,a,c,d)},getStartEndDatesFromRegion:function(b,a){return this[this.mode].getStartEndDatesFromRegion(b,a)},getTimeResolution:function(){return this.timeAxis.getResolution()},setTimeResolution:function(b,a){this.timeAxis.setResolution(b,a);if(this.getTimeAxisViewModel().snapToIncrement){this.refreshKeepingScroll()}},getEventIdFromDomNodeId:function(a){return a.substring(this.eventPrefix.length).split('-')[0]},getResourceIdFromDomNodeId:function(a){return a.substring(this.eventPrefix.length).split('-')[1]},getDateFromDomEvent:function(b,a){return this.getDateFromXY(b.getXY(),a)},getSnapPixelAmount:function(){return this.getTimeAxisViewModel().getSnapPixelAmount()},setSnapEnabled:function(a){this.getTimeAxisViewModel().setSnapToIncrement(a)},setReadOnly:function(a){this.readOnly=a;this[a?'addCls':'removeCls'](this._cmpCls+'-readonly')},isReadOnly:function(){return this.readOnly},setMode:function(a){this.mode=a;this.timeAxisViewModel.mode=a},getMode:function(){return this.mode},isHorizontal:function(){return this.getMode()==='horizontal'},isVertical:function(){return this.getMode()==='vertical'},isWeekView:function(){return this.getMode()==='weekview'},getDateFromXY:function(c,a,b){return this[this.mode].getDateFromXY(c,a,b)},getDateFromCoordinate:function(a,b,c){if(!c){a=this[this.mode].translateToScheduleCoordinate(a)}return this.timeAxisViewModel.getDateFromPosition(a,b)},getDateFromX:function(b,a){return this.getDateFromCoordinate(b,a)},getDateFromY:function(b,a){return this.getDateFromCoordinate(b,a)},getCoordinateFromDate:function(c,b){var a=this.timeAxisViewModel.getPositionFromDate(c);if(b===!1){a=this[this.mode].translateToPageCoordinate(a)}return a},getTimeSpanDistance:function(a,b){return this.timeAxisViewModel.getDistanceBetweenDates(a,b)},getTimeSpanRegion:function(a,b){return this[this.mode].getTimeSpanRegion(a,b)},getScheduleRegion:function(a,b){return this[this.mode].getScheduleRegion(a,b)},getTableRegion:function(){throw 'Abstract method call'},getRowNode:function(a){throw 'Abstract method call'},getRecordForRowNode:function(a){throw 'Abstract method call'},getVisibleDateRange:function(){return this[this.mode].getVisibleDateRange()},setColumnWidth:function(b,a){this[this.mode].setColumnWidth(b,a)},findRowByChild:function(a){throw 'Abstract method call'},setBarMargin:function(b,a){this.barMargin=b;if(!a){this.refreshKeepingScroll()}},getRowHeight:function(){return this.timeAxisViewModel.getViewRowHeight()},setRowHeight:function(b,a){this.timeAxisViewModel.setViewRowHeight(b,a)},refreshKeepingScroll:function(){throw 'Abstract method call'},scrollVerticallyTo:function(b,a){throw 'Abstract method call'},scrollHorizontallyTo:function(b,a){throw 'Abstract method call'},getVerticalScroll:function(){throw 'Abstract method call'},getHorizontalScroll:function(){throw 'Abstract method call'},getEl:Ext.emptyFn,getScroll:function(){throw 'Abstract method call'},getOuterEl:function(){return this.getEl()},getRowContainerEl:function(){return this.getEl()},getScheduleCell:function(b,a){return this.getCellByPosition({row:b,column:a})},getScrollEventSource:function(){return this.getEl()},getViewportHeight:function(){return this.getEl().getHeight()},getViewportWidth:function(){return this.getEl().getWidth()},getViewportCenterDate:function(){var b=this.getScroll(),a;if(this.isVertical()){a=[0,b.top+this.getViewportHeight()/2]}else {a=[b.left+this.getViewportWidth()/2,0]}return this.getDateFromXY(a,null,!0)},getDateConstraints:Ext.emptyFn,getItemBox:function(a){return this[this.mode].getItemBox(a)},getConnectorStartSide:function(a){return this[this.mode].getConnectorStartSide(a)},getConnectorEndSide:function(a){return this[this.mode].getConnectorEndSide(a)}},0,0,0,0,0,0,[Sch.mixin,'AbstractTimelineView'],0);Ext.apply(Sch,{VERSION:'5.0.3'});Ext.cmd.derive('Sch.patches.NavigationModel6_0_2',Sch.util.Patch,{target:'Ext.grid.NavigationModel',minVersion:'6.0.2',maxVersion:'6.2.0',overrides:{focusPosition:function(b){var a=this,c,d,e;a.item=a.cell=null;if(b&&b.record&&b.column){c=b.view;if(b.rowElement){d=a.item=b.rowElement}else {d=c.getRowByRecord(b.record)}if(d){a.cell=b.cellElement||Ext.fly(d).down(b.column.getCellSelector(),!0);if(a.cell){a.cell=new Ext.dom.Fly(a.cell);c.lastFocused=a.lastFocused=a.position.clone();e=c.getScrollable();if(e&&!c.mixins['Sch.mixin.TimelineView']){e.scrollIntoView(a.cell)}a.focusItem(a.cell);c.focusEl=a.cell}else {a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null}}else {d=c.dataSource.indexOf(b.record);a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null;if(d!==-1&&c.bufferedRenderer){a.lastKeyEvent=null;c.bufferedRenderer.scrollTo(d,!1,a.afterBufferedScrollTo,a)}}}}}},0,0,0,0,0,0,[Sch.patches,'NavigationModel6_0_2'],0);Ext.cmd.derive('Sch.patches.TouchScroll',Sch.util.Patch,{target:'Ext.scroll.TouchScroller',minVersion:'5.1.0',maxVersion:'6.2.0',overrides:{privates:{onEvent:function(b){var a=this;if(!a[a.listenerMap[b.type]]){return}return this.callParent(arguments)}}}},0,0,0,0,0,0,[Sch.patches,'TouchScroll'],0);Ext.cmd.derive('Sch.patches.View',Sch.util.Patch,{target:'Ext.view.View',minVersion:'5.1.0',overrides:{handleEvent:function(a){var b=this,c=b.keyEventRe.test(a.type),e=b.getNavigationModel();a.view=b;if(c){a.item=a.getTarget(b.itemSelector);a.record=e.getRecord(a.item)}if(!a.item){var d=b.editingPlugin&&b.editingPlugin.getActiveEditor&&b.editingPlugin.getActiveEditor();if(!(d&&d.getEl().contains(a.getTarget()))){a.item=a.getTarget(b.itemSelector)}}if(a.item&&!a.record){a.record=b.getRecord(a.item)}if(b.processUIEvent(a)!==!1){b.processSpecialEvent(a)}if(c&&!Ext.fly(a.target).isInputField()){if(a.getKey()===a.SPACE||a.isNavKeyPress(!0)){a.preventDefault()}}a.view=null}}},0,0,0,0,0,0,[Sch.patches,'View'],0);Ext.cmd.derive('Sch.patches.Scroller',Sch.util.Patch,{target:'Ext.scroll.Scroller',minVersion:'6.0.2',maxVersion:'6.0.3',applyFn:function(){var a={destroy:function(){clearTimeout(this.restoringTimer);this.callParent(arguments)},privates:{restoreState:function(){var a=this,c=a.getScrollElement(),b;if(c){b=c.dom;if(a.trackingScrollTop!==undefined){a.restoring=!0;a.restoringTimer=Ext.defer(function(){a.restoring=!1},50);b.scrollTop=a.trackingScrollTop;b.scrollLeft=a.trackingScrollLeft}}}}};if(Ext.isIE9m){a.privates.updateSpacerXY=function(a){var b=this.getSpacer();if(this.getRtl&&this.getRtl()){b.rtlSetLocalXY(a.x,a.y)}else {b.setLocalXY(a.x,a.y)}}}Ext.ClassManager.get(this.target).override(a)}},0,0,0,0,0,0,[Sch.patches,'Scroller'],0);Ext.cmd.derive('Sch.patches.Queue',Sch.util.Patch,{target:'Ext.util.Queue',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{add:function(b,e){var a=this,c=a.getKey(b),d;if(!(d=a.map[c])){++a.length;a.items.push(b);a.map[c]=b}else {if(e){a.map[c]=b;a.items[Ext.Array.indexOf(a.items,d)]=b}}return b}}},0,0,0,0,0,0,[Sch.patches,'Queue'],0);Ext.cmd.derive('Sch.patches.LayoutContext',Sch.util.Patch,{target:'Ext.layout.Context',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{queueFlush:function(b,a){this.flushQueue.add(b,a)}}},0,0,0,0,0,0,[Sch.patches,'LayoutContext'],0);Ext.cmd.derive('Sch.patches.TableLayout',Sch.util.Patch,{target:'Ext.view.TableLayout',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{calculate:function(a){var b=this,s=a.context,d=a.lockingPartnerContext,t=a.headerContext,k=a.ownerCtContext,c=b.owner,j=t.getProp('columnsChanged'),e=a.state,l,o,f,i,r=c.body.dom,p,n,m,q,h,g;if(!c.all.getCount()&&(!r||!c.body.child('table'))){a.setProp('viewOverflowY',!1);b.callParent([a]);return}if(j===undefined){b.done=!1;return}if(j){if(!(l=e.columnFlusher)){s.queueFlush(e.columnFlusher=l={ownerContext:a,columnsChanged:j,layout:b,id:b.columnFlusherId,flush:b.flushColumnWidths},!0)}if(!l.flushed){b.done=!1;return}}if(a.doSyncRowHeights){if(!(i=e.rowHeightFlusher)){if(!(f=e.rowHeights)){e.rowHeights=f=a.rowHeightSynchronizer;b.owner.syncRowHeightMeasure(f);a.setProp('rowHeights',f)}if(!(o=d.getProp('rowHeights'))){b.done=!1;return}s.queueFlush(e.rowHeightFlusher=i={ownerContext:a,synchronizer:f,otherSynchronizer:o,layout:b,id:b.rowHeightFlusherId,flush:b.flushRowHeights},!0)}if(!i.flushed){b.done=!1;return}}b.callParent([a]);if(!a.heightModel.shrinkWrap){m=!1;if(!k.heightModel.shrinkWrap){n=k.target.layout.getContainerSize(k);if(!n.gotHeight){b.done=!1;return}p=r.offsetHeight;m=p>n.height}a.setProp('viewOverflowY',m)}if(b.done&&Ext.getScrollbarSize().height){if(d&&c.isLockedView){q=c.lockingPartner;h=c.scrollFlags.x&&a.headerContext.state.boxPlan.tooNarrow;g=q.scrollFlags.x&&d.headerContext.state.boxPlan.tooNarrow;if(h!==g){if(g){d.setProp('overflowX',!0);a.setProp('overflowX','scroll')}else {a.setProp('overflowX',!0);d.setProp('overflowX','scroll')}}else {a.setProp('overflowX',g);d.setProp('overflowX',h)}a.setProp('overflowY','scroll')}else {if(!c.isAutoTree){a.setProp('overflowX',!!a.headerContext.state.boxPlan.tooNarrow)}}}}}},0,0,0,0,0,0,[Sch.patches,'TableLayout'],0);Ext.cmd.derive('Sch.patches.ColumnLayout',Sch.util.Patch,{target:'Ext.grid.ColumnLayout',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{calculate:function(a){var b=this,n=b.owner.grid,j=a.viewContext,g=a.state,p=a.context,c,h,m,d,k,o,f,e,l,i;b.callSuper([a]);if(n&&g.parallelDone){c=j.lockingPartnerContext;if(c){h=c.target.ownerCt;if(!h.isVisible()||h.collapsed){c=null}}m=n.ownerGrid;if(m.forceFit&&!g.reflexed){if(b.convertWidthsToFlexes(a)){b.cacheFlexes(a);b.done=!1;a.invalidate({state:{reflexed:!0,scrollbarAdjustment:b.getScrollbarAdjustment(a)}});return}}if((d=g.columnsChanged)===undefined){k=a.target.getVisibleGridColumns();d=!1;for(f=0,o=k.length;f<o;f++){e=p.getCmp(k[f]);if(!e.lastBox||e.props.width!==e.lastBox.width){(d||(d=[]))[f]=e}}g.columnsChanged=d;a.setProp('columnsChanged',d)}if(a.manageScrollbar){l=b.getScrollbarAdjustment(a);if(l){i=j.getProp('viewOverflowY');if(i===undefined){b.done=!1;return}if(!i){if(c){c.invalidate();c.headerContext.invalidate()}j.invalidate();a.invalidate({state:{scrollbarAdjustment:0}})}}}}}}},0,0,0,0,0,0,[Sch.patches,'ColumnLayout'],0);Ext.cmd.derive('Sch.patches.ToolTip',Sch.util.Patch,{target:'Ext.tip.ToolTip',minVersion:'6.0.0',applyFn:function(){var a={setTarget:function(d){var a=this,b=Ext.get(d),c;if(a.target){c=Ext.get(a.target);a.mun(c,{mouseover:a.onTargetOver,tap:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})}a.target=b;if(b){a.mon(b,{mouseover:a.onTargetOver,tap:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})}if(a.anchor){a.anchorTarget=a.target}}};if(Ext.getVersion().isLessThan('6.0.2')){a.afterSetPosition=function(b,c){var a=this;a.callParent(arguments);if(a.anchor){if(!a.anchorEl.isVisible()){a.anchorEl.show()}a.syncAnchor()}else {a.anchorEl.hide()}}}Ext.ClassManager.get(this.target).override(a)}},0,0,0,0,0,0,[Sch.patches,'ToolTip'],0);Ext.cmd.derive('Sch.patches.AbstractView',Sch.util.Patch,{target:'Ext.view.AbstractView',minVersion:'6.2.0',obsoleteTestName:'patches/002_abstract_view.t.js',overrides:{setItemsDraggable:function(b){var a=this,c;c=a.callParent([b]);if(!b&&a.viewStyleSheet&&a.viewStyleSheet.cssRules.length===0){a.viewStyleSheet.ownerNode.parentNode.removeChild(a.viewStyleSheet.ownerNode);a.viewStyleSheet=Ext.view.AbstractView.prototype.viewStyleSheet=null}return c}}},0,0,0,0,0,0,[Sch.patches,'AbstractView'],0);Ext.cmd.derive('Sch.patches.TableScroller',Sch.util.Patch,{minVersion:'6.2.1',target:'Ext.scroll.TableScroller',overrides:{privates:{onDomScroll:function(){var a=this,b=a.position,g=b.x,h=b.y,e,f,c,d;b=a.updateDomScrollPosition();if(a.restoreTimer){clearTimeout(a.onDomScrollEnd.timer);return}e=b.x;f=b.y;c=e-g||!0;d=f-h||!0;if(c||d){if(!a.isScrolling){a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(e,f,c,d)}a.fireScroll(e,f,c,d);a.bufferedOnDomScrollEnd(e,f,c,d)}}}}},0,0,0,0,0,0,[Sch.patches,'TableScroller'],0);Ext.cmd.derive('Sch.patches.Ie9FormFieldText',Sch.util.Patch,{target:'Ext.form.field.Text',ieOnly:!0,minVersion:'6.0.0',reportUrl:null,obsoleteTestName:'patches/003_ie9_form_field_text.t.js',description:["Text field being a part of grid cell editor might find itself in a situation when it's detached",'from the document and requested to select text inside itself, by being focused for example, simultaneously'].join(' '),applyFn:function(){Ext.isIE9&&Ext.ClassManager.get(this.target).override({selectTextAsapId:null,selectText:function(b,c){var a=this;if(!a.destroying&&!a.destroyed&&a.inputEl){try{Ext.asapCancel(a.selectTextAsapId),a.selectTextAsapId=null;a.callParent([b,c])}catch(d){a.selectTextAsapId=Ext.asap(a.selectText,a,[b,c])}}}})}},0,0,0,0,0,0,[Sch.patches,'Ie9FormFieldText'],0);Ext.cmd.derive('Sch.tooltip.EventTip',Ext.tip.ToolTip,function(){return {config:{view:null},componentCls:'sch-tooltip-eventtip',anchor:'t',constraintInsets:'7 -7 -7 7',initComponent:function(){var a=this;Ext.tip.ToolTip.prototype.initComponent.apply(this,arguments);a.on('beforeshow',a.onTipBeforeShow,a)},getAlignRegion:function(){var a=this,f=a.anchorEl,g=a.getAnchorAlign(),i,h,e,d=a.mouseOffset,c,b;if(!a.anchorSize){f.addCls('x-tip-anchor-top');f.show();a.anchorSize=new Ext.util.Offset(f.getWidth(),f.getHeight());f.removeCls('x-tip-anchor-top');f.hide()}if((a.anchor||a.align)&&a.anchorToTarget&&!a.trackMouse){e=a.currentTarget.getRegion();if(a.getView().getMode()==='horizontal'&&a.pointerEvent){e=e.intersect(new Ext.util.Region(e.top,a.pointerEvent.getPoint().x+a.getRegion().width/2,e.bottom,a.pointerEvent.getPoint().x+-a.getRegion().width/2))}}else {e=a.pointerEvent?a.pointerEvent.getPoint().adjust(-d[1],d[0],d[1],-d[0]):new Ext.util.Point();if(!a.anchor){i=!0;if(d[0]>0){if(d[1]>0){g='tl-br'}else {g='bl-tr'}}else {if(d[1]>0){g='tr-bl'}else {g='br-tl'}}}}h={align:a.convertPositionSpec(g),axisLock:a.axisLock,target:e,overlap:i,offset:a.targetOffset};if(a.anchor){h.anchorSize=a.anchorSize}if(a.constrainPosition){c=a.constrainTo||Ext.getBody();if(!c.isRegion){c=Ext.util.Region.getRegion(c)}if(a.constraintInsets){b=a.constraintInsets;if(!Ext.isObject(b)){b=Ext.util.Format.parseBox(b)}c=c.copy().adjust(b.top,b.right,b.bottom,b.left)}h.inside=c}return a.getRegion().alignTo(h)},onTipBeforeShow:function(b){if(!b.triggerElement||!b.triggerElement.id){return !1}var a=b.getView();var f=Ext.all('window[modal=true]{isVisible()}');var g=Ext.Array.findBy(f,function(c){return a!==c&&!a.isDescendantOf(c)});if(g){return !1}var d=a.resolveEventRecord(b.triggerElement);if(!d||a.fireEvent('beforetooltipshow',a,d)===!1){return !1}var e=a.getDataForTooltipTpl(d,b.triggerElement),c;if(!e){return !1}c=a.tooltipTpl.apply(e);if(!c){return !1}b.update(c)}}},0,['scheduler_eventtip'],['component','box','container','panel','tip','tooltip','scheduler_eventtip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0,'scheduler_eventtip':!0},['widget.scheduler_eventtip'],0,[Sch.tooltip,'EventTip'],function(b){var a='t';function toConstrainRegion(a){var c=Ext.util.Region;if(a&&!a.isRegion&&a.isComponent){a=a.getConstrainRegion()}else {if(a&&!a.isRegion&&a.isElement){a=a.getConstrainRegion()}else {if(a&&!a.isRegion&&Ext.isElement(a)){a=c.getRegion(a)}else {if(a&&!a.isRegion){a=c.from(a)}}}}return a}function toPoint(a){var c=Ext.util.Point;if(a&&!a.isPoint&&Ext.isArray(a)){a=new c(a[0]||0,a[1]||0)}else {if(a&&!a.isPoint){a=c.from(a)}}return a}function canContain(c,a){return c.right-c.left>=a.right-a.left&&c.bottom-c.top>=a.bottom-a.top}Ext.versions.extjs.isLessThan('6.2.0')&&Ext.override(b,{show:function(){var a=this,c=a.getView();a.callParent(arguments);if(a.triggerElement&&c.getMode()==='horizontal'){a.alignTipToEvent(a.triggerElement,a.constrainPosition&&a.constrainTo,a.targetXY)}},alignTipToEvent:function(z,y,d){var j=Ext.util.Region,x=Ext.util.Point,q=Ext.Number.constrain,c=this,A=window.tipAnchor||c.origAnchor||a,r=c.rtl,g,f,o,k,i,e,w,s,p,h,l,u,t,v,n,m;i=toConstrainRegion(y||Ext.getBody());k=i.intersect(toConstrainRegion(z));if(k){g=c.getWidth(),f=c.getHeight(),h=c.anchorEl&&c.anchorEl.getSize()||{width:0,height:0};h.width/=2;h.height/=2;d=d&&toPoint(d);if(!d||!k.contains(d)){d=new x((k.left+k.right)/2,(k.top+k.bottom)/2)}e={'top':new j(i.top,i.right,k.top,i.left),'bottom':new j(k.bottom,i.right,i.bottom,i.left),'left':new j(i.top,k.left,i.bottom,i.left),'right':new j(i.top,i.right,i.bottom,k.right)};w={'top':new j(e.top.bottom-f-h.height,d.x+g/2,e.top.bottom-h.height,d.x-g/2),'bottom':new j(e.bottom.top+h.height,d.x+g/2,e.bottom.top+f+h.height,d.x-g/2),'left':new j(d.y-f/2,e.left.right-h.width,d.y+f/2,e.left.right-g-h.width),'right':new j(d.y-f/2,e.right.left+g+h.width,d.y-f/2,e.right.left+h.width)};s={'top':new j(e.top.bottom-f-h.height,d.x+g/2,e.top.bottom,d.x-g/2),'bottom':new j(e.bottom.top,d.x+g/2,e.bottom.top+f+h.height,d.x-g/2),'left':new j(d.y-f/2,e.left.right,d.y+f/2,e.left.right-g-h.width),'right':new j(d.y-f/2,e.right.left+g+h.width,d.y-f/2,e.right.left)};switch(A.charAt(0)){case 't':p=['top','bottom',r?'right':'left',r?'left':'right'];break;case 'r':p=['right','left','top','bottom'];break;case 'b':p=['bottom','top',r?'right':'left',r?'left':'right'];break;case 'l':p=['left','right','top','bottom'];break;default:}l=Ext.Array.findBy(p,function(a){var f=e[a],c=s[a];return canContain(f,c)});if(l){u=e[l];t=s[l];v=w[l];if(u.contains(t)){o=0;m=[v.x,v.y]}else {n=c.getConstrainVector(t);m=c.getXY();m=[m[0]+n[0],m[1]+n[1]];c.setXY(m);n=c.getConstrainVector(u);if(l=='left'||l=='right'){o=-n[1]}else {if(l=='top'||l=='bottom'){o=-n[0]}}m=[m[0]+n[0],m[1]+n[1]]}switch(l){case 'top':c.tipAnchor='bottom';c.anchorOffset=q(g/2-20+o,0,g-40);break;case 'right':c.tipAnchor='left';c.anchorOffset=q(f/2-12+o,0,f-24);break;case 'bottom':c.tipAnchor='top';c.anchorOffset=q(g/2-20+o,0,g-40);break;case 'left':c.tipAnchor='right';c.anchorOffset=q(f/2-12+o,0,f-24);break;}c.anchorEl.removeCls(Ext.Array.map(p,function(a){return 'x-tip-anchor-'+a}));c.anchorEl.addCls('x-tip-anchor-'+c.tipAnchor);c.syncAnchor();c.setXY(m)}else {}}}})});Ext.cmd.derive('Sch.mixin.TimelineView',Sch.mixin.AbstractTimelineView,{tip:null,overScheduledEventClass:'sch-event-hover',ScheduleBarEvents:['mousedown','mouseup','click','dblclick','longpress','contextmenu'],ResourceRowEvents:['keydown','keyup'],preventOverCls:!1,hoveredEventNode:null,_initializeTimelineView:function(){Sch.mixin.AbstractTimelineView.prototype._initializeTimelineView.apply(this,arguments);this.on('destroy',this._onDestroy,this);this.on('afterrender',this._onAfterRender,this);this.setMode(this.mode);this.enableBubble('columnwidthchange');this.addCls('sch-timelineview');if(this.readOnly){this.addCls(this._cmpCls+'-readonly')}this.addCls(this._cmpCls);if(this.eventAnimations){this.addCls('sch-animations-enabled')}},handleScheduleBarEvent:function(a,b){this.fireEvent(this.scheduledEventName+a.type,this,this.resolveEventRecord(b),a)},handleResourceRowEvent:function(a,b){this.fireEvent(this.scheduledEventName+a.type,this,this.resolveEventRecordFromResourceRow(b),a)},_onDestroy:function(){if(this.tip){this.tip.destroy()}},_onAfterRender:function(){if(this.overScheduledEventClass){this.setMouseOverEnabled(!0)}if(this.tooltipTpl){if(typeof this.tooltipTpl==='string'){this.tooltipTpl=new Ext.XTemplate(this.tooltipTpl)}this.el.on('mousemove',this.setupTooltip,this,{single:!0})}var c=this.bufferedRenderer;if(c){this.patchBufferedRenderingPlugin(c);this.patchBufferedRenderingPlugin(this.lockingPartner.bufferedRenderer)}this.setupTimeCellEvents();var b={delegate:this.eventSelector,scope:this};var a={delegate:this.rowSelector,scope:this};Ext.Array.each(this.ScheduleBarEvents,function(a){b[a]=this.handleScheduleBarEvent},this);Ext.Array.each(this.ResourceRowEvents,function(b){a[b]=this.handleResourceRowEvent},this);this.el.on(b);this.el.on(a)},patchBufferedRenderingPlugin:function(a){var c=this;var b=a.setBodyTop;a.setBodyTop=function(f,e){var d=b.apply(this,arguments);c.fireEvent('bufferedrefresh',this);return d}},setMouseOverEnabled:function(a){this[a?'mon':'mun'](this.el,{mouseover:this.onEventMouseOver,mouseout:this.onEventMouseOut,delegate:this.eventSelector,scope:this});if(!a){this.getEl().select('.'+this.overScheduledEventClass).removeCls(this.overScheduledEventClass)}},onEventMouseOver:function(c,a){if(a!==this.hoveredEventNode&&!this.preventOverCls){this.hoveredEventNode=a;Ext.fly(a).addCls(this.overScheduledEventClass);var b=this.resolveEventRecord(a);if(b){this.fireEvent('eventmouseenter',this,b,c)}}},onEventMouseOut:function(a,b){if(this.hoveredEventNode){if(!a.within(this.hoveredEventNode,!0,!0)){Ext.fly(this.hoveredEventNode).removeCls(this.overScheduledEventClass);this.fireEvent('eventmouseleave',this,this.resolveEventRecord(this.hoveredEventNode),a);this.hoveredEventNode=null}}},highlightItem:function(a){if(a){var b=this;b.clearHighlight();b.highlightedItem=a;Ext.fly(a).addCls(b.overItemCls)}},setupTooltip:function(){var a=this,b=a.getEl();a.tip=new Sch.tooltip.EventTip(Ext.apply({view:a,delegate:a.eventSelector,target:b,constrainTo:a.grid.getEl(),rtl:a.rtl},a.tipCfg));if(Ext.supports.Touch){a.el.un({touchmove:a.setupTooltip,mousemove:a.setupTooltip,scope:a})}},getHorizontalTimeAxisColumn:function(){if(!this.timeAxisColumn){this.timeAxisColumn=this.headerCt.down('timeaxiscolumn');if(this.timeAxisColumn){this.timeAxisColumn.on('destroy',function(){this.timeAxisColumn=null},this)}}return this.timeAxisColumn},getDataForTooltipTpl:function(a,b){return Ext.apply({_record:a},a.data)},refreshKeepingScroll:function(){Ext.suspendLayouts();this.blockRestoringInfiniteScrollDate();this.refreshView();Ext.resumeLayouts(!0);this.resumeRestoringInfiniteScrollDate()},setupTimeCellEvents:function(){this.mon(this.el,{click:this.handleScheduleEvent,dblclick:this.handleScheduleEvent,contextmenu:this.handleScheduleEvent,pinch:this.handleScheduleEvent,pinchstart:this.handleScheduleEvent,pinchend:this.handleScheduleEvent,scope:this})},getTableRegion:function(){var a=this.el.down('.x-grid-item-container');return (a||this.el).getRegion()},getRowNode:function(a){return this.getNodeByRecord(a)},findRowByChild:function(a){return this.findItemByChild(a)},getRecordForRowNode:function(a){return this.getRecord(a)},refreshKeepingResourceScroll:function(){var a=this.getScroll();this.refreshView();if(this.isHorizontal()){this.scrollVerticallyTo(a.top)}else {this.scrollHorizontallyTo(a.left)}},scrollHorizontallyTo:function(b,a){this.scrollTo(b,null,a)},scrollVerticallyTo:function(b,a){this.scrollTo(null,b,a)},getVerticalScroll:function(){return this.getScrollY()},getHorizontalScroll:function(){return this.getScrollX()},getScroll:function(){var a=this;return {top:a.getVerticalScroll(),left:a.getHorizontalScroll()}},handleScheduleEvent:function(){},scrollElementIntoView:function(u,q,b,a,d,c,e){var g=this,f=u.dom,h=Ext.getVersion().isGreaterThan('6.2.0')?Ext.getDom(g.ownerCt.getEl()):Ext.getDom(g.getEl()),r=u.getOffsetsTo(h),k=g.getScroll(),m=r[0]+k.left,n=r[1]+k.top,s=n+f.offsetHeight,t=m+f.offsetWidth,l=h.clientHeight,p=parseInt(k.top,10),o=parseInt(k.left,10),v=p+l,w=o+h.clientWidth,i,j;d=d===null||d===undefined?20:d;if(f.offsetHeight>l||n<p){j=n-d}else {if(s>v){j=s-l+d}}if(q!==!1&&f.offsetWidth>h.clientWidth||m<o){i=m-d}else {if(q!==!1&&t>w){i=t-h.clientWidth+d}}b=b===!0&&{}||b;a=a===!0&&{}||a;e=e||g;if(b&&a){b.listeners=Ext.apply(b.listeners||{},{'afteranimate':function(){a.listeners=Ext.apply(a.listeners||{},{'afteranimate':function(){c&&c.call(e);c=null}});Ext.fly(f).highlight(null,a)}})}else {if(b){b.listeners=Ext.apply(b.listeners,{'afteranimate':function(){c&&c.call(e);c=null}})}else {if(a){a.listeners=Ext.apply(a.listeners||{},{'afteranimate':function(){c&&c.call(e);c=null}})}}}j!==undefined&&g.scrollVerticallyTo(j,b);i!==undefined&&g.scrollHorizontallyTo(i,b);!b&&a&&Ext.fly(f).highlight(null,a);!b&&!a&&c&&c.call(e)},disableViewScroller:function(b){var a=this.getScrollable();if(a){if(a.setDisabled){a.setDisabled(b)}else {a.setConfig({x:!b,y:!b})}}},shouldAdjustForRtl:function(){return this.rtl&&!Ext.rootInheritedState.rtl},getHorizontalPositionSide:function(){return this.rtl?'right':'left'},getViewContainerElementTop:function(){var a;if(Ext.versions.extjs.isGreaterThan('6.2.0')){a=this.up('timelinegrid,timelinetree').getView().el}else {a=this.getEl()}return a.getY()},getViewContainerHeight:function(){if(Ext.versions.extjs.isGreaterThan('6.2.0')){return this.up('timelinegrid,timelinetree').getView().el.getHeight()}return this.getHeight()},getScrollableMaxPosition:function(){return {x:this.getScrollable().getMaxPosition().x,y:this.getVerticalScrollableMaxHeight()}},getVerticalScrollableMaxHeight:function(){var a;if(Ext.getVersion().isGreaterThan('6.2.0')){a=this.up('timelinegrid,timelinetree').getScrollable()}else {a=this.getScrollable()}return a.getMaxPosition().y},getScrollableContainerRegion:function(){var a=this.getEl().getRegion();if(Ext.versions.extjs.isGreaterThan('6.2.0')){a.top=this.up('timelinegrid, timelinetree').getScrollable().getElement().getY()}return new Ext.util.Region(a.top,a.right,a.top+this.getViewContainerHeight(),a.left)},scrollHorizontallyBy:function(b,a){this.scrollBy(b,0,a)},scrollVerticallyBy:function(c,b){var a;if(Ext.versions.extjs.isGreaterThan('6.2.0')){a=this.up('timelinegrid, timelinetree').getScrollable()}else {a=this.getScrollable()}a.scrollBy(0,c,b)}},0,0,0,0,0,0,[Sch.mixin,'TimelineView'],0);Ext.cmd.derive('Sch.view.TimelineGridView',Ext.grid.View,{infiniteScroll:!1,bufferCoef:5,bufferThreshold:0.2,cachedScrollDate:null,boxIsReady:!1,ignoreNextHorizontalScroll:!1,constructor:function(a){Ext.view.Table.prototype.constructor.apply(this,arguments);if(this.infiniteScroll){this.on('boxready',this.setupInfiniteScroll,this)}if(this.timeAxisViewModel){this.relayEvents(this.timeAxisViewModel,['columnwidthchange'])}},setupInfiniteScroll:function(){var c=this.panel.ownerCt;this.cachedScrollDate=c.startDate||this.timeAxis.getStart();if(Ext.getVersion().isLessThan('6.0.1')&&Ext.supports.Touch&&Ext.os.is.Windows){var a=this.panel.headerCt.getScrollable();var b=this.getScrollable();a.onIdle&&Ext.GlobalEvents.un('idle',a.onIdle,a);b.onIdle&&Ext.GlobalEvents.un('idle',b.onIdle,b)}var d=this;c.calculateOptimalDateRange=function(c,f,a,b){if(b){return b}var e=Sch.preset.Manager.getPreset(a.preset);return d.calculateInfiniteScrollingDateRange(c,e.getBottomHeader().unit,a.increment,a.width,!0)};this.bindInfiniteScrollListeners()},bindInfiniteScrollListeners:function(){this.getScrollable().on('scroll',this.onHorizontalScroll,this)},unbindInfiniteScrollListeners:function(){this.getScrollable().un('scroll',this.onHorizontalScroll,this);this.infiniteScroll=!1},onHorizontalScroll:function(g,a,h){if(this.ignoreNextHorizontalScroll||this.cachedScrollDate){this.ignoreNextHorizontalScroll=!1;return}var e=Ext.getScrollbarSize(),f=this.getWidth(),d=f*this.bufferThreshold*this.bufferCoef,c=this.getScrollable().getMaxPosition().x;c-=e.width;if(c-a<d||a<d){this.shiftToDate(this.getDateFromCoordinate(a,null,!0));if(Ext.getVersion().isGreaterThan('6.2.0')){var b=this.getScrollable()._translatable;b&&b.stopAnimation()}else {this.el.stopAnimation()}}},refresh:function(){Ext.view.Table.prototype.refresh.apply(this,arguments);if(this.infiniteScroll&&!this.scrollStateSaved&&this.boxIsReady){this.restoreScrollToCachedDate()}},onResize:function(a,d,b,c){this.boxIsReady=!0;Ext.view.Table.prototype.onResize.apply(this,arguments);if(this.infiniteScroll&&a>0&&a!==b){this.shiftToDate(this.cachedScrollDate||this.getVisibleDateRange().startDate,this.cachedScrollDateIsCentered)}},restoreScrollToCachedDate:function(){if(this.cachedScrollDate&&this.boxIsReady){this.ignoreNextHorizontalScroll=!0;this.scrollToDate(this.cachedScrollDate);this.cachedScrollDate=null}},scrollToDate:function(b){this.cachedScrollDate=b;if(this.cachedScrollDateIsCentered){this.panel.ownerCt.scrollToDateCentered(b)}else {this.panel.ownerCt.scrollToDate(b)}var a=this.getScrollX();this.panel.scrollLeftPos=a;this.headerCt.setScrollX(a);if(Ext.getVersion().isGreaterThan('6.2.0')){this.up('timelinegrid,timelinetree').lastScrollPos.x=a}},blockRestoringInfiniteScrollDate:function(){this.scrollStateSaved=this.boxIsReady},resumeRestoringInfiniteScrollDate:function(){this.scrollStateSaved=!1;if(this.infiniteScroll&&this.cachedScrollDate){this.restoreScrollToCachedDate()}},calculateInfiniteScrollingDateRange:function(f,a,b,d,k){var c=this.timeAxis,g=this.getWidth(),h;d=d||this.timeAxisViewModel.getTickWidth();b=b||c.increment||1;a=a||c.unit;var e=Sch.util.Date;var i=Math.ceil(g*this.bufferCoef/d);if(k){var j=Math.ceil(g*(1+this.bufferCoef)/(2*d))*b;h={start:c.floorDate(e.add(f,a,-j),!1,a,b),end:c.ceilDate(e.add(f,a,j),!1,a,b)}}else {h={start:c.floorDate(e.add(f,a,-i*b),!1,a,b),end:c.ceilDate(e.add(f,a,Math.ceil((g/d+i)*b)),!1,a,b)}}return h},shiftToDate:function(c,a){var b=this.calculateInfiniteScrollingDateRange(c,null,null,null,a);this.cachedScrollDate=c;this.cachedScrollDateIsCentered=a;this.timeAxis.setTimeSpan(b.start,b.end)},destroy:function(){if(this.infiniteScroll&&this.rendered){this.unbindInfiniteScrollListeners()}Ext.view.Table.prototype.destroy.apply(this,arguments)}},1,0,['component','box','dataview','tableview','gridview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0},0,[[Sch.mixin.TimelineView.prototype.mixinId||Sch.mixin.TimelineView.$className,Sch.mixin.TimelineView]],[Sch.view,'TimelineGridView'],0);Ext.cmd.derive('Sch.eventlayout.Horizontal',Ext.Base,{nbrOfBandsByResource:null,bandIndexToPxConvertFn:null,bandIndexToPxConvertScope:null,constructor:function(a){Ext.apply(this,a);this.nbrOfBandsByResource={}},clearCache:function(a){if(a){delete this.nbrOfBandsByResource[a.internalId]}else {this.nbrOfBandsByResource={}}},getNumberOfBands:function(b,a){var c=this.nbrOfBandsByResource;if(c.hasOwnProperty(b.internalId)){return c[b.internalId]}var d=Ext.isFunction(a)?a():a;var e=Ext.Array.map(d,function(c){return {start:c.getStartDate(),end:c.getEndDate(),event:c}});return this.applyLayout(e,b)},applyLayout:function(c,b){var a=c.slice();var d=this;a.sort(function(a,e){return d.sortEvents(a.event,e.event)});return this.nbrOfBandsByResource[b.internalId]=this.layoutEventsInBands(a)},sortEvents:function(c,d){var a=c.getStartDate();var b=d.getStartDate();var e=a-b===0;if(e){return c.getEndDate()>d.getEndDate()?-1:1}else {return a<b?-1:1}},layoutEventsInBands:function(b){var c=0;do{var a=b[0];while(a){a.top=this.bandIndexToPxConvertFn.call(this.bandIndexToPxConvertScope||this,c,a.event);Ext.Array.remove(b,a);a=this.findClosestSuccessor(a,b)}c++}while(b.length>0);return c},findClosestSuccessor:function(d,b){var f=Infinity,e,h=d.end,c,g=d.end-d.start===0;for(var a=0,i=b.length;a<i;a++){c=b[a].start-h;if(c>=0&&c<f&&(c>0||b[a].end-b[a].start>0||!g)){e=b[a];f=c}}return e}},1,0,0,0,0,0,[Sch.eventlayout,'Horizontal'],0);Ext.cmd.derive('Sch.view.Vertical',Ext.Base,{view:null,constructor:function(a){Ext.apply(this,a)},getElementsFromEventRecord:function(e,d,f,c){var b=this.view,a;c=c||!1;if(d){a='[id^='+b.eventPrefix+e.internalId+'-'+d.internalId+'-]'}else {a='[id^='+b.eventPrefix+e.internalId+'-]'}return b.getEl().query(a,c)},translateToScheduleCoordinate:function(b){var a=this.view;return b-a.getViewContainerElementTop()+a.getVerticalScroll()},translateToPageCoordinate:function(c){var a=this.view;var b=a.getVerticalScroll();return c+a.getViewContainerElementTop()-b},getDateFromXY:function(d,b,c){var a=d[1];if(!c){a=this.translateToScheduleCoordinate(a)}return this.view.timeAxisViewModel.getDateFromPosition(a,b)},getEventRenderData:function(f,k){var b=Math,d=f.getStartDate(),e=f.getEndDate(),c=this.view,g=c.timeAxis.getStart(),h=c.timeAxis.getEnd(),i=b.floor(c.getCoordinateFromDate(Sch.util.Date.max(d,g))),j=b.floor(c.getCoordinateFromDate(Sch.util.Date.min(e,h))),a={event:f};a.top=b.max(0,b.min(i,j)-c.eventBorderWidth);a.height=b.max(1,b.abs(i-j));a.start=d;a.end=e;a.startsOutsideView=d<g;a.endsOutsideView=e>h;return a},getScheduleRegion:function(b,i){var a=this.view,c=b?Ext.fly(a.getScheduleCell(a.getNodes()[0],a.getResourceStore().indexOf(b))).getRegion():a.getTableRegion(),e=a.timeAxis.getStart(),g=a.timeAxis.getEnd(),d=a.getDateConstraints(b,i)||{start:e,end:g},f=this.translateToPageCoordinate(a.getCoordinateFromDate(Sch.util.Date.max(e,d.start))),h=this.translateToPageCoordinate(a.getCoordinateFromDate(Sch.util.Date.min(g,d.end))),k=c.left+a.barMargin,j=(b?c.left+this.getResourceColumnWidth(b):c.right)-a.barMargin;return new Ext.util.Region(Math.min(f,h),j,Math.max(f,h),k)},getResourceColumnWidth:function(a){return this.view.timeAxisViewModel.resourceColumnWidth},getResourceColumnLayoutAvailableWidth:function(b){var a=this;return a.getResourceColumnWidth(b)-2*a.view.barMargin-a.view.cellBorderWidth},getResourceRegion:function(b,c,e){var a=this.view,d=a.getResourceStore().indexOf(b)*this.getResourceColumnWidth(b),f=a.timeAxis.getStart(),h=a.timeAxis.getEnd(),k=c?Sch.util.Date.max(f,c):f,m=e?Sch.util.Date.min(h,e):h,g=Math.max(0,a.getCoordinateFromDate(k)-a.cellTopBorderWidth),i=a.getCoordinateFromDate(m)-a.cellTopBorderWidth,l=d+a.cellBorderWidth,j=d+this.getResourceColumnWidth(b)-a.cellBorderWidth;return new Ext.util.Region(Math.min(g,i),j,Math.max(g,i),l)},columnRenderer:function(o,c,f,m,h){var a=this.view;var i='';if(m===0){var p=Sch.util.Date,n=a.timeAxis,b,e,d,l;b=[];e=a.getEventStore().getEventsForResource(f);for(d=0,l=e.length;d<l;d++){var g=e[d],j=g.getStartDate(),k=g.getEndDate();if(j&&k&&n.timeSpanInAxis(j,k)){b.push(a.generateTplData(g,f,h))}}a.eventLayout.vertical.applyLayout(b,this.getResourceColumnLayoutAvailableWidth(f));i='&#160;'+a.eventTpl.apply(b)}if(h%2===1){c.tdCls=(c.tdCls||'')+' '+a.altColCls;c.cellCls=(c.cellCls||'')+' '+a.altColCls}return i},resolveResource:function(a){var f=this,b=f.view,d,c=-1,e;d=Ext.fly(a).is(b.eventSelector)&&a||Ext.fly(a).up(b.eventSelector,null,!0);if(d){e=b.getResourceRecordFromDomId(d.id)}else {a=Ext.fly(a).is(b.timeCellSelector)?a:Ext.fly(a).up(b.timeCellSelector,null,!0);if(a){if(Ext.isIE8m){c=0;a=a.previousSibling;while(a){if(a.nodeType===1){c++}a=a.previousSibling}}else {c=Ext.Array.indexOf(Array.prototype.slice.call(a.parentNode.children),a)}}e=c>=0&&b.getResourceStore().getAt(c)||null}return e},onEventUpdate:function(l,a){var c=this;var b=a.previous||{};var g=c.view;var j=g.timeAxis;var d=a.getStartDate();var e=a.getEndDate();var i=b.StartDate||d;var k=b.EndDate||e;var h=i&&k&&j.timeSpanInAxis(i,k);var f;if(a.resourceIdField in b&&h){f=l.getResourceStore().getById(b[a.resourceIdField]);f&&c.relayoutRenderedEvents(f)}if(d&&e&&j.timeSpanInAxis(d,e)||h){c.renderSingle(a);Ext.Array.each(a.getResources(),function(b){c.relayoutRenderedEvents(b);g.getEventSelectionModel().isSelected(a)&&g.onEventBarSelect(a,!0)})}},onEventAdd:function(g,e){var d=this,f=d.view,a,b,c;if(e.length===1){a=e[0];b=a.getStartDate();c=a.getEndDate();if(b&&c&&f.timeAxis.timeSpanInAxis(b,c)){d.renderSingle(a);Ext.Array.each(g.getResourcesForEvent(a),function(a){d.relayoutRenderedEvents(a)})}}else {f.repaintAllEvents()}},onEventRemove:function(j,f){var i=this,g=i.view,e,c,d,b,h,a;for(a=!1,b=0,h=f.length;!a&&b<h;b++){e=f[b];c=e.getStartDate();d=e.getEndDate();a=c&&d&&g.timeAxis.timeSpanInAxis(c,d);a&&g.repaintAllEvents()}},relayoutRenderedEvents:function(b){var c=[],a=this.view,d=a.getEventStore().getEventsForResource(b);Ext.Array.each(d,function(d){var e=a.getElementsFromEventRecord(d,b);e.length&&c.push({start:d.getStartDate(),end:d.getEndDate(),event:d,node:e[0]})});a.eventLayout.vertical.applyLayout(c,this.getResourceColumnLayoutAvailableWidth(b));Ext.Array.each(c,function(c){c.node.setStyle({left:c.left+'px',width:c.width+'px'});a.fireEvent('eventrepaint',a,c.event,c.node)})},renderSingle:function(b){var e=this,a=e.view,c=b.getStartDate(),d=b.getEndDate(),f;Ext.Array.each(a.getElementsFromEventRecord(b),function(a){a.destroy()});if(c&&d&&a.timeAxis.timeSpanInAxis(c,d)){Ext.Array.each(b.getResources(),function(d){var e=a.getResourceStore().indexOf(d),c=Ext.fly(a.getScheduleCell(0,e)),f;if(c){f=a.generateTplData(b,d,e);a.eventTpl.append(c.first(),[f])}})}},getTimeSpanRegion:function(f,d){var a=this.view,c=a.getCoordinateFromDate(f),e=d?a.getCoordinateFromDate(d):c,b=a.getTableRegion(),g=b?b.right-b.left:a.getEl().dom.clientWidth;return new Ext.util.Region(Math.min(c,e),g,Math.max(c,e),0)},getStartEndDatesFromRegion:function(d,a){var c=this.view.getDateFromCoordinate(d.top,a),b=this.view.getDateFromCoordinate(d.bottom,a);if(c&&b){return {start:c,end:b}}else {return null}},setColumnWidth:function(a,c){var b=this.view;b.resourceColumnWidth=a;b.getTimeAxisViewModel().setViewColumnWidth(a,c)},getVisibleDateRange:function(){var a=this.view;if(!a.rendered){return null}var e=a.getScroll(),d=a.getViewContainerHeight(),b=a.getTableRegion(),c=a.timeAxis.getEnd();if(b.bottom-b.top<d){var f=a.timeAxis.getStart();return {startDate:f,endDate:c}}return {startDate:a.getDateFromCoordinate(e.top,null,!0),endDate:a.getDateFromCoordinate(e.top+d,null,!0)||c}},getItemBox:function(a){var b=this;return Ext.Array.map(a.getResources(),function(c){return b.getResourceEventBox(a,c)})},getResourceEventBox:function(d,c){var s=Sch.util.Date,f=this,e=null,a=f.view,q=a.timeAxis.getStart(),r=a.timeAxis.getEnd(),m=d.getStartDate(),n=d.getEndDate(),o,i,b,h,k,l,g,j;if(m&&n&&s.intersectSpans(m,n,q,r)){if(a.managedEventSizing){o=a.eventLayout.vertical;var p=a.getEventStore().filterEventsForResource(c,a.timeAxis.isRangeInAxis,a.timeAxis);i=Ext.Array.map(p,f.getEventRenderData,f);o.applyLayout(i,f.getResourceColumnLayoutAvailableWidth(c));b=Ext.Array.findBy(i,function(a){return a.event==d});if(b){h=a.getResourceStore().indexOf(c)*f.getResourceColumnWidth(c);e={rendered:!0,start:b.left+h,end:b.left+b.width+h,top:b.top,bottom:b.top+b.height}}}else {k=a.getElementsFromEventRecord(d,d!==c&&c);if(k.length){l=k[0];g=l.getOffsetsTo(a.getEl());j=l.getBox();e={rendered:!0,start:g[0],end:g[0]+j.width,top:g[1],bottom:g[1]+j.height}}}if(e){e=f.adjustItemBox(d,e)}}return e},adjustItemBox:function(b,a){return a},getConnectorStartSide:function(a){return 'top'},getConnectorEndSide:function(a){return 'bottom'}},1,0,0,0,0,0,[Sch.view,'Vertical'],0);Ext.cmd.derive('Sch.eventlayout.Vertical',Ext.Base,{view:null,constructor:function(a){Ext.apply(this,a)},applyLayout:function(a,i){if(a.length===0){return}var o=this;a.sort(function(b,c){return o.sortEvents(b.event,c.event)});var l,n,m=this.view,r=Sch.util.Date,q=1,p,f,e,c;for(var b=0,h=a.length;b<h;b++){e=a[b];l=e.start;n=e.end;f=this.findStartSlot(a,e);var d=this.getCluster(a,b);if(d.length>1){e.left=f.start;e.width=f.end-f.start;c=1;while(c<d.length-1&&d[c+1].start-e.start===0){c++}var k=this.findStartSlot(a,d[c]);if(k&&k.start<0.8){d=d.slice(0,c)}}var g=d.length,j=(f.end-f.start)/g;for(c=0;c<g;c++){d[c].width=j;d[c].left=f.start+c*j}b+=g-1}for(b=0,h=a.length;b<h;b++){a[b].width=a[b].width*i;a[b].left=m.barMargin+a[b].left*i}},findStartSlot:function(c,d){var a=this.getPriorOverlappingEvents(c,d),b;if(a.length===0){return {start:0,end:1}}for(b=0;b<a.length;b++){if(b===0&&a[0].left>0){return {start:0,end:a[0].left}}else {if(a[b].left+a[b].width<(b<a.length-1?a[b+1].left:1)){return {start:a[b].left+a[b].width,end:b<a.length-1?a[b+1].left:1}}}}return !1},getPriorOverlappingEvents:function(b,d){var g=Sch.util.Date,e=d.start,f=d.end,c=[];for(var a=0,h=Ext.Array.indexOf(b,d);a<h;a++){if(g.intersectSpans(e,f,b[a].start,b[a].end)){c.push(b[a])}}c.sort(this.sortOverlappers);return c},sortOverlappers:function(a,b){return a.left<b.left?-1:1},getCluster:function(a,c){if(c>=a.length-1){return [a[c]]}var g=[a[c]],d=a[c].start,e=a[c].end,h=a.length,f=Sch.util.Date,b=c+1;while(b<h&&f.intersectSpans(d,e,a[b].start,a[b].end)){g.push(a[b]);d=f.max(d,a[b].start);e=f.min(a[b].end,e);b++}return g},sortEvents:function(c,d){var a=c.getStartDate(),f=c.getEndDate();var b=d.getStartDate(),g=d.getEndDate();var e=a-b===0;if(e){return f>g?-1:1}else {return a<b?-1:1}}},1,0,0,0,0,0,[Sch.eventlayout,'Vertical'],0);Ext.cmd.derive('Sch.mixin.AbstractSchedulerView',Ext.Base,{_cmpCls:'sch-schedulerview',scheduledEventName:'event',eventTemplateClass:'Sch.template.Event',eventTpl:null,barMargin:0,constrainDragToResource:!1,allowOverlap:null,readOnly:null,altColCls:'sch-col-alt',dynamicRowHeight:!0,managedEventSizing:!0,eventAnimations:!0,horizontalLayoutCls:'Sch.eventlayout.Horizontal',horizontalEventSorterFn:null,verticalLayoutCls:'Sch.eventlayout.Vertical',verticalEventSorterFn:null,eventCls:'sch-event',verticalViewClass:'Sch.view.Vertical',eventStore:null,resourceStore:null,eventLayout:null,terminalSides:null,_initializeSchedulerView:function(){var b=Ext.ClassManager.get(this.horizontalLayoutCls);var a=Ext.ClassManager.get(this.verticalLayoutCls);this.eventSelector='.'+this.eventCls;this.eventLayout={};this.eventTpl=this.eventTpl||Ext.create(this.eventTemplateClass,{eventPrefix:this.eventPrefix,terminalSides:this.terminalSides,resizeHandles:this.eventResizeHandles});if(b){this.eventLayout.horizontal=new b(Ext.apply({timeAxisViewModel:this.timeAxisViewModel},{bandIndexToPxConvertFn:this.horizontal.layoutEventVertically,bandIndexToPxConvertScope:this.horizontal},this.horizontalEventSorterFn?{sortEvents:this.horizontalEventSorterFn}:{}))}if(a){this.eventLayout.vertical=new a(Ext.apply({view:this},this.verticalEventSorterFn?{sortEvents:this.verticalEventSorterFn}:{}))}this.store=this.store||this.resourceStore;this.resourceStore=this.resourceStore||this.store},generateTplData:function(a,d,e){var b=this[this.mode].getEventRenderData(a,d,e),f=a.getStartDate(),h=a.getEndDate(),c=a.getCls()||'';c+=' sch-event-resizable-'+a.getResizable();if(a.dirty){c+=' sch-dirty '}if(b.endsOutsideView){c+=' sch-event-endsoutside '}if(b.startsOutsideView){c+=' sch-event-startsoutside '}if(this.eventBarIconClsField){c+=' sch-event-withicon '}if(a.isDraggable()===!1){c+=' sch-event-fixed '}if(h-f===0){c+=' sch-event-milestone '}if(this.getEventSelectionModel().isSelected(a)){c+=' '+this.selectedEventCls+' '}if(this.isWeekView()){b.id=a.internalId+'-calendar-'+e+'-x'}else {b.id=a.internalId+'-'+d.internalId+'-x'}b.internalCls=c;b.start=f;b.end=h;b.iconCls=a.data[this.eventBarIconClsField]||a.getIconCls&&a.getIconCls()||'';b.event=a;if(this.eventRenderer){var g=this.eventRenderer.call(this.eventRendererScope||this,a,d,b,e);if(this.eventBodyTemplate){b.body=this.eventBodyTemplate.apply(g)}else {b.body=g}}else {if(this.eventBodyTemplate){b.body=this.eventBodyTemplate.apply(a.data)}else {if(this.eventBarTextField){b.body=a.data[this.eventBarTextField]||''}}}return b},resolveResource:function(b){var a=this;return a[a.mode].resolveResource(b)},getResourceRegion:function(a,b,c){return this[this.mode].getResourceRegion(a,b,c)},resolveEventRecord:function(a){a=a.dom?a.dom:a;if(!Ext.fly(a).is(this.eventSelector)){a=Ext.fly(a).up(this.eventSelector)}return a&&this.getEventRecordFromDomId(a.id)},resolveEventRecordFromResourceRow:function(a){var c=this,d=c.getEventSelectionModel(),b,e;a=a.dom?a.dom:a;b=c.getRecord(a);return d.getFirstSelectedEventForResource(b)},resolveAssignmentRecord:function(f){var c=this,d=c.getEventStore().getAssignmentStore(),e=null,b,a;if(d){b=c.getEventRecordFromDomId(f.id);a=c.getResourceRecordFromDomId(f.id);if(b&&a){e=d.getAssignmentForEventAndResource(b,a)}}return e},getEventRecordFromDomId:function(a){a=this.getEventIdFromDomNodeId(a);return this.getEventStore().getModelByInternalId(a)},getResourceRecordFromDomId:function(a){a=this.getResourceIdFromDomNodeId(a);return this.getResourceStore().getByInternalId(a)},isDateRangeAvailable:function(c,d,a,b){return this.getEventStore().isDateRangeAvailable(c,d,a,b)},getEventsInView:function(){var a=this.timeAxis.getStart(),b=this.timeAxis.getEnd();return this.getEventStore().getEventsInTimeSpan(a,b)},getEventNodes:function(){return this.getEl().select(this.eventSelector)},highlightEvents:function(b){var c=this;var a=[];Ext.Array.each([].concat(b),function(d){a.push.apply(a,c.getElementsFromEventRecord(d,null,null,!0))});Ext.Array.each([].concat(a),function(a){Ext.fly(a).addCls('sch-event-highlighted')})},highlightEventsBy:function(c,b){var a=this.getEventsInView();this.highlightEvents(a.filterBy(c,b).getRange())},clearHighlightedEvents:function(b,a){this.getEl().select('.sch-event-highlighted').removeCls('sch-event-highlighted')},onEventCreated:function(a){},getEventStore:function(){return this.eventStore},registerEventEditor:function(a){this.eventEditor=a;this.relayEvents(a.editor||a,['beforeeventadd'])},getEventEditor:function(){return this.eventEditor},onEventUpdate:function(c,b,a){this[this.mode].onEventUpdate(c,b,a)},onEventAdd:function(b,a){if(!Ext.isArray(a)){a=[a]}this[this.mode].onEventAdd(b,a)},onAssignmentAdd:function(c,a){var b=this;Ext.Array.each(a,function(e){var d=e.getResource();d&&b.repaintEventsForResource(d)})},onAssignmentUpdate:function(g,a){var b=this,d=a.previous&&a.previous[a.resourceIdField],c=a.getResourceId(),f,e;if(d){f=b.getResourceStore().getModelById(d);b.repaintEventsForResource(f)}if(c){e=b.getResourceStore().getModelById(c);b.repaintEventsForResource(e)}},onAssignmentRemove:function(c,b){var a=this;Ext.Array.each(b,function(f){var d=f.getResourceId();var e=d&&a.getResourceStore().getModelById(d);e&&a.repaintEventsForResource(e)})},onEventRemove:function(b,a){this[this.mode].onEventRemove(b,a)},setEventStore:function(b,g){var a=this;var h=a.getEventStore();var c={scope:a,refresh:a.onEventDataRefresh,addrecords:a.onEventAdd,updaterecord:a.onEventUpdate,removerecords:a.onEventRemove,add:a.onEventAdd,update:a.onEventUpdate,remove:a.onEventRemove,nodeinsert:a.onEventAdd,nodeappend:a.onEventAdd};var d={scope:a,refresh:a.onEventDataRefresh,load:a.onEventDataRefresh,update:a.onAssignmentUpdate,add:a.onAssignmentAdd,remove:a.onAssignmentRemove};if(!Ext.versions.touch){c.clear=a.onEventDataRefresh}if(!g&&a.eventStore){a.eventStore.setResourceStore(null);if(b!==a.eventStore&&a.eventStore.autoDestroy){a.eventStore.destroy()}else {if(a.mun){a.mun(a.eventStore,c);var e=a.eventStore.getAssignmentStore();if(e){a.mun(e,d)}}else {a.eventStore.un(c)}}if(!b){a.eventStore=null}}if(b){b=Ext.data.StoreManager.lookup(b);if(a.mon){a.mon(b,c)}else {b.on(c)}a.eventStore=b;b.setResourceStore(a.getResourceStore());var f=b.getAssignmentStore();if(f){a.mon(f,d)}}if(b&&!g){this.getTimeAxisViewModel().setEventStore(b);this.getEventSelectionModel().bindStore(b);this.fireEvent('eventstorechange',this,b,h);a.refreshView()}},onEventDataRefresh:function(){this.refreshKeepingScroll()},onEventBarSelect:function(a){var d=this,c,b;if(a instanceof Sch.model.Assignment){c=a.getEvent();b=a.getResource()}else {c=a;b=null}Ext.Array.each(d.getElementsFromEventRecord(c,b,null,!0),function(b){Ext.fly(b).addCls(d.selectedEventCls)})},onEventBarDeselect:function(a){var d=this,b,c;if(a instanceof Sch.model.Assignment){b=a.getEvent();c=a.getResource()}else {b=a;c=null}b&&Ext.Array.each(d.getElementsFromEventRecord(b,c,null,!0),function(b){Ext.fly(b).removeCls(d.selectedEventCls)})},refresh:function(){throw 'Abstract method call'},repaintEventsForResource:function(a){throw 'Abstract method call'},repaintAllEvents:function(){this.refreshKeepingScroll()},scrollEventIntoView:function(b,c,e,d,f){var g=this,a=b.getResources();if(a.length>1){Ext.Error.raise('AbstractSchedulerView::scrollEventIntoView() is not applicable for events with multiple assignments, please use AbstractSchedulerView::scrollResourceEventIntoView() instead.')}a.length&&g.scrollResourceEventIntoView(a[0],b,null,c,e,d,f)},getResourceStore:function(){return this.resourceStore},setResourceStore:function(a){var b=this.resourceStore;this.resourceStore=a;if(a){this.fireEvent('resourcestorechange',this,a,b)}}},0,0,0,0,0,0,[Sch.mixin,'AbstractSchedulerView'],0);Ext.cmd.derive('Sch.patches.DragDropManager',Sch.util.Patch,{target:'Ext.dd.DragDropManager',minVersion:'6.0.0',applyFn:function(){Ext.override(Ext.dd.DragDropManager,{fireEvents:function(e,u){var d=this,t=Ext.supports.Touch,c=d.dragCurrent,l=d.currentPoint,w=l.x,x=l.y,j=[],s=[],h=[],i=[],g=[],k=[],v=t?document.documentElement.clientWidth/window.innerWidth:1,p,b,o,r,a,f,n,m;if(!c||c.isLocked()){return}m=!(c.deltaX<0||c.deltaY<0);if(t||!d.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&m){p=c.getDragEl();if(m){p.style.visibility='hidden'}var q=Ext.getBody().getScroll();e.target=document.elementFromPoint(w-q.left/v,x-q.top/v);if(m){p.style.visibility='visible'}}for(a in d.dragOvers){b=d.dragOvers[a];delete d.dragOvers[a];if(!d.isTypeOfDD(b)||b.destroyed){continue}if(d.notifyOccluded){if(!this.isOverTarget(l,b,d.mode)){h.push(b)}}else {if(!e.within(b.getEl())){h.push(b)}}s[a]=!0}for(n in c.groups){if('string'!==typeof n){continue}for(a in d.ids[n]){b=d.ids[n][a];if(d.isTypeOfDD(b)&&(o=b.getEl())&&b.isTarget&&!b.isLocked()&&Ext.fly(o).isVisible(!0)&&(b!==c||c.ignoreSelf===!1)){if(d.notifyOccluded){if((b.zIndex=d.getZIndex(o))!==-1){r=!0}j.push(b)}else {if(e.within(b.getEl())){j.push(b);break}}}}}if(r){Ext.Array.sort(j,d.byZIndex)}for(a=0,f=j.length;a<f;a++){b=j[a];if(d.isOverTarget(l,b,d.mode)){if(u){g.push(b)}else {if(!s[b.id]){k.push(b)}else {i.push(b)}d.dragOvers[b.id]=b}if(!d.notifyOccluded){break}}}if(d.mode){if(h.length){c.b4DragOut(e,h);c.onDragOut(e,h)}if(k.length){c.onDragEnter(e,k)}if(i.length){c.b4DragOver(e,i);c.onDragOver(e,i)}if(g.length){c.b4DragDrop(e,g);c.onDragDrop(e,g)}}else {for(a=0,f=h.length;a<f;++a){c.b4DragOut(e,h[a].id);c.onDragOut(e,h[a].id)}for(a=0,f=k.length;a<f;++a){c.onDragEnter(e,k[a].id)}for(a=0,f=i.length;a<f;++a){c.b4DragOver(e,i[a].id);c.onDragOver(e,i[a].id)}for(a=0,f=g.length;a<f;++a){c.b4DragDrop(e,g[a].id);c.onDragDrop(e,g[a].id)}}if(u&&!g.length){c.onInvalidDrop(e)}}});var b=Ext.dd.ScrollManager;var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,b.onFire,b);a.stopDrag=Ext.Function.createSequence(a.stopDrag,b.onStop,b)}},0,0,0,0,0,0,[Sch.patches,'DragDropManager'],0);Ext.cmd.derive('Sch.patches.NavigationModel',Sch.util.Patch,{target:'Ext.grid.NavigationModel',minVersion:'6.0.0',overrides:{setPosition:function(g,f,a,e,d){var b=this;if(Ext.isIE&&a&&(a.getKey()===a.PAGE_DOWN||a.getKey()===a.PAGE_UP)){var c=b.lastFocused;if(a.view.isLockedView&&c&&a.view.getVisibleColumnManager().indexOf(c.column)===-1){a.view=a.view.lockingPartner}}if(Ext.getVersion().equals('6.0.1.250')){b.patchedSetPosition.apply(this,arguments)}else {return b.callParent(arguments)}},patchedSetPosition:function(c,f,l,r,o){var a=this,b,n,m,g,j,e,h,d,i,k=c==null&&f==null,q=a.record==null&&a.recordIndex==null&&a.item==null;if(c&&c.isCellContext){b=c.view}else {if(l&&l.view){b=l.view}else {if(a.lastFocused){b=a.lastFocused.view}else {b=a.view}}}b.getFocusTask().cancel();if(b.destroyed||!b.refreshCounter||!b.ownerCt||k&&q||!b.all.getCount()){return}m=b.getSelectionModel();g=b.dataSource;j=b.getVisibleColumnManager();if(c&&c.isCellContext){d=c.record;e=c.rowIdx;h=Math.min(c.colIdx,j.getColumns().length-1);i=j.getColumns()[h];if(g.indexOf(d)===-1){n=b.getScrollable();a.recordIndex=-1;if(n.getPosition().y>=n.getMaxPosition().y-b.all.last(!0).offsetHeight){c.rowIdx--}e=Math.min(c.rowIdx,g.getCount()-1);d=g.getAt(e)}}else {if(k){d=e=null}else {if(f==null){f=a.lastFocused?a.lastFocused.column:0}if(typeof c==='number'){e=Math.max(Math.min(c,g.getCount()-1),0);d=g.getAt(c)}else {if(c.isEntity){d=c;e=g.indexOf(d)}else {if(c.tagName){d=b.getRecord(c);e=g.indexOf(d);if(e===-1){d=null}}else {if(q){return}k=!0;d=e=null}}}}if(d){if(e===-1){a.recordIndex=-1;d=g.getAt(0);e=0;f=null}if(f==null){if(!(i=a.column)){h=0;i=j.getColumns()[0]}}else {if(typeof f==='number'){i=j.getColumns()[f];h=f}else {i=f;h=j.indexOf(f)}}}else {k=!0;i=h=null}}if(b.actionableMode&&!k){var p=(new Ext.grid.CellContext(b)).setPosition(d,i);a.focusPosition(p);return b.ownerGrid.setActionableMode(!1,p)}if(e===a.recordIndex&&h===a.columnIndex&&b===a.position.view){return a.focusPosition(a.position)}if(a.cell){a.cell.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.previousCell=a.cell;a.previousColumn=a.column;a.previousColumnIndex=a.columnIndex;a.previousPosition=a.position.clone();a.selectionStart=m.selectionStart;a.position.setAll(b,a.recordIndex=e,a.columnIndex=h,a.record=d,a.column=i);if(k){a.item=a.cell=null}else {a.focusPosition(a.position,o)}if(!r){m.fireEvent('focuschange',m,a.previousRecord,a.record);b.fireEvent('rowfocus',a.record,a.item,a.recordIndex);b.fireEvent('cellfocus',a.record,a.cell,a.position)}if(l&&!o&&a.cell!==a.previousCell){a.fireNavigateEvent(l)}}}},0,0,0,0,0,0,[Sch.patches,'NavigationModel'],0);Ext.cmd.derive('Sch.util.ScrollManager',Ext.Base,{singleton:!0,vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:200,activeCmp:null,activeEl:null,scrollElRegion:null,scrollProcess:{},pt:null,scrollWidth:null,scrollHeight:null,direction:'both',constructor:function(){this.doScroll=Ext.Function.bind(this.doScroll,this)},triggerRefresh:function(){if(this.activeEl){this.refreshElRegion();this.clearScrollInterval();this.onMouseMove()}},doScroll:function(){var g=this.scrollProcess,d=g.cmp,f=d.rtl&&!d.up('[isViewport]'),c=g.dir[0],a=this.increment,h=this.activeCmp.getScrollX(),i=this.activeCmp.getVerticalScroll();if(c==='r'){a=Math.min(a,f?h:this.scrollWidth-h-this.activeEl.dom.clientWidth)}else {if(c==='d'){a=Math.min(a,this.scrollHeight-i-d.getViewContainerHeight())}}a=Math.max(a,0);var b=0,e=0;if(c==='r'){b=a}if(c==='l'){b=-a}if(c==='u'){e=-a}if(c==='d'){e=a}if(f){b=-b}if(b){d.scrollHorizontallyBy(b,{duration:this.animDuration,callback:this.triggerRefresh,scope:this})}else {if(e){d.scrollVerticallyBy(e,{duration:this.animDuration,callback:this.triggerRefresh,scope:this})}}},clearScrollInterval:function(){var a=this.scrollProcess;if(a.id){clearTimeout(a.id)}a.id=0;a.cmp=null;a.dir=''},isScrollAllowed:function(a){switch(this.direction){case 'both':return !0;case 'horizontal':return a==='right'||a==='left';case 'vertical':return a==='up'||a==='down';default:throw new Error('Invalid direction: '+this.direction);}},startScrollInterval:function(b,a){if(!this.isScrollAllowed(a)){return}this.clearScrollInterval();this.scrollProcess.cmp=b;this.scrollProcess.dir=a;this.scrollProcess.id=setTimeout(this.doScroll,this.frequency)},onMouseMove:function(c){var g=c?{x:c.getX(),y:c.getY(),right:c.getX(),bottom:c.getY()}:this.pt,l=g.x,m=g.y,d=this.scrollProcess,a=this.activeCmp,e=a.getScrollX(),i=a.getVerticalScroll(),n,h=a.rtl&&!a.up('[isViewport]'),k=this.activeEl,b=this.scrollElRegion,j=k.dom,f=this;this.pt=g;if(b&&b.contains(g)&&k.isScrollable()){if(b.bottom-m<=f.vthresh&&this.scrollHeight-i-a.getViewContainerHeight()>0){if(d.cmp!=a){this.startScrollInterval(a,'down')}return}else {if(b.right-l<=f.hthresh&&(h?e>0:this.scrollWidth-e-j.clientWidth>0)){if(d.cmp!=a){this.startScrollInterval(a,'right')}return}else {if(m-b.top<=f.vthresh&&i>0){if(d.cmp!=a){this.startScrollInterval(a,'up')}return}else {if(l-b.left<=f.hthresh&&(h?j.clientWidth+e<this.scrollWidth:e>0)){if(d.cmp!=a){this.startScrollInterval(a,'left')}return}}}}}this.clearScrollInterval()},refreshElRegion:function(){var a=this.activeEl.getRegion();this.scrollElRegion=this.activeCmp.getScrollableContainerRegion()},activate:function(a,d){var b=Ext.getScrollbarSize();this.direction=d||'both';this.activeCmp=a;this.activeEl=a.getEl();var c=a.getScrollableMaxPosition();this.scrollWidth=c.x+a.getWidth()-b.width;this.scrollHeight=c.y+a.getViewContainerHeight()-b.height;this.refreshElRegion();this.activeEl.on('mousemove',this.onMouseMove,this)},deactivate:function(){if(this.activeEl){this.clearScrollInterval();this.activeEl.un('mousemove',this.onMouseMove,this);this.activeEl=this.activeCmp=this.scrollElRegion=this.scrollWidth=this.scrollHeight=null;this.direction='both'}}},1,0,0,0,0,0,[Sch.util,'ScrollManager'],0);Ext.cmd.derive('Sch.util.DragTracker',Ext.dd.DragTracker,{xStep:1,yStep:1,deferredTouchActivation:0,constructor:function(){Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);this.on('dragstart',this.bindListenersOnDragStart);this.moveListener={pinchstart:this.abortWait,touchend:this.abortWait,mouseup:this.abortWait,mousemove:this.onMoveWhileWaiting,scope:this,capture:!0}},bindListenersOnDragStart:function(){var a=this.el;a.on(this.getListeners());this.on('dragend',this.unbindListenersOnDragEnd,this,{single:!0})},unbindListenersOnDragEnd:function(){this.el&&this.el.un(this.getListeners())},getListeners:function(){return {scroll:this.onMouseMove,pinchstart:this.onMouseUp,scope:this}},destroy:function(){clearTimeout(this.deferTimer);Ext.dd.DragTracker.prototype.destroy.apply(this,arguments)},setXStep:function(a){this.xStep=a},startScroll:null,deferTimer:null,deferTolerance:10,moveListener:null,setYStep:function(a){this.yStep=a},onMoveWhileWaiting:function(b,d){var a=b.getXY();var c=this.startXY;if(Math.max(Math.abs(c[0]-a[0]),Math.abs(c[1]-a[1]))>this.deferTolerance){this.abortWait();this.onMouseUp(b)}},abortWait:function(){clearTimeout(this.deferTimer);this.deferTimer=null;Ext.getDoc().un(this.moveListener)},getCurrentScroll:function(){return this.el.getScroll()},getRegion:function(){var e=this.startXY,a=this.getCurrentScroll();if(Ext.isIE&&this.rtl){a.left=this.el.dom.scrollWidth-this.el.getWidth()-a.left}var b=this.getXY(),c=b[0],d=b[1],j=a.left-this.startScroll.left,k=a.top-this.startScroll.top,f=e[0]-j,g=e[1]-k,h=Math.min(f,c),i=Math.min(g,d),m=Math.abs(f-c),l=Math.abs(g-d);return new Ext.util.Region(i,h+m,i+l,h)},onMouseDown:function(b,d){var c=b.event.touches||[];if(c.length>1){return}b.stopPropagation=Ext.emptyFn;this.startXY=b.getXY();if(this.deferredTouchActivation&&c.length===1){var a=this;Ext.getDoc().on(this.moveListener);this.deferTimer=setTimeout(function(){var c=a.deferredTouchActivation;Ext.getDoc().un(a.moveListener);a.deferredTouchActivation=!1;a.onMouseDown(b,d);a.deferredTouchActivation=c},this.deferredTouchActivation);return}Ext.dd.DragTracker.prototype.onMouseDown.call(this,b,d);this.lastXY=this.startXY;this.startScroll=this.getCurrentScroll();if(Ext.isIE&&this.rtl){this.startScroll.left=this.el.dom.scrollWidth-this.el.getWidth()-this.startScroll.left}},onMouseMove:function(a,g){if(this.active&&a.type==='mousemove'&&Ext.isIE9m&&!a.browserEvent.button){a.preventDefault();this.onMouseUp(a);return}a.preventDefault();var b=a.type==='scroll'?this.lastXY:a.getXY(),e=this.startXY;if(!this.active){if(Math.max(Math.abs(e[0]-b[0]),Math.abs(e[1]-b[1]))>this.tolerance){this.triggerStart(a)}else {return}}var c=b[0],d=b[1];if(this.xStep>1){c-=this.startXY[0];c=Math.round(c/this.xStep)*this.xStep;c+=this.startXY[0]}if(this.yStep>1){d-=this.startXY[1];d=Math.round(d/this.yStep)*this.yStep;d+=this.startXY[1]}var f=this.xStep>1||this.yStep>1;if(!f||c!==b[0]||d!==b[1]){this.lastXY=[c,d];if(this.fireEvent('mousemove',this,a)===!1){this.onMouseUp(a)}else {this.onDrag(a);this.fireEvent('drag',this,a)}}}},1,0,0,0,0,0,[Sch.util,'DragTracker'],0);Ext.cmd.derive('Sch.tooltip.ClockTemplate',Ext.XTemplate,{minuteHeight:8,minuteTop:2,hourHeight:8,hourTop:2,handLeft:10,mode:'hour',getRotateStyle:function(a){return 'transform:rotate(Ddeg);-ms-transform:rotate(Ddeg);-moz-transform: rotate(Ddeg);-webkit-transform: rotate(Ddeg);-o-transform:rotate(Ddeg);'.replace(/D/g,a)},getRotateStyleIE:function(){var a=Math.PI/180,b=Math.cos,c=Math.sin;return function(d,l,e){var m=this,h=d*a,f=b(h),g=c(h),o=e*c((90-d)*a),n=e*b((90-d)*a),k=Math.min(e,e-o),j=d>180?n:0,i="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11 = "+f+', M12 = '+-g+', M21 = '+g+', M22 = '+f+')';return Ext.String.format('filter:{0};-ms-filter:{0};top:{1}px;left:{2}px;',i,k+l,j+m.handLeft)}}(),constructor:function(){var a=Ext.isIE&&Ext.isIE8m;Ext.XTemplate.prototype.constructor.call(this,'<div class="sch-clockwrap '+(a?'':'sch-supports-border-radius')+' sch-clock-{[this.mode]}"><div class="sch-clock"><div class="sch-hourIndicator" style="{[this.getHourStyle((values.date.getHours() % 12) * 30,'+this.hourTop+', + '+this.hourHeight+')]}">{[Ext.Date.monthNames[values.date.getMonth()].substr(0,3)]}</div><div class="sch-minuteIndicator" style="{[this.getMinuteStyle(values.date.getMinutes() * 6,'+this.minuteTop+', + '+this.minuteHeight+')]}">{[values.date.getDate()]}</div>'+(a?'':'<div class="sch-clock-dot"></div>')+'</div><span class="sch-clock-text">{text}</span></div>',{getMinuteStyle:a?this.getRotateStyleIE:this.getRotateStyle,getHourStyle:a?this.getRotateStyleIE:this.getRotateStyle})}},1,0,0,0,0,0,[Sch.tooltip,'ClockTemplate'],0);Ext.cmd.derive('Sch.tooltip.Tooltip',Ext.tip.ToolTip,{autoHide:!1,anchor:'b',padding:'0 3 0 0',showDelay:0,hideDelay:0,quickShowInterval:0,dismissDelay:0,trackMouse:!1,anchorOffset:5,shadow:!1,frame:!1,schedulerView:null,message:null,startDate:null,endDate:null,template:null,valid:!0,mode:null,offsetAdjust:[18,5],constructor:function(b){var a=new Sch.tooltip.ClockTemplate();this.startDate=this.endDate=new Date();if(!this.template){this.template=Ext.create('Ext.XTemplate','<div class="sch-tip-{[values.valid ? "ok" : "notok"]}">{[this.renderClock(values.startDate, values.startText, "sch-tooltip-startdate")]}{[this.renderClock(values.endDate, values.endText, "sch-tooltip-enddate")]}<div class="sch-tip-message">{message}</div></div>',{disableFormats:!0,renderClock:function(c,d,e){return a.apply({date:c,text:d,cls:e})}})}Ext.tip.ToolTip.prototype.constructor.apply(this,arguments)},update:function(b,a,d,c){if(this.startDate-b!==0||this.endDate-a!==0||this.valid!==d||this.message!==c){var e=this.message&&!c||!this.message&&c;this.startDate=b;this.endDate=a;this.valid=d;this.message=c;var f=this.schedulerView.getFormattedDate(b),g=this.schedulerView.getFormattedEndDate(a,b);if(this.mode==='calendar'&&a.getHours()===0&&a.getMinutes()===0&&!(a.getYear()===b.getYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate())){a=Sch.util.Date.add(a,Sch.util.Date.DAY,-1)}Ext.tip.ToolTip.prototype.update.call(this,this.template.apply({valid:d,startDate:b,endDate:a,startText:f,endText:g,message:c}));if(e){this.realign()}}},showForElement:function(b,a){if(Sch.util.Date.compareUnits(this.schedulerView.getTimeResolution().unit,Sch.util.Date.DAY)>=0){this.mode='calendar';this.addCls('sch-day-resolution');this.removeCls('sch-hour-resolution')}else {this.mode='clock';this.removeCls('sch-day-resolution');this.addCls('sch-hour-resolution')}a=arguments.length>1?a:this.offsetAdjust[0];this.mouseOffsets=[a-this.offsetAdjust[0],-this.offsetAdjust[1]];this.setTarget(b);this.show();this.realign()},realign:function(){this.alignTo(this.target,'bl-tl',this.mouseOffsets)},afterRender:function(){Ext.tip.ToolTip.prototype.afterRender.apply(this,arguments);this.el.on('mouseenter',this.realign,this)}},1,0,['component','box','container','panel','tip','tooltip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0},0,0,[Sch.tooltip,'Tooltip'],0);Ext.cmd.derive('Sch.tooltip.HoverTip',Ext.tip.ToolTip,{trackMouse:!0,bodyCls:'sch-hovertip',messageTpl:'<div class="sch-hovertip-msg">{message}</div>',autoHide:!1,dismissDelay:1000,showDelay:0,schedulerView:null,clockTpl:null,lastTime:null,lastResource:null,initComponent:function(){var a=this;var b=a.schedulerView;a.clockTpl=new Sch.tooltip.ClockTemplate();a.messageTpl=new Ext.XTemplate(a.messageTpl);Ext.tip.ToolTip.prototype.initComponent.apply(this,arguments);a.on('beforeshow',a.tipOnBeforeShow,a);b.mon(b.el,{mouseleave:function(){a.hide()},mousemove:a.handleMouseMove,scope:a});b.mon(b.el,{click:a.onBodyMouseDown,scope:a,delay:1})},onBodyMouseDown:function(){this.hide()},handleMouseMove:function(b){var a=this;var c=a.schedulerView;if(a.disabled){return}if(b.getTarget('.'+c.itemCls,5)&&!b.getTarget(c.eventSelector)){var d=c.getDateFromDomEvent(b,'floor');if(d){var e=c.resolveResource(b.getTarget());if(d-a.lastTime!==0||e!==a.lastResource){a.lastResource=e;if(a.hidden){if(Sch.util.Date.compareUnits(this.schedulerView.getTimeResolution().unit,Sch.util.Date.DAY)>=0){a.clockTpl.mode='day'}else {a.clockTpl.mode='hour'}a.show()}a.updateHoverTip(d,b)}}else {a.hide();a.lastTime=null;a.lastResource=null}}else {a.hide();a.lastTime=null;a.lastResource=null}},getText:function(){},updateHoverTip:function(a,d){if(a){var c=this.clockTpl.apply({date:a,text:this.schedulerView.getFormattedDate(a)});var b=this.messageTpl.apply({message:this.getText(a,d)});this.update(c+b);this.lastTime=a}},tipOnBeforeShow:function(a){return !this.disabled&&this.lastTime!==null}},0,['scheduler_hovertip'],['component','box','container','panel','tip','tooltip','scheduler_hovertip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0,'scheduler_hovertip':!0},['widget.scheduler_hovertip'],0,[Sch.tooltip,'HoverTip'],0);Ext.cmd.derive('Sch.feature.DragCreator',Ext.Base,{disabled:!1,showHoverTip:!0,showDragTip:!0,dragTip:null,dragTolerance:2,hoverTip:null,validatorFn:Ext.emptyFn,validatorFnScope:null,trackerConfig:null,schedulerView:null,template:'<div class="sch-dragcreator-proxy"><div class="sch-event-inner">&#160;</div></div>',constructor:function(a){Ext.apply(this,a||{});this.lastTime=new Date();if(!(this.template instanceof Ext.Template)){this.template=new Ext.Template(this.template)}this.schedulerView.on('destroy',this.onSchedulerDestroy,this);if(Ext.supports.Touch){this.schedulerView.on('boxready',this.initDragTracker,this)}else {this.schedulerView.el.on('mousemove',this.initDragTracker,this,{single:!0})}this.callParent([a])},setDisabled:function(a){this.disabled=a;if(this.hoverTip){this.hoverTip.setDisabled(a)}if(this.dragTip){this.dragTip.setDisabled(a)}},getProxy:function(){if(!this.proxy){this.proxy=this.template.append(this.schedulerView.getEl(),{},!0);this.proxy.hide=function(){this.setStyle({left:0,right:0,top:'-10000px'})}}return this.proxy},onBeforeDragStart:function(f,b){var a=this.schedulerView,c=b.getTarget('.'+a.timeCellCls,5);if(c&&this.isCreateAllowed(b)&&(!b.event.touches||b.event.touches.length===1)){var d=a.resolveResource(c);var e=a.getDateFromDomEvent(b);if(!this.disabled&&c&&a.fireEvent('beforedragcreate',a,d,e,b)!==!1){this.resourceRecord=d;this.originalStart=e;this.resourceRegion=a.getScheduleRegion(this.resourceRecord,this.originalStart);this.dateConstraints=a.getDateConstraints(this.resourceRecord,this.originalStart);return !0}}return !1},isCreateAllowed:function(a){return !a.getTarget(this.schedulerView.eventSelector)},disableHoverTip:function(){this.hoverTip&&this.hoverTip.disable()},onDragStart:function(){var a=this,b=a.schedulerView,d=a.tracker.getRegion(),c=a.getProxy();this.dragging=!0;if(this.hoverTip){this.hoverTip.on('enable',this.disableHoverTip,this);this.hoverTip.disable()}a.start=a.originalStart;a.end=a.start;a.originalScroll=b.getScroll();if(b.isHorizontal()){a.rowBoundaries={top:a.resourceRegion.top,bottom:a.resourceRegion.bottom}}else {a.rowBoundaries={left:a.resourceRegion.left,right:a.resourceRegion.right}}Ext.apply(d,a.rowBoundaries);if(b.rtl){c.setStyle({right:'auto'})}c.setBox(d);c.show();b.fireEvent('dragcreatestart',b,c);if(a.showDragTip){a.dragTip.enable();a.dragTip.update(a.start,a.end,!0);a.dragTip.showForElement(c);a.dragTip.setStyle('visibility','visible')}Sch.util.ScrollManager.activate(b,b.isHorizontal()?'horizontal':'vertical')},onDrag:function(){var a=this,e=a.schedulerView,c=a.tracker.getRegion(),d=e.getStartEndDatesFromRegion(c,'round'),f='';if(!d){return}a.start=d.start||a.start;a.end=d.end||a.end;var b=a.dateConstraints;if(b){a.end=Sch.util.Date.constrain(a.end,b.start,b.end);a.start=Sch.util.Date.constrain(a.start,b.start,b.end)}a.valid=this.validatorFn.call(a.validatorFnScope||a,a.resourceRecord,a.start,a.end);if(a.valid&&typeof a.valid!=='boolean'){f=a.valid.message;a.valid=a.valid.valid}a.valid=a.valid!==!1;if(a.showDragTip){a.dragTip.update(a.start,a.end,a.valid,f)}Ext.apply(c,a.rowBoundaries);var h=e.getScroll();var g=this.getProxy();g.setBox(c);if(e.isHorizontal()){g.setY(a.resourceRegion.top+a.originalScroll.top-h.top)}},eventSwallower:function(a){a.stopPropagation();a.preventDefault()},onDragEnd:function(g,b){var a=this,e=a.schedulerView,c=!0,f=b.getTarget(),d=Ext.get(f);d.on('click',this.eventSwallower);a.unbindTimer=setTimeout(function(){d.un('click',a.eventSwallower)},100);a.dragging=!1;if(a.showDragTip){a.dragTip.disable()}if(!a.start||!a.end||a.end-a.start<=0){a.valid=!1}a.createContext={start:a.start,end:a.end,resourceRecord:a.resourceRecord,e:b,finalize:function(){a.finalize.apply(a,arguments)}};if(a.valid){c=e.fireEvent('beforedragcreatefinalize',a.schedulerView,a.createContext,b,this.getProxy())!==!1}if(c){a.finalize(a.valid)}Sch.util.ScrollManager.deactivate()},finalize:function(d){var c=this.createContext;var b=this.schedulerView;if(d){var a=Ext.create(b.getEventStore().getModel());if(a.setCalendar){a.setCalendar(b.getEventStore().getCalendar())}a.setStartEndDate(c.start,c.end);if(a.setCalendar){a.setCalendar(null)}b.fireEvent('dragcreateend',b,a,c.resourceRecord,c.e,this.getProxy())}else {this.proxy.hide()}this.schedulerView.fireEvent('afterdragcreate',b,this.getProxy());if(this.hoverTip){this.hoverTip.un('enable',this.disableHoverTip,this);this.hoverTip.enable()}},dragging:!1,initDragTracker:function(){var a=this,b=Ext.supports.Touch,c=a.schedulerView;var d=Ext.apply({el:c.el,rtl:c.rtl,deferredTouchActivation:b?1000:!1,tolerance:a.dragTolerance,listeners:{mousedown:a.verifyLeftButtonPressed,beforedragstart:a.onBeforeDragStart,dragstart:a.onDragStart,drag:a.onDrag,dragend:a.onDragEnd,scope:a}},this.trackerConfig);this.bindRightClickPreventer();if(b){this.showDragTip=!1;this.showHoverTip=!1;this.dragTip=null;this.hoverTip=null}else {this.setupTooltips()}a.tracker=new Sch.util.DragTracker(d)},bindRightClickPreventer:function(){var a;if(Ext.isIE9m){a='mousedown'}else {a='contextmenu'}this.schedulerView.el.on(a,this.stopDragCreateOnRightClick,this,{priority:999})},stopDragCreateOnRightClick:function(a){if(a.button!==0&&this.dragging){this.tracker.onMouseUp(a)}},setupTooltips:function(){var a=this,b=a.schedulerView;if(this.showDragTip){var c=this.dragTip;if(c instanceof Ext.tip.ToolTip){c.schedulerView=b;c.on('beforeshow',function(){return a.dragging})}else {this.dragTip=new Sch.tooltip.Tooltip(Ext.apply({cls:'sch-dragcreate-tip',schedulerView:b,listeners:{beforeshow:function(){return a.dragging}}},c))}}if(a.showHoverTip){var d=a.hoverTip;if(d instanceof Ext.tip.ToolTip){d.schedulerView=b}else {a.hoverTip=Ext.ComponentManager.create(Ext.applyIf({renderTo:Ext.getBody(),target:b.el,schedulerView:b},d),'scheduler_hovertip')}}},verifyLeftButtonPressed:function(b,a){return a.button===0},onSchedulerDestroy:function(){if(this.hoverTip&&this.hoverTip.destroy){this.hoverTip.destroy()}if(this.dragTip&&this.dragTip.destroy){this.dragTip.destroy()}if(this.tracker){this.tracker.destroy()}if(this.proxy){Ext.destroy(this.proxy);this.proxy=null}clearTimeout(this.unbindTimer)}},1,0,0,0,0,0,[Sch.feature,'DragCreator'],0);Ext.cmd.derive('Sch.feature.SchedulerDragZone',Ext.dd.DragZone,{repairHighlight:!1,repairHighlightColor:'transparent',containerScroll:!1,showTooltip:!0,tip:null,deltaSetXY:null,schedulerView:null,_onValidDropTimer:null,lastXY:null,showExactDropPosition:!1,enableCopy:!1,enableCopyKey:'SHIFT',validatorFn:function(b,a,d,c,e){return !0},validatorFnScope:null,copyKeyPressed:!1,dragDropProxyCls:'sch-dd-ref',invalidCssClasses:['sch-resizable-handle','sch-terminal'],constructor:function(f,e){if(Ext.isIE8m&&window.top!==window){Ext.dd.DragDropManager.notifyOccluded=!0}var c=this.proxy=this.proxy||new Ext.dd.StatusProxy({shadow:!1,dropAllowed:this.dropAllowed,dropNotAllowed:this.dropNotAllowed,ensureAttachedToBody:Ext.emptyFn});Ext.dd.DragZone.prototype.constructor.apply(this,arguments);this.isTarget=!0;this.scroll=!1;this.ignoreSelf=!1;var a=this.schedulerView;Ext.Array.each(this.invalidCssClasses,this.addInvalidHandleClass,this);if(a.touchScroll){this.showTooltip=!1}a.el.appendChild(c.el);this.bindRightClickPreventer();c.addCls('sch-dragproxy');a.on({eventdragstart:function(){Sch.util.ScrollManager.activate(a,a.constrainDragToResource&&a.getMode())},aftereventdrop:function(){Sch.util.ScrollManager.deactivate()},scope:this});if(this.showTooltip){var b=this.tip,d=a.up('[lockable=true]').el;if(b instanceof Ext.tip.ToolTip){b.schedulerView=a}else {this.tip=new Sch.tooltip.Tooltip(Ext.apply({schedulerView:a,cls:'sch-dragdrop-tip',constrainTo:d},b))}}},bindRightClickPreventer:function(){var a;if(Ext.isIE10){a='contextmenu'}else {a='mousedown'}this.schedulerView.el.on(a,this.preventRightClick,this,{priority:999})},destroy:function(){this.tip&&this.tip.destroy();clearTimeout(this._onValidDropTimer);Ext.dd.DragZone.prototype.destroy.apply(this,arguments)},preventRightClick:function(a){if(this.dragging&&a.button!==0){a.stopEvent();return !1}},autoOffset:function(){this.setDelta(0,0)},setupConstraints:function(a,d,b,c,f,e,i){this.clearTicks();var g=f&&!this.showExactDropPosition&&e>1?e:0;var h=!f&&!this.showExactDropPosition&&e>1?e:0;this.resetConstraints();this.initPageX=a.left+b;this.initPageY=a.top+c;var k=d.right-d.left;var j=d.bottom-d.top;if(f){if(i){this.setXConstraint(a.left+b,a.right-k+b,g)}else {this.setXConstraint(a.left,a.right,g)}this.setYConstraint(a.top+c,a.bottom-j+c,h)}else {this.setXConstraint(a.left+b,a.right-k+b,g);if(i){this.setYConstraint(a.top+c,a.bottom-j+c,h)}else {this.setYConstraint(a.top,a.bottom,h)}}},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=c;this.maxX=b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=!0},setYConstraint:function(c,b,a){this.topConstraint=c;this.bottomConstraint=b;this.minY=c;this.maxY=b;if(a){this.setYTicks(this.initPageY,a)}this.constrainY=!0},onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,setVisibilityForSourceEvents:function(a){Ext.Array.each(this.dragData.getEventBarElements(),function(b){b&&Ext.fly(b)[a?'show':'hide']()})},onDragOver:function(b){if(b&&b.event.touches&&b.event.touches.length>1){Ext.dd.DragDropManager.handleMouseUp(b);return}var d=b?b.getXY():this.lastXY;if(!d){return}this.checkShiftChange();var a=this.dragData;if(!a.originalHidden){this.setVisibilityForSourceEvents(!1);a.originalHidden=!0}var k=a.startDate;var i=a.newResource;var c=this.schedulerView;this.updateDragContext(b);if(this.showExactDropPosition){var g=c.isHorizontal();var j=c.getDateFromCoordinate(g?d[0]:d[1])-a.sourceDate;var h=new Date(a.origStart-0+j);var e=c.timeAxisViewModel.getDistanceBetweenDates(h,a.startDate);if(a.startDate>c.timeAxis.getStart()){var f=this.proxy.el;if(e){if(c.isHorizontal()){f.setX(d[0]+(this.schedulerView.shouldAdjustForRtl()?-e:e))}else {f.setY(d[1]+e)}}}}if(a.startDate-k!==0||i!==a.newResource){this.schedulerView.fireEvent('eventdrag',this.schedulerView,a.draggedRecords,a.startDate,a.newResource,a)}if(this.showTooltip){this.tip.realign();this.tip.update(a.startDate,a.endDate,a.valid,a.message)}if(b){this.lastXY=[b.browserEvent.clientX+document.body.scrollLeft,b.getY()]}},getCoordinate:function(a){var b=this.schedulerView;if(b.isHorizontal()){return a[0]}if(b.isVertical()){return a[1]}if(b.isWeekView()){return a}},getDragData:function(e){var a=this.schedulerView,d=e.getTarget(a.eventSelector);if(!d||e.event.touches&&e.event.touches.length>1){return}var b=a.resolveEventRecord(d),f=a.resolveResource(d),m=a.resolveAssignmentRecord(d);if(!b||b.isDraggable()===!1||a.fireEvent('beforeeventdrag',a,b,e)===!1){return null}var l=e.getXY(),j=Ext.fly(d).getXY(),k=[l[0]-j[0],l[1]-j[1]],r=Ext.fly(d).getRegion();this.lastXY=null;var q=a.isHorizontal();a.constrainDragToResource&&!f&&Ext.Error.raise('Resource could not be resolved for event: '+b.getId());var n=a.getDateConstraints(a.constrainDragToResource?f:null,b);this.setupConstraints(a.getScheduleRegion(a.constrainDragToResource?f:null,b),r,k[0],k[1],q,a.getSnapPixelAmount(),Boolean(n));var h=b.getStartDate(),i=b.getEndDate(),p=a.timeAxis,o=this.getRelatedRecords(m||b)||[],c=a.getElementsFromEventRecord(b,a.isWeekView()?null:f,null,!0);Ext.Array.each(o,function(b){if(b instanceof Sch.model.Assignment){c=c.concat(a.getElementsFromEventRecord(b.getEvent(),b.getResource(),null,!0))}else {c=c.concat(a.getElementsFromEventRecord(b,null,null,!0))}});c=Ext.Array.unique(c);var g={offsets:k,repairXY:j,prevScroll:a.getScroll(),dateConstraints:n,eventBarEls:c,getEventBarElements:function(){return g.eventBarEls=Ext.Array.map(g.eventBarEls,function(a){return a&&document.getElementById(a.id)})},draggedRecords:[m||b].concat(o),resourceRecord:f,sourceDate:a.getDateFromCoordinate(this.getCoordinate(l)),origStart:h,origEnd:i,startDate:h,endDate:i,timeDiff:0,startsOutsideView:h<p.getStart(),endsOutsideView:i>p.getEnd(),duration:i-h,bodyScroll:Ext.getBody().getScroll(),eventObj:e};g.ddel=this.getDragElement(d,g);return g},onStartDrag:function(){var a=this.schedulerView,b=this.dragData;Ext.Array.each(b.getEventBarElements(),function(a){Ext.fly(a).removeCls('sch-event-hover')});a.fireEvent('eventdragstart',a,b.draggedRecords);a.getScrollable().on('scroll',this.onViewScroll,this);if(Ext.versions.extjs.isGreaterThan('6.2.0')){a.up('timelinetree,timelinegrid').getScrollable().on('scroll',this.onViewScroll,this)}},alignElWithMouse:function(a,c,d){Ext.dd.DragZone.prototype.alignElWithMouse.apply(this,arguments);if(Ext.isIE&&this.schedulerView.rtl&&this.schedulerView.up('[isViewport]')){this.deltaSetXY=null;Ext.dd.DragZone.prototype.alignElWithMouse.apply(this,arguments)}var b=this.getTargetCoord(c,d),e=a.dom?a:Ext.fly(a,'_dd');this.setLocalXY(e,b.x+this.deltaSetXY[0],b.y+this.deltaSetXY[1])},onViewScroll:function(k){var j=this.proxy,g=this.schedulerView,a=this.dragData,i=g.getScroll(),b=i.left,c=i.top,h=g.rtl&&!g.up('[isViewport]');this.setVisibilityForSourceEvents(!1);var e=j.getXY();var f;if(h){f=[e[0]-b+a.prevScroll.left,e[1]+c-a.prevScroll.top]}else {f=[e[0]+b-a.prevScroll.left,e[1]+c-a.prevScroll.top]}var d=this.deltaSetXY;if(h){this.deltaSetXY=[d[0]-b+a.prevScroll.left,d[1]+c-a.prevScroll.top]}else {this.deltaSetXY=[d[0]+b-a.prevScroll.left,d[1]+c-a.prevScroll.top]}a.prevScroll={left:b,top:c};j.setXY(f);this.onDragOver()},isCopyKeyPressed:function(){return Boolean(this.enableCopy&&this.dragData.eventObj[this.enableCopyKey.toLowerCase()+'Key'])},checkShiftChange:function(){var a=this.isCopyKeyPressed(),b=this.dragData;if(a!==this.copyKeyPressed){this.copyKeyPressed=a;if(a){b.refElements.addCls('sch-event-copy');this.setVisibilityForSourceEvents(!0)}else {b.refElements.removeCls('sch-event-copy');this.setVisibilityForSourceEvents(!1)}}},onKey:function(a){if(this.enableCopy&&a.getKey()===a[this.enableCopyKey]){this.checkShiftChange()}if(a.getKey()===a.ESC){this.dragData.ddCallbackArgs=[a.getTarget(),a,this.id];this.finalize(!1);Ext.dd.DragDropManager.stopDrag(a);Ext.dd.DragDropManager.stopEvent(a)}},startDrag:function(){Ext.getDoc().on({keydown:this.onKey,keyup:this.onKey,useCapture:!0,scope:this});var b=Ext.dd.DragZone.prototype.startDrag.apply(this,arguments);var a=this.dragData;a.refElement=this.proxy.el.down('.'+this.dragDropProxyCls);a.refElements=this.proxy.el.select('.sch-event');a.refElement.removeCls('sch-event-hover');if(this.showTooltip){this.tip.update(a.origStart,a.origEnd,!0);this.tip.setStyle('visibility');this.tip.showForElement(a.refElement,a.offsets[0])}this.copyKeyPressed=this.isCopyKeyPressed();if(this.copyKeyPressed){a.refElements.addCls('sch-event-copy');a.originalHidden=!0}return b},endDrag:function(){this.schedulerView.getScrollable().un('scroll',this.onViewScroll,this);if(Ext.versions.extjs.isGreaterThan('6.2.0')){this.schedulerView.up('timelinetree,timelinegrid').getScrollable().un('scroll',this.onViewScroll,this)}Ext.getDoc().un({keydown:this.onKey,keyup:this.onKey,useCapture:!0,scope:this});Ext.dd.DragZone.prototype.endDrag.apply(this,arguments)},onMouseUp:function(){if(!this.dragging){this.afterDragFinalized()}},afterDragFinalized:function(){this.proxy.el.dom.style.top=this.proxy.el.dom.style.left=0},updateRecords:function(a){var d=this,b=d.schedulerView,c=b.getEventStore(),j=b.getResourceStore(),g=c.getAssignmentStore(),k=a.newResource,i=a.draggedRecords[0],f=a.draggedRecords.slice(1),h=a.resourceRecord,e=d.isCopyKeyPressed(),m=a.startDate,n=a.timeDiff,l=b.isWeekView();if(g&&c instanceof Sch.data.EventStore){d.updateRecordsMultipleAssignmentMode(m,n,i,f,h,k,c,j,g,e,l)}else {if(g){d.updateRecordsSingleAssignmentMode(m,n,i.getEvent(),Ext.Array.map(f,function(b){return b.getEvent()}),h,k,c,j,e,l)}else {d.updateRecordsSingleAssignmentMode(m,n,i,f,h,k,c,j,e,l)}}b.fireEvent('eventdrop',b,a.draggedRecords,e)},updateRecordsSingleAssignmentMode:function(k,l,a,i,d,b,f,c,g,j){var m=this,e=[];if(g){a=a.fullCopy(null);e.push(a)}a.beginEdit();if(!g&&b!==d&&d instanceof Sch.model.Resource&&b instanceof Sch.model.Resource){a.reassign(d,b)}else {if(b!==d&&d instanceof Sch.model.Resource&&b instanceof Sch.model.Resource){a.assign(b)}}a.setStartDate(k,!0,f.skipWeekendsDuringDragDrop);a.endEdit();if(!j){var h=c.indexOf(d)-c.indexOf(b);Ext.Array.each(i,function(n){var o=n.getResources();if(g){n=n.fullCopy(null);e.push(n)}n.beginEdit();n.setStartDate(m.adjustStartDate(n.getStartDate(),l),!0,f.skipWeekendsDuringDragDrop);h!==0&&o.length&&Ext.Array.each(o,function(o){var e=c.indexOf(o)-h,m;if(e<0){e=0}else {if(e>=c.getCount()){e=c.getCount()-1}}m=c.getAt(e);n.reassign(o,m)});n.endEdit()})}if(e.length){f.append(e)}},updateRecordsMultipleAssignmentMode:function(l,g,c,b,d,a,e,k,j,h,f){var i=this;Ext.Array.each([].concat(c,b),function(n){var m=n.getEvent();m.setStartDate(i.adjustStartDate(m.getStartDate(),g),!0,e.skipWeekendsDuringDragDrop);if(!f&&d!==a){if(h){m.assign(a)}else {if(!m.isAssignedTo(a)){m.reassign(n.getResource(),a)}else {m.unassign(n.getResource())}}}})},isValidDrop:function(c,b,a){if(c!==b){if(a instanceof Sch.model.Assignment){return !a.getEvent().isAssignedTo(b)}else {return !a.isAssignedTo(b)}}return !0},resolveResource:function(b){var e=this.proxy.el.dom;var c=this.dragData.bodyScroll;e.style.display='none';var a=document.elementFromPoint(b[0]-c.left,b[1]-c.top);if(Ext.isIE8&&window.top.Siesta){a=document.elementFromPoint(b[0]-c.left,b[1]-c.top)}e.style.display='block';if(!a){return null}var d=this.schedulerView;if(a.className.match('x-grid-item')){return this.resolveResource([b[0],b[1]+3])}if(!a.className.match(d.timeCellCls)){var f=Ext.fly(a).up('.'+d.timeCellCls);if(f){a=f.dom}else {return null}}return d.resolveResource(a)},adjustStartDate:function(a,c){var b=this.schedulerView;return b.timeAxis.roundDate(new Date(a-0+c),b.snapRelativeToEventStartDate?a:!1)},updateDragContext:function(b){var a=this.dragData,e=b?b.getXY():this.lastXY,j=b?[b.browserEvent.clientX+document.body.scrollLeft,b.getY()]:this.lastXY;if(!a.refElement){return}var c=this.schedulerView,f=a.refElement.getRegion();if(c.timeAxis.isContinuous()){if(c.isHorizontal()&&this.minX<e[0]&&e[0]<this.maxX||!c.isHorizontal()&&this.minY<e[1]&&e[1]<this.maxY){var i=c.getDateFromCoordinate(this.getCoordinate(e));a.timeDiff=i-a.sourceDate;a.startDate=this.adjustStartDate(a.origStart,a.timeDiff);a.endDate=new Date(a.startDate-0+a.duration)}}else {var g;if(c.isWeekView()){var h={bottom:f.bottom,top:f.top};h.left=h.right=f.left+a.offsets[0];g=this.resolveStartEndDates(h)}else {g=this.resolveStartEndDates(f)}a.startDate=g.startDate;a.endDate=g.endDate;a.timeDiff=a.startDate-a.origStart}a.newResource=c.constrainDragToResource?a.resourceRecord:this.resolveResource(j)||a.newResource||a.resourceRecord;if(a.newResource){var d=!b||this.validatorFn.call(this.validatorFnScope||this,a.draggedRecords,a.newResource,a.startDate,a.duration,b);if(!d||typeof d==='boolean'){a.valid=d!==!1;a.message=''}else {a.valid=d.valid!==!1;a.message=d.message}}else {a.valid=!1}},getRelatedRecords:function(a){var c=this.schedulerView,d=c.getEventSelectionModel(),b=d.getDraggableSelections();return Ext.Array.filter(b,function(b){return a!==b})},getDragElement:function(h,e){var g=e.getEventBarElements();var a;var d;var c=e.offsets[0];var i=e.offsets[1];var b=h.dom||h;var f=!this.schedulerView.rtl||this.schedulerView.shouldAdjustForRtl();if(g.length>1){var j=Ext.core.DomHelper.createDom({tag:'div',cls:'sch-dd-wrap',style:{overflow:'visible'}});Ext.Array.each(g,function(d){a=d.cloneNode(!0);a.id=Ext.id();if(d===b){a.className+=' '+this.dragDropProxyCls;if(Ext.isIE8){Ext.fly(a).addCls(this.dragDropProxyCls)}}j.appendChild(a);var g=Ext.fly(d).getOffsetsTo(b);if(f){a.style.left=g[0]-c+'px'}else {a.style.left=c-Ext.fly(d).getWidth()-g[0]+'px'}a.style.top=g[1]-i+'px'},this);d=j}else {a=b.cloneNode(!0);a.id=Ext.id();a.style.left=(f?-c:c-Ext.fly(b).getWidth())+'px';a.style.top=-i+'px';a.className+=' '+this.dragDropProxyCls;if(Ext.isIE8){Ext.fly(a).addCls(this.dragDropProxyCls)}d=a}if(!b.style.height){Ext.fly(d).setHeight(Ext.fly(b).getHeight())}return d},onDragDrop:function(d,f){this.updateDragContext(d);var b=this,h=b.schedulerView,g=b.cachedTarget||Ext.dd.DragDropMgr.getDDById(f),a=b.dragData,e=!1,c=!0;if(b.tip){b.tip.hide()}a.ddCallbackArgs=[g,d,f];if(a.valid&&a.startDate&&a.endDate){a.finalize=function(){b.finalize.apply(b,arguments)};c=h.fireEvent('beforeeventdropfinalize',b,a,d)!==!1;if(c&&b.isValidDrop(a.resourceRecord,a.newResource,a.draggedRecords[0])){e=a.startDate-a.origStart!==0||a.newResource!==a.resourceRecord}}if(c){b.finalize(a.valid&&e)}else {b.proxy.el.addCls('sch-before-drag-finalized')}},finalize:function(g){var a=this,c=a.schedulerView,d=c.getEventStore(),b=a.dragData;a.proxy.el.removeCls('sch-before-drag-finalized');if(g){var f,e=function(){f=!0};d.on('update',e,null,{single:!0});a.updateRecords(b);d.un('update',e,null,{single:!0});if(!f){a.onInvalidDrop.apply(a,b.ddCallbackArgs)}else {if(Ext.isIE9){a.proxy.el.setStyle('visibility','hidden');a._onValidDropTimer=Ext.Function.defer(a.onValidDrop,10,a,b.ddCallbackArgs)}else {a.onValidDrop.apply(a,b.ddCallbackArgs)}c.fireEvent('aftereventdrop',c,b.draggedRecords)}a.afterDragFinalized()}else {a.onInvalidDrop.apply(a,b.ddCallbackArgs)}},onInvalidDrop:function(b,a,e){if(!a){a=b;b=a.getTarget()||document.body}if(this.tip){this.tip.hide()}this.setVisibilityForSourceEvents(!0);var c=this.schedulerView,d=Ext.dd.DragZone.prototype.onInvalidDrop.call(this,b,a,e);c.fireEvent('aftereventdrop',c,this.dragData.draggedRecords);this.afterDragFinalized();return d},resolveStartEndDates:function(f){var a=this.dragData,b,c=a.origStart,e=a.origEnd;var d=Sch.util.Date;if(!a.startsOutsideView){b=this.schedulerView.getStartEndDatesFromRegion(f,'round');if(b){c=b.start||a.startDate;e=d.add(c,d.MILLI,a.duration)}}else {if(!a.endsOutsideView){b=this.schedulerView.getStartEndDatesFromRegion(f,'round');if(b){e=b.end||a.endDate;c=d.add(e,d.MILLI,-a.duration)}}}return {startDate:c,endDate:e}}},1,0,0,0,0,0,[Sch.feature,'SchedulerDragZone'],0);Ext.cmd.derive('Sch.feature.DragDrop',Ext.Base,{validatorFn:function(b,a,d,c,e){return !0},validatorFnScope:null,dragConfig:null,constructor:function(a,b){Ext.apply(this,b);this.schedulerView=a;a.eventDragZone=new Sch.feature.SchedulerDragZone(a.getEl(),Ext.apply({ddGroup:a.id,schedulerView:a,validatorFn:this.validatorFn,validatorFnScope:this.validatorFnScope},this.dragConfig));this.schedulerView.on('destroy',this.cleanUp,this);this.callParent([b])},cleanUp:function(){var a=this.schedulerView;if(a.eventDragZone){a.eventDragZone.destroy()}}},1,0,0,0,0,0,[Sch.feature,'DragDrop'],0);Ext.cmd.derive('Ext.resizer.Resizer',Ext.Base,{alternateClassName:'Ext.Resizable',handleCls:'x-resizable-handle',overCls:'x-resizable-handle-over',pinnedCls:'x-resizable-pinned',wrapCls:'x-resizable-wrap',wrappedCls:'x-resizable-wrapped',delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:'s e se',height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:'north',s:'south',e:'east',w:'west',se:'southeast',sw:'southwest',nw:'northwest',ne:'northeast'},ariaRole:'presentation',constructor:function(e){var a=this,d=a.handles,q=Ext.dom.Element.unselectableCls,h=[],b,k,i,m,p,c,f,n,l,g,o,j;if(Ext.isString(e)||Ext.isElement(e)||e.dom){b=e;e=arguments[1]||{};e.target=b}a.mixins.observable.constructor.call(a,e);b=a.target;if(b){if(b.isComponent){b.addClsWithUI('resizable');if(b.minWidth){a.minWidth=b.minWidth}if(b.minHeight){a.minHeight=b.minHeight}if(b.maxWidth){a.maxWidth=b.maxWidth}if(b.maxHeight){a.maxHeight=b.maxHeight}if(b.floating){if(!a.hasOwnProperty('handles')){a.handles='n ne e se s sw w nw'}}a.el=b.getEl()}else {b=a.el=a.target=Ext.get(b)}}else {b=a.target=a.el=Ext.get(a.el)}a.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(a.width)){a.width=Ext.Number.constrain(a.width,a.minWidth,a.maxWidth)}if(Ext.isNumber(a.height)){a.height=Ext.Number.constrain(a.height,a.minHeight,a.maxHeight)}if(a.width!==null||a.height!==null){a.target.setSize(a.width,a.height)}m=a.el.dom.tagName.toUpperCase();if(m==='TEXTAREA'||m==='IMG'||m==='TABLE'){a.originalTarget=a.target;g=b.isComponent?b.getEl():b;a.el.addCls(a.wrappedCls);a.target=a.el=a.el.wrap({role:'presentation',cls:a.wrapCls,id:a.el.id+'-rzwrap',style:g.getStyle(['margin-top','margin-bottom'])});o=g.getPositioning();a.el.setPositioning(o);g.clearPositioning();l=g.getBox();if(o.position!=='absolute'){l.x=0;l.y=0}a.el.setBox(l);g.setStyle('position','absolute');a.isTargetWrapped=!0}a.el.position();if(a.pinned){a.el.addCls(a.pinnedCls)}a.resizeTracker=new Ext.resizer.ResizeTracker({disabled:a.disabled,target:b,el:a.el,constrainTo:a.constrainTo,handleCls:a.handleCls,overCls:a.overCls,throttle:a.throttle,proxy:a.originalTarget?a.el:null,dynamic:a.originalTarget?!0:a.dynamic,originalTarget:a.originalTarget,delegate:'.'+a.handleCls,preserveRatio:a.preserveRatio,heightIncrement:a.heightIncrement,widthIncrement:a.widthIncrement,minHeight:a.minHeight,maxHeight:a.maxHeight,minWidth:a.minWidth,maxWidth:a.maxWidth});a.resizeTracker.on({mousedown:a.onBeforeResize,drag:a.onResize,dragend:a.onResizeEnd,scope:a});if(a.handles==='all'){a.handles='n s e w ne nw se sw'}d=a.handles=a.handles.split(a.delimiterRe);i=a.possiblePositions;p=d.length;k=a.handleCls+' '+a.handleCls+'-{0}';if(a.target.isComponent){j=a.target.baseCls;k+=' '+j+'-handle '+j+'-handle-{0}';if(Ext.supports.CSS3BorderRadius){k+=' '+j+'-handle-{0}-br'}}for(c=0;c<p;c++){if(d[c]&&i[d[c]]){f=i[d[c]];h.push('<div id="',a.el.id,'-',f,'-handle" class="',Ext.String.format(k,f),' ',q,'" unselectable="on" role="presentation"','></div>')}}Ext.DomHelper.append(a.el,h.join(''));h.length=0;for(c=0;c<p;c++){if(d[c]&&i[d[c]]){f=i[d[c]];n=a[f]=a.el.getById(a.el.id+'-'+f+'-handle');h.push(n);n.region=f;if(a.transparent){n.setOpacity(0)}}}a.resizeTracker.handleEls=h},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent('beforeresize',a,b)},onResize:function(a,b){return this.fireResizeEvent('resizedrag',a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent('resize',a,b)},fireResizeEvent:function(c,e,d){var a=this,b;if(a.hasListeners[c]){b=a.el.getBox();return a.fireEvent(c,a,b.width,b.height,d)}},resizeTo:function(c,b){var a=this;a.target.setSize(c,b);a.fireEvent('resize',a,c,b,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var a=this,b,c=a.handles,f=c.length,e=a.possiblePositions,d;a.resizeTracker.destroy();if(a.isTargetWrapped){a.target.destroy()}for(b=0;b<f;b++){if(d=a[e[c[b]]]){d.destroy()}}a.callParent()}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.resizer,'Resizer',Ext,'Resizable'],0);Ext.cmd.derive('Sch.feature.ResizeZone',Ext.util.Observable,{showTooltip:!0,showExactResizePosition:!1,validatorFn:Ext.emptyFn,validatorFnScope:null,schedulerView:null,origEl:null,handlePos:null,eventRec:null,tip:null,tipInstance:null,startScroll:null,constructor:function(b){Ext.apply(this,b);var a=this.schedulerView;a.on({destroy:this.cleanUp,scope:this});a.el.on({mousedown:this.onMouseDown,mouseup:this.onMouseUp,scope:this,delegate:'.sch-resizable-handle'});this.bindRightClickPreventer();Ext.util.Observable.prototype.constructor.apply(this,arguments)},bindRightClickPreventer:function(){var a;if(Ext.isIE9m){a='mousedown'}else {a='contextmenu'}var b={scope:this,priority:999};b[a]=this.preventRightClick;this.schedulerView.el.on(b)},preventRightClick:function(a){if(a.button!==0&&this.resizer){a.stopEvent();return !1}},onMouseDown:function(d,b){var e=this.schedulerView;var c=this.eventRec=e.resolveEventRecord(b);var a=c.isResizable();if(d.button!==0||(a===!1||typeof a==='string'&&!b.className.match(a))){return}this.eventRec=c;this.handlePos=this.getHandlePosition(b);this.origEl=Ext.get(d.getTarget('.sch-event'));e.el.on({mousemove:this.onMouseMove,scope:this,single:!0})},onMouseUp:function(b,c){var a=this.schedulerView;a.el.un({mousemove:this.onMouseMove,scope:this,single:!0})},getTipInstance:function(){if(this.tipInstance){return this.tipInstance}var b=this.schedulerView;var a=this.tip;var c=b.up('[lockable=true]').el;if(a instanceof Ext.tip.ToolTip){a.schedulerView=b}else {a=new Sch.tooltip.Tooltip(Ext.apply({rtl:this.rtl,schedulerView:b,constrainTo:c,cls:'sch-resize-tip'},a))}return this.tipInstance=a},onMouseMove:function(b,g){var c=this.schedulerView,a=this.eventRec,d=this.handlePos;if(!a||c.fireEvent('beforeeventresize',c,a,b)===!1){return}delete this.eventRec;b.stopEvent();this.origEl.addCls('sch-event-resizing');this.resizer=this.createResizer(this.origEl,a,d);var f=this.resizer.resizeTracker;if(this.showTooltip){var e=this.getTipInstance();e.setTarget(this.origEl);e.update(a.getStartDate(),a.getEndDate(),!0);e.showForElement(this.origEl,b.getX()-this.origEl.getX())}f.onMouseDown(b,this.resizer[d].dom);f.onMouseMove(b,this.resizer[d].dom);c.fireEvent('eventresizestart',c,a);c.getScrollable().on('scroll',this.onViewScroll,this)},getHandlePosition:function(b){var a=b.className.match('start');if(this.schedulerView.isHorizontal()){if(this.schedulerView.rtl){return a?'east':'west'}return a?'west':'east'}else {return a?'north':'south'}},createResizer:function(b,i,d){var a=this.schedulerView,g=this,h=a.resolveResource(b),e=a.getSnapPixelAmount(),n=a.getScheduleRegion(h,i),o=a.getDateConstraints(h,i),l=b.getHeight(),k=a.rtl&&d[0]==='e'||!a.rtl&&d[0]==='w'||d[0]==='n',j=!a.isHorizontal(),f={otherEdgeX:k?b.getRight():b.getLeft(),otherEdgeY:k?b.getBottom():b.getTop(),target:b,isStart:k,dateConstraints:o,resourceRecord:h,eventRecord:i,handles:d[0],minHeight:l,constrainTo:n,listeners:{resizedrag:this.partialResize,resize:this.afterResize,scope:this}};if(j){if(e>0){var m=b.getWidth();Ext.apply(f,{minHeight:e,minWidth:m,maxWidth:m,heightIncrement:e})}}else {if(e>0){Ext.apply(f,{minWidth:e,maxHeight:l,widthIncrement:e})}}var c=new Ext.resizer.Resizer(f);if(c.resizeTracker){c.resizeTracker.tolerance=-1;var p=c.resizeTracker.updateDimensions;c.resizeTracker.updateDimensions=function(h){if(!h.getTarget||h.getTarget('.sch-timelineview')){var e;if(j){e=a.getVerticalScroll()-g.startScroll.top;c.resizeTracker.minHeight=f.minHeight-Math.abs(e)}else {e=a.getScrollX()-g.startScroll.left;c.resizeTracker.minWidth=f.minWidth-Math.abs(e)}p.apply(this,arguments)}};c.resizeTracker.resize=function(e){var c;if(j){c=a.getVerticalScroll()-g.startScroll.top;if(d[0]==='s'){e.y-=c}e.height+=Math.abs(c)}else {c=a.getScrollX()-g.startScroll.left;if(d[0]==='e'){e.x-=c}e.width+=Math.abs(c)}Ext.resizer.ResizeTracker.prototype.resize.apply(this,arguments)}}b.setStyle('z-index',parseInt(b.getStyle('z-index'),10)+1);Sch.util.ScrollManager.activate(a,a.isHorizontal()?'horizontal':'vertical');this.startScroll=a.getScroll();return c},getStartEndDates:function(){var b=this.resizer,e=b.el,a=this.schedulerView,h=b.isStart,c,d,g,f;if(h){if(a.isHorizontal()){g=a.rtl&&a.shouldAdjustForRtl()?e.getRight():e.getLeft()+1;f=[g,0]}else {f=[(e.getRight()+e.getLeft())/2,e.getTop()]}d=b.eventRecord.getEndDate();if(a.snapRelativeToEventStartDate){c=a.getDateFromXY(f);c=a.timeAxis.roundDate(c,b.eventRecord.getStartDate())}else {c=a.getDateFromXY(f,'round')}}else {if(a.isHorizontal()){g=a.rtl&&a.shouldAdjustForRtl()?e.getLeft():e.getRight();f=[g,0]}else {f=[(e.getRight()+e.getLeft())/2,e.getBottom()]}c=b.eventRecord.getStartDate();if(a.snapRelativeToEventStartDate){d=a.getDateFromXY(f);d=a.timeAxis.roundDate(d,b.eventRecord.getEndDate())}else {d=a.getDateFromXY(f,'round')}}c=c||b.start;d=d||b.end;if(b.dateConstraints){c=Sch.util.Date.constrain(c,b.dateConstraints.start,b.dateConstraints.end);d=Sch.util.Date.constrain(d,b.dateConstraints.start,b.dateConstraints.end)}return {start:c,end:d}},partialResize:function(a,q,p,n){var c=this.schedulerView,r=n?n.getXY():this.resizer.resizeTracker.lastXY,k=this.getStartEndDates(r),b=k.start,f=k.end,h=a.eventRecord,l=c.isHorizontal();if(this.showTooltip){var g=this.validatorFn.call(this.validatorFnScope||this,a.resourceRecord,h,b,f);var m='';if(g&&typeof g!=='boolean'){m=g.message;g=g.valid}this.getTipInstance().update(b,f,g!==!1,m)}if(this.showExactResizePosition){var d=a.target.el,e,i,j;if(a.isStart){if(c.isWeekView()){var o=c.weekview.getEventColumns(h)[0];e=c.timeAxisViewModel.getDistanceBetweenDates(b,o.end)}else {e=c.timeAxisViewModel.getDistanceBetweenDates(b,h.getEndDate())}if(l){i=c.getDateFromCoordinate(a.otherEdgeX-Math.min(q,a.maxWidth))||b;j=c.timeAxisViewModel.getDistanceBetweenDates(i,b);if(d.getWidth()!==e){d.setWidth(e);d.setX(d.getX()+j)}}else {i=c.getDateFromCoordinate(a.otherEdgeY-Math.min(p,a.maxHeight))||b;j=c.timeAxisViewModel.getDistanceBetweenDates(i,b);if(d.getHeight()!==e){d.setHeight(e);d.setY(d.getY()+j)}}}else {e=c.timeAxisViewModel.getDistanceBetweenDates(h.getStartDate(),f);if(l){d.setWidth(e)}else {d.setHeight(e)}}}else {if(!b||!f||a.start-b===0&&a.end-f===0){return}}a.end=f;a.start=b;c.fireEvent('eventpartialresize',c,h,b,f,a.el)},onViewScroll:function(a,b){this.resizer.resizeTracker.onDrag({});this.partialResize(this.resizer,0,0)},afterResize:function(e,o,n,m){var a=this,h=e.resourceRecord,f=e.eventRecord,k=f.getStartDate(),l=f.getEndDate(),b=e.start||k,d=e.end||l,g=a.schedulerView,j=!1,i=!0,c=a.validatorFn.call(a.validatorFnScope||a,h,f,b,d,m);Sch.util.ScrollManager.deactivate();g.getScrollable().un('scroll',this.onViewScroll,this);if(this.showTooltip){this.getTipInstance().hide()}a.resizeContext={resourceRecord:e.resourceRecord,eventRecord:f,start:b,end:d,finalize:function(){a.finalize.apply(a,arguments)}};if(c&&typeof c!=='boolean'){c=c.valid}if(b&&d&&d-b>0&&(b-k!==0||d-l!==0)&&c!==!1){i=g.fireEvent('beforeeventresizefinalize',a,a.resizeContext,m)!==!1;j=!0}else {g.repaintEventsForResource(h)}if(i){a.finalize(j)}},finalize:function(e){var a=this.schedulerView;var b=this.resizeContext;var c=!1;var d=function(){c=!0};a.getEventStore().on('update',d);this.resizer.target.destroy();if(Ext.isIE){document.body.focus()}if(e){if(this.resizer.isStart){b.eventRecord.setStartDate(b.start,!1,a.getEventStore().skipWeekendsDuringDragDrop)}else {b.eventRecord.setEndDate(b.end,!1,a.getEventStore().skipWeekendsDuringDragDrop)}if(!c){a.repaintEventsForResource(b.resourceRecord)}}else {a.repaintEventsForResource(b.resourceRecord)}this.resizer.destroy();delete this.resizer;a.getEventStore().un('update',d);a.fireEvent('eventresizeend',a,b.eventRecord);this.resizeContext=null},cleanUp:function(){if(this.tipInstance){this.tipInstance.destroy()}}},1,0,0,0,0,0,[Sch.feature,'ResizeZone'],0);Ext.cmd.derive('Sch.column.Resource',Ext.grid.Column,{align:'center',menuDisabled:!0,hideable:!1,sortable:!1,locked:!1,lockable:!1,draggable:!1,enableLocking:!1,cellFocusable:!1,model:null,initComponent:function(){this.tdCls=(this.tdCls||'')+' sch-timetd';this.cls=(this.cls||'')+' sch-resourcecolumn-header';Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)}},0,['resourcecolumn'],['component','box','container','headercontainer','gridcolumn','resourcecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'resourcecolumn':!0},['widget.resourcecolumn'],0,[Sch.column,'Resource'],0);Ext.cmd.derive('Sch.column.Day',Ext.grid.column.Column,{align:'center',start:null,end:null,draggable:!1,groupable:!1,hideable:!1,sortable:!1,menuDisabled:!0,enableLocking:!1,lockable:!1,flex:1,resizable:!1,cellFocusable:!1,tdCls:'sch-timetd',initComponent:function(){var a=new Date();this.addCls('sch-daycolumn-header');if(this.isWeekend()){this.addCls('sch-daycolumn-header-weekend');this.tdCls=(this.tdCls||'')+' sch-daycolumn-weekend'}if(this.start.getDate()===a.getDate()&&this.start.getMonth()===a.getMonth()&&this.start.getYear()===a.getYear()){this.addCls('sch-daycolumn-header-today');this.tdCls=(this.tdCls||'')+' sch-daycolumn-today'}Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},isWeekend:function(){var a=this.start.getDay();return a===6||a===0}},0,['weekview-day'],['component','box','container','headercontainer','gridcolumn','weekview-day'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'weekview-day':!0},['widget.weekview-day'],0,[Sch.column,'Day'],0);Ext.cmd.derive('Sch.view.WeekView',Ext.Base,{view:null,constructor:function(a){Ext.apply(this,a)},getElementsFromEventRecord:function(e,f,a,d){var c=this.view,b;d=d||!1;if(a!==null&&a!==undefined){b='[id^='+c.eventPrefix+e.internalId+'-calendar-'+a+'-]'}else {b='[id^='+c.eventPrefix+e.internalId+'-calendar-]'}return c.getEl().query(b,d)},getColumnsBy:function(e,d){var b=this.view.panel.headerCt.getGridColumns();var c=[];for(var a=0;a<b.length;a++){if(e.call(this,b[a])){if(d!==!0){c.push(b[a])}else {c.push({column:b[a],index:a})}}}return c},getColumnsForDateRange:function(a,b){return this.getColumnsBy(function(c){return !(a.getEndDate()<=c.start||a.getStartDate()>=c.end)},b)},getColumnEvents:function(a){var b=[];this.view.getEventStore().each(function(c){if(!(c.getEndDate()<=a.start||c.getStartDate()>=a.end)){b.push(c)}});return b},getColumnsByResource:function(b,a){return this.getColumnsBy(function(c){return c.start==b.start},a)[0]},translateToScheduleCoordinate:function(b){var a=this.view;if(Ext.isArray(b)){return [b[0]-a.getEl().getX()+a.getHorizontalScroll(),b[1]-a.getViewContainerElementTop()+a.getVerticalScroll()]}else {return b-a.getViewContainerElementTop()+a.getVerticalScroll()}},translateToPageCoordinate:function(b){var a=this.view;var c=a.getEl();if(Ext.isArray(b)){return [b[0]+c.getX()-a.getHorizontalScroll(),b[1]+a.getViewContainerElementTop()-a.getVerticalScroll()]}else {return b+a.getViewContainerElementTop()-a.getVerticalScroll()}},getDateFromXY:function(d,b,c){var a=d;if(!c){a=this.translateToScheduleCoordinate(a)}return this.view.timeAxisViewModel.getDateFromPosition(a,b)},getEventRenderData:function(l,m,g){var e=l.getStartDate(),f=l.getEndDate(),b=this.view,i=b.panel.headerCt.getGridColumns(),h=i[g].start,j=i[g].end,d=Math;var k=Math.floor(b.getCoordinateFromDate(Sch.util.Date.max(e,h)));var c=Math.floor(b.timeAxisViewModel.getPositionFromDate(Sch.util.Date.min(f,j),!0));var a;if(c===0){c=b.getStore().getCount()*b.getRowHeight()}a={top:d.max(0,d.min(k,c)-b.eventBorderWidth),height:d.max(1,d.abs(k-c))};a.start=e;a.end=f;a.startsOutsideView=e<h;a.endsOutsideView=f>j;return a},getScheduleRegion:function(b,h){var a=this.view,c=b?this.getColumnsByResource(b).getRegion():a.getTableRegion(),d=this.translateToPageCoordinate(0),e=this.translateToPageCoordinate(a.getStore().getCount()*a.getRowHeight()),g=c.left+a.barMargin,f=c.right-a.barMargin;return new Ext.util.Region(Math.min(d,e),f,Math.max(d,e),g)},getWeekViewColumnWidth:function(){return this.view.timeAxisViewModel.weekViewColumnWidth},getResourceRegion:function(i,b,d){var a=this.view,c=a.getResourceStore().indexOf(i)*this.getWeekViewColumnWidth(),e=a.timeAxis.getStart(),g=a.timeAxis.getEnd(),k=b?Sch.util.Date.max(e,b):e,m=d?Sch.util.Date.min(g,d):g,f=Math.max(0,a.getCoordinateFromDate(k)-a.cellTopBorderWidth),h=a.getCoordinateFromDate(m)-a.cellTopBorderWidth,l=c+a.cellBorderWidth,j=c+this.getWeekViewColumnWidth()-a.cellBorderWidth;return new Ext.util.Region(Math.min(f,h),j,Math.max(f,h),l)},columnRenderer:function(l,a,k,j,f){var b=this.view;var g='';if(j===0){var c,e,d,i;c=[];e=this.getColumnEvents(a.column);for(d=0,i=e.length;d<i;d++){var h=e[d];c.push(b.generateTplData(h,h.getResources()[0],f))}if(a.column.rendered&&this.getWeekViewColumnWidth()!==a.column.getWidth()){this.setColumnWidth(a.column.getWidth(),!0)}b.eventLayout.vertical.applyLayout(c,this.getWeekViewColumnWidth()-2*b.barMargin-b.cellBorderWidth);g='&#160;'+b.eventTpl.apply(c)}if(f%2===1){a.tdCls=(a.tdCls||'')+' '+b.altColCls;a.cellCls=(a.cellCls||'')+' '+b.altColCls}return g},resolveResource:function(b){var d=this.view;b=Ext.fly(b).is(d.timeCellSelector)?b:Ext.fly(b).up(d.timeCellSelector);if(b){var a=b.dom?b.dom:b;var c=0;if(Ext.isIE8m){a=a.previousSibling;while(a){if(a.nodeType===1){c++}a=a.previousSibling}}else {c=Ext.Array.indexOf(Array.prototype.slice.call(a.parentNode.children),a)}if(c>=0){var e=d.panel.headerCt.getGridColumns()[c];return {start:e.start,end:e.end}}}},onEventUpdate:function(d,a){if(!this.view.headerCt.items.get(0).rendered){return}this.renderSingle(a);var b=this.view;var c=b.getEventSelectionModel();c.forEachEventRelatedSelection(a,function(c){b.onEventBarSelect(c)})},onEventAdd:function(c,a){if(!this.view.headerCt.items.get(0).rendered){return}var b=this.view;if(a.length===1){this.renderSingle(a[0])}else {b.repaintAllEvents()}},onEventRemove:function(c,a){if(!this.view.headerCt.items.get(0).rendered){return}var b=this.view;if(a.length===1){Ext.Array.each(b.getElementsFromEventRecord(a[0]),function(b){Ext.fly(b).destroy()});this.relayoutRenderedEvents(a[0])}else {b.repaintAllEvents()}},relayoutRenderedEvents:function(b){var a=this,c=a.getColumnsForDateRange(b,!0);Ext.Array.each(c,function(c){a.repaintEventsForColumn(c.column,c.index)})},renderSingle:function(a){var b=this.view;Ext.Array.each(b.getElementsFromEventRecord(a),function(b){Ext.fly(b).destroy()});var c=a.previous||{};var d=Sch.util.Date;var e=new Sch.model.Range({StartDate:d.min(c.StartDate||a.getStartDate(),a.getStartDate()),EndDate:d.max(c.EndDate||a.getEndDate(),a.getEndDate())});var f=this.getColumnsForDateRange(e);Ext.Array.each(f,function(c){var d=c.getIndex();var f=this.getColumnEvents(c);var e=Ext.Array.map(f,function(e){if(e===a){return b.generateTplData(a,a.getResources()[0],d)}else {return {start:e.getStartDate()<c.start?c.start:e.getStartDate(),end:e.getEndDate()>c.end?c.end:e.getEndDate(),event:e}}});b.eventLayout.vertical.applyLayout(e,c.getWidth()-2*b.barMargin-b.cellBorderWidth);Ext.Array.each(e,function(e){if(e.event===a){var f=b.getScheduleCell(0,d);if(f){if(!Ext.versions.touch){f=Ext.fly(f).first()}b.eventTpl.append(f,[e])}}else {var g=b.getElementsFromEventRecord(e.event,null,d)[0];g.setStyle({left:e.left+'px',width:Math.max(e.width,0)+'px'})}})},this)},repaintEventsForColumn:function(c,n){var k=this;var j=k.getColumnEvents(c);var e=k.view;var f=[],b,l,a,d,g,h;for(b=0,l=j.length;b<l;b++){a=j[b];d=e.getElementsFromEventRecord(a)[0];if(!d){return}var i=d.id.split('-');i.pop();g=a.getStartDate();h=a.getEndDate();f.push({start:g<c.start?c.start:g,end:h>c.end?c.end:h,event:a,id:i.join('-')})}e.eventLayout.vertical.applyLayout(f,c.getWidth()-2*e.barMargin-e.cellBorderWidth);var m=e.getNode(0);for(b=0;b<f.length;b++){a=f[b];d=Ext.DomQuery.selectNode('td:nth-child('+(n+1)+') [id^='+a.id+'-]',m);d&&Ext.fly(d).setStyle({left:a.left+'px',width:Math.max(a.width,0)+'px'})}},getTimeSpanRegion:function(d,c){var h=this.view,e=h.getCoordinateFromDate(d),g=c?h.timeAxisViewModel.getPositionFromDate(c,!0):e;var a=this.getColumnsBy(function(a){return a.start<=d&&a.end>d})[0];var b=this.getColumnsBy(function(a){return a.start<c&&a.end>=c})[0];if(!a||!b||!a.rendered||!b.rendered){return new Ext.util.Region(-1,0,-1,0)}var f=this.translateToScheduleCoordinate([a.getX(),0]);var i=this.translateToScheduleCoordinate([b?b.getRegion().right:a.getWidth()+f[0],0]);return new Ext.util.Region(Math.min(e,g),i[0],Math.max(e,g),f[0])},getStartEndDatesFromRegion:function(a,b){var d=this.view.getDateFromCoordinate([a.left,a.top],b),c=this.view.getDateFromCoordinate([a.left,a.bottom],b);if(d&&c){return {start:d,end:c}}else {return null}},setColumnWidth:function(a,c){var b=this.view;b.weekViewColumnWidth=a;b.getTimeAxisViewModel().setViewColumnWidth(a,c)},getVisibleDateRange:function(){var a=this.view;if(!a.rendered){return null}var e=a.getScroll(),d=a.getViewContainerHeight(),b=a.getTableRegion(),c=a.timeAxis.getEnd();if(b.bottom-b.top<d){var f=a.timeAxis.getStart();return {startDate:f,endDate:c}}return {startDate:a.getDateFromCoordinate(e.top,null,!0),endDate:a.getDateFromCoordinate(e.top+d,null,!0)||c}},getItemBox:function(a){return null},getConnectorStartSide:function(a){return 'top'},getConnectorEndSide:function(a){return 'bottom'}},1,0,0,0,0,0,[Sch.view,'WeekView'],0);Ext.cmd.derive('Sch.mixin.SchedulerView',Sch.mixin.AbstractSchedulerView,{eventResizeHandles:'end',dndValidatorFn:Ext.emptyFn,resizeValidatorFn:Ext.emptyFn,createValidatorFn:Ext.emptyFn,weekViewClass:'Sch.view.WeekView',lockedGridDependsOnSchedule:null,_initializeSchedulerView:function(){Sch.mixin.AbstractSchedulerView.prototype._initializeSchedulerView.apply(this,arguments);this.on({destroy:this._destroy,afterrender:this._afterRender,itemupdate:this.onRowUpdated,scope:this});this.timeAxis.on('beginreconfigure',this.clearRowHeightCache,this);if(Ext.getVersion().isGreaterThan('5.1.1')){this.on('itemadd',function(b){var a=this.all.item(this.all.endIndex-b.length);if(a){a.dom.style.height=''}})}var a=this;if(!this.eventPrefix){throw 'eventPrefix missing'}this.on({resourcestorechange:this.clearRowHeightCache,assignmentstorechange:this.clearRowHeightCache,eventstorechange:this.clearRowHeightCache,scope:this})},inheritables:function(){return {loadingText:this.L('loadingText'),overItemCls:'',trackOver:!1,selectedItemCls:'',setReadOnly:function(a){if(this.dragCreator){this.dragCreator.setDisabled(a)}this.callParent(arguments)},repaintEventsForResource:function(b,e){var a=this,c=a.isHorizontal(),d=c?a.indexOf(b):0;if(c){a.eventLayout.horizontal.clearCache(b)}if(d>=0){Ext.suspendLayouts();if(c){a.refreshNode(b);if(a.lockedGridDependsOnSchedule){a.lockingPartner.refreshNode(b)}}else {a.refreshNode(d)}Ext.resumeLayouts();if(e){var g=a.getEventSelectionModel();var f=a.getEventStore().getEventsForResource(b);Ext.Array.each(f,function(c){g.forEachEventRelatedSelection(c,function(d){a.onEventBarSelect(d,!0)})})}}},repaintAllEvents:function(){if(this.isHorizontal()){this.refreshView()}else {this.refreshNode(0)}},handleScheduleEvent:function(a){var j=a.getTarget('.'+this.eventCls,3),f=!j&&a.getTarget('.'+this.timeCellCls,3);if(f){var g=this.getDateFromDomEvent(a,'floor');var d=this.findRowByChild(f);var i=this.indexOf(d);var c;if(this.isHorizontal()){c=this.getRecordForRowNode(d)}else {var b=a.getTarget(this.timeCellSelector,5);if(b){var h=typeof b.cellIndex=='number'?b.cellIndex:b.getAttribute('data-cellIndex');var e=this.headerCt.getGridColumns()[h];c=e&&e.model}}if(a.type.indexOf('pinch')>=0){this.fireEvent('schedule'+a.type,this,a)}else {this.fireEvent('schedule'+a.type,this,g,i,c,a)}}},onEventDataRefresh:function(){this.clearRowHeightCache();this.callParent(arguments)},onUnbindStore:function(a){a.un({refresh:this.clearRowHeightCache,clear:this.clearRowHeightCache,load:this.clearRowHeightCache,scope:this});this.callParent(arguments)},bindStore:function(a){a&&a.on({refresh:this.clearRowHeightCache,clear:this.clearRowHeightCache,load:this.clearRowHeightCache,scope:this});this.callParent(arguments)},refreshKeepingScroll:function(){this.lockingPartner.refreshView();this.callParent(arguments)}}},getEventSelectionModel:function(){var b=this,a=b.eventSelModel||{},c=b.eventSelModelType,d;if(a.events){return a}if(!c&&b.getEventStore().getAssignmentStore()){c='assignmentmodel'}else {if(!c){c='eventmodel'}}d='SINGLE';if(b.simpleSelect){d='SIMPLE'}else {if(b.multiSelect){d='MULTI'}}Ext.applyIf(a,{allowDeselect:b.allowDeselect,mode:d});if(!a.events){a=b.eventSelModel=Ext.create('selection.'+c,a)}if(b.disableSelection){a.locked=!0}return a},_afterRender:function(){this.setEventStore(this.eventStore,!0);this.getEventSelectionModel().bindToView(this);this.setupEventListeners();this.configureFunctionality();var a=this.headerCt.resizer;if(a){a.doResize=Ext.Function.createSequence(a.doResize,this.afterHeaderResized,this)}this.on('itemupdate',function(){this.hoveredEventNode=null})},_destroy:function(){this.setEventStore(null)},clearRowHeightCache:function(){if(this.isHorizontal()){this.eventLayout.horizontal.clearCache()}},configureFunctionality:function(){var a=this.validatorFnScope||this;if(this.eventResizeHandles!=='none'&&Sch.feature.ResizeZone){this.resizePlug=new Sch.feature.ResizeZone(Ext.applyIf({schedulerView:this,validatorFn:function(b,c,d,e){return (this.allowOverlap||this.isDateRangeAvailable(d,e,c,b))&&this.resizeValidatorFn.apply(a,arguments)},validatorFnScope:this},this.resizeConfig||{}))}if(this.enableEventDragDrop!==!1&&Sch.feature.DragDrop){this.dragdropPlug=new Sch.feature.DragDrop(this,{validatorFn:function(d,c,b,e){return (this.allowOverlap||this.isDateRangeAvailable(b,Sch.util.Date.add(b,Sch.util.Date.MILLI,e),d[0],c))&&this.dndValidatorFn.apply(a,arguments)},validatorFnScope:this,dragConfig:this.dragConfig||{}})}if(this.enableDragCreation!==!1&&Sch.feature.DragCreator){this.dragCreator=new Sch.feature.DragCreator(Ext.applyIf({schedulerView:this,disabled:this.readOnly,validatorFn:function(b,c,d){return (this.allowOverlap||this.isDateRangeAvailable(c,d,null,b))&&this.createValidatorFn.apply(a,arguments)},validatorFnScope:this},this.createConfig||{}))}},onBeforeDragDrop:function(c,b,a){return !this.readOnly&&!a.getTarget().className.match('sch-resizable-handle')},onDragDropStart:function(){if(this.dragCreator){this.dragCreator.setDisabled(!0)}if(this.tip){this.tip.hide();this.tip.disable()}if(this.overScheduledEventClass){this.setMouseOverEnabled(!1)}this.hoveredEventNode=null},onDragDropEnd:function(){if(this.dragCreator){this.dragCreator.setDisabled(!1)}if(this.tip){this.tip.enable()}if(this.overScheduledEventClass){this.setMouseOverEnabled(!0)}},onBeforeDragCreate:function(d,b,c,a){return !this.readOnly&&!a.ctrlKey},onDragCreateStart:function(){if(this.overScheduledEventClass){this.setMouseOverEnabled(!1)}if(this.tip){this.tip.hide();this.tip.disable()}this.disableViewScroller(!0)},onDragCreateEnd:function(d,a,b){if(!this.getEventEditor()){var c=b?[b]:[];if(this.fireEvent('beforeeventadd',this,a,c)!==!1){this.onEventCreated(a);this.getEventStore().append(a);if(!this.isWeekView()){a.assign(b)}}this.dragCreator.getProxy().hide()}if(this.overScheduledEventClass){this.setMouseOverEnabled(!0)}},onEventCreated:function(a){},onAfterDragCreate:function(){if(this.overScheduledEventClass){this.setMouseOverEnabled(!0)}if(this.tip){this.tip.enable()}this.disableViewScroller(!1)},onBeforeResize:function(){return !this.readOnly},onResizeStart:function(){if(this.tip){this.tip.hide();this.tip.disable()}if(this.dragCreator){this.dragCreator.setDisabled(!0)}this.disableViewScroller(!0)},onResizeEnd:function(){if(this.tip){this.tip.enable()}if(this.dragCreator){this.dragCreator.setDisabled(!1)}this.disableViewScroller(!1)},setupEventListeners:function(){this.on({beforeeventdrag:this.onBeforeDragDrop,eventdragstart:this.onDragDropStart,aftereventdrop:this.onDragDropEnd,beforedragcreate:this.onBeforeDragCreate,dragcreatestart:this.onDragCreateStart,dragcreateend:this.onDragCreateEnd,afterdragcreate:this.onAfterDragCreate,beforeeventresize:this.onBeforeResize,eventresizestart:this.onResizeStart,eventresizeend:this.onResizeEnd,scope:this})},afterHeaderResized:function(){var a=this.headerCt.resizer;if(a&&!this.isHorizontal()){if(this.panel.forceFit){this.setColumnWidth(a.origWidth)}else {var b=a.dragHd.getWidth();this.setColumnWidth(b)}}},columnRenderer:function(e,b,a,d,c){return this[this.mode].columnRenderer(e,b,a,d,c)},onRowUpdated:function(b){var a=this,c;if(a.isHorizontal()&&a.hasListener('eventrepaint')){Ext.Array.each(b.getEvents(),function(d){c=a.getElementsFromEventRecord(d,b,null,!0);Ext.Array.each(c,function(c){a.fireEvent('eventrepaint',a,d,c)})})}},scrollResourceEventIntoView:function(d,e,n,j,l,k,o){var a=this,f=e.getStartDate(),h=e.getEndDate(),c,b;var g=function(){b=a.getElementsFromEventRecord(e,d,n);b=b.length&&b[0]||null;a.scrollElementIntoView(b,!0,l,j,null,k,o)};if(!a.timeAxis.dateInAxis(f)||!a.timeAxis.dateInAxis(h)){c=a.timeAxis.getEnd()-a.timeAxis.getStart();a.timeAxis.setTimeSpan(new Date(f.valueOf()-c/2),new Date(h.getTime()+c/2));a.up('panel').scrollTask.cancel()}if(this.isHorizontal()){var i=a.up('timelinegrid,timelinetree');var m=i.store.isTreeStore;i.ensureVisible(m?d.getPath():d,{callback:function(){if(this.isLocked===!1){g()}}})}else {g()}}},0,0,0,0,0,[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.mixin,'SchedulerView'],0);Ext.cmd.derive('Sch.mixin.GridViewCanvas',Ext.Mixin,{mixinConfig:{after:{'onRender':'afterOnRender'}},secondaryCanvasCls:'sch-secondary-canvas',secondaryCanvasLayerCls:'sch-secondary-canvas-layer',itemsCanvasEl:null,itemsCanvasCls:'sch-item-canvas',itemsCanvasLayerCls:'sch-item-canvas-layer',getSecondaryCanvasEl:function(){var a=null;if(this.isItemCanvasAvailable()){a=this.getItemCanvasEl(-1,{tag:'div',role:'presentation',cls:this.secondaryCanvasCls})}return a},isItemCanvasAvailable:function(b){var a=this;return !!(a.rendered&&!a.destroyed&&(a.getNodeContainer()||a.itemsCanvasEl&&(a.itemsCanvasEl._underMixinControl||!Ext.isGarbage(a.itemsCanvasEl.dom))))},isItemCanvasPresent:function(b){var a=this;return !!(a.rendered&&!a.destroyed&&a.itemsCanvasEl&&(b===undefined||a.itemsCanvasEl[b]&&(a.itemsCanvasEl._underMixinControl||!Ext.isGarbage(a.itemsCanvasEl[b].dom))))},getItemCanvasEl:function(c,e){var d=this,a=d.itemsCanvasEl,b=a;if(!a||!a.dom||!a._underMixinControl&&Ext.isGarbage(a.dom)){b=a=d.itemsCanvasEl=Ext.fly(d.getNodeContainer()).insertFirst({cls:d.itemsCanvasCls})}if(arguments.length>0){c=c||0;b=a[c]||Ext.dom.Query.selectNode('[data-sch-secondary-canvas-layer="'+c+'"]',a.dom);if(!b||!b.dom||!a._underMixinControl&&Ext.isGarbage(b.dom)){b=a.createChild((Ext.isFunction(e)?e():e)||{tag:'div'});b.set({'data-sch-secondary-canvas-layer':c});b.setStyle('zIndex',c);b.addCls(d.itemsCanvasLayerCls);a[c]=b}}return b},afterOnRender:function(){if(this.bufferedRenderer){this.on('viewready',this.myOnReady,this)}},myOnReady:function(){var a=this,b=a.bufferedRenderer,c=b.onRangeFetched;b.onRangeFetched=function(){var b=a.getItemCanvasEl(),d=a.getNodeContainer(),e;b._underMixinControl=!0;d.removeChild(b.dom);e=c.apply(this,arguments);d.insertBefore(b.dom,d.firstChild);delete b._underMixinControl;return e}}},0,0,0,0,0,0,[Sch.mixin,'GridViewCanvas'],0);Ext.cmd.derive('Sch.view.SchedulerGridView',Sch.view.TimelineGridView,{},0,['schedulergridview'],['component','box','dataview','tableview','gridview','schedulergridview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0,'schedulergridview':!0},['widget.schedulergridview'],[[Sch.mixin.SchedulerView.prototype.mixinId||Sch.mixin.SchedulerView.$className,Sch.mixin.SchedulerView],[Sch.mixin.GridViewCanvas.prototype.mixinId||Sch.mixin.GridViewCanvas.$className,Sch.mixin.GridViewCanvas],[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.view,'SchedulerGridView'],function(){this.override(Sch.mixin.SchedulerView.prototype.inheritables()||{})});Ext.cmd.derive('Sch.selection.EventModel',Ext.selection.Model,{deselectOnContainerClick:!0,selectedOnMouseDown:null,bindToView:function(b){var a=this;a.view=b;a.bindStore(a.getSelectionStore(b));b.on({eventclick:a.onEventClick,eventmousedown:a.onEventMouseDown,itemmousedown:a.onItemMouseDown,refresh:function(){a.refresh()},destroy:function(){a.bindStore(null)},scope:a})},getSelectionStore:function(a){return a.getEventStore()},bindStore:function(a){if(this.getStore()){this.mun(this.getStore(),'load',this.onSelectionStoreLoad,this)}if(a){this.mon(a,'load',this.onSelectionStoreLoad,this)}Ext.selection.Model.prototype.bindStore.apply(this,arguments)},onSelectionStoreLoad:function(){this.deselectAll()},onEventMouseDown:function(c,a,b){this.selectedOnMouseDown=null;if((!this.ignoreRightMouseSelection||b.button!==2)&&!this.isSelected(a)){this.selectedOnMouseDown=a;this.selectWithEvent(a,b)}},onEventClick:function(c,b,a){if((!this.ignoreRightMouseSelection||a.button!==2)&&!this.selectedOnMouseDown){this.selectWithEvent(b,a)}},onItemMouseDown:function(b,c,d,e,a){if(this.deselectOnContainerClick&&!a.getTarget(this.view.eventSelector)){this.deselectAll()}},onSelectChange:function(c,d,b,g){var a=this,f=a.view,h=a.store,e=d?'select':'deselect',i=0;if((b||a.fireEvent('before'+e,a,c))!==!1&&g()!==!1){if(d){f.onEventBarSelect(c,b)}else {f.onEventBarDeselect(c,b)}if(!b){a.fireEvent(e,a,c)}}},selectRange:Ext.emptyFn,selectNode:function(d,c,b){var a=this.view.resolveEventRecord(d);if(a){this.select(a,c,b)}},deselectNode:function(c,d,b){var a=this.view.resolveEventRecord(c);if(a){this.deselect(a,b)}},getFirstSelectedEventForResource:function(f){var d=this.getSelection(),b=null,a,e,c;for(a=0,e=d.length;!b&&a<e;++a){c=d[a];if(c.isAssignedTo(f)){b=c}}return b},getDraggableSelections:function(){return Ext.Array.filter(this.getSelection(),function(a){return a.isDraggable()})},forEachEventRelatedSelection:function(a,b){this.isSelected(a)&&b(a)}},0,0,0,0,['selection.eventmodel'],0,[Sch.selection,'EventModel'],0);Ext.cmd.derive('Sch.selection.AssignmentModel',Sch.selection.EventModel,{assignmentStoreDetacher:null,getSelectionStore:function(a){return a.getEventStore().assignmentStore},onBindStore:function(b){Sch.selection.EventModel.prototype.onBindStore.apply(this,arguments);if(b){var a=this;a.assignmentStoreDetacher&&a.assignmentStoreDetacher.destroy();a.assignmentStoreDetacher=b.on({remove:a.onAssignmentStoreRemove,clear:a.onAssignmentStoreClear,refresh:a.onAssignmentStoreRefresh,scope:a,destroyable:!0})}},selectWithEvent:function(f,e){var g=this,d=g.view,c=d.resolveResource(e.getTarget()),b,a;if(c){b=d.getEventStore().getAssignmentStore();a=b.getAssignmentForEventAndResource(f,c);if(a){Sch.selection.EventModel.prototype.selectWithEvent.call(this,a,e)}}},getFirstSelectedEventForResource:function(f){var d=this.getSelection(),b=null,a,e,c;for(a=0,e=d.length;!b&&a<e;++a){c=d[a];if(c.getEvent().isAssignedTo(f)){b=c;break}}return b},getDraggableSelections:function(){return Ext.Array.filter(this.getSelection(),function(a){return a.getEvent().isDraggable()})},forEachEventRelatedSelection:function(a,b){Ext.Array.each(this.getSelection(),function(c){c.getEvent()===a&&b(c)})},onAssignmentStoreRemove:function(b,a){this.deselect(a,!0)},onAssignmentStoreClear:function(a){this.clearSelections()},onAssignmentStoreRefresh:function(a){this.clearSelections()},destroy:function(){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher');Sch.selection.EventModel.prototype.destroy.call(this)}},0,0,0,0,['selection.assignmentmodel'],0,[Sch.selection,'AssignmentModel'],0);Ext.cmd.derive('Sch.column.timeAxis.Vertical',Ext.grid.column.Column,{align:'right',draggable:!1,groupable:!1,hideable:!1,sortable:!1,menuDisabled:!0,timeAxis:null,timeAxisViewModel:null,cellTopBorderWidth:null,cellBottomBorderWidth:null,totalBorderWidth:null,enableLocking:!1,locked:!0,lockable:!1,dataIndex:'start',initComponent:function(){Ext.grid.column.Column.prototype.initComponent.apply(this,arguments);this.tdCls=(this.tdCls||'')+' sch-verticaltimeaxis-cell';this.scope=this;this.addCls('sch-verticaltimeaxis-header');this.totalBorderWidth=this.cellTopBorderWidth+this.cellBottomBorderWidth},renderer:function(d,c,e,f){var a=this.timeAxisViewModel;if(!a.columnConfig.middle){return}c.style='height:'+(a.getTickWidth()-this.totalBorderWidth)+'px';var b;if(!a.isWeek()&&d&&a.isMajorTick(d)){b=a.headerConfig[a.getMajorHeaderName()];c.tdCls+=' sch-column-line-solid'}else {b=a.getBottomHeader()}if(b.renderer){return b.renderer.call(b.scope||this,e.data.start,e.data.end,c,f)}else {return Ext.Date.format(d,b.dateFormat)}}},0,['verticaltimeaxis'],['component','box','container','headercontainer','gridcolumn','verticaltimeaxis'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'verticaltimeaxis':!0},['widget.verticaltimeaxis'],0,[Sch.column.timeAxis,'Vertical'],0);Ext.cmd.derive('Sch.column.ResourceName',Ext.grid.Column,{initComponent:function(){Ext.apply(this,{text:this.L('name')});Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},renderer:function(b,c,a){return a.getName()}},0,['scheduler_resourcenamecolumn'],['component','box','container','headercontainer','gridcolumn','scheduler_resourcenamecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'scheduler_resourcenamecolumn':!0},['widget.scheduler_resourcenamecolumn'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.column,'ResourceName'],0);Ext.cmd.derive('Sch.mixin.SchedulerPanel',Sch.mixin.AbstractSchedulerPanel,{eventSelModelType:null,eventSelModel:null,enableEventDragDrop:!0,enableDragCreation:!0,dragConfig:null,weekViewColumnClass:'Sch.column.Day',componentCls:'sch-schedulerpanel',lockedGridDependsOnSchedule:!0,verticalListeners:null,horizontalLockedWidth:null,verticalColumns:null,calendarColumns:null,horizontalCls:['sch-horizontal'],verticalCls:['sch-vertical-resource','sch-vertical'],weekviewCls:['sch-calendar','sch-vertical'],_oldViewPresetArgs:null,inheritables:function(){return {variableRowHeight:!0,initComponent:function(){var a=this,f=a.normalViewConfig=a.normalViewConfig||{},c=a.getDependencyViewConfig&&a.getDependencyViewConfig()||{};a._initializeSchedulerPanel();a.verticalListeners={clear:a.refreshResourceColumns,datachanged:a.refreshResourceColumns,update:a.refreshResourceColumns,load:a.refreshResourceColumns,scope:a};a.calendarListeners={reconfigure:a.refreshCalendarColumns,priority:1,scope:a};a.calendarNormalGridListeners={columnresize:a.onCalendarColumnResize,scope:a};a.calendarResourceStoreListeners={load:a.onCalendarResourceStoreChange,add:a.onCalendarResourceStoreChange,remove:a.onCalendarResourceStoreChange,scope:a};a.normalViewConfig=a.normalViewConfig||{};Ext.apply(a.normalViewConfig,{eventStore:a.eventStore,resourceStore:a.resourceStore,dependencyStore:a.dependencyStore,eventBarTextField:a.eventBarTextField||this.getEventStore().getModel().prototype.nameField});if(a.getDependencyStore()&&c.enableDependencyDragDrop!==!1){f.terminalSides=c.terminalSides||['left','right','top','bottom']}Ext.Array.each(['barMargin','eventBodyTemplate','eventTpl','allowOverlap','dragConfig','eventBarIconClsField','onEventCreated','constrainDragToResource','snapRelativeToEventStartDate','eventSelModelType','eventSelModel','simpleSelect','multiSelect','allowDeselect','lockedGridDependsOnSchedule'],function(b){if(b in a){a.normalViewConfig[b]=a[b]}});a.callParent(arguments);if(!a.isHorizontal()){a.setGroupingFeatureDisabled(!0)}if(a.isVertical()){a.mon(a.resourceStore,a.verticalListeners)}var e=a.lockedGrid.getView();var b=a.getSchedulingView();e.on('resize',a.onLockedViewResize,a);a.registerRenderer(b.columnRenderer,b);if(a.resourceZones){var d=Ext.StoreManager.lookup(a.resourceZones);d.setResourceStore(a.resourceStore);a.resourceZonesPlug=new Sch.plugin.ResourceZones(Ext.apply({store:d},a.resourceZonesConfig));a.resourceZonesPlug.init(a)}b.on('columnwidthchange',a.onColWidthChange,a);a.relayEvents(b,['eventclick','eventlongpress','eventmousedown','eventmouseup','eventdblclick','eventcontextmenu','eventmouseenter','eventmouseleave','eventkeydown','eventkeyup','beforeeventresize','eventresizestart','eventpartialresize','beforeeventresizefinalize','eventresizeend','beforeeventdrag','eventdragstart','eventdrag','beforeeventdropfinalize','eventdrop','aftereventdrop','beforedragcreate','dragcreatestart','beforedragcreatefinalize','dragcreateend','afterdragcreate','beforeeventadd']);if(!a.syncRowHeight){a.enableRowHeightInjection(e,b)}if(a.getDependencyStore()){a.addCls('sch-scheduler-with-dependencies')}},configureColumns:function(b){var a=this;b=b||[{xtype:'scheduler_resourcenamecolumn'}];a.callParent(arguments);a.verticalColumns=a.verticalColumns||[Ext.apply({xtype:'verticaltimeaxis'},a.timeAxisColumnCfg||{})];Ext.Array.each(a.verticalColumns,function(c){Ext.apply(c,{timeAxis:a.timeAxis,timeAxisViewModel:a.timeAxisViewModel,cellTopBorderWidth:a.cellTopBorderWidth,cellBottomBorderWidth:a.cellBottomBorderWidth})});a.calendarColumns=[Ext.apply({xtype:'verticaltimeaxis',width:60,timeAxis:a.timeAxis,timeAxisViewModel:a.timeAxisViewModel,cellTopBorderWidth:a.cellTopBorderWidth,cellBottomBorderWidth:a.cellBottomBorderWidth},a.calendarTimeAxisCfg||a.weekViewTimeAxisCfg||{})];if(a.isVertical()){a.columns=a.verticalColumns.concat(a.createResourceColumns(a.resourceColumnWidth||a.timeAxisViewModel.resourceColumnWidth));a.store=a.timeAxis;if(a.resourceStore.isGrouped()){a.timeAxis.group(a.resourceStore.groupField);a.bindGroupingFeatureListener()}}else {if(a.isWeekView()){a.columns=[];a.store=null;a.on('beforerender',a.refreshCalendarColumns,a)}}},applyViewSettings:function(c,d){this.callParent(arguments);var a=this.getSchedulingView(),b;if(this.orientation==='vertical'){b=c.timeColumnWidth||60;a.setColumnWidth(c.resourceColumnWidth||100,!0);a.setRowHeight(b,!0)}},onRender:function(){if(!this.isHorizontal()){this.reconfigureBufferedRendering(!0)}this.callParent(arguments)},afterRender:function(){var a=this.getSchedulingView();this.callParent(arguments);if(this.isVertical()){this.onLockedViewResize(null,null,this.lockedGrid.getView().getHeight())}else {if(this.isWeekView()){this.mon(this.timeAxis,this.calendarListeners);this.mon(this.resourceStore,this.calendarResourceStoreListeners);this.normalGrid.on(this.calendarNormalGridListeners)}}if(this.infiniteScroll){a.on({eventdragstart:this.doSuspendLayouts,aftereventdrop:this.doResumeLayouts,eventresizestart:this.doSuspendLayouts,eventresizeend:this.doResumeLayouts,scope:this})}if(this.lockedGridDependsOnSchedule){a.on('itemupdate',this.onNormalViewItemUpdate,this)}this.relayEvents(this.getEventSelectionModel(),['selectionchange','deselect','select'],'event')},getTimeSpanDefiningStore:function(){return this.eventStore},destroy:function(){var a=this;a.destroyStores&&Ext.destroyMembers(a,'eventStore','resourceStore','assignmentStore','dependencyStore');Ext.destroyMembers(a,'resourceZonesPlug');a.callParent(arguments)},scrollToDateCentered:function(b,f){var a=this.getSchedulingView();if(a.isWeekView()){var c=a.weekview.getColumnsBy(function(a){return a.start<=b&&a.end>b})[0];if(c){var d=a.getWidth()/2;var e=a.getViewContainerHeight()/2;a.scrollHorizontallyTo(Math.max(c.getLocalX()-d,0));a.scrollVerticallyTo(Math.max(a.getCoordinateFromDate(b,!0)-e,0))}}else {return this.callParent(arguments)}}}},doSuspendLayouts:function(){this.timeAxis.on({beginreconfigure:this.onBeginReconfigure,endreconfigure:this.onEndReconfigure,scope:this});this.lockedGrid.suspendLayouts();this.normalGrid.suspendLayouts()},doResumeLayouts:function(){this.timeAxis.un({beginreconfigure:this.onBeginReconfigure,endreconfigure:this.onEndReconfigure,scope:this});this.lockedGrid.resumeLayouts();this.normalGrid.resumeLayouts()},onBeginReconfigure:function(){this.normalGrid.resumeLayouts()},onEndReconfigure:function(){this.normalGrid.suspendLayouts()},onColWidthChange:function(b,a){if(this.isVertical()){this.resourceColumnWidth=a;this.refreshResourceColumns()}else {if(this.isWeekView()){this.weekViewColumnWidth=a;this.refreshCalendarColumns()}}},enableRowHeightInjection:function(c,a){var e=this;var d=new Ext.XTemplate('{%','this.processCellValues(values);','this.nextTpl.applyOut(values, out, parent);','%}',{priority:1,processCellValues:function(b){if(a.isHorizontal()){var d=1;if(a.dynamicRowHeight){var f=b.record;var h=a.eventLayout.horizontal;d=h.getNumberOfBands(f,function(){return a.getEventStore().filterEventsForResource(f,a.timeAxis.isRangeInAxis,a.timeAxis)})}var g=d*e.getRowHeight()-(d-1)*a.barMargin-a.cellTopBorderWidth-a.cellBottomBorderWidth;b.style=(b.style||'')+';height:'+g+'px;'}}});c.addCellTpl(d);Ext.Array.each(this.columns,function(b){b.hasCustomRenderer=!0});Ext.Array.each(this.horizontalColumns,function(b){b.hasCustomRenderer=!0});var b=this.getView().getStoreListeners();b=Ext.apply({},b);b.scope=this.getView();this.store.un(b);this.store.on(b)},getEventSelectionModel:function(){return this.getSchedulingView().getEventSelectionModel()},refreshResourceColumns:function(){var a=this.resourceColumnWidth||this.timeAxisViewModel.resourceColumnWidth;this.reconfigure(this.verticalColumns.concat(this.createResourceColumns(a)))},onCalendarColumnResize:function(c,a,b){if(b!==this.timeAxisViewModel.weekViewColumnWidth){this.timeAxisViewModel.setViewColumnWidth(b,!0)}this.getSchedulingView().weekview.repaintEventsForColumn(a,c.columnManager.indexOf(a))},onCalendarResourceStoreChange:function(){this.getSchedulingView().refreshView()},refreshCalendarColumns:function(){var b=this.createCalendarRows();var a=this.createCalendarColumns();this.reconfigure(b,this.calendarColumns.concat(a))},setGroupingFeatureDisabled:function(b){var c=this,a=c.normalGrid.view;if(!a.groupingFeature){return}a.groupingFeature[b?'disable':'enable']();a=c.lockedGrid.view;a.groupingFeature[b?'disable':'enable']()},refreshGroupingStore:function(){var a=this.normalGrid.view.groupingFeature;if(a){a.dataSource.processStore(this.timeAxis)}},bindGroupingFeatureListener:function(){this.mon(this.timeAxis,'reconfigure',this.refreshGroupingStore,this,{priority:10})},unbindGroupingFeatureListener:function(){this.mun(this.timeAxis,'reconfigure',this.refreshGroupingStore)},setMode:function(b,m){var a=this;if(!a.normalGrid){a.on('afterrender',function(){a.setMode(b,!0)});return}var d=typeof b==='string'?b:b.mode;if(!d){throw new Error('Mode is undefined')}if(d==='calendar'){d='weekview'}var c;if(b.viewPreset){c=[b.viewPreset,b.startDate||null,b.endDate||null]}if(d===a.mode&&!m){c&&a.setViewPreset.apply(a,c);return}if(a.fireEvent('beforemodechange',a,b)!==!1){a.mode=d;if(a.isHorizontal()){a.removeCls(a.verticalCls).removeCls(a.weekviewCls).addCls(a.horizontalCls)}else {if(a.isVertical()){a.removeCls(a.horizontalCls).removeCls(a.weekviewCls).addCls(a.verticalCls)}else {if(a.isWeekView()){a.removeCls(a.horizontalCls).removeCls(a.verticalCls).addCls(a.weekviewCls)}}}var l=a.normalGrid,n=a.lockedGrid.getView(),e=a.getSchedulingView(),k=l.headerCt;a.suspendRefresh();Ext.suspendLayouts();if(!a.isHorizontal()){a.setGroupingFeatureDisabled(!0)}else {a.setGroupingFeatureDisabled(!1)}a.unbindGroupingFeatureListener();var f=a.isWeekView();var g=e.isWeekView();if(g&&!f||!g&&f){c=c||a._oldViewPresetArgs||[f?'week':'weekAndDay'];a._oldViewPresetArgs=[a.viewPreset,a.timeAxis.getStart(),a.timeAxis.getEnd()]}e.setMode(d);k.removeAll(!0);a.reconfigureBufferedRendering();if(!a.isWeekView()){a.timeAxis.setMode('plain');a.mun(a.timeAxis,a.calendarListeners)}else {a.timeAxis.setMode('week');a.mon(a.timeAxis,a.calendarListeners)}c&&a.setViewPreset.apply(a,c);if(a.isHorizontal()){a.mun(a.resourceStore,a.verticalListeners);a.mun(a.resourceStore,a.calendarResourceStoreListeners);a.normalGrid.un(a.calendarNormalGridListeners);e.setRowHeight(a.rowHeight||a.timeAxisViewModel.rowHeightHorizontal,!0);a.reconfigure(a.resourceStore,a.horizontalColumns);if(a.horizontalLockedWidth!==null){a.lockedGrid.setWidth(a.horizontalLockedWidth)}}else {if(a.isWeekView()){a.mun(a.resourceStore,a.verticalListeners);a.mon(a.resourceStore,a.calendarResourceStoreListeners);a.normalGrid.on(a.calendarNormalGridListeners);a.bindGroupingFeatureListener();a.refreshCalendarColumns();e.setRowHeight(a.rowHeight||a.timeAxisViewModel.rowHeightVertical,!0);e.setColumnWidth(a.timeAxisViewModel.weekViewColumnWidth||100,!0)}else {a.normalGrid.un(a.calendarNormalGridListeners);a.mun(a.resourceStore,a.calendarResourceStoreListeners);var h=0;a.horizontalLockedWidth=a.lockedGrid.getWidth();a.mon(a.resourceStore,a.verticalListeners);a.bindGroupingFeatureListener();a.reconfigure(a.timeAxis,a.verticalColumns.concat(a.createResourceColumns(a.resourceColumnWidth||a.timeAxisViewModel.resourceColumnWidth)));Ext.Array.each(a.lockedGrid.query('gridcolumn'),function(a){h+=a.rendered?a.getWidth():a.width||100});e.setColumnWidth(a.timeAxisViewModel.resourceColumnWidth||100,!0);a.lockedGrid.setWidth(h)}}var i=a.resourceStore.groupField;if(i){a.store.group(i)}a.resumeRefresh(!1);var j=a.getSplitter();if(j){j.setVisible(d==='horizontal')}a.refreshViews(!1);Ext.resumeLayouts(!0);a.fireEvent('modechange',a,b)}},reconfigureBufferedRendering:function(e){if(this.bufferedRenderer){var a=this.lockedGrid.bufferedRenderer,c=this.normalGrid.bufferedRenderer,b;if(!this.isHorizontal()){b=this.timeAxis.getCount();this.__oldLeadingBufferZone=a.leadingBufferZone}else {if(this.__oldLeadingBufferZone){b=this.__oldLeadingBufferZone;this.__oldLeadingBufferZone=null}}if(!e){var f=this.lockedGrid.view.getHeight(),d=Math.ceil(f/a.rowHeight)+a.trailingBufferZone+b;a.setViewSize(d,!0);c.setViewSize(d,!0)}a.leadingBufferZone=c.leadingBufferZone=b}},createCalendarRows:function(){var b=this,a=b.timeAxis.getRowTicks();b.timeAxisViewModel.calendarRowsAmount=a.length;return new Ext.data.Store({model:'Sch.model.TimeAxisTick',data:a})},createCalendarColumns:function(){var a=this,b=a.timeAxis.headerConfig.middle,c=[],d;a.timeAxis.each(function(h){var e=h.getStartDate();if(d!==e.getDay()){d=e.getDay();e.setHours(a.startTime);var g=new Date(e);g.setHours(a.endTime);var f={xclass:a.calendarColumnClass||a.weekViewColumnClass,renderer:a.mainRenderer,scope:a,start:e,end:g};if(b.renderer){f.text=b.renderer.call(b.scope||a,e,g,f,c.length,a.getEventStore())}else {f.text=Ext.Date.format(e,b.dateFormat)}c.push(f)}});a.timeAxisViewModel.updateCalendarColumnDates(c);return c},setRowHeight:function(b,a){a=a||!this.lockedGrid;this.timeAxisViewModel.setViewRowHeight(b,a)},onNormalViewItemUpdate:function(b){if(this.lockedGridDependsOnSchedule){var a=this.lockedGrid.getView();a.suspendEvents();a.refreshNode(a.indexOf(b));if(this.syncRowHeight){this.syncRowHeights()}a.resumeEvents()}},onLockedViewResize:function(e,d,a,c,b){if(!this.isHorizontal()&&a!==b){this.timeAxisViewModel.update(a-21)}}},0,0,0,0,0,0,[Sch.mixin,'SchedulerPanel'],0);Ext.cmd.derive('Sch.template.DependencyInfo',Ext.XTemplate,{text:'<dl class="sch-dep-tip"><dt class="sch-dep-tip-from-title">__FROM__:</dt><dd class="sch-dep-tip-from-value">{[values.fromTask.getName() || "&nbsp;"]}</dd><dt class="sch-dep-tip-to-title">__TO__:</dt><dd class="sch-dep-tip-to-value">{[values.toTask && values.toTask.getName() || "&nbsp;"]}</dd></dl>',constructor:function(){var a=this;a.text=a.text.replace(/__FROM__/,a.L('fromText')).replace(/__TO__/,a.L('toText'));Ext.XTemplate.prototype.constructor.call(this,a.text)}},1,0,0,0,0,[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.template,'DependencyInfo'],0);Ext.cmd.derive('Sch.view.dependency.DropZone',Ext.dd.DropZone,{terminalSelector:null,dependencyStore:null,toText:null,startText:null,endText:null,view:null,tipTpl:null,constructor:function(b,a){this.mixins.observable.constructor.call(this,a);Ext.dd.DropZone.prototype.constructor.apply(this,arguments)},getTargetFromEvent:function(a){return a.getTarget(this.terminalSelector)},onNodeEnter:function(c,f,i,a){var d=this,b=d.view.resolveEventRecord(c),e=c.className.match(/sch-terminal-(\w+)/)[1],g=b.getId()||b.internalId,h=Ext.apply({toTask:b,toSide:e},a.tplData);d.tipTpl.overwrite(f.proxy.el.down('.x-dd-drag-ghost',!0),h);a.valid=d.isValidLink(a.fromId,g,f.dragData.fromSide,e);Ext.fly(c).addCls('sch-terminal-'+(a.valid?'valid':'invalid')+'-drop')},onNodeOut:function(b,c,d,a){a.valid=!1;Ext.fly(b).removeCls(['sch-terminal-valid-drop','sch-terminal-invalid-drop']);this.tipTpl.overwrite(c.proxy.el.down('.x-dd-drag-ghost'),a.tplData)},onNodeOver:function(b,c,d,a){if(a.valid){return this.dropAllowed}else {return this.dropNotAllowed}},onNodeDrop:function(c,i,j,e){var a=this,b=a.view.resolveEventRecord(c),h=c.className.match(/sch-terminal-(\w+)/)[1],g=b.getId()||b.internalId,d=e.valid,f=a.createDependencyModel(i.dragData.fromId,g,e.fromSide,h);a.fireEvent('drop',a,f,d);a.fireEvent('afterdrop',a);return d},createDependencyModel:function(e,f,b,c){var d=this.dependencyStore,a=new (d.getModel())();a.setSourceId(e);a.setTargetId(f);a instanceof Sch.model.Dependency&&a.setFromSide(b);a instanceof Sch.model.Dependency&&a.setToSide(c);a.setType(a.getTypeFromSides(b,c,this.view.rtl));return a},isValidLink:function(c,e,b,d){var a=this.createDependencyModel(c,e,b,d);return this.dependencyStore.isValidDependency(a)}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Sch.view.dependency,'DropZone'],0);Ext.cmd.derive('Sch.view.dependency.DragZone',Ext.dd.DragZone,{terminalSelector:null,view:null,fromText:null,toText:null,startText:null,endText:null,rtl:!1,useLineProxy:!0,dependencyStore:null,tipTpl:null,constructor:function(c,b){var a=this;a.mixins.observable.constructor.call(this,b);Ext.dd.DragZone.prototype.constructor.apply(this,arguments);a.tipTpl=a.tipTpl||new Sch.template.DependencyInfo();if(!(a.tipTpl instanceof Ext.Template)){a.tipTpl=new Ext.XTemplate(a.tipTpl)}a.dropZone=new Sch.view.dependency.DropZone(a.el,{rtl:a.rtl,terminalSelector:a.terminalSelector,ddGroup:a.ddGroup,view:a.view,dependencyStore:a.dependencyStore,tipTpl:a.tipTpl});a.relayEvents(a.dropZone,['drop','afterdrop']);a.on({dragstart:function(){Sch.util.ScrollManager.activate(a.view)},afterdrop:function(){Sch.util.ScrollManager.deactivate()}})},initLineProxy:function(f){var a=this,c=a.view.getScroll(),g=Ext.fly(f).getOffsetsTo(a.view.el),e=Ext.fly(f).getWidth()/2,d=g[0]+e,b=g[1]+e;d=d+c.left,b=Ext.getVersion().isLessThan('6.2.0')?b+c.top:b;a.lineProxyEl=a.el.createChild({cls:'sch-dependency-connector-proxy',style:'top:'+b+'px;left:'+d+'px'});Ext.apply(a,{containerTop:a.el.getTop(),containerLeft:a.el.getLeft(),startXY:[d,b],startScrollLeft:c.left,startScrollTop:c.top})},updateLineProxy:function(m){var a=this,p=a.lineProxyEl,b=a.view.getScroll(),k=a.view.el.dom.getBoundingClientRect(),d=m[0]-k.left-a.startXY[0]+b.left,e=m[1]-k.top-a.startXY[1]+(Ext.getVersion().isLessThan('6.2.0')?b.top:0),l=Math.max(1,Math.sqrt(Math.pow(d,2)+Math.pow(e,2))-2),i=Math.atan2(e,d)-Math.PI/2,h;if(Ext.isIE9m){var n=Math.cos(i),o=Math.sin(i),j='progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand", M11 = '+n+', M12 = '+-o+', M21 = '+o+', M22 = '+n+')',g,f;if(b.top!==a.startScrollTop){g=a.startScrollTop-a.containerTop}else {g=b.top-a.containerTop}if(b.left!==a.startScrollLeft){f=a.startScrollLeft-a.containerLeft}else {f=b.left-a.containerLeft}h={'height':l+'px','top':Math.min(0,e)+a.startXY[1]+g+(e<0?2:0)+'px','left':Math.min(0,d)+a.startXY[0]+f+(d<0?2:0)+'px','filter':j,'-ms-filter':j}}else {var c='rotate('+i+'rad)';h={'height':l+'px','-o-transform':c,'-webkit-transform':c,'-ms-transform':c,'-moz-transform':c,'transform':c}}p.setStyle(h)},getDragData:function(g){var b=this,a=g.getTarget(b.terminalSelector);if(a){var c=b.view.resolveEventRecord(a);if(b.fireEvent('beforedrag',b,c)===!1){return null}var e=a.className.match(/sch-terminal-(\w+)/)[1],d={fromTask:c,fromSide:e},f=Ext.core.DomHelper.createDom({html:b.tipTpl.apply(d)}).firstChild;a.style.display='block';return {fromId:c.getId()||c.internalId,fromSide:e,tplData:d,repairXY:Ext.fly(a).getXY(),ddel:f,valid:!1,sourceTerminal:a}}return !1},onStartDrag:function(e,f){var a=this,b=a.dragData,c=b.sourceTerminal,d=c.className.match(/sch-terminal-(\w+)/)[0];a.fireEvent('dragstart',a);if(a.useLineProxy){a.initLineProxy(c,b.isStart);a.lineProxyEl.show()}a.proxy.addCls('sch-create-dependency-tip');Ext.fly(b.sourceTerminal.parentNode).select('.sch-terminal:not(.'+d+')').addCls('sch-terminal-hidden')},onDrag:function(a,b){this.useLineProxy&&this.updateLineProxy(a.getXY())},afterRepair:function(){var a=this;a.dragging=!1;!a.destroyed&&a.fireEvent('afterdrop',a.dropZone)},onMouseUp:function(){var a=this;a.el.removeCls('sch-terminals-visible');a.dragData.sourceTerminal.style.display='';if(a.lineProxyEl){var c=Ext.isIE9m?0:400,b=a.lineProxyEl;b.animate({to:{height:0},duration:c,callback:function(){Ext.destroy(b)}});a.lineProxyEl=null}},getRepairXY:function(){return this.dragData.repairXY},destroy:function(){var a=this;Ext.destroy([a.lineProxyEl,a.dropZone]);Ext.dd.DragZone.prototype.destroy.apply(this,arguments)}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Sch.view.dependency,'DragZone'],0);Ext.cmd.derive('Sch.util.RectangularPathFinder',Ext.Base,{config:{startSide:'right',startArrowSize:8,startArrowMargin:6,startShift:0,endSide:'left',endArrowSize:8,endArrowMargin:6,endShift:0,verticalMargin:2,horizontalMargin:5,otherBoxes:null},constructor:function(a){var b=this;b.callParent([a]);b.initConfig(a)},findPath:function(h,f){var b=this,a,u,v,s,t,d,e,n,o,w,y,i,j,C,E,D,F,g,x,A,m,p,z,B,q,r,l,c,k;if(f&&!Ext.isArray(f)){f=[f]}for(k=0;h&&!c;){a=Ext.applyIf(h,b.getConfig());u=a.startBox,v=a.endBox,s=a.startShift,t=a.endShift,d=a.startSide,e=a.endSide,n=a.startArrowSize,o=a.endArrowSize,w=a.startArrowMargin,y=a.endArrowMargin,i=a.horizontalMargin,j=a.verticalMargin,C=a.hasOwnProperty('startHorizontalMargin')?a.startHorizontalMargin:i,E=a.hasOwnProperty('startVerticalMargin')?a.startVerticalMargin:j,D=a.hasOwnProperty('endHorizontalMargin')?a.endHorizontalMargin:i,F=a.hasOwnProperty('endVerticalMargin')?a.endVerticalMargin:j,g=a.otherBoxes,d=b.normalizeSide(d);e=b.normalizeSide(e);x=b.getConnectionCoordinatesFromBoxSideShift(u,d,s);A=b.getConnectionCoordinatesFromBoxSideShift(v,e,t);q=b.calcGridBaseBoxFromBoxAndDrawParams(u,d,n,w,C,E);r=b.calcGridBaseBoxFromBoxAndDrawParams(v,e,o,y,D,F);g=g&&Ext.Array.map(g,function(a){return b.calcGridBaseBoxFromBoxAndDrawParams(a,!1,0,0,i,j)});m=b.getConnectionCoordinatesFromBoxSideShift(q,d,s);p=b.getConnectionCoordinatesFromBoxSideShift(r,e,t);l=b.buildPathGrid(q,r,m,p,d,e,g);z=b.convertDecartPointToGridPoint(l,m);B=b.convertDecartPointToGridPoint(l,p);c=b.findPathOnGrid(l,z,B,d,e);for(h=!1;!c&&!h&&f&&k<f.length;k++){h=f[k](a)}}if(c){c=b.prependPathWithArrowStaffSegment(c,x,n,d);c=b.appendPathWithArrowStaffSegment(c,A,o,e);c=b.optimizePath(c)}return c},getConnectionCoordinatesFromBoxSideShift:function(a,d,c){var b;switch(d){case 'left':b={x:a.start,y:(a.top+a.bottom)/2+c};break;case 'right':b={x:a.end,y:(a.top+a.bottom)/2+c};break;case 'top':b={x:(a.start+a.end)/2+c,y:a.top};break;case 'bottom':b={x:(a.start+a.end)/2+c,y:a.bottom};break;}return b},calcGridBaseBoxFromBoxAndDrawParams:function(a,g,f,e,b,c){var d;switch(g){case 'left':d={start:a.start-Math.max(f+e,b),end:a.end+b,top:a.top-c,bottom:a.bottom+c};break;case 'right':d={start:a.start-b,end:a.end+Math.max(f+e,b),top:a.top-c,bottom:a.bottom+c};break;case 'top':d={start:a.start-b,end:a.end+b,top:a.top-Math.max(f+e,c),bottom:a.bottom+c};break;case 'bottom':d={start:a.start-b,end:a.end+b,top:a.top-c,bottom:a.bottom+Math.max(f+e,c)};break;default:d={start:a.start-b,end:a.end+b,top:a.top-c,bottom:a.bottom+c};}return d},buildPathGrid:function(a,b,q,s,l,m,i){var d,e,g,f,h,c,t,u,o,v,j,k,p,n={},r=[];d=[a.start,l=='left'||l=='right'?(a.start+a.end)/2:q.x,a.end,b.start,m=='left'||m=='right'?(b.start+b.end)/2:s.x,b.end];e=[a.top,l=='top'||l=='bottom'?(a.top+a.bottom)/2:q.y,a.bottom,b.top,m=='top'||m=='bottom'?(b.top+b.bottom)/2:s.y,b.bottom];if(i){Ext.Array.forEach(i,function(c){d.push(c.start,(c.start+c.end)/2,c.end);e.push(c.top,(c.top+c.bottom)/2,c.bottom)})}d=Ext.Array.unique(Ext.Array.sort(d,Ext.Array.numericSortFn));e=Ext.Array.unique(Ext.Array.sort(e,Ext.Array.numericSortFn));for(c=0,u=e.length;c<u;++c){n[c]=n[c]||{};g=e[c];for(h=0,t=d.length;h<t;++h){f=d[h];k=(f<=a.start||f>=a.end||g<=a.top||g>=a.bottom)&&(f<=b.start||f>=b.end||g<=b.top||g>=b.bottom);if(i){for(o=0,v=i.length;k&&o<v;++o){j=i[o];k=f<=j.start||f>=j.end||g<=j.top||g>=j.bottom}}p={distance:Math.pow(2,53)-1,permitted:k,x:f,y:g,ix:h,iy:c};n[c][h]=p;r.push(p)}}return {width:d.length,height:e.length,xs:d,ys:e,points:n,linearPoints:r}},convertDecartPointToGridPoint:function(a,b){var c=Ext.Array.indexOf(a.xs,b.x),d=Ext.Array.indexOf(a.ys,b.y);return a.points[d][c]},findPathOnGrid:function(a,b,c,g,f){var e=this,d=!1;if(b.permitted&&c.permitted){a=e.waveForward(a,b,0);d=e.collectPath(a,c,f)}return d},getGridPointNeighbors:function(c,g,b){var d=g.ix,e=g.iy,f=[],a;if(e<c.height-1){a=c.points[e+1][d];(!b||b(a))&&f.push(a)}if(e>0){a=c.points[e-1][d];(!b||b(a))&&f.push(a)}if(d<c.width-1){a=c.points[e][d+1];(!b||b(a))&&f.push(a)}if(d>0){a=c.points[e][d-1];(!b||b(a))&&f.push(a)}return f},waveForward:function(f,g,c){var h=this,b,a,e,d,i,j,k,l;g.distance=c;b=h.getGridPointNeighbors(f,g,function(a){return a.permitted&&a.distance>c+1});for(a=0,e=b.length;a<e;++a){d=b[a];d.distance=c+1}for(a=0,e=b.length;a<e;++a){d=b[a];h.waveForward(f,d,c+1)}return f},collectPath:function(i,a,b){var j=this,g=!0,d,c,e,f,h=[];while(g&&a.distance){d=j.getGridPointNeighbors(i,a,function(c){return c.permitted&&c.distance==a.distance-1});g=d.length>0;if(g){d=Ext.Array.sort(d,function(g,h){var c,d;c=g.ix-a.ix;d=g.iy-a.iy;var e=(b=='left'||b=='right')&&d===0||(b=='top'||b=='bottom')&&c===0?-1:1;c=h.ix-a.ix;d=h.iy-a.iy;var f=(b=='left'||b=='right')&&d===0||(b=='top'||b=='bottom')&&c===0?-1:1;if(e>f){return 1}else {if(e<f){return -1}else {if(e==f){return g.y>h.y?-1:1}}}});c=d[0];h.push({x1:c.x,y1:c.y,x2:a.x,y2:a.y});e=c.ix-a.ix;f=c.iy-a.iy;switch(!0){case !f&&e>0:b='left';break;case !f&&e<0:b='right';break;case !e&&f>0:b='top';break;case !e&&f<0:b='bottom';break;}a=c}}return g&&h.reverse()||!1},prependPathWithArrowStaffSegment:function(e,c,d,f){var a,b;if(e.length>0){b=e[0];a={x2:b.x1,y2:b.y1};switch(f){case 'left':a.x1=c.x-d;a.y1=b.y1;break;case 'right':a.x1=c.x+d;a.y1=b.y1;break;case 'top':a.x1=b.x1;a.y1=c.y-d;break;case 'bottom':a.x1=b.x1;a.y1=c.y+d;break;}e.unshift(a)}return e},appendPathWithArrowStaffSegment:function(c,d,e,f){var a,b;if(c.length>0){b=c[c.length-1];a={x1:b.x2,y1:b.y2};switch(f){case 'left':a.x2=d.x-e;a.y2=b.y2;break;case 'right':a.x2=d.x+e;a.y2=b.y2;break;case 'top':a.x2=b.x2;a.y2=d.y-e;break;case 'bottom':a.x2=b.x2;a.y2=d.y+e;break;}c.push(a)}return c},optimizePath:function(c){var d=[],a,b;if(c.length>0){a=c.shift();d.push(a);while(c.length>0){b=c.shift();if(a.x1==b.x1&&a.y1==b.y1&&a.x2==b.x2&&a.y2==b.y2){a=b}else {if(a.y1-a.y2===0&&b.y1-b.y2===0){a.x2=b.x2}else {if(a.x1-a.x2===0&&b.x1-b.x2===0){a.y2=b.y2}else {d.push(b);a=b}}}}}return d},normalizeSide:function(a){return this.self.sideToSide[a]||a},statics:{sideToSide:{'l':'left','r':'right','t':'top','b':'bottom'}}},1,0,0,0,['schpathfinder.rectangular'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Sch.util,'RectangularPathFinder'],0);Ext.cmd.derive('Sch.template.Dependency',Ext.XTemplate,{disableFormats:!0,rtl:null,text:'<tpl if="startArrow"><div style="__SIDE__:{startArrow.side}px;top:{startArrow.top}px" class="sch-dependency sch-dependency-arrow sch-dependency-start-arrow sch-dependency-arrow-{startArrow.dir} {[ this.getSuffixedCls(values.cls, "-arrow") ]} {[ values.highlighted || "" ]}" <tpl if="dependencyId">data-sch-dependency-id="{[values.dependencyId]}"</tpl>></div></tpl><tpl for="segments"><div class="sch-dependency sch-dependency-line sch-dependency-line-{dir} {[ parent.highlighted || "" ]} {[ this.getSuffixedCls(parent.cls, "-line") ]}" style="__SIDE__:{side}px;top:{top}px;<tpl if="width !== null && width !== undefined">width:{width}px;</tpl><tpl if="height !== null && height !== undefined">height:{height}px</tpl>" <tpl if="parent.dependencyId">data-sch-dependency-id="{parent.dependencyId}"</tpl>></div></tpl><tpl if="endArrow"><div style="__SIDE__:{endArrow.side}px;top:{endArrow.top}px" class="sch-dependency sch-dependency-arrow sch-dependency-end-arrow sch-dependency-arrow-{endArrow.dir} {[ this.getSuffixedCls(values.cls, "-arrow") ]} {[ values.highlighted || "" ]}" <tpl if="dependencyId">data-sch-dependency-id="{dependencyId}"</tpl>></div></tpl>',constructor:function(b){var a=this;Ext.apply(a,b);a.text=a.text.replace(/__SIDE__/g,a.rtl?'right':'left');Ext.XTemplate.prototype.constructor.call(this,a.text)},getSuffixedCls:function(a,c){var b='';if(a&&a.indexOf(' ')!=-1){b=a.replace(/^\s*(.*)\s*$/,'$1').split(/\s+/).join(c+' ')+c}else {if(a){b=a+c}}return b}},1,0,0,0,0,0,[Sch.template,'Dependency'],0);Ext.cmd.derive('Sch.view.dependency.Painter',Ext.Base,function(b){function resetArrowMargins(a){var c=!1;if(a.startArrowMargin>0||a.endArrowMargin>0){a.startArrowMargin=a.endArrowMargin=0;c=!0}return c?a:c}function shrinkStartEndMarginsBy2(a){var c=!1;if(a.hasOwnProperty('startHorizontalMargin')&&a.startHorizontalMargin>2){a.startHorizontalMargin=Math.round(a.startHorizontalMargin/2);c=!0}if(a.hasOwnProperty('startVerticalMargin')&&a.startVerticalMargin>2){a.startVerticalMargin=Math.round(a.startVerticalMargin/2);c=!0}if(a.hasOwnProperty('endHorizontalMargin')&&a.endHorizontalMargin>2){a.endHorizontalMargin=Math.round(a.endHorizontalMargin/2);c=!0}if(a.hasOwnProperty('endVerticalMargin')&&a.endVerticalMargin>2){a.endVerticalMargin=Math.round(a.endVerticalMargin/2);c=!0}return c?a:c}function resetArrowSizes(a){var c=!1;if(a.startArrowSize>0||a.endArrowSize>0){a.startArrowSize=a.endArrowSize=0;c=!0}return c?a:c}var a=[resetArrowMargins,shrinkStartEndMarginsBy2,shrinkStartEndMarginsBy2,shrinkStartEndMarginsBy2,resetArrowSizes];return {config:{selectedCls:'sch-dependency-selected',cls:'',rtl:!1,lineTpl:null,canvasCls:null,pathFinderConfig:null,realLineThickness:null},pathFinder:null,dependencyIdAttr:'data-sch-dependency-id',constructor:function(c){var a=this;a.initConfig(c);a.pathFinder=a.createPathFinder(a.getPathFinderConfig());if(!a.getLineTpl()){a.setLineTpl(new Sch.template.Dependency({rtl:a.getRtl()}))}},clone:function(){var a=this;return new a.self(a.getConfig())},applyLineTpl:function(a){return a instanceof Ext.XTemplate?a:new Ext.XTemplate(a)},updatePathFinderConfig:function(c){var a=this;if(a.pathFinder){if(c&&'type' in c&&c.type!==a.pathFinder.type){Ext.destroy(a.pathFinder);a.pathFinder=a.createPathFinder(c)}else {a.pathFinder.setConfig(c)}}},createPathFinder:function(a){return Sch.util.RectangularPathFinder.create(a)},getCanvasSpecification:function(){return {tag:'div',role:'presentation',cls:this.getCanvasCls()}},paint:function(f,a,e,g){var h=this,c=h.generatePaintMarkup(f,e);a=Ext.fly(a);if(g){var d=document.createElement('div');d.innerHTML=c;a.syncContent(d)}else {a.insertHtml('beforeEnd',c)}},generatePaintMarkup:function(e,d){var c=this,a=c.getLineDefsForDependencies(e,d);if(!Ext.isArray(a)){a=[a]}return Ext.Array.map(a,function(f){var a=c.getLineTplData(f);return a&&c.getLineTpl().apply(a)||''}).join('')},isDependencyElement:function(a){return Ext.fly(a).is('.sch-dependency')},getElementsForDependency:function(c,a){var d=Ext.dom.Query,e=this;if(a&&!Ext.isArray(a)){a=[a]}return new Ext.dom.CompositeElementLite(Ext.Array.reduce(a||[],function(g,f){return g.concat(d.select('['+e.dependencyIdAttr+'="'+f.internalId+'"]',Ext.getDom(c)))},[]))},getDependencyElements:function(c){var a=Ext.getDom(c);return new Ext.dom.CompositeElementLite(a&&a.childNodes||[])},getElementDependencyInternalId:function(a){return Ext.fly(a).getAttribute(this.dependencyIdAttr)},highlightDependency:function(d,c,e){var a=this;a.getElementsForDependency(d,c).addCls(e||a.getSelectedCls())},unhighlightDependency:function(d,c,e){var a=this;a.getElementsForDependency(d,c).removeCls(e||a.getSelectedCls())},getSelectedDependencyElements:function(a){var c=this;return Ext.fly(a).select('.'+c.getSelectedCls())},clearSelectedDependencies:function(c){var a=this;a.getDependencyElements(c).removeCls(a.getSelectedCls())},getLineTplData:function(c){var e=this,j,f,g,h,d;c=Ext.apply({},c,e.getConfig());d=e.pathFinder.findPath(c,a);if(d){if(!c.startBox.rendered&&!c.endBox.rendered){for(var k=d.length-1;k>=0;k--){var i=d[k];if(i.x1===i.x2){d=[i];c.startArrowSize=c.endArrowSize=0;break}}}j=e.getRtl();f=e.getRealLineThickness();g=d.length&&d[0];h=d.length&&d[d.length-1];d={cls:c.cls||'',dependencyId:c.dependencyId||'',highlighted:c.highlighted,segments:Ext.Array.map(d,function(a){var g=e.getSegmentDir(a),d;if(g=='horizontal'){d={width:Math.abs(a.x1-a.x2)+1,height:f,top:Math.min(a.y1,a.y2),side:Math.min(a.x1,a.x2),dir:g}}else {d={height:Math.abs(a.y1-a.y2)+1,width:f,top:Math.min(a.y1,a.y2),side:Math.min(a.x1,a.x2),dir:g}}return d}),startArrow:c.startArrowSize&&{side:g.x1,top:g.y1,dir:e.convertSideToDir(c.startSide,j)},endArrow:c.endArrowSize&&{side:h.x2,top:h.y2,dir:e.convertSideToDir(c.endSide,j)},realLineThickness:e.getRealLineThickness()}}return d},getLineDefsForDependencies:function(c,e){var f=Ext.Array,g=this,j=c.getId(),h=c.timeAxis.getStart(),i=c.timeAxis.getEnd(),d={},a;if(!Ext.isArray(e)){e=[e]}return f.reduce(e||[],function(n,l){var o=l.getSourceEvent(),p=l.getTargetEvent(),j,k,m=l.getDateRange();if(m&&Sch.util.Date.intersectSpans(m.start,m.end,h,i)){a=o.internalId;if(!d[a]){j=g.getItemBox(c,o)||[];if(!Ext.isArray(j)){j=[j]}d[a]=j}else {j=d[a]}a=p.internalId;if(!d[a]){k=g.getItemBox(c,p)||[];if(!Ext.isArray(k)){k=[k]}d[a]=k}else {k=d[a]}n=f.reduce(j,function(d,a,h){return f.reduce(k,function(i,f,j){if(a&&f&&(a.rendered||f.rendered||a.relPos!=f.relPos)){i.push(g.createLineDef(c,l,o,p,a,f,null))}return i},d)},n)}return n},[])},getItemBox:function(a,c){return a.getItemBox(c)},createLineDef:function(e,d,o,p,h,i,z){var f=d.self.Type,j=this,g=d.getType(),k=j.pathFinder.getHorizontalMargin(),l=j.pathFinder.getVerticalMargin(),x=d.getBidirectional(),v=x?j.pathFinder.getStartArrowMargin():0,w=x?j.pathFinder.getStartArrowSize():0,q=j.pathFinder.getEndArrowMargin(),m=j.pathFinder.getEndArrowSize(),a=d.getFromSide(),c=d.getToSide();if(!a){switch(!0){case g==f.StartToEnd:a=e.getConnectorStartSide(o);break;case g==f.StartToStart:a=e.getConnectorStartSide(o);break;case g==f.EndToStart:a=e.getConnectorEndSide(o);break;case g==f.EndToEnd:a=e.getConnectorEndSide(o);break;default:throw new Error('Invalid dependency type: '+d.getType());}}if(!c){switch(!0){case g==f.StartToEnd:c=e.getConnectorEndSide(p);break;case g==f.StartToStart:c=e.getConnectorStartSide(p);break;case g==f.EndToStart:c=e.getConnectorStartSide(p);break;case g==f.EndToEnd:c=e.getConnectorEndSide(p);break;default:throw new Error('Invalid dependency type: '+d.getType());}}switch(!0){case (a=='left'||a=='right')&&(c=='left'||c=='right'):l=2;k=5;break;case (a=='top'||a=='bottom')&&(c=='top'||c=='bottom'):l=7;k=2;break;}var n=Number.MAX_VALUE;var t={from:(h.start+h.end)/2,to:(i.start+i.end)/2};var u={from:(h.top+h.bottom)/2,to:(i.top+i.bottom)/2};if((a==='top'&&c==='bottom'||a==='bottom'&&c==='top')&&t.from===t.to){n=Math.abs(h[a]-i[c])}else {if((a==='left'&&c==='right'||a==='right'&&c==='left')&&u.from===u.to){var r=a==='left'?'start':'end';var s=c==='left'?'start':'end';if(e.rtl){r=r==='start'?'end':'start';s=s==='start'?'end':'start'}var A=h[r];var y=i[s];n=Math.abs(A-y)}}if(n<m*q*2){v=q=0;if(n<=m*2){w=m=0}}return {startBox:h,startSide:a,startArrowSize:w,startArrowMargin:v,endBox:i,endSide:c,endArrowSize:m,endArrowMargin:q,verticalMargin:l,horizontalMargin:k,startVerticalMargin:l,startHorizontalMargin:k,endVerticalMargin:l,endHorizontalMargin:k,otherBoxes:z,dependencyId:d.internalId,cls:d.getCls(),highlighted:d.getHighlighted()}},convertSideToDir:function(a,c){return this.self.sideToDir[a+(c&&'-rtl'||'')]},getSegmentDir:function(a){var c='vertical';if(a.y1===a.y2){c='horizontal'}return c},inheritableStatics:{sideToDir:{'left':'right','right':'left','top':'down','bottom':'up','left-rtl':'left','right-rtl':'right','top-rtl':'down','bottom-rtl':'up'}}}},1,0,0,0,['schdependencypainter.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Sch.view.dependency,'Painter'],0);Ext.cmd.derive('Sch.view.dependency.renderingstrategy.Abstract',Ext.Base,function(){function depsToMap(a){return Ext.Array.reduce(a,function(b,c){b[c.getId()]=c;return b},{})}function uniqueDeps(a){return Ext.Object.getValues(depsToMap(a))}function diffDeps(d,e){var b,c,a=[];b=depsToMap(d);c=depsToMap(e);Ext.Object.each(b,function(b,f){c.hasOwnProperty(b)||a.push(f)});return a}var b=function(){Ext.Error.raise('Method is not allowed to call at this state')};var d={render:b,clear:b,scheduledRender:b,destroy:b};var a,e,c;a=Ext.applyIf({render:function(a,b,h,i){var f,g,c,d;f=new Ext.Promise(function(d,e){g=d;c=e});if(b.canDrawDependencies()){a._depsToRender=h;a._depsRendered=[];d=b.getPrimaryView().up('{isHidden()}');if(d){a._scheduledRenderDetacher=d.on('show',function(){delete a._scheduledRenderDetacher;a._fsaState.scheduledRender(a,b)},null,{single:!0,destroyable:!0})}else {a._scheduledRenderCancelId=Ext.asap(function(){delete a._scheduledRenderCancelId;a._fsaState.scheduledRender(a,b)})}a.hasListeners['rendering-start']&&a.fireEvent('rendering-start',a);a._renderPromise=f;a._renderPromiseResolve=g;a._renderPromiseReject=c;a._fsaState=e}else {c(h)}return f},clear:function(e,a,c,d){var b;if(a.canDrawDependencies()){if(a.isDependencyCanvasPresent()){if(d){a.getPainter().paint(a.getPrimaryView(),a.getDependencyCanvas(),[],!0)}else {Ext.destroy(a.getPainter().getElementsForDependency(a.getDependencyCanvas(),c))}}b=Ext.Promise.resolve(c)}else {b=Ext.Promise.reject(c)}return b},destroy:function(a){a.destroyed=!0;a._fsaState=c}},d);e=Ext.applyIf({render:function(a,d,b,c){a._depsToRender=c?b:uniqueDeps(a._depsToRender.concat(b));return a._renderPromise},clear:function(d,a,b,e){var c;if(a.canDrawDependencies()){if(a.isDependencyCanvasPresent()){if(e){a.getPainter().paint(a.getPrimaryView(),a.getDependencyCanvas(),[],!0)}else {Ext.destroy(a.getPainter().getElementsForDependency(a.getDependencyCanvas(),b))}}d._depsToRender=diffDeps(d._depsToRender,b);c=Ext.Promise.resolve(b)}else {c=Ext.Promise.reject(b)}return c},scheduledRender:function(b,c){var d,e;if(c.canDrawDependencies()){d=c.getPrimaryView().up('{isHidden()}');if(d){b._scheduledRenderDetacher=d.on('show',function(){delete b._scheduledRenderDetacher;b._fsaState.scheduledRender(b,c)},null,{single:!0,destroyable:!0})}else {if(b._depsToRender.length>0){e=b.delegateRendering(c,b._depsToRender,b._depsRendered);b._depsRendered=uniqueDeps(b._depsRendered.concat(e[0]));b._depsToRender=e[1];b.hasListeners['rendering-progress']&&b.fireEvent('rendering-progress',b,b._depsToRender,b._depsRendered);if(b._depsToRender.length>0){b._scheduledRenderCancelId=Ext.asap(function(){delete b._scheduledRenderCancelId;b._fsaState.scheduledRender(b,c)})}else {b.hasListeners['rendering-complete']&&b.fireEvent('rendering-complete',b,b._depsRendered);b._renderPromiseResolve(b._depsRendered);delete b._renderPromise;delete b._renderPromiseResolve;delete b._renderPromiseReject;delete b._depsToRender;delete b._depsRendered;b._fsaState=a}}else {b.hasListeners['rendering-complete']&&b.fireEvent('rendering-complete',b,b._depsRendered);b._renderPromiseResolve(b._depsRendered);delete b._renderPromise;delete b._renderPromiseResolve;delete b._renderPromiseReject;delete b._depsToRender;delete b._depsRendered;b._fsaState=a}}}else {b.hasListeners['rendering-canceled']&&b.fireEvent('rendering-canceled',b,b._depsRendered,b._depsToRender);b._renderPromiseReject(b._depsToRender);delete b._renderPromise;delete b._renderPromiseResolve;delete b._renderPromiseReject;delete b._depsToRender;delete b._depsRendered;b._fsaState=a}},destroy:function(a){if(a._scheduledRenderCancelId){Ext.asapCancel(a._scheduledRenderCancelId);delete a._scheduledRenderCancelId}if(a._scheduledRenderDetacher){Ext.destroy(a._scheduledRenderDetacher);delete a._scheduledRenderDetacher}a.hasListeners['rendering-canceled']&&a.fireEvent('rendering-canceled',a,a._depsRendered,a._depsToRender);a._renderPromiseReject(a._depsToRender);delete a._renderPromise;delete a._renderPromiseResolve;delete a._renderPromiseReject;delete a._depsToRender;delete a._depsRendered;a.destroyed=!0;a._fsaState=c}},d);c=d;return {_fsaState:a,constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this;return a._fsaState.destroy(a)},renderDependencies:function(b,a){var c=this,d=!a;return c._fsaState.render(c,b,a||b.getDependencyStore().getRange(),d)},clearDependencies:function(b,a){var c=this,d=!a;return c._fsaState.clear(c,b,a||b.getDependencyStore().getRange(),d)},updateDependencies:function(c,a){var b=this,d=!a;a=a||c.getDependencyStore().getRange();return b._fsaState.clear(b,c,a,d).then(function(){a=d?c.getDependencyStore().getRange():a;return !b.destroyed?b._fsaState.render(b,c,a,d):a})},delegateRendering:function(c,b,a){},inheritableStatics:{depsToMap:depsToMap,uniqueDeps:uniqueDeps,diffDeps:diffDeps}}},1,0,0,0,['sch_dependency_rendering_strategy.abstract'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Sch.view.dependency.renderingstrategy,'Abstract'],0);Ext.cmd.derive('Sch.view.dependency.renderingstrategy.Combined',Sch.view.dependency.renderingstrategy.Abstract,{config:{depsPerStep:50,mode:'bulk'},delegateRendering:function(d,c,b){var a=this;return a.getMode()=='bulk'?a.delegateRenderingBulk(d,c,b):a.delegateRenderingAsync(d,c,b)},delegateRenderingBulk:function(a,b,c){a.getPainter().paint(a.getPrimaryView(),a.getDependencyCanvas(),b,!1);return [b,[]]},delegateRenderingAsync:function(a,b,g){var f=this,d=f.getDepsPerStep(),c=b.slice(0,d),e=b.slice(d);a.getPainter().paint(a.getPrimaryView(),a.getDependencyCanvas(),c,!1);return [c,e]}},0,0,0,0,['sch_dependency_rendering_strategy.combined'],0,[Sch.view.dependency.renderingstrategy,'Combined'],0);Ext.cmd.derive('Sch.view.dependency.View',Ext.Base,{config:{primaryView:null,dependencyStore:null,drawDependencies:!0,bulkRenderingDependencyLimit:100,asyncRenderingDepsPerStep:50,painterConfig:{canvasCls:'sch-dependencyview-ct'},canvasLayer:0,enableDependencyDragDrop:!0,terminalSides:['left','right','top','bottom'],dragTipTpl:null,selectedCls:null,overCls:null},painter:null,renderingStrategy:null,primaryViewDetacher:null,primaryViewLockableDetacher:null,primaryViewElDetacher:null,dependencyStoreDetacher:null,dragZone:null,scrolling:!1,constructor:function(b){var a=this;a.callParent([b]);a.mixins.observable.constructor.call(a,b);a.initConfig(b);a.painter=a.createPainter(Ext.apply({rtl:a.getPrimaryView().rtl},a.getPainterConfig()));if(!a.getSelectedCls()){a.setSelectedCls(a.painter.getSelectedCls())}if(a.canDrawDependencies()){a.startDrawDependencies()}if(a.getEnableDependencyDragDrop()){var c=a.getPrimaryView();a.dragZone=new Sch.view.dependency.DragZone(c.el,{rtl:c.rtl,terminalSelector:'.sch-terminal',view:c,dependencyStore:a.getDependencyStore(),tipTpl:a.dragTipTpl,listeners:{dragstart:a.onDragStart,drop:a.onDependencyDrop,afterdrop:a.onDependencyAfterDrop,scope:a}});a.relayEvents(a.dragZone,['beforedrag','dragstart','drop','afterdrop'])}},destroy:function(){var a=this;a.stopDrawDependencies();a.dragZone&&a.dragZone.destroy()},destroyDetachers:function(){var a=this;Ext.destroyMembers(this,['primaryViewDetacher','primaryViewLockableDetacher','primaryViewElDetacher','dependencyStoreDetacher'])},destroyDependencyCanvas:function(){var a=this;if(a.isDependencyCanvasPresent()){Ext.destroy(a.getDependencyCanvas())}},destroyRenderingStrategy:function(){var a=this;Ext.destroy(a.renderingStrategy);a.renderingStrategy=null},canDrawDependencies:function(c,b,d){var a=this;return !!(a.painter&&a.getPrimaryView()&&(c||a.getDrawDependencies())&&(b||a.isDependencyCanvasAvailable())&&(d||a.getDependencyStore()))},startDrawDependencies:function(){var a=this,b=a.getPrimaryView(),d=a.getDependencyStore(),c;a.renderingStrategy=a.createRenderingStrategy();a.primaryViewDetacher=b.on(Ext.applyIf({destroyable:!0},a.getPrimaryViewListeners()));a.primaryViewElDetacher=b.getEl().on(Ext.applyIf({destroyable:!0},a.getPrimaryViewElListeners()));c=b.grid.ownerLockable&&b.grid.ownerLockable.getView();if(b!=c){a.primaryViewLockableDetacher=c.on(Ext.applyIf({destroyable:!0},a.getPrimaryViewLockableListeners()))}a.dependencyStoreDetacher=d.on(Ext.applyIf({destroyable:!0},a.getDependencyStoreListeners()));a.renderAllDependencies().then(null,Ext.emptyFn)},stopDrawDependencies:function(){var a=this;a.destroyRenderingStrategy();a.destroyDetachers();a.destroyDependencyCanvas()},createRenderingStrategy:function(){var a=this,b;return Sch.view.dependency.renderingstrategy.Combined.create({depsPerStep:a.getAsyncRenderingDepsPerStep()})},maybeSwitchRenderingStrategy:function(){var a=this,b=a.getDependencyStore();if(a.getDependencyStore().getCount()<=a.getBulkRenderingDependencyLimit()){a.renderingStrategy.setMode('bulk')}else {a.renderingStrategy.setMode('async')}},updatePrimaryView:function(b,c){var a=this;if(c){a.stopDrawDependencies()}if(b){if(!a.getDependencyStore()&&b.getEventStore()){a.setDependencyStore(b.getEventStore().getDependencyStore())}if(a.canDrawDependencies()){a.startDrawDependencies()}}},applyDependencyStore:function(a){return a&&Ext.StoreMgr.lookup(a)},updateDependencyStore:function(b,c){var a=this;if(c){a.stopDrawDependencies()}if(b&&a.canDrawDependencies()){a.startDrawDependencies()}},updateDrawDependencies:function(b,c){var a=this;if(b&&a.canDrawDependencies(!0)){a.startDrawDependencies()}else {if(!b){a.stopDrawDependencies()}}},applyPainterConfig:function(a){return Ext.isObject(a)?Ext.apply({},a):a},updatePainterConfig:function(b){var a=this;if(a.painter){if(b){b=Ext.apply({},{rtl:a.getPrimaryView().rtl},b)}if(b&&'type' in b&&b.type!==a.painter.type){Ext.destroy(a.painter);a.painter=a.createPainter(b)}else {a.painter.setConfig(b)}a.destroyDependencyCanvas();if(a.canDrawDependencies()){a.renderAllDependencies().then(null,Ext.emptyFn)}}},updateCanvasLayer:function(b){var a=this;a.destroyDependencyCanvas();if(a.canDrawDependencies()){a.renderAllDependencies().then(null,Ext.emptyFn)}},updateSelectedCls:function(a){this.painter.setSelectedCls(a)},getPrimaryViewListeners:function(){var a=this;return {'itemadd':a.onPrimaryViewItemAdd,'itemremove':a.onPrimaryViewItemRemove,'itemupdate':a.onPrimaryViewItemUpdate,'refresh':a.onPrimaryViewRefresh,'bufferedrefresh':a.onPrimaryViewRefresh,'expandbody':a.onPrimaryViewExpandBody,'collapsebody':a.onPrimaryViewCollapseBody,'eventrepaint':a.onPrimaryViewEventRepaint,scope:a}},getPrimaryViewLockableListeners:function(){var a=this;return {'expandbody':a.onPrimaryViewExpandBody,'collapsebody':a.onPrimaryViewCollapseBody,scope:a}},getPrimaryViewElListeners:function(){var a=this;return {'dblclick':a.onPrimaryViewDependencyElPointerEvent,'click':a.onPrimaryViewDependencyElPointerEvent,'contextmenu':a.onPrimaryViewDependencyElPointerEvent,'mouseover':a.onPrimaryViewDependencyElPointerEvent,'mouseout':a.onPrimaryViewDependencyElPointerEvent,delegate:'.sch-dependency',scope:a}},getDependencyStoreListeners:function(){var a=this;return {'add':a.onDependencyStoreAdd,'remove':a.onDependencyStoreRemove,'update':a.onDependencyStoreUpdate,'refresh':a.onDependencyStoreRefresh,'clear':a.onDependencyStoreClear,scope:a}},createPainter:function(a){return Sch.view.dependency.Painter.create(a)},getPainter:function(){return this.painter},clonePainter:function(){var a=this;return a.painter&&a.painter.clone()||null},isDependencyCanvasAvailable:function(){var a=this.getPrimaryView();return a&&a.isItemCanvasAvailable()},isDependencyCanvasPresent:function(){var b=this,a=b.getPrimaryView();return a&&a.isItemCanvasPresent(b.getCanvasLayer())},getDependencyCanvas:function(){var a=this;return a.getPrimaryView().getItemCanvasEl(a.getCanvasLayer(),a.painter.getCanvasSpecification())},renderAllDependencies:function(){var a=this,b;if(a.canDrawDependencies()&&(a.refreshing||a.fireEvent('beforerefresh',a)!==!1)){a.refreshing||a.renderingStrategy.on('rendering-complete',function(c,b){a.refreshing=!1;a.fireEvent('refresh',a)},null,{single:!0});a.refreshing=!0;b=a.renderingStrategy.updateDependencies(a)}else {b=Ext.Promise.reject(a.getDependencyStore().getRange())}return b},renderDependencies:function(b,d){var a=this,c;if(!Ext.isArray(b)){b=[b]}if(a.canDrawDependencies()){if(d){c=a.renderingStrategy.clearDependencies(a).then(function(){return !a.renderingStrategy.destroyed?a.renderingStrategy.renderDependencies(a,b):b})}else {c=a.renderingStrategy.renderDependencies(a,b)}}else {c=Ext.Promise.reject(b)}return c},updateDependencies:function(a){var c=this,b;if(!Ext.isArray(a)){a=[a]}if(c.canDrawDependencies()){b=c.renderingStrategy.updateDependencies(c,a)}else {b=Ext.Promise.reject(a)}return b},clearDependencies:function(a){var c=this,b;if(!Ext.isArray(a)){a=[a]}if(c.canDrawDependencies()){b=c.renderingStrategy.clearDependencies(c,a)}else {b=Ext.Promise.reject(a)}return b},clearAllDependencies:function(){var a=this;return a.renderingStrategy.clearDependencies(a)},getElementsForDependency:function(c){var a=this,b=!1;if(a.canDrawDependencies()&&a.isDependencyCanvasPresent()){b=a.painter.getElementsForDependency(a.getDependencyCanvas(),c)}return b},getDependencyForElement:function(e){var d=this,c=d.getDependencyStore(),b=null,a;if(c){a=d.painter.getElementDependencyInternalId(e);b=c.getByInternalId(a)}return b},getDependencyElements:function(){var a=this,b=!1;if(a.canDrawDependencies()&&a.isDependencyCanvasPresent()){b=a.painter.getDependencyElements(a.getDependencyCanvas())}return b},highlightDependency:function(a,c){var b=this;if(!(a instanceof Ext.data.Model)){a=b.getDependencyStore().getById(a)}a&&a.highlight(c||b.getSelectedCls())},unhighlightDependency:function(a,c){var b=this;if(!(a instanceof Ext.data.Model)){a=b.getDependencyStore().getById(a)}a&&a.unhighlight(c||b.getSelectedCls())},getHighlightedDependencies:function(b){var a=this.getDependencyStore();return a&&a.getHighlightedDependencies()||[]},getSelectedDependencyElements:function(){var a=this,b=!1;if(a.canDrawDependencies()&&a.isDependencyCanvasPresent()){b=a.painter.getSelectedDependencyElements(a.getDependencyCanvas())}return b},clearSelectedDependencies:function(){var a=this;if(a.canDrawDependencies()&&a.isDependencyCanvasPresent()){a.painter.clearSelectedDependencies(a.getDependencyCanvas());a.getDependencyStore().each(function(a){a.unhighlight()})}},onPrimaryViewItemAdd:function(a,b,c,d){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewItemUpdate:function(a,b,c,d){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewItemRemove:function(a,b,c,d){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewRefresh:function(a){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewExpandBody:function(){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewCollapseBody:function(){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewEventRepaint:function(){this.renderAllDependencies().then(null,Ext.emptyFn)},onPrimaryViewDependencyElPointerEvent:function(b,f,g){var c=this,e,a;e=c.painter.getElementDependencyInternalId(f);a=c.getDependencyStore().getByInternalId(e);if(a){var d=this.getOverCls();c.fireEvent('dependency'+b.type,c,a,b,f);if(d){if(b.type==='mouseover'){this.highlightDependency(a,d)}else {if(b.type==='mouseout'){this.unhighlightDependency(a,d)}}}}},onDependencyStoreAdd:function(c,b){var a=this;a.maybeSwitchRenderingStrategy();a.renderDependencies(b).then(null,Ext.emptyFn)},onDependencyStoreRemove:function(c,b){var a=this;a.maybeSwitchRenderingStrategy();a.clearDependencies(b).then(null,Ext.emptyFn)},onDependencyStoreUpdate:function(b,a){this.updateDependencies(a).then(null,Ext.emptyFn)},onDependencyStoreRefresh:function(b){var a=this;a.maybeSwitchRenderingStrategy();a.renderAllDependencies().then(null,Ext.emptyFn)},onDependencyStoreClear:function(b){var a=this;a.maybeSwitchRenderingStrategy();a.renderAllDependencies().then(null,Ext.emptyFn)},onDragStart:function(){var a=this;a.getPrimaryView().onDragDropStart();a.getPrimaryView().getEl().addCls('sch-terminals-visible')},onDependencyDrop:function(c,a,b){b&&this.getDependencyStore().add(a)},onDependencyAfterDrop:function(){var a=this.getPrimaryView();if(!a.destroyed){a.onDragDropEnd();a.getEl().removeCls('sch-terminals-visible');a.getEl().select('.sch-terminal-hidden').removeCls('sch-terminal-hidden')}}},1,0,0,0,['schdependencyview.base'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Sch.view.dependency,'View'],0);Ext.cmd.derive('Sch.view.dependency.Mixin',Ext.Mixin,{mixinConfig:{after:{initComponent:'initComponent',destroy:'destroy'}},dependencyViewConfig:null,dependencyView:null,dependencyViewRelayDetacher:null,dependencyDragRelayDetacher:null,initComponent:function(){var a=this;a.on('viewready',function(){if(a.getEventStore()){a.setupDependencyView(a.getDependencyViewConfig(),a.getSchedulingView())}})},getDependencyViewConfig:function(){return this.dependencyViewConfig},setDependencyViewConfig:function(a){var b=this;if(b.dependencyViewConfig!==a){b.dependencyViewConfig=a;if(b.dependencyView){if(a&&'type' in a&&a.type!==b.dependencyView.type){b.setupDependencyView(a,b.getSchedulingView())}else {b.dependencyView.setConfig(a)}}}},hasDependencyView:function(){return !!this.dependencyView},getDependencyView:function(){return this.dependencyView},createDependencyView:function(b,a){return Sch.view.dependency.View.create(Ext.applyIf({primaryView:a},b))},destroy:function(){Ext.destroyMembers(this,'dependencyViewRelayDetacher','dependencyDragRelayDetacher','dependencyView')},setupDependencyView:function(c,b){var a=this;Ext.destroy(a.dependencyView);a.dependencyView=a.createDependencyView(c,b);a.setupDependencyViewRelay();a.fireEvent('dependencyviewready',a,a.dependencyView);if(a.dependencyView.canDrawDependencies()){a.dependencyView.renderAllDependencies().then(null,Ext.emptyFn)}},setupDependencyViewRelay:function(){var a=this;Ext.destroy(a.dependencyViewRelayDetacher,a.dependencyDragRelayDetacher);a.dependencyViewRelayDetacher=a.relayEvents(a.getDependencyView(),['dependencyclick','dependencydblclick','dependencycontextmenu','dependencymouseover','dependencymouseout']);a.dependencyDragRelayDetacher=a.relayEvents(a.getDependencyView(),['beforedrag','dragstart','drop','afterdrop'],'dependency')}},0,0,0,0,0,0,[Sch.view.dependency,'Mixin'],0);Ext.cmd.derive('Sch.panel.SchedulerGrid',Sch.panel.TimelineGridPanel,{alternateClassName:'Sch.SchedulerPanel',viewType:'schedulergridview',initComponent:function(){Sch.panel.TimelineGridPanel.prototype.initComponent.apply(this,arguments);this.getSchedulingView()._initializeSchedulerView()}},0,['schedulergrid','schedulerpanel'],['component','box','container','panel','tablepanel','gridpanel','grid','timelinegrid','schedulergrid','schedulerpanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'timelinegrid':!0,'schedulergrid':!0,'schedulerpanel':!0},['widget.schedulergrid','widget.schedulerpanel'],[[Sch.mixin.SchedulerPanel.prototype.mixinId||Sch.mixin.SchedulerPanel.$className,Sch.mixin.SchedulerPanel],[Sch.view.dependency.Mixin.prototype.mixinId||Sch.view.dependency.Mixin.$className,Sch.view.dependency.Mixin]],[Sch.panel,'SchedulerGrid',Sch,'SchedulerPanel'],function(){this.override(Sch.mixin.SchedulerPanel.prototype.inheritables()||{})});Ext.cmd.derive('Cal.model.Resource',Sch.model.Resource,{customizableFields:[{name:'Color',defaultValue:'#66ab16'}]},0,0,0,0,0,0,[Cal.model,'Resource'],0);Ext.cmd.derive('Cal.store.Resource',Sch.data.ResourceStore,{model:'Cal.model.Resource'},0,0,0,0,['store.calendar_resourcestore'],0,[Cal.store,'Resource'],0);Ext.cmd.derive('Cal.model.Event',Sch.model.Event,{},0,0,0,0,0,0,[Cal.model,'Event'],0);Ext.cmd.derive('Cal.store.Event',Sch.data.EventStore,{model:'Cal.model.Event'},0,0,0,0,['store.calendar_eventstore'],0,[Cal.store,'Event'],0);Ext.cmd.derive('Cal.util.EventSorter',Ext.util.Sorter,{constructor:function(a){a=a||{};Ext.applyIf(a,{sorterFn:Cal.util.EventSorter.defaultSorterFn});Ext.util.Sorter.prototype.constructor.call(this,a)},statics:{defaultSorterFn:function(l,m){var a=Sch.util.Date;var b=l.getStartDate();var c=m.getStartDate();var g=a.setDateToMidday(b,!0);var h=a.setDateToMidday(c,!0);var f=g-h;if(f){return f<0?-1:1}else {var n=l.getEndDate();var o=m.getEndDate();var p=a.setDateToMidday(n,!0);var q=a.setDateToMidday(o,!0);var d=p-g;var e=q-h;if(d===e){var k=b-c;if(k){return k<0?-1:1}else {var i=n-b;var j=o-c;return i>j?-1:i===j?0:1}}else {return d>e?-1:1}}}}},1,0,0,0,0,0,[Cal.util,'EventSorter'],0);Ext.cmd.derive('Cal.template.Event',Ext.XTemplate,{getUserTplData:null,selModel:null,text:'<div eventId="{id}" class="cal-event {cls}" style="{style}" tabindex="-1"><tpl if="resizable && startThisWeek"><div class="cal-event-resizable-handle cal-event-resizable-handle-start"></div></tpl><span class="cal-event-bullet" style="{bulletStyle}"></span><span class="cal-event-body">{name}</span><tpl if="resizable && endThisWeek"><div class="cal-event-resizable-handle cal-event-resizable-handle-end"></div></tpl></div>',constructor:function(a){Ext.apply(this,a);Ext.XTemplate.prototype.constructor.call(this,this.text)},renderEventRecord:function(a,k,e){var h=a.isScheduled()&&!Sch.util.Date.isSameDate(a.getStartDate(),a.getEndDate()),i=a.getResource(),c=i&&i.getColor()||'',j='',b=e&&e.cls||'',f='',g=a.isDraggable()!==!1;if(h){b+=' cal-event-multiday '}else {b+=' cal-event-singleday '}if(g){b+=' cal-event-draggable '}if(this.selModel&&this.selModel.isSelected(a)){b+=' cal-event-selected '}if(c){if(h){j+=' background-color: '+c+'; border-color: '+c+'; '}else {f+=' background-color: '+c+'; '}}var d=Ext.apply({id:a.internalId,name:a.getName(),style:j,bulletStyle:f,resizable:!1,draggable:g},e||{});d.cls=b;if(this.getUserTplData){this.getUserTplData(a,d,k)}return this.apply(d)}},1,0,0,0,0,0,[Cal.template,'Event'],0);Ext.cmd.derive('Cal.template.DayName',Ext.XTemplate,{weekTpl:'{weekNumber}',text:'<tpl if="weekNumber"><span class="cal-day-week-num">_WEEKTPL_</span></tpl><span class="cal-day-date-num {cls}" style="{style}">{name}</span>',constructor:function(a){Ext.apply(this,a);this.text=this.text.replace('_WEEKTPL_',this.weekTpl);Ext.XTemplate.prototype.constructor.call(this,this.text)}},1,0,0,0,0,0,[Cal.template,'DayName'],0);Ext.cmd.derive('Cal.template.WeekRow',Ext.XTemplate,{dayNameTpl:null,eventTpl:null,eventsPerCell:1,text:'<tpl for="."><div weekid="{weekNumber}" class="cal-week-row cal-week-row-{weekNumber} cal-week-row-index-{#}"><table cellpadding="0" cellspacing="0" class="cal-week-row-background" ><tr><tpl for="days"><td dayid="{dayId}" cellIndex="{cellIndex}" style="{style}" class="cal-week-row-background-day cal-week-row-background-day-{dayId} cal-week-row-background-day-index-{cellIndex} {cls} <tpl if="isNonWorking">cal-week-row-background-day-nonworking</tpl>" >{[this.renderDayNames(values, parent, xindex)]}</td></tpl></tr></table><table cellpadding="0" cellspacing="0" class="cal-week-row-events-row" ><tr><tpl for="days"><td dayid="{dayId}" class="cal-day-date-num-container"></td></tpl></tr>{[this.renderEvents(values)]}<tr><tpl for="days"><tpl if="overflowCount &gt; 0"><td dayid="{dayId}"><span class="cal-event-more-events">+{overflowCount} more</span></td><tpl else><td dayid="{dayId}">&nbsp;</td></tpl></tpl></tr><tr><tpl for="days"><td dayid="{dayId}">&nbsp;</td></tpl></tr></table></div></tpl>',constructor:function(a){Ext.apply(this,a);Ext.XTemplate.prototype.constructor.call(this,this.text)},renderDayNames:function(a,c,d){var b='';if(a.isToday){b+=' cal-day-date-num-today '}if(a.isOtherMonth){b+=' cal-day-date-num-other-month '}b+=a.cls;var e={weekNumber:d===1?c.weekNumber:'',cls:b,style:a.style,name:a.name};return this.dayNameTpl.apply(e)},renderEvents:function(b){var a=Sch.util.Date,e='';for(var n=0;n<this.eventsPerCell;n++){e+='<tr>';for(var h=0;h<b.days.length;){var d=b.days[h],i=1,c=d.allEvents[d.loopIndex];if(c){d.overflowCount--;d.loopIndex++;var j=c.getStartDate(),f=c.getEndDate(),o=!a.isSameDate(j,f),m=o&&c.isResizable()!==!1;if(o){f=new Date(f-1)}var s=a.setDateToMidday(j,!0),t=a.setDateToMidday(f,!0),q=a.max(s,b.startDate),r=a.min(t,b.endDate),k=a.isEarlierDate(j,b.startDate),l=a.isLaterDate(f,b.endDate),g='';if(k){g+=' cal-event-starts-earlier-week '}if(l){g+=' cal-event-ends-future-week '}if(m){g+=' cal-event-resizable '}var p={cls:g,resizable:m,startThisWeek:!k,endThisWeek:!l};i=a.getDurationInUnit(q,r,a.DAY)+1;e+='<td colspan="'+i+'">'+this.eventTpl.renderEventRecord(c,d,p)+'</td>'}else {e+='<td>&nbsp;</td>'}h=h+i}e+='</tr>'}return e}},1,0,0,0,0,0,[Cal.template,'WeekRow'],0);Ext.cmd.derive('Ext.layout.container.SegmentedButton',Ext.layout.container.Container,{needsItemSize:!1,setsItemSize:!1,_btnRowCls:'x-segmented-button-row',getRenderTree:function(){var d=this,b=Ext.layout.container.Container.prototype.getRenderTree.call(this),a,c;if(d.owner.getVertical()){for(a=0,c=b.length;a<c;a++){b[a]={cls:d._btnRowCls,cn:b[a]}}}return b},getItemLayoutEl:function(b){var a=b.el.dom;return this.owner.getVertical()?a.parentNode:a},onDestroy:function(){if(this.rendered){var b=this.getRenderTarget(),a;while(a=b.last()){a.destroy()}}}},0,0,0,0,['layout.segmentedbutton'],0,[Ext.layout.container,'SegmentedButton'],0);Ext.cmd.derive('Ext.button.Segmented',Ext.container.Container,{config:{allowDepress:!1,allowMultiple:!1,forceSelection:!1,allowToggle:!0,vertical:!1,defaultUI:'default'},beforeRenderConfig:{value:undefined},defaultBindProperty:'value',publishes:['value'],twoWayBindable:['value'],layout:'segmentedbutton',defaultType:'button',maskOnDisable:!1,isSegmentedButton:!0,baseCls:'x-segmented-button',itemCls:'x-segmented-button-item',_firstCls:'x-segmented-button-first',_lastCls:'x-segmented-button-last',_middleCls:'x-segmented-button-middle',applyValue:function(f,g){var b=this,l=b.getAllowMultiple(),e,d,c,h,j,a,i,k;c=f instanceof Array?f:f==null?[]:[f];h=g instanceof Array?g:g==null?[]:[g];b._isApplyingValue=!0;if(!b.rendered){j=b.items.items;for(a=j.length-1;a>=0;a--){d=j[a];if(b.forceSelection&&!a&&!k){d.pressed=!0}if(d.pressed){k=!0;e=d.value;if(e==null){e=b.items.indexOf(d)}if(!Ext.Array.contains(c,e)){c.unshift(e)}}}}i=c.length;for(a=0;a<i;a++){f=c[a];d=b._lookupButtonByValue(f);if(d){e=d.value;if(e!=null&&e!==f){c[a]=e}if(!d.pressed){d.setPressed(!0)}}}f=l?c:i?c[0]:null;for(a=0,i=h.length;a<i;a++){g=h[a];if(!Ext.Array.contains(c,g)){b._lookupButtonByValue(g).setPressed(!1)}}b._isApplyingValue=!1;if(b.hasListeners.change&&!Ext.Array.equals(c,h)){b.fireEvent('change',b,c,h)}return f},beforeRender:function(){var a=this;a.addCls(a.baseCls+a._getClsSuffix());a._syncItemClasses(!0);Ext.container.Container.prototype.beforeRender.call(this)},onAdd:function(b){var a=this,c='_syncItemClasses';a.mon(b,{hide:c,show:c,beforetoggle:'_onBeforeItemToggle',toggle:'_onItemToggle',scope:a});if(a.getAllowToggle()){b.enableToggle=!0;if(!a.getAllowMultiple()){b.toggleGroup=a.getId();b.allowDepress=a.getAllowDepress()}}b.addCls(a.itemCls+a._getClsSuffix());a._syncItemClasses();Ext.container.Container.prototype.onAdd.call(this,b)},onRemove:function(b){var a=this;b.removeCls(a.itemCls+a._getClsSuffix());a._syncItemClasses();Ext.container.Container.prototype.onRemove.call(this,b)},beforeLayout:function(){if(Ext.isChrome){this.el.dom.offsetWidth}Ext.container.Container.prototype.beforeLayout.call(this)},updateDefaultUI:function(d){var a=this.items,c,b,e;if(this.rendered){Ext.raise('Changing the ui config of a segmented button after render is not supported.')}else {if(a){if(a.items){a=a.items}for(b=0,e=a.length;b<e;b++){c=a[b];if(c.ui==='default'&&d!=='default'&&!c.hasOwnProperty('ui')){a[b].ui=d}}}}},privates:{_getClsSuffix:function(){return this.getVertical()?'-vertical':'-horizontal'},_getFirstCls:function(){return this._firstCls},_getLastCls:function(){return this._lastCls},_lookupButtonByValue:function(d){var c=this.items.items,g=c.length,f=0,a=null,b,e;for(;f<g;f++){e=c[f];b=e.value;if(b!=null&&b===d){a=e;break}}if(!a&&typeof d==='number'){a=c[d]}return a},_onBeforeItemToggle:function(b,a){if(this.allowMultiple&&this.forceSelection&&!a&&this.getValue().length===1){return !1}},_onItemToggle:function(e,h){if(this._isApplyingValue){return}var b=this,g=Ext.Array,f=b.allowMultiple,c=e.value!=null?e.value:b.items.indexOf(e),a=b.getValue(),d;if(f){d=g.indexOf(a,c)}if(h){if(f){if(d===-1){a=g.slice(a);a.push(c)}}else {a=c}}else {if(f){if(d>-1){a=g.slice(a);a.splice(d,1)}}else {if(a===c){a=null}}}b.setValue(a);b.fireEvent('toggle',b,e,h)},_syncItemClasses:function(j){var d=this,f,e,g,h,c,b,i,a;if(!j&&!d.rendered){return}f=d._getFirstCls();e=d._middleCls;g=d._getLastCls();h=d.items.items;c=h.length;b=[];for(a=0;a<c;a++){i=h[a];if(!i.hidden){b.push(i)}}c=b.length;for(a=0;a<c;a++){b[a].removeCls([f,e,g])}if(c>1){b[0].addCls(f);for(a=1;a<c-1;a++){b[a].addCls(e)}b[c-1].addCls(g)}}}},0,['segmentedbutton'],['component','box','container','segmentedbutton'],{'component':!0,'box':!0,'container':!0,'segmentedbutton':!0},['widget.segmentedbutton'],0,[Ext.button,'Segmented'],0);Ext.define('Ext.rtl.button.Segmented',{override:'Ext.button.Segmented',privates:{_getFirstCls:function(){var a=this._firstCls;if(!this.getVertical()&&this.getInherited().rtl){a=this._lastCls}return a},_getLastCls:function(){var a=this._lastCls;if(!this.getVertical()&&this.getInherited().rtl){a=this._firstCls}return a}}});Ext.cmd.derive('Cal.locale.En',Sch.locale.Locale,{singleton:!0,l10n:{'Cal.menu.Day':{newEvent:'New event',paste:'Paste'},'Cal.container.Month':{newEvent:'New event'},'Cal.form.EventEditor':{resourceText:'Calendar'},'Cal.menu.Event':{showDetails:'Show Details',resource:'Calendar','delete':'Delete',cut:'Cut',copy:'Copy',paste:'Paste',duplicate:'Duplicate'},'Cal.toolbar.Navigation':{today:'Today'}},apply:function(a){Sch.locale.En.apply(a);this.callParent(arguments)}},0,0,0,0,0,0,[Cal.locale,'En'],0);Ext.cmd.derive('Cal.mixin.Localizable',Sch.mixin.Localizable,{},0,0,0,0,0,0,[Cal.mixin,'Localizable'],0);Ext.cmd.derive('Cal.toolbar.Navigation',Ext.Toolbar,{cls:'cal-nav-bar',margin:'0 0 10 0',padding:0,startDate:null,currentMonthFormat:'F Y',viewModel:{formulas:{month:{bind:'{startDate}',get:function(a){return Ext.Date.format(a,this.get('currentMonthFormat'))}}}},initComponent:function(){var a=this;a.items=[{xtype:'component',cls:'cal-current-month',bind:{html:'{month}'}},'->',{xtype:'segmentedbutton',allowToggle:!1,height:35,defaults:{focusable:!1},items:[{text:'<',handler:function(){a.fireEvent('clickprevious',a)}},{text:this.L('today'),handler:function(){a.fireEvent('clicktoday',a)}},{text:'>',handler:function(){a.fireEvent('clicknext',a)}}]},{text:'+',cls:'cal-create-btn',height:35,margin:0,focusable:!1,handler:function(){a.fireEvent('clickcreatenew',a)}}];Ext.toolbar.Toolbar.prototype.initComponent.apply(this,arguments);a.getViewModel().set({startDate:Ext.Date.clone(a.startDate),currentMonthFormat:a.currentMonthFormat})},setStartDate:function(a){a=new Date(a.getTime());this.startDate=a;this.getViewModel().set('startDate',a)}},0,['calendar_navigationtoolbar'],['component','box','container','toolbar','calendar_navigationtoolbar'],{'component':!0,'box':!0,'container':!0,'toolbar':!0,'calendar_navigationtoolbar':!0},['widget.calendar_navigationtoolbar'],[[Cal.mixin.Localizable.prototype.mixinId||Cal.mixin.Localizable.$className,Cal.mixin.Localizable]],[Cal.toolbar,'Navigation'],0);Ext.cmd.derive('Cal.component.MonthBar',Ext.Component,{cls:'cal-month-bar',padding:0,margin:'10 0 0 0',config:{startDate:null,activeButtonIndex:5},renderer:null,tpl:'<table class="cal-month-bar-buttons" cellpadding="0" cellspacing="0"><tr><tpl for="."><td datavalue="{value}" class="cal-month-bar-button cal-month-bar-button-index-{#}<tpl if="pressed"> cal-month-bar-button-pressed</tpl>"><span>{name}</span></td></tpl></tr></table>',afterRender:function(){this.getEl().on({click:this.onClick,delegate:'.cal-month-bar-button',scope:this})},onClick:function(e,d){var c=d.getAttribute('datavalue'),a=new Date(this.getStartDate().getTime()),b=new Date(a.getTime());a.setMonth(c);this.setStartDate(a);this.fireEvent('change',this,a,b)},setMonth:function(j){var g=[],i=Ext.Date.monthNames,f=this.getStartDate(),h=this.getActiveButtonIndex(),c=new Date(f.getTime()),a;for(var e=0;e<12;e++){var d=j-h+e,b=(12+d)%12;c.setMonth(d);if(this.renderer){a=this.renderer(c)}else {a=i[b].substring(0,3);if(b===0){a+=' '+c.getFullYear()}}g.push({name:a,value:d,pressed:b===f.getMonth()})}this.setData(g);this.fireEvent('refresh')},setStartDate:function(a){if(!this.startDate||a&&a.getTime()!==this.startDate.getTime()){this.startDate=new Date(a.getTime());this.setMonth(a.getMonth())}}},0,['calendar_monthbar'],['component','box','calendar_monthbar'],{'component':!0,'box':!0,'calendar_monthbar':!0},['widget.calendar_monthbar'],0,[Cal.component,'MonthBar'],0);Ext.cmd.derive('Cal.patches.Component',Sch.util.Patch,{target:'Ext.Component',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{privates:{clearAlignEl:function(){var a=this;if(a._lastAlignTarget){Ext.destroy(a.alignListeners);Ext.un('scroll',a.doRealign,a);a._lastAlignToPos=a._lastAlignTarget=a._lastAlignToOffsets=a._topAlignTarget=null}}}}},0,0,0,0,0,0,[Cal.patches,'Component'],0);Ext.cmd.derive('Cal.util.DragDrop',Ext.util.Observable,{el:null,view:null,dragMove:null,draggedEvent:null,eventClone:null,startCellIndex:null,currentCellIndexAtCursor:null,draggingCls:'cal-event-dragging',constructor:function(a){Ext.apply(this,a);Ext.util.Observable.prototype.constructor.apply(this,arguments);this.dragMove=interact('.cal-event-draggable',{context:document.body}).draggable({onstart:this.onDragStart.bind(this),onmove:this.onDrag.bind(this),onend:this.onDragEnd.bind(this)}).actionChecker(this.onDragActionValidate.bind(this))},destroy:function(){this.dragMove.unset();Ext.util.Observable.prototype.destroy.apply(this,arguments)},onDragActionValidate:function(e,c,b,d,a){if(Ext.fly(c.target).hasCls('cal-event-resizable-handle')){return null}if(this.fireEvent('beforeeventdragstart',this,this.view.getEventRecordFromElement(a))===!1){return null}return b},prepareDragElement:function(d){var b=d.getBox(),a=d.dom.cloneNode(!0);a.removeAttribute('id');a.className=a.className.replace('cal-event-starts-earlier-week','').replace('cal-event-ends-future-week','')+' '+this.draggingCls;d.hide();var c=this.view.getDragDropProxy().appendChild(a);c.setXY([b.x,b.y]);c.setWidth(b.width);return c},onDragStart:function(b){var e=b.target,d=Ext.get(e),c=this.view,a=c.getEventRecordFromElement(e);this.draggedEvent=a;this.eventClone=a.copy();if(d.parent('.cal-event-list')){this.startCellIndex=c.getDayCellIndexFromDate(a.getStartDate())}else {this.startCellIndex=c.getDayCellIndexFromPosition(b.pageX,b.pageY)}this.ddEl=this.prepareDragElement(d);this.fireEvent('eventdragstart',this,a)},getElementFromPoint:function(c,d){var a=this.ddEl.dom;a.style.display='none';var b=document.elementFromPoint(c,d);if(Ext.isIE8&&window.top.Siesta){b=document.elementFromPoint(c,d)}a.style.display='block';return b},onDrag:function(b){var c=this.ddEl;c.setX(c.getX()+b.dx);c.setY(c.getY()+b.dy);var d=this.getElementFromPoint(b.pageX,b.pageY);if(d){var a;if(!Ext.fly(d).parent('.cal-event-list')){a=this.view.getDayCellIndexFromPosition(b.pageX,b.pageY)}else {a=this.startCellIndex}if(a!==null&&a!==this.currentCellIndexAtCursor){this.onDayCellOver(a);this.currentCellIndexAtCursor=a}}},onDayCellOver:function(c){var a=Sch.util.Date;var b=c-this.startCellIndex;var d=a.add(this.eventClone.getStartDate(),a.DAY,b);var e=a.add(this.eventClone.getEndDate(),a.DAY,b);this.view.highlightRangeByDate(d,e)},onDragEnd:function(e){var a=Sch.util.Date;var b=this.currentCellIndexAtCursor-this.startCellIndex;this.view.clearHighlightedDays();this.view.el.select('.'+this.draggingCls).removeCls(this.draggingCls);if(b){var c=a.add(this.draggedEvent.getStartDate(),a.DAY,b);var d=a.add(this.draggedEvent.getEndDate(),a.DAY,b);this.fireEvent('eventvaliddrop',this,this.draggedEvent,c,d)}else {this.fireEvent('eventinvaliddrop',this,this.draggedEvent)}this.fireEvent('aftereventdrop',this,this.draggedEvent);this.draggedEvent=this.currentCellIndexAtCursor=this.startCellIndex=null}},1,0,0,0,0,0,[Cal.util,'DragDrop'],0);Ext.cmd.derive('Cal.util.DragResize',Ext.util.Observable,{el:null,view:null,dragResize:null,resizedEvent:null,eventClone:null,startCellIndex:null,resizingCls:'cal-event-resizing',startResizingCls:'cal-event-resizable-handle-start',endResizingCls:'cal-event-resizable-handle-end',dragDropProxyCls:'cal-event-drag-drop-proxy',statics:{proxyCls:'cal-drag-drop-proxy'},currentCellIndexAtCursor:null,startResizing:!1,endResizing:!1,constructor:function(a){Ext.apply(this,a);Ext.util.Observable.prototype.constructor.apply(this,arguments);this.dragResize=interact('.cal-event-resizable',{context:this.el}).resizable({edges:{top:!1,bottom:!1,left:'.'+this.startResizingCls,right:'.'+this.endResizingCls},onstart:this.onResizeStart.bind(this),onmove:this.onResize.bind(this),onend:this.onResizeEnd.bind(this)}).actionChecker(this.onResizeActionValidate.bind(this))},destroy:function(){this.dragResize.unset();Ext.util.Observable.prototype.destroy.apply(this,arguments)},onResizeActionValidate:function(e,f,b,c,a,d){if(this.fireEvent('beforeeventresizestart',this,this.view.getEventRecordFromElement(a))===!1){return null}return b},prepareDragElement:function(b){var c=b.getBox(),a=b.dom.cloneNode(!0);a.removeAttribute('id');a.className=a.className.replace('cal-event-starts-earlier-week','').replace('cal-event-ends-future-week','');this.eventElCopy=a;this.rowTopOffset=c.top-b.parent('.cal-week-row-events-row').getY();this.view.getEl().select('.cal-week-row div[eventid="'+this.resizedEvent.internalId+'"]').hide()},drawProxyInCells:function(n,p){var h=this.view;var i=h.getDayRangeSelectorFromDayIndex(n,p,!1),m={},c=[],a,f,g;for(a=0;a<i.length;a++){var o=i[a],k=h.getEl().down(o),j=k.getBox();g=k.parent('.cal-week-row').getAttribute('weekid');if(!m[g]){m[g]=!0;c.push([j])}else {c[c.length-1].push(j)}}var d=h.getDragDropProxy();d.select('.'+this.dragDropProxyCls).destroy();for(a=0,f=c.length;a<f;a++){var e=c[a],l=e[0].left,q=e[e.length-1].right,r=e[0].top;var b=this.eventElCopy.cloneNode(!0);b.style.left=l-d.getX()+'px';b.style.top=r+this.rowTopOffset-1-d.getY()+'px';b.style.width=q-l-3+'px';b.className+=' '+this.dragDropProxyCls;if(f>1){if(a===0){b.className+=' cal-event-ends-future-week'}else {if(a+1===f){b.className+=' cal-event-starts-earlier-week'}else {b.className+=' cal-event-starts-earlier-week cal-event-ends-future-week '}}}d.appendChild(b,!0)}},onResizeStart:function(a){var e=a.target,c=this.view.getEventRecordFromElement(e),d=Ext.get(e),b=d.getBox();if(Math.abs(b.right-a.clientX)<b.width/2){this.endResizing=!0}else {if(Math.abs(b.left-a.clientX)<b.width/2){this.startResizing=!0}}this.resizedEvent=c;this.eventClone=c.copy();var f=this.eventClone.getStartDate();var g=this.eventClone.getEndDate();this.startDateCellIndex=this.view.getDayCellIndexFromDate(f);this.startDateCellIndex=this.startDateCellIndex===null?0:this.startDateCellIndex;this.endDateCellIndex=this.view.getDayCellIndexFromDate(new Date(g-1));this.endDateCellIndex=this.endDateCellIndex===null?41:this.endDateCellIndex;this.startCellIndex=this.view.getDayCellIndexFromPosition(a.pageX,a.pageY);this.prepareDragElement(d);this.drawProxyInCells(this.startDateCellIndex,this.endDateCellIndex);d.addCls(this.resizingCls);this.fireEvent('eventresizestart',this,c)},onResize:function(b){var a=this.view.getDayCellIndexFromPosition(b.pageX,b.pageY);if(a!==null&&a!==this.currentCellIndexAtCursor){this.onDayCellOver(a);this.currentCellIndexAtCursor=a}},onDayCellOver:function(b){if(this.startResizing!=this.endResizing){var a;if(this.startResizing){a=this.endDateCellIndex+(b>this.endDateCellIndex?1:0)}if(this.endResizing){a=this.startDateCellIndex-(b<this.startDateCellIndex?1:0)}this.drawProxyInCells(b,a)}else {this.view.clearHighlightedDays()}},onResizeEnd:function(i){var a=Sch.util.Date;this.view.clearHighlightedDays();this.view.el.select('.'+this.resizingCls).removeCls(this.resizingCls);this.view.getDragDropProxy().select('.'+this.dragDropProxyCls).destroy();var e=this.currentCellIndexAtCursor-this.startCellIndex;if(e&&this.startResizing!=this.endResizing){var c=this.eventClone.getStartDate();var b=this.eventClone.getEndDate();var f=new Date(b.getTime());a.setDateToMidnight(c);a.setDateToMidnight(b);if(a.compareWithPrecision(b,f)!==0){b=a.add(b,a.DAY,1)}var d=!1;if(this.startResizing){c=a.add(c,a.DAY,e);if(c>=b){c=a.add(c,a.DAY,1);d=!0}}if(this.endResizing){b=a.add(b,a.DAY,e);if(b<=c){b=a.add(b,a.DAY,-1);d=!0}}var g=d?b:c;var h=d?c:b;this.fireEvent('eventvalidresize',this,this.resizedEvent,g,h)}else {this.fireEvent('eventinvalidresize',this,this.resizedEvent)}this.fireEvent('aftereventresize',this,this.resizedEvent);this.resizedEvent=this.currentCellIndexAtCursor=this.startCellIndex=null;this.startResizing=this.endResizing=!1}},1,0,0,0,0,0,[Cal.util,'DragResize'],0);Ext.cmd.derive('Cal.util.DragSelection',Ext.util.Observable,{el:null,view:null,dragCreate:null,startDate:null,draggingCls:'cal-week-row-background-day-dragging',currentDateAtCursor:null,constructor:function(a){Ext.apply(this,a);Ext.util.Observable.prototype.constructor.apply(this,arguments);var b=this.el;this.dragCreate=interact('.cal-week-row-background-day',{context:this.el}).draggable({onstart:this.onDragStart.bind(this),onmove:this.onDrag.bind(this),onend:this.onDragEnd.bind(this)}).actionChecker(this.onDragCreateActionValidate.bind(this))},destroy:function(){this.dragCreate.unset();Ext.util.Observable.prototype.destroy.apply(this,arguments)},onDragCreateActionValidate:function(e,f,b,c,a,d){if(this.fireEvent('beforeeventdragcreatestart',this,this.view.getDateFromDomElement(a))===!1){return null}return b},setDisabled:function(a){},onDragStart:function(a){this.startDate=Sch.util.Date.setDateToMidnight(this.view.getDateFromPosition(a.pageX,a.pageY));this.fireEvent('beforerangeselect',this,this.startDate)},onDrag:function(b){var a=this.view.getDateFromPosition(b.pageX,b.pageY);if(a){a=Sch.util.Date.setDateToMidnight(a);if(!this.currentDateAtCursor||!Sch.util.Date.isSameDate(a,this.currentDateAtCursor)){this.onDayCellOver(a);this.currentDateAtCursor=a}}},onDayCellOver:function(b){var a=Sch.util.Date;var c=a.min(b,this.startDate);var d=a.add(a.max(b,this.startDate),a.DAY,1);this.view.highlightRangeByDate(c,d,this.draggingCls)},onDragEnd:function(c){var a=Sch.util.Date;var b=this.view.getDateFromPosition(c.pageX,c.pageY)||this.currentDateAtCursor;if(b){b=a.setDateToMidnight(b);var d=a.min(b,this.startDate);var e=a.add(a.max(b,this.startDate),a.DAY,1);this.fireEvent('rangeselect',this,d,e)}this.view.clearHighlightedDays(this.draggingCls)}},1,0,0,0,0,0,[Cal.util,'DragSelection'],0);Ext.cmd.derive('Cal.selection.Model',Ext.selection.Model,{mode:'MULTI',deselectOnContainerClick:!0,selectedOnMouseDown:null,constructor:function(){var a=this;Ext.selection.Model.prototype.constructor.apply(this,arguments);a.bindStore(a.view.getEventStore(),!0);a.bindToView()},bindToView:function(){var a=this;a.view.on({eventclick:a.onEventClick,eventmousedown:a.onEventMouseDown,dayclick:a.onDayMouseDown,refresh:function(){a.refresh()},destroy:function(){a.bindStore(null)},scope:a})},bindStore:function(a,c){var b=this.getStore();if(!c&&b){this.mun(b,'load',this.onEventStoreLoad,this)}if(a){this.mon(a,'load',this.onEventStoreLoad,this)}Ext.selection.Model.prototype.bindStore.apply(this,arguments)},onEventStoreLoad:function(){this.deselectAll()},onEventMouseDown:function(c,a,b){this.selectedOnMouseDown=null;if(!this.isSelected(a)){this.selectedOnMouseDown=a;this.selectWithEvent(a,b)}},onEventClick:function(c,a,b){if(!this.selectedOnMouseDown){this.selectWithEvent(a,b)}},onDayMouseDown:function(c,b,a){if(this.deselectOnContainerClick&&!a.getTarget(this.view.eventSelector)){this.deselectAll()}},onSelectChange:function(c,d,b,g){var a=this,f=a.view,h=a.store,e=d?'select':'deselect',i=0;if((b||a.fireEvent('before'+e,a,c))!==!1&&g()!==!1){if(d){f.onEventBarSelect(c,b)}else {f.onEventBarDeselect(c,b)}if(!b){a.fireEvent(e,a,c)}}},selectRange:Ext.emptyFn,selectNode:function(d,c,b){var a=this.view.resolveEventRecord(d);if(a){this.select(a,c,b)}},deselectNode:function(c,d,b){var a=this.view.resolveEventRecord(c);if(a){this.deselect(a,b)}},getFirstSelectedEventForResource:function(f){var d=this.getSelection(),b=null,a,e,c;for(a=0,e=d.length;!b&&a<e;++a){c=d[a];if(c.isAssignedTo(f)){b=c}}return b},getDraggableSelections:function(){return Ext.Array.filter(this.getSelection(),function(a){return a.isDraggable()!==!1})},forEachEventRelatedSelection:function(a,b){if(this.isSelected(a)){b(a)}}},1,0,0,0,['selection.cal-model'],0,[Cal.selection,'Model'],0);Ext.cmd.derive('Cal.component.MonthHeader',Ext.Component,{cls:'cal-month-header',width:'100%',tpl:'<tpl for="."><div data-day-index={index} style="width: {[100/xcount]}%;" class="cal-month-header-day cal-month-header-day-{index} {internalCls}">{name}</div></tpl>',weekStartDay:1,hideNonWorkingDays:!1,nonWorkingDays:null,shortDays:!0,initComponent:function(){var d=[],a=this.weekStartDay;do{var b=a in this.nonWorkingDays;if(!(this.hideNonWorkingDays&&b)){var c='';if(b){c+=' cal-month-header-day-nonworking'}d.push({name:this.shortDays?Ext.Date.getShortDayName(a):Ext.Date.dayNames[a],index:a,internalCls:c,nonWorking:b})}a=(a+1)%7}while(a!==this.weekStartDay);this.data=d;Ext.Component.prototype.initComponent.call(this)}},0,['calendar_monthheader'],['component','box','calendar_monthheader'],{'component':!0,'box':!0,'calendar_monthheader':!0},['widget.calendar_monthheader'],0,[Cal.component,'MonthHeader'],0);Ext.cmd.derive('Cal.menu.ResourceSelector',Ext.menu.Menu,{cls:'cal-resource-sel-menu',eventRecord:null,resourceStore:null,defaults:{xtype:'menucheckitem',group:'cal-resource-sel-menu-group',groupCls:'cal-resource-sel-menu-group-item'},initComponent:function(){this.resourceStore=Ext.StoreManager.lookup(this.resourceStore);this.items=this.createItems();this.on('checkchange',this.selectResource,this,{delegate:'menucheckitem'});Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},selectResource:function(a,b){if(!b){return}this.eventRecord.setResourceId(a.itemId)},setEventRecord:function(b){this.eventRecord=b;var a=this.queryById(b.getResourceId());if(a){a.setChecked(!0,!0)}},createItems:function(){return Ext.Array.map(this.resourceStore.getRange(),function(a){return {text:a.getName(),itemId:a.getId(),style:'color: '+a.getColor()+';'}})},setStore:function(a){this.resourceStore=Ext.StoreManager.lookup(a);Ext.suspendLayouts();this.removeAll();this.add(this.createItems());Ext.resumeLayouts(!0)}},0,['calendar_resourceselectormenu'],['component','box','container','panel','menu','calendar_resourceselectormenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'calendar_resourceselectormenu':!0},['widget.calendar_resourceselectormenu'],0,[Cal.menu,'ResourceSelector'],0);Ext.cmd.derive('Cal.menu.Event',Ext.menu.Menu,{cls:'cal-event-menu',plain:!0,eventRecord:null,resourceStore:null,monthView:null,targetEl:null,resourceselector:null,alwaysOnTop:!0,initComponent:function(){this.items=this.items||this.createItems();Ext.menu.Menu.prototype.initComponent.apply(this,arguments);this.resourceselector=this.down('calendar_resourceselectormenu')},getResourceMenu:function(){return this.resourceselector},isEventWithin:function(a){return a.within(this.getEl())||a.within(this.resourceselector.getEl())},setEventRecord:function(a){this.eventRecord=a;this.resourceselector.setEventRecord(a)},setTargetEl:function(a){this.targetEl=a},createItems:function(){return [{text:this.L('showDetails'),handler:'showEvent',scope:this},{text:this.L('resource'),menu:{xtype:'calendar_resourceselectormenu',resourceStore:this.resourceStore},bind:{disabled:'{!edit}'}},'-',{text:this.L('delete'),handler:'deleteEvent',scope:this,bind:{disabled:'{!edit}'}},{text:this.L('cut'),handler:'cutEvent',scope:this,bind:{disabled:'{!edit}'}},{text:this.L('copy'),handler:'copyEvent',scope:this},{text:this.L('paste'),handler:'pasteEvent',scope:this,bind:{disabled:'{!cutCopyEvent}'}},{text:this.L('duplicate'),handler:'duplicateEvent',scope:this}]},showEvent:function(){this.monthView.showEventEditor(this.eventRecord,this.targetEl)},cutEvent:function(){this.getViewModel().set('cutCopyEvent',this.eventRecord.copy());this.monthView.deleteEvent(this.eventRecord)},deleteEvent:function(){this.monthView.deleteEvent(this.eventRecord)},copyEvent:function(){this.getViewModel().set('cutCopyEvent',this.eventRecord.copy())},pasteEvent:function(){var a=this.getViewModel().get('cutCopyEvent');if(!a){return}a.setStartDate(this.eventRecord.getStartDate());this.monthView.duplicateEvent(a)},duplicateEvent:function(){this.monthView.duplicateEvent(this.eventRecord)}},0,['calendar_eventmenu'],['component','box','container','panel','menu','calendar_eventmenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'calendar_eventmenu':!0},['widget.calendar_eventmenu'],[[Cal.mixin.Localizable.prototype.mixinId||Cal.mixin.Localizable.$className,Cal.mixin.Localizable]],[Cal.menu,'Event'],0);Ext.cmd.derive('Cal.menu.Day',Ext.menu.Menu,{cls:'cal-day-menu',monthView:null,date:null,plain:!0,initComponent:function(){this.items=this.items||this.createItems();Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},setDate:function(a){this.date=new Date(a.getTime())},getDate:function(){return this.date&&new Date(this.date.getTime())},createItems:function(){return [{text:this.L('newEvent'),handler:'createNewEvent',scope:this},{text:this.L('paste'),handler:'pasteEvent',scope:this,bind:{disabled:'{!cutCopyEvent}'}}]},createNewEvent:function(){this.monthView.createNewEvent(this.getDate())},pasteEvent:function(){var a=this.getViewModel().get('cutCopyEvent');if(!a){return}a.setStartDate(this.getDate(),!0);this.monthView.duplicateEvent(a)}},0,['calendar_daymenu'],['component','box','container','panel','menu','calendar_daymenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'calendar_daymenu':!0},['widget.calendar_daymenu'],[[Cal.mixin.Localizable.prototype.mixinId||Cal.mixin.Localizable.$className,Cal.mixin.Localizable]],[Cal.menu,'Day'],0);Ext.cmd.derive('Sch.plugin.mixin.Editor',Ext.Base,{lockableScope:'normal',width:400,hideOnBlur:!0,saveAndCloseOnEnter:!0,triggerEvent:'eventdblclick',record:null,schedulerView:null,dragProxyEl:null,ignoreCls:'sch-event-editor-ignore-click',ignoreCheckMaxDepth:9,initEditor:function(c,b){var a=c.getView&&c.getView()||c;this.schedulerView=a;b.setEventStore(a.getEventStore());b.setResourceStore&&a.getResourceStore&&b.setResourceStore(a.getResourceStore());b.setAssignmentStore&&a.getAssignmentStore&&b.setAssignmentStore(a.getAssignmentStore());b.setDependencyStore&&a.getDependencyStore&&b.setDependencyStore(a.getDependencyStore());b.saveOnEnter=this.saveAndCloseOnEnter;b.allowOverlap=this.schedulerView.allowOverlap;if(b.allowOverlap===undefined){b.allowOverlap=!0}if(a.rendered){this.onSchedulerRender()}else {a.on({afterrender:this.onSchedulerRender,scope:this})}a.on({dragcreateend:this.onDragCreateEnd,scope:this});b.on('aftereventsave',function(){this.hideEditor()},this);this.on('hide',this.hideDragProxy,this);if(this.triggerEvent){a.on(this.triggerEvent,this.onActivateEditor,this)}a.registerEventEditor&&this.schedulerView.registerEventEditor(this)},onSchedulerRender:function(){if(!this.isWindow){this.render(document.body)}if(this.hideOnBlur){this.mon(Ext.getDoc(),'mousedown',this.mouseDownAction,this)}},onDragCreateEnd:function(f,b,a,e,c){this.dragProxyEl=c;var d=this.editor||this;if(a instanceof Sch.model.Resource){d.resourceRecord=a}this.schedulerView.onEventCreated(b);this.showForEvent(b,this.dragProxyEl)},addIgnoreCls:function(){var a;var c=this.query('pickerfield');for(a=0;a<c.length;a++){c[a].getPicker()}var b=this.query('[floating]');for(a=0;a<b.length;a++){b[a].addCls(this.ignoreCls)}},setIgnoreClsOnParent:function(){var a=this.schedulerView.up('[floating=true]');if(a){a.addCls(this.ignoreCls)}},mouseDownAction:function(a){var c=this.schedulerView,d=(this.editor||this).eventRecord,b;if(!this.isHidden()&&!a.within(this.getEl())&&!a.getTarget('.'+this.ignoreCls,this.ignoreCheckMaxDepth)&&(!(b=a.getTarget(c.eventSelector))||c.getEventRecordFromDomId(b.id)!=d)){this.hide()}},onActivateEditor:function(b,a){this.showRecord(a)},hideDragProxy:function(){var a=this.dragProxyEl;if(a){a.hide()}},hideEditor:function(){this.hide()},setRecord:function(a){this.record=a},getRecord:function(){return this.record}},0,0,0,0,0,0,[Sch.plugin.mixin,'Editor'],0);Ext.cmd.derive('Ext.form.Label',Ext.Component,{autoEl:'label',maskOnDisable:!1,getElConfig:function(){var a=this;a.html=a.text?Ext.util.Format.htmlEncode(a.text):a.html||'';return Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:a.forId||''})},setText:function(c,b){var a=this;b=b!==!1;if(b){a.text=c;delete a.html}else {a.html=c;delete a.text}if(a.rendered){a.el.dom.innerHTML=b!==!1?Ext.util.Format.htmlEncode(c):c;a.updateLayout()}return a}},0,['label'],['component','box','label'],{'component':!0,'box':!0,'label':!0},['widget.label'],0,[Ext.form,'Label'],0);Ext.cmd.derive('Ext.form.field.Date',Ext.form.field.Picker,{alternateClassName:['Ext.form.DateField','Ext.form.Date'],format:'m/d/Y',ariaFormat:'M j Y',altFormats:'m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j',disabledDaysText:'Disabled',ariaDisabledDaysText:'This day of week is disabled',disabledDatesText:'Disabled',ariaDisabledDatesText:'This date cannot be selected',minText:'The date in this field must be equal to or after {0}',ariaMinText:'The date must be equal to or after {0}',maxText:'The date in this field must be equal to or before {0}',ariaMaxText:'The date must be equal to or before {0}',invalidText:'{0} is not a valid date - it must be in the format {1}',formatText:'Expected date format: {0}',triggerCls:'x-form-date-trigger',showToday:!0,useStrict:undefined,initTime:'12',initTimeFormat:'H',matchFieldWidth:!1,startDay:0,valuePublishEvent:['select','blur'],ariaRole:'combobox',initComponent:function(){var a=this,d=Ext.isString,c,b;c=a.minValue;b=a.maxValue;if(d(c)){a.minValue=a.parseDate(c)}if(d(b)){a.maxValue=a.parseDate(b)}a.disabledDatesRE=null;a.initDisabledDays();Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var c=this.disabledDates,f=c.length-1,d='(?:',a,e=c.length,b;for(a=0;a<e;a++){b=c[a];d+=Ext.isDate(b)?'^'+Ext.String.escapeRegex(b.dateFormat(this.format))+'$':b;if(a!==f){d+='|'}}this.disabledDatesRE=new RegExp(d+')')}},setDisabledDates:function(c){var a=this,b=a.picker;a.disabledDates=c;a.initDisabledDays();if(b){b.setDisabledDates(a.disabledDatesRE)}},setDisabledDays:function(a){var b=this.picker;this.disabledDays=a;if(b){b.setDisabledDays(a)}},setMinValue:function(c){var a=this,b=a.picker,d=Ext.isString(c)?a.parseDate(c):c;a.minValue=d;if(b){b.minText=Ext.String.format(a.minText,a.formatDate(a.minValue));b.setMinDate(d)}},setMaxValue:function(c){var a=this,b=a.picker,d=Ext.isString(c)?a.parseDate(c):c;a.maxValue=d;if(b){b.maxText=Ext.String.format(a.maxText,a.formatDate(a.maxValue));b.setMaxDate(d)}},getErrors:function(b){b=arguments.length>0?b:this.formatDate(this.processRawValue(this.getRawValue()));var a=this,e=Ext.String.format,l=Ext.Date.clearTime,c=Ext.form.field.Picker.prototype.getErrors.call(this,b),d=a.disabledDays,k=a.disabledDatesRE,g=a.minValue,f=a.maxValue,o=d?d.length:0,j=0,m,h,n,i;if(b===null||b.length<1){return c}m=b;b=a.parseDate(b);if(!b){c.push(e(a.invalidText,m,Ext.Date.unescapeFormat(a.format)));return c}i=b.getTime();if(g&&i<l(g).getTime()){c.push(e(a.minText,a.formatDate(g)))}if(f&&i>l(f).getTime()){c.push(e(a.maxText,a.formatDate(f)))}if(d){n=b.getDay();for(;j<o;j++){if(n===d[j]){c.push(a.disabledDaysText);break}}}h=a.formatDate(b);if(k&&k.test(h)){c.push(e(a.disabledDatesText,h))}return c},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(g,c){var e=this,a=Ext.Date,d=null,f=e.useStrict,b;if(a.formatContainsHourInfo(c)){d=a.parse(g,c,f)}else {b=a.parse(g+' '+e.initTime,c+' '+e.initTimeFormat,f);if(b){d=a.clearTime(b)}}return d},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):''},parseDate:function(a){if(!a||Ext.isDate(a)){return a}var b=this,d=b.safeParse(a,b.format),f=b.altFormats,c=b.altFormatsArray,e=0,g;if(!d&&f){c=c||f.split('|');g=c.length;for(;e<g&&!d;++e){d=b.safeParse(a,c[e])}}return d},formatDate:function(a,b){return Ext.isDate(a)?Ext.Date.dateFormat(a,b||this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return new Ext.picker.Date({pickerField:a,floating:!0,preventRefocus:!0,hidden:!0,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,ariaDisabledDatesText:a.ariaDisabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,ariaDisabledDaysText:a.ariaDisabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),ariaMinText:b(a.ariaMinText,a.formatDate(a.minValue,a.ariaFormat)),maxText:b(a.maxText,a.formatDate(a.maxValue)),ariaMaxText:b(a.ariaMaxText,a.formatDate(a.maxValue,a.ariaFormat)),listeners:{scope:a,select:a.onSelect,tabout:a.onTabOut},keyNavConfig:{esc:function(){a.inputEl.focus();a.collapse()}}})},onSelect:function(c,b){var a=this;a.setValue(b);a.fireEvent('select',a,b);a.onTabOut(c)},onTabOut:function(a){this.inputEl.focus();this.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onBlur:function(c){var a=this,b=a.rawToValue(a.getRawValue());if(Ext.isDate(b)){a.setValue(b)}Ext.form.field.Picker.prototype.onBlur.call(this,c)}},0,['datefield'],['component','box','field','textfield','pickerfield','datefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0},['widget.datefield'],0,[Ext.form.field,'Date',Ext.form,'DateField',Ext.form,'Date'],0);Ext.cmd.derive('Ext.picker.Time',Ext.view.BoundList,{config:{store:!0},statics:{createStore:function(g,f){var c=Ext.Date,d=c.clearTime,a=this.prototype.initDate,e=[],b=d(new Date(a[0],a[1],a[2])),h=c.add(d(new Date(a[0],a[1],a[2])),'mi',24*60-1);while(b<=h){e.push({disp:c.dateFormat(b,g),date:b});b=c.add(b,'mi',f)}return new Ext.data.Store({model:Ext.picker.Time.prototype.modelType,data:e})}},increment:15,format:'g:i A',displayField:'disp',initDate:[2008,0,1],componentCls:'x-timepicker',loadMask:!1,initComponent:function(){var b=this,d=Ext.Date,c=d.clearTime,a=b.initDate;b.absMin=c(new Date(a[0],a[1],a[2]));b.absMax=d.add(c(new Date(a[0],a[1],a[2])),'mi',24*60-1);b.updateList();Ext.view.BoundList.prototype.initComponent.call(this)},setStore:function(a){this.store=a===!0?Ext.picker.Time.createStore(this.format,this.increment):a},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(b){var a=this.initDate;b.setFullYear(a[0],a[1],a[2]);return b},updateList:function(){var a=this,e=a.normalizeDate(a.minValue||a.absMin),d=a.normalizeDate(a.maxValue||a.absMax),b=a.getStore().getFilters(),c=a.rangeFilter;b.beginUpdate();if(c){b.remove(c)}c=a.rangeFilter=new Ext.util.Filter({filterFn:function(b){var a=b.get('date');return a>=e&&a<=d}});b.add(c);b.endUpdate()}},0,['timepicker'],['component','box','dataview','boundlist','timepicker'],{'component':!0,'box':!0,'dataview':!0,'boundlist':!0,'timepicker':!0},['widget.timepicker'],0,[Ext.picker,'Time'],function(){this.prototype.modelType=Ext.define(null,{extend:'Ext.data.Model',fields:['disp','date']})});Ext.cmd.derive('Ext.form.field.Time',Ext.form.field.ComboBox,{alternateClassName:['Ext.form.TimeField','Ext.form.Time'],triggerCls:'x-form-time-trigger',minText:'The time in this field must be equal to or after {0}',maxText:'The time in this field must be equal to or before {0}',invalidText:'{0} is not a valid time',format:'g:i A',altFormats:'g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A',formatText:'Expected time format: HH:MM space am/pm',increment:15,pickerMaxHeight:300,selectOnTab:!0,snapToIncrement:!1,valuePublishEvent:['select','blur'],initDate:'1/1/2008',initDateParts:[2008,0,1],initDateFormat:'j/n/Y',queryMode:'local',displayField:'disp',valueField:'date',initComponent:function(){var a=this,c=a.minValue,b=a.maxValue;if(c){a.setMinValue(c)}if(b){a.setMaxValue(b)}a.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+a.displayField+'"])]}<tpl if="xindex < xcount">'+a.delimiter+'</tpl></tpl>',{formatDate:a.formatDate.bind(a)});a.store=Ext.picker.Time.createStore(a.format,a.increment);Ext.form.field.ComboBox.prototype.initComponent.call(this);a.getPicker()},isEqual:function(b,c){var e=Ext.Array.from,f=Ext.Date.isEqual,a,d;b=e(b);c=e(c);d=b.length;if(d!==c.length){return !1}for(a=0;a<d;a++){if(!(c[a] instanceof Date)||!(b[a] instanceof Date)||!f(c[a],b[a])){return !1}}return !0},setMinValue:function(c){var a=this,b=a.picker;a.setLimit(c,!0);if(b){b.setMinValue(a.minValue)}},setMaxValue:function(c){var a=this,b=a.picker;a.setLimit(c,!1);if(b){b.setMaxValue(a.maxValue)}},setLimit:function(b,e){var d=this,a,c;if(Ext.isString(b)){a=d.parseDate(b)}else {if(Ext.isDate(b)){a=b}}if(a){c=d.getInitDate();c.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}else {c=null}d[e?'minValue':'maxValue']=c},getInitDate:function(d,b,c){var a=this.initDateParts;return new Date(a[0],a[1],a[2],d||0,b||0,c||0,0)},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(j){j=arguments.length>0?j:this.getRawValue();var a=this,d=Ext.String.format,c=Ext.form.field.ComboBox.prototype.getErrors.call(this,j),i=a.minValue,h=a.maxValue,e=a.displayTplData,k=a.getRawValue(),g,l,f,b;if(e&&e.length>0){for(g=0,l=e.length;g<l;g++){b=e[g];b=b.date||b.disp;f=a.parseDate(b);if(!f){c.push(d(a.invalidText,b,Ext.Date.unescapeFormat(a.format)));continue}if(i&&f<i){c.push(d(a.minText,a.formatDate(i)))}if(h&&f>h){c.push(d(a.maxText,a.formatDate(h)))}}}else {if(k.length&&!a.parseDate(k)){c.push(d(a.invalidText,k,Ext.Date.unescapeFormat(a.format)))}}return c},formatDate:function(a){var c=[],b,d;a=Ext.Array.from(a);for(b=0,d=a.length;b<d;b++){c.push(Ext.form.field.Date.prototype.formatDate.call(this,a[b]))}return c.join(this.delimiter)},parseDate:function(c){var b=this,a=c,f=b.altFormats,d=b.altFormatsArray,e=0,g;if(c&&!Ext.isDate(c)){a=b.safeParse(c,b.format);if(!a&&f){d=d||f.split('|');g=d.length;for(;e<g&&!a;++e){a=b.safeParse(c,d[e])}}}if(a&&b.snapToIncrement){a=new Date(Ext.Number.snap(a.getTime(),b.increment*60*1000))}return a},safeParse:function(e,c){var f=this,b=Ext.Date,a,d=null;if(b.formatContainsDateInfo(c)){d=b.parse(e,c)}else {a=b.parse(f.initDate+' '+e,f.initDateFormat+' '+c);if(a){d=a}}return d},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var a=this;a.listConfig=Ext.apply({xtype:'timepicker',pickerField:a,cls:undefined,minValue:a.minValue,maxValue:a.maxValue,increment:a.increment,format:a.format,maxHeight:a.pickerMaxHeight},a.listConfig);return Ext.form.field.ComboBox.prototype.createPicker.call(this)},completeEdit:function(){var a=this,b=a.getValue();Ext.form.field.ComboBox.prototype.completeEdit.apply(this,arguments);if(a.validateValue(b)){a.setValue(b)}},findRecordByValue:function(a){if(typeof a==='string'){a=this.parseDate(a)}return Ext.form.field.ComboBox.prototype.findRecordByValue.call(this,a)},rawToValue:function(e){var d=this,c,b,a,f;if(d.multiSelect){b=[];c=Ext.Array.from(e);for(a=0,f=c.length;a<f;a++){b.push(d.parseDate(c[a]))}return b}return d.parseDate(e)},setValue:function(a){var b=this;if(b.creatingPicker){return}b.getPicker();if(Ext.isDate(a)){a=b.getInitDate(a.getHours(),a.getMinutes(),a.getSeconds())}return Ext.form.field.ComboBox.prototype.setValue.call(this,a)},getValue:function(){return this.rawToValue(Ext.form.field.ComboBox.prototype.getValue.apply(this,arguments))}},0,['timefield'],['component','box','field','textfield','pickerfield','combobox','combo','timefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'timefield':!0},['widget.timefield'],0,[Ext.form.field,'Time',Ext.form,'TimeField',Ext.form,'Time'],0);Ext.cmd.derive('Sch.widget.EventEditor',Ext.form.Panel,{eventStore:null,saveOnEnter:!0,startDateField:null,startTimeField:null,endDateField:null,endTimeField:null,nameField:null,resourceField:null,startTimeConfig:null,startDateConfig:null,endTimeConfig:null,endDateConfig:null,resourceFieldConfig:null,flipDatesOnSave:!0,showResourceField:!1,border:!1,bodyPadding:6,fieldsPanelConfig:null,dateFormat:'Y-m-d',timeFormat:'H:i',cls:'sch-eventeditor',dynamicForm:!0,eventRecord:null,resourceRecord:null,currentForm:null,allowOverlap:!0,readOnly:!1,typeField:'EventType',layout:{type:'vbox',align:'stretch'},initComponent:function(){Ext.apply(this,{buttons:this.buttons||this.buildButtons(),items:[{xtype:'container',margin:'5 5 5 5',defaults:{width:'100%'},border:!1,items:this.getDefaultFields()},Ext.applyIf(this.fieldsPanelConfig,{flex:1,activeItem:0})]});Ext.form.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){Ext.form.Panel.prototype.afterRender.apply(this,arguments);if(this.saveOnEnter){this.el.on({'keyup':function(a,b){if(a.getKey()===a.ENTER&&b.tagName.toLowerCase()==='input'){this.save()}},scope:this})}},getDefaultFields:function(){this.nameField=new Ext.form.field.Text({fieldLabel:this.L('nameText'),selectOnFocus:!0,allowBlank:!1});if(this.showResourceField){this.resourceField=Ext.create(Ext.apply({xtype:'combo',fieldLabel:this.L('resourceText'),queryMode:'local',valueField:'Id',displayField:'Name',allowBlank:!1,editable:!1},this.resourceFieldConfig))}this.buildDurationFields();return [this.nameField,this.resourceField,{xtype:'container',layout:'hbox',margin:'0 0 10 0',items:[this.startDateField,this.startTimeField]},{xtype:'container',layout:'hbox',margin:'0 0 10 0',items:[this.endDateField,this.endTimeField]}]},setReadOnly:function(a){if(a!==this.readOnly){Ext.Array.each(this.query('field'),function(b){b.setReadOnly(a)});this.saveButton.setVisible(!a);this.deleteButton.setVisible(!a);this.readOnly=a}},loadRecord:function(a,f){this.setReadOnly(f);if(this.deleteButton){this.deleteButton.setVisible(!f&&!this.isNewRecord(a))}this.eventRecord=a;var e=a.getStartDate();this.startDateField.setValue(e);this.startTimeField.setValue(e);var g=a.getEndDate();this.endDateField.setValue(g);this.endTimeField.setValue(g);this.nameField.setValue(a.getName());this.resourceField&&this.resourceField.setValue(a.getResourceId()||this.resourceRecord);var b=this,d=a.get(this.typeField);if(d&&this.dynamicForm){var c=this.items.getAt(1),h=c.query('> component[EventType='+d+']');if(!h.length){throw "Can't find form for EventType="+d}if(!c.getLayout().setActiveItem){throw "Can't switch active component in the 'fieldsPanel'"}b=h[0];if(!(b instanceof Ext.form.Panel)){throw "Each child component of 'fieldsPanel' should be a 'form'"}c.getLayout().setActiveItem(b)}this.currentForm=b;b.getForm().loadRecord(a);this.nameField.focus()},setEventStore:function(a){this.eventStore=a},setResourceStore:function(a){this.resourceStore=a;this.resourceField&&this.resourceField.bindStore(a)},getEventStore:function(){return this.eventStore},getResourceStore:function(){return this.resourceStore},isNewRecord:function(b){var a=this.getEventStore();if(!a){return !0}return a.indexOf(b)===-1},onSaveClick:function(){this.save()},save:function(){var a=this,b=a.eventRecord,e=a.getEventStore(),h=a.currentForm.getForm(),c=a.getValues(),f=a.resourceField&&a.resourceField.getSelection()||a.resourceRecord;if(!b||!h.isValid()||Ext.Date.isEqual(c.startDate,c.endDate)){return}if(this.flipDatesOnSave){var i=Sch.util.Date.min(c.startDate,c.endDate);this.startDateField.setValue(i);this.startTimeField.setValue(i);var j=Sch.util.Date.max(c.startDate,c.endDate);this.endDateField.setValue(j);this.endTimeField.setValue(j);c=a.getValues()}if(!a.allowOverlap&&e){var d=b.getResources(e);d=d.length>0?d:[f];var g=!1;Ext.each(d,function(a){return g=!e.isDateRangeAvailable(c.startDate,c.endDate,b,a)});if(g){return}}if(a.fireEvent('beforeeventsave',a,b,c)!==!1){a.onBeforeSave(b);b.beginEdit();h.updateRecord(b);b.setStartEndDate(c.startDate,c.endDate);b.setName(c.name);if(!a.isNewRecord(b)&&a.resourceField){b.setResourceId(a.resourceField.getValue())}b.endEdit();if(e&&a.isNewRecord(b)){if(a.fireEvent('beforeeventadd',a,b,[f])!==!1){if(a.getEventStore().isTreeStore){b.set('leaf',!0)}b.assign(f);a.getEventStore().append(b)}}this.fireEvent('aftereventsave',a,b);a.onAfterSave(b)}return b},getValues:function(){var a=this,f=a.currentForm!=this?a.currentForm.getValues():Ext.form.Panel.prototype.getValues.apply(this,arguments),b=a.startDateField.getValue(),c=a.endDateField.getValue(),d=a.startTimeField.getValue(),g=a.nameField.getValue(),e=a.endTimeField.getValue();if(b&&d){Sch.util.Date.copyTimeValues(b,d)}if(c&&e){Sch.util.Date.copyTimeValues(c,e)}return Ext.apply(f,{startDate:b,endDate:c,name:g,resource:a.resourceField&&a.resourceField.getSelection()||a.resourceRecord})},onBeforeSave:function(a){},onAfterSave:function(a){},onDeleteClick:function(){this.deleteEvent()},deleteEvent:function(){if(this.fireEvent('beforeeventdelete',this,this.eventRecord)!==!1){var a=this.getEventStore();a&&a.remove(this.eventRecord);return !0}return !1},onCancelClick:Ext.emptyFn,buildButtons:function(){this.saveButton=new Ext.Button({text:this.L('saveText'),scope:this,handler:this.onSaveClick});this.deleteButton=new Ext.Button({text:this.L('deleteText'),scope:this,handler:this.onDeleteClick});this.cancelButton=new Ext.Button({text:this.L('cancelText'),scope:this,handler:this.onCancelClick});return [this.saveButton,this.deleteButton,this.cancelButton]},buildDurationFields:function(){this.startDateField=new Ext.form.field.Date(Ext.apply({fieldLabel:this.L('startDateText'),allowBlank:!1,format:this.dateFormat,flex:1,margin:'0 10 0 0'},this.startDateConfig||{}));this.startTimeField=new Ext.form.field.Time(Ext.apply({format:this.timeFormat,increment:30,width:90,allowBlank:!1},this.startTimeConfig||{}));this.endDateField=new Ext.form.field.Date(Ext.apply({fieldLabel:this.L('endDateText'),allowBlank:!1,format:this.dateFormat,flex:1,margin:'0 10 0 0'},this.endDateConfig||{}));this.endTimeField=new Ext.form.field.Time(Ext.apply({format:this.timeFormat,increment:30,width:90,allowBlank:!1},this.endTimeConfig||{}));return [this.startDateField,this.startTimeField,this.endDateField,this.endTimeField]}},0,['eventeditorform'],['component','box','container','panel','form','eventeditorform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'eventeditorform':!0},['plugin.scheduler_eventeditorform','widget.eventeditorform'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.widget,'EventEditor'],0);Ext.cmd.derive('Sch.plugin.EditorWindow',Ext.window.Window,{cls:'sch-eventeditor-window',layout:'fit',alwaysOnTop:!0,closeAction:'hide',constrain:!0,editorConfig:null,initComponent:function(){var a=this;if(!this.editor){this.editor=Ext.create(Ext.apply({xtype:'eventeditorform',saveOnEnter:this.saveAndCloseOnEnter,onDeleteClick:function(){if(this.deleteEvent()){a.hide()}},onCancelClick:function(){if(this.deleteOnCancel){this.deleteEvent()}a.hide()}},this.editorConfig));this.items=this.editor}Ext.window.Window.prototype.initComponent.apply(this,arguments)},init:function(a){this.initEditor(a,this.editor)},afterRender:function(){Ext.window.Window.prototype.afterRender.apply(this,arguments);this.addIgnoreCls()},showForEvent:function(b,c,a){return this.showRecord(b,{alignToEl:c,deleteOnCancel:a})},showRecord:function(c,a){a=a||{};this.setRecord(c);this.show();if(a.alignToEl){this.alignTo(a.alignToEl)}else {this.center()}this.setTitle(c.getName());this.setIgnoreClsOnParent();var b=this.schedulerView,d=b&&b.isReadOnly&&b.isReadOnly();this.editor.deleteOnCancel=a.deleteOnCancel;this.editor.loadRecord(c,d)}},0,['scheduler_editorwindow'],['component','box','container','panel','window','scheduler_editorwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'scheduler_editorwindow':!0},['plugin.scheduler_editorwindow','widget.scheduler_editorwindow'],[[Ext.AbstractPlugin.prototype.mixinId||Ext.AbstractPlugin.$className,Ext.AbstractPlugin],[Sch.plugin.mixin.Editor.prototype.mixinId||Sch.plugin.mixin.Editor.$className,Sch.plugin.mixin.Editor]],[Sch.plugin,'EditorWindow'],0);Ext.cmd.derive('Cal.form.field.ResourcePicker',Ext.form.field.ComboBox,{cls:'cal-resource-picker',valueField:'Id',allowBlank:!1,editable:!1,iconWrapper:null,tpl:'<ul class="x-list-plain"><tpl for="."><li role="option" class="x-boundlist-item"><span class="cal-resource-picker-option-icon" style="color: {Color};"></span>{Name}</li></tpl></ul>',beforeSubTpl:'<span class="cal-resource-picker-icon"></span>',displayTpl:'<tpl for=".">{Name}</tpl>',afterRender:function(){Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments);this.iconWrapper=this.getEl().down('.cal-resource-picker-icon');this.updateValue()},updateValue:function(){Ext.form.field.ComboBox.prototype.updateValue.apply(this,arguments);var a=this.valueCollection.first();if(this.rendered){this.iconWrapper.setStyle('color',a?a.getColor():'transparent')}}},0,['calendar_resourcepicker'],['component','box','field','textfield','pickerfield','combobox','combo','calendar_resourcepicker'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'calendar_resourcepicker':!0},['widget.calendar_resourcepicker'],0,[Cal.form.field,'ResourcePicker'],0);Ext.cmd.derive('Cal.form.EventEditor',Sch.widget.EventEditor,{resourceFieldConfig:{xclass:'Cal.form.field.ResourcePicker'},showResourceField:!0},0,['calendar_eventeditorform'],['component','box','container','panel','form','eventeditorform','calendar_eventeditorform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'eventeditorform':!0,'calendar_eventeditorform':!0},['widget.calendar_eventeditorform'],0,[Cal.form,'EventEditor'],0);Ext.cmd.derive('Cal.window.EventEditor',Sch.plugin.EditorWindow,{cls:'cal-event-editor-window',ignoreCls:'cal-event-editor-ignore-click',editorConfig:{xtype:'calendar_eventeditorform'},isEventWithin:function(b){var a=this.getEl();return a&&a.isVisible()&&(b.within(a)||b.getTarget('.'+this.ignoreCls))}},0,['calendar_eventeditorwindow'],['component','box','container','panel','window','scheduler_editorwindow','calendar_eventeditorwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'scheduler_editorwindow':!0,'calendar_eventeditorwindow':!0},['plugin.calendar_eventeditor','widget.calendar_eventeditorwindow'],0,[Cal.window,'EventEditor'],0);Ext.cmd.derive('Cal.view.EventList',Ext.view.View,{scrollable:{x:!1,y:!0},itemSelector:'.cal-event',tpl:null,eventTpl:null,initComponent:function(){var a=this;a.tpl=new Ext.XTemplate('<table cellpadding="0" cellspacing="0" class="cal-event-list-view-container"><tbody><tpl for="."><tr><td>{[this.renderEvents(values)]}</td></tr>','</tpl></tbody></table>',{dayInfo:null,renderEvents:function(b){return a.eventTpl.renderEventRecord(b,this.dayInfo)}});Ext.view.View.prototype.initComponent.apply(this,arguments)},collectData:function(a){return a},renderDay:function(a){this.tpl.dayInfo=a;this.store.loadRecords(a.allEvents)}},0,['calendar_eventlistview'],['component','box','dataview','calendar_eventlistview'],{'component':!0,'box':!0,'dataview':!0,'calendar_eventlistview':!0},['widget.calendar_eventlistview'],0,[Cal.view,'EventList'],0);Ext.cmd.derive('Cal.tip.EventList',Ext.tip.ToolTip,{maxHeight:200,width:200,closable:!0,layout:'fit',autoHide:!1,cls:'cal-event-list',bodyPadding:'6px 1px',shadow:'frame',border:!1,dateFormat:'l, M d',monthView:null,currentDate:null,initComponent:function(a){this.items=[{xtype:'calendar_eventlistview',eventTpl:this.monthView.eventTpl}];Ext.tip.ToolTip.prototype.initComponent.apply(this,arguments);this.view=this.down('calendar_eventlistview')},setDate:function(a){this.currentDate=a;this.refresh()},getDate:function(){return this.currentDate&&new Date(this.currentDate.getTime())},afterRender:function(){Ext.tip.ToolTip.prototype.afterRender.apply(this,arguments);this.mon(Ext.getBody(),'mousedown',this.onMouseDown,this)},shouldHide:function(b){var a=this.monthView;return !b.within(this.getEl())&&!(a.eventMenu&&a.eventMenu.isEventWithin(b))&&!(a.eventEditor&&a.eventEditor.isEventWithin(b))},onMouseDown:function(a){if(this.isVisible()&&this.shouldHide(a)){this.hide()}},refresh:function(){var c=this.monthView,a=this.getDate(),b=c.getDayInfo(a);this.setTitle(Ext.Date.format(a,this.dateFormat));this.view.renderDay(b)}},0,['calendar_eventlist'],['component','box','container','panel','tip','tooltip','calendar_eventlist'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0,'calendar_eventlist':!0},['widget.calendar_eventlist'],0,[Cal.tip,'EventList'],0);Ext.cmd.derive('Cal.container.Month',Ext.Container,{viewModel:{data:{cutCopyEvent:null,edit:!0}},config:{readOnly:!1},dayCellRenderer:null,eventRenderer:null,eventTemplateClass:'Cal.template.Event',dayNameTemplateClass:'Cal.template.DayName',weekRowTemplateClass:'Cal.template.WeekRow',eventListDateFormat:'l, M d',layout:{type:'vbox',align:'stretch'},flex:1,eventTpl:null,dayNameTpl:null,weekRowTpl:null,nonWorkingDays:null,weekStartDay:1,eventsPerCell:1,eventHeight:17,eventNameHeight:23,eventCls:'cal-event',eventOverflowElCls:'cal-event-more-events',dayCls:'cal-week-row-background-day',highlightedDayCls:'cal-week-row-background-day-highlight',eventStore:null,resourceStore:null,eventSelector:null,daySelector:null,eventOverflowElSelector:null,dayCache:null,hoveredEventNode:null,hideNonWorkingDays:!1,startDate:null,createEventTrigger:null,editorEventTrigger:null,eventMenuTrigger:null,dayMenuTrigger:null,showWeekNumber:!0,dragDrop:null,dragResize:null,dragMove:null,dragDropProxyEl:null,eventListConfig:null,eventEditorConfig:null,eventMenuConfig:null,dayMenuConfig:null,eventList:null,eventEditor:null,eventMenu:null,dayMenu:null,initComponent:function(){var a=this;a.setEventStore(a.eventStore,!0);a.setResourceStore(a.resourceStore,!0);a.eventSelector='.'+a.eventCls;a.daySelector='.'+a.dayCls;a.eventOverflowElSelector='.'+a.eventOverflowElCls;if(a.eventRenderer){a.eventRenderer=Ext.Function.bind(a.eventRenderer,a)}a.eventTpl=Ext.create(a.eventTemplateClass,{getUserTplData:a.eventRenderer});a.dayNameTpl=Ext.create(a.dayNameTemplateClass);a.weekRowTpl=Ext.create(a.weekRowTemplateClass,{dayNameTpl:a.dayNameTpl,eventTpl:a.eventTpl});a.weekEndDay=(a.weekStartDay+6)%7;a.weekendDaysInWeek=Ext.Object.getSize(a.nonWorkingDays);a.daysInWeek=a.hideNonWorkingDays?7-a.weekendDaysInWeek:7;a.daysInMonth=a.daysInWeek*6;a.items=[{xtype:'calendar_monthheader',nonWorkingDays:a.nonWorkingDays,hideNonWorkingDays:a.hideNonWorkingDays,weekStartDay:a.weekStartDay,dock:'top',listeners:{afterrender:this.onMonthHeaderAfterRender,scope:this}},{xtype:'component',itemId:'monthview',tpl:a.weekRowTpl,cls:'cal-month-view',flex:1,listeners:{afterrender:this.onMonthViewAfterRender,scope:this}}];Ext.container.Container.prototype.initComponent.apply(this,arguments);a.monthview=a.down('#monthview');a.setStartDate(a.startDate||new Date())},onMonthHeaderAfterRender:function(a){a.getEl().on({click:this.onMonthHeaderClick,delegate:'.cal-month-header-day',scope:this})},onMonthHeaderClick:function(a,b){a.stopEvent();this.fireEvent('headerdayclick',this,Number(b.getAttribute('data-day-index')),a,b)},onMonthViewAfterRender:function(){var a=this.getEl();a.on({click:this.onWeekNumberClick,delegate:'.cal-day-week-num',scope:this});a.on({click:this.onDayNumberClick,delegate:'.cal-day-date-num',scope:this})},onWeekNumberClick:function(a,d){var b=a.getTarget('td').getAttribute('dayid');var c=Sch.util.Date.setDateToMidday(this.getDateFromDayId(b));this.fireEvent('weeknumberclick',this,c,a,d);return !1},onDayNumberClick:function(a,d){var b=a.getTarget('td').getAttribute('dayid');var c=Sch.util.Date.setDateToMidday(this.getDateFromDayId(b));this.fireEvent('daynumberclick',this,c,a,d);return !1},onDestroy:function(){Ext.container.Container.prototype.onDestroy.apply(this,arguments);Ext.destroy([this.eventEditor,this.eventList,this.eventMenu,this.dayMenu,this.dragDrop,this.dragResize,this.dragSelector]);this.dayCache=null},prepareTemplate:function(a,c){var b=this;if(typeof b[a]==='string'){b[a]=new Ext.XTemplate(b[a])}b[a]=b[a]||Ext.create(c)},getDragDropProxy:function(){if(this.dragDropProxyEl){return this.dragDropProxyEl}this.dragDropProxyEl=this.getEl().insertFirst({cls:Cal.util.DragResize.proxyCls});return this.dragDropProxyEl},afterRender:function(){Ext.container.Container.prototype.afterRender.apply(this,arguments);this.setupDragDrop();this.initEvents();this.selModel=this.eventTpl.selModel=new Cal.selection.Model({view:this})},initEventListEvents:function(){var a=this.getEventList();a.el.on({click:this.handleEventInteraction,dblclick:this.handleEventInteraction,contextmenu:this.handleEventInteraction,longpress:this.handleEventInteraction,scope:this,delegate:this.eventSelector})},setupEventList:function(){this.eventList=Ext.create(Ext.apply({xclass:'Cal.tip.EventList',monthView:this,dateFormat:this.eventListDateFormat},this.eventListConfig));this.eventList.on('afterrender',this.initEventListEvents,this)},getEventList:function(a){if(!a&&!this.eventList){this.setupEventList()}return this.eventList},onEventOverflowElClick:function(b){var c=this.getDateFromDomEvent(b);var a=this.getEventList();a.setDate(c);if(!a.isVisible()){a.show()}a.alignTo(b.getTarget());a.doConstrain(this.monthview.getEl())},onResize:function(h,g,f){Ext.container.Container.prototype.onResize.apply(this,arguments);var a=1;var e=this.monthview.getEl();var c=e.getHeight()/6;var b=c-this.eventNameHeight-this.eventHeight;if(b>0){a=Math.floor(b/this.eventHeight)}if(a!==this.eventsPerCell){var d=this.eventsPerCell;this.setEventsPerCell(a);this.refresh();this.fireEvent('eventspercellchange',this,a,d)}else {this.refreshCellCache()}},initEvents:function(){this.el.on({click:this.handleDayInteraction,dblclick:this.handleDayInteraction,contextmenu:this.handleDayInteraction,longpress:this.handleDayInteraction,scope:this,delegate:'.'+this.dayCls});this.el.on({click:this.handleEventInteraction,dblclick:this.handleEventInteraction,contextmenu:this.handleEventInteraction,longpress:this.handleEventInteraction,scope:this,delegate:this.eventSelector});this.el.on({click:this.onEventOverflowElClick,scope:this,delegate:this.eventOverflowElSelector});this.relayEvents(this.dragSelector,['beforeeventdragcreatestart','beforerangeselect','rangeselect']);this.relayEvents(this.dragDrop,['beforeeventdragstart','eventdragstart','eventvaliddrop','eventinvaliddrop','aftereventdrop']);this.relayEvents(this.dragResize,['beforeeventresizestart','eventresizestart','eventvalidresize','eventinvalidresize','aftereventresize']);if(this.createEventTrigger){this.on(this.createEventTrigger,this.onCreateNewEvent,this)}if(this.editorEventTrigger){this.on(this.editorEventTrigger,this.onShowEventEditor,this)}if(this.eventMenuTrigger){this.on(this.eventMenuTrigger,this.onEventMenu,this)}if(this.dayMenuTrigger){this.on(this.dayMenuTrigger,this.onDayMenu,this)}},onCreateNewEvent:function(c,a,b){if(Ext.fly(b.target).is('.cal-week-row-background-day')){this.createNewEvent(a)}},onShowEventEditor:function(c,a,b){this.showEventEditor(a,b.getTarget(this.eventSelector))},getEventEditor:function(a){if(!a&&!this.eventEditor){this.eventEditor=Ext.create(Ext.apply({xtype:'calendar_eventeditorwindow'},this.eventEditorConfig));this.eventEditor.initEditor(this,this.eventEditor.editor)}return this.eventEditor},showEventEditor:function(b,c,a){var d=this.getEventEditor();d.showForEvent(b,c,a)},createNewEvent:function(b,h,d,g){b=b||new Date();var c=Sch.util.Date;var a=new this.eventStore.model();var i=d?c.DAY:c.HOUR;var f=new Date(b.getFullYear(),b.getMonth(),b.getDate(),d?0:(new Date()).getHours());a.beginEdit();a.setName(this.L('newEvent'));a.setStartEndDate(f,h||c.add(f,i,1));var e=this.eventStore.getResourceStore().first();if(e){a.setResourceId(e.getId())}a.endEdit();this.eventStore.add(a);if(g!==!1){var j=this.getElementsFromEventRecord(a).first();this.showEventEditor(a,j,!0)}return a},deleteEvent:function(a){this.eventStore.remove(a)},duplicateEvent:function(b){var a=b.getData();delete a.Id;this.eventStore.add(a)},getEventMenu:function(a){if(!a&&!this.eventMenu){this.eventMenu=Ext.create(Ext.apply({xclass:'Cal.menu.Event',resourceStore:this.getResourceStore(),viewModel:this.getViewModel(),monthView:this},this.eventMenuConfig))}return this.eventMenu},onEventMenu:function(d,c,b){b.stopEvent();var a=this.getEventMenu();a.setTargetEl(b.getTarget(this.eventSelector));a.setEventRecord(c);a.showAt(b.getXY())},getDayMenu:function(a){if(!a&&!this.dayMenu){this.dayMenu=Ext.create(Ext.apply({xclass:'Cal.menu.Day',resourceStore:this.getResourceStore(),eventStore:this.getEventStore(),viewModel:this.getViewModel(),monthView:this},this.dayMenuConfig))}return this.dayMenu},onDayMenu:function(d,c,b){b.stopEvent();var a=this.getDayMenu();a.setDate(c);a.showAt(b.getXY())},onEventMouseOver:function(c,a){if(a!==this.hoveredEventNode){var b=this.getEventRecordFromElement(a);this.hoveredEventNode=a;Ext.fly(a).addCls(this.eventCls+'-hover');this.fireEvent('eventmouseenter',this,b,c)}},onEventMouseOut:function(a){if(this.hoveredEventNode){if(!a.within(this.hoveredEventNode,!0,!0)){Ext.fly(this.hoveredEventNode).removeCls(this.eventCls+'-hover');this.fireEvent('eventmouseleave',this,this.getEventRecordFromElement(this.hoveredEventNode),a);this.hoveredEventNode=null}}},handleEventInteraction:function(a,c){var b=this.getEventRecordFromElement(c);this.fireEvent('event'+a.type,this,b,a)},handleDayInteraction:function(a){var b=Ext.get(a.target);if(b.hasCls(this.dayCls)||b.parent(this.daySelector)){var c=this.getDateFromDomEvent(a);this.fireEvent('day'+a.type,this,c,a)}},getDayInfo:function(a){if(a instanceof Date){a=this.getDayIdFromDate(a)}return this.dayCache[a]},generateMonthData:function(g){this.dayCache={};var b=Sch.util.Date;var a=new Date(g.getFullYear(),g.getMonth(),1,12);var e=0;var f=[];a=b.getWeekStartDate(a,this.weekStartDay);for(var c=0;c<6;c++){var h=[];var i=b.getWeekNumber(a);var j=b.getWeekStartDate(a,this.weekStartDay);var k=b.getWeekEndDate(a,this.weekEndDay);for(var d=0;d<7;d++){if(!(this.hideNonWorkingDays&&a.getDay() in this.nonWorkingDays)){h.push(this.getDayRenderData(a,e,d));e++}a=b.add(a,b.DAY,1)}f.push({weekNumber:i,weekIndex:c,startDate:j,endDate:k,days:h})}return f},getDayIdFromDate:function(a){return Ext.Date.format(a,'Ymd')},getDateFromDayId:function(a){return Ext.Date.parse(a,'Ymd')},getDayRenderData:function(k,j,n){var c=Sch.util.Date;var p=new Date();var a=c.setDateToMidday(k,!0);var e=a.getDay();var g=a.getMonth();var f=a.getDate();var o=c.isSameDate(a,p);var m=a.getMonth()!==this.startDate.getMonth();var i=this.getDayIdFromDate(a);var h=c.setDateToMidnight(k,!0);var l=c.add(h,c.DAY,1);var b;if(e!==this.weekStartDay){b=this.eventStore.getEventsByStartDate(a)}else {b=this.eventStore.getEventsInTimeSpan(h,l).getRange()}b.sort(Cal.util.EventSorter.defaultSorterFn);var d={id:i,dayId:i,date:a,dayIndex:e,cellIndex:j,dayCounter:n,name:f===1?Ext.Date.getShortMonthName(g)+' 1':f,day:f,monthIndex:g,allEvents:b,loopIndex:0,overflowCount:b.length,isToday:o,isOtherMonth:m,isNonWorking:e in this.nonWorkingDays,cls:'',style:''};if(this.dayCellRenderer){this.dayCellRenderer(a,d)}this.dayCache[d.dayId]=this.dayCache[j]=d;return d},getDayRangeSelectorFromDate:function(b,c){var a=new Sch.model.Range({StartDate:b,EndDate:c});return Ext.Array.map(a.getDates(),function(a){return '.cal-week-row-background-day-'+this.getDayIdFromDate(a)},this).join(',')},getDayRangeSelectorFromDayIndex:function(a,b,f){var c=[];var e=a<b?a:b;var g=a<b?b:a;for(var d=e;d<=g;d++){c.push('.cal-week-row-background-day-index-'+d)}return f===!1?c:c.join(',')},getDateFromDomEvent:function(b){var a=b.getTarget('td');return this.getDateFromDomElement(a)},getDateFromDomElement:function(c){var a=c.getAttribute('dayid');if(a){var b=this.getDayInfo(a).date;return new Date(b.getTime())}},getDayCellFromDate:function(d,b){var c=this.getDayIdFromDate(d);var a=this.getDayInfo(c);return a?this.getEl().down('.cal-week-row-background-day-'+a.id,b):null},getDayCellIndexFromDate:function(b){var a=this.getDayCellFromDate(b);return a?parseInt(a.getAttribute('cellIndex'),10):null},getDayCellIndexFromPosition:function(f,g){var b=this.monthview.getBox();if(f>b.right||f<b.left||g>b.bottom||g<b.top){return null}var a=this.getCellsCache();var c;if(a){for(var e=1;e<a.horizontal.length;e++){if(f<a.horizontal[e]){break}}for(var d=1;d<a.vertical.length;d++){if(g<a.vertical[d]){break}}c=(d-1)*this.daysInWeek+(e-1);if(c<0||c>this.daysInMonth-1){return null}}return c},getDateFromPosition:function(b,c,d){if(d){b=b+this.monthview.getX();c=c+this.monthview.getY()}var a=this.getDayCellIndexFromPosition(b,c);if(Ext.isNumber(a)){return this.getDayInfo(a).date}else {return a}},setupDragDrop:function(){this.dragResize=new Cal.util.DragResize({el:this.el.dom,view:this,listeners:{beforeeventresizestart:this.onBeforeResizeStart,eventvalidresize:this.onValidResize,eventinvalidresize:this.onInvalidResize,scope:this}});this.dragDrop=new Cal.util.DragDrop({el:this.el.dom,view:this,listeners:{beforeeventdragstart:this.onBeforeDragStart,eventvaliddrop:this.onValidDrop,eventinvaliddrop:this.onInvalidDrop,scope:this}});this.dragSelector=new Cal.util.DragSelection({el:this.el.dom,view:this,listeners:{beforeeventdragcreatestart:this.onBeforeDragCreateStart,rangeselect:this.onRangeSelect,scope:this}})},onEventBarSelect:function(a){Ext.Array.each(this.getElementsFromEventRecord(a),function(b){b.addCls(this.eventCls+'-selected')},this)},onEventBarDeselect:function(a){Ext.Array.each(this.getElementsFromEventRecord(a),function(b){b.removeCls(this.eventCls+'-selected')},this)},onBeforeDragStart:function(b,a){return a.isDraggable()!==!1},onValidDrop:function(d,c,a){var b=c.getStartDate();if(b.getFullYear()!==a.getFullYear()||b.getMonth()!==a.getMonth()||b.getDate()!==a.getDate()){c.setStartDate(a,!0)}else {this.refresh()}},onInvalidDrop:function(){this.refresh()},onBeforeResizeStart:function(b,a){return a.isResizable()!==!1},onValidResize:function(i,a,b,c){var f=Sch.util.Date;var g=a.getStartDate();var h=a.getEndDate();var d=!f.isSameDate(b,g);var e=!f.isSameDate(c,h);if(d&&e){a.setStartEndDate(b,c)}else {if(d){a.setStartDate(b)}else {if(e){a.setEndDate(c)}else {this.refresh()}}}},onInvalidResize:function(){this.refresh()},onBeforeDragCreateStart:function(){return !0},onRangeSelect:function(c,a,b){this.createNewEvent(a,b,!0)},getElementsFromEventRecord:function(c){var b='[eventId="'+c.internalId+'"]';var a=this.el.select(b,!0);if(this.eventList.el){a.add(this.eventList.el.select(b,!0))}return a},getEventRecordFromDomId:function(a){return this.getEventRecordFromElement(a)},getEventRecordFromElement:function(a){if(!a){return}var b=Ext.fly(a).getAttribute('eventId');return this.eventStore.getByInternalId(b)},setEventsPerCell:function(a){this.weekRowTpl.eventsPerCell=a;this.eventsPerCell=a},onEventAddRemoveUpdate:function(){this.refresh()},getEventStoreListeners:function(){return {scope:this,refresh:this.onEventAddRemoveUpdate,clear:this.onEventAddRemoveUpdate,add:this.onEventAddRemoveUpdate,remove:this.onEventAddRemoveUpdate,update:this.onEventAddRemoveUpdate,nodeinsert:this.onEventAddRemoveUpdate,nodeappend:this.onEventAddRemoveUpdate}},refresh:function(){Ext.destroy(this.dragDropProxyEl);this.dragDropProxyEl=null;var b=this.generateMonthData(this.startDate);this.monthview.setData(b);var a=this.getEventList();if(a.isVisible()){a.refresh()}this.refreshCellCache();this.fireEvent('refresh',this)},refreshCellCache:function(){delete this.cellsCache;this.getCellsCache()},getCellsCache:function(){if(this.el&&!this.cellsCache){var c=[],b=[];var e=this.el.down('.cal-week-row');e.select('.cal-week-row-background-day').each(function(a){b.push(a.getLeft())},this);for(var a=0;a<7;a++){var d=this.el.down('.cal-week-row-background-day-index-'+a*7);if(d){c.push(d.getTop())}}this.cellsCache={horizontal:b,vertical:c}}return this.cellsCache},setStartDate:function(a){this.startDate=a;if(this.getEventEditor(!0)){this.getEventEditor().hide()}if(this.getEventList(!0)){this.getEventList().hide()}if(this.getEventMenu(!0)){this.getEventMenu().hide()}if(this.getDayMenu(!0)){this.getDayMenu().hide()}this.refresh();this.fireEvent('viewchange',this,a)},getEventStore:function(){return this.eventStore},setEventStore:function(b,e){var a=this,c=a.getEventStore(),d=a.getEventStoreListeners();if(!e&&c){a.mun(c,d);if(!b){a.eventStore=null}}a.eventStore=Ext.data.StoreManager.lookup(b);if(a.eventStore){a.mon(a.eventStore,d);a.eventStore.setResourceStore(a.getResourceStore());if(!e){a.selModel.bindStore(a.eventStore)}}if(a.eventStore&&a.rendered){this.fireEvent('eventstorechange',this,b,c);a.refresh()}},getResourceStore:function(){return this.resourceStore},setResourceStore:function(a,d){var b=this,c=b.getResourceStore();a=a&&Ext.StoreMgr.lookup(a)||null;b.getEventStore().setResourceStore(a);if(b.getEventEditor(!0)){b.getEventEditor().setResourceStore(a)}if(!d&&c){if(a!==c&&c.autoDestroy){c.destroy()}}if(a&&!d){b.selModel.bindStore(a)}if(a&&b.rendered){this.fireEvent('resourcestorechange',this,a,c);b.refresh()}b.resourceStore=a},highlightRangeByDate:function(d,b,a){a=a||this.highlightedDayCls;b=new Date(b-1);this.clearHighlightedDays(a);var c=this.getDayRangeSelectorFromDate(d,b);if(c){this.el.select(c).addCls(a)}},unhighlightRangeByDate:function(b,c,a){a=a||this.highlightedDayCls;this.el.select(this.getDayRangeSelectorFromDate(b,c)).removeCls(a)},highlightRangeByDayIndex:function(c,d,a){a=a||this.highlightedDayCls;this.clearHighlightedDays(a);var b=this.getDayRangeSelectorFromDayIndex(c,d);if(b){this.el.select(b).addCls(a)}},unhighlightRangeByDayIndex:function(b,c,a){a=a||this.highlightedDayCls;this.el.select(this.getDayRangeSelectorFromDayIndex(b,c)).removeCls(a)},clearHighlightedDays:function(a){a=a||this.highlightedDayCls;this.el.select('.'+a).removeCls(a)},isReadOnly:function(){return this.getReadOnly()},getSelectionModel:function(){return this.selModel}},0,['calendar_monthview'],['component','box','container','calendar_monthview'],{'component':!0,'box':!0,'container':!0,'calendar_monthview':!0},['widget.calendar_monthview'],[[Cal.mixin.Localizable.prototype.mixinId||Cal.mixin.Localizable.$className,Cal.mixin.Localizable]],[Cal.container,'Month'],0);Ext.apply(Cal,{VERSION:'%CALENDAR_VERSION%'});Ext.cmd.derive('Cal.panel.Calendar',Ext.Panel,{cls:'cal-view',layout:{type:'vbox',align:'stretch'},minWidth:400,minHeight:460,monthView:null,navigationToolbar:null,monthToolbar:null,calendarHeader:null,eventStore:{type:'calendar_eventstore'},resourceStore:{type:'calendar_resourcestore'},startDate:null,dayCellRenderer:null,eventRenderer:null,weekStartDay:1,hideNonWorkingDays:!1,showWeekNumber:!0,currentMonthFormat:'M Y',nonWorkingDays:{6:!0,0:!0},createEventTrigger:'daydblclick',editorEventTrigger:'eventdblclick',eventMenuTrigger:'eventcontextmenu',dayMenuTrigger:'daycontextmenu',eventListDateFormat:'l, M d',eventTemplateClass:'Cal.template.Event',dayNameTemplateClass:'Cal.template.DayName',weekRowTemplateClass:'Cal.template.WeekRow',hideNavigationBar:!1,navigationBarConfig:null,hideMonthBar:!1,monthBarConfig:null,eventListConfig:null,eventEditorConfig:null,eventMenuConfig:null,dayMenuConfig:null,initComponent:function(){var a=this;var d=a.startDate||new Date();a.startDate=new Date(d.getFullYear(),d.getMonth(),1,12);a.eventStore=Ext.StoreManager.lookup(a.eventStore);a.resourceStore=Ext.StoreManager.lookup(a.resourceStore);a.hideNonWorkingDays=!1;a.items=[];if(!a.hideNavigationBar){var b=a.navigationToolbar=Ext.create(Ext.apply({xtype:'calendar_navigationtoolbar',startDate:a.startDate,currentMonthFormat:a.currentMonthFormat},a.navigationBarConfig));b.on({clickprevious:function(){a.shiftPrevious()},clicknext:function(){a.shiftNext()},clicktoday:function(){a.setStartDate(new Date())},clickcreatenew:function(){a.setStartDate(new Date());a.createNewEvent()}});a.items.push(b)}a.items.push({xtype:'calendar_monthview',startDate:a.startDate,eventStore:a.eventStore,resourceStore:a.resourceStore,dayCellRenderer:a.dayCellRenderer,eventRenderer:a.eventRenderer,nonWorkingDays:a.nonWorkingDays,hideNonWorkingDays:a.hideNonWorkingDays,weekStartDay:a.weekStartDay,showWeekNumber:a.showWeekNumber,createEventTrigger:a.createEventTrigger,editorEventTrigger:a.editorEventTrigger,eventMenuTrigger:a.eventMenuTrigger,dayMenuTrigger:a.dayMenuTrigger,eventTemplateClass:a.eventTemplateClass,dayNameTemplateClass:a.dayNameTemplateClass,weekRowTemplateClass:a.weekRowTemplateClass,eventListDateFormat:a.eventListDateFormat,eventDetailsConfig:a.eventDetailsConfig,eventListConfig:a.eventListConfig,eventMenuConfig:a.eventMenuConfig,dayMenuConfig:a.dayMenuConfig});if(!a.hideMonthBar){var c=a.monthToolbar=Ext.create(Ext.apply({xtype:'calendar_monthbar',startDate:a.startDate},a.monthBarConfig));c.on('change',a.onMonthNavChange,a);a.items.push(c)}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.calendarHeader=a.down('calendar_monthheader');a.monthView=a.down('calendar_monthview')},onMonthNavChange:function(b,a){if(this.startDate.getTime()!=a){this.setStartDate(a)}},initEvents:function(){this.relayEvents(this.monthView,['dayclick','daydblclick','daycontextmenu','daylongpress','eventclick','eventdblclick','eventcontextmenu','eventlongpress','beforerangeselect','rangeselect','eventspercellchange','refresh','viewchange','headerdayclick','weeknumberclick','daynumberclick','beforeeventdragstart','eventdragstart','eventvaliddrop','eventinvaliddrop','aftereventdrop','beforeeventresizestart','eventresizestart','eventvalidresize','eventinvalidresize','aftereventresize','beforeeventdragcreatestart','beforerangeselect','rangeselect'])},setStartDate:function(a){this.startDate=a=new Date(a.getFullYear(),a.getMonth(),1,12);if(this.navigationToolbar){this.navigationToolbar.setStartDate(a)}if(this.monthToolbar){this.monthToolbar.setStartDate(a)}this.monthView.setStartDate(a)},getStartDate:function(){return new Date(this.startDate.getTime())},shiftPrevious:function(){var a=this.getStartDate();a.setMonth(a.getMonth()-1);this.setStartDate(a)},shiftNext:function(){var a=this.getStartDate();a.setMonth(a.getMonth()+1);this.setStartDate(a)},setEventStore:function(a){this.getView().setEventStore(a)},getEventStore:function(){return this.getView().getEventStore()},getResourceStore:function(){return this.getView().getResourceStore()},setResourceStore:function(a){this.getView().setResourceStore(a)},highlightRangeByDate:function(a,b){this.monthView.highlightRangeByDate(a,b)},unhighlightRangeByDate:function(a,b){this.monthView.unhighlightRangeByDate(a,b)},highlightRangeByDayIndex:function(a,b){this.monthView.highlightRangeByDayIndex(a,b)},unhighlightRangeByDayIndex:function(a,b){this.monthView.unhighlightRangeByDayIndex(a,b)},clearHighlightedDays:function(){this.monthView.clearHighlightedDays()},setWeekendsVisible:function(a){this.hideNonWorkingDays=this.calendarHeader.hideNonWorkingDays=this.monthView.hideNonWorkingDays=!a;this.monthView.refresh()},getSelectionModel:function(){return this.monthView.getSelectionModel()},createNewEvent:function(c,d,b,a){return this.monthView.createNewEvent(c,d,b,a)},getDateFromPosition:function(b,c,a){return this.monthView.getDateFromPosition(b,c,a)},getDayCellFromDate:function(b,a){return this.monthView.getDayCellFromDate(b,a)},getView:function(){return this.monthView}},0,['calendar_view'],['component','box','container','panel','calendar_view'],{'component':!0,'box':!0,'container':!0,'panel':!0,'calendar_view':!0},['widget.calendar_view'],0,[Cal.panel,'Calendar'],0);Ext.cmd.derive('MeetingsCalendar.store.EventStore',Cal.store.Event,{upsertToServer:function(c,a,b,d){this.crudManager.upsertMeeting(a,b,d).then(function(e){if(b){c.getById(a.id).set('Id',e.recordId,{dirty:!1,silent:!0});c.getById(a.id).set('waitingForId',!1,{dirty:!1,silent:!0})}},function(e){})},listeners:{update:function(c,a,e,d,f,g){var b=a.data.update?!1:!0;delete a.data.update;this.upsertToServer(c,a,b,!1)},add:function(c,a,e,d){var b=a[0].data.rolling?!0:!1;this.upsertToServer(c,a[0],!0,b)}}},0,0,0,0,['store.meetingsCalendar_eventstore'],0,[MeetingsCalendar.store,'EventStore'],0);Ext.cmd.derive('MeetingsCalendar.window.EventEditor',Ext.Window,{cls:'MeetingsCalendar-eventeditor-window extjsWizardWrapper',layout:'fit',alwaysOnTop:!0,closeAction:'hide',modal:!0,resizable:!1,width:400,timeFormat:'H:i',dateFormat:'d-m-Y',typeOrStage:'Mtype',editOrNew:'new',recordPointer:null,setRecordPointer:function(a){this.recordPointer=a},setMode:function(b,a){this.typeOrStage=b||'Mtype';this.editOrNew=a||'new';if(this.typeOrStage=='Mtype'){this.stageCombo.setHidden(!0);this.typeCombo.setHidden(!1);this.nameField.setHidden(!1);this.nameField.setDisabled(!0)}else {if(this.typeOrStage=='Stage'){this.stageCombo.setHidden(!1);this.typeCombo.setHidden(!0);this.nameField.setHidden(!1);this.nameField.setDisabled(!0)}else {if(this.typeOrStage=='notMeeting'){this.stageCombo.setHidden(!0);this.typeCombo.setHidden(!0);this.nameField.setHidden(!0)}else {this.stageCombo.setHidden(!0);this.typeCombo.setHidden(!0);this.nameField.setHidden(!1);this.nameField.setDisabled(!0)}}}if(a!='new'){this.stageCombo.setDisabled(!0);this.typeCombo.setDisabled(!0)}else {this.stageCombo.setDisabled(!1);this.typeCombo.setDisabled(!1)}this.setTitle(this.typeOrStage=='notMeeting'?this.L('Schedual'):this.typeOrStage=='Mtype'?this.L('MeetingByType'):this.L('MeetingByStage'))},setStartDate:function(a){this.startDateField.setValue(a)},setEndDate:function(a){this.endDateField.setValue(a)},showRecord:function(a){this.setRecordPointer(a);this.show();this.center();this.loadRecord(a)},loadRecord:function(a){this.typeCombo.setValue(a.data.MeetingtypeId);this.stageCombo.setValue(a.data.StageId);this.nameField.setValue(a.data.Name);this.endDateField.setValue(a.data.EndDate);this.endTimeField.setValue(a.data.EndDate);this.startDateField.setValue(a.data.StartDate);this.startTimeField.setValue(a.data.StartDate)},initComponent:function(){Ext.apply(this,{closeToolText:this.L('closePanel'),buttons:this.buttons||this.buildButtons(),items:[{xtype:'container',margin:'5 5 5 5',defaults:{width:'100%'},border:!1,items:this.getDefaultFields()}]});Ext.window.Window.prototype.initComponent.apply(this,arguments);this.setMode(this.typeOrStage)},getDefaultFields:function(){this.nameField=new Ext.form.field.Text({fieldLabel:this.L('nameText'),selectOnFocus:!0,allowBlank:!1});var a={listeners:{change:function(a,b,c,d){a.up('window').nameField.setDisabled(!1);a.up('window').nameField.setValue(a.getRawValue())}}};this.typeCombo=new Ext.form.field.ComboBox(Ext.apply({fieldLabel:this.L('Type'),store:this.comboStores.meetingTypeStore,queryMode:'local',displayField:'name',valueField:'id',allowBlank:!1,forceSelection:!0,typeAhead:!0},a));this.stageCombo=new Ext.form.field.ComboBox(Ext.apply({fieldLabel:this.L('Stage'),store:this.comboStores.adminStagesStore,queryMode:'local',displayField:'name',valueField:'id',allowBlank:!1,forceSelection:!0,typeAhead:!0},a));this.buildDurationFields();return [this.typeCombo,this.stageCombo,this.nameField,{xtype:'container',layout:'hbox',margin:'0 0 10 0',items:[this.startDateField,this.startTimeField]},{xtype:'container',layout:'hbox',margin:'0 0 10 0',items:[this.endDateField,this.endTimeField]}]},buildButtons:function(){this.saveButton=new Ext.Button({text:this.L('saveText'),scope:this,handler:this.onSaveClick,cls:'submitButton'});this.cancelButton=new Ext.Button({text:this.L('cancelText'),scope:this,handler:this.onCancelClick,cls:'closeButton'});return [this.saveButton,this.deleteButton,this.cancelButton]},endDateConfig:{validator:function(d){var a=this.up('window');if(Ext.isEmpty(a.startDateField.getValue())||Ext.isEmpty(a.startTimeField.getValue())||Ext.isEmpty(a.endTimeField.getValue())||Ext.isEmpty(d)){return !1}else {var b=a.startDateField.getValue();var c=a.endDateField.getValue();if(b>c){return !1}else {return !0}}}},endTimeConfig:{validator:function(f){var a=this.up('window');if(Ext.isEmpty(a.startDateField.getValue())||Ext.isEmpty(a.startTimeField.getValue())||Ext.isEmpty(a.endDateField.getValue())||Ext.isEmpty(f)){return !1}else {var b=a.startDateField.getValue();var d=a.startTimeField.getValue();b.setHours(d.getHours());b.setMinutes(d.getMinutes());var c=a.endDateField.getValue();var e=a.endTimeField.getValue();c.setHours(e.getHours());c.setMinutes(e.getMinutes());if(b>c){return !1}else {return !0}}}},buildDurationFields:function(){this.startDateField=new Ext.form.field.Date(Ext.apply({fieldLabel:this.L('startDateText'),allowBlank:!1,format:this.dateFormat,formatText:'',flex:1,margin:'0 10 0 0'},this.startDateConfig||{}));this.startTimeField=new Ext.form.field.Time(Ext.apply({format:this.timeFormat,increment:30,formatText:'',width:90,allowBlank:!1},this.startTimeConfig||{}));this.endDateField=new Ext.form.field.Date(Ext.apply({fieldLabel:this.L('endDateText'),allowBlank:!1,format:this.dateFormat,formatText:'',flex:1,margin:'0 10 0 0'},this.endDateConfig||{}));this.endTimeField=new Ext.form.field.Time(Ext.apply({format:this.timeFormat,increment:30,formatText:'',width:90,allowBlank:!1},this.endTimeConfig||{}));return [this.startDateField,this.startTimeField,this.endDateField,this.endTimeField]},resetAllFields:function(){this.getFieldsArray().forEach(function(a){a.setValue();a.clearInvalid()})},getFieldsArray:function(){return [this.typeCombo,this.stageCombo,this.nameField,this.endDateField,this.endTimeField,this.startDateField,this.startTimeField]},onSaveClick:function(){if(this.getFieldsArray().every(function(a){if(a.isHidden()){return !0}else {return a.validate()}})){var d=this.startDateField.getValue();var h=this.startTimeField.getValue();d.setHours(h.getHours());d.setMinutes(h.getMinutes());var e=this.endDateField.getValue();var i=this.endTimeField.getValue();e.setHours(i.getHours());e.setMinutes(i.getMinutes());var c={};if(this.typeOrStage=='Mtype'){var g=this.typeCombo.findRecordByValue(this.typeCombo.getValue());c={MeetingtypeType:g.data.type,MeetingtypeId:g.data.id}}else {if(this.typeOrStage=='Stage'){var f=this.stageCombo.findRecordByValue(this.stageCombo.getValue());c={MeetingtypeType:f.data.MeetingtypeType,StageId:f.data.id}}else {c={MeetingtypeType:this.recordPointer.data.MeetingtypeType,StageId:this.recordPointer.data.StageId,MeetingtypeId:this.recordPointer.data.MeetingtypeId,id:this.recordPointer.data.Id,rolling:!0}}}var a=Object.assign({StartDate:d,EndDate:e,Name:this.nameField.getValue(),Type:'MEETING',MeetingtypeType:null,MeetingtypeId:null,waitingForId:!0,StageId:null},c);if(this.editOrNew=='new'){this.calendar.eventStore.add(a)}else {this.calendar.eventStore.getById(this.recordPointer.id).set(Object.assign({update:!0},a))}var b=this.calendar.up('panel').getViewModel();if(a.MeetingtypeType==null||Ext.isEmpty(a.MeetingtypeType)){b.set('filtersCount.mTypeOther',b.get('filtersCount.mTypeOther')+1)}else {b.set('filtersCount.'+a.MeetingtypeType,b.get('filtersCount.'+a.MeetingtypeType)+1)}if(this.editOrNew=='new'){b.set('filtersCount.MEETING',b.get('filtersCount.MEETING')+1)}this.resetAllFields();this.close()}},onCancelClick:function(){this.resetAllFields();this.close()},listeners:{close:function(a,b){this.resetAllFields()}}},0,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.window,'EventEditor'],0);Ext.cmd.derive('MeetingsCalendar.template.Event',Ext.XTemplate,{getUserTplData:null,selModel:null,text:'<div eventId="{id}" class="cal-event {cls}" style="{style}" tabindex="-1"><tpl if="resizable && startThisWeek"><div class="cal-event-resizable-handle cal-event-resizable-handle-start"></div></tpl><span class="{bulletCls}" style="{bulletStyle}"></span><span class="cal-event-body">{name}</span><tpl if="resizable && endThisWeek"><div class="cal-event-resizable-handle cal-event-resizable-handle-end"></div></tpl></div>',constructor:function(a){Ext.apply(this,a);Ext.XTemplate.prototype.constructor.call(this,this.text)},renderEventRecord:function(a,k,e){var h=a.isScheduled()&&!Sch.util.Date.isSameDate(a.getStartDate(),a.getEndDate()),i=a.getResource(),c=i&&i.getColor()||'',j='',b=e&&e.cls||'',f='',g=a.isDraggable()!==!1;bulletCls='cal-event-bullet';if(h){b+=' cal-event-multiday '}else {b+=' cal-event-singleday '}if(g){b+=' cal-event-draggable '}if(this.selModel&&this.selModel.isSelected(a)){b+=' cal-event-selected '}if(c){if(h){j+=' background-color: '+c+'; border-color: '+c+'; '}else {f+=' background-color: '+c+'; '}}var d=Ext.apply({id:a.internalId,name:a.getName(),style:j,bulletStyle:f,resizable:!1,draggable:g,bulletCls:''},e||{});d.cls=b;if(this.getUserTplData){this.getUserTplData(a,d,k)}return this.apply(d)}},1,0,0,0,0,0,[MeetingsCalendar.template,'Event'],0);Ext.cmd.derive('MeetingsCalendar.template.WeekRow',Ext.XTemplate,{dayNameTpl:null,eventTpl:null,eventsPerCell:1,text:'<tpl for="."><div weekid="{weekNumber}" class="cal-week-row cal-week-row-{weekNumber} cal-week-row-index-{#}"><table cellpadding="0" cellspacing="0" class="cal-week-row-background" ><tr><tpl for="days"><td dayid="{dayId}" cellIndex="{cellIndex}" style="{style}" class="cal-week-row-background-day cal-week-row-background-day-{dayId} cal-week-row-background-day-index-{cellIndex} {cls} <tpl if="isNonWorking">cal-week-row-background-day-nonworking</tpl>" >{[this.renderDayNames(values, parent, xindex)]}</td></tpl></tr></table><table cellpadding="0" cellspacing="0" class="cal-week-row-events-row" ><tr><tpl for="days"><td dayid="{dayId}" class="cal-day-date-num-container"></td></tpl></tr>{[this.renderEvents(values)]}<tr><tpl for="days"><tpl if="overflowCount &gt; 0"><td dayid="{dayId}"><span class="cal-event-more-events">{overflowCount}</span></td><tpl else><td dayid="{dayId}">&nbsp;</td></tpl></tpl></tr><tr><tpl for="days"><td dayid="{dayId}">&nbsp;</td></tpl></tr></table></div></tpl>',constructor:function(a){Ext.apply(this,a);Ext.XTemplate.prototype.constructor.call(this,this.text)},renderDayNames:function(a,c,d){var b='';if(a.isToday){b+=' cal-day-date-num-today '}if(a.isOtherMonth){b+=' cal-day-date-num-other-month '}b+=a.cls;var e={weekNumber:d===1?c.weekNumber:'',cls:b,style:a.style,name:a.name};return this.dayNameTpl.apply(e)},renderEvents:function(b){var u=this;var a=Sch.util.Date,e='';for(var n=0;n<this.eventsPerCell;n++){e+='<tr>';for(var h=0;h<b.days.length;){var c=b.days[h],i=1,d=c.allEvents[c.loopIndex];if(d){c.overflowCount--;c.moreText=u.L('more');c.loopIndex++;var j=d.getStartDate(),f=d.getEndDate(),o=!a.isSameDate(j,f),m=o&&d.isResizable()!==!1;if(o){f=new Date(f-1)}var s=a.setDateToMidday(j,!0),t=a.setDateToMidday(f,!0),q=a.max(s,b.startDate),r=a.min(t,b.endDate),k=a.isEarlierDate(j,b.startDate),l=a.isLaterDate(f,b.endDate),g='';if(k){g+=' cal-event-starts-earlier-week '}if(l){g+=' cal-event-ends-future-week '}if(m){g+=' cal-event-resizable '}var p={cls:g,resizable:m,startThisWeek:!k,endThisWeek:!l};i=a.getDurationInUnit(q,r,a.DAY)+1;e+='<td colspan="'+i+'">'+this.eventTpl.renderEventRecord(d,c,p)+'</td>'}else {e+='<td>&nbsp;</td>'}h=h+i}e+='</tr>'}return e}},1,0,0,0,0,[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.template,'WeekRow'],0);Ext.cmd.derive('MeetingsCalendar.view.Calendar',Cal.panel.Calendar,{controller:'calendarController',hideNavigationBar:!0,createEventTrigger:null,editorEventTrigger:null,rtl:!1,currentLocale:'En',crudManager:null,customeEditor:null,hideMonthBar:!0,eventRenderer:function(c,a){var d=this.up('panel').up('panel').getController().colors;if(c.data.Type==='MEETING'){a.bulletCls='fa fa-calendar';a.cls='meeting-cls';var b=d.find(function(b){return b.typeIdentifier==c.data.MeetingtypeType});if(b&&b.hex){a.style='color: '+b.hex+';'}}else {if(c.data.Type==='EVENT'){a.bulletCls='fa fa-calendar-check-o';a.cls='event-cls'}else {a.bulletCls='fa fa-bell';a.cls='task-cls'}}},initComponent:function(){var a=this;if(a.currentLocale=='He'){Ext.apply(a,{weekStartDay:0,nonWorkingDays:{6:!0,5:!0},eventListConfig:{rtl:!0},eventMenuConfig:{rtl:!0,calendar:a}})}Ext.apply(a,{eventTemplateClass:'MeetingsCalendar.template.Event',weekRowTemplateClass:'MeetingsCalendar.template.WeekRow',dayMenuConfig:{rtl:a.currentLocale=='He',items:[{text:a.L('NewMeetingByType'),handler:function(b,c,d){a.customeEditor.setMode('Mtype','new');a.customeEditor.setStartDate(this.up().date);a.customeEditor.setEndDate(this.up().date);a.customeEditor.show()}},{text:a.L('NewMeetingByStage'),handler:function(b,c,d){a.customeEditor.setMode('Stage','new');a.customeEditor.setStartDate(this.up().date);a.customeEditor.setEndDate(this.up().date);a.customeEditor.show()}}]},eventStore:{type:'meetingsCalendar_eventstore',crudManager:this.crudManager}});Cal.panel.Calendar.prototype.initComponent.apply(this,arguments);Ext.ComponentQuery.query('calendar_monthview')[0].onRangeSelect=function(){}},constructor:function(a){var b=this;b.rtl=a.rtl,b.currentLocale=a.currentLocale;b.crudManager=a.crudManager;Cal.panel.Calendar.prototype.constructor.apply(this,arguments)},openEditorByRecordType:function(a){if(a.data.Type!='MEETING'){this.customeEditor.setMode('notMeeting','edit')}else {if(Ext.isEmpty(a.data.StageId)){this.customeEditor.setMode('Mtype','edit')}else {this.customeEditor.setMode('Stage','edit')}}this.customeEditor.showRecord(a)},EventcontextmenuModifeid:!1,listeners:{viewchange:function(b,a,c){b.up('meetingCalendarViewPanel').viewModel.set('date',a)},eventcontextmenu:function(a,b,d,c){if(!this.EventcontextmenuModifeid){this.EventcontextmenuModifeid=!0;if(b.data.waitingForId){a.eventMenu.setDisabled(!0)}a.eventMenu.items.items.forEach(function(e){e.setVisible(!1)});a.eventMenu.add([{text:this.L('ShowDetails'),disabled:b.data.Type!='MEETING'?!0:!1,itemId:'ShowDetailsMenu',handler:function(h){var f=this.up().eventRecord;var e=Ext.ComponentQuery.query('meetingsCalendar')[0];var g=new Ext.Window({width:'98%',height:'98%',closeToolText:e.L('closePanel'),modal:!0,resizable:!1,hideOnMaskTap:!0,cls:'extjsWizardWrapper',closeAction:'destroy',title:f.data.Name,titleAlign:'center',items:[Ext.create('issuesPkgs.view.IssuesView',{clientInstance:window.client,projectId:e.crudManager.projectId,record:f,locale:e.currentLocale,queryMode:'byMeeting'})]});g.show()}},{text:this.L('ScheduleInfo'),handler:function(f){var e=this.up().eventRecord;Ext.ComponentQuery.query('meetingsCalendar')[0].openEditorByRecordType(e)}},{text:this.L('RollingMeeting'),itemId:'RollingMeetingMenu',disabled:b.data.Type!='MEETING'?!0:!1,handler:function(){var f=this.up().eventRecord;var e=Ext.ComponentQuery.query('meetingsCalendar')[0];e.customeEditor.setMode('Rolling','new');e.customeEditor.showRecord(f)}}])}else {if(b.data.Type!='MEETING'){a.eventMenu.query('#ShowDetailsMenu')[0].setDisabled(!0);a.eventMenu.query('#RollingMeetingMenu')[0].setDisabled(!0)}else {a.eventMenu.query('#ShowDetailsMenu')[0].setDisabled(!1);a.eventMenu.query('#RollingMeetingMenu')[0].setDisabled(!1)}if(b.data.waitingForId){a.eventMenu.setDisabled(!0)}else {a.eventMenu.setDisabled(!1)}}},eventdblclick:function(b,a,d,c){b.up().openEditorByRecordType(a)},dayclick:function(a,c,d,b){if(a.dayMenu){a.dayMenu.setVisible(!1)}if(a.eventMenu){a.eventMenu.setVisible(!1)}}}},1,['meetingsCalendar'],['component','box','container','panel','calendar_view','meetingsCalendar'],{'component':!0,'box':!0,'container':!0,'panel':!0,'calendar_view':!0,'meetingsCalendar':!0},['widget.meetingsCalendar'],[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.view,'Calendar'],0);Ext.cmd.derive('MeetingsCalendar.store.CrudManager',Ext.Base,{clientInstance:null,projectId:null,makeRequest:function(b){var c=this;var a=new Ext.Deferred();c.clientInstance.apexRemoteAction('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(b)}));return a.promise},upsertMeeting:function(a,h,d){var b=this;var e=d||!h?a.data.Id:null;var g=Ext.isEmpty(a.data.StageId)?null:a.data.StageId;var c=Ext.isEmpty(a.data.MeetingtypeId)?null:a.data.MeetingtypeId;var f={className:'MeetingRequest',actionName:'upsertMeeting',meetingId:e,meetingTypeId:c,stageId:g,startDateTime:a.data.StartDate,endDateTime:a.data.EndDate,name:a.data.Name,projectId:b.projectId,pageName:null,pageSize:100,offset:null,initPage:null};return b.makeRequest(f)},fetchFromServer:function(){var a=this;var b={className:'MeetingRequest',actionName:'getMeetings',projectId:a.projectId,stageId:null,pageName:null,pageSize:100,offset:null,initPage:null};return a.makeRequest(b)},constructor:function(a){var b=this;b.projectId=a.projectId;b.clientInstance=a.clientInstance;this.callParent(arguments)}},1,0,0,0,0,0,[MeetingsCalendar.store,'CrudManager'],0);Ext.cmd.derive('MeetingsCalendar.view.MeetingCalendarView',Ext.panel.Panel,{cls:'meetingCalendarViewPanel',rtl:!1,currentLocale:'en',crudManager:null,viewModel:'MeetingsCalendarModel',controller:'MeetingCalendarViewController',initComponent:function(){var a=this;var b=a.rtl?'text-align: left;':'text-align: right;';Ext.apply(a,{items:[{xtype:'container',layout:'hbox',region:'center',items:[{itemId:'FilterPanel',width:190,title:a.L('Filters'),bodyStyle:'padding: 5px;',layout:'vbox',xtype:'panel',items:[{xtype:'fieldcontainer',defaultType:'checkboxfield',itemId:'filterMeetingTypeContainer',fieldDefaults:{handler:function(a,c){var b=this.nextNode('meetingsCalendar').getController();b.applyFilter(a.filterField,a.filterValue,c)}}},{xtype:'fieldcontainer',defaultType:'checkboxfield',itemId:'filterTypeContainer',fieldDefaults:{handler:function(a,c){var b=this.nextNode('meetingsCalendar').getController();b.applyFilter(a.filterField,a.filterValue,c)}},items:[{xtype:'label',text:a.L('OtherFilters'),style:{fontWeight:'bold',textDecoration:'underline'}}]}]},{xtype:'splitter'},{padding:10,xtype:'meetingsCalendar',crudManager:a.crudManager,rtl:a.rtl,currentLocale:a.currentLocale,flex:4}]}],dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'button',cls:'statusFilterBtn',text:a.L('Status'),width:120,itemId:'statusFilterMenu',menu:[{xtype:'menu',width:100}]},{xtype:'MeetingsCalendar-treepicker',displayField:'text',queryMode:'local',width:200,emptyText:this.L('NoAreaFilters'),store:Ext.create('MeetingsCalendar.store.AreaTreeStore')},'->',{xtype:'segmentedbutton',allowToggle:!1,height:35,defaults:{focusable:!1},items:[{text:'<',handler:function(){this.up('panel').down('meetingsCalendar').shiftPrevious()}},{text:a.L('Today'),handler:function(){this.up('panel').down('meetingsCalendar').setStartDate(new Date())}},{text:'>',handler:function(){this.up('panel').down('meetingsCalendar').shiftNext()}}]},'->',{xtype:'component',cls:'cal-current-month',bind:{html:'{dateLabel}'},width:140,style:b}]}]});if(a.currentLocale=='He'){initLocaleHE()}else {initLocaleEN()}Ext.on('resize',function(c,b){a.setSize(c-45,b)});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';MeetingsCalendar.locale[a.currentLocale].apply();a.crudManager=Ext.create('MeetingsCalendar.store.CrudManager',{projectId:b.projectId,clientInstance:b.clientInstance});Ext.panel.Panel.prototype.constructor.apply(this,arguments)},listeners:{afterrender:function(a,c){a.body.mask(a.L('Loading'));var b=a.down('meetingsCalendar').getEventStore();a.getController().loadDataToStore(b,a.crudManager).then(function(d){var b=a.down('meetingsCalendar');b.customeEditor=Ext.create('MeetingsCalendar.window.EventEditor',{rtl:a.rtl,calendar:b,comboStores:a.getController().stores});Ext.ComponentQuery.query('meetingCalendarViewPanel')[0].body.unmask();b.getEventStore().filterBy(function(b){return !0})},function(b){})}}},1,['meetingCalendarViewPanel'],['component','box','container','panel','meetingCalendarViewPanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'meetingCalendarViewPanel':!0},['widget.meetingCalendarViewPanel'],[[MeetingsCalendar.mixin.Localizable.prototype.mixinId||MeetingsCalendar.mixin.Localizable.$className,MeetingsCalendar.mixin.Localizable]],[MeetingsCalendar.view,'MeetingCalendarView'],0);Ext.cmd.derive('genericGrid.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!genericGrid.locale.Active){genericGrid.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=genericGrid.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in genericGrid.locale.Active){genericGrid.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {genericGrid.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[genericGrid.locale,'Locale'],0);Ext.cmd.derive('genericGrid.locale.En',genericGrid.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'genericGrid.view.View':{Loading:'Loading...'},'genericGrid.window.MainWindow':{CloseWindow:'Close window'},'genericGrid.view.Grid':{EmptyStore:'No records found',Save:'Save',Close:'Close',SaveChanges:'Save Changes?',unSavedMessage:'You are closing a tab that has unsaved changes. Would you like to save your changes?'}}});this.callParent(arguments)}},1,0,0,0,0,0,[genericGrid.locale,'En'],0);Ext.cmd.derive('genericGrid.locale.He',genericGrid.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'genericGrid.view.View':{Loading:'...'},'genericGrid.window.MainWindow':{CloseWindow:' '},'genericGrid.view.Grid':{EmptyStore:'   ',Save:'',Close:'',SaveChanges:' ?',unSavedMessage:'   ,    ?'}}});this.callParent(arguments)}},1,0,0,0,0,0,[genericGrid.locale,'He'],0);Ext.cmd.derive('genericGrid.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in genericGrid.locale.Active){if(a===genericGrid.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in genericGrid.locale.Active){genericGrid.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[genericGrid.mixin,'Localizable'],0);Ext.cmd.derive('genericGrid.field.RowData',Ext.data.field.Field,{convert:function(a){if(a&&typeof a!=='object'){a=JSON.parse(a)}return a}},0,0,0,0,['data.field.rowData'],0,[genericGrid.field,'RowData'],0);Ext.cmd.derive('genericGrid.view.ViewController',Ext.app.ViewController,{initiateLoading:function(a){var c=this;var b=new Ext.Deferred();var d=a.aaDataStore;var a=a;a.crudManager.firstLoad().then(function(e){c.createFieldsByColDefinition(e.columnsDefinition,a);var h=c.createGridColumnsArray(e.columnsDefinition,a.readOnly);var g=e.hfr?e.aaData.slice(1,e.aaData.length):e.aaData;d.loadRawData(g);var f=[];g.forEach(function(b){var c={id:b.rowId};for(prop in b.requestedDataByColumnId){cellValue=JSON.parse(b.requestedDataByColumnId[prop]).value;c[prop]=cellValue}f.push(c)});a.gridStore.loadData(f);a.gridStore.getProxy().setData(f);b.resolve({columnsArray:h})});return b.promise},createGridColumnsArray:function(d,a){var b=[];var c=this;d.forEach(function(f){if(f.visible){var e={cls:'dataTableHeader',height:24.8,align:'center',headerWrap:!0};e.header=f.fieldBinding.label;e.dataIndex=f.columnKey;e.flex=1;switch(f.fieldBinding.fieldType){case 'DATE':e.xtype='datecolumn';e.editor={xtype:'datefield'};e.filter={type:'date'};break;case 'BOOLEAN':e.xtype='checkcolumn';if(a){e.disabled=!0};e.filter={type:'boolean'};break;case 'STRING':e.editor={allowBlank:!1,selectOnFocus:!0};e.filter={type:'string'};break;case 'DOUBLE':e.editor={xtype:'numberfield',allowBlank:!1,selectOnFocus:!0};e.filter={type:'number'};break;case 'REFERENCE':if(f.fieldBinding.dataType=='FieldWrapper'){}else {if(f.fieldBinding.dataType=='LookupValueWrapper'){var h=Ext.create('Ext.data.Store',{fields:['value','label'],data:f.fieldBinding.options});e.editor={xtype:'combo',mode:'local',store:h,displayField:'label',valueField:'value'}}};e.filter={type:'list'};break;case 'PICKLIST':if(f.fieldBinding.options){if(!a){var g=Ext.create('Ext.data.Store',{fields:['value','label'],data:f.fieldBinding.options});e.editor={xtype:'combo',mode:'local',store:g,displayField:'label',valueField:'value'}}else {e.renderer=function(c,g,i,h,e,j,k){var b;f.fieldBinding.options.forEach(function(l){if(l.value==c){b=l.label}});return b}}e.filter={type:'list'}};break;case 'CURRENCY':e.renderer=function(g,i,e,j,h,l,m){var b='';var k='';if(e.data.currencyisocode){b=c.getCurrencySign(e.data.currencyisocode)}else {b=c.getCurrencySign(f.fieldBinding.iso)}return b+' '+Ext.util.Format.number(g,'0,000.00')};e.filter={type:'number'};break;default:break;}b.push(e)}});return b},getCurrencySign:function(a){if(a=='USD'){return '$'}else {if(a=='ILS'){var b='';return '&#'+b.charCodeAt()}else {return null}}},createFieldsByColDefinition:function(d,c){fieldTypeToXtypeMap={'BOOLEAN':'bool','STRING':'string','DOUBLE':'number'};var g=c.aaDataStore;var e=g.getModel();var h=c.gridStore;var f=h.getModel();var a=[];var b=[];d.forEach(function(e){a.push({name:e.columnKey,mapping:'requestedDataByColumnId.'+e.columnKey,type:'rowData'});var f=fieldTypeToXtypeMap[e.fieldBinding.fieldType]?fieldTypeToXtypeMap[e.fieldBinding.fieldType]:'auto';b.push({name:e.columnKey,type:f})});e.addFields(a);f.addFields(b)}},0,0,0,0,['controller.ViewController'],0,[genericGrid.view,'ViewController'],0);Ext.cmd.derive('genericGrid.model.Row',Ext.data.Model,{idProperty:'rowId',fields:[{name:'si'},{name:'rfn'},{name:'ocn'},{name:'folder'},{name:'dataType'},{name:'cocc'},{name:'cecc'},{name:'visualCues'},{name:'selected'},{name:'rowId'},{name:'ri'},{name:'disabled'},{name:'cssClass'},{name:'rowWithGapId'},{name:'overlappingRowId'}]},0,0,0,0,0,0,[genericGrid.model,'Row'],0);Ext.cmd.derive('genericGrid.store.AADataStore',Ext.data.Store,{model:'genericGrid.model.Row',storeId:'AADataStore',proxy:{type:'memory',reader:{type:'json'},writer:{type:'json'}}},0,0,0,0,0,0,[genericGrid.store,'AADataStore'],0);Ext.cmd.derive('genericGrid.store.CrudManager',Ext.Base,{externalConfig:null,setExternalConfig:function(b){var a=this;a.externalConfig={};a.externalConfig.initSignature=b.initSignature;a.externalConfig.doUpdateSignature=b.doUpdateSignature;a.externalConfig.client=b.client},makeRequest:function(d,b){var c=this;var b=b||!1;if(!c.externalConfig){throw 'You need to setExternalConfig first!'}var a=new Ext.Deferred();if(!b){c.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}else {c.externalConfig.client.apexrest('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}return a.promise},firstLoad:function(){var a=this;var b=a.externalConfig.initSignature;return a.makeRequest(b)},doUpdate:function(b){var a=this;aaData=[];b.forEach(function(c){rowHelper={'requestedDataByColumnId':{}};for(prop in c.changesMap){var a={};a[prop]=Object.assign(c.data[prop],{dirty:!0});Object.assign(rowHelper['requestedDataByColumnId'],a)}aaData.push(rowHelper)});a.externalConfig.doUpdateSignature.aaData=aaData;var c=a.externalConfig.doUpdateSignature;return a.makeRequest(c)}},0,0,0,0,0,0,[genericGrid.store,'CrudManager'],0);Ext.cmd.derive('genericGrid.view.View',Ext.panel.Panel,{cls:'extjsWizardWrapper',controller:'ViewController',readOnly:!1,layout:'fit',aaDataStore:null,crudManager:null,gridStore:null,ColumnsDefinitionStore:null,initComponent:function(){var a=this;Ext.apply(a,{height:window.innerHeight-147,items:[{xtype:'genericGridGrid',rtl:a.rtl,readOnly:a.readOnly,overrides:a.gridOverrides,groupable:a.gridGroupable,runAsDiv:!Ext.isEmpty(a.getInitialConfig('renderTo')),showCloseButton:a.getInitialConfig('showCloseButton'),actionButtons:a.getInitialConfig('actionButtons'),rowSelectable:a.getInitialConfig('rowSelectable'),dispatcher:a.dispatcher,enableFilters:a.getInitialConfig('enableFilters'),excludeColumnFilter:a.getInitialConfig('excludeColumnFilter')}]});window.addEventListener('resize',Ext.Function.createBuffered(function(){a.tryReizeAccordingToParentDiv()},150));Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},tryReizeAccordingToParentDiv:function(){var b=this;var c=b.getInitialConfig('renderTo');if(c){var a=Ext.fly(c).getSize();if(a){b.setSize(a.width,a.height)}}else {var d=b.up();if(d){var a=d.getSize();if(a){b.setSize(a.width,a.height)}}}},listeners:{afterrender:function(a){a.mask(a.L('Loading'));var b=a;a.getController().initiateLoading(a).then(function(g){var e=b.down('genericGridGrid');var c=e.down('pagingtoolbar');var d=b.getInitialConfig('excludeColumnFilter');if(Ext.isObject(d)){g.columnsArray.forEach(function(b){if(d.hasOwnProperty(b.dataIndex)&&d[b.dataIndex]){delete b.filter}})}e.reconfigure(b.gridStore,g.columnsArray);e.getColumns().forEach(function(b,c){if(a.getInitialConfig('rowSelectable')&&c==0){}else {b.setMinWidth(b.text.length<10?90:b.text.length*8)}});if(a.rtl){var f=[];for(i=0;i<11;i++){f.push(c.items.getAt(0));c.items.removeAt(0)}c.insert(0,f.reverse())}c.bindStore(b.gridStore);c.doRefresh();c.query('#refresh')[0].setHidden(!0);b.tryReizeAccordingToParentDiv();b.unmask()})},invokeRefresh:function(){var a=this.down('genericGridGrid');a.getController().refreshHandler()}},constructor:function(a){var b=this;b.gridGroupable=a.$initParent==null?a.gridGroupable:a.$initParent.config.gridGroupable;var d=a.$initParent==null?a.defaultGrouperColumn:a.$initParent.config.defaultGrouperColumn;b.crudManager=Ext.create('genericGrid.store.CrudManager');b.aaDataStore=Ext.create('genericGrid.store.AADataStore');b.gridStore=Ext.create('genericGrid.store.GridStore');b.ColumnsDefinitionStore=Ext.create('genericGrid.store.ColumnsDefinitionStore');b.dispatcher=a.dispatcher==null?a.$initParent.config.dispatcher:a.dispatcher;if(d){b.gridStore.setGroupField(d)}b.currentLocale=a.locale==null?a.$initParent.config.locale:a.locale;if(!a.$initParent){b.currentLocale=b.currentLocale.charAt(0).toUpperCase()+b.currentLocale.slice(1,2);b.currentLocale=b.currentLocale=='Iw'?'He':b.currentLocale;b.rtl=b.currentLocale=='He';genericGrid.locale[b.currentLocale].apply()}var c=null;if(a.doUpdateSignature){c=a.doUpdateSignature}else {if(a.$initParent){c=a.$initParent.config.doUpdateSignature}}b.crudManager.setExternalConfig({initSignature:a.initSignature==null?a.$initParent.config.initSignature:a.initSignature,doUpdateSignature:c,client:a.clientInstance==null?a.$initParent.config.clientInstance:a.clientInstance});if(!c){b.readOnly=!0}b.gridOverrides=a.$initParent==null?a.gridOverrides:a.$initParent.config.gridOverrides;Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['genericGridView'],['component','box','container','panel','genericGridView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'genericGridView':!0},['widget.genericGridView'],[[genericGrid.mixin.Localizable.prototype.mixinId||genericGrid.mixin.Localizable.$className,genericGrid.mixin.Localizable]],[genericGrid.view,'View'],0);Ext.cmd.derive('velocityGrid.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!velocityGrid.locale.Active){velocityGrid.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=velocityGrid.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in velocityGrid.locale.Active){velocityGrid.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {velocityGrid.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[velocityGrid.locale,'Locale'],0);Ext.cmd.derive('velocityGrid.locale.En',velocityGrid.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'velocityGrid.window.Window':{LOADING:'Loading',CloseWindow:'Close Window'},'velocityGrid.view.View':{LOADING:'Loading',MONTHLY:'Monthly',WEEKLY:'Weekly',StageType:'Stage Type',TotalStages:'Total Stages',TotalRemains:'Total Remains',CompletedTotal:'[TC] Completed Total',ExpectedTotal:'[TE] Expected Total',BaselineTotal:'[TB] Baseline Total',Completed:'[C] Completed',Expected:'[E] Expected',Baseline:'[B] Baseline',Gantt:'Gantt',Tools:'Tools',DownloadCSV:'Export to CSV file',Of:'of',Displaying:'Displaying',LastPage:'Last Page',NextPage:'Next Page',PreviousPage:'Previous Page',FirstPage:'First Page',Page:'Page',NoDataToDisplay:'No Data To Display',refreshText:'Refresh'},'velocityGrid.store.CrudManager':{RetrievingDataFromServer:'Retrieving data from server...',LoadingTasks:'Loading Tasks...',AdjustingTasksSchedule:'Adjusting Tasks Schedule...',Loading:'Loading...'}}});this.callParent(arguments)}},1,0,0,0,0,0,[velocityGrid.locale,'En'],0);Ext.cmd.derive('velocityGrid.locale.He',velocityGrid.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'velocityGrid.window.Window':{LOADING:'',CloseWindow:' '},'velocityGrid.view.View':{LOADING:'',MONTHLY:'',WEEKLY:'',StageType:' ',TotalStages:'" ',CompletedTotal:'[TC]  "',ExpectedTotal:'[TE]  "',BaselineTotal:'[TB]  "',Completed:'[C] ',Expected:'[E] ',Baseline:'[B] ',TotalRemains:' ',Gantt:'',Tools:'',DownloadCSV:'  CSV',Of:'',Displaying:'',LastPage:' ',NextPage:' ',PreviousPage:' ',FirstPage:' ',Page:'',NoDataToDisplay:'   ',refreshText:''},'velocityGrid.store.CrudManager':{RetrievingDataFromServer:'   ',LoadingTasks:' ',AdjustingTasksSchedule:' ',Loading:'...'}}});this.callParent(arguments)}},1,0,0,0,0,0,[velocityGrid.locale,'He'],0);Ext.cmd.derive('velocityGrid.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in velocityGrid.locale.Active){if(a===velocityGrid.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in velocityGrid.locale.Active){velocityGrid.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[velocityGrid.mixin,'Localizable'],0);Ext.cmd.derive('velocityGrid.model.Model',Ext.data.Model,{proxy:{type:'memory',enablePaging:!0}},0,0,0,0,0,0,[velocityGrid.model,'Model'],0);Ext.cmd.derive('velocityGrid.store.Store',Ext.data.Store,{storeId:'velocityGridStore',model:'velocityGrid.model.Model',buffered:!0,listeners:{filterchange:function(a){var b=Ext.ComponentQuery.query('pagingtoolbar')[0];a.totalCount=a.count();b.onLoad()}}},0,0,0,0,0,0,[velocityGrid.store,'Store'],0);Ext.cmd.derive('velocityGrid.store.CrudManager',Ext.container.Container,{client:!1,isInit:!1,ganttData:{},resetGanttData:function(){this.ganttData={tasks:{metadata:{},rows:[]},dependencies:{metadata:{},rows:[]},calendars:{metadata:{},rows:[]}}},doDestroy:function(){this.resetGanttData();var a=this.getTaskStore();if(a){a.removeAll();a.setRootNode()}this.taskStore=null;this.destroy()},excludedFields:['CalendarId','SchedulingMode','BaselinePercentDone','PhantomId','PhantomParentId'],projectId:null,constructId:null,phantomIdField:'tempId',autoLoad:!1,autoSync:!1,writeAllFields:!0,dataLoadTimeStamp:null,dependencyStore:'Dependencies',taskStore:'Tasks',getClient:function(){if(this.client==!1){this.setClient()}return this.client},setClient:function(){this.client=client},setRequestParams:function(a){var b=this;if(b.projectId!==null){a.projectId=b.projectId}a.groupingType='leafsOnly'},getTotalRecords:function(){var c=this;var a=Ext.create('Deft.Deferred');var b={'className':'GanttManagementRequest',actionName:'getGanttStorePageLimit'};c.setRequestParams(b);c.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(b){if(b.isError==!1){}else {Ext.toast({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200})}a.resolve(b)},function(b){Ext.toast({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+b.message+'</span>',width:200});a.reject(b)},'POST',JSON.stringify({requestJSON:JSON.stringify(b)}));return a.promise},getBulkFromServer:function(e,b){var d=this;var a;a=Ext.create('Deft.Deferred');var c={'className':'GanttManagementRequest',actionName:'getGanttStore',offset:e};d.setRequestParams(c);d.getClient().apexRemoteAction('/CC_REID/RemoteAction',function(c){if(c.isError==!1){}else {Ext.toast({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200})}c.requestIndex=b;a.resolve(c)},function(c){c.requestIndex=b;Ext.toast({title:'<span style="color:red;">Error</span>',timeout:5000,html:'<span style="color:red;">'+c.message+'</span>',width:200});a.reject(c,b)},'POST',JSON.stringify({requestJSON:JSON.stringify(c)}));return a.promise},processResponse:function(b){var c=this;if(b.ganttStore.tasks.rows.length>0){var a=c.getMapTasksById(c.ganttData.tasks.rows);b.ganttStore.tasks.rows.forEach(function(d){for(var e in d){if(d[e]===null||d[e]===undefined){delete d[e]}else {if(d.EndDate===undefined){d.EndDate=null}}}if(a[d.parentId]!=null){if(b.adjustOnLoad==!0&&a[d.parentId].isVirtual==!0){a[d.parentId].Duration=null;a[d.parentId].StartDate=null;a[d.parentId].EndDate=null}if(a[d.parentId].children===undefined||a[d.parentId].children==null){a[d.parentId].children=new Array()}var f=!1;a[d.parentId].children.forEach(function(a){if(a.Id==d.Id){f=!0;console.error('Found dublicate task: '+a.Id+' '+a.Name)}});if(!f){if(d.hasPrototype===!1){a[d.parentId].children.splice(d.index-1,0,d);delete d.index}else {a[d.parentId].children.push(d)}}}else {c.ganttData.tasks.rows.push(d)}});c.setMapTasksById(a)}if(b.ganttStore.dependencies!==null){Array.prototype.push.apply(c.ganttData.dependencies.rows,b.ganttStore.dependencies.rows)}},loadResponseData:function(c){var a=this;var d=new Date();console.log('data retrrived from server after: '+(d.getTime()-this.dataLoadTimeStamp.getTime())/1000+' sec');console.log('START loading data to gantt...');a.isLoad=!0;var b=a.getMapTasksById(a.ganttData.tasks.rows);for(i in b){if(b[i].children===undefined||b[i].children===null){b[i].leaf=!0}else {b[i].leaf=!1}}a.loadData(a.ganttData);a.fireEvent('stageStoreLoadCompleted',a,c);Ext.MessageBox.hide()},strictExtend:function(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}},getMapTasksById:function(c){var b=this;var a={};c.forEach(function(d){if(d.children!=null&&d.children.length>0){b.strictExtend(a,b.getMapTasksById(d.children))}a[d.Id]=d});return a},setMapTasksById:function(c){var a=this;var b={};for(var e in a.ganttData.tasks.rows){b[a.ganttData.tasks.rows[e].Id]=e}for(var d in c){a.ganttData.tasks.rows[b[d]]=c[d]}},getBulks:function(e,f,h,g,c,b,d){var a=this;a.getBulkFromServer(0,!0,0).then({success:function(i){console.log('proccesing response, requestIndex #'+i.requestIndex);if(i.success==!0){if(a.isInit==!1){a.resetGanttData();a.ganttData.tasks.metadata=i.ganttStore.tasks.metadata;a.isInit=!0}var m=parseInt(i.storeOffset);a.processResponse(i);var n=Math.max(0,Math.ceil(c/b));var l=[];var j=m;for(var k=0;k<n;k++){l.push(a.getBulkFromServer(j,!1,k+1));j=j+b}Deft.Promise.all(l).then({success:function(j){j.forEach(function(k){console.log('proccesing response, requestIndex #'+k.requestIndex);a.processResponse(k)});if(j.length>0){Ext.MessageBox.wait(a.L('LoadingTasks'),j[0].title)}setTimeout(function(){a.loadResponseData(i)},50)},failure:function(a){console.log('ERROR 3!!! response error on loading gantt')}}).always(function(){}).done()}},failure:function(a){}}).always(function(){}).done()},load:function(f){var a=this;var d;var c;var b;var e;console.log('data load initiated');this.dataLoadTimeStamp=new Date();a.getTotalRecords().then({success:function(g){console.log('initiated loading bulks');Ext.MessageBox.wait(a.L('RetrievingDataFromServer')+g.numberOfRecords+' tasks',g.projectName);a.getBulks(b,c,e,d,g.numberOfRecords,g.bulkSize,g.projectName)},failure:function(a){}}).always(function(){}).done()},getTaskStore:function(){var a=this;return a.taskStore},loadData:function(a){var b=this;b.taskStore.setRootNode({id:'root',children:a.tasks.rows})},constructor:function(b){var a=this;a.projectId=b.projectId;a.taskStore=Ext.create('Ext.data.TreeStore');Ext.container.Container.prototype.constructor.apply(this,arguments)}},1,0,['component','box','container'],{'component':!0,'box':!0,'container':!0},0,[[velocityGrid.mixin.Localizable.prototype.mixinId||velocityGrid.mixin.Localizable.$className,velocityGrid.mixin.Localizable]],[velocityGrid.store,'CrudManager'],0);Ext.cmd.derive('velocityGrid.view.ViewController',Ext.app.ViewController,{weeklyTimeline:!0,firstRefactor:!0,control:{'[reference=switchTimeline]':{click:'switchTimeline'},'[reference=expandButton]':{click:'sendExpandEvent'},'[reference=launchGanttByStage]':{click:'launchGanttByStage'},'[reference=downloadCSV]':{click:'downloadCSV'}},switchTimeline:function(b){var a=this;var d=a.getView().getStore();var e=a.getView().down('pagingtoolbar');b.up().queryBy(function(a){return a.reference=='switchTimeline'}).forEach(function(a){a.removeCls('activeButtonBackground')});b.addCls('activeButtonBackground');var c=a.getRefactoredColumns(b.isWeekly,a.getView().excludesColumns);a.weeklyTimeline=b.isWeekly;a.getView().currentlyActiveColumns=c;a.getView().reconfigure(c);d.totalCount=d.count();e.onLoad()},sendExpandEvent:function(a){if(!a.pressed){a.pressed=!0;a.addCls('activeButtonBackground')}else {a.pressed=!1;a.removeCls('activeButtonBackground')}$('.topFilters').toggle();$('.sidemenu').toggle();$('.velocityPanel').toggleClass('col-md-10 col-md-12');this.getView().tryReizeAccordingToParentDiv()},launchGanttByStage:function(){var d=this;var a=d.getView();var b='';if(a.getSelection().length>0&&a.getSelection()[0]){var c=a.getSelection()[0].id;if(!Ext.isEmpty(c)){b=wizardConfig.packageURL+'/apex/CC_REID__Gantt?'+a.getInitialConfig('mode')+'Id='+a.getInitialConfig('projectId')+'&showHeader=false&sidebar=false&groupingType=ParentStageType&uifilterid=StagePrototypeName&uifiltervalues='+c+'#'+(wizardConfig.userLanguage=='iw'?'he':'en')}else {b=wizardConfig.packageURL+'/apex/CC_REID__Gantt?'+a.getInitialConfig('mode')+'Id='+a.getInitialConfig('projectId')+'&showHeader=false&sidebar=false&groupingType=ParentStageType#'+(wizardConfig.userLanguage=='iw'?'he':'en')}}else {b=wizardConfig.packageURL+'/apex/CC_REID__Gantt?'+a.getInitialConfig('mode')+'Id='+a.getInitialConfig('projectId')+'&showHeader=false&sidebar=false&groupingType=ParentStageType#'+(wizardConfig.userLanguage=='iw'?'he':'en')}window.open(b)},downloadCSV:function(){var d='Velocity-Grid';d=d+'.csv';var b=this.getView().getColumns();var e=['BaselineEndDate','EndDate','CompletedDate'];var c=[b[1],b[2],b[3]];b.forEach(function(a){if(a.xtype=='templatecolumn'){e.forEach(function(b){c.push({dataIndex:b+'-'+a.headerDate,text:'['+b.substr(0,1)+'] '+a.headerDate})});e.forEach(function(b){c.push({dataIndex:b+'-'+a.headerDate+'-total',text:'[T'+b.substr(0,1)+'] '+a.headerDate})})}});var g=velocityGrid.ux.exporter.Exporter.exportStore(this.getView().down('grid').getStore(),'csv',{columns:c});var a=document.createElement('a');a.style='display: none';var h=new Blob(['\ufeff'+g],{type:'text/csv;charset=utf-16'});var f=window.URL.createObjectURL(h);a.href=f;a.charset='utf-16';a.download=d;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(f)},100)},getVelocityGridStore:function(f,g){var a=this;var h=a.getView();var d=h.getInitialConfig()['constructId'];a.weeksColumns={};a.monthsColumns={};var b={};f.getRootNode().cascadeBy(function(h){var o=d==null?!1:h.data.constructId!=d;if(h.isLeaf()&&!o){var l=h.data.Name;var n=h.data.CompletedDate;var m=h.data.BaselineEndDate;var p=h.data.EndDate;if(l){var c=b[l];if(!c){b[h.data.Name]={};c=b[h.data.Name];c['totalStages']=0;c['dbGroupingKey']=h.data.dbGroupingKey}var k={BaselineEndDate:m,EndDate:p,CompletedDate:n};var j=a.getFieldsWeeksNames(k);var i=a.getFieldsMonthsNames(k);for(prop in j){if(j[prop]){if(!a.weeksColumns[a.weeksColumns[prop]]){a.weeksColumns[j[prop]]={}}var e=c[prop+'-'+j[prop]];e=e==null?1:e+1;c[prop+'-'+j[prop]]=e;a.weeksColumns[j[prop]][prop]=!0}}for(prop in i){if(i[prop]){if(!a.monthsColumns[a.monthsColumns[prop]]){a.monthsColumns[i[prop]]={}}var e=c[prop+'-'+i[prop]];e=e==null?1:e+1;c[prop+'-'+i[prop]]=e;a.monthsColumns[i[prop]][prop]=!0}}c['totalStages']++}}});var e=[];Object.keys(b).map(function(a){var c={id:a};Object.keys(b[a]).map(function(d){c[d]=b[a][d]});e.push(c)});var c=Ext.create('velocityGrid.store.Store',{pageSize:g,data:e});while(c.getRange().length>0){a.calcTotals(c);c.nextPage()}c.loadPage(1);return {'store':c}},getFieldsWeeksNames:function(b){var c={};for(prop in b){var a=new Date(b[prop]);if(b[prop]){var d=a.getDay();var e=0-d;a.setDate(a.getDate()+e);c[prop]=Ext.Date.format(a,'Y-m-d')}}return c},getFieldsMonthsNames:function(a){var b={};for(prop in a){var c=new Date(a[prop]);if(a[prop]){b[prop]=c.toLocaleString('en-us',{month:'short'})+'-'+c.getFullYear()}}return b},fieldsWithDateSorter:function(a,b){return new Date(a.substr(a.indexOf('-')+1,a.length))-new Date(b.substr(b.indexOf('-')+1,b.length))},calcTotals:function(b){var a=this;a.datesRangeInWeeks={};b.getRange().forEach(function(c){var i=c.getData();var e={BaselineEndDate:null,EndDate:null,CompletedDate:null};var d={BaselineEndDate:null,EndDate:null,CompletedDate:null};var l=Object.keys(i);var k=l.filter(function(a){return a.substr(a.indexOf('-')+1,a.length).length==10&&a.indexOf('-total')==-1&&a!='id'&&a!='totalStages'}).sort(a.fieldsWithDateSorter);var j=l.filter(function(a){return a.substr(a.indexOf('-')+1,a.length).length==8&&a.indexOf('-total')==-1&&a!='id'&&a!='totalStages'}).sort(a.fieldsWithDateSorter);var f={};k.forEach(function(d){a.datesRangeInWeeks[a.getFormatedDate(d.substr(d.indexOf('-')+1,d.length))]=!0});j.forEach(function(d){f[a.getFormatedDate(d.substr(d.indexOf('-')+1,d.length))]=!0});Object.keys(a.datesRangeInWeeks).sort().forEach(function(d,h,e){if(e.length!=h+1){var f=a.datesRangeInWeeks[a.getNextWeekFormated(d)];while(!f){var g=a.getNextWeekFormated(d);a.datesRangeInWeeks[g]=!0;d=g;f=a.datesRangeInWeeks[a.getNextWeekFormated(d)]}}else {a.latestWeekDate=e[e.length-1]}});Object.keys(f).sort(function(a,d){return new Date(a)>new Date(d)}).forEach(function(h,i,d){if(d.length!=i+1){var e=f[a.getNextMonthFormated(h)];while(!e){var g=Ext.Date.format(Ext.Date.add(new Date(h),Ext.Date.MONTH,1),'Y-m-d');f[g]=!0;e=f[g]}}else {a.latestMonthDate=d[d.length-1]}});k.sort(a.fieldsWithDateSorter).forEach(function(a,j,h){var d=i[a];if(d){dateProp=a.substr(0,a.indexOf('-'));var g=a.substr(a.indexOf('-')+1,a.length);e[dateProp]=e[dateProp]==null?0:e[dateProp];e[dateProp]=e[dateProp]+d;for(prop in e){var f=e[prop]==null?'.':e[prop];c.set(prop+'-'+g+'-total',f,{dirty:!1})}c.set(a+'-total',e[dateProp],{dirty:!1})}});j.sort(a.fieldsWithDateSorter).forEach(function(a,j,h){var e=i[a];if(e){dateProp=a.substr(0,a.indexOf('-'));var g=a.substr(a.indexOf('-')+1,a.length);d[dateProp]=d[dateProp]==null?0:d[dateProp];d[dateProp]=d[dateProp]+e;for(prop in d){var f=d[prop]==null?'.':d[prop];c.set(prop+'-'+g+'-total',f,{dirty:!1})}c.set(a+'-total',d[dateProp],{dirty:!1})}});Object.keys(a.datesRangeInWeeks).sort().forEach(function(d,g,f){for(prop in e){if(!c.get(prop+'-'+d+'-total')){c.set(prop+'-'+d+'-total',c.get(prop+'-'+f[g-1]+'-total'),{dirty:!1})}if(!c.get(prop+'-'+d)){c.set(prop+'-'+d,'.',{dirty:!1})}}a.calcRedColorText(c,d)});Object.keys(f).sort().forEach(function(i,g,h){var e=Ext.Date.format(new Date(i),'M-Y');for(prop in d){if(!c.get(prop+'-'+e+'-total')){var f='.';if(g>0){f=c.get(prop+'-'+Ext.Date.format(new Date(h[g-1]),'M-Y')+'-total')}c.set(prop+'-'+e+'-total',f,{dirty:!1})}if(!c.get(prop+'-'+e)){c.set(prop+'-'+e,'.',{dirty:!1})}}a.calcRedColorText(c,e)});var h=c.get('CompletedDate-'+a.latestWeekDate+'-total');var g=c.get('CompletedDate-'+a.latestMonthDate+'-total');h=isNaN(h)?0:h;g=isNaN(g)?0:g;c.set('totalRemainsInWeekView',c.get('totalStages')-h);c.set('totalRemainsInMonthView',c.get('totalStages')-g)})},calcRedColorText:function(b,a){var f=parseInt(b.get('CompletedDate-'+a));var e=parseInt(b.get('CompletedDate-'+a+'-total'));var h=parseInt(b.get('EndDate-'+a));var g=parseInt(b.get('EndDate-'+a+'-total'));var d='blackText';if(new Date(a)<=new Date()){if(!isNaN(f)){if(f<h){d='redText'}}else {if(!isNaN(h)){d='redText'}}var c='blackText';if(!isNaN(e)){if(e<g){c='redText'}}else {if(!isNaN(g)){c='redText'}}}b.set('CompletedDate-'+a+'-class',d);b.set('CompletedDate-'+a+'-total-class',c);b.set('EndDate-'+a+'-class',d);b.set('EndDate-'+a+'-total-class',c)},getFormatedDate:function(a){return Ext.Date.format(new Date(a),'Y-m-d')},getNextWeekFormated:function(a){return Ext.Date.format(Ext.Date.add(new Date(a),Ext.Date.DAY,7),'Y-m-d')},getNextMonthFormated:function(a){return Ext.Date.format(Ext.Date.add(new Date(a),'M',1),'M-Y')},getRefactoredColumns:function(c,d){var b=this;var a='-';c=c==null?b.weeklyTimeline:c;if(!Ext.isObject(d)){d={B:!1,E:!1,C:!1,TB:!1,TE:!1,TC:!1}}var j=[{dataIndex:'id',header:'<span style="margin: 0px 10px 0px 10px !important;">'+b.getView().L('StageType')+'</span>',locked:!0,exportHeader:b.getView().L('StageType'),cls:'dataTableHeader',minWidth:200,menuDisabled:!0,resizable:!1},{dataIndex:'totalStages',header:'<span style="white-space: normal !important;">'+b.getView().L('TotalStages')+'</span>',exportHeader:b.getView().L('TotalStages'),cls:'dataTableHeader',locked:!0,maxWidth:60,menuDisabled:!0,resizable:!1,align:'center',renderer:function(a){return '<div style="padding-top: 2px !important;"> '+a+'</div>'}},{dataIndex:c?'totalRemainsInWeekView':'totalRemainsInMonthView',header:'<span style="white-space: normal !important;">'+b.getView().L('TotalRemains')+'</span>',exportHeader:b.getView().L('TotalRemains'),cls:'dataTableHeader',locked:!0,maxWidth:70,menuDisabled:!0,resizable:!1,align:'center',renderer:function(a){return '<div style="padding-top: 2px !important;"> '+a+'</div>'}}];var g=[];var h=new Date();var e=b.getFieldsWeeksNames({sunday:h});e.month=Ext.Date.getShortMonthName(h.getMonth())+'-'+h.getFullYear();if(c){b.refactorWeeklyColumns(e.sunday)}var i=c==!0?b.weeksColumns:b.monthsColumns;for(col in i){var f={};if(c&&e.sunday==col){f.tdCls='todayRedLine'}else {if(e.month==col){f.tdCls='todayRedLine'}}g.push(Object.assign({header:b.buildHeaderString(col,c,d),xtype:'templatecolumn',minWidth:124,flex:1,menuDisabled:!0,resizable:!1,align:'center',cls:'dataTableHeader',headerDate:col,tpl:new Ext.XTemplate('<span><tpl if="values[\'BaselineEndDate'+a+col+'-total\'] !=null "><tpl if="this.excludes.B == false"> <pme class="{BaselineEndDate'+a+col+'-class}"> <tpl if="values[\'BaselineEndDate'+a+col+"'] == '.' \">&nbsp<tpl else> {BaselineEndDate"+a+col+'}</tpl></pme> </tpl><tpl if="this.excludes.E == false"><eme class="{EndDate'+a+col+'-class}"> <tpl if="values[\'EndDate'+a+col+"'] == '.' \">&nbsp<tpl else> {EndDate"+a+col+'}</tpl></eme>  </tpl><tpl if="this.excludes.C == false"><dme class="{CompletedDate'+a+col+'-class}"> <tpl if="values[\'CompletedDate'+a+col+"'] == '.' \">&nbsp<tpl else> {CompletedDate"+a+col+'}</tpl></dme>  </tpl><tpl if="this.excludes.TB == false"><pte class="{BaselineEndDate'+a+col+'-total-class}"> <tpl if="values[\'BaselineEndDate'+a+col+"-total'] == '.' \">&nbsp<tpl else> {BaselineEndDate"+a+col+'-total}</tpl></pte>  </tpl><tpl if="this.excludes.TE == false"><ete class="{EndDate'+a+col+'-total-class}"> <tpl if="values[\'EndDate'+a+col+"-total'] == '.' \">&nbsp<tpl else> {EndDate"+a+col+'-total}</tpl></ete>  </tpl><tpl if="this.excludes.TC == false"><dte class="{BaselineEndDate'+a+col+'-total-class}"> <tpl if="values[\'CompletedDate'+a+col+"-total'] == '.' \">&nbsp<tpl else> {CompletedDate"+a+col+'-total}</tpl></dte> </tpl></tpl></span>',{excludes:d})},f));if(b.firstRefactor){gridData.store.getModel().addFields([{name:'BaselineEndDate-'+col},{name:'EndDate-'+col},{name:'CompletedDate-'+col},{name:'BaselineEndDate-'+col+'-total'},{name:'EndDate-'+col+'-total'},{name:'CompletedDate-'+col+'-total'}])}}g.sort(function(e,f){var a=new Date(e.headerDate);var b=new Date(f.headerDate);return a-b});b.firstRefactor=!1;return j.concat(g)},refactorWeeklyColumns:function(d){var a=this;var b=-1;var c={};Object.keys(a.datesRangeInWeeks).forEach(function(b,c){if(!a.weeksColumns[b]){a.weeksColumns[b]={}}});Object.keys(a.weeksColumns).sort().forEach(function(a,c){if(a==d){b=c}});Object.keys(a.weeksColumns).sort().forEach(function(e,f,g){if(b>f&&b-f<=8){c[e]=a.weeksColumns[e]}if(b<f&&f-b<=8){c[e]=a.weeksColumns[e]}if(b==f){c[e]=a.weeksColumns[e]}});a.weeksColumns=c},buildHeaderString:function(e,d,c){var g=this;var f=g.getView();var a=new Date(e);var b='';if(d){b+=Ext.Date.format(a,'y')+'<br/>';if(f.currentLocale=='He'){a=Ext.Date.format(a,'d/m')}else {a=Ext.Date.format(a,'m/d')}}else {a=Ext.Date.format(a,'m/y')}b+=a+'<br/><span>';Object.keys(c).forEach(function(a){if(c[a]===!1){b+='<headerDateType>'+a+'</headerDateType>'}});b+='</span>';return b},filterStore:function(f,d,e,g){var i=this;var h=this.getView();var b={};d.forEach(function(a){b[a]=!0});var a=g||h.getStore();a.removeFilter('selectionFilter');if(e){var c=new Ext.util.Filter({id:'selectionFilter',filterFn:function(c){var a=c.getData();if(b[a[f]]){return !0}}});a.filter(c)}else {a.removeFilter('selectionFilter')}}},0,0,0,0,['controller.velocityGridViewController'],0,[velocityGrid.view,'ViewController'],0);Ext.cmd.derive('Ext.grid.plugin.BufferedRenderer',Ext.AbstractPlugin,{isBufferedRenderer:!0,lockableScope:'both',numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(c){var a=this,b=c.view,d={scroll:a.onViewScroll,scrollend:a.onViewScrollEnd,refresh:a.onViewRefresh,columnschanged:a.checkVariableRowHeight,boxready:a.onViewBoxReady,scope:a,destroyable:!0},e=b.initialConfig;if(c.isTree||c.ownerLockable&&c.ownerLockable.isTree){b.blockRefresh=!1;if(e&&e.loadMask===undefined){b.loadMask=!0}}if(b.positionBody){d.refresh=a.onViewRefresh}if(Ext.isWebKit&&Ext.supports.touchScroll!==2){a.needsPointerEventsFix=!0;d.scrollEnd=a.onViewScrollEnd}a.grid=c;a.view=b;a.isRTL=b.getInherited().rtl;b.bufferedRenderer=a;b.preserveScrollOnRefresh=!0;b.animate=!1;a.bindStore(b.dataSource);if(b.hasOwnProperty('rowHeight')){a.rowHeight=b.rowHeight}a.position=0;a.viewListeners=b.on(d)},checkVariableRowHeight:function(){this.variableRowHeight=this.view.hasVariableRowHeight()},bindStore:function(b){var a=this,c=a.store,d=a.view;if(c&&c.isFeatureStore){return}if(c){a.unbindStore()}a.storeListeners=b.on({scope:a,groupchange:a.onStoreGroupChange,clear:a.onStoreClear,beforeload:a.onBeforeStoreLoad,load:a.onStoreLoad,destroyable:!0});a.store=b;if(a.view.componentLayout.layoutCount){delete a.viewSize;if(b.isBufferedStore){b.setViewSize(a.viewSize)}a.onViewResize(a.view,0,a.view.getHeight())}},unbindStore:function(){this.storeListeners.destroy();this.storeListeners=this.store=null},onBeforeStoreLoad:function(c){var a=this,b=a.view;if(b&&b.refreshCounter){if(c.isTreeStore||b.preserveScrollOnReload){a.nextRefreshStartIndex=b.all.startIndex}else {if(a.scrollTop!==0){a.setBodyTop(a.bodyTop=a.scrollTop=a.position=a.scrollHeight=a.nextRefreshStartIndex=0);b.setScrollY(0)}}a.lastScrollDirection=a.scrollOffset=null}a.disable()},onStoreLoad:function(){this.enable()},onStoreClear:function(){var a=this,b=a.view;if(b.rendered&&!a.store.destroyed){if(a.scrollTop!==0){a.bodyTop=a.scrollTop=a.position=a.scrollHeight=0;a.nextRefreshStartIndex=null;b.setScrollY(0)}b.refresh();a.lastScrollDirection=a.scrollOffset=null}},onStoreGroupChange:function(a){this.refreshSize()},onViewBoxReady:function(a){this.refreshScroller(a,this.scrollHeight)},onViewRefresh:function(b,c){var a=this,d=b.all,e;a.checkVariableRowHeight();if(!b.componentLayoutCounter&&(b.headerCt.down('{flex}')||a.variableRowHeight)){b.on({boxready:Ext.Function.pass(a.onViewRefresh,[b,c],a),single:!0});a.skipNextRefreshSize=!0;return}a.skipNextRefreshSize=!1;if(a.refreshing){return}a.refreshSize();if(a.scrollTop!==b.getScrollY()){a.onViewScroll();a.onViewScrollEnd()}else {if(!a.hasOwnProperty('bodyTop')){a.bodyTop=d.startIndex*a.rowHeight;b.setScrollY(a.bodyTop)}a.setBodyTop(a.bodyTop);e=b.getHeight();if(d.getCount()&&e>0){a.onViewResize(b,null,e);if(c&&d.getCount()!==c.length){c.length=0;c.push.apply(c,a.store.getRange(d.startIndex,d.endIndex))}}}},beforeTableLayout:function(b){var a=this.view.body.dom;if(a){b.bodyHeight=a.offsetHeight;b.bodyWidth=a.offsetWidth}},afterTableLayout:function(d){var a=this,b=a.view,c;if(d.bodyHeight&&b.body.dom){delete a.rowHeight;a.refreshSize();c=b.body.dom.offsetHeight;if(c!==d.bodyHeight){a.onViewResize(b,null,b.el.lastBox.height);if(c<d.bodyHeight){if(a.viewSize>=a.store.getCount()){a.setBodyTop(0)}else {if(a.bodyTop>a.scrollTop||a.bodyTop+c<a.scrollTop+a.viewClientHeight){a.setBodyTop(a.scrollTop-a.trailingBufferZone*a.rowHeight)}}}if(b.all.endIndex===b.dataSource.getCount()-1){a.stretchView(b,a.scrollHeight=a.bodyTop+c-1)}}}},refreshSize:function(){var a=this,b=a.view,c=a.skipNextRefreshSize,d=b.body.dom;a.skipNextRefreshSize=!1;if(c||!d){return}a.bodyHeight=b.body.dom.offsetHeight;a.scrollHeight=a.getScrollHeight();a.stretchView(b,a.scrollHeight)},onViewResize:function(e,g,d,f,c){var a=this,b;if(!c||d!==c){b=Math.ceil(d/a.rowHeight)+a.trailingBufferZone+a.leadingBufferZone;a.viewSize=a.setViewSize(b);a.viewClientHeight=e.el.dom.clientHeight}},stretchView:function(c,b){var a=this;if(a.scrollTop>b){a.position=a.scrollTop=Math.max(b-a.bodyHeight,0);c.setScrollY(a.scrollTop)}if(a.bodyTop>b){c.body.translate(null,a.bodyTop=a.position)}if(c.getScrollable()){a.refreshScroller(c,b)}},refreshScroller:function(b,c){var a=b.getScrollable();if(a){if(a.setElementSize){a.setElementSize()}a.setSize({x:b.headerCt.getTableWidth(),y:c})}},setViewSize:function(c,o){var a=this,h=a.store,g=a.view,d=g.all,j=d.getCount(),e,f,b=a.view.lockingPartner&&a.view.lockingPartner.bufferedRenderer,i=j-c,n,m,l,k;if(b&&!o&&b.view.componentLayoutCounter){if(b.viewSize>c){c=b.viewSize}else {b.setViewSize(c,!0)}}i=j-c;if(i){a.scrollTop=g.getScrollY();a.viewSize=c;if(h.isBufferedStore){h.setViewSize(c)}if(j){k=h.getCount();e=d.startIndex;f=Math.min(e+c-1,k-1);if(e===d.startIndex&&f===d.endIndex){if(i<0){a.handleViewScroll(-1)}}else {if(b){b.disable()}if(i<0){if(k>j){h.getRange(d.endIndex+1,f,{callback:function(b,d){l=g.doAdd(b,d);g.fireEvent('itemadd',b,d,l);a.setBodyTop(a.bodyTop)}})}else {a.refreshView(0)}}else {e=d.endIndex-(i-1);f=d.endIndex;m=d.slice(e,f+1);d.removeRange(e,f,!0);if(g.hasListeners.itemremove){n=h.getRange(e,f);g.fireEvent('itemremove',n,e,m)}a.setBodyTop(a.bodyTop)}if(b){b.enable()}}}}return c},getViewRange:function(){var d=this,c=d.view.all,a=d.store,b=0;if(c.getCount()){b=c.startIndex}else {if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}b=c.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}if(a.data.getCount()){return a.getRange(b,b+(d.viewSize||a.defaultViewSize)-1)}else {return []}},onReplace:function(l,d,j,k){var a=this,c=a.view,b=c.all,i,g=b.getCount(),h=d+j.length-1,e=k.length-j.length,f=e*a.rowHeight;if(d>=b.startIndex+a.viewSize){a.refreshSize();return}if(g&&h<b.startIndex&&b.getCount()>=a.viewSize){b.moveBlock(e);a.refreshSize();i=b.startIndex;if(e>0){a.doNotMirror=!0;a.handleViewScroll(-1);a.doNotMirror=!1}if(b.startIndex===i){if(b.startIndex){a.setBodyTop(a.bodyTop+=f);c.suspendEvent('scroll');c.scrollBy(0,f);c.resumeEvent('scroll');a.position=a.scrollTop=c.getScrollY()}}else {c.suspendEvent('scroll');c.scrollBy(0,(i-b.startIndex)*a.rowHeight);c.resumeEvent('scroll')}c.refreshSize(b.getCount()!==g);return}if(g&&d>b.endIndex){a.refreshSize();if(e>0){a.onRangeFetched(null,b.startIndex,Math.min(l.getCount(),b.startIndex+a.viewSize)-1,null,!0)}c.refreshSize(b.getCount()!==g);return}if(d<b.startIndex&&h<=b.endIndex){a.refreshView(b.startIndex-j.length+k.length);return}if(d<b.startIndex&&h<=b.endIndex&&f){c.suspendEvent('scroll');c.setScrollY(a.position=a.scrollTop+=f);c.resumeEvent('scroll')}a.refreshView()},scrollTo:function(b,i){var p=arguments,a=this,d=a.view,f=d.lockingPartner&&d.lockingPartner.grid.isVisible()&&d.lockingPartner.bufferedRenderer,g=a.store,j=g.getCount(),h,m,n,o,e,l,c,k;if(i!==undefined&&!(i instanceof Object)){i={select:p[1],callback:p[2],scope:p[3]}}if((e=d.dataSource.groupingFeature)&&e.collapsible){if(b.isEntity){c=b}else {c=d.store.getAt(Math.min(Math.max(b,0),d.store.getCount()-1))}l=e.getMetaGroup(c);if(l&&l.isCollapsed){if(!e.isExpandingOrCollapsing){e.expand(e.getGroup(c).getGroupKey());j=g.getCount();b=e.indexOf(c)}else {c=l.placeholder;b=e.indexOfPlaceholder(c)}}else {b=e.indexOf(c)}}else {if(b.isEntity){c=b;b=g.indexOf(c);if(b===-1){return}}else {b=Math.min(Math.max(b,0),j-1);c=g.getAt(b)}}if(c&&(n=d.getNode(c))){d.grid.ensureVisible(c,i);a.onViewScroll();a.onViewScrollEnd();return}if(b<d.all.startIndex){k=-1;h=Math.max(Math.min(b-Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),j-a.viewSize+1),0);m=Math.min(h+a.viewSize-1,j-1)}else {k=1;m=Math.min(b+Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),j-1);h=Math.max(m-(a.viewSize-1),0)}o=Math.max(h*a.rowHeight,0);g.getRange(h,m,{callback:function(j,e,h){a.renderRange(e,h,!0,!0);c=g.data.getRange(b,b+1)[0];n=d.getNode(c);d.body.translate(null,a.bodyTop=o);if(k===1){a.refreshSize()}if(f){f.renderRange(e,h,!0,!0);a.syncRowHeights();f.view.body.translate(null,f.bodyTop=o);if(k===1){f.refreshSize()}}if(!n){return}d.grid.ensureVisible(c,i);a.scrollTop=a.position=a.view.getScrollY();if(f){f.position=f.scrollTop=a.scrollTop}}})},onViewScroll:function(){var a=this,f=a.store,d=f.getCount(),c,b,e=a.scrollTop=a.view.getScrollY();if(a.needsPointerEventsFix){a.view.body.dom.style.pointerEvents='none'}if(!(a.disabled||d<a.viewSize)){c=e-a.position;b=c>0?1:-1;if(Math.abs(c)>=20||b!==a.lastScrollDirection){a.lastScrollDirection=b;a.handleViewScroll(a.lastScrollDirection)}}},onViewScrollEnd:function(){if(this.needsPointerEventsFix){this.view.body.dom.style.pointerEvents=''}},handleViewScroll:function(h){var a=this,d=a.view.all,g=a.store,f=a.viewSize,e=g.getCount()-1,b,c;if(h===-1){if(d.startIndex){if(a.topOfViewCloseToEdge()){b=Math.max(0,a.getLastVisibleRowIndex()+a.trailingBufferZone-f)}}}else {if(d.endIndex<e){if(a.bottomOfViewCloseToEdge()){b=Math.max(0,a.getFirstVisibleRowIndex()-a.trailingBufferZone)}}}if(b==null){a.position=a.scrollTop;a.loadId++}else {c=Math.min(b+f-1,e);if(a.variableRowHeight&&c===d.endIndex&&c<e){c++;a.viewSize=f++;if(g.isBufferedStore){g.setViewSize(a.viewSize)}}if(b!==d.startIndex||c!==d.endIndex){a.renderRange(b,c);return !0}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.bodyHeight<a.scrollTop+a.view.lastBox.height+a.numFromEdge*a.rowHeight}else {return a.view.all.endIndex-a.getLastVisibleRowIndex()<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-a.numFromEdge*a.rowHeight}else {return a.getFirstVisibleRowIndex()-a.view.all.startIndex<a.numFromEdge}},refreshView:function(a){var b=this,d=b.viewSize,h=b.view.all,g=b.store,e=g.getCount(),f=Math.max(0,e-1),c;if(!e){return b.doRefreshView([],0,0)}else {if(e<d){a=0;c=f}else {if(a==null){if(b.nextRefreshStartIndex!=null){a=b.nextRefreshStartIndex;b.nextRefreshStartIndex=null}else {a=h.startIndex}}a=Math.max(0,Math.min(a,f-(d-b.leadingBufferZone)+1));c=Math.min(a+d-1,f);if(c-a+1>d){a=c-d+1}}}if(a===0&&c===0&&e===0){b.doRefreshView([],0,0)}else {g.getRange(a,c,{callback:b.doRefreshView,scope:b})}},doRefreshView:function(i,h,p,q){var a=this,b=a.view,c=b.all,l=c.startIndex,m=c.endIndex,e,f,n=c.getCount(),o,k=h!==c.startIndex,g,d,j;if(b.refreshCounter){if(b.hasListeners.beforerefresh&&b.fireEvent('beforerefresh',b)===!1){return}b.refreshing=a.refreshing=!0;j=b.saveFocusState();b.clearViewEl(!0);b.refreshCounter++;if(i.length){o=b.doAdd(i,h);if(k){e=c.item(l,!0);f=c.item(m,!0);if(e){d=-e.offsetTop}else {if(f){d=c.last(!0).offsetTop-f.offsetTop}}if(d){a.bodyTop=Math.max(a.bodyTop+d,0);a.scrollTop=a.bodyTop?a.scrollTop+d:0}else {a.bodyTop=g=h*a.rowHeight;a.scrollTop=Math.max(g-a.rowHeight*(g<a.bodyTop?a.leadingBufferZone:a.trailingBufferZone,0))}}}else {if(a.scrollTop){a.bodyTop=a.scrollTop=0}b.addEmptyText()}if(k){a.setBodyTop(a.bodyTop);b.suspendEvent('scroll');b.setScrollY(a.position=a.scrollTop);b.resumeEvent('scroll')}a.refreshSize();b.refreshSize(c.getCount()!==n);b.fireEvent('refresh',b,i);j();b.headerCt.setSortState();b.refreshNeeded=b.refreshing=a.refreshing=!1}else {b.refresh()}},renderRange:function(b,c,f,d){var a=this,e=a.view.all,g=a.store;if(!(b===e.startIndex&&c===e.endIndex)){if(g.rangeCached(b,c)){a.cancelLoad();if(a.synchronousRender||f){a.onRangeFetched(null,b,c,null,d)}else {if(!a.renderTask){a.renderTask=new Ext.util.DelayedTask(a.onRangeFetched,a,null,!1)}a.renderTask.delay(1,null,null,[null,b,c,null,d])}}else {a.attemptLoad(b,c)}}},onRangeFetched:function(h,e,j,x,w){var a=this,b=a.view,v=b.el,u,c=b.all,l,i=0,m,d,f=b.lockingPartner&&!w&&!a.doNotMirror&&b.lockingPartner.bufferedRenderer,g,s,r,p,o,k=a.variableRowHeight,q,t,n;if(b.destroyed){return}if(h){a.scrollTop=a.view.getScrollY()}else {h=a.store.getRange(e,j);if(!h){return}}q=Ext.Element.getActiveElement();t=v.contains(q);m=e*a.rowHeight;if(e<c.startIndex&&j>c.endIndex){r=c.startIndex-e;b.clearViewEl(!0);g=b.doAdd(h,e);b.fireEvent('itemadd',h,e,g);for(o=0;o<r;o++){i-=g[o].offsetHeight}d=a.bodyTop+i}else {if(a.teleported||e>c.endIndex||j<c.startIndex){d=m;if(k){p=a.scrollTop<a.position?a.leadingBufferZone:a.trailingBufferZone;if(e>p){d=a.scrollTop-a.rowHeight*p}}b.clearViewEl(!0);a.teleported=!1}if(!c.getCount()){g=b.doAdd(h,e);b.fireEvent('itemadd',h,e,g)}else {if(j>c.endIndex){l=Math.max(e-c.startIndex,0);if(k){i=c.item(c.startIndex+l,!0).offsetTop}g=c.scroll(Ext.Array.slice(h,c.endIndex+1-e),1,l);if(k){d=a.bodyTop+i}else {d=m}}else {l=Math.max(c.endIndex-j,0);u=c.startIndex;g=c.scroll(Ext.Array.slice(h,0,c.startIndex-e),-1,l);if(k){d=a.bodyTop-c.item(u,!0).offsetTop;if(!c.startIndex){if(d){b.setScrollY(a.position=a.scrollTop-=d);d=0}}else {if(d<0){i=c.startIndex*a.rowHeight;b.setScrollY(a.position=a.scrollTop+=i);d=a.bodyTop+i}}}else {d=m}}}a.position=a.scrollTop}if(t&&!v.contains(q)){n=b.actionableMode?b.actionPosition:b.lastFocused;if(n&&n.column){b.onFocusLeave({});n.column.focus()}}d=Math.max(Math.floor(d),0);if(b.positionBody){a.setBodyTop(d)}if(g&&f&&!f.disabled){f.scrollTop=f.position=a.scrollTop;if(f.view.ownerCt.isVisible()){s=f.onRangeFetched(null,e,j,x,!0);if(b.ownerGrid.syncRowHeight||f.variableRowHeight!==k){a.syncRowHeights(g,s);a.bodyHeight=b.body.dom.offsetHeight}}if(f.bodyTop!==d){f.setBodyTop(d)}f.view.setScrollY(a.scrollTop)}return g},syncRowHeights:function(b,e){var d=this,c=0,f=1,i=[],h=[],j=Ext.grid.locking.RowSynchronizer,a,g;if(b&&e){c=b.length;f=e.length}if(c!==f){b=d.view.all.slice();e=d.view.lockingPartner.all.slice();c=f=b.length}for(a=0;a<c;a++){i[a]=g=new j(d.view,b[a]);g.measure()}for(a=0;a<f;a++){h[a]=g=new j(d.view.lockingPartner,e[a]);g.measure()}for(a=0;a<c;a++){i[a].finish(h[a]);h[a].finish(i[a])}d.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var a=this,c=a.view,b=c.lockingPartner.bufferedRenderer;if(c.componentLayoutCounter){delete a.rowHeight;a.refreshSize();if(b.rowHeight!==a.rowHeight){delete b.rowHeight;b.refreshSize()}}},setBodyTop:function(d){var a=this,c=a.view,e=c.all,f=a.store,b=c.body;if(!b.dom){return}a.translateBody(b,d);if(a.variableRowHeight){a.bodyHeight=b.dom.offsetHeight;if(e.endIndex===f.getCount()-1){a.scrollHeight=d+a.bodyHeight-1}else {a.scrollHeight=a.getScrollHeight()}a.stretchView(c,a.scrollHeight)}else {a.bodyHeight=e.getCount()*a.rowHeight}},translateBody:function(b,a){b.translate(null,this.bodyTop=a)},getFirstVisibleRowIndex:function(d,f,c,e){var a=this,l=a.view,g=l.all,j=g.elements,k=a.viewClientHeight,b,h,i=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(!arguments.length){d=g.startIndex;f=g.endIndex;c=a.scrollTop;e=c+k;if(i>e||i+a.bodyHeight<c){a.teleported=!0;return Math.floor(a.scrollTop/a.rowHeight)}b=d+Math.min(a.numFromEdge+(a.lastScrollDirection===-1?a.leadingBufferZone:a.trailingBufferZone),Math.floor((f-d)/2))}else {b=d+Math.floor((f-d)/2)}h=i+j[b].offsetTop;if(h+j[b].offsetHeight<=c){return a.getFirstVisibleRowIndex(b+1,f,c,e)}if(h<=c){return b}else {if(b!==d){return a.getFirstVisibleRowIndex(d,b-1,c,e)}}}return Math.floor(a.scrollTop/a.rowHeight)},getLastVisibleRowIndex:function(f,d,e,c){var a=this,m=a.view,g=m.all,l=g.elements,h=a.viewClientHeight,b,i,k,j=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(!arguments.length){f=g.startIndex;d=g.endIndex;e=a.scrollTop;c=e+h;if(j>c||j+a.bodyHeight<e){a.teleported=!0;return Math.floor(a.scrollTop/a.rowHeight)+Math.ceil(h/a.rowHeight)}b=d-Math.min(a.numFromEdge+(a.lastScrollDirection===1?a.leadingBufferZone:a.trailingBufferZone),Math.floor((d-f)/2))}else {b=f+Math.floor((d-f)/2)}i=j+l[b].offsetTop;if(i>c){return a.getLastVisibleRowIndex(f,b-1,e,c)}k=i+l[b].offsetHeight;if(k>=c){return b}else {if(b!==d){return a.getLastVisibleRowIndex(b+1,d,e,c)}}}return a.getFirstVisibleRowIndex()+Math.ceil(h/a.rowHeight)},getScrollHeight:function(){var a=this,j=a.view,d=j.all,i=a.store,c=i.getCount(),g=d.getCount(),h,f,e,b;if(!c){return 0}if(!a.hasOwnProperty('rowHeight')){if(g){if(a.variableRowHeight){a.rowHeight=Math.floor(a.bodyHeight/g)}else {h=d.first();f=h.getHeight();if(Ext.isIE8){e=h.getBorderWidth('b');if(e>0){f-=e}}a.rowHeight=f}}else {delete a.rowHeight}}if(a.variableRowHeight){if(d.endIndex===c-1){b=a.bodyTop+a.bodyHeight-1}else {b=Math.floor((c-g)*a.rowHeight)+a.bodyHeight;b+=a.bodyTop-d.startIndex*a.rowHeight}}else {b=Math.floor(c*a.rowHeight)}return a.scrollHeight=b},attemptLoad:function(b,c){var a=this;if(a.scrollToLoadBuffer){if(!a.loadTask){a.loadTask=new Ext.util.DelayedTask(a.doAttemptLoad,a,[])}a.loadTask.delay(a.scrollToLoadBuffer,a.doAttemptLoad,a,[b,c])}else {a.doAttemptLoad(b,c)}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(b,c){var a=this;if(!a.destroyed){a.store.getRange(b,c,{loadId:++a.loadId,callback:function(e,f,g,d){if(d.loadId===a.loadId){a.onRangeFetched(e,f,g,d)}},fireEvent:!1})}},destroy:function(){var a=this,b=a.view;a.cancelLoad();if(b&&b.el){b.un('scroll',a.onViewScroll,a)}if(a.store){a.unbindStore()}a.viewListeners=a.gridListeners=a.view=a.grid=Ext.destroy(a.viewListeners,a.stretcher,a.gridListeners);Ext.plugin.Abstract.prototype.destroy.call(this)}},0,0,0,0,['plugin.bufferedrenderer'],0,[Ext.grid.plugin,'BufferedRenderer'],function(a){if(Ext.supports.Touch){a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2;a.prototype.numFromEdge=1}});Ext.define('Ext.rtl.grid.plugin.BufferedRenderer',{override:'Ext.grid.plugin.BufferedRenderer',translateBody:function(b,a){if(this.isRTL&&Ext.supports.xOriginBug&&this.view.scrollFlags.y){b.translate(Ext.getScrollbarSize().width,this.bodyTop=a)}else {arguments.callee.$previous.call(this,b,a)}}});Ext.cmd.derive('velocityGrid.view.View',Ext.grid.Panel,{cls:'extjsWizardWrapper velocityGridClass',controller:'velocityGridViewController',pageSize:100,plugins:[{ptype:'bufferedrenderer',trailingBufferZone:5,leadingBufferZone:5}],columnLines:!0,lockedGridConfig:{header:!1,width:365,forceFit:!0},lockedViewConfig:{scroll:'horizontal'},allowDeselect:!0,enableLocking:!0,selModel:{selType:'checkboxmodel',mode:'SINGLE',allowDeselect:!0},initGridData:function(f,e){var a=this;var d=a.up();var c=a.getController();gridData=c.getVelocityGridStore(f,a.pageSize);a.currentlyActiveColumns=c.getRefactoredColumns(!0);var b=a.getInitialConfig();if(b['selectedNodes']&&b['selectedNodes'].length>0){c.filterStore('dbGroupingKey',b['selectedNodes'],!0,gridData.store)}if(e){if(a.store.isFiltered()){gridData.store.filter(a.store.filters.getAt(0))}}a.suspendLayouts();a.reconfigure(gridData.store,a.currentlyActiveColumns);a.down('pagingtoolbar').bindStore(gridData.store);a.resumeLayouts(!0);if(d){d.doneLoading()}else {a.unmask()}a.tryReizeAccordingToParentDiv()},ganttCrudFinished:function(b){var a=this;a.initGridData(a.crudManager.getTaskStore())},initComponent:function(){var a=this;var d=a.up();var c=Ext.fly('velocityGridViewHasData');var e=a.getController();if(c){Ext.apply(a,{height:c.getHeight()})}Ext.apply(a,{rtl:d!=null?d.rtl:a.rtl,emptyText:a.L('NoDataToDisplay'),dockedItems:[{style:'background-color: #f0f3f7 !important;',xtype:'toolbar',dock:'top',items:[{xtype:'button',text:a.L('WEEKLY'),isWeekly:!0,reference:'switchTimeline',cls:'activeButtonBackground'},{xtype:'button',text:a.L('MONTHLY'),isWeekly:!1,reference:'switchTimeline'},{xtype:'tbfill'},{xtype:'button',reference:'expandButton',cls:'actionButton',pressed:!1,hidden:a.getInitialConfig('renderTo')==null,iconCls:'fa fa-expand fa-active'},{xtype:'button',text:a.L('Gantt'),reference:'launchGanttByStage',style:'width: 60px !important;',hidden:a.getInitialConfig('renderTo')==null,cls:'actionButton'},{xtype:'button',text:a.L('Tools'),cls:'actionButton toolsButton',style:'width: 65px !important;margin-left: 5px;',menu:[{text:a.L('DownloadCSV'),reference:'downloadCSV'}]}]},{xtype:'toolbar',dock:'top',style:'background-color: #f0f3f7 !important;',enableOverflow:!0,defaults:{xtype:'checkbox',checked:!0,handler:function(b,c){if(b.xtype=='checkbox'){a.toggleHiddenColByDateType(b,c)}}},items:[{xtype:'tbfill'},{boxLabel:a.L('Baseline'),dateType:'B',beforeLabelTpl:a.getColoredSpanBox('rgba(128,77,0,.35)')},{boxLabel:a.L('Expected'),dateType:'E',beforeLabelTpl:a.getColoredSpanBox('#ffe456')},{boxLabel:a.L('Completed'),dateType:'C',beforeLabelTpl:a.getColoredSpanBox('rgba(52,247,142,.35)')},{boxLabel:a.L('BaselineTotal'),dateType:'TB',beforeLabelTpl:a.getColoredSpanBox('rgba(128,77,0,.35)',!0)},{boxLabel:a.L('ExpectedTotal'),dateType:'TE',beforeLabelTpl:a.getColoredSpanBox('#ffe456',!0)},{boxLabel:a.L('CompletedTotal'),dateType:'TC',beforeLabelTpl:a.getColoredSpanBox('rgba(52,247,142,.35)',!0)},{xtype:'tbfill'}]}],bbar:{xtype:'pagingtoolbar',displayInfo:!0,style:'background-color: #f0f3f7 !important;',displayMsg:a.L('Displaying')+' {0} - {1} '+a.L('Of')+' {2}',lastText:a.L('LastPage'),nextText:a.L('NextPage'),prevText:a.L('PreviousPage'),firstText:a.L('FirstPage'),afterPageText:a.L('Of')+' {0}',beforePageText:a.L('Page'),emptyMsg:a.L('NoDataToDisplay'),refreshText:a.L('refreshText')}});var b=a.getInitialConfig();if(b['dispatcher']){b['dispatcher'].on('velocityGridFilterSelectionChanged',function(b,a){e.filterStore('dbGroupingKey',a.selection,!0)});b['dispatcher'].on('velocityGridConstructSelectionChanged',function(d,c){b.constructId=c.constructId;a.initGridData(a.crudManager.getTaskStore(),!0)})}Ext.grid.Panel.prototype.initComponent.apply(this,arguments);if(a.getInitialConfig('tasksStore')==null){a.crudManager=Ext.create('velocityGrid.store.CrudManager',{projectId:a.getInitialConfig('projectId')});a.crudManager.load();this.mon(a.crudManager,'stageStoreLoadCompleted',a.ganttCrudFinished,this)}else {a.initGridData(a.getInitialConfig('tasksStore'))}window.addEventListener('resize',Ext.Function.createBuffered(function(){a.tryReizeAccordingToParentDiv()},150))},toggleHiddenColByDateType:function(d,f){var a=this;var e=d.up();var c=a.getController();a.excludesColumns={};e.queryBy(function(a){return a.xtype=='checkbox'}).forEach(function(b){a.excludesColumns[b.dateType]=!b.checked});a.currentlyActiveColumns=c.getRefactoredColumns(c.weeklyTimeline,a.excludesColumns);var b=0;Ext.Object.eachValue(excludesObject,function(a){if(!a){b+=20}});b=b<40?40:b;b+=4;a.currentlyActiveColumns.forEach(function(a){if(a.xtype=='templatecolumn'){a.minWidth=b;a.maxWidth=b}});a.reconfigure(a.currentlyActiveColumns)},tryReizeAccordingToParentDiv:function(){var b=this;var e=b.getInitialConfig();var d=e['renderTo'];if(d){var a=Ext.fly(d).getSize();if(a){b.setSize(a.width-30,a.height-30)}}else {var c=b.up();if(c&&c.rendered){var a=c.getSize();if(a){b.setSize(a.width,a.height)}}}},getColoredSpanBox:function(a,b){return '<span style="margin-top: 8px;margin-right: 2px;margin-left: 2px; background-color: '+a+' ; width:15px;height: 15px;display: inline-block; '+(b===!0?'border: 1px dotted gray':'')+'"></span>'},scrollToToday:function(){var b=this;var c=b.getColumns().filter(function(a){return a.tdCls=='todayRedLine'})[0];try{var a=c.getPosition(!0);if(a&&a[0]){if(a&&a[0]){setTimeout(function(){b.scrollByDeltaX(-1000000);b.scrollByDeltaX(a[0])})}}}catch(d){}},listeners:{beforedestroy:function(a){if(a.getInitialConfig()['dispatcher']){a.getInitialConfig()['dispatcher'].off('velocityGridFilterSelectionChanged');a.getInitialConfig()['dispatcher']=null}if(a.crudManager){a.removeManagedListener(a.crudManager,'stageStoreLoadCompleted');a.crudManager.doDestroy()}},afterrender:function(a){var c=a.up();if(!c){a.mask(a.L('LOADING'))}var b=a.down('pagingtoolbar');if(a.rtl){b.queryBy(function(b){return b.xtype=='button'}).forEach(function(b){b.addCls('rotatePaginationButtonInRtl')})}b.query('#refresh')[0].setHidden(!0)},reconfigure:function(a){a.down('pagingtoolbar').doRefresh();a.scrollToToday()},rowclick:function(b,a,d,c,f,e){b.setSelection(a)}},constructor:function(b){var a=this;a.currentLocale=b.locale;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';velocityGrid.locale[a.currentLocale].apply();Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['velocityGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','velocityGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'velocityGrid':!0},['widget.velocityGrid'],[[velocityGrid.mixin.Localizable.prototype.mixinId||velocityGrid.mixin.Localizable.$className,velocityGrid.mixin.Localizable]],[velocityGrid.view,'View'],0);Ext.cmd.derive('issuesByStageByConstruct.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!issuesByStageByConstruct.locale.Active){issuesByStageByConstruct.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=issuesByStageByConstruct.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in issuesByStageByConstruct.locale.Active){issuesByStageByConstruct.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {issuesByStageByConstruct.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[issuesByStageByConstruct.locale,'Locale'],0);Ext.cmd.derive('issuesByStageByConstruct.locale.En',issuesByStageByConstruct.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesByStageByConstruct.view.IssuesByStagesByConstructView':{Loading:'Loading...',completed:'Completed',late:'Late',inProgress:'In Progress',soonToStart:'Soon To Start',notStarted:'Not Started',stagesTab:'Administrative Stages',categoryTab:'Kinds',tools:'Tools',refresh:'Refresh',loading:'Loading...',total:'Total'},'issuesByStageByConstruct.view.IssuesByStageByConstructController':{administrative_stages:'Administrative Stages',kinds:'Kind',categoriesLabel:'Categories',noIssueStage:'Without Process',loading:'Loading...',Total_for_Project:'Total For Project',execution_stages:'Execution Stages'}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesByStageByConstruct.locale,'En'],0);Ext.cmd.derive('issuesByStageByConstruct.locale.He',issuesByStageByConstruct.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesByStageByConstruct.view.IssuesByStagesByConstructView':{completed:'',late:' ',inProgress:'',soonToStart:' ',notStarted:' ',stagesTab:' ',categoryTab:'',tools:'',refresh:'',loading:'...',total:' '},'issuesByStageByConstruct.view.IssuesByStageByConstructController':{administrative_stages:' ',kinds:'',categoriesLabel:'',noIssueStage:'  ',loading:'...',Total_for_Project:'" ',execution_stages:' '}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesByStageByConstruct.locale,'He'],0);Ext.cmd.derive('issuesByStageByConstruct.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in issuesByStageByConstruct.locale.Active){if(a===issuesByStageByConstruct.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in issuesByStageByConstruct.locale.Active){issuesByStageByConstruct.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[issuesByStageByConstruct.mixin,'Localizable'],0);Ext.cmd.derive('issuesByStageByConstruct.store.Store',Ext.data.Store,{proxy:{type:'memory',reader:{type:'json'}}},0,0,0,0,0,0,[issuesByStageByConstruct.store,'Store'],0);Ext.cmd.derive('issuesByStageByConstruct.view.IssuesByStageByConstructController',Ext.app.ViewController,{stores:{},orderSubColumnByStatus:{notStarted:0,late:1,soonToStart:2,inProgress:3,completed:4,emptyCol:5},initial:function(c){var a=this;var b=a.getView();if(c=='administrativeView'){a.storeFirst=Ext.create('issuesByStageByConstruct.store.Store');a.createAdministrativeViewStore();a.administrativeTabClicked();b.unmask();b.tryReizeAccordingToParentDiv()}else {a.storeSecond=Ext.create('issuesByStageByConstruct.store.Store');a.createStagesViewStore()}},hideColumnsWhichNotNeeded:function(b){var c=this;var a=c.getView();a.columnManager.getColumns().forEach(function(c){if(b=='administrativeView'){if(a.subColToShowAdministrativeTab[c.dataIndex]==null&&c.dataIndex!='stageName'){c.disableFilter=!0;c.setHidden(!0)}}else {if(a.subColToShowStageTab[c.dataIndex]==null&&c.dataIndex!='stageName'){c.disableFilter=!0;c.setHidden(!0)}}})},createAdministrativeViewStore:function(){var b=this;var a=b.getView();b.setColHeadersTableAdministrativeView();var f=Ext.create('issuesByStageByConstruct.store.Store');var e=f.getModel();var d={};Object.keys(a.dataRowsAdministrativeView.issuesByStageByConstruct).forEach(function(c){Object.keys(a.dataRowsAdministrativeView.issuesByStageByConstruct[c]).forEach(function(f){var g=0;a.tempSubColumnAdministrative=[];for(status in a.dataRowsAdministrativeView.issuesByStageByConstruct[c][f]){d[status]=!0;b.pushStatusToSubColumnArray(f,status,a.dataRowsAdministrativeView.issuesByStageByConstruct[c][f][status],'AdministrativeView',c);e.addFields([{name:f+'-'+status}]);g=g+a.dataRowsAdministrativeView.issuesByStageByConstruct[c][f][status]}b.pushStatusToSubColumnArray(f,'emptyCol','emptyCol','AdministrativeView','emptyCol');a.columnsAdministrativeView[f].columns=a.tempSubColumnAdministrative;b.pushTotalStatusToSubColumnArray(f,'total',g,'AdministrativeView',c);e.addFields([{name:f+'-total'}])})});var c=null;Object.keys(a.dataRowsAdministrativeView.stagesRowHeaders).forEach(function(e){var b={stageName:a.dataRowsAdministrativeView.stagesRowHeaders[e].name};var f={};if(a.dataRowsAdministrativeView.issuesByStageByConstruct[e]){Object.keys(a.dataRowsAdministrativeView.issuesByStageByConstruct[e]).forEach(function(c){f[c]=!0;var d=0;Object.keys(a.dataRowsAdministrativeView.issuesByStageByConstruct[e][c]).forEach(function(f){d=d+a.dataRowsAdministrativeView.issuesByStageByConstruct[e][c][f];b[c+'-'+f]=a.dataRowsAdministrativeView.issuesByStageByConstruct[e][c][f]});b[c+'-total']=d;b['stageId']=e})}for(buildingId in a.dataRowsAdministrativeView.constructHeaders){if(!f[buildingId]){Object.keys(d).forEach(function(a){b[buildingId+'-'+a]=0});b[buildingId+'-total']=0}}b.id=e;if(b.id!='null'){a.storeAdministrativeView.push(b)}else {c=b}});if(c){if(Object.keys(a.dataRowsAdministrativeView.issuesByStageByConstruct).length>1){a.storeAdministrativeView.unshift({id:-2})}c.stageName=b.L('execution_stages');a.storeAdministrativeView.unshift(c)}},setColHeadersTableAdministrativeView:function(){var b=this;var a=b.getView();for(building in a.dataRowsAdministrativeView.constructHeaders){a.columnsAdministrativeView[building]={header:a.dataRowsAdministrativeView.constructHeaders[building],menuDisabled:!0,resizable:!1}}},createStagesViewStore:function(){var b=this;var a=b.getView();b.setColHeadersTableStagesView();var f=Ext.create('issuesByStageByConstruct.store.Store');var d=f.getModel();var c={};Object.keys(a.dataRowstagesKindView.issuesByStageByConstruct).forEach(function(e){Object.keys(a.dataRowstagesKindView.issuesByStageByConstruct[e]).forEach(function(f){var g=0;a.tempSubColumnStageKind=[];for(status in a.dataRowstagesKindView.issuesByStageByConstruct[e][f]){c[status]=!0;b.pushStatusToSubColumnArray(f,status,a.dataRowstagesKindView.issuesByStageByConstruct[e][f][status],'StagesView',e);d.addFields([{name:f+'-'+status}]);g=g+a.dataRowstagesKindView.issuesByStageByConstruct[e][f][status]}b.pushStatusToSubColumnArray(f,'emptyCol','emptyCol','StagesView','emptyCol');a.columnsStageView[f].columns=a.tempSubColumnStageKind;b.pushTotalStatusToSubColumnArray(f,'total',g,'StagesView',e);d.addFields([{name:f+'-total'}])})});var e={};Object.keys(a.dataRowstagesKindView.stagesRowHeaders).forEach(function(d){var b={stageName:a.dataRowstagesKindView.stagesRowHeaders[d].name};var f={};if(a.dataRowstagesKindView.issuesByStageByConstruct[d]){Object.keys(a.dataRowstagesKindView.issuesByStageByConstruct[d]).forEach(function(c){f[c]=!0;var e=0;Object.keys(a.dataRowstagesKindView.issuesByStageByConstruct[d][c]).forEach(function(f){e=e+a.dataRowstagesKindView.issuesByStageByConstruct[d][c][f];b[c+'-'+f]=a.dataRowstagesKindView.issuesByStageByConstruct[d][c][f]});b[c+'-total']=e;b['stageId']=d})}for(buildingId in a.dataRowstagesKindView.constructHeaders){if(!f[buildingId]){Object.keys(c).forEach(function(a){b[buildingId+'-'+a]=0});b[buildingId+'-total']=0}}b.id=d;if(b.id!=-1){a.storeStageKindView.push(b)}else {e=b}})},administrativeTabClicked:function(){var b=this;var a=b.getView();b.storeFirst.loadData(a.storeAdministrativeView);a.reconfigure(b.storeFirst,b.getAdministrativeColumnsHeaders());a.unmask();a.tryReizeAccordingToParentDiv()},stageKindTabClicked:function(){var b=this;var a=b.getView();b.storeSecond.loadData(a.storeStageKindView);a.reconfigure(b.storeSecond,b.getStageKindColumnsTabHeaders());a.unmask();a.tryReizeAccordingToParentDiv()},setColHeadersTableStagesView:function(){var b=this;var a=b.getView();for(building in a.dataRowstagesKindView.constructHeaders){a.columnsStageView[building]={header:a.dataRowstagesKindView.constructHeaders[building],menuDisabled:!0,resizable:!1}}},getAdministrativeColumnsHeaders:function(){var c=this;var a=c.getView();var b=[{header:c.L('administrative_stages'),menuDisabled:!0,width:360,maxWidth:360,minWidth:360,locked:!0,sortable:!1,dataIndex:'stageName',tdCls:'rowHeightFixedCol'}];Object.keys(a.columnsAdministrativeView).forEach(function(c){if(a.columnsAdministrativeView[c].columns){a.columnsAdministrativeView[c].columns.forEach(function(a){if(a.dataIndex!=null&&(a.dataIndex.indexOf('completed')!=-1||a.dataIndex.indexOf('notStarted')!=-1)){a.hidden=!0}});b.push(a.columnsAdministrativeView[c])}});return b},getStageKindColumnsTabHeaders:function(){var c=this;var a=c.getView();var b=[{header:c.L('kinds'),menuDisabled:!0,width:360,maxWidth:360,locked:!0,sortable:!1,dataIndex:'stageName',tdCls:'rowHeightFixedCol'}];Object.keys(a.columnsStageView).forEach(function(c){if(a.columnsStageView[c].columns){a.columnsStageView[c].columns.forEach(function(a){if(a.dataIndex!=null&&(a.dataIndex.indexOf('completed')!=-1||a.dataIndex.indexOf('notStarted')!=-1)){a.hidden=!0}});b.push(a.columnsStageView[c])}});return b},pushTotalStatusToSubColumnArray:function(a,b,d,f,g){var h=this;var c=h.getView();var e={dataIndex:a+'-'+b,buildingKey:a,header:a+'-'+b,height:0,xtype:'widgetcolumn',cls:'panelWrapper',tdCls:'td-total-status-class',width:62,maxWidth:62,widget:{layout:'fit',xtype:'panel',cls:'wrapperButtonShadow',preventHeader:!0,items:[{xtype:'button',cls:'total-status-class',constructId:a,stageId:g,progressStatus:'total',handler:function(c){var h=c.up('IssuesByStagesByConstructView').config.dispatcher;if(h&&c.stageId!='emptyCol'){var e={};if(c.up('IssuesByStagesByConstructView').activeTab=='stageKindView'){e.subjectTypeId=c.up().getWidgetRecord().getData().stageId}else {e.stageId=c.up().getWidgetRecord().getData().stageId=='null'?null:c.up().getWidgetRecord().getData().stageId}if(c.constructId!='Total_for_Project'){e.area=c.constructId}h.trigger('extjs:IssuesClickedButton',e)}}}]},onWidgetAttach:function(h,c,e){c.items.getRange()[0].setText(c.title);c.stageTypeId=e.id;c.setVisible(e.data[c.dataIndex]!=0)}};if(f=='AdministrativeView'){if(d>0){c.subColToShowAdministrativeTab[a+'-'+b]=!0}c.tempSubColumnAdministrative.unshift(e)}else {if(d>0){c.subColToShowStageTab[a+'-'+b]=!0}c.tempSubColumnStageKind.unshift(e)}},pushStatusToSubColumnArray:function(c,a,f,g,h){var e=this;var b=e.getView();var d={dataIndex:c+'-'+a,buildingKey:c,height:0,header:c+'-'+a,statusType:a,cls:'panelWrapper',xtype:'widgetcolumn',width:298/3,maxWidth:298/3,widget:{layout:'fit',cls:'',preventHeader:!0,xtype:'panel',items:[{xtype:'button',cls:'status '+a,constructId:c,progressStatus:a,stageId:h,style:{backgroundColor:e.getColorByStatus(a)},handler:function(b){var e=b.up('IssuesByStagesByConstructView').config.dispatcher;if(e&&b.stageId!='emptyCol'){var d={};if(b.up('IssuesByStagesByConstructView').activeTab=='stageKindView'){d.subjectTypeId=b.up().getWidgetRecord().getData().stageId}else {d.stageId=b.up().getWidgetRecord().getData().stageId}d.progressStatus=b.progressStatus=='late'?'lateStart':b.progressStatus;if(b.constructId!='Total_for_Project'){d.area=b.constructId}e.trigger('extjs:IssuesClickedButton',d)}}}]},onWidgetAttach:function(e,b,d){b.items.getRange()[0].setText(d.data[b.dataIndex]);b.stageTypeId=d.id;b.setVisible(d.data[b.dataIndex]!=0)}};if(g=='AdministrativeView'){if(a=='emptyCol'){d.width=0;b.subColToShowAdministrativeTab[c+'-'+a]=!0}if(f>0){b.subColToShowAdministrativeTab[c+'-'+a]=!0}if(b.tempSubColumnAdministrative.length==0){b.tempSubColumnAdministrative=[6]}b.tempSubColumnAdministrative[e.orderSubColumnByStatus[d.statusType]]=d}else {if(a=='emptyCol'){d.width=0;b.subColToShowAdministrativeTab[c+'-'+a]=!0}if(f>0){b.subColToShowStageTab[c+'-'+a]=!0}if(b.tempSubColumnStageKind.length==0){b.tempSubColumnStageKind=[6]}b.tempSubColumnStageKind[e.orderSubColumnByStatus[d.statusType]]=d}},getColorByStatus:function(a){switch(a){case 'completed':return '#00B050!important;';break;case 'late':return '#D91E18!important;';case 'inProgress':return '#E38C19!important;';break;case 'soonToStart':return '#E9D017!important;';break;case 'notStarted':return '#dfdfdf!important;';break;default:return 'transparent!important;';}}},0,0,0,0,['controller.issuesByStageByConstructController'],[[issuesByStageByConstruct.mixin.Localizable.prototype.mixinId||issuesByStageByConstruct.mixin.Localizable.$className,issuesByStageByConstruct.mixin.Localizable]],[issuesByStageByConstruct.view,'IssuesByStageByConstructController'],0);Ext.cmd.derive('issuesByStageByConstruct.store.CrudManager',Ext.Base,{externalConfig:null,setExternalConfig:function(b){var a=this;a.externalConfig={};a.externalConfig.client=b.client},makeRequest:function(d,b){var c=this;var b=b||!1;if(!c.externalConfig){throw 'You need to setExternalConfig first!'}var a=new Ext.Deferred();if(!b){c.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}else {c.externalConfig.client.apexrest('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}return a.promise},initalTable:function(a,c){var d=this;var b={className:'IssuesProgressViewRequest',actionName:'getIssuesData',projectId:a,viewType:c};return d.makeRequest(b)}},0,0,0,0,0,0,[issuesByStageByConstruct.store,'CrudManager'],0);Ext.cmd.derive('issuesByStageByConstruct.view.IssuesByStagesByConstructView',Ext.grid.Panel,{enableLocking:!0,controller:'issuesByStageByConstructController',cls:'issuesByStagesByConstructView extjsWizardWrapper',currentLocale:'En',crudManager:null,disableSelection:!0,marginTop:40,columnLines:!0,width:'100%',viewConfig:{stripeRows:!1,getRowClass:function(a){if(a.id==-2){return 'emptyRowStyle'}}},initComponent:function(){var a=this;Ext.apply(a,{dispatcher:a.dispatcher,dockedItems:[{xtype:'toolbar',buttonAlign:'center',dock:'top',items:[{xtype:'button',text:this.L('stagesTab'),scale:'medium',cls:'buttonCss selectedTab tabClass categoryTab',reference:'switchTab',tooltip:this.L('stagesTab'),style:{marginRight:30,left:'0!important'},listeners:{click:function(b){a.mask('loading');a.activeTab='administrativeView';b.up().items.items.forEach(function(a){if(a.xtype=='checkbox'){if(a.statusType=='notStarted'||a.statusType=='completed'){a.setValue(!1)}else {a.setValue(!0)}}});b.up().queryBy(function(a){return a.reference=='switchTab'}).forEach(function(a){a.removeCls('selectedTab');a.addCls('unSelectedTab')});b.addCls('selectedTab');this.up('IssuesByStagesByConstructView').getController().administrativeTabClicked()}}},{xtype:'button',text:this.L('categoryTab'),scale:'medium',cls:'buttonCss tabClass categoryTab',reference:'switchTab',tooltip:this.L('categoryTab'),listeners:{click:function(b){a.mask('loading');a.activeTab='stageKindView';b.up().items.items.forEach(function(a){if(a.xtype=='checkbox'){if(a.statusType=='notStarted'||a.statusType=='completed'){a.setValue(!1)}else {a.setValue(!0)}}});b.up().queryBy(function(a){return a.reference=='switchTab'}).forEach(function(a){a.removeCls('selectedTab')});b.addCls('selectedTab');this.up('IssuesByStagesByConstructView').getController().stageKindTabClicked()}}},'<div style="width:80px"></div>',{xtype:'checkbox',boxLabel:a.L('notStarted'),beforeLabelTpl:a.getColoredSpanBox('#dfdfdf'),statusType:'notStarted',checked:!1,cls:'notStarted-filter',handler:function(c,b){a.checkboxHandler(c,b)}},{xtype:'checkbox',boxLabel:a.L('late'),cls:'late-filter',beforeLabelTpl:a.getColoredSpanBox('#D91E18'),statusType:'late',checked:!0,handler:function(c,b){a.checkboxHandler(c,b)}},{xtype:'checkbox',boxLabel:a.L('soonToStart'),cls:'soonToStart-filter',beforeLabelTpl:a.getColoredSpanBox('#E9D017'),statusType:'soonToStart',checked:!0,handler:function(c,b){a.checkboxHandler(c,b)}},{xtype:'checkbox',boxLabel:a.L('inProgress'),cls:'inProgress-filter',beforeLabelTpl:a.getColoredSpanBox('#E38C19'),statusType:'inProgress',checked:!0,handler:function(c,b){a.checkboxHandler(c,b)}},{xtype:'checkbox',boxLabel:a.L('completed'),cls:'completed-filter',beforeLabelTpl:a.getColoredSpanBox('#00B050'),statusType:'completed',checked:!1,handler:function(c,b){a.checkboxHandler(c,b)}},{xtype:'tbfill'},{xtype:'button',text:this.L('tools'),scale:'medium',cls:'buttonCss actionButton toolsButton',style:{width:'75px',marginLeft:'5px'},menu:[{text:a.L('refresh'),handler:function(){this.up().up().up().queryBy(function(a){if(a.xtype=='checkbox'){a.setValue(!0)}});a.getController().refactorData()}}],listeners:{click:function(a){}}}]}],columns:[]});window.addEventListener('resize',Ext.Function.createBuffered(function(){a.tryReizeAccordingToParentDiv()},150));Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},listeners:{render:function(a){a.mask('loading');a.crudManager.initalTable(a.projectId,'administrativeView').then(function(b){a.dataRowsAdministrativeView=b;a.getController().initial('administrativeView');a.getController().administrativeTabClicked()});a.crudManager.initalTable(a.projectId,'stageKind').then(function(b){a.dataRowstagesKindView=b;a.getController().initial('stageKind')})},viewready:function(a){var b=a.getView();var c=this;a.tip=Ext.create('Ext.tip.ToolTip',{target:b.el,delegate:b.cellSelector,trackMouse:!0,renderTo:Ext.getBody(),listeners:{beforeshow:function updateTipBody(g){var f=a.getView();var d=a.up();var h=g.triggerElement,i=g.triggerElement.parentElement,c=f.getHeaderByCell(h).text,b=f.getHeaderByCell(h).dataIndex;var e=f.getRecord(i).get(b);if(e){e=e.toString();if(b.indexOf('total')!=-1){c=d.L('total')}else {if(b.indexOf('late')!=-1){c=d.L('late')}else {if(b.indexOf('inProgress')!=-1){c=d.L('inProgress')}else {if(b.indexOf('soonToStart')!=-1){c=d.L('soonToStart')}else {if(b.indexOf('notStarted')!=-1){c=d.L('notStarted')}else {if(b.indexOf('complete')!=-1){c=d.L('completed')}}}}}}g.update('<div '+(a.rtl?'style="direction:rtl;"':'')+'><b>'+c+':</b>&nbsp'+e+'</div>')}else {return !1}}}})}},tryReizeAccordingToParentDiv:function(){var b=this;var e=b.getInitialConfig();var d=e['renderTo'];if(d){var a=Ext.fly(d).getSize();if(a){b.setSize(a.width-30,a.height-30)}}else {var c=b.up();if(c&&c.rendered){var a=c.getSize();if(a){b.setSize(a.width,a.height)}}}},getColoredSpanBox:function(a){if(!this.rtl){return '<span style="margin-top: 12px;margin-right: -10px;margin-left: 2px; background-color: '+a+' ; width:20px;height: 20px;display: inline-block; "></span>'}else {return '<span style="margin-top: 12px;margin-right: -10px;margin-left: -10px; background-color: '+a+' ; width:20px;height: 20px;display: inline-block; "></span>'}},checkboxHandler:function(c,e){var d=this;var b={};var a=0;c.up().items.getRange().forEach(function(d){if(d.xtype=='checkbox'){b[d.statusType]=d.checked}if(d.checked){a++}});d.getColumns().forEach(function(d){if(d.xtype=='widgetcolumn'&&d.dataIndex.indexOf('total')==-1){if(!b[d.statusType]){d.setHidden(!0)}else {d.setHidden(!1);var f=298/a;d.setMinWidth(f);d.setWidth(f)}if(d.statusType=='emptyCol'&&a==0){d.setHidden(!1);d.setMinWidth(298);d.setWidth(298)}}})},constructor:function(b){var a=this;a.projectId=b.projectId;a.dispatcher=b.dispatcher;a.crudManager=Ext.create('issuesByStageByConstruct.store.CrudManager');a.dataRowsAdministrativeView=[];a.dataRowstagesKindView=[];a.storeAdministrativeView=[];a.storeStageKindView=[];a.columnsAdministrativeView={};a.columnsStageView=[];a.subColToShowAdministrativeTab=[];a.subColToShowStageTab=[];a.tempSubColumnAdministrative=[];a.tempSubColumnStageKind=[];a.crudManager.setExternalConfig({client:b.clientInstance,projectId:b.projectId});a.viewType='administrativeView';a.activeTab='administrativeView';a.currentLocale=b.locale;a.currentLocale=a.currentLocale.charAt(0).toUpperCase()+a.currentLocale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';issuesByStageByConstruct.locale[a.currentLocale].apply();Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['IssuesByStagesByConstructView'],['component','box','container','panel','tablepanel','gridpanel','grid','IssuesByStagesByConstructView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'IssuesByStagesByConstructView':!0},['widget.IssuesByStagesByConstructView'],[[issuesByStageByConstruct.mixin.Localizable.prototype.mixinId||issuesByStageByConstruct.mixin.Localizable.$className,issuesByStageByConstruct.mixin.Localizable]],[issuesByStageByConstruct.view,'IssuesByStagesByConstructView'],0);Ext.cmd.derive('ccReidComponents.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!ccReidComponents.locale.Active){ccReidComponents.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=ccReidComponents.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in ccReidComponents.locale.Active){ccReidComponents.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {ccReidComponents.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[ccReidComponents.locale,'Locale'],0);Ext.cmd.derive('ccReidComponents.locale.En',ccReidComponents.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'tasksByStages.view.Grid':{Title:'Title',AssignTo:'Assign to',Progress:'Progress',lateStart:'Late',completed:'Completed',late:'Late',inProgress:'In Progress',soonToStart:'Soon To Start',Accountable:'Accountable',project:'Project'},'tasksByStages.view.GridController':{sendReminder:'Send Reminder'},'tasksByStages.view.Panel':{completed:'Completed',late:'Late',lateStart:'Late',inProgress:'In Progress',soonToStart:'Soon To Start',stagesTab:'Stages',categoryTab:'categories',DueDates:'Due Dates',Categories:'Categories',ProjectBuildings:'Project Buildings',Cancel:'Cancel',tools:'Tools',Copy:'copy',CSV:'csv',Excel:'excel',Print:'print',Refresh:'refresh',UndoCancel:'Undo Cancel'},'ccReidComponents.container.pagingtoolbar.Paging':{Of:'of',Displaying:'Displaying',LastPage:'Last Page',NextPage:'Next Page',PreviousPage:'Previous Page',FirstPage:'First Page',Page:'Page',NoDataToDisplay:'No Data To Display',refreshText:'Refresh'},'ccReidComponents.container.stagesAreasSelector.StagesAreasSelector':{ConstructRequired:'Construct - Required',StageRequired:'Stage - Required'},'ccReidComponents.container.filesView.FilesView':{Name:'Name',Description:'Description',Date:'Date',UploadBy:'Upload By',Type:'Type',involvedWorkflow:'involvedWorkflow'},'ccReidComponents.noneGeneric.container.workersSelector.WorkersSelector':{PositionHolderRequired:'Position holder - Required',NameRequired:'Name - Required'},'ccReidComponents.grid.tabGrid.TabGrid':{Construct__r:'Construct',Asset__r:'Asset',Spot__r:'Spot',Areas:'Location',Responsible_V1__r:'Responsible'},'stagesGrid.view.StagesGrid':{projectLevel:'Project Level',Level:'Level',NoDataToShow:'No data to show',NoStagesSelected:'No stages selected',constructLevel:'Construct Level'},'ccReidComponents.container.panel.PanelController':{ShowCancel:'Show Cancel',HideCancel:'Hide Cancel'}},General:{Add:'Add',Loading:'Loading...',All:'All',Weekly:'Weekly',Monthly:'Monthly',Quarterly:'Quarterly',Custom:'Custom',DueDate:'Due Date',FromDate:'From Date',ToDate:'To Date',ByArea:'By Area',Location:'Location',MissingRequiredParameters:'Missing required parameters',Stages:'Stages',notStarted:'Not Started',Project:'Project',AllStages:'All Stages',AdminView:'Admin View',Works:'Works',CustomTress:'Custom (stages tree)',TaskInitiator:'Task Initiator',Responsible:'Responsible',NoPlacement:'NoPlacement',WorkerInProject:'Worker In Project',AllRoles:'All Roles',NoDataToDisplay:'No Data To Display',NoFilters:'No Filters To Display',AllCategory:'All Category',Kind:'Kind',SubKind:'Sub Kind',EffectedStoreMissingRequiredParameters:'Effected Store Missing Required Parameters',IssueDetails:'Issue Details',SubjectTypeRequired:'Subject Type - Required',IssueTypeRequired:'Issue Type - Required',DescriptionRequired:'Description - Required',AssociatedInProject:'Associated In Project',ByAreaStage:'Area/Stage',PositionHolder:'Position Holder',accountable:'Accountable',Name:'Name',Required:'Required',IssueTiming:'Issue Timing',Status:'Status',MoreInformation:'More Information',RichDescription:'Rich Description',AddFile:'Add File',Submit:'Submit',Cancel:'Cancel',AddLink:'Add Link',LinkTitleLabel:'Link Title:',EmptyLinkName:'Link Name',FileName:'File Name',AttachFileByDragAndDropLabel:'Attach a file:',ChooseFromYourPc:'Choose from your pc',Confirm:'Confirm',LinkLabel:'Link:',HyperLinkEmpty:'HyperLink',Description:'Description',Spot:'Spot',Asset:'Asset',Summary:'Summary',Chatter:'Chatter',MinDateText:'This date is before the minimum date',MaxDateText:'This date is after the maximum date',monthYearText:'Choose a month (Control+Up/Down to move years)',NextText:'Next Month (Control+Right)',PrevText:'Previous Month (Control+Left)',Sunday:'Sunday',Monday:'Monday',Tuesday:'Tuesday',Wednesday:'Wednesday',Thursday:'Thursday',Friday:'Friday',Saturday:'Saturday',InProject:'Defined in this project',NotInProject:'Not defined in this project',CloseIssue:'Close Issue',ReOpen:'Re Open',DeleteFile:'Delete File',Edit:'Edit',EditFile:'Edit File',AreYouSure:'Are you sure?',RemoveRecord:'Remove Record',PlannedDuration:'Planned duration',ExpectedEndDate:'Expected End Date',ExpectedStartDate:'Expected Start Date',PlannedEndDate:'Planned End Date',PlannedStartDate:'Planned Start Date',RemoveFile:'Remove File',Details:'Details',Files:'Files',SubIssues:'Sub Issues',SimilarIssues:'Similar Issues',Meetings:'Meetings',Tasks:'Tasks',ThisDateCannotBeSelected:'This date cannot be selected',ExpectedDateFormat:'Expected date format: ',StartedDate:'Started date',CompletedDate:'Completed date',Start:'Start',End:'End',Duration:'Duration',ExpectedDuration:'Expected duration',ByYou:'By You',IssueForm:'Issue Form',Stage:'Stage',Construct:'Construct',OK:'OK',Yes:'Yes',No:'No',ClosePanel:'Close Panel',Close:'Close',StageDueDate:'Stage Due Date',IssuesAndSummary:'Issues And Summary',IssuesFor:'Issues for construct',NoValuesToFilter:'No Data To Show'}});this.callParent(arguments)}},1,0,0,0,0,0,[ccReidComponents.locale,'En'],0);Ext.cmd.derive('ccReidComponents.locale.He',ccReidComponents.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'tasksByStages.view.Grid':{Title:'',AssignTo:' ',Progress:'',lateStart:' ',completed:'',late:' ',inProgress:'',soonToStart:' ',Accountable:'',project:''},'tasksByStages.view.GridController':{sendReminder:' '},'tasksByStages.view.Panel':{completed:'',late:' ',lateStart:' ',inProgress:'',soonToStart:' ',stagesTab:'',categoryTab:'',tools:'',DueDates:'  ',Categories:'',Copy:'',CSV:' csv',Excel:' ',Print:'',Refresh:'',UndoCancel:' ',ProjectBuildings:' ',Cancel:''},'ccReidComponents.container.pagingtoolbar.Paging':{Of:'',Displaying:'',LastPage:' ',NextPage:' ',PreviousPage:' ',FirstPage:' ',Page:'',NoDataToDisplay:'  ',refreshText:''},'ccReidComponents.container.stagesAreasSelector.StagesAreasSelector':{ConstructRequired:' - ',StageRequired:' - '},'ccReidComponents.container.filesView.FilesView':{Name:'',Description:'',Date:'',UploadBy:' "',Type:'',involvedWorkflow:' '},'ccReidComponents.noneGeneric.container.workersSelector.WorkersSelector':{PositionHolderRequired:'  - ',NameRequired:' - '},'ccReidComponents.grid.tabGrid.TabGrid':{Construct__r:'',Asset__r:'',Spot__r:'',Areas:'',AssignTo:' ',Responsible_V1__r:' '},'stagesGrid.view.StagesGrid':{projectLevel:' ',Level:'',NoDataToShow:'  ',NoStagesSelected:'  ',constructLevel:' '},'ccReidComponents.container.panel.PanelController':{ShowCancel:' ',HideCancel:' '}},General:{Add:'',Loading:'...',Project:'',All:'',Weekly:'',Monthly:'',Quarterly:'',Custom:'',DueDate:'  ',FromDate:'',ToDate:' ',ByArea:' ',Location:'',Stages:'',notStarted:' ',MissingRequiredParameters:'   ',AllStages:' ',AdminView:' ',Works:'',CustomTress:' ( )',AllRoles:'  ',TaskInitiator:' ',Responsible:' ',NoPlacement:' ',WorkerInProject:' ',NoDataToDisplay:'  ',NoFilters:'  ',AllCategory:' ',Kind:'',SubKind:'',EffectedStoreMissingRequiredParameters:'        ',IssueDetails:' ',SubjectTypeRequired:' - ',IssueTypeRequired:'  - ',Description:'',DescriptionRequired:' - ',AssociatedInProject:' ',ByAreaStage:'/',PositionHolder:' ',accountable:' ',Name:'',Required:'',IssueTiming:' ',Status:'',MoreInformation:' ',RichDescription:' ',AddFile:' ',Submit:'',Cancel:'',AddLink:' ',LinkTitleLabel:' :',EmptyLinkName:' ',FileName:' ',AttachFileByDragAndDropLabel:' :',ChooseFromYourPc:'  ',Confirm:'',LinkLabel:':',HyperLinkEmpty:'',EmptyDescription:'',Spot:'',Asset:'',Summary:'',Chatter:"'",MinDateText:'     ',MaxDateText:'     ',monthYearText:' ',NextText:'  (Control+Right)',PrevText:'  (Control+Left)',Sunday:'',Monday:'',Tuesday:'',PlannedDuration:' ',ExpectedEndDate:'  ',ExpectedStartDate:'  ',PlannedEndDate:'  ',PlannedStartDate:'  ',Wednesday:'',Thursday:'',Friday:'',Saturday:'',InProject:' ',NotInProject:'  ',CloseIssue:' ',ReOpen:' ',DeleteFile:' ',Edit:'',EditFile:' ',AreYouSure:'  ? ',RemoveRecord:' ',RemoveFile:' ',Details:'',Files:'',SubIssues:' ',SimilarIssues:' ',Meetings:'',Tasks:'',ThisDateCannotBeSelected:'    ',ExpectedDateFormat:'  ',StartedDate:'  ',CompletedDate:'  ',Start:'',End:'',Duration:'',ExpectedDuration:' ',ByYou:'By You',IssueForm:' ',Stage:'',Construct:'',OK:'',Yes:'',No:'',ClosePanel:' ',Close:'',StageDueDate:'  ',IssuesAndSummary:' ',IssuesFor:'  ',NoValuesToFilter:'  '}});this.callParent(arguments)}},1,0,0,0,0,0,[ccReidComponents.locale,'He'],0);Ext.cmd.derive('ccReidComponents.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in ccReidComponents.locale.Active){if(a===ccReidComponents.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in ccReidComponents.locale.Active){ccReidComponents.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n!=null&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var c=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(c){var e=f?c[f]:c;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var b=c.l10n&&c.l10n[a];if(b===null||b===undefined){var g=c&&c.superclass;if(g&&g.localize){b=g.localize(a,i,h)}if(b===null||b===undefined){var j=ccReidComponents.locale.Active['ccReidComponents.locale'].localeName;b=ccReidComponents.locale[j]['General'][a]}if(b===null||b===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return b}},0,0,0,0,0,0,[ccReidComponents.mixin,'Localizable'],0);Ext.cmd.derive('ccReidComponents.store.proxy.SalesforceProxy',Ext.data.proxy.Memory,{configuration:null,makeAjaxRequest:function(f,a,b){var d=this;var e=d.configuration.read.dataKey||'records';a=a||[];var c=new Ext.Deferred();var b=b||c;window.client.ajax(f,function(c){a=a.concat(c[e]);if(c.done){b.resolve(a)}else {d.makeAjaxRequest(c.nextRecordsUrl.substr(c.nextRecordsUrl.indexOf('v20.0')-1,c.nextRecordsUrl.length),a,b)}},function(d){c.reject(d);b.reject(d)},'GET',null);return c.promise},makeApexRequest:function(b){var a=new Ext.Deferred();window.client.apexRemoteAction('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(b)}));return a.promise},read:function(d,e){var a=this;var c=d;if(e){Ext.data.proxy.Memory.prototype.read.apply(this,arguments)}else {if(a.configuration==null){throw new Error('configuration cannot be empty')}if(!a.configuration.hasOwnProperty('read')){throw new Error('configuration must have read propery')}if(!a.configuration.read.hasOwnProperty('type')){throw new Error('read must have type propery')}if(!a.configuration.read.hasOwnProperty('request')&&(!a.configuration.read.hasOwnProperty('select')&&!a.configuration.read.hasOwnProperty('from'))){throw new Error('read must have request propery')}if(a.configuration.read.type=='apexrest'){a.makeApexRequest(a.configuration.read.request).then(function(b){a.configuration.read.queryTimestamp=new Date();if(a.configuration.read.dataKey){a.data=b[a.configuration.read.dataKey];a.data.map(function(a){if(a.Id){a['id']=a.Id}return a});a.originalResponse=b}else {a.data=b;a.data.map(function(a){if(a.Id){a['id']=a.Id}return a})}a.read.call(a,c,!0)})}else {if(a.configuration.read.type=='ajax'){var b=ccReidComponents.utils.Data.validateObjectPath;if(b('read.select',a.configuration)&&b('read.from',a.configuration)){var f=new Ext.XTemplate('/v20.0/query/?q=SELECT {select} FROM {from}','<tpl if="values.where != null"> WHERE {where}</tpl>','<tpl if="values.queryTimestamp != null"> And LastModifiedDate>={[this.formatDate(values.queryTimestamp)]}</tpl>','<tpl if="values.orderBy != null"> ORDER BY {orderBy}</tpl>',{formatDate:function(a){return a.toISOString()}});a.configuration.read.request=f.apply(a.configuration.read).replace(/ /g,'+')}if(a.configuration.read.queryTimestamp){d.setAddRecords(!0)}a.makeAjaxRequest(a.configuration.read.request).then(function(b){a.configuration.read.queryTimestamp=new Date();a.data=b;a.data.map(function(a){if(a.Id){a['id']=a.Id}return a});a.originalResponse=b;a.read.call(a,c,!0)})}}}},create:function(c){var a=this;var b=[];Ext.Array.forEach(c.getNewRecords(),function(a){b.push(a.getData())});if(a.configuration==null){throw new Error('configuration cannot be empty')}if(!a.configuration.hasOwnProperty('create')){throw new Error('configuration must have create propery')}if(!a.configuration.create.hasOwnProperty('type')){throw new Error('create must have type propery')}if(!a.configuration.create.hasOwnProperty('request')){throw new Error('create must have request propery')}if(a.configuration.create.type=='apexrest'){var d={};if(a.configuration.create.dataKey!=null){d[a.configuration.create.dataKey]=b}else {d=b[0]}Object.assign(a.configuration.create.request,d);a.makeApexRestCreateRequest(a.configuration.create.request).then(function(d){if(d.isError!=!0){Object.keys(d.idsMap).forEach(function(a){var b=c.getById(a);b.set('id',d.idsMap[a]);if(d.records!=null&&d.records[d.idsMap[a]]!=null){b.set(d.records[d.idsMap[a]])}b.commit()});a.fireEvent('successToCreate',a,d.message,Object.values(d.idsMap),c)}else {a.fireEvent('failedToCreate',a,d.message,b)}})}else {a.makeAjaxCreateRequest(a.configuration.create.request,b).then(function(a){a})}},update:function(c,e){var a=this;if(e=='edit'){var b=[];Ext.Array.forEach(c.getUpdatedRecords(),function(a){b.push(a.getData())});if(a.configuration==null){throw new Error('configuration cannot be empty')}if(!a.configuration.hasOwnProperty('update')){throw new Error('configuration must have update propery')}if(!a.configuration.update.hasOwnProperty('type')){throw new Error('update must have type propery')}if(!a.configuration.update.hasOwnProperty('request')){throw new Error('update must have request propery')}if(a.configuration.update.type=='apexrest'){var d={};if(a.configuration.update.dataKey!=null){d[a.configuration.update.dataKey]=b}else {d=b[0]}Object.assign(a.configuration.update.request,d);a.makeApexRestCreateRequest(a.configuration.update.request).then(function(d){if(d.isError!=!0){Ext.Array.forEach(c.getUpdatedRecords(),function(a){if(d.records!=null&&d.records[a.id]!=null){a.set(d.records[a.id])}a.commit()});a.fireEvent('successToUpdate',a,d.message,c)}else {a.fireEvent('failedToUpdate',a,d.message,b)}})}else {a.makeAjaxCreateRequest(a.configuration.update.request,b).then(function(a){a})}}},makeApexRestCreateRequest:function(b){var a=new Ext.Deferred();window.client.apexRemoteAction('/CC_REID/RemoteAction',function(c){a.resolve(c)},function(c){a.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(b)}));return a.promise},constructor:function(a){var b=this;b.configuration=a.configuration;Ext.data.proxy.Memory.prototype.constructor.apply(this,arguments)}},1,0,0,0,['proxy.salesforce'],0,[ccReidComponents.store.proxy,'SalesforceProxy'],0);Ext.cmd.derive('ccReidComponents.store.proxy.ViewProxy',Ext.data.proxy.Memory,{filters:[],dataSource:null,dataKey:null,proxyStore:null,read:function(d,c){var a=this;var b=Ext.StoreManager.get(a.dataSource);if(a.dataSource==null||b==null){throw Error('viewproxy needs a storeId to fetch data from ! Please pass it in "dataSource"')}a.proxyStore=b;if(b.loadCount==0||b.loading){b.on('load',function(){a.read(d,!0)},a)}else {c=!0}if(c){a.filterData(!0);Ext.data.proxy.Memory.prototype.read.apply(this,arguments)}},getFullOrPartialRecord:function(a){var b=this;if(b.dataKey==null){return a.getData()}else {return Object.assign(a.getData()[b.dataKey],{Id:a.Id})}},filter:function(b){var a=this;Ext.Array.push(a.filters,b);a.filterData(!1)},removeFilter:function(b){var a=this;if(b instanceof Ext.util.Filter){Ext.Array.remove(a.filters,b)}else {Ext.Array.forEach(a.filters,function(c){if(c.getId()==b){Ext.Array.remove(a.filters,c)}})}a.filterData(!0)},removeAllFilters:function(){var a=this;a.filters=[]},filterData:function(b){var a=this;if(b){var c=a.proxyStore.getRange();a.data=c.map(function(c){return a.getFullOrPartialRecord(c)})}if(a.filters.length>0){a.data=Ext.Array.filter(a.data,Ext.util.Filter.createFilterFn(a.filters))}},constructor:function(b){var a=this;a.removeAllFilters();Ext.data.proxy.Memory.prototype.constructor.apply(this,arguments)}},1,0,0,0,['proxy.viewproxy'],0,[ccReidComponents.store.proxy,'ViewProxy'],0);Ext.cmd.derive('ccReidComponents.utils.Data',Ext.Base,{statics:{repository:{},setKeyValue:function(a,d,c){var b=this;if(c&&b.repository.hasOwnProperty(a)){return !1}else {b.repository[a]=d;return !0}},getValueByKey:function(a){return this.repository[a]},removeKey:function(a){delete this.repository[a]},replaceFieldsByMap:function(a,b){var d=this;if(Ext.isArray(a)){var c=[];a.forEach(function(e){c.push(d.replaceFieldsByMap(e,b))});return c}else {if(Ext.isObject(a)&&!Ext.Object.isEmpty(a)){Object.keys(a).map(function(c){if(!Ext.isEmpty(b[c])){a[b[c]]=a[c];delete a[c]}});return a}}return a},swapKeysAndValues:function(b){var a={};Object.keys(b).map(function(c){a[b[c]]=c;delete a[c]});return a},camelize:function(a){return a.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(b,c){if(+b===0){return ''}return c==0?b.toLowerCase():b.toUpperCase()})},flattenAreas:function(c,b){var a={};Ext.Object.eachValue(c,function(d){Ext.Object.each(d,function(e){a[e]=!0})});if(Ext.Object.isEmpty(a)){a['By_Project']=b}return a},validateObjectPath:function(f,a){var d=f.split('.');for(var c=0;c<d.length;c++){var b=d[c];var e=c<d.length-1?!0:!1;if(a[b]!==null&&typeof a[b]==='object'&&e){a=a[b];continue}return a.hasOwnProperty(b)&&a[b]!=null}},cloneModelSet:function(b,e,f){var d=[],a;var c=function(c){a=c.copy();a.phantom=!1;a.originalRecord=c;if(e){if(e.call(f||b,a,c)===!1){return}}d.push(a)};if(b.each){b.each(c)}else {Ext.Array.each(b,c)}return d}}},0,0,0,0,0,[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.utils,'Data'],0);Ext.cmd.derive('ccReidComponents.container.stagesAreasSelector.StagesAreasSelectorController',Ext.app.ViewController,{control:{'[reference=constructCombo]':{change:'constructComboChange'},'[reference=spotCombo]':{change:'spotComboComboChange'},'[reference=assetCombo]':{change:'assetComboChange'}},constructComboChange:function(e,d){var c=this;var a=c.getView();var b=a.down('#'+a.storesMap.constructStage.remote);b.effectedItemId=a.storesMap.construct.remote;b.filterFieldName='Construct__c'},spotComboComboChange:function(e,d){var c=this;var a=c.getView();var b=a.down('#'+a.storesMap.constructStage.remote);b.effectedItemId=a.storesMap.spot.remote;b.filterFieldName='Spot__c'},assetComboChange:function(f,d){var e=this;var b=e.getView();var c=b.storesMap;var a=b.down('#'+c.constructStage.remote);if(d==null){a.bindStore(c.constructStage.view)}else {a.bindStore(Ext.create('Ext.data.Store',{proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Stage_Type_Name__c,Asset__c,Expected_End_Date_V1__c+from+Stage__c+Where+Asset__c='"+d+"'+AND+Not_Final__c=false+ORDER+BY+Order__c"}}},autoLoad:!0}))}a.effectedItemId=b.storesMap.asset.remote;a.filterFieldName='Asset__c'},createStores:function(){var c=this;var b=c.getView().getInitialConfig('projectId');var a=c.getView().storesMap;if(!Ext.StoreManager.get(a.construct.remote)){Ext.create('Ext.data.Store',{storeId:a.construct.remote,fields:[{name:'id',mapping:function(a){return a.Id}}],proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Name+from+Construct__c+Where+Project__c='"+b+"'"}}},autoLoad:!0})}if(!Ext.StoreManager.get(a.spot.remote)){Ext.create('Ext.data.Store',{storeId:a.spot.remote,fields:[{name:'id',mapping:function(a){return a.Id}}],proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Spot_Name__c,Construct__c+from+Spot__c+Where+Construct__r.Project__c='"+b+"'+Order+By+Level__c"}}},autoLoad:!0})}if(!Ext.StoreManager.get(a.asset.remote)){Ext.create('Ext.data.Store',{storeId:a.asset.remote,fields:[{name:'id',mapping:function(a){return a.Id}}],proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Name,Spot_V1__c,Construct__c+from+Asset__c+Where+Construct__r.Project__c='"+b+"'"}}},autoLoad:!0})}if(!Ext.StoreManager.get(a.constructStage.remote)){Ext.create('Ext.data.Store',{storeId:a.constructStage.remote,fields:[{name:'id',mapping:function(a){return a.Id}}],proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Stage_Type_Name__c,Spot__c,Construct__c,Expected_End_Date_V1__c+from+Construct_Stage__c+Where+Construct__r.Project__c='"+b+"'+AND+Not_Final__c=false+ORDER+BY+Order__c"}}},autoLoad:!0})}}},0,0,0,0,['controller.StagesAreasSelectorController'],0,[ccReidComponents.container.stagesAreasSelector,'StagesAreasSelectorController'],0);Ext.cmd.derive('ccReidComponents.container.stagesAreasSelector.StagesAreasSelector',Ext.container.Container,{controller:'StagesAreasSelectorController',storesMap:{construct:{remote:'stagesAreasSelector-construct',view:null},spot:{remote:'stagesAreasSelector-spot',view:null},asset:{remote:'stagesAreasSelector-asset',view:null},stage:{remote:'stagesAreasSelector-stage'},constructStage:{remote:'stagesAreasSelector-constructStage',view:null}},initComponent:function(){var a=this;var b=a.getInitialConfig()['defaults']||{};Ext.apply(a,{defaults:b,items:[{xtype:'ccreid_comboboxicon',image:'xf002',flex:1,comboboxItem:{xtype:'ccreid_combobox',itemId:a.storesMap.construct.remote,reference:'constructCombo',parentObject:a,displayField:'Name',valueField:'Id',emptyText:a.L('ConstructRequired'),requiredField:!0,anyMatch:!0,forceSelection:!0,bind:{value:a.getInitialConfig()['constructViewModel']}}},{xtype:'tbspacer',width:14},{xtype:'ccreid_comboboxicon',image:'xf002',flex:1,comboboxItem:{xtype:'ccreid_combobox',itemId:a.storesMap.spot.remote,reference:'spotCombo',effectedItemId:a.storesMap.construct.remote,filterFieldName:'Construct__c',parentObject:a,displayField:'Spot_Name__c',valueField:'Id',emptyText:a.L('Spot'),anyMatch:!0,forceSelection:!0,bind:{value:a.getInitialConfig()['spotViewModel'],disabled:'{!constructCombo.selection}'}}},{xtype:'tbspacer',width:14},{xtype:'ccreid_comboboxicon',image:'xf002',flex:1,comboboxItem:{xtype:'ccreid_combobox',itemId:a.storesMap.asset.remote,reference:'assetCombo',effectedItemId:a.storesMap.spot.remote,filterFieldName:'Spot_V1__c',parentObject:a,displayField:'Name',valueField:'Id',emptyText:a.L('Asset'),anyMatch:!0,forceSelection:!0,bind:{value:a.getInitialConfig()['assetViewModel'],disabled:'{!spotCombo.selection}'}}},{xtype:'tbspacer',width:14},{xtype:'ccreid_comboboxicon',image:'xf002',flex:1,comboboxItem:{xtype:'ccreid_combobox',itemId:a.storesMap.constructStage.remote,effectedItemId:[a.storesMap.spot.remote,a.storesMap.construct.remote],initFilterFn:function(){a.constructId=Ext.ComponentQuery.query('#'+a.storesMap.construct.remote)[0].value;a.spotId=Ext.ComponentQuery.query('#'+a.storesMap.spot.remote)[0].value},filterFn:function(b){return b.data.Construct__c==a.constructId&&b.data.Spot__c==a.spotId},filterFieldName:'area',parentObject:a,displayField:'Stage_Type_Name__c',valueField:'Id',emptyText:a.L('StageRequired'),anyMatch:!0,forceSelection:!0,bind:{value:a.getInitialConfig()['stageViewModel'],disabled:'{!constructCombo.selection}'}}}]});Ext.container.Container.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(b){var a=b.storesMap;b.getController().createStores();Object.keys(a).forEach(function(c){var d=b.down('#'+a[c].remote);if(d&&a[c].hasOwnProperty('view')){if(d.itemId==b.storesMap.constructStage.remote){d.bindStore(a[c].view=Ext.create('Ext.data.Store',{fields:[{name:'area',mapping:function(a){if(a.Spot__c){return a.Spot__c}else {return a.Construct__c}}}],autoLoad:!0,proxy:{type:'viewproxy',dataSource:a[c].remote}}))}else {d.bindStore(a[c].view=Ext.create('Ext.data.Store',{autoLoad:!0,proxy:{type:'viewproxy',dataSource:a[c].remote}}))}}})}},constructor:function(a){var b=this;if(!a.projectId){throw new Error('StagesAreasSelector cannot work without projectId!')}Ext.container.Container.prototype.constructor.apply(this,arguments)}},1,['ccreid_stagesareasselector'],['component','box','container','ccreid_stagesareasselector'],{'component':!0,'box':!0,'container':!0,'ccreid_stagesareasselector':!0},['widget.ccreid_stagesareasselector'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.stagesAreasSelector,'StagesAreasSelector'],0);Ext.cmd.derive('ccReidComponents.container.panel.PanelController',Ext.app.ViewController,{control:{'[reference=showIrrelevant]':{click:'showIrrelevant'},'[reference=undoCancel]':{click:'undoIrrelevantIssue'},'[reference=irrelevantIssue]':{click:'setIrrelevantIssue'},'[reference=openFilterPanel]':{click:'openFilterPanel'}},gridViewStore:null,proxyView:null,registerToEvents:function(){var a=this;a.filtersPeremiters={};var b=this.getView();if(!a.gridViewStore){a.gridViewStore=Ext.StoreManager.get(a.getView().viewGridStoreId);a.proxyView=a.gridViewStore.getProxy();a.gridViewStore.getModel().getFields().forEach(function(c){if(c.hasOwnProperty('ccReidFilterType')&&!Ext.isEmpty(c.ccReidFilterType)){b.on(b.getId()+':'+c.name+':filterdata',a.handleIncomingEvents,a,{buffer:200});b.on(b.getId()+':clearFilter',a.handleClearFilterEvent,a,{buffer:200});b.on(b.getId()+':itemAdded',a.handleTableDataUpdate,a)}})}a.showIrrelevant()},handleTableDataUpdate:function(){var a=this;a.getPerimitersForEachFilterType();a.fireUpdateEvents()},fireUpdateEvents:function(a){var c=this;var b=this.getView();c.gridViewStore.getModel().getFields().forEach(function(d){if(d&&d.hasOwnProperty('ccReidFilterType')&&(a==null||d.name!=a.fieldName)){b.fireEvent(b.getId()+':'+d.name+':updatesource',{data:c.filtersPeremiters[d.name].data})}})},handleClearFilterEvent:function(){var a=this;var b=this.getView();if(a.gridViewStore){a.proxyView.removeAllFilters();a.showIrrelevant();a.gridViewStore.loadPage(a.gridViewStore.currentPage);a.gridViewStore.getModel().getFields().filter(function(a){return a.hasOwnProperty('ccReidFilterType')}).forEach(function(c){if(a.filtersPeremiters[c.name]){a.filtersPeremiters[c.name].filterPointer=null}b.fireEvent(b.getId()+':'+c.name+':clearFilter',{data:a.filtersPeremiters[c.name].data})})}},handleIncomingEvents:function(b){var a=this;if(!a.gridViewStore){a.gridViewStore=Ext.StoreManager.get(a.getView().viewGridStoreId);a.proxyView=a.gridViewStore.getProxy()}if(a.gridViewStore){var c=a.gridViewStore.getModel().getField(b.fieldName)['ccReidFilterType'];switch(c){case 'dateRange':a.filtersPeremiters[b.fieldName].filterPointer=a.handleDateRange(b);break;case 'number':break;case 'string':break;case 'stringSet':a.filtersPeremiters[b.fieldName].filterPointer=a.handleStringSet(b);break;}a.getPerimitersForEachFilterType()}a.fireUpdateEvents(b)},handleDestroy:function(){var b=this;var a=b.getController();delete a.filtersPeremiters;if(a.proxyView){a.proxyView.removeAllFilters();a.gridViewStore.loadPage(a.gridViewStore.currentPage)}},getPerimitersForEachFilterType:function(){Ext.suspendLayouts();var a=this;a.gridViewStore.getModel().getFields().filter(function(a){return a.hasOwnProperty('ccReidFilterType')}).forEach(function(b){if(!a.filtersPeremiters[b.name]){a.filtersPeremiters[b.name]={}}a.filtersPeremiters[b.name].ccReidFilterType=b.ccReidFilterType;a.filtersPeremiters[b.name].data=[]});a.calcFiltersPeremitersPerPage(a.gridViewStore);a.gridViewStore.loadPage(a.gridViewStore.currentPage);if(a.gridViewStore.getRange().length==0){for(fieldName in a.filtersPeremiters){if(a.filtersPeremiters[fieldName].ccReidFilterType=='dateRange'){a.filtersPeremiters[fieldName].data={min:new Date(),max:Ext.Date.subtract(new Date(),Ext.Date.DAY,1)}}}}Object.keys(a.filtersPeremiters).forEach(function(b){if(Ext.isArray(a.filtersPeremiters[b].data)){a.filtersPeremiters[b].data=Ext.Array.unique(a.filtersPeremiters[b].data)}});Ext.resumeLayouts()},calcFiltersPeremitersPerPage:function(b){var a=this;Object.keys(a.filtersPeremiters).forEach(function(c){switch(a.filtersPeremiters[c].ccReidFilterType){case 'dateRange':a.getDateRangePeremiter(c,b);break;case 'number':break;case 'string':break;case 'stringSet':a.getStringSetPeremiter(c,b);break;}})},getStringSetPeremiter:function(a,d){var b=this;var c=b.filtersPeremiters[a].filterPointer;if(c){b.proxyView.removeFilter(c)}d.getProxy().data.forEach(function(e){var c=e;if(Ext.isObject(c[a])&&!Ext.Object.isEmpty(c[a])){b.filtersPeremiters[a].data=b.filtersPeremiters[a].data.concat(Object.keys(c[a]))}else {if(Ext.isArray(c[a])){b.filtersPeremiters[a].data=b.filtersPeremiters[a].data.concat(c[a])}else {if(c[a]){b.filtersPeremiters[a].data.push(c[a])}}}});if(c){b.proxyView.filter(c)}},getDateRangePeremiter:function(d,e){var b=this;var a=b.filtersPeremiters[d].data;var c=b.filtersPeremiters[d].filterPointer;if(c){b.proxyView.removeFilter(c)}e.getProxy().data.forEach(function(g){var f=g;var c=f[d];if(!c){c=new Date()}else {c=new Date(c)}if(Ext.isObject(a)){if(new Date(c)<new Date(a.min)){a.min=c}if(new Date(c)>new Date(a.max)){a.max=c}}else {a={min:c,max:c}}b.filtersPeremiters[d].data=a});if(c){b.proxyView.filter(c)}},handleStringSet:function(a,d){var c=this;c.proxyView.removeFilter(a.fieldName);if(Ext.isArray(a.data)&&a.data.length>0){var b=new Ext.util.Filter({id:a.fieldName,filterFn:function(c){var b=c;if(b[a.fieldName]&&(!Ext.isArray(b[a.fieldName])||b[a.fieldName].length>0)){if(Ext.isArray(b[a.fieldName])){b=Ext.Array.toMap(b[a.fieldName])}else {b=b[a.fieldName]}if(Ext.isObject(b)){if(d){return a.data.every(function(e){return b[e]})}else {return a.data.some(function(e){return b[e]})}}else {return a.data.indexOf(b)>-1}}}});c.proxyView.filter(b);return b}else {return null}},handleDateRange:function(a){var c=this;c.proxyView.removeFilter(a.fieldName);if(a.fromDate!=null&&a.toDate!=null){var b=new Ext.util.Filter({id:a.fieldName,filterFn:function(b){if(b[a.fieldName]){return Ext.Date.between(new Date(b[a.fieldName]),a.fromDate,a.toDate)}}});c.proxyView.filter(b);return b}else {return null}},openFilterPanel:function(a){var b=a.up('tasksByStagesPanel');var c=a.up();if(b.getWestPanel().collapsed){b.replaceWestItems(b.ccReidComponents[a.assocCmp],a.text);b.getWestPanel().expand();a.getEl().addCls('buttonClickedCls')}else {if(c.lastOpenTab==a.assocCmp){b.getWestPanel().collapse();a.getEl().removeCls('buttonClickedCls')}else {b.replaceWestItems(b.ccReidComponents[a.assocCmp],a.text);c.down('#'+c.lastOpenTab).removeCls('buttonClickedCls');a.getEl().addCls('buttonClickedCls')}}c.lastOpenTab=a.assocCmp},showIrrelevant:function(b,d){var a=this;var c=a.getIrrelevantFilter();if(a.proxyView.filters.find(function(a){return a._id=='irrelevantFilter'})!=null){a.proxyView.removeFilter('irrelevantFilter');if(b==null){a.getView().down('#ShowIrrelevantMenuButton').setText(a.L('HideCancel'))}else {b.setText(a.L('HideCancel'))}}else {a.proxyView.filter(c);if(b==null){a.getView().down('#ShowIrrelevantMenuButton').setText(a.L('ShowCancel'))}else {b.setText(a.L('ShowCancel'))}}a.gridViewStore.loadPage(a.gridViewStore.currentPage)},undoIrrelevantIssue:function(){this.setIrrelevantField(!1)},setIrrelevantIssue:function(){this.setIrrelevantField(!0)},setIrrelevantField:function(b){var c=this.getView().down('tasksByStagesGrid');var a=c.getSelectionModel().getSelected().items[0];a.data.irrelevant=b;Ext.StoreManager.get('tasksByStagesStore').getById(a.id).set(a.getData())},getIrrelevantFilter:function(){return new Ext.util.Filter({id:'irrelevantFilter',filterFn:function(a){if(a.irrelevant!==!0){return !0}}})}},0,0,0,0,['controller.PanelController'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.panel,'PanelController'],0);Ext.cmd.derive('ccReidComponents.store.crudManager.CrudManager',Ext.Base,{statics:{externalConfig:{client:window.client},makeRequest:function(c,b){var d=this;var b=b||!1;var a=new Ext.Deferred();if(!b){d.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(d){a.resolve(d)},function(d){a.reject(d)},'POST',JSON.stringify({'requestJSON':JSON.stringify(c)}))}else {d.externalConfig.client.apexrest('/CC_REID/RemoteAction',function(d){a.resolve(d)},function(d){a.reject(d)},'POST',JSON.stringify({'requestJSON':JSON.stringify(c)}))}return a.promise}}},0,0,0,0,0,0,[ccReidComponents.store.crudManager,'CrudManager'],0);Ext.cmd.derive('ccReidComponents.container.panel.Panel',Ext.panel.Panel,{layout:'border',isParentContainer:!0,cls:'ccReidPanel',controller:'PanelController',initComponent:function(){var a=this;Ext.apply(a,{defaults:{padding:2},items:[{xtype:'panel',itemId:'westContainer',region:'west',scrollable:'y',collapsible:!0,collapsed:!0,bodyCls:'panelBodyCls',width:365,header:{height:35},autoDestroy:!1,collapseMode:'mini',hideCollapseTool:!0,tools:[{cls:'icon-expand-all',callback:function(a){a.collapse()}},{xtype:'tbspacer',width:10}]},{xtype:'container',itemId:'northContainer',region:'north',bodyCls:'panelBodyCls'},{xtype:'container',itemId:'southContainer',region:'south',bodyCls:'panelBodyCls'}]});a.on('beforedestroy',a.getController().handleDestroy);Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},maskPanel:function(a){if(a){this.mask(this.L('Loading'));this.afterMask()}else {this.getController().registerToEvents();this.unmask();this.afterUnmask()}},afterMask:Ext.emptyFn,afterUnmask:Ext.emptyFn,getWestPanel:function(){return this.down('#westContainer')},getNorthPanel:function(){return this.down('#northContainer')},getSouthPanel:function(){return this.down('#southContainer')},replaceWestItems:function(c,b){var a=this.down('#westContainer');a.removeAll();a.add(c);if(b){a.setTitle(b)}},replaceNorthItems:function(b){var a=this.down('#northContainer');a.removeAll();a.add(b)},replaceSouthItems:function(b){var a=this.down('#southContainer');a.removeAll();a.add(b)},height:'100%',listeners:{afterlayout:function(a){var b=Ext.fly(a.getInitialConfig()['renderTo']);if(b){a.getHeight(b.getHeight())}}},constructor:function(a){var b=this;Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_panel'],['component','box','container','panel','ccreid_panel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_panel':!0},['widget.ccreid_panel'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.panel,'Panel'],0);Ext.cmd.derive('ccReidComponents.container.dateRangeFilter.DateRangeFilterController',Ext.app.ViewController,{control:{'radiogroup[itemId=rgDateRange]':{change:'radioButtonDateRangeChange'}},listenToEvents:function(){var a=this;a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().fieldName+':updatesource',a.handleUpdateSource.bind(a));a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().fieldName+':clearFilter',a.handleClearFilter.bind(a))},setMinMaxValDate:function(b,c){var d=this;var a=d.getView();a.down('#from_date').setValue(b);a.down('#to_date').setValue(c);a.dateFilter.fromDate=b;a.dateFilter.toDate=c;a.down('#from_date').setMinValue(a.defultMinMaxDate.fromDate);a.down('#from_date').setMaxValue(a.defultMinMaxDate.toDate);a.down('#to_date').setMinValue(a.defultMinMaxDate.fromDate);a.down('#to_date').setMaxValue(a.defultMinMaxDate.toDate)},handleClearFilter:function(b){var a=this;var c=a.getView();a.handleUpdateSource(b);c.down('#rgDateRange').setValue({rbDateRange:'All'})},handleUpdateSource:function(a){var c=this;var b=c.getView();b.defultMinMaxDate.fromDate=a.data.min;b.defultMinMaxDate.toDate=a.data.max;c.setMinMaxValDate(a.data.min,a.data.max)},radioButtonDateRangeChange:function(b,e,h,i,j){var g=this;var f=b.up('ccreid_daterangefilter');var c=b.up('ccreid_daterangefilter').getController();var d=f.down('#rgDateRange').getValue().rbDateRange;var a=c.getDatesRangeByFilter({inputValue:d});if(e.rbDateRange!='Custom'){g.setMinMaxValDate(a.fromDate,a.toDate);c.triggerEvent()}},getWeeklyStartEndDates:function(){var a={fromDate:null,toDate:null};var b=new Date();var c=b.getDay();var d=0-c;a.fromDate=new Date(b.setDate(b.getDate()+d));a.toDate=Ext.Date.add(a.fromDate,Ext.Date.DAY,6);return a},getMonthlyStartEndDates:function(){var b={fromDate:null,toDate:null};var a=new Date();var c=new Date(a.getFullYear(),a.getMonth(),1);var d=new Date(a.getFullYear(),a.getMonth()+1,0);b.fromDate=c;b.toDate=d;return b},getQuarterlyStartEndDates:function(){var a={fromDate:null,toDate:null};var f=(new Date()).getMonth();var c=(new Date()).getFullYear();var d=Math.floor(f/3)*3+1,e=d+3,g=new Date(d+'-01-'+c),b=e>12?new Date('01-01-'+(c+1)):new Date(e+'-01-'+c);b=new Date(b.getTime()-1);a.fromDate=g;a.toDate=b;return a},getDatesRangeByFilter:function(c){var a=this;var b=a.getView();switch(c.inputValue){case 'All':return b.defultMinMaxDate;break;case 'Weekly':return a.getWeeklyStartEndDates();break;case 'Monthly':return a.getMonthlyStartEndDates();break;case 'Quarterly':return a.getQuarterlyStartEndDates();break;case 'Custom':return b.defultMinMaxDate;break;default:}},triggerEvent:function(){var c=this;var a=c.getView();var b={fromDate:a.dateFilter.fromDate,toDate:Ext.Date.add(a.dateFilter.toDate,Ext.Date.DAY,1),fieldName:a.fieldName};console.log('**********  eventFired - By dateRange Filter **********');console.log(b);a.parentObject.fireEvent(a.parentObject.getId()+':'+a.fieldName+':filterdata',b)}},0,0,0,0,['controller.DateRangeFilterController'],0,[ccReidComponents.container.dateRangeFilter,'DateRangeFilterController'],0);Ext.cmd.derive('ccReidComponents.container.dateRangeFilter.DateRangeFilter',Ext.panel.Panel,{controller:'DateRangeFilterController',cls:'dateRangeFilterWrapper',initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:'10px 15px 0 15px',autoHeight:!0,cls:'panelFilterWrapper',items:[{xtype:'radiogroup',itemId:'rgDateRange',columns:1,cls:'radioButtonGroupWrapper',margin:'10 10 15 25',items:a.filterOptions},{xtype:'container',region:'center',style:{'border-top':'1px solid #ded9d9','margin-top':'5px','padding-top':'10px'},width:'100%',bodyPadding:10,config:{layout:'vbox'},items:[{xtype:'label',forId:'myFieldId',text:a.L('FromDate'),cls:'boldLabel',margin:'0 0 0 10'},{xtype:'datefield',value:a.dateFilter.fromDate,minValue:a.defultMinMaxDate.fromDate,maxValue:a.defultMinMaxDate.toDate,format:a.parentObject.isLocalRtl()?'d/m/Y':'m/d/Y',itemId:'from_date',reference:'fromDatePicker',formatText:a.L('ExpectedDateFormat')+'{0}',onChange:function(b,c){if(this.hasFocus&&this.isValid()){a.dateFilter.fromDate=b;a.down('#rgDateRange').setValue({rbDateRange:'Custom'});a.getController().triggerEvent()}},listeners:{select:function(d,b,c){a.down('#rgDateRange').setValue({rbDateRange:'Custom'});a.dateFilter.fromDate=b;a.getController().triggerEvent()},blur:function(c,b,a){}}},{xtype:'label',cls:'boldLabel',forId:'myFieldId',text:a.L('ToDate'),margin:'10px 10px 10px 10px'},{xtype:'datefield',value:a.dateFilter.fromDate,minValue:a.defultMinMaxDate.fromDate,maxValue:a.defultMinMaxDate.toDate,format:a.parentObject.isLocalRtl()?'d/m/Y':'m/d/Y',itemId:'to_date',reference:'toDatePicker',formatText:a.L('ExpectedDateFormat')+'{0}',onChange:function(b,c){if(this.hasFocus&&this.isValid()){a.dateFilter.toDate=b;a.down('#rgDateRange').setValue({rbDateRange:'Custom'});a.getController().triggerEvent()}},listeners:{select:function(d,b,c){a.down('#rgDateRange').setValue({rbDateRange:'Custom'});a.dateFilter.toDate=b;a.getController().triggerEvent()},blur:function(c,b,a){}}}]}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.getController().listenToEvents()},constructor:function(b){var a=this;a.dateOptionRange=b.initialParams||{min:null,max:null};a.parentObject=b.parentObject;a.dateFilter={fromDate:b.initialParams.min||null,toDate:b.initialParams.max||null};a.defultMinMaxDate={fromDate:b.initialParams.min||null,toDate:b.initialParams.max||null};a.fieldName=b.fieldName;a.filterOptions=[{boxLabel:a.L('All'),inputValue:'All',name:'rbDateRange',checked:!0},{boxLabel:a.L('Weekly'),inputValue:'Weekly',name:'rbDateRange',checked:!1},{boxLabel:a.L('Monthly'),inputValue:'Monthly',name:'rbDateRange',checked:!1},{boxLabel:a.L('Quarterly'),inputValue:'Quarterly',name:'rbDateRange',checked:!1},{boxLabel:a.L('Custom'),inputValue:'Custom',name:'rbDateRange',checked:!1}];if(a.parentObject.isLocalRtl()){initLocaleHE()}else {initLocaleEN()}if(a.fieldName==null||a.parentObject==null||b.initialParams.min==null||b.initialParams.max==null){throw new Error(a.L('MissingRequiredParameters'))}Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_daterangefilter'],['component','box','container','panel','ccreid_daterangefilter'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_daterangefilter':!0},['widget.ccreid_daterangefilter'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.dateRangeFilter,'DateRangeFilter'],0);Ext.cmd.derive('ccReidComponents.container.roleFilter.RoleFilterController',Ext.app.ViewController,{control:{'[reference=presetRoleFilterRadioGroup]':{change:'radioButtonChange'},'[reference=notScheduledCheckbox]':{change:'notScheduledChange'},'[reference=responsibleComboBox]':{change:'responsibleChange'},'[reference=accountableComboBox]':{change:'accountableChange'}},isAllClicked:!1,filterStore:function(c,b,a){var g=this;var d=c.getStore();var f=c.getValue()||[];d.removeFilter(b);var e=new Ext.util.Filter({id:b,filterFn:function(d){var e=d.getData();if(Ext.Array.contains(f,e.value)&&!Ext.Array.contains(a,e.value)){d.set('recordCls','x-boundlist-item-disable');d.set('tooltip',e.label);return !0}else {if(Ext.Array.contains(a,e.value)&&d.get('disable')){d.set('recordCls','');d.set('tooltip','');return !0}else {if(Ext.Array.contains(a,e.value)){d.set('recordCls','');return !0}else {return !1}}}}});d.filter(e)},handleClearFilter:function(c){var b=this;var a=b.getView();a.down('#responsibleComboBox').getStore().removeFilter('responsibleComboBox');a.down('#accountableComboBox').getStore().removeFilter('accountableComboBox');a.down('#rgRoles').setValue({roleFilterRb:'AllRoles'});a.down('#accountableComboBox').setEmptyText(a.L('NoPlacement'))},handleUpdateSourceResponsible:function(c){var a=this;var b=a.getView();a.filterStore(b.down('#responsibleComboBox'),'responsibleComboBox',c.data);if(c.data.length==0){b.down('#responsibleComboBox').setEmptyText(b.L('NoFilters'))}else {if(!b.down('#notScheduledCheckboxItem').getValue()){b.down('#responsibleComboBox').setEmptyText(b.L('WorkerInProject'))}}if(a.eventQueue){a.eventQueue.shift();if(a.eventQueue.length>0){a.triggerEvent(a.eventQueue.shift(),!0)}}},handleUpdateSourceAccountable:function(c){var a=this;var b=a.getView();a.filterStore(b.down('#accountableComboBox'),'accountableComboBox',c.data);if(c.data.length==0){b.down('#accountableComboBox').setEmptyText(b.L('NoFilters'))}else {if(!b.down('#notScheduledCheckboxItem').getValue()){b.down('#accountableComboBox').setEmptyText(b.L('WorkerInProject'))}}if(a.eventQueue){a.eventQueue.shift();if(a.eventQueue.length>0){a.triggerEvent(a.eventQueue.shift(),!0)}}},getToolTip:function(b){var a='';if(b.displayTplData!==null&&b.displayTplData.length>1){b.displayTplData.forEach(function(c,d){if(d<b.displayTplData.length-1){a=a+c.label+' , '}else {a=a+c.label+' .'}})}return a},accountableChange:function(b,c,h,i){var d=this;var a=d.getView();var g={fieldName:a.roleFilterObject.accountableFieldName,data:c.length==0?null:c};if(b.hasFocus){a.down('#notScheduledCheckboxItem').setValue(!1)}var e=Ext.create('Ext.tip.ToolTip',{target:b.getEl(),trackMouse:!0,listeners:{beforeshow:function updateTipBody(a){if(b.displayTplData&&b.displayTplData.length>1){a.update(d.getToolTip(b))}else {return !1}}}});if(c.length>=3){e.show()}else {e.hide()}var f=a.down('#responsibleComboBox').getValue()!=null?a.down('#responsibleComboBox').getValue().length:0;if(c.length>0||f>0){a.down('#rgRoles').setValue({roleFilterRb:'Custom'})}else {d.stopAllClickedEvent=!0;a.down('#rgRoles').setValue({roleFilterRb:'AllRoles'})}d.triggerEvent(g)},responsibleChange:function(c,b,h,i){var d=this;var a=d.getView();var g={fieldName:a.roleFilterObject.responsibleFieldName,data:b.length==0?null:b};var e=Ext.create('Ext.tip.ToolTip',{target:c.getEl(),listeners:{beforeshow:function updateTipBody(a){if(c.displayTplData&&c.displayTplData.length>1){a.update(d.getToolTip(c))}else {return !1}}}});if(b.length>=2){e.show()}else {e.hide()}var f=a.down('#accountableComboBox').getValue()!=null?a.down('#accountableComboBox').getValue().length:0;if(b.length>0||f>0){a.down('#rgRoles').setValue({roleFilterRb:'Custom'})}else {d.stopAllClickedEvent=!0;a.down('#rgRoles').setValue({roleFilterRb:'AllRoles'})}d.triggerEvent(g)},radioButtonChange:function(h,f,i,j){var a=this;if(a.stopAllClickedEvent){a.stopAllClickedEvent=!1;return}var b=a.getView();var e;for(var g in f){e=f[g]}if(e=='AllRoles'){a.isAllClicked=!0;b.down('#notScheduledCheckboxItem').setValue(!1);var c={fieldName:b.roleFilterObject.accountableFieldName,data:null};var d={fieldName:b.roleFilterObject.responsibleFieldName,data:null};a.disableEvent=!0;b.down('#accountableComboBox').setValue(null);b.down('#responsibleComboBox').setValue(null);a.disableEvent=!1;a.triggerEvent(d);a.triggerEvent(c);a.triggerEvent(d);a.triggerEvent(c)}else {a.isAllClicked=!1}},getWorkerList:function(d){var b=this;var a=b.getView();var c=ccReidComponents.store.crudManager.CrudManager;a.parentObject.on(a.parentObject.getId()+':'+a.roleFilterObject.responsibleFieldName+':updatesource',b.handleUpdateSourceResponsible.bind(b));a.parentObject.on(a.parentObject.getId()+':'+a.roleFilterObject.accountableFieldName+':updatesource',b.handleUpdateSourceAccountable.bind(b));a.parentObject.on(a.parentObject.getId()+':'+a.roleFilterObject.responsibleFieldName+':clearFilter',b.handleClearFilter.bind(b));a.parentObject.on(a.parentObject.getId()+':'+a.roleFilterObject.accountableFieldName+':clearFilter',b.handleClearFilter.bind(b));var e={className:'ProjectWorkersRequest',actionName:'getWorkersList',projectId:d};return c.makeRequest(e)},notScheduledChange:function(e,d,f,g){var c=this;var a=c.getView();c.scheduledCheckbox=d;if(d){a.down('#rgRoles').setValue({roleFilterRb:'Custom'});a.down('#accountableComboBox').setEmptyText(a.L('NoPlacement'));var b=[];a.accountableStore.getRange().forEach(function(a){if(a.get('notScheduled')){b.push(a.data.value)}});if(b.length>0){a.down('#accountableComboBox').setValue(b)}else {a.down('#accountableComboBox').setEmptyText(a.L('NoFilters'))}c.triggerEvent({fieldName:a.roleFilterObject.accountableFieldName,data:b});c.triggerEvent({fieldName:a.roleFilterObject.responsibleFieldName,data:null});c.triggerEvent({fieldName:a.roleFilterObject.accountableFieldName,data:b})}else {a.down('#accountableComboBox').setEmptyText(a.L('WorkerInProject'))}},setInitalState:function(){var a=this;this.setInitalRadioButton();this.setInitalCheckedAccountableIds();this.setInitalCheckedResponsibleIds();this.initPossibleAccountableIds();this.initPossibleResponsibleIds();a.getView().doneLoading=!0;a.getView().unmask()},initPossibleAccountableIds:function(){var b=this;var a=b.getView();b.filterStore(a.down('#accountableComboBox'),'accountableComboBox',a.roleFilterObject.possibleAccountableIds)},initPossibleResponsibleIds:function(){var b=this;var a=b.getView();b.filterStore(a.down('#responsibleComboBox'),'responsibleComboBox',a.roleFilterObject.possibleResponsibleIds)},setInitalRadioButton:function(){var b=this;var a=b.getView();a.roleFilterObject.filterOptions.forEach(function(b){if((a.responsibleIds.length>0||a.accountableIds.length>0)&&b.inputValue=='Custom'){b.checked=!0}else {if(a.responsibleIds.length==0&&a.accountableIds.length==0&&b.inputValue=='AllRoles'){b.checked=!0}}a.down('#rgRoles').add(b)})},setInitalCheckedAccountableIds:function(){var b=this;var a=b.getView();a.down('#accountableComboBox').setValue(a.accountableIds)},setInitalCheckedResponsibleIds:function(){var b=this;var a=b.getView();a.down('#responsibleComboBox').setValue(a.responsibleIds)},initStores:function(){var b=this;var a=b.getView();a.responsibleStore=Ext.create('Ext.data.Store',{fields:['value','label'],data:[]});a.accountableStore=Ext.create('Ext.data.Store',{fields:['value','label'],data:[]})},triggerEvent:function(b,c){var a=this;if(a.disableEvent){return}if(!a.eventQueue){a.eventQueue=[]}if(!c){a.eventQueue.push(b)}else {a.eventQueue.unshift(b)}if(a.eventQueue.length>1&&!c){return}var d=a.getView();console.log('**********  eventFired  ********');console.log(b);d.parentObject.fireEvent(d.parentObject.getId()+':'+b.fieldName+':filterdata',b)}},0,0,0,0,['controller.RoleFilterController'],0,[ccReidComponents.container.roleFilter,'RoleFilterController'],0);Ext.cmd.derive('ccReidComponents.container.roleFilter.RoleFilter',Ext.panel.Panel,{controller:'RoleFilterController',cls:'roleFilterWrapper',initComponent:function(){var a=this;a.getController().initStores();Ext.apply(a,{cls:'componentWrapper',bodyPadding:'10px 15px 0 15px',items:[{xtype:'radiogroup',itemId:'rgRoles',columns:1,cls:'radioButtonGroupWrapper',reference:'presetRoleFilterRadioGroup',items:[]},{xtype:'container',cls:'comboBoxContainerWrapper',region:'center',config:{layout:'vbox'},items:[{xtype:'label',cls:'boldLabel accountableLabel',forId:'myFieldId',text:a.L('TaskInitiator')},{xtype:'combobox',multiSelect:!0,cls:'comboboxWrapper',store:a.accountableStore,anyMatch:!0,emptyText:a.L('WorkerInProject'),queryMode:'local',displayField:'label',displayTpl:new Ext.XTemplate('<tpl if="values.length < 2"><tpl for=".">{[typeof values === "string" ? values : values["label"]]}<tpl if="xindex < xcount">, </tpl></tpl><tpl else>...</tpl>'),valueField:'value',itemId:'accountableComboBox',reference:'accountableComboBox',tpl:Ext.create('Ext.XTemplate','<tpl for="."><div class="roleFilter-boundlist-item x-boundlist-item {recordCls}" data-qtip="{tooltip}">{[values["label"]]}</div></tpl>'),listConfig:{listeners:{itemClick:function(b,a){return a.getData().recordCls!='x-boundlist-item-disable'}}}},{xtype:'label',forId:'myFieldId',text:a.L('Responsible'),cls:'boldLabel responsibleLabel'},{xtype:'combobox',multiSelect:!0,cls:'comboboxWrapper2',store:a.responsibleStore,anyMatch:!0,emptyText:a.L('WorkerInProject'),itemId:'responsibleComboBox',reference:'responsibleComboBox',queryMode:'local',displayField:'label',valueField:'value',displayTpl:new Ext.XTemplate('<tpl if="values.length < 2"><tpl for=".">{[typeof values === "string" ? values : values["label"]]}<tpl if="xindex < xcount">, </tpl></tpl><tpl else>...</tpl>'),tpl:Ext.create('Ext.XTemplate','<tpl for="."><div class="roleFilter-boundlist-item x-boundlist-item {recordCls}" data-qtip="{tooltip}">{[values["label"]]}</div></tpl>'),listConfig:{listeners:{itemClick:function(b,a){return a.getData().recordCls!='x-boundlist-item-disable'}}}},{xtype:'fieldcontainer',defaultType:'checkboxfield',itemId:'notScheduledCheckbox',cls:'checkboxWrapper',items:[{reference:'notScheduledCheckbox',boxLabel:a.L('NoPlacement'),name:'topping',itemId:'notScheduledCheckboxItem',cls:'checkboxClass boldLabel',inputValue:'1'}]}]}],listeners:{afterrender:function(a){if(!a.doneLoading){a.mask(a.L('Loading'))}}}});Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.getController().getWorkerList(a.projectId).then(function(b){a.roleFilterObject.workersList=b.options;a.roleFilterObject.workersList.forEach(function(c){if(Ext.Array.contains(a.roleFilterObject.possibleAccountableIds,c.value)){a.accountableStore.add({value:c.value,label:c.label||' worker without label',notScheduled:c.notScheduled})}if(Ext.Array.contains(a.roleFilterObject.possibleResponsibleIds,c.value)){a.responsibleStore.add({value:c.value,label:c.label||' worker without label',notScheduled:c.notScheduled})}});if(a.accountableStore.getRange().length==0){view.down('#accountableComboBox').setEmptyText(view.L('NoFilters'))}if(a.responsibleStore.getRange().length==0){view.down('#responsibleComboBox').setEmptyText(view.L('NoFilters'))}a.getController().setInitalState()})},constructor:function(b){var a=this;a.defaultChosenFilter=b.defaultChosenFilter||{inputValue:'AllRoles'};a.projectId=b.projectId;a.parentObject=b.parentObject;var c=[{boxLabel:a.L('AllRoles'),inputValue:'AllRoles',name:'roleFilterRb'},{boxLabel:a.L('Custom'),inputValue:'Custom',name:'roleFilterRb'}];a.accountableStore={};a.responsibleStore={};a.responsibleIds=b.initialParams.responsibleIds||[];a.accountableIds=b.initialParams.accountableIds||[];a.roleFilterObject={filterOptions:c,chosenFilter:a.defaultChosenFilter,notScheduled:[],possibleResponsibleIds:b.initialParams!=null?b.initialParams['possibleResponsibleIds']:[],possibleAccountableIds:b.initialParams!=null?b.initialParams['possibleAccountableIds']:[],responsibleFieldName:b.fieldName.responsible,accountableFieldName:b.fieldName.accountable,dataEventData:{fieldName:b.fieldName||null}};if(a.projectId==null||a.parentObject==null||a.roleFilterObject.responsibleFieldName==null||a.roleFilterObject.accountableFieldName==null){throw new Error(a.L('MissingRequiredParameters'))}Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_rolefilter'],['component','box','container','panel','ccreid_rolefilter'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_rolefilter':!0},['widget.ccreid_rolefilter'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.roleFilter,'RoleFilter'],0);Ext.cmd.derive('ccReidComponents.container.areaTree.AreaTreeController',Ext.app.ViewController,{crudManager:ccReidComponents.store.crudManager.CrudManager,selectedAreasIds:[],control:{'[reference=filterContainer]':{change:'filterContainerChange'},'[reference=areaTreePanel]':{checkchange:'areaTreeCheckChange'}},filterContainerChange:function(d,a,c){var b=this;if(a.areaFilterRadio=='All'){b.changeStoreCheckSelection(null,null,['By_Project','Construct'],'type')}else {if(a.areaFilterRadio=='ByArea'){b.changeStoreCheckSelection(['Construct'],'type',['By_Project'],'type')}else {if(a.areaFilterRadio=='Project'){b.changeStoreCheckSelection(['By_Project'],'type',['Construct'],'type')}}}},changeStoreCheckSelection:function(d,e,b,c){var a=this;var f=[];a.selectedAreasIds=[];a.areasStore.getRoot().cascadeBy(function(g){if(g.data['nodeId']!=null){if(d!=null&&e!=null&&Ext.Array.contains(d,g.data[e])){a.areaTreeCheckChange(g,!0,!0);f.push(g.data.nodeId)}else {if(b!=null&&c!=null&&Ext.Array.contains(b,g.data[c])){a.areaTreeCheckChange(g,!1,!0)}}}});return f},areaTreeCheckChange:function(b,c,d){var a=this;if(b.data.cls!='disableCheckArea'){b.set('checked',c);if(c==!0){if(!Ext.Array.contains(a.selectedAreasIds,b.data.nodeId)){a.selectedAreasIds.push(b.data.nodeId)}}else {a.selectedAreasIds=Ext.Array.remove(a.selectedAreasIds,b.data.nodeId)}b.eachChild(function(e){if(e.data.visible){e.set('checked',c);if(c==!0){if(!Ext.Array.contains(a.selectedAreasIds,e.data.nodeId)){a.selectedAreasIds.push(e.data.nodeId)}}else {a.selectedAreasIds=Ext.Array.remove(a.selectedAreasIds,e.data.nodeId)}a.areaTreeCheckChange(e,c,d)}});if(d!==!0){a.getView().down('#CustomPreset').setValue(!0)}a.getView().parentObject.fireEvent(a.getView().parentObject.getId()+':'+a.getView().filterFieldName+':filterdata',{data:a.selectedAreasIds,fieldName:a.getView().filterFieldName})}},setAreasStore:function(b){var a=this;var c={className:'KanbanManagementRequest',actionName:'getAreasFilter',projectId:b};var d=a.crudManager.makeRequest(c).then(function(c){a.areasStore=Ext.create('Ext.data.TreeStore',{fields:['text',{name:'checked',defaultValue:!1}],root:{expanded:!0,children:c.store},listeners:{update:function(f,d,e,a){if(Ext.Array.contains(a,'checked')&&d.data.cls=='disableCheckArea'){return !1}}}});a.getView().down('#areaFilterPresets').getBoxes()[2].setDisabled(!0);if(a.getView().defaultRecordIds!=null){a.areasStore.getRoot().cascadeBy(function(d){if(!Ext.Array.contains(a.getView().defaultRecordIds,d.data.nodeId)){if(d.parentNode!=null){if(d.data.isFirst&&d.data.isLast){d.parentNode.data.leaf=!0}else {d.parentNode.data.unVisibleChildrens=d.parentNode.data.unVisibleChildrens!=null?d.parentNode.data.unVisibleChildrens+1:1;if(d.parentNode.data.unVisibleChildrens==d.parentNode.data.children.length){d.parentNode.data.leaf=!0}}}d['visible']=!1}if(d.data.nodeId=='By_Project'){a.getView().down('#areaFilterPresets').getBoxes()[2].setDisabled(!1)}})}if(a.getView().selectedRecordIds!=null){a.areasStore.getRoot().cascadeBy(function(d){if(Ext.Array.contains(a.getView().selectedRecordIds,d.data.nodeId)){a.areaTreeCheckChange(d,!0,!1)}})}a.getView().down('#areaFilterTreePanel').reconfigure(a.areasStore);a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().filterFieldName+':updatesource',a.handleUpdateSource.bind(a));a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().filterFieldName+':clearFilter',a.handleClearFilter.bind(a))})},handleClearFilter:function(b){var a=this;var c=a.getView();a.handleUpdateSource(b);c.down('#areaFilterPresets').setValue({areaFilterRadio:'All'});a.changeStoreCheckSelection(null,null,['By_Project','Construct'],'type')},handleUpdateSource:function(a){var a=a.data;var b=this;b.getView().down('#areaFilterPresets').getBoxes()[2].setDisabled(!0);b.filterStore(a);b.getView().down('#areaFilterTreePanel').getRootNode().cascadeBy(function(b){if(!Ext.Array.contains(a,b.data.nodeId)){var c=!1;b.cascadeBy(function(d){if(Ext.Array.contains(a,d.data.nodeId)){c=!0}});if(c){b.set('cls','');b.set('qtip','')}else {b.set('cls','disableCheckArea');b.set('qtip',b.data.text)}}if(b.data.cls=='disableCheckArea'&&Ext.Array.contains(a,b.data.nodeId)){b.set('cls','');b.set('qtip','')}})},filterStore:function(a){var d=this,c=d.areasStore,b=function(e){var f=e.childNodes,h=f&&f.length,g=Ext.Array.contains(a,e.data.nodeId)||e.data.checked==!0,c;if(e.data.nodeId=='By_Project'&&Ext.Array.contains(a,e.data.nodeId)){d.getView().down('#areaFilterPresets').getBoxes()[2].setDisabled(!1)}if(!g){for(c=0;c<h;c++){if(f[c].isLeaf()){g=f[c].get('visible')}else {g=b(f[c])}if(g){break}}}else {for(c=0;c<h;c++){f[c].set('visible',!0)}if(e.parentNode!=null){e.parentNode.data.leaf=!1}}return g};if(a.length<1){c.clearFilter()}else {c.getFilters().replaceAll({filterFn:b})}}},0,0,0,0,['controller.AreaTreeController'],0,[ccReidComponents.container.areaTree,'AreaTreeController'],0);Ext.cmd.derive('ccReidComponents.container.areaTree.AreaTree',Ext.panel.Panel,{controller:'AreaTreeController',initComponent:function(){var a=this;Ext.apply(a,{cls:'areaFilter',bodyPadding:'10px 15px 0 15px',autoHeight:!0,items:[{xtype:'radiogroup',reference:'filterContainer',columns:1,itemId:'areaFilterPresets',cls:'radioButtonGroupWrapper',items:[{boxLabel:a.L('All'),name:'areaFilterRadio',inputValue:'All',itemId:'AllPreset',checked:!0},{boxLabel:a.L('ByArea'),name:'areaFilterRadio',inputValue:'ByArea',itemId:'ByAreaPreset'},{boxLabel:a.L('Project'),name:'areaFilterRadio',inputValue:'Project',itemId:'ProjectPreset'},{boxLabel:a.L('Custom'),name:'areaFilterRadio',inputValue:'Custom',itemId:'CustomPreset'}]},{xtype:'container',region:'center',cls:'treeContainer',config:{layout:'vbox'},items:[{xtype:'treepanel',reference:'areaTreePanel',rootVisible:!1,scrollable:!0,itemId:'areaFilterTreePanel',cls:'areaTreePanel treeComponentWrapper'}]}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.getController().setAreasStore(a.projectId)},constructor:function(b){var a=this;a.projectId=b.projectId;a.parentObject=b.parentObject;a.filterFieldName=b.fieldName;a.defaultRecordIds=b.initialParams;a.selectedRecordIds=b.selectedRecordIds;if(a.projectId==null||a.parentObject==null||a.filterFieldName==null){throw new Error(a.L('MissingRequiredParameters'))}Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_areatree'],['component','box','container','panel','ccreid_areatree'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_areatree':!0},['widget.ccreid_areatree'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.areaTree,'AreaTree'],0);Ext.cmd.derive('ccReidComponents.container.stagesFilter.StagesFilterController',Ext.app.ViewController,{control:{'[reference=presetRadioGroup]':{change:'radioButtonChange'},'[reference=worksAndStagesTrees]':{checkchange:'treeCheckChange'}},selectedStagesIds:[],selectedGroupingKeys:[],firstLoad:!1,crudManager:ccReidComponents.store.crudManager.CrudManager,initalComponent:function(c){var a=this;var b=a.getView();a.selectedStagesIds=b.selectedStageIds||[];a.selectedGroupingKeys=b.selectedGroupingKeys||[];a.firstLoad=!0;a.setWorksTreeStore(c).then(function(){a.initalSelected(b.worksTreeStore,a.selectedStagesIds);a.filterStore(b.worksTreeStore,b.possibleStageIds,a.selectedStagesIds);a.setStagesTreeStore(c).then(function(d){a.initalSelected(b.stagesTreeStore,a.selectedGroupingKeys);a.getView().down('#stageFilterRg').getBoxes()[1].setDisabled(!0);a.filterStore(b.stagesTreeStore,b.possibleGroupingKeys,a.selectedGroupingKeys);b.parentObject.on(b.parentObject.getId()+':'+b.fieldName.stageType+':updatesource',a.handleUpdateSourceStage.bind(a));b.parentObject.on(b.parentObject.getId()+':'+b.fieldName.groupingKey+':updatesource',a.handleUpdateSourceGroupingKey.bind(a));b.parentObject.on(b.parentObject.getId()+':'+b.fieldName.stageType+':clearFilter',a.handleClearFilterStage.bind(a));b.parentObject.on(b.parentObject.getId()+':'+b.fieldName.groupingKey+':clearFilter',a.handleClearFilterGroupingKey.bind(a));if(a.selectedStageIds){a.triggerEvent({fieldName:a.getView().fieldName.stageType,data:a.selectedStageIds})}if(a.selectedGroupingKeys){a.triggerEvent({fieldName:a.getView().fieldName.groupingKey,data:a.selectedGroupingKeys})}a.initalPreset();b.doneLoading=!0;b.unmask()})})},flattenDataArray:function(b){var a=this;b.forEach(function(c){a.flattenData(c);if(c.children&&c.children.length>0){a.flattenDataArray(c.children)}})},flattenData:function(a){var b=this;Object.keys(a.data).map(function(b){a.text=a.data.label;a.value=a.data.value;a.checked=!1;a.leaf=a.children&&a.children.length==0?!0:!1})},setWorksTreeStore:function(b){var a=this;var c={className:'IssuesProgressViewRequest',actionName:'getWorksTree',projectId:b};return a.crudManager.makeRequest(c).then(function(c){a.flattenDataArray(c.nodes);a.getView().worksTreeStore=Ext.create('Ext.data.TreeStore',{fields:['text',{name:'checked',defaultValue:!1}],root:{text:'Root',expanded:!0,children:c.nodes,storeItemId:'worksTreeStore'}})})},setStagesTreeStore:function(b){var a=this;var c={className:'IssuesProgressViewRequest',actionName:'getStageTypeOptionsTree',projectId:b};return a.crudManager.makeRequest(c).then(function(c){a.flattenDataArray(c.nodes);a.getView().stagesTreeStore=Ext.create('Ext.data.TreeStore',{fields:['text',{name:'checked',defaultValue:!1}],root:{text:'Root',expanded:!0,children:c.nodes,storeItemId:'stagesTreeStore'}})})},initalPreset:function(){var b=this;var a=b.getView();if(b.selectedGroupingKeys.length>0){b.getView().down('#stageFilterRg').setValue({stagesFilterRb:'custom'});a.down('#worksAndStagesTrees').reconfigure(a.stagesTreeStore)}else {if(b.selectedStagesIds.length>0){b.getView().down('#stageFilterRg').setValue({stagesFilterRb:'works'});a.down('#worksAndStagesTrees').reconfigure(a.worksTreeStore)}else {b.getView().down('#stageFilterRg').setValue({stagesFilterRb:'all'});a.down('#worksAndStagesTrees').reconfigure(a.stagesTreeStore)}}},initalSelected:function(b,a){var c=this;b.getRootNode().cascadeBy(function(d){if(d.getData().value&&Ext.Array.contains(a,d.getData().value)){c.checkNodeAndAllChildrens(d,a,!0,b,null)}})},changeDisplayedTree:function(b){var c=this;var a=c.getView();a.treeNameDisplay=b;if(a.treeNameDisplay=='worksTree'){a.down('#worksAndStagesTrees').reconfigure(a.worksTreeStore)}else {a.down('#worksAndStagesTrees').reconfigure(a.stagesTreeStore)}},checkNodeAndAllChildrens:function(c,a,b,d,e){var f=this;c.cascadeBy(function(f){if(f.getData().visible){f.set('checked',b);if(b==!0){if(!Ext.Array.contains(a,f.getData().value)){a.push(f.getData().value)}}else {a=Ext.Array.remove(a,f.getData().value)}}})},radioButtonChange:function(a,c,d,e){var b=this;var f=b.getView();switch(a.getValue().stagesFilterRb){case 'all':b.handleAllRadioButtonClick(a);break;case 'adminView':b.handleAdminRadioButtonClick(a);break;case 'works':b.handleWorksRadioButtonClick(a);break;case 'custom':b.handleCustomRadioButtonClick(a);break;default:}},emptyWantedStore:function(a,c,d){var b=this;if(a&&a.length>0){b.unCheckedNodeAndAllChildrens(c);a=[];b.triggerEvent({fieldName:d,data:[]})}},handleAllRadioButtonClick:function(b){var a=this;a.changeDisplayedTree('stagesTree');a.emptyWantedStore(a.selectedStagesIds,a.getView().worksTreeStore,a.getView().fieldName.stageType);a.emptyWantedStore(a.selectedGroupingKeys,a.getView().stagesTreeStore,a.getView().fieldName.groupingKey)},handleAdminRadioButtonClick:function(b){var a=this;a.emptyWantedStore(a.selectedStagesIds,a.getView().worksTreeStore,a.getView().fieldName.stageType);a.emptyWantedStore(a.selectedGroupingKeys,a.getView().stagesTreeStore,a.getView().fieldName.groupingKey);a.checkTreeByClass(a.getView().stagesTreeStore,'significant');a.changeDisplayedTree('stagesTree')},handleCustomRadioButtonClick:function(b){var a=this;a.changeDisplayedTree('stagesTree');a.emptyWantedStore(a.selectedStagesIds,a.getView().worksTreeStore,a.getView().fieldName.stageType)},handleWorksRadioButtonClick:function(b){var a=this;var c=a.getView();a.emptyWantedStore(a.selectedGroupingKeys,a.getView().stagesTreeStore,a.getView().fieldName.groupingKey);a.changeDisplayedTree('worksTree')},checkTreeByClass:function(b,c){var a=this;var d=a.getView();a.selectedGroupingKeys=[];b.root.cascadeBy(function(e){if(e.getData().visible&&e.getData().cn==c){if(!Ext.Array.contains(a.selectedGroupingKeys,e.getData().value)){a.selectedGroupingKeys.push(e.getData().value)}a.checkNodeAndAllChildrens(e,a.selectedGroupingKeys,!0,b,d.down('#worksAndStagesTrees'))}});a.triggerEvent({fieldName:a.getView().fieldName.groupingKey,data:a.selectedGroupingKeys})},unCheckedNodeAndAllChildrens:function(a){a.getRoot().cascadeBy(function(b){b.set('checked',!1)})},filterStore:function(a,b,d){var c=this;a.clearFilter();filterFn=function(h){var f=h.childNodes,i=f&&f.length,g=Ext.Array.contains(b,h.data.value)||h.data.checked==!0,e;if(a.root.getData().storeItemId=='stagesTreeStore'&&h.data.cn=='significant'&&Ext.Array.contains(b,h.data.value)){c.getView().down('#stageFilterRg').getBoxes()[1].setDisabled(!1)}if(!g){for(e=0;e<i;e++){if(f[e].isLeaf()){g=f[e].get('visible')}else {g=filterFn(f[e])}if(g){break}}}else {for(e=0;e<i;e++){f[e].set('visible',!0)}}return g};filterFnFalse=function(c){return !1};if(b.length==0){a.getFilters().replaceAll({filterFn:filterFnFalse})}else {a.getFilters().replaceAll({filterFn:filterFn})}},handleClearFilterStage:function(c){var a=this;var b=a.getView();a.handleUpdateSourceStage(c);a.getView().down('#stageFilterRg').setValue({stagesFilterRb:'all'});b.down('#worksAndStagesTrees').reconfigure(b.stagesTreeStore)},handleClearFilterGroupingKey:function(c){var a=this;var b=a.getView();a.handleUpdateSourceGroupingKey(c);a.getView().down('#stageFilterRg').setValue({stagesFilterRb:'all'});b.down('#worksAndStagesTrees').reconfigure(b.stagesTreeStore)},handleUpdateSourceGroupingKey:function(a){var b=this;var c=b.getView();b.getView().down('#stageFilterRg').getBoxes()[1].setDisabled(!0);b.filterStore(c.stagesTreeStore,a.data,b.selectedGroupingKeys);c.stagesTreeStore.getRootNode().cascadeBy(function(b){if(!Ext.Array.contains(a.data,b.data.value)){var c=!1;b.cascadeBy(function(d){if(Ext.Array.contains(a.data,d.data.value)){c=!0}});if(c){b.set('cls','');b.set('qtip','')}else {b.set('cls','disableCheck');b.set('qtip',b.data.text)}}if(b.get('cls')=='disableCheck'&&Ext.Array.contains(a.data,b.data.value)){b.set('cls','');b.set('qtip','')}})},handleUpdateSourceStage:function(a){var b=this;var c=b.getView();if(a.data.length>0){b.filterStore(c.worksTreeStore,a.data,b.selectedStagesIds)}c.worksTreeStore.getRootNode().cascadeBy(function(b){if(!Ext.Array.contains(a.data,b.data.value)){var c=!1;b.cascadeBy(function(d){if(Ext.Array.contains(a.data,d.data.value)){c=!0}});if(c){b.set('cls','');b.set('qtip','')}else {b.set('cls','disableCheck');b.set('qtip',b.data.text)}}if(b.get('cls')=='disableCheck'&&Ext.Array.contains(a.data,b.data.value)){b.set('cls','');b.set('qtip','')}})},treeCheckChange:function(b,c,g){var a=this;var e=a.getView();var a=this;if(b.get('cls')!='disableCheck'){var d;var f=b.childNodes.length;if(c){b.cascadeBy(function(h){if(h.getData().visible){f--;h.set('checked',c);if(e.treeNameDisplay=='stagesTree'){if(c==!0){if(!Ext.Array.contains(a.selectedGroupingKeys,h.getData().value)){a.selectedGroupingKeys.push(h.getData().value)}}else {a.selectedGroupingKeys=Ext.Array.remove(a.selectedGroupingKeys,h.getData().value)}a.selectedStagesIds=[];a.unCheckedNodeAndAllChildrens(a.getView().worksTreeStore);d=a.selectedGroupingKeys}else {if(e.treeNameDisplay=='worksTree'){if(c==!0){if(!Ext.Array.contains(a.selectedStagesIds,h.getData().value)){a.selectedStagesIds.push(h.getData().value)}}else {a.selectedStagesIds=Ext.Array.remove(a.selectedStagesIds,h.getData().value)}a.selectedGroupingKeys=[];a.unCheckedNodeAndAllChildrens(a.getView().stagesTreeStore);d=a.selectedStagesIds}}}if(f==0){h.parentNode.set('checked',c)}})}else {if(e.treeNameDisplay=='stagesTree'){a.clearNodeSelection(b,a.selectedGroupingKeys);a.selectedStagesIds=[];a.selectedGroupingKeys=a.selectedGroupingKeys.filter(function(a){return a!=b.getData().value});d=a.selectedGroupingKeys}else {a.selectedGroupingKeys=[];a.clearNodeSelection(b,a.selectedStagesIds);a.selectedStagesIds=a.selectedStagesIds.filter(function(a){return a!=b.getData().value});d=a.selectedStagesIds}}a.triggerEvent({fieldName:e.treeNameDisplay=='stagesTree'?a.getView().fieldName.groupingKey:a.getView().fieldName.stageType,data:d});if(a.getView().down('#stageFilterRg').getValue().stagesFilterRb!='works'){a.getView().down('#stageFilterRg').setValue({stagesFilterRb:'custom'})}}},clearNodeSelection:function(a,c){var d=a.raw.leaf;if(!d){a.cascadeBy(function(b){b.set('checked',!1);var d=c.indexOf(b.getData().data.value);if(d>-1){c.splice(d,1)}})}else {if(d){var b=!1;a.parentNode.cascadeBy(function(d){if(d.getData().visible&&d.getData().checked&&d.getData().data.value){b=!0}});if(!b){a.parentNode.set('checked',!1)}}}},triggerEvent:function(a,d){var c=this;var b=c.getView();console.log('**********  eventFired  ********');console.log(a);b.parentObject.fireEvent(b.parentObject.getId()+':'+a.fieldName+':filterdata',a)}},0,0,0,0,['controller.StagesFilterController'],0,[ccReidComponents.container.stagesFilter,'StagesFilterController'],0);Ext.cmd.derive('ccReidComponents.container.stagesFilter.StagesFilter',Ext.Panel,{controller:'StagesFilterController',cls:'stagesFilterWrapper',initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:'10px 15px 0 15px',width:'100%',autoHeight:!0,items:[{xtype:'radiogroup',itemId:'stageFilterRg',columns:1,cls:'radioButtonGroupWrapper',reference:'presetRadioGroup',items:a.checkboxOptions},{xtype:'container',region:'center',cls:'treeContainer',config:{layout:'vbox'},items:[{xtype:'treepanel',reference:'worksAndStagesTrees',emptyText:a.L('NoValuesToFilter'),itemId:'worksAndStagesTrees',rootVisible:!1,scrollable:!0,cls:'worksAndStagesTrees treeComponentWrapper',viewConfig:{listeners:{beforecheckchange:function(a,b){if(a.get('cls')=='disableCheck'){return !1}}}}}],listeners:{afterrender:function(b,d){var c=this;var a=c.up('ccreid_stagesfilter').getHeight();b.setHeight(a-250)}}}],listeners:{afterrender:function(a){if(!a.doneLoading){a.mask(a.L('Loading'))}}}});Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.getController().initalComponent(a.projectId)},constructor:function(b){var a=this;a.local=b.locale||'En';a.parentObject=b.parentObject;a.projectId=b.projectId;a.fieldName=b.fieldName;console.log(b.fieldName);a.treeNameDisplay='stagesTree';a.worksTreeStore=[];a.stagesTreeStore=[];a.checkboxOptions=[{boxLabel:a.L('AllStages'),inputValue:'all',name:'stagesFilterRb',checked:!0},{boxLabel:a.L('AdminView'),inputValue:'adminView',name:'stagesFilterRb',checked:!1},{boxLabel:a.L('Works'),inputValue:'works',name:'stagesFilterRb',checked:!1},{boxLabel:a.L('CustomTress'),inputValue:'custom',name:'stagesFilterRb',checked:!1}];a.selectedGroupingKeys=b.selectedGroupingKeys||[];a.selectedStageIds=b.selectedStageIds||[];a.possibleStageIds=b.initialParams!=null?b.initialParams['possibleStageIds']:[];a.possibleGroupingKeys=b.initialParams!=null?b.initialParams['possibleGroupingKeys']:[];if(a.projectId==null||a.parentObject==null||a.fieldName==null){throw new Error(a.L('MissingRequiredParameters'))}Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_stagesfilter'],['component','box','container','panel','ccreid_stagesfilter'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_stagesfilter':!0},['widget.ccreid_stagesfilter'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.stagesFilter,'StagesFilter'],0);Ext.cmd.derive('ccReidComponents.container.categoriesFilter.CategoriesFilter',Ext.panel.Panel,{required:['ccReidComponents.container.categoriesFilter.CategoriesFilterController'],controller:'CategoriesFilterController',initComponent:function(){var a=this;Ext.apply(a,{cls:'categoryFilter',bodyPadding:'10px 15px 0 15px',items:[{xtype:'radiogroup',reference:'categoryFilterContainer',columns:1,cls:'radioButtonGroupWrapper',itemId:'categoryFilterPresets',items:[{boxLabel:a.L('AllCategory'),name:'categoryFilterRadio',inputValue:'All',itemId:'AllPreset',checked:a.checkedKinds.length==0&&a.checkedSubjectTypes.length==0},{boxLabel:a.L('Custom'),name:'categoryFilterRadio',inputValue:'Custom',itemId:'CustomPreset',checked:a.checkedKinds.length!=0||a.checkedSubjectTypes.length!=0}]},{xtype:'container',cls:'containerDefaultWrapper borderTop',layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',itemId:'kindsContainerId',width:'50%',fieldDefaults:{labelAlign:'top'},items:[{xtype:'label',text:a.L('Kind')+':',cls:'boldLabel underline labelCenter'}]},{xtype:'container',itemId:'subjectTypesContainerId',width:'50%',fieldDefaults:{labelAlign:'top'},items:[{xtype:'label',text:a.L('SubKind')+':',cls:'boldLabel underline labelCenter'}]}],listeners:{afterrender:function(a,b){a.setWidth('100%')}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.getController().getKindsFilters()},constructor:function(a){var b=this;b.parentObject=a.parentObject;b.kindFieldName=a.fieldName!=null?a.fieldName['kindFieldName']:null;b.subjectTypeFieldName=a.fieldName!=null?a.fieldName['subjectTypeFieldName']:null;b.checkedKinds=a.kinds!=null?a.kinds:[];b.checkedSubjectTypes=a.subjectTypes!=null?a.subjectTypes:[];b.possibleKinds=a.initialParams!=null?a.initialParams['possibleKinds']:null;b.possibleSubjectTypes=a.initialParams!=null?a.initialParams['possibleSubjectTypes']:null;if(b.parentObject==null||b.kindFieldName==null||b.subjectTypeFieldName==null){throw new Error(b.L('MissingRequiredParameters'))}Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_categoriesfilter'],['component','box','container','panel','ccreid_categoriesfilter'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_categoriesfilter':!0},['widget.ccreid_categoriesfilter'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.categoriesFilter,'CategoriesFilter'],0);Ext.cmd.derive('ccReidComponents.button.Button',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{cls:'ccReidButtonCss'});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_button'],['component','box','button','ccreid_button'],{'component':!0,'box':!0,'button':!0,'ccreid_button':!0},['widget.ccreid_button'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'Button'],0);Ext.cmd.derive('ccReidComponents.form.field.Checkbox',Ext.form.field.Checkbox,{},0,['ccreid_checkbox'],['component','box','field','checkboxfield','checkbox','ccreid_checkbox'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'ccreid_checkbox':!0},['widget.ccreid_checkbox'],0,[ccReidComponents.form.field,'Checkbox'],0);Ext.cmd.derive('tasksByStages.view.Panel',ccReidComponents.container.panel.Panel,{viewGridStoreId:'tasksByStagesViewStore',gridStoreId:'tasksByStagesStore',viewModel:{},viewModel:{data:{},formulas:{disabledCancelIssue:{bind:{tasksByStagesGridSelection:'{tasksByStagesGrid.selection}'},get:function(a){return a.tasksByStagesGridSelection==null||a.tasksByStagesGridSelection!=null&&a.tasksByStagesGridSelection.getData().irrelevant}},disabledUndoCancelIssue:{bind:{tasksByStagesGridSelection:'{tasksByStagesGrid.selection}'},get:function(a){return a.tasksByStagesGridSelection==null||a.tasksByStagesGridSelection!=null&&!a.tasksByStagesGridSelection.getData().irrelevant}}}},initComponent:function(){var a=this;if(a.getInitialConfig()['dispatcher']!=null){a.getInitialConfig()['dispatcher'].on('extjs:updateTasksByStagesStore',function(c,b){b.issueData.data.issueDueDate=new Date(b.issueData.data.issueDueDate);Ext.StoreManager.get('tasksByStagesStore').getById(b.issueId).set(b.issueData.getData());a.getInitialConfig()['dispatcher'].trigger('extjs:successUpdateTasksByStagesStore',b.issueId)})}Ext.apply(a,{cls:a.cls+' tasksByStagesGrid extjsWizardWrapper',dockedItems:[{dock:'left',xtype:'toolbar',style:'background-color: #f0f3f7 !important;'},{dock:'right',xtype:'toolbar',style:'background-color: #f0f3f7 !important;'}]});a.afterUnmask=function(){var b=a.getController();b.getPerimitersForEachFilterType();var k=b.filtersPeremiters;var c='groupingKey',d='stageTypeId';var e;if(a.getInitialConfig('selectedGroupingKey')){e=[a.getInitialConfig('selectedGroupingKey')];a.fireEvent(a.getId()+':'+c+':filterdata',{data:e,fieldName:c})}var g;if(a.getInitialConfig('stageId')){g=[a.getInitialConfig('stageId')];a.fireEvent(a.getId()+':'+d+':filterdata',{data:g,fieldName:d})}var j='areasFlatten';var i;if(a.getInitialConfig('constructId')){i=[a.getInitialConfig('constructId')]}var h;if(a.getInitialConfig('subjectTypeId')){h=[a.getInitialConfig('subjectTypeId')]}var f;if(a.getInitialConfig('progressStatus')){f=[a.getInitialConfig('progressStatus')]}if(f){a.down('#statusCheckbox').queryBy(function(a){return a.xtype=='ccreid_checkbox'}).forEach(function(a){a.setValue(Ext.Array.contains(f,a.statusType))})}a.ccReidComponents={dateRange:Ext.create('ccReidComponents.container.dateRangeFilter.DateRangeFilter',{initialParams:b.filtersPeremiters['issueDueDate'].data,parentObject:a,fieldName:'issueDueDate'}),areaTree:Ext.create('ccReidComponents.container.areaTree.AreaTree',{initialParams:b.filtersPeremiters['areasFlatten'].data,selectedRecordIds:i,parentObject:a,fieldName:j,projectId:a.getInitialConfig('projectId')}),roleFilter:Ext.create('ccReidComponents.container.roleFilter.RoleFilter',{initialParams:{possibleResponsibleIds:b.filtersPeremiters['responsibleId'].data,possibleAccountableIds:b.filtersPeremiters['accountableId'].data},parentObject:a,fieldName:{accountable:'accountableId',responsible:'responsibleId'},projectId:a.getInitialConfig('projectId')}),stagesFilter:Ext.create('ccReidComponents.container.stagesFilter.StagesFilter',{initialParams:{possibleGroupingKeys:b.filtersPeremiters[c].data,possibleStageIds:b.filtersPeremiters[d].data},selectedGroupingKeys:e,selectedStageIds:g,parentObject:a,fieldName:{groupingKey:c,stageType:d},projectId:a.getInitialConfig('projectId')}),categoriesFilter:Ext.create('ccReidComponents.container.categoriesFilter.CategoriesFilter',{initialParams:{possibleKinds:b.filtersPeremiters['kind'].data,possibleSubjectTypes:b.filtersPeremiters['subjectType'].data},subjectTypes:h,parentObject:a,fieldName:{kindFieldName:'kind',subjectTypeFieldName:'subjectType'},projectId:a.getInitialConfig('projectId')})}};Ext.apply(a,{cls:a.cls+' extjsWizardWrapper',dockedItems:[{dock:'left',xtype:'toolbar',style:'background-color: #f0f3f7 !important;'},{dock:'right',xtype:'toolbar',style:'background-color: #f0f3f7 !important;'}]});ccReidComponents.container.panel.Panel.prototype.initComponent.apply(this,arguments);a.add({xtype:'tasksByStagesGrid',region:'center',storeId:a.gridStoreId,viewStoreId:a.viewGridStoreId,parentObject:a,maskParent:a.maskPanel.bind(a),locale:a.getInitialConfig('locale'),projectId:a.getInitialConfig('projectId'),clientInstance:a.getInitialConfig('clientInstance')});a.addDocked([{xtype:'toolbar',itemId:'statusCheckbox',dock:'top',style:'background-color: #f0f3f7 !important;',enableOverflow:!0,defaults:{xtype:'ccreid_checkbox',checked:!0,handler:function(d,e){var b=d.up('toolbar');var a=[];b.queryBy(function(a){return a.xtype=='ccreid_checkbox'&&!Ext.isEmpty(a.statusType)}).forEach(function(b){if(b.checked){a.push(b.statusType)}});var c=b.up('tasksByStagesPanel');c.fireEvent(c.getId()+':progress:filterdata',{data:a,fieldName:'progress'})}},items:[a.createTitle(),{boxLabel:'<span class="checbox-layout notStarted"></span><span class="filterLabel">'+a.L('notStarted')+'</span>',statusType:'notStarted',cls:'notStarted-filter'},{boxLabel:'<span class="checbox-layout late"></span><span class="filterLabel">'+a.L('late')+'</span>',cls:'late-filter',statusType:'lateStart'},{boxLabel:'<span class="checbox-layout soonToStart"></span><span class="filterLabel">'+a.L('soonToStart')+'</span>',cls:'soonToStart-filter',statusType:'soonToStart'},{boxLabel:'<span class="checbox-layout inProgress"></span><span class="filterLabel">'+a.L('inProgress')+'</span>',cls:'inProgress-filter',statusType:'inProgress'},{boxLabel:'<span class="checbox-layout completed"></span><span class="filterLabel">'+a.L('completed')+'</span>',cls:'completed-filter',statusType:'completed'}]},{xtype:'toolbar',dock:'top',style:'background-color: #f0f3f7 !important;',enableOverflow:!0,lastOpenTab:null,defaults:{xtype:'ccreid_button',border:!1,cls:'secondToolbarCls'},items:[{text:a.L('DueDates'),assocCmp:'dateRange',itemId:'dateRange',reference:'openFilterPanel'},{text:a.L('ProjectBuildings'),assocCmp:'areaTree',itemId:'areaTree',reference:'openFilterPanel'},{text:a.L('Stages'),assocCmp:'stagesFilter',itemId:'stagesFilter',reference:'openFilterPanel'},{text:a.L('Categories'),assocCmp:'categoriesFilter',itemId:'categoriesFilter',reference:'openFilterPanel'},{text:a.L('PositionHolder'),assocCmp:'roleFilter',itemId:'roleFilter',reference:'openFilterPanel'},{iconCls:'fa fa-repeat repeatIconClass',cls:'',style:'background-color:transparent !important',scale:'large',handler:function(b){a.fireEvent(a.getId()+':clearFilter');b.up('tasksByStagesPanel').down('#statusCheckbox').queryBy(function(a){return a.xtype=='ccreid_checkbox'&&!Ext.isEmpty(a.statusType)}).forEach(function(a){a.setValue(!0)})}},{xtype:'tbfill'},{xtype:'button',border:!0,iconCls:'fa fa-plus smallToolbarCls',cls:'buttonCss actionButton',handler:function(){var b=Ext.create('ccReidComponents.noneGeneric.window.IssueViewWindow',{projectId:a.getInitialConfig('projectId'),activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId'),constructId:a.getInitialConfig('constructId'),assetId:a.getInitialConfig('assetId'),spotId:a.getInitialConfig('spotId'),stageTypeId:a.getInitialConfig('stageTypeId'),stageId:a.getInitialConfig('stageId')});b.show()}},{xtype:'button',iconCls:'fa fa-calendar-plus-o smallToolbarCls',border:!0,cls:'buttonCss actionButton',handler:function(){Ext.Msg.alert('Info','calendar clicked')}},{xtype:'button',text:this.L('Cancel'),border:!0,cls:'buttonCss actionButton',style:'width: 65px !important;margin-left: 5px;',reference:'irrelevantIssue',bind:{disabled:'{disabledCancelIssue}'}},{xtype:'button',text:this.L('tools'),border:!0,handler:null,cls:'buttonCss actionButton toolsButton',style:'width: 65px !important;margin-left: 5px;',menu:[{text:a.L('Copy'),reference:'copy'},{text:a.L('CSV'),reference:'csv'},{text:a.L('Excel'),reference:'excel'},{text:a.L('Print'),reference:'print'},{text:a.L('Refresh'),reference:'refresh'},{reference:'showIrrelevant',itemId:'ShowIrrelevantMenuButton'},{text:a.L('UndoCancel'),reference:'undoCancel',bind:{disabled:'{disabledUndoCancelIssue}'}}]}]}])},createTitle:function(){var a=this;var b='';if(Ext.StoreManager.get('Tasks').getById(a.getInitialConfig('constructId'))){return '<div><span style="height:30px;float: left;" class="logo-icon"></span><span class="titleWrapper"><div class="issueForConstructTitle">'+a.L('IssuesFor')+' '+Ext.StoreManager.get('Tasks').getById(a.getInitialConfig('constructId')).data.Name+', '+a.L('Stage')+' '+Ext.StoreManager.get('Tasks').getById(a.getInitialConfig('stageId')).data.Name+'</div><div class="issuesAndSummary">'+a.L('IssuesAndSummary')+'</div></span></div>'}else {return '<div><span style="height:30px;float: left;" class="logo-icon"></span><span class="titleWrapper"><div class="issuesAndSummary">'+a.L('IssuesAndSummary')+'</div></span></div>'}},listeners:{destroy:function(a){Ext.Object.eachValue(a.ccReidComponents,function(b){b.destroy()})}},constructor:function(b){var a=this;if(ccReidComponents.utils.Data.getValueByKey('locale')==null){a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;ccReidComponents.utils.Data.setKeyValue('locale',a.currentLocale)}ccReidComponents.container.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['tasksByStagesPanel'],['component','box','container','panel','ccreid_panel','tasksByStagesPanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_panel':!0,'tasksByStagesPanel':!0},['widget.tasksByStagesPanel'],0,[tasksByStages.view,'Panel'],0);Ext.cmd.derive('ccReidComponents.form.field.ComboboxIcon',Ext.container.Container,{initComponent:function(){var a=this;Ext.apply(a,{width:a.width,cls:'comboboxIconComponentCls',layout:'hbox',items:[{xtype:'image',cls:'comboboxImg',glyph:a.icon+'@FontAwesome'},a.comboboxItem],disabledCls:'ccreidDisabledFieldCls'});Ext.container.Container.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.icon=b.image;a.comboboxItem=b.comboboxItem;a.comboboxItem.flex=1;a.comboboxItem.cls='comboboxItem';a.comboboxItem.emptyCls='emptyTextCls';a.comboboxItem.xtype='ccreid_combobox';a.width=b.width;Ext.container.Container.prototype.constructor.apply(this,arguments)}},1,['ccreid_comboboxicon'],['component','box','container','ccreid_comboboxicon'],{'component':!0,'box':!0,'container':!0,'ccreid_comboboxicon':!0},['widget.ccreid_comboboxicon'],0,[ccReidComponents.form.field,'ComboboxIcon'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.form.field.WorkerTypeComboxIcon',ccReidComponents.form.field.ComboboxIcon,{constructor:function(a){var b=this;if(!a.comboboxItem.storeId||!a.comboboxItem.projectId){throw new Error('WorkerTypeComboxIcon cannot work without storeId or projectId')}a.comboboxItem.proxy={configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Id,Name,+(Select+id+From+CC_REID__Project_Workers__r+Where+CC_REID__Project__c='"+a.comboboxItem.projectId+"')+From+CC_REID__Worker_Type__c"}}};a.comboboxItem.tpl=Ext.create('Ext.XTemplate','<ul class="x-list-plain"><li class="combobox-category"> {[this.getTranslate("InProject")]} </li>','<tpl for=".">','<tpl if="this.isInProject({group})">','<li role="option" class="x-boundlist-item">{[values["Name"]]}</li>','</tpl>','</tpl>','<li class="combobox-category"> {[this.getTranslate("NotInProject")]} </li>','<tpl for=".">','<tpl if="!this.isInProject({group})">','<li role="option" class="x-boundlist-item">{[values["Name"]]}</li>','</tpl>','</tpl>','</ul>',{isInProject:function(b){return b.group=='inProject'},getTranslate:function(c){return b.L(c)}}),ccReidComponents.form.field.ComboboxIcon.prototype.constructor.apply(this,arguments)}},1,['ccreid_workertype_comboboxicon'],['component','box','container','ccreid_comboboxicon','ccreid_workertype_comboboxicon'],{'component':!0,'box':!0,'container':!0,'ccreid_comboboxicon':!0,'ccreid_workertype_comboboxicon':!0},['widget.ccreid_workertype_comboboxicon'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.form.field,'WorkerTypeComboxIcon'],0);Ext.cmd.derive('ccReidComponents.form.panel.EditIssueViewWithStoreController',Ext.app.ViewController,{control:{},buildStore:function(){var a=this;var b=new Ext.Deferred();var c=Ext.create('Ext.data.Store',{storeId:'issueStore:'+a.getView().issueId,model:'tasksByStages.model.IssueModel',proxy:{type:'salesforce',configuration:{read:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'getIssues',projectId:a.getView().getInitialConfig('projectId'),issueIds:a.getView().issueIds},dataKey:'Issues'},update:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'updateIssues',projectId:a.getView().getInitialConfig('projectId')},dataKey:'issuesDetails'}}},listeners:{update:function(b,d,a){var c=this;c.getProxy().update(b,a)}},autoLoad:!0}).on('load',function(){b.resolve(c)});return b.promise}},0,0,0,0,['controller.ccreid_editissuewithstorecontroller'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.panel,'EditIssueViewWithStoreController'],0);Ext.cmd.derive('ccReidComponents.form.panel.EditIssueViewWithStore',Ext.panel.Panel,{controller:'ccreid_editissuewithstorecontroller',layout:'fit',initComponent:function(){var a=this;Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.height='100%';a.getController().buildStore().then(function(c){var b=Ext.create('ccReidComponents.form.panel.EditIssueView',{issueId:a.issueId,issue:c.data.items[0],projectId:a.projectId,activeUser:a.activeUser,openFromNewTab:!0,dispatcher:a.dispatcher});a.insert(b)})},constructor:function(b){var a=this;a.issueId=b.issueId;a.issueIds=[].concat(a.issueId);a.projectId=b.projectId;a.activeUser=b.activeUser!=null?b.activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId');a.dispatcher=b.dispatcher;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;ccReidComponents.utils.Data.setKeyValue('locale',a.currentLocale);Ext.panel.Panel.prototype.constructor.apply(this,arguments);Ext.Error.handle=function(a){return a}}},1,['ccreid_editissueviewwithstore'],['component','box','container','panel','ccreid_editissueviewwithstore'],{'component':!0,'box':!0,'container':!0,'panel':!0,'ccreid_editissueviewwithstore':!0},['widget.ccreid_editissueviewwithstore'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.panel,'EditIssueViewWithStore'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.model.Asset',Ext.data.Model,{fields:[{name:'text',mapping:function(a){return a.Name}}]},0,0,0,0,0,0,[ccReidComponents.store.storeManager.model,'Asset'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.model.Construct',Ext.data.Model,{fields:[]},0,0,0,0,0,0,[ccReidComponents.store.storeManager.model,'Construct'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.model.ConstructStage',Ext.data.Model,{fields:[{name:'groupingKey',mapping:function(a){return a.Stage_Type__r&&a.Stage_Type__r.Grouping_Key__c||a.Grouping_Key__c}},{name:'area',mapping:function(a){return a.Spot__c||a.Construct__c}}]},0,0,0,0,0,0,[ccReidComponents.store.storeManager.model,'ConstructStage'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.model.Spot',Ext.data.Model,{fields:[{name:'text',mapping:function(a){return a.Spot_Name__c}}]},0,0,0,0,0,0,[ccReidComponents.store.storeManager.model,'Spot'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.model.Stage',Ext.data.Model,{fields:[{name:'groupingKey',mapping:function(a){return a.Stage_Prototype__r&&a.Stage_Prototype__r.Grouping_Key__c||a.Grouping_Key__c}},{name:'Planned_End_Date__c',mapping:function(a){if(a.Planned_End_Date_V1__c){return a.Planned_End_Date_V1__c}}}]},0,0,0,0,0,0,[ccReidComponents.store.storeManager.model,'Stage'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.StoreConfig',Ext.Base,{alternateClassName:['ccReidStoreConfig'],singleton:!0,config:{stagesStore:{requiredParameters:['projectId'],proxyConfig:{type:'salesforce',configuration:{read:{type:'ajax',select:'Id,Stage_Prototype__r.Grouping_Key__c,Duration__c,Grouping_Key__c,(select Grade__c from Inspections__r where Grade__c <> null),Expected_End_Date_V1__c,Expected_Start_Date__c,Planned_End_Date_V1__c,Planned_Start_Date__c,Completed_Date__c,Started_Date__c,Stage_Type_Name__c,Asset__r.Spot_V1__c,Asset__r.Construct__c,Asset__c,Expected_Duration__c,Planned_Duration__c,Progress_Status__c',from:'Stage__c',where:"Asset__r.Construct__r.Project__c='{projectId}' AND Not_Final__c=false AND Inactive__c <> true",orderBy:'Order__c'}}},storeConfig:{autoLoad:!0,model:'ccReidComponents.store.storeManager.model.Stage'}},cStagesStore:{requiredParameters:['projectId'],proxyConfig:{type:'salesforce',configuration:{read:{type:'ajax',select:'Id,Stage_Type__r.Grouping_Key__c,Duration__c,Grouping_Key__c,(select Grade__c from Inspections__r where Grade__c<>null),Expected_End_Date_V1__c,Expected_Start_Date__c,Planned_End_Date__c,Planned_Start_Date__c,Completed_Date__c,Started_Date__c,Stage_Type_Name__c,Construct__c,Spot__c,Expected_Duration__c,Planned_Duration__c,Progress_Status__c',from:'Construct_Stage__c',where:"Construct__r.Project__c='{projectId}' AND Not_Final__c=false AND Inactive__c <> true",orderBy:'Order__c'}}},storeConfig:{autoLoad:!0,model:'ccReidComponents.store.storeManager.model.ConstructStage'}},assetsStore:{requiredParameters:['projectId'],proxyConfig:{type:'salesforce',configuration:{read:{type:'ajax',select:'Id,Name,Spot_V1__c',from:'Asset__c',where:"Construct__r.Project__c='{projectId}'"}}},storeConfig:{autoLoad:!0,model:'ccReidComponents.store.storeManager.model.Asset'}},spotsStore:{requiredParameters:['projectId'],proxyConfig:{type:'salesforce',configuration:{read:{type:'ajax',select:'Id,Spot_Name__c,Level__c,Construct__c',from:'Spot__c',where:"Construct__r.Project__c='{projectId}'",orderBy:'Level__c'}}},storeConfig:{autoLoad:!0,model:'ccReidComponents.store.storeManager.model.Spot'}},constructsStore:{requiredParameters:['projectId'],proxyConfig:{type:'salesforce',configuration:{read:{type:'ajax',select:'Id,Name',from:'Construct__c',where:"Project__c='{projectId}'"}}},storeConfig:{autoLoad:!0,model:'ccReidComponents.store.storeManager.model.Construct'}}}},0,0,0,0,0,0,[ccReidComponents.store.storeManager,'StoreConfig',0,'ccReidStoreConfig'],0);Ext.cmd.derive('ccReidComponents.store.storeManager.StoreManager',Ext.Base,{alternateClassName:['ccReidStoreManager'],singleton:!0,initStore:function(a,c){var e=this;if(!a){throw new Error('storeId is required!')}if(Ext.StoreManager.get(a)){var d=Ext.StoreManager.get(a);d.load();return d}if(!ccReidStoreConfig.config[a]){throw new Error('No configuration found for '+a)}if(Ext.isArray(ccReidStoreConfig.config[a].requiredParameters)&&ccReidStoreConfig.config[a].requiredParameters.length>0&&(!c||!Ext.isObject(c)||Ext.Object.isEmpty(c))){throw new Error(a+' requires additional parameters')}ccReidStoreConfig.config[a].requiredParameters.forEach(function(b){if(!c.hasOwnProperty(b)){throw new Error(a+' requires '+b)}});var b=ccReidStoreConfig.config[a].proxyConfig.configuration;for(crud in b){if(b[crud].type=='ajax'){for(prop in b[crud]){b[crud][prop]=(new Ext.Template(b[crud][prop])).evaluate(c).replace(/ /g,'+')}}}return Ext.create('Ext.data.Store',Ext.Object.merge({storeId:a,proxy:ccReidStoreConfig.config[a].proxyConfig},Object.assign(ccReidStoreConfig.config[a].storeConfig,{idPropery:'Id'})))}},0,0,0,0,0,0,[ccReidComponents.store.storeManager,'StoreManager',0,'ccReidStoreManager'],0);Ext.cmd.derive('stagesGrid.store.Store',Ext.Base,{initStore:function(b){var a=this;var c=new Ext.Deferred();a.stores={stagesStore:ccReidStoreManager.initStore('stagesStore',{projectId:b}),cStagesStore:ccReidStoreManager.initStore('cStagesStore',{projectId:b}),assetsStore:ccReidStoreManager.initStore('assetsStore',{projectId:b}),spotsStore:ccReidStoreManager.initStore('spotsStore',{projectId:b}),constructsStore:ccReidStoreManager.initStore('constructsStore',{projectId:b})};var d=function(){if(Object.keys(a.stores).every(function(c){return a.stores[c].loading==!1})){c.resolve();a.stores.constructsStore.each(function(c){a.stores.spotsStore.add({id:c.id,parent:c,parentId:c.id,text:'constructLevel',isConstructLevel:!0})})}};Ext.Object.eachValue(a.stores,function(a){if(a.loading){a.on('load',function(){d()})}});return c.promise},getNewRootData:function(e,b,g,f){var a=this;result=[];var c=Ext.Array.toMap(e.selectedNodes);var d={};if(a.stores[b].filters){a.stores[b].filters.removeAll()}a.stores[b].filterBy(function(a){return c[a.data.groupingKey]});a.stores[b].each(function(a){if(d[a.data[f]]==null){d[a.data[f]]=[]}d[a.data[f]].push(a.id)});a.stores[g].each(function(h){if(h&&a.attachParentAndFilterByConstruct(e.constructId,h)){var i={};if(h.data.Level__c){i.Level__c=h.data.Level__c}if(h.data.isConstructLevel){i.isConstructLevel=h.data.isConstructLevel}i.parent=h.data.parent;i.parentId=h.data.parentId;i.text=h.data.text;i.id=h.data.id;var j=a.findStageIdInMap(b,d,i,c,e);if(j&&j.length>0){j.forEach(function(a){c[a.data.groupingKey]=!0});result.push(i)}}});a.removeUnusedPrototypes(c,e);return result},removeFromArrayIf:function(b,c){var a=b.length;while(a--){if(c(b[a],a)){b.splice(a,1)}}},removeUnusedPrototypes:function(a,b){for(prototyp in a){if(a[prototyp]!==!0){delete a[prototyp]}}b.selectedNodes=Object.keys(a)},attachParentAndFilterByConstruct:function(c,a){var d=this;if(a.data.hasOwnProperty('Spot_V1__c')&&!a.data.hasOwnProperty('parent')){var b=d.stores.spotsStore.getById(a.data.Spot_V1__c);if(b){a.data.parent=b;a.data.parentId=b.id}}if(a.data.hasOwnProperty('Construct__c')&&!a.data.hasOwnProperty('parent')){var b=d.stores.constructsStore.getById(a.data.Construct__c);if(b){a.data.parent=b;a.data.parentId=b.id}}if(a.data.parent.data.hasOwnProperty('Construct__c')){return a.data.parent.data.Construct__c==c}else {return a.data.parent.id==c}},findStageIdInMap:function(e,b,c,d,f){var g=this;var a=[];if(b[c.id]){a=a.concat(g.attachStageIfExist(e,b,c,d,f))}return a},attachStageIfExist:function(d,b,a,f,g){var e=this;var h=arguments[0];var c=[];if(b[a.id]){b[a.id].forEach(function(i){var h=e.stores[d].getById(i);if(h){a[h.data.groupingKey]=h.getData();c.push(h)}})}return c}},0,0,0,0,0,0,[stagesGrid.store,'Store'],0);Ext.cmd.derive('stagesGrid.view.ViewController',Ext.app.ViewController,{config:{},buildGridData:function(b){var a=this;var d=a.getView();var c=new Ext.Deferred();b=b||a.config;a.config=b;a.initStores().then(function(){c.resolve(a.loadViewData(b))});return c.promise},initStores:function(){var a=this;if(a.storeManager){var b=new Ext.Deferred();b.resolve();return b.promise}a.storeManager=Ext.create('stagesGrid.store.Store');var c=a.getView();return a.storeManager.initStore(c.getInitialConfig('projectId'))},loadViewData:function(a){var e=this;var f=e.getView();var g=f.stores;if(a.stageType=='Asset'){var b='stagesStore';var c='assetsStore';var d='Asset__c'}else {var b='cStagesStore';var c='spotsStore';var d='area'}return Ext.create('Ext.data.Store',{data:e.storeManager.getNewRootData(a,b,c,d),groupField:a.stageType=='Asset'?'spotLevel':null,groupDir:'DESC',sorters:[{property:'isConstructLevel',direction:'DESC'},{property:'spotLevel',direction:'DESC'}],fields:[{name:'spotLevel',type:'int',mapping:function(b){if(b.parent.data.Level__c){return Math.floor(b.parent.data.Level__c)}else {if(b.Level__c){return Math.floor(b.Level__c)}}}},{name:'isConstructLevel',type:'bool',mapping:function(b){if(b.isConstructLevel){return b.isConstructLevel}}}]})}},0,0,0,0,['controller.stagesGridController'],0,[stagesGrid.view,'ViewController'],0);Ext.cmd.derive('ccReidComponents.window.Window',Ext.window.Window,{cls:'extjsWizardWrapper',draggable:!1,resizeable:!1,titleAlign:'center',constructor:function(b){var a=this;a.currentLocale=ccReidComponents.utils.Data.getValueByKey('locale');a.closeToolText=a.L('ClosePanel');if(a.currentLocale==null){a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;ccReidComponents.utils.Data.setKeyValue('locale',a.currentLocale)}ccReidComponents.locale[a.currentLocale].apply();a.rtl=a.currentLocale=='He';Ext.window.Window.prototype.constructor.apply(this,arguments)}},1,['ccreid_window'],['component','box','container','panel','window','ccreid_window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'ccreid_window':!0},['widget.ccreid_window'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.window,'Window'],0);Ext.cmd.derive('stagesGrid.view.StagesGrid',Ext.grid.Panel,{cls:'extjsWizardWrapper stagesGrid progressView',controller:'stagesGridController',bodyCls:'stagesGridBody',columnsWidthMap:{overviewPreset:60,normalPreset:100,smallPreset:91},initComponent:function(){var a=this;var c=a.getInitialConfig('projectId');a.addCls('focusView');Ext.apply(a,{viewConfig:{emptyText:a.L('NoStagesSelected')},features:[{ftype:'grouping',collapsible:!1,sortInfo:{field:'spotLevel',direction:'DESC'},groupHeaderTpl:Ext.create('Ext.XTemplate','<div><b><u> {[this.translateLevel()]}: ','{name:this.formatName}</b></u></div>',{formatName:function(a){return Ext.String.trim(a)},translateLevel:function(){return a.L('Level')}})}],plugins:{ptype:'bufferedrenderer',synchronousRender:!1},enableLocking:!0,columnLines:!0,height:480});var b=a.getInitialConfig();if(b['dispatcher']){b['dispatcher'].on('stageGrid:presetViewChanged',function(c,b){a.mask(a.L('Loading'));a.suspendLayouts();if(b.zoom=='overviewPreset'){a.removeCls(['smallView','mediumView']);a.addCls('focusView');a.getColumns().forEach(function(e,d){if(d>0){e.setWidth(a.columnsWidthMap['overviewPreset'])}})}else {if(b.zoom=='normalPreset'){a.removeCls(['smallView','focusView']);a.addCls('mediumView');a.getColumns().forEach(function(e,d){if(d>0){e.setWidth(a.columnsWidthMap['normalPreset'])}})}else {a.removeCls(['mediumView','focusView']);a.addCls('smallView');a.getColumns().forEach(function(e,d){if(d>0){e.setWidth(a.columnsWidthMap['smallPreset'])}})}}a.resumeLayouts(!0);a.unmask()});b['dispatcher'].on('stageGrid:treeNodeResponse',function(c,b){a.mask(a.L('Loading'));a.prototypeStore=Ext.create('Ext.data.TreeStore',{fields:[{name:'text',mapping:function(a){return a.data.label}},{name:'id',mapping:function(a){return a.data.value}}],root:{children:b.treeNodes.nodes}});a.unmask()});b['dispatcher'].on('stageGrid:initalFilter',function(c,b){a.mask(a.L('Loading'));if(b.data.viewSelected=='Quality'){a.removeCls('progressView');a.addCls('qualityView')}else {a.removeCls('qualityView');a.addCls('progressView')}a.currentConfig=b.data;a.getController().buildGridData(b.data).then(function(e){var d=[];if(e.count()>0){d=a.buildColumns(b.data)}a.buildColumnsSummery(d);a.suspendLayouts();a.reconfigure(e,d);a.resumeLayouts(!0);a.viewSelected=b.data.viewSelected;if(!b.data.selectedNodes||b.data.selectedNodes.length==0){a.viewConfig.emptyText=a.L('NoStagesSelected')}else {a.viewConfig.emptyText=a.L('NoDataToShow')}a.unmask()})})}Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},listeners:{cellclick:function(c,h,a,b,i,f,e,g){if(Ext.Array.contains(e.target.classList,'spanCell')){var d=wizardConfig.cardViewURL+'#/main/stage/'+b.data[c.getGridColumns()[a].dataIndex].id;wizardConfig.dispatcher.trigger('stageGrid:openIframe',d)}}},buildColumns:function(b){var a=this;result=[{dataIndex:'text',align:'center',menuDisabled:!1,sortable:!1,hideable:!1,draggable:!1,resizable:!1,width:120,locked:!0,renderer:function(c){if(c=='constructLevel'){return a.L('constructLevel')}else {return c}}}];return result.concat(a.buildDynamicColumns(b))},buildDynamicColumns:function(c){var b=this;var d=[];var a={};c.selectedNodes.forEach(function(g){var f=b.prototypeStore.byIdMap[g].getPath().split('/');f.splice(0,2);var e=f[0];if(!a[e]){a[e]={};d.push(a[e])}f.forEach(function(d,f,h){if(!a[d]){a[d]={};if(f>0){var e=h[f-1];if(a[e].columns==null){a[e].columns=[]}a[e].columns.unshift(a[d])}}if(f==h.length-1){a[d].dataIndex=g;a[d].renderer=b.getRendererFunc(c);a[d].width=b.columnsWidthMap[c.zoom]}a[d].text=b.prototypeStore.byIdMap[d].data.text=='projectLevel'?b.L('projectLevel'):b.prototypeStore.byIdMap[d].data.text;a[d].menuDisabled=!1;a[d].sortable=!1;a[d].hideable=!1;a[d].draggable=!1;a[d].resizable=!1})});return d},formatDate:function(a){var b=this;if(a){var c=new Date(a);if(b.isLocalRtl()){return Ext.Date.format(new Date(),'d-m-y')}else {return Ext.Date.format(new Date(),'m-d-y')}}},getRendererFunc:function(b){var c=this;var a=function(a){if(a){var c=this.ownerGrid;var g=a.Started_Date__c?c.formatDate(new Date(a.Started_Date__c)):'-';var k=a.Planned_Start_Date__c?c.formatDate(new Date(a.Planned_Start_Date__c)):'-';var n=a.Planned_End_Date__c?c.formatDate(new Date(a.Planned_End_Date__c)):'-';var f=a.Completed_Date__c?c.formatDate(new Date(a.Completed_Date__c)):'-';var j=a.Expected_Start_Date__c?c.formatDate(new Date(a.Expected_Start_Date__c)):'-';var i=a.Expected_End_Date_V1__c?c.formatDate(new Date(a.Expected_End_Date_V1__c)):'-';var m=a.Planned_Duration__c?a.Planned_Duration__c:'-';var h=a.Duration__c?a.Duration__c:'-';var l=a.Expected_Duration__c?a.Expected_Duration__c:'-';var o=c.getStatusColor(a.Progress_Status__c);var e=null;if(a.Inspections__r!=null&&a.Inspections__r.records.length>0){a.Inspections__r.records.forEach(function(c){e+=c.Grade__c});e=e/a.Inspections__r.records.length}e=e==null?'-':e;var p=c.getGradeColor(e);var d='<a href="javascript:void(0)"  class="stageGridCellWrapper '+o+' progressTab"><div><span title="'+c.L('PlannedStartDate')+' : '+k+'" class="spanCell notDuration">'+k+'</span><span title="'+c.L('PlannedEndDate')+' : '+n+'" class="spanCell notDuration">'+n+'</span></div><div>';if(g!='-'){d+='<span title="'+c.L('StartedDate')+' : '+g+'" class="spanCell notDuration">'+g+'</span>'}else {d+='<span title="'+c.L('ExpectedStartDate')+' : '+j+'" class="spanCell notDuration">'+j+'</span>'}if(f!='-'){d+='<span title="'+c.L('CompletedDate')+' : '+f+'" class="spanCell notDuration">'+f+'</span>'}else {d+='<span title="'+c.L('ExpectedEndDate')+' : '+i+'" class="spanCell notDuration">'+i+'</span>'}d+='</div>';d+='<div>';d+='<span title="'+c.L('PlannedDuration')+' : '+m+'" class="spanCell duration">'+m+'</span>';if(h!='-'){d+='<span title="'+c.L('Duration')+' : '+h+'" class="spanCell duration">'+h+'</span>'}else {d+='<span title="'+c.L('ExpectedDuration')+' : '+l+'" class="spanCell duration">'+l+'</span>'}d+='</div></a><a href="javascript:void(0)"  class="stageGridCellWrapper '+p+' qualityTab"><div><span  class="spanCell quality">'+e+'</span></div></a>';return d}else {return ''}};return a},getGradeColor:function(a){switch(!0){case 0<=a&&a<=65:return 'inProgress';break;case 66<=a&&a<=85:return 'soonToStart';break;case 86<=a&&a<=100:return 'completed';break;case 0>a:return 'lateToStart';break;default:return 'notStarted';}},getStatusColor:function(a){switch(a){case 'Late Start':return 'lateToStart';break;case 'Completed':return 'completed';break;case 'Not Started':return 'notStarted';break;case 'Behind':return 'soonToStart';break;case 'In Work':return 'inProgress';break;default:return 'notStarted';}},buildColumnsSummery:function(a){a.forEach(function(b){})},constructor:function(b){var a=this;a.viewSelected=b.viewSelected||'Progress';if(b&&!b.hasOwnProperty('projectId')){throw new Error('ProjectId is required for StagesGrid')}a.currentLocale=b.locale;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';ccReidComponents.locale[a.currentLocale].apply();Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['StagesGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','StagesGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'StagesGrid':!0},['widget.StagesGrid'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[stagesGrid.view,'StagesGrid'],0);Ext.cmd.derive('stagesGrid.view.Panel',Ext.panel.Panel,{initComponent:function(){var a=this;Ext.apply(a,{layout:'fit',items:[{xtype:'StagesGrid',clientInstance:this.getInitialConfig('clientInstance'),dispatcher:this.getInitialConfig('dispatcher'),locale:this.getInitialConfig('locale'),projectId:this.getInitialConfig('projectId')}]});this.getInitialConfig('dispatcher').on('stageGrid:resize',function(b){a.tryReizeAccordingToParentDiv()});window.addEventListener('resize',Ext.Function.createBuffered(function(){a.tryReizeAccordingToParentDiv()},150));Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.tryReizeAccordingToParentDiv()},tryReizeAccordingToParentDiv:function(){var b=this;var e=b.getInitialConfig();var d=e['renderTo'];if(d){var a=Ext.fly(d).getSize();if(a){b.setSize(a.width-30,a.height)}}else {var c=b.up();if(c&&c.rendered){var a=c.getSize();if(a){b.setSize(a.width,a.height)}}}}},0,0,['component','box','container','panel'],{'component':!0,'box':!0,'container':!0,'panel':!0},0,0,[stagesGrid.view,'Panel'],0);Ext.cmd.derive('CGA.view.ControlHeader',Ext.panel.Header,{needAdjustToCalendar:!1,border:'0 0 1 0',height:40,initComponent:function(){var a=this.up('advanced-viewport').getViewModel().get('currentLocale');this.tools=[Ext.create('Ext.form.Label',{html:'',xtype:'lockingUserContainer'}),{xtype:'tbspacer',width:10},Ext.create('Ext.Button',{text:this.L('GanttQuality'),xtype:'ganttQualityFilterBtn',menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('filterPred'),text:this.L('filterPred'),reference:'filterPred',enableToggle:!0,isFilter:!0,iconCls:'fa fa-chain-broken',xtype:'menucheckitem',bind:{checked:'{filterPred}'}},{tooltip:this.L('manuallyScheduled'),text:this.L('manuallyScheduled'),reference:'manuallyScheduled',iconCls:'fa fa-hand-paper-o',xtype:'menucheckitem',bind:{checked:'{manuallyScheduled}'}},{tooltip:this.L('constraintDate'),text:this.L('constraintDate'),reference:'constraintDate',iconCls:'fa fa-lock',xtype:'menucheckitem',bind:{checked:'{constraintDate}'}},{tooltip:this.L('highlightTasksLonger10'),text:this.L('highlightTasksLonger10'),reference:'highlightLong',iconCls:'icon-clock',xtype:'menucheckitem',bind:{checked:'{highlightLong}'}}],listeners:{click:function(b,a){}}}}),{xtype:'tbspacer',width:10},Ext.create('Ext.Button',{text:this.L('WeeklyMethod'),xtype:'weeklyMethodFilterBtn',menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('filterSchedule'),text:this.L('filterSchedule'),reference:'filterSchedule',enableToggle:!0,isFilter:!0,iconCls:'fa fa-clock-o',xtype:'menucheckitem',bind:{checked:'{filterSchedule}'}},{tooltip:this.L('updateSchedule'),text:this.L('updateSchedule'),reference:'updateTaskStartToday',iconCls:'fa fa-fast-forward',bind:{disabled:'{readOnlyMode}'}},{tooltip:this.L('betweenDates'),text:this.L('betweenDates'),reference:'betweenDates',iconCls:'fa fa-eye',xtype:'menucheckitem',bind:{checked:'{betweenDates}'}},{tooltip:this.L('highlightCriticalPath'),text:this.L('highlightCriticalPath'),reference:'criticalPath',iconCls:'fa fa-exclamation icon-attention',xtype:'menucheckitem',bind:{checked:'{highlightCriticalPaths}'}},{tooltip:this.L('significant'),text:this.L('significant'),reference:'significantTasks',iconCls:'fa fa-filter',xtype:'menucheckitem',bind:{checked:'{significantTasks}'}},{tooltip:this.L('bulkOperations'),text:this.L('bulkOperations'),reference:'bulkOperations',iconCls:'fa fa-cubes',bind:{disabled:'{disableBulkOperation}'}},{tooltip:this.L('WorkPlan'),text:this.L('WorkPlan'),menu:{items:[{tooltip:this.L('Weekly'),xtype:'menucheckitem',text:this.L('Weekly'),reference:'weeklyFilter',bind:{checked:'{weeklyTasks}'}},{tooltip:this.L('Monthly'),xtype:'menucheckitem',text:this.L('Monthly'),reference:'monthlyFilter',bind:{checked:'{monthlyTasks}'}}]}}],listeners:{click:function(b,a){}}}}),{xtype:'tbspacer',width:10},Ext.create('Ext.Button',{text:this.L('Filters'),xtype:'filterMenuBtn',menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('toggleHamoks'),text:this.L('toggleHamoks'),reference:'toggleHamoks',iconCls:'fa fa-star-half-o',xtype:'menucheckitem',bind:{checked:'{parentRowHidden}'}},{tooltip:this.L('toggleChildTasksGrouping'),text:this.L('toggleChildTasksGrouping'),reference:'toggleGrouping',enableToggle:!0,iconCls:'fa fa-filter',xtype:'menucheckitem',bind:{checked:'{toggleGrouping}'}},{tooltip:this.L('toggleRollupTasks'),text:this.L('toggleRollupTasks'),reference:'toggleRollup',enableToggle:!0,iconCls:'fa fa-filter',xtype:'menucheckitem',bind:{checked:'{toggleRollup}'}},{xtype:'menuseparator'},{tooltip:this.L('highlightTasksLonger10'),text:this.L('highlightTasksLonger10'),reference:'highlightLong',iconCls:'icon-clock',xtype:'menucheckitem',bind:{checked:'{highlightLong}'}},{tooltip:this.L('highlightCriticalPath'),text:this.L('highlightCriticalPath'),reference:'criticalPath',iconCls:'fa fa-exclamation  icon-attention',xtype:'menucheckitem',bind:{checked:'{highlightCriticalPaths}'}},{tooltip:this.L('milestoneCriticalPath'),text:'<div class="iconWrapper"></div>'+this.L('milestoneCriticalPath'),reference:'milestoneCriticalPath',iconCls:'fa fa-exclamation icon-attention',xtype:'menucheckitem',bind:{checked:'{milestoneCriticalPath}',disabled:'{disableMilestoneCriticalPath}'}},{tooltip:this.L('filterSchedule'),text:this.L('filterSchedule'),reference:'filterSchedule',enableToggle:!0,isFilter:!0,iconCls:'fa fa-clock-o',xtype:'menucheckitem',bind:{checked:'{filterSchedule}'}},{tooltip:this.L('filterPred'),text:this.L('filterPred'),reference:'filterPred',enableToggle:!0,isFilter:!0,iconCls:'fa fa-chain-broken',xtype:'menucheckitem',bind:{checked:'{filterPred}'}},{tooltip:this.L('manuallyScheduled'),text:this.L('manuallyScheduled'),reference:'manuallyScheduled',iconCls:'fa fa-hand-paper-o',xtype:'menucheckitem',bind:{checked:'{manuallyScheduled}'}},{tooltip:this.L('constraintDate'),text:this.L('constraintDate'),reference:'constraintDate',iconCls:'fa fa-lock',xtype:'menucheckitem',bind:{checked:'{constraintDate}'}},{tooltip:this.L('betweenDates'),text:this.L('betweenDates'),reference:'betweenDates',iconCls:'fa fa-eye',xtype:'menucheckitem',bind:{checked:'{betweenDates}'}},{tooltip:this.L('significant'),text:this.L('significant'),reference:'significantTasks',iconCls:'fa fa-filter',xtype:'menucheckitem',bind:{checked:'{significantTasks}'}},{tooltip:this.L('administrative'),text:this.L('administrative'),reference:'administrativeTasks',iconCls:'fa fa-cogs',xtype:'menucheckitem',bind:{checked:'{administrativeTasks}'}},{tooltip:this.L('hideTasks'),text:this.L('hideTasks'),reference:'hideTasks',iconCls:'fa fa-eye-slash',xtype:'menucheckitem',bind:{checked:'{hideTasks}'}},{tooltip:this.L('WorkPlan'),text:this.L('WorkPlan'),menu:{items:[{tooltip:this.L('Weekly'),xtype:'menucheckitem',text:this.L('Weekly'),reference:'weeklyFilter',bind:{checked:'{weeklyTasks}'}},{tooltip:this.L('Monthly'),xtype:'menucheckitem',text:this.L('Monthly'),reference:'monthlyFilter',bind:{checked:'{monthlyTasks}'}}]}}],listeners:{click:function(b,a){}}}}),{xtype:'button',tooltip:this.L('clearFilter'),reference:'clearTasksFilter',iconCls:'fa fa-ban icon-attention',bind:{disabled:'{disableFilterButton}'}},{xtype:'tbfill'},{xtype:'tbspacer',width:20},Ext.create('Ext.Button',{text:this.L('Baseline'),menu:[{tooltip:this.L('showBaseline'),text:this.L('showBaseline'),iconCls:'fa fa-star-half-o',itemId:'showBaseLineMenu',menu:{xtype:'menu',items:[{xtype:'menucheckitem',tooltip:this.L('MainBaseline'),text:this.L('MainBaseline'),reference:'toggleBaseline'},{xtype:'menucheckitem',tooltip:this.L('weekly'),text:this.L('weekly'),reference:'toggleWeeklyBaseline',itemId:'toggleWeeklyBaseline'},{xtype:'menucheckitem',tooltip:this.L('monthly'),text:this.L('monthly'),reference:'toggleMonthlyBaseline'},{reference:'historyBaselineMenu',tooltip:this.L('history'),text:this.L('history'),itemId:'showHistoryBaselineMenu',bind:{disabled:'{disableBaseLines}'},menu:[],listeners:{afterrender:function(a){var c=this;var b=c.up('cga-gantt').crudManager;if(b.historyBaseLines.length>0){a.setDisabled(!1)}else {a.setDisabled(!0)}b.historyBaseLines.forEach(function(b){a.menu.insert({xtype:'editMenuItem',label:b.label,name:b.name,value:b.value})})}}}]},listeners:{afterrender:function(b){var a=this.up('cga-gantt').crudManager.selectedBaseLine;if(a!=null){b.menu.insert(0,{xtype:'menucheckitem',itemId:'selectedBaselineId',tooltip:a.label,text:a.label,baselineId:a.value,reference:'toggleHistoryBaseline'})}}}},{tooltip:this.L('setBaselineSelected'),text:this.L('setBaselineSelected'),iconCls:'fa fa-tasks',bind:{disabled:'{disableSelectedBaseLine}'},menu:{xtype:'menu',items:[{tooltip:this.L('weekly'),text:this.L('weekly'),reference:'saveWeeklyBaseLineSelected'},{tooltip:this.L('monthly'),text:this.L('monthly'),reference:'saveMonthlyBaseLineSelected'},{tooltip:this.L('MainBaseline'),text:this.L('MainBaseline'),reference:'saveMainBaseLineSelected'}]}},{tooltip:this.L('setBaselineAll'),text:this.L('setBaselineAll'),iconCls:'fa fa-tasks',bind:{disabled:'{disableBaseLines}'},menu:{xtype:'menu',items:[{tooltip:this.L('weekly'),text:this.L('weekly'),reference:'saveWeeklyBaseLine'},{tooltip:this.L('monthly'),text:this.L('monthly'),reference:'saveMonthlyBaseLine'},{tooltip:this.L('project'),text:this.L('project'),reference:'saveProjectBaseLine'},{tooltip:this.L('MainBaseline'),text:this.L('MainBaseline'),reference:'saveMainBaseLine'}]}},{tooltip:this.L('deleteBaseline'),text:this.L('deleteBaseline'),iconCls:'fa fa-trash-o',menu:{xtype:'menu',items:[]},listeners:{afterrender:function(a){var b=this.up('cga-gantt').crudManager;if(b.historyBaseLines.length>0){a.setDisabled(!1)}else {a.setDisabled(!0)}b.historyBaseLines.forEach(function(b){a.menu.insert({tooltip:b.label,text:b.label,baseLineId:b.value,baselineLabel:b.label,reference:'deleteSelectedBaseline',group:'historyBaselines'})})}}}],listeners:{afterrender:function(b,c){var a=Ext.getCmp('menuToolbar')}},handler:function(g){var a=g.up('cga-gantt').crudManager;if(a.selectedBaseLineChanged==!0||a.isBaselineUpdate==!0){var b=g.down('#showHistoryBaselineMenu');var e=g.down('#showBaseLineMenu');var f=Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].menu;if(a.isBaselineUpdate==!0){var c=0;var d;b.menu.items.items.forEach(function(b){if(b.down('#baselineCheckItem').baselineId==a.updatedBaseline.baselineId){d=c;return !1}c++});var e=b.menu.items.getAt(d);b.menu.remove(e);b.menu.insert(d,{xtype:'editMenuItem',label:a.updatedBaseline.baselineLabel,name:a.updatedBaseline.baselineName,value:a.updatedBaseline.baselineId})}else {if(a.selectedBaseLineChanged==!0){if(a.historyBaseLinesUpdated==null){a.historyBaseLinesUpdated=[]}if(a.selectedBaseLine!=null){a.historyBaseLinesUpdated.push(a.selectedBaseLine)}a.historyBaseLinesUpdated.forEach(function(c){var d=c.baselineId||c.value;if(d!=a.newSelectedBaseline.baselineId){f.insert({tooltip:c.baselineLabel||c.label,text:c.baselineLabel||c.label,baseLineId:d,baselineLabel:c.baselineLabel||c.label,reference:'deleteSelectedBaseline',group:'historyBaselines'});b.menu.insert({xtype:'editMenuItem',label:c.baselineLabel||c.label,name:c.baselineName||c.name,value:d})}});if(a.selectedBaseLine!=null){e.menu.remove(e.menu.items.getAt(0))}e.menu.insert(0,{xtype:'menucheckitem',itemId:'selectedBaselineId',tooltip:a.newSelectedBaseline.baselineLabel,text:a.newSelectedBaseline.baselineLabel,baselineId:a.newSelectedBaseline.baselineId,reference:'toggleHistoryBaseline',checked:!0});var c=0;var d;b.menu.items.items.forEach(function(b){if(b.down('#baselineCheckItem').baselineId==a.newSelectedBaseline.baselineId){d=c;return !1}c++});b.menu.remove(b.menu.items.getAt(d));var h;c=0;f.items.items.forEach(function(b){if(b.baseLineId==a.newSelectedBaseline.baselineId){h=c;return !1}c++});f.remove(f.items.getAt(h))}}a.baeslineAdded=!1;a.selectedBaseLineChanged=!1;a.selectedBaseLine=a.newSelectedBaseline;a.newSelectedBaseline=null;a.historyBaseLinesUpdated=[];a.isBaselineUpdate=!1;var i=Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].menu;if(i.items.getRange().length==0){Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].setDisabled(!0);Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].setDisabled(!0)}else {Ext.ComponentQuery.query('[reference=deleteBaseline]')[0].setDisabled(!1);Ext.ComponentQuery.query('[reference=historyBaselineMenu]')[0].setDisabled(!1)}}}}),{xtype:'tbspacer',width:20},Ext.create('Ext.Button',{text:this.L('View'),menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('zoomToFit'),text:this.L('zoomToFit'),reference:'zoomToFit',iconCls:'fa fa-arrows-alt'},{tooltip:this.L('weekView'),text:this.L('weekView'),reference:'zoomToWeekLevel',iconCls:'fa fa-calendar'},{tooltip:this.L('monthView'),text:this.L('monthView'),reference:'zoomToMonthLevel',iconCls:'fa fa-calendar'},{tooltip:this.L('quarterView'),text:this.L('quarterView'),reference:'zoomToQuarterLevel',iconCls:'fa fa-calendar'},{tooltip:this.L('viewFullScreen'),text:this.L('viewFullScreen'),reference:'viewFullScreen',iconCls:'fa fa-desktop',bind:{hidden:'{!fullscreenEnabled}'}}]}}),{xtype:'button',tooltip:this.L('zoomOut'),reference:'zoomOut',iconCls:'fa fa-search-minus'},{xtype:'button',tooltip:this.L('zoomIn'),reference:'zoomIn',iconCls:'fa fa-search-plus'},{xtype:'tbspacer',width:20},{xtype:'button',tooltip:this.L('addDependencies'),iconCls:'fa fa-link',reference:'addDependencies',bind:{disabled:'{disableInstanceSelected}'}},{xtype:'button',tooltip:this.L('indent'),reference:'indentTask',iconCls:'fa fa-indent',bind:{disabled:'{disableInstanceSelected}'}},{xtype:'button',tooltip:this.L('outdent'),reference:'outdentTask',iconCls:'fa fa-outdent',bind:{disabled:'{disableInstanceSelected}'}},{xtype:'tbspacer',width:20},Ext.create('Ext.Button',{tooltip:this.L('undo'),reference:'undo',iconCls:'fa fa-undo',bind:{disabled:'{disableUndo}'}}),Ext.create('Ext.Button',{tooltip:this.L('redo'),reference:'redo',iconCls:'fa fa-repeat',bind:{disabled:'{disableRedo}'}}),{xtype:'tbspacer',width:20},{xtype:'button',tooltip:this.L('previousTimespan'),reference:'shiftPrevious',iconCls:'fa fa-chevron-left'},{xtype:'button',tooltip:this.L('nextTimespan'),reference:'shiftNext',iconCls:'fa fa-chevron-right'},{xtype:'tbspacer',width:20},Ext.create('Ext.Button',{text:this.L('outline'),menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('collapseAll'),text:this.L('collapseAll'),reference:'collapseAll',iconCls:'fa fa-angle-double-up',bind:{disabled:'{filterSet}'}},{tooltip:this.L('expandAll'),text:this.L('expandAll'),reference:'expandAll',iconCls:'fa fa-angle-double-down',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level1'),text:this.L('level1'),reference:'level1',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level2'),text:this.L('level2'),reference:'level2',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level3'),text:this.L('level3'),reference:'level3',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level4'),text:this.L('level4'),reference:'level4',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level5'),text:this.L('level5'),reference:'level5',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level6'),text:this.L('level6'),reference:'level6',bind:{disabled:'{filterSet}'}},{tooltip:this.L('level7'),text:this.L('level7'),reference:'level7',bind:{disabled:'{filterSet}'}}]}}),{xtype:'tbspacer',width:20},{xtype:'button',tooltip:this.L('milestonesChanged'),reference:'milestonesAlert',border:!1,bind:{disabled:'{disableMilestonesAlert}',iconCls:'fa fa-stop milestonesAlerts {hasUnreadAlerts}'}},{xtype:'tbspacer',width:20},{xtype:'button',tooltip:this.L('saveChanges'),reference:'saveChanges',iconCls:'fa fa-floppy-o icon-attention',bind:{disabled:'{disableSaveButton}'}},Ext.create('Ext.Button',{text:this.L('Advanced'),menu:{xtype:'menu',rtl:a,items:[{tooltip:this.L('manageCalendars'),text:this.L('manageCalendars'),reference:'manageCalendars',iconCls:'fa fa-calendar',bind:{hidden:'{!calendarManager}',disabled:'{readOnlyMode}'}},{tooltip:this.L('downloadStore'),text:this.L('downloadStore'),iconCls:'fa fa-download',reference:'downloadStore'},{tooltip:this.L('downloadMsProject'),text:this.L('downloadMsProject'),iconCls:'fa fa-arrow-circle-up',reference:'downloadMsProject'},{tooltip:this.L('printGantt'),text:this.L('printGantt'),iconCls:'fa fa-print',reference:'printGantt'},{tooltip:this.L('adjustToCalendar'),text:this.L('adjustToCalendar'),reference:'adjustToCalendar',margin:'0px 10px 0px 0px',style:{'border-color':this.needAdjustToCalendar==!0?'red':null},iconCls:'fa fa-clock-o',bind:{disabled:'{readOnlyMode}'}},{tooltip:this.L('ReleaseUserLock'),text:this.L('ReleaseUserLock'),reference:'releaseLock',iconCls:'fa fa-unlock-alt',bind:{disabled:'{!readOnlyMode}'}}]}}),{xtype:'tbspacer',width:20}];Ext.panel.Header.prototype.initComponent.apply(this,arguments);Ext.Array.forEach(this.query('tool'),function(a){if(a.reference){a.itemId=a.reference}});var c=this.up('ganttpanel').taskStore;var b=this;b.mon(c,'filter-clear',function(){Ext.each(b.tools.items,function(a,b){if(a.isFilter==!0){a.toggle(!1,!0)}})})}},0,['cga-controlheader'],['component','box','container','header','cga-controlheader'],{'component':!0,'box':!0,'container':!0,'header':!0,'cga-controlheader':!0},['widget.cga-controlheader'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.view,'ControlHeader'],0);Ext.cmd.derive('Sch.mixin.FilterableTreeView',Ext.Base,{prevBlockRefresh:null,initTreeFiltering:function(){var a=function(){var a=this.store;this.mon(a,'nodestore-datachange-start',this.onFilterChangeStart,this);this.mon(a,'nodestore-datachange-end',this.onFilterChangeEnd,this);if(!a.allowExpandCollapseWhileFiltered){this.mon(a,'filter-clear',this.onFilterCleared,this);this.mon(a,'filter-set',this.onFilterSet,this)}};if(this.rendered){a.call(this)}else {this.on('beforerender',a,this,{single:!0})}},onFilterChangeStart:function(){this.prevBlockRefresh=this.blockRefresh;this.blockRefresh=!0;Ext.suspendLayouts()},onFilterChangeEnd:function(){Ext.resumeLayouts(!0);this.blockRefresh=this.prevBlockRefresh},onFilterCleared:function(){delete this.toggle;var a=this.getEl();if(a){a.removeCls('sch-tree-filtered')}},onFilterSet:function(){this.toggle=function(){};var a=this.getEl();if(a){a.addCls('sch-tree-filtered')}}},0,0,0,0,0,0,[Sch.mixin,'FilterableTreeView'],0);Ext.cmd.derive('Sch.patches.TreeNavigationModel',Sch.util.Patch,{target:'Ext.tree.NavigationModel',minVersion:'6.0.0',maxVersion:'6.0.2',overrides:{onAsterisk:function(){if(!this.view.ownerCt.expandAll){this.view.lockingPartner.ownerCt.expandAll();return}this.callParent(arguments)}}},0,0,0,0,0,0,[Sch.patches,'TreeNavigationModel'],0);Ext.cmd.derive('Sch.panel.TimelineTreePanel',Ext.tree.Panel,{useArrows:!0,rootVisible:!1,lockedXType:'treepanel',isTimelineTreePanel:!0,initComponent:function(){Ext.tree.Panel.prototype.initComponent.apply(this,arguments);this.getSchedulingView()._initializeTimelineView()}},0,['timelinetree'],['component','box','container','panel','tablepanel','treepanel','timelinetree'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'treepanel':!0,'timelinetree':!0},['widget.timelinetree'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable],[Sch.mixin.TimelinePanel.prototype.mixinId||Sch.mixin.TimelinePanel.$className,Sch.mixin.TimelinePanel]],[Sch.panel,'TimelineTreePanel'],function(){this.override(Sch.mixin.TimelinePanel.prototype.inheritables()||{})});Ext.cmd.derive('Gnt.view.dependency.Painter',Sch.view.dependency.Painter,{createLineDef:function(f,b,m,g,i,c,h){var j=b.self.Type,n=this,d=n.pathFinder.getHorizontalMargin(),e=f.getRowHeight(),a=Sch.view.dependency.Painter.prototype.createLineDef.call(this,f,b,m,g,i,c,h);var l=a.endBox;var k=a.endSide;a.startArrowSize=a.endArrowSize;a.startArrowMargin=a.endArrowMargin;a.endArrowSize=0;a.endArrowMargin=0;a.endBox=a.startBox;a.endSide=a.startSide;a.startBox=l;a.startSide=k;a.startVerticalMargin=Math.floor((e-(a.startBox.bottom-a.startBox.top))/2)+1;a.endVerticalMargin=Math.floor((e-(a.endBox.bottom-a.endBox.top))/2)-1;if(b.getType()==j.EndToStart&&a.endBox.bottom<a.startBox.top&&a.endBox.end-a.startBox.start<d){a.startShift=g.isMilestone()?0:d-(c.end-c.start)/2;a.startVerticalMargin=a.startHorizontalMargin=a.startArrowMargin=a.endArrowMargin=0;a.startSide='top'}return a}},0,0,0,0,['schdependencypainter.ganttdefault'],0,[Gnt.view.dependency,'Painter'],0);Ext.cmd.derive('Gnt.view.dependency.View',Sch.view.dependency.View,{config:{painterConfig:{type:'ganttdefault'}},constructor:function(b){var a=this;Sch.view.dependency.View.prototype.constructor.apply(this,arguments);if(a.getEnableDependencyDragDrop()){a.configureAllowedSourceTerminals();if(a.getDependencyStore().allowedDependencyTypes){a.dragZone.on('dragstart',a.configureAllowedTargetTerminals,a)}else {a.getPrimaryView().el.addCls(['sch-terminal-allow-target-start','sch-terminal-allow-target-end'])}a.dragZone.on('drop',a.hideTargetTerminals,a)}},configureAllowedSourceTerminals:function(){var a=this.getDependencyStore().allowedDependencyTypes,b=['sch-terminal-allow-source-start','sch-terminal-allow-source-end'];if(a){b=[];if(Ext.Array.contains(a,'EndToEnd')||Ext.Array.contains(a,'EndToStart')){b.push('sch-terminal-allow-source-end')}if(Ext.Array.contains(a,'StartToStart')||Ext.Array.contains(a,'StartToEnd')){b.push('sch-terminal-allow-source-start')}}this.dragZone.view.el.addCls(b)},configureAllowedTargetTerminals:function(){var a=this.getDependencyStore().allowedDependencyTypes,b=[],c=this.dragZone.view.el;c.removeCls(['sch-terminal-allow-target-start','sch-terminal-allow-target-end']);if(Ext.Array.contains(a,'EndToEnd')||Ext.Array.contains(a,'StartToEnd')){b.push('sch-terminal-allow-target-end')}if(Ext.Array.contains(a,'StartToStart')||Ext.Array.contains(a,'EndToStart')){b.push('sch-terminal-allow-target-start')}c.addCls(b)},hideTargetTerminals:function(){this.getDependencyStore().allowedDependencyTypes&&this.getPrimaryView().el.removeCls(['sch-terminal-allow-target-start','sch-terminal-allow-target-end'])},onPrimaryViewItemUpdate:function(a,c,b){this.updateDependencies(a.getAllDependencies()).then(null,Ext.emptyFn)}},1,0,0,0,['schdependencyview.basegantt'],0,[Gnt.view.dependency,'View'],0);Ext.cmd.derive('Gnt.view.dependency.Mixin',Sch.view.dependency.Mixin,{enableDependencyDragDrop:!0,createDependencyView:function(b,a){return Sch.view.dependency.View.create(Ext.apply({},b,{primaryView:a,type:'basegantt'}))}},0,0,0,0,0,0,[Gnt.view.dependency,'Mixin'],0);Ext.cmd.derive('Ext.resizer.BorderSplitter',Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass='Ext.resizer.BorderSplitterTracker';return a},onTargetCollapse:function(a){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,a);if(this.performCollapse!==!1&&a.collapseMode=='mini'){a.addCls(a.baseCls+'-'+a.collapsedCls+'-mini')}},onTargetExpand:function(a){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,a);if(this.performCollapse!==!1&&a.collapseMode=='mini'){a.removeCls(a.baseCls+'-'+a.collapsedCls+'-mini')}}},0,['bordersplitter'],['component','box','splitter','bordersplitter'],{'component':!0,'box':!0,'splitter':!0,'bordersplitter':!0},['widget.bordersplitter'],0,[Ext.resizer,'BorderSplitter'],0);Ext.cmd.derive('Ext.layout.container.Border',Ext.layout.container.Container,{alternateClassName:'Ext.layout.BorderLayout',targetCls:'x-border-layout-ct',itemCls:['x-border-item','x-box-item'],type:'border',isBorderLayout:!0,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:'left',padOnContainerProp:'left',padNotOnContainerProp:'right',axisProps:{horz:{borderBegin:'west',borderEnd:'east',horizontal:!0,posProp:'x',sizeProp:'width',sizePropCap:'Width'},vert:{borderBegin:'north',borderEnd:'south',horizontal:!1,posProp:'y',sizeProp:'height',sizePropCap:'Height'}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:'placeholder',regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(n,t,k){var m=this,g=m.axisProps[k],e=!g.horizontal,s=g.sizeProp,i=0,p=n.childItems,u=p.length,d,h,a,c,b,j,q,l,r,f,o;for(h=0;h<u;++h){a=p[h];b=a.target;a.layoutPos={};if(b.region){a.region=j=b.region;a.isCenter=b.isCenter;a.isHorz=b.isHorz;a.isVert=b.isVert;a.weight=b.weight||m.regionWeights[j]||0;b.weight=a.weight;t[b.id]=a;if(b.isCenter){d=a;c=b.flex;n.centerRegion=d;continue}if(e!==a.isVert){continue}a.reverseWeighting=j===g.borderEnd;l=b[s];r=typeof l;if(!b.collapsed){if(r==='string'&&(q=m.percentageRe.exec(l))){a.percentage=parseInt(q[1],10)}else {if(b.flex){i+=a.flex=b.flex}}}}}if(d){f=d.target;if(o=f.placeholderFor){if(!c&&e===o.collapsedVertical()){c=0;d.collapseAxis=k}}else {if(f.collapsed&&e===f.collapsedVertical()){c=0;d.collapseAxis=k}}}if(c==null){c=1}i+=c;return Ext.apply({before:e?'top':'left',totalFlex:i},g)},beginLayout:function(b){var c=this,f=c.getLayoutItems(),g=c.padding,o=typeof g,m=!1,d,j,l,e,k,a,h,n,i;if(g){if(o==='string'||o==='number'){g=Ext.util.Format.parseBox(g)}}else {g=b.getEl('getTargetEl').getPaddingInfo();m=!0}b.outerPad=g;b.padOnContainer=m;for(e=0,l=f.length;e<l;++e){j=f[e];a=c.getSplitterTarget(j);if(a){h=undefined;n=!!j.hidden;if(!a.split){if(a.isCollapsingOrExpanding){h=!!a.collapsed}}else {if(n!==a.hidden){h=!a.hidden}}if(h){j.show()}else {if(h===!1){j.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);f=b.childItems;l=f.length;k={};b.borderAxisHorz=c.beginAxis(b,k,'horz');b.borderAxisVert=c.beginAxis(b,k,'vert');for(e=0;e<l;++e){d=f[e];a=c.getSplitterTarget(d.target);if(a){i=k[a.id];if(!i){i=b.getEl(a.el,c);i.region=a.region}d.collapseTarget=a=i;d.weight=a.weight;d.reverseWeighting=a.reverseWeighting;a.splitter=d;d.isHorz=a.isHorz;d.isVert=a.isVert}}c.sortWeightedItems(f,'reverseWeighting');c.setupSplitterNeighbors(f)},calculate:function(e){var d=this,o=d.getContainerSize(e),j=e.childItems,m=j.length,f=e.borderAxisHorz,g=e.borderAxisVert,i=e.outerPad,n=e.padOnContainer,c,a,h,b,k,l;f.begin=i[d.padOnContainerProp];g.begin=i.top;k=f.end=f.flexSpace=o.width+(n?i[d.padOnContainerProp]:-i[d.padNotOnContainerProp]);l=g.end=g.flexSpace=o.height+(n?i.top:-i.bottom);for(c=0;c<m;++c){a=j[c];h=a.getMarginInfo();if(a.isHorz||a.isCenter){f.addUnflexed(h.width);k-=h.width}if(a.isVert||a.isCenter){g.addUnflexed(h.height);l-=h.height}if(!a.flex&&!a.percentage){if(a.isHorz||a.isCenter&&a.collapseAxis==='horz'){b=a.getProp('width');f.addUnflexed(b);if(a.collapseTarget){k-=b}}else {if(a.isVert||a.isCenter&&a.collapseAxis==='vert'){b=a.getProp('height');g.addUnflexed(b);if(a.collapseTarget){l-=b}}}}}for(c=0;c<m;++c){a=j[c];h=a.getMarginInfo();if(a.percentage){if(a.isHorz){b=Math.ceil(k*a.percentage/100);b=a.setWidth(b);f.addUnflexed(b)}else {if(a.isVert){b=Math.ceil(l*a.percentage/100);b=a.setHeight(b);g.addUnflexed(b)}}}}for(c=0;c<m;++c){a=j[c];if(!a.isCenter){d.calculateChildAxis(a,f);d.calculateChildAxis(a,g)}}if(d.finishAxis(e,g)+d.finishAxis(e,f)<2){d.done=!1}else {d.finishPositions(j)}},calculateChildAxis:function(b,a){var j=b.collapseTarget,k='set'+a.sizePropCap,f=a.sizeProp,i=b.getMarginInfo()[f],d,g,h,e,c;if(j){d=j.region}else {d=b.region;h=b.flex}g=d===a.borderBegin;if(!g&&d!==a.borderEnd){b[k](a.end-a.begin-i);e=a.begin}else {if(h){c=Math.ceil(a.flexSpace*(h/a.totalFlex));c=b[k](c)}else {if(b.percentage){c=b.peek(f)}else {c=b.getProp(f)}}c+=i;if(g){e=a.begin;a.begin+=c}else {a.end=e=a.end-c}}b.layoutPos[a.posProp]=e},eachItem:function(a,d,f){var g=this,e=g.getLayoutItems(),b=0,c;if(Ext.isFunction(a)){d=a;f=d}for(b;b<e.length;b++){c=e[b];if(!a||c.region===a){if(d.call(f,c)===!1){break}}}},finishAxis:function(d,a){var c=a.end-a.begin,b=d.centerRegion;if(b){b['set'+a.sizePropCap](c-b.getMarginInfo()[a.sizeProp]);b.layoutPos[a.posProp]=a.begin}return Ext.isNumber(c)?1:0},finishPositions:function(c){var e=c.length,b,a,d=this.horzPositionProp;for(b=0;b<e;++b){a=c[b];a.setProp('x',a.layoutPos.x+a.marginInfo[d]);a.setProp('y',a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var c=this.owner,e=c&&c.items&&c.items.items||[],g=e.length,f=[],d=0,a,b;for(;d<g;d++){a=e[d];b=a.placeholderFor;if(a.hidden||(!a.floated||a.isCollapsingOrExpanding===2)&&!(b&&b.isCollapsingOrExpanding===2)){f.push(a)}}return f},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,!0)},getMinMaxWeight:function(b,c){var d=this,a=null;d.eachItem(b,function(d){if(d.hasOwnProperty('weight')){if(a===null){a=d.weight;return}if(c&&d.weight<a||d.weight>a){a=d.weight}}},this);return a},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},insertSplitter:function(a,f,e,d){var c=a.region,b=Ext.apply({xtype:'bordersplitter',collapseTarget:a,id:a.id+'-splitter',hidden:e,canResize:a.splitterResize!==!1,splitterFor:a,synthetic:!0},d),g=f+(c==='south'||c==='east'?0:1);if(a.collapseMode==='mini'){b.collapsedCls=a.collapsedCls}a.splitter=this.owner.add(g,b)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(c,a){var b;if(a&&a.splitter){b=a.region;if(b==='south'||b==='east'){a=a.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,c,a)},onAdd:function(a,i){var b=this,d=a.placeholderFor,f=a.region,e,c,g,h;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(f){Ext.apply(a,b.regionFlags[f]);if(b.owner.isViewport){a.isViewportBorderChild=!0}if(a.initBorderRegion){a.initBorderRegion()}e=f==='center';if(e){b.centerRegion=a}else {c=a.split;g=!!a.hidden;if(typeof c==='object'){h=c;c=!0}if((a.isHorz||a.isVert)&&(c||a.collapseMode==='mini')){b.insertSplitter(a,i,g||!c,h)}}if(!e&&!a.hasOwnProperty('collapseMode')){a.collapseMode=b.panelCollapseMode}if(!a.hasOwnProperty('animCollapse')){if(a.collapseMode!=='placeholder'){a.animCollapse=!1}else {a.animCollapse=b.panelCollapseAnimate}}}else {if(d){Ext.apply(a,b.regionFlags[d.region]);a.region=d.region;a.weight=d.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(a,f){var d=this,h=a.region,e=a.splitter,c=d.owner,g=c.destroying,b;if(h){if(a.isCenter){d.centerRegion=null}delete a.isCenter;delete a.isHorz;delete a.isVert;if(e&&!c.destroying){c.doRemove(e,!0)}delete a.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!g&&!f&&a.rendered){b=a.getEl();if(b){b.setStyle('top','');b.setStyle(d.horzPositionProp,'')}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:'top'},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:'bottom'},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:'left'},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:'right'}},setupSplitterNeighbors:function(l){var i={},m=l.length,k=this.touchedRegions,h,b,j,g,d,a,f,e,c;for(h=0;h<m;++h){a=l[h].target;f=a.region;if(a.isCenter){j=a}else {if(f){c=k[f];for(b=0,g=c.length;b<g;++b){d=i[c[b]];if(d){d.neighbors.push(a)}}if(a.placeholderFor){e=a.placeholderFor.splitter}else {e=a.splitter}if(e){e.neighbors=[]}i[f]=e}}}if(j){c=k.center;for(b=0,g=c.length;b<g;++b){d=i[c[b]];if(d){d.neighbors.push(j)}}}},touchedRegions:{center:['north','south','east','west'],north:['north','east','west'],south:['south','east','west'],east:['east','north','south'],west:['west','north','south']},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b){var g=this,a=this.sizePolicies,d,c,f,e;if(b.isCenter){e=b.placeholderFor;if(e){if(e.collapsedVertical()){return a.vert}return a.horz}if(b.collapsed){if(b.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}d=b.collapseTarget;if(d){return d.isVert?a.vert:a.horz}if(b.region){if(b.isVert){c=b.height;f=a.vert}else {c=b.width;f=a.horz}if(b.flex||typeof c==='string'&&g.percentageRe.test(c)){return a.flexAll}return f}return g.autoSizePolicy}},0,0,0,0,['layout.border'],0,[Ext.layout.container,'Border',Ext.layout,'BorderLayout'],function(){var a={addUnflexed:function(a){this.flexSpace=Math.max(this.flexSpace-a,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)});Ext.define('Ext.rtl.layout.container.Border',{override:'Ext.layout.container.Border',initLayout:function(){var a=this;if(a.owner.getInherited().rtl){a.padOnContainerProp='right';a.padNotOnContainerProp='left';a.horzPositionProp='right'}(arguments.callee.$previous||Ext.layout.container.Container.prototype.initLayout).apply(this,arguments)}});Ext.cmd.derive('Ext.util.CSS',Ext.Base,function(){var a,b=null,c=document,e=/(-[a-z])/gi,d=function(b,a){return a.charAt(1).toUpperCase()};return {singleton:!0,rules:b,initialized:!1,constructor:function(){a=this},createStyleSheet:function(e,g){var d,f=c.getElementsByTagName('head')[0],b=c.createElement('style');b.setAttribute('type','text/css');if(g){b.setAttribute('id',g)}d=b.styleSheet;if(d){f.appendChild(b);d.cssText=e}else {b.appendChild(c.createTextNode(e));f.appendChild(b);d=b.sheet}a.cacheStyleSheet(d);return d},removeStyleSheet:function(b){var a=c.getElementById(b);if(a){a.parentNode.removeChild(a)}},swapStyleSheet:function(d,e){var b;a.removeStyleSheet(d);b=c.createElement('link');b.setAttribute('rel','stylesheet');b.setAttribute('type','text/css');b.setAttribute('id',d);b.setAttribute('href',e);c.getElementsByTagName('head')[0].appendChild(b)},cacheStyleSheet:function(d){if(!b){b=a.rules={}}try{var h=d.cssRules||d.rules,g=h.length-1,f=d.imports,i=f?f.length:0,c,e;for(e=0;e<i;++e){a.cacheStyleSheet(f[e])}for(;g>=0;--g){c=h[g];if(c.styleSheet){a.cacheStyleSheet(c.styleSheet)}a.cacheRule(c,d)}}catch(j){}},cacheRule:function(d,g){if(d.styleSheet){return a.cacheStyleSheet(d.styleSheet)}var c=d.selectorText,f,e;if(c){c=c.split(',');f=c.length;for(e=0;e<f;e++){b[Ext.String.trim(c[e]).toLowerCase()]={parentStyleSheet:g,cssRule:d}}}},getRules:function(e){var d={},c;if(b===null||e){a.refreshCache()}for(c in b){d[c]=b[c].cssRule}return d},refreshCache:function(){var e=c.styleSheets,d=0,f=e.length;b=a.rules={};for(;d<f;d++){try{if(!e[d].disabled){a.cacheStyleSheet(e[d])}}catch(g){}}},getRule:function(c,g,f){var d,e;if(!b||g){a.refreshCache()}if(!Ext.isArray(c)){e=b[c.toLowerCase()];if(e&&!f){e=e.cssRule}return e||null}for(d=0;d<c.length;d++){if(b[c[d]]){return f?b[c[d].toLowerCase()]:b[c[d].toLowerCase()].cssRule}}return null},createRule:function(b,c,d){var f,e=b.cssRules||b.rules,g=e.length;if(b.insertRule){b.insertRule(c+' {'+d+'}',g)}else {b.addRule(c,d||' ')}a.cacheRule(f=e[g],b);return f},updateRule:function(c,b,i){var f,g,h;if(!Ext.isArray(c)){f=a.getRule(c);if(f){if(arguments.length===2){h=Ext.Element.parseStyles(b);for(b in h){f.style[b.replace(e,d)]=h[b]}}else {f.style[b.replace(e,d)]=i}return !0}}else {for(g=0;g<c.length;g++){if(a.updateRule(c[g],b,i)){return !0}}}return !1},deleteRule:function(f){var e=a.getRule(f,!1,!0),c,d;if(e){c=e.parentStyleSheet;d=Ext.Array.indexOf(c.cssRules||c.rules,e.cssRule);if(c.deleteRule){c.deleteRule(d)}else {c.removeRule(d)}delete b[f]}}}},1,0,0,0,0,0,[Ext.util,'CSS'],0);Ext.cmd.derive('Sch.plugin.NonWorkingTime',Sch.plugin.Zones,{alternateClassName:'Gnt.feature.WorkingTime',expandToFitView:!0,calendar:{type:'calendar'},timeAxis:null,init:function(a){this.calendar=this.calendar&&Ext.StoreMgr.lookup(this.calendar);if(!this.calendar){Ext.Error.raise("Required attribute 'calendar' missed during initialization of 'Sch.plugin.NonWorkingTime'")}this.store=new Ext.data.Store({model:'Sch.model.Range',autoDestroy:!0});this.timeAxis=a.getTimeAxis();Sch.plugin.Zones.prototype.init.apply(this,arguments);if(a.isWeekView()){a.normalGrid.headerCt.on('afterlayout',this.onViewChange,this)}else {a.on('viewchange',this.onViewChange,this)}this.bindCalendar(this.calendar)},bindCalendar:function(a){var b={datachanged:this.refresh,update:this.refresh,scope:this,delay:1};if(this.calendar){this.calendar.un(b)}if(a){a.on(b)}this.calendar=a;this.refresh()},onViewReady:function(){Sch.plugin.Zones.prototype.onViewReady.apply(this,arguments);if(this.schedulerView.isWeekView()){this.onTimelinePanelBeforeModeChange();this.headerListeners={}}},onViewChange:function(){var b=Sch.util.Date;var a=b.isUnitGreater(this.timeAxis.unit,b.WEEK);this.setDisabled(a);if(!a){this.refresh()}},setDisabled:function(b){var a=this.disabled;Sch.plugin.Zones.prototype.setDisabled.apply(this,arguments);if(a&&!b){this.refresh()}},refresh:function(){if(this.store&&!this.store.destroyed){this.store.removeAll(!0);if(this.calendar){this.store.add(this.calendar.getHolidaysRanges(this.timeAxis.getStart(),this.timeAxis.getEnd(),!0))}}},destroy:function(){this.bindCalendar(null);Sch.plugin.Zones.prototype.destroy.apply(this,arguments)}},0,0,0,0,['plugin.scheduler_nonworkingtime'],0,[Sch.plugin,'NonWorkingTime',Gnt.feature,'WorkingTime'],0);Ext.cmd.derive('Gnt.patches.CellEditor',Sch.util.Patch,{target:'Ext.grid.CellEditor',minVersion:'6.0.0',maxVersion:'6.0.2',overrides:{destroy:function(){clearTimeout(this.restoreTimer);this.callParent(arguments)},onViewRefresh:function(d){var a=this,e=a.el&&a.el.dom,c,b=a.context;if(e){c=d.getCellByPosition(b,!0);if(!c){a.allowBlur=a.wasAllowBlur;a.completeEdit();Ext.getDetachedBody().dom.appendChild(e);return}b.node=d.getNode(b.record);b.row=d.getRow(b.record);b.cell=c;b.rowIdx=d.indexOf(b.row);c.insertBefore(e,c.firstChild);a.boundEl=a.container=Ext.get(c);a.realign(!0);if(a.editing){if(Ext.isIE){a.restoreTimer=Ext.defer(function(){if(!a.destroyed){a.allowBlur=a.wasAllowBlur;a.editingPlugin.getActiveEditor()===a&&a.field.focus()}},10)}else {a.allowBlur=a.wasAllowBlur;a.field.focus()}}}}}},0,0,0,0,0,0,[Gnt.patches,'CellEditor'],0);Ext.cmd.derive('Gnt.patches.CellEditing',Sch.util.Patch,{target:'Ext.grid.plugin.CellEditing',minVersion:'5.1.1',maxVersion:'6.0.1.250',overrides:{showEditor:function(a,b,c){if(a.context&&a.context.record!==b.record&&a.field instanceof Ext.form.field.ComboBox){a.field.lastSelectedRecords=null}this.callParent(arguments)},cancelEdit:function(a){var b=this,d=b.context;if(a&&a.isCellEditor){b.context.value=a.context.value='editedValue' in a?a.editedValue:a.getValue();var c=b.context;b.context=a.context;b.callParent(arguments);b.context=c;if(a.context===d){b.setActiveEditor(null);b.setActiveColumn(null);b.setActiveRecord(null)}else {b.editing=!0}}else {a=b.getActiveEditor();if(a&&a.field){a.cancelEdit()}}}}},0,0,0,0,0,0,[Gnt.patches,'CellEditing'],0);Ext.cmd.derive('Gnt.patches.SpreadsheetModel',Sch.util.Patch,{target:'Ext.grid.selection.SpreadsheetModel',minVersion:'6.0.0',applyFn:function(){var a={privates:{onMouseMove:function(b,a){if(!Ext.fly(a).up('.sch-ganttview')){this.callParent(arguments)}},handleMouseDown:function(d,c,e,a){if(!(d instanceof Gnt.view.Gantt)){var b=c.className.indexOf('sch-gantt-column-dragdrop')>=0;if(b){this.selectRows([a],this.isSelected(a))}else {this.callParent(arguments)}}}}};if(Ext.getVersion().isLessThan('6.0.2')){a.select=function(d,j,i){var c=this,a=c.selected,f=c.view,k=f.dataSource,h,e,b,g=!1;if(!a||!a.isRows||a.view!==f){c.resetSelection(!0);a=c.selected=new Ext.grid.selection.Rows(f)}else {if(!j){a.clear()}}if(!Ext.isArray(d)){d=[d]}h=d.length;for(e=0;e<h;e++){b=d[e];if(typeof b==='number'){b=k.getAt(b)}if(!a.contains(b)){a.add(b);g=!0}}if(g){c.updateHeaderState();if(!i){c.fireSelectionChange()}}}}Ext.override(Ext.grid.selection.SpreadsheetModel,a)}},0,0,0,0,0,0,[Gnt.patches,'SpreadsheetModel'],0);Ext.cmd.derive('Gnt.patches.SelectionExtender2',Sch.util.Patch,{target:'Ext.grid.selection.SelectionExtender',minVersion:'6.0.0',overrides:{setHandle:function(a,b){if(this.view.lockedView.getNodes().length===0||a&&b&&(!a.record||!b.record)){this.disable();return}return this.callParent(arguments)}}},0,0,0,0,0,0,[Gnt.patches,'SelectionExtender2'],0);Ext.cmd.derive('Gnt.patches.LockingView',Sch.util.Patch,{target:'Ext.grid.locking.View',minVersion:'6.0.0',overrides:{getCellByPosition:function(a,b){if(a&&!a.column){return null}return this.callParent(arguments)},onCellDeselect:function(a){if(a&&!a.column){return}return this.callParent(arguments)}}},0,0,0,0,0,0,[Gnt.patches,'LockingView'],0);Ext.cmd.derive('Gnt.patches.NavigationModel_6_2_0',Sch.util.Patch,{target:'Ext.grid.NavigationModel',minVersion:'6.2.0',overrides:{focusPosition:function(b,a){if(this.view instanceof Gnt.view.Gantt){!a&&this.callParent(arguments)}else {this.callParent(arguments)}}}},0,0,0,0,0,0,[Gnt.patches,'NavigationModel_6_2_0'],0);Ext.cmd.derive('Gnt.patches.TableView',Sch.util.Patch,{target:'Ext.view.Table',minVersion:'6.2.1',applyFn:function(){if(Ext.isIE9){Ext.define(null,{override:'Ext.view.Table',getRow:function(a){var b;if(!a&&a!==0||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,!0)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,!0)}if(a.isModel){return this.getRowByRecord(a)}a.setAttribute('class',a.className);b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())}})}}},0,0,0,0,0,0,[Gnt.patches,'TableView'],0);Ext.cmd.derive('Gnt.template.Template',Ext.XTemplate,{disableFormats:!0,isLegacyIE:Ext.isIE8m,getInnerTpl:Ext.emptyFn,innerTpl:null,dependencyTerminalMarkup:'<div class="sch-terminal sch-terminal-start"></div><div class="sch-terminal sch-terminal-end"></div>',terminalSides:null,terminalTpl:'<div class="sch-terminal sch-terminal-SIDE"></div>',constructor:function(a){Ext.apply(this,a);var c=a.rtl?'right':'left';var b=this.getInnerTpl(a)||'';Ext.XTemplate.prototype.constructor.call(this,'<div class="sch-event-wrap {ctcls} x-unselectable" style="'+c+':{offset}px">','<tpl if="isRollup">',b,'<tpl else>',a.leftLabel?'<div class="sch-gantt-labelct sch-gantt-labelct-left"><label class="sch-gantt-label sch-gantt-label-left">{leftLabel}</label></div>':'',a.rightLabel?'<div class="sch-gantt-labelct sch-gantt-labelct-right" style="left:{width}px"><label class="sch-gantt-label sch-gantt-label-right">{rightLabel}</label></div>':'',a.topLabel?'<div class="sch-gantt-labelct sch-gantt-labelct-top"><label class="sch-gantt-label sch-gantt-label-top">{topLabel}</label></div>':'',b,a.bottomLabel?'<div class="sch-gantt-labelct sch-gantt-labelct-bottom"><label class="sch-gantt-label sch-gantt-label-bottom">{bottomLabel}</label></div>':'','</tpl>','</div>')}},1,0,0,0,0,0,[Gnt.template,'Template'],0);Ext.cmd.derive('Gnt.template.Task',Gnt.template.Template,{innerTpl:'<div class="sch-gantt-progress-bar" style="width:{progressBarWidth}px;{progressBarStyle}" unselectable="on">&#160;</div>',getInnerTpl:function(a){var b=a.rtl?'right':'left';return '<div id="'+a.prefix+'{id}" {attr} class="sch-gantt-item sch-gantt-task-bar {cls}" unselectable="on" style="width:{width}px;{style}"><tpl if="isRollup"><tpl else><tpl if="segments"><div class="sch-gantt-segment-connector"></div></tpl>'+(a.taskResizeHandles==='both'||a.taskResizeHandles==='left'?'<div class="sch-resizable-handle sch-gantt-task-handle sch-resizable-handle-start"></div>':'')+'<tpl for="segments"><div id="'+a.prefix+'{parent.Id}-segment-{[xindex-1]}" class="sch-gantt-task-segment {cls}" style="'+b+':{left}px;width:{width}px;{style}" data-segmentIndex="{[xindex-1]}">'+this.innerTpl+(a.taskResizeHandles==='both'||a.taskResizeHandles==='right'?'<div class="sch-resizable-handle sch-gantt-task-handle sch-resizable-handle-end"></div>':'')+'</div></tpl>'+this.innerTpl+(a.taskResizeHandles==='both'||a.taskResizeHandles==='right'?'<div class="sch-resizable-handle sch-gantt-task-handle sch-resizable-handle-end"></div>':'')+(a.enableProgressBarResize?'<div style="'+b+':{progressBarWidth}px" class="sch-gantt-progressbar-handle"></div>':'')+(a.enableDependencyDragDrop?this.dependencyTerminalMarkup:'')+'</tpl></div>'}},0,0,0,0,0,0,[Gnt.template,'Task'],0);Ext.cmd.derive('Gnt.template.ParentTask',Gnt.template.Template,{innerTpl:'<div class="sch-gantt-progress-bar" style="width:{progressBarWidth}px;{progressBarStyle}">&#160;</div><div class="sch-gantt-parenttask-arrow sch-gantt-parenttask-leftarrow"></div><div class="sch-gantt-parenttask-arrow sch-gantt-parenttask-rightarrow"></div>',getInnerTpl:function(a){return '<div id="'+a.prefix+'{id}" {attr} class="sch-gantt-item sch-gantt-parenttask-bar {cls}" style="width:{width}px; {style}">'+this.innerTpl+(a.enableDependencyDragDrop&&a.allowParentTaskDependencies?this.dependencyTerminalMarkup:'')+'</div>'}},0,0,0,0,0,0,[Gnt.template,'ParentTask'],0);Ext.cmd.derive('Gnt.template.Milestone',Gnt.template.Template,{innerTpl:Ext.isIE8m?'<div style="border-width:{[Math.floor(values.side*0.7)]}px;{style}" class="sch-gantt-milestone-diamond-top {cls}" unselectable="on"></div><div style="border-width:{[Math.floor(values.side*0.7)]}px;{style}" class="sch-gantt-milestone-diamond-bottom {cls}" unselectable="on"></div>':'<img style="{[values.print ? "height:" + values.side + "px;border-left-width:" + values.side + "px" : ""]};{style}" src="'+Ext.BLANK_IMAGE_URL+'" class="sch-gantt-milestone-diamond {cls}" unselectable="on"/>',getInnerTpl:function(a){return '<div '+(this.isLegacyIE?'style="width:{[Math.floor(values.side*0.7)]}px"':'')+' id="'+a.prefix+'{id}" {attr} class="sch-gantt-item sch-gantt-milestone-diamond-ct">'+this.innerTpl+'<tpl if="isRollup"><tpl else>'+(a.enableDependencyDragDrop?this.dependencyTerminalMarkup:'')+'</tpl></div>'}},0,0,0,0,0,0,[Gnt.template,'Milestone'],0);Ext.cmd.derive('Gnt.template.RollupTask',Ext.XTemplate,{text:'<div class="sch-rollup-wrap"><tpl for=".">{[values.tpl.apply(values)]}</tpl></div>',constructor:function(a){Ext.XTemplate.prototype.constructor.call(this,this.text)}},1,0,0,0,0,0,[Gnt.template,'RollupTask'],0);Ext.cmd.derive('Gnt.template.Deadline',Ext.XTemplate,{disableFormats:!0,markup:'<div data-qtip="__DEADLINE__:  {date}" data-qalign="b-tl" class="gnt-deadline-indicator {cls}" style="{dir}:{offset}px"></div>',constructor:function(){this.markup=this.markup.replace(/__DEADLINE__/,this.L('deadline'));Ext.XTemplate.prototype.constructor.call(this,this.markup)}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.template,'Deadline'],0);Ext.cmd.derive('Gnt.Tooltip',Ext.tip.ToolTip,{anchor:'bottom',autoHide:!1,maskOnDisable:!1,mode:'startend',durationDecimalPrecision:1,template:null,gantt:null,taskElAlign:'bl-tl?',initComponent:function(){this.rtl=this.gantt.rtl;this.startLabel=this.L('startText');this.label2Text=this.mode==='duration'?this.L('durationText'):this.L('endText');if(!this.template){this.template=(new Ext.Template('<div class="sch-timetipwrap {cls}"><table cellpadding="0" cellspacing="0"><tpl if="value1"><tr><td class="sch-gantt-tip-desc">{label1}</td><td class="sch-gantt-tip-value">{value1}</td></tr></tpl><tr><td class="sch-gantt-tip-desc">{label2}</td><td class="sch-gantt-tip-value">{value2}</td></tr></table></div>')).compile()}Ext.tip.ToolTip.prototype.initComponent.apply(this,arguments);this.update(this.template.apply({value1:'',value2:''}));this.addCls('gnt-tooltip')},updateContent:function(c,e,d,b){var a;if(this.mode==='duration'){a=this.getDurationContent(c,e,d,b)}else {a=this.getStartEndContent(c,e,d,b)}this.update(a)},getStartEndContent:function(a,e,h,f){var c=this.gantt,g=a&&c.getFormattedDate(a),b;if(a){if(e-a>0){b=c.getFormattedEndDate(e,a)}else {b=g}}else {b=c.getFormattedEndDate(e)}var d={cls:h?'sch-tip-ok':'sch-tip-notok',label2:this.label2Text,value2:b,task:f};if(a){d.label1=this.startLabel;d.value1=a&&c.getFormattedDate(a)}return this.template.apply(d)},getDurationContent:function(c,f,e,a){var d=a.getDurationUnit()||Sch.util.Date.DAY;var b=a.calculateDuration(c,f,d);return this.template.apply({cls:e?'sch-tip-ok':'sch-tip-notok',label1:this.startLabel,value1:this.gantt.getFormattedDate(c),label2:this.label2Text,value2:parseFloat(Ext.Number.toFixed(b,this.durationDecimalPrecision))+' '+Sch.util.Date.getReadableNameOfUnit(d,b>1),task:a})},showBy:function(b,a){this.setTarget(b);Ext.tip.ToolTip.prototype.showBy.call(this,b,this.taskElAlign,[-18,-6]);if(typeof a==='number'){this.setX(a-18)}}},0,['gantt_task_tooltip'],['component','box','container','panel','tip','tooltip','gantt_task_tooltip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'tooltip':!0,'gantt_task_tooltip':!0},['widget.gantt_task_tooltip'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt,'Tooltip'],0);Ext.cmd.derive('Gnt.feature.TaskDragDrop',Ext.dd.DragZone,{useTooltip:!0,tooltipConfig:null,validatorFn:function(b,c,a,d){return !0},validatorFnScope:null,showExactDropPosition:!1,containerScroll:!1,dropAllowed:'sch-gantt-dragproxy',dropNotAllowed:'sch-gantt-dragproxy',gantt:null,lastXY:null,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,tip:null,skipWeekendsDuringDragDrop:!1,taskSelector:null,deadlineSelector:null,invalidTargetSelector:['.x-resizable-handle','.sch-resizable-handle','.sch-terminal','.sch-gantt-progressbar-handle','.sch-rollup-task','.sch-gantt-baseline-item .sch-gantt-item'].join(','),constructor:function(d,b){if(Ext.isIE&&(Ext.isIE8||Ext.ieVersion<9)&&window.top!==window){Ext.dd.DragDropManager.notifyOccluded=!0}this.proxy=this.proxy||new Ext.dd.StatusProxy({shadow:!1,dropAllowed:'sch-gantt-dragproxy',dropNotAllowed:'sch-gantt-dragproxy',ensureAttachedToBody:Ext.emptyFn});b.gantt.rtl&&this.proxy.addCls('sch-rtl');var a=this,c=b.gantt;if(a.useTooltip){a.tip=new Gnt.Tooltip(Ext.apply({cls:'gnt-dragdrop-tip',gantt:c},a.tooltipConfig))}Ext.dd.DragZone.prototype.constructor.call(this,d,Ext.apply(b,{ddGroup:c.id+'-task-dd'}));a.scroll=!1;a.isTarget=!0;a.ignoreSelf=!1;d.appendChild(a.proxy.el);c.on({destroy:a.destroy,scope:a})},destroy:function(){if(this.tip){this.tip.destroy()}clearTimeout(this.validDropTimer);Ext.dd.DragZone.prototype.destroy.apply(this,arguments)},getDragData:function(g){if(Ext.fly(g.getTarget()).is(this.invalidTargetSelector)){return}var e=g.getTarget(this.taskSelector);var r=!e&&g.getTarget(this.deadlineSelector);var c=e||r;this.lastXY=null;if(c){var b=this.gantt;var j=e&&g.getTarget('.sch-gantt-task-segment');var a=b.resolveTaskRecord(c);var h=0;var l,k,i;if(!a||a.isReadOnly()){return}if(j){h=Number(j.getAttribute('data-segmentIndex'));if(h>0){c=j;a=a.getSegment(h)}}if(e&&b.fireEvent('beforetaskdrag',b,a,g)===!1){return}var p=g.getXY();var f=c.cloneNode(!0),s=this.showExactDropPosition?0:b.getSnapPixelAmount(),o=Ext.fly(c).getXY();var d=[p[0]-o[0],p[1]-o[1]];f.id=Ext.id();var m=Ext.fly(c).getHeight();var t=Ext.fly(c).getWidth();Ext.fly(f).setHeight(m);if(Ext.isIE8m&&e&&a.isMilestone()){Ext.fly(f).setSize(m+5,m+5)}if(!b.rtl){f.style.left=-d[0]+'px'}else {f.style.left=t-d[0]+'px'}if(h>0){var u=a.getPrevSegment();var q=a.getNextSegment();l=Sch.util.Date.max(u.getEndDate(),b.timeAxis.getStart());k=q?Sch.util.Date.min(q.getStartDate(),b.timeAxis.getEnd()):b.timeAxis.getEnd();i={left:b.getCoordinateFromDate(l,!1)+d[0],right:b.getCoordinateFromDate(k,!1)-t+d[0]}}else {var n=Ext.fly(b.findItemByChild(c));if(Ext.isIE10&&Ext.getVersion().isGreaterThan('6.2.0')){n=n.down('tbody')}i=n.getRegion()}this.constrainTo(i,Ext.fly(c).getRegion(),d[0],d[1]);if(s>=1){this.setXConstraint(this.leftConstraint,this.rightConstraint,s)}return {sourceNode:c,repairXY:o,offsetX:d[0],ddel:f,record:a,prevScroll:b.getScroll(),duration:Sch.util.Date.getDurationInMinutes(a.getStartDate(),a.getEndDate()),startPointDate:b.getDateFromCoordinate(p[0]),minDate:l,maxDate:k,start:null,isTaskDrag:Boolean(e),originalStart:e?a.getStartDate():a.getDeadlineDate(),valid:Boolean(r)}}},onDragOver:function(d){var a=this.dragData,g=a.record,e=a.originalStart,c=this.gantt,j=d?d.getXY():this.lastXY;if(!j){return}var b=c.getDateFromCoordinate(j[0]);if(!a.hidden){Ext.fly(a.sourceNode).hide();a.hidden=!0}if(!b){return}var h=b-a.startPointDate;var f=new Date(e-0+h);var i=this.proxy.el;if(a.minDate){f=Sch.util.Date.constrain(new Date(e-0+h),a.minDate,a.maxDate)}if(c.timeAxis.isContinuous()){b=c.timeAxis.roundDate(f,c.snapRelativeToEventStartDate?e:!1)}else {var k=i.getX()+(c.rtl?i.getWidth():0)+c.getXOffset(g)-a.offsetX;b=c.getDateFromXY([k,0],'round')}if(a.isTaskDrag){this.onTaskDrag(g,d,b,f)}else {if(b&&b-e!==0){this.onCustomElementDrag(g,d,b)}}if(d){this.lastXY=[d.browserEvent.clientX+document.body.scrollLeft,d.getY()]}a.start=b},onTaskDrag:function(a,j,b,f){var c=this.dragData;var d=this.gantt;if(this.showExactDropPosition&&this.skipWeekendsDuringDragDrop){var g=0;var e=a.skipNonWorkingTime(b,!a.isMilestone());var h=a.recalculateEndDate(e);if(f.getTime()!=e.getTime()){g=d.timeAxisViewModel.getDistanceBetweenDates(f,e)}if(f>d.timeAxis.getStart()){Ext.fly(c.ddel.id).setWidth(d.timeAxisViewModel.getDistanceBetweenDates(e,Sch.util.Date.min(h,d.timeAxis.getEnd())));if(g){this.proxy.setX(this.proxy.getX()+g)}}}if(b&&b-c.start!==0){c.valid=this.validatorFn.call(this.validatorFnScope||d,a,b,c.duration,j)!==!1;if(this.tip){var i=a.calculateEndDate(b,a.getDuration(),a.getDurationUnit());this.updateTip(a,b,i,c.valid)}}},onCustomElementDrag:function(b,c,a){if(this.tip){this.updateTip(b,a,a,!0)}},alignElWithMouse:function(a,c,d){Ext.dd.DragZone.prototype.alignElWithMouse.apply(this,arguments);var b=this.getTargetCoord(c,d),e=a.dom?a:Ext.fly(a,'_dd');this.setLocalXY(e,b.x+this.deltaSetXY[0],b.y+this.deltaSetXY[1])},onStartDrag:function(){var c=this.dragData;var a=c.record;var b=this.tip;if(b){b.enable();this.updateTip(a,this.dragData.originalStart,a.getEndDate());b.showBy(this.dragData.sourceNode,c.repairXY[0]+c.offsetX)}if(this.dragData.isTaskDrag){this.gantt.fireEvent('taskdragstart',this.gantt,a)}this.gantt.getScrollable().on('scroll',this.onViewScroll,this);if(Ext.versions.extjs.isGreaterThan('6.2.0')){this.gantt.up('timelinetree,timelinegrid').getScrollable().on('scroll',this.onViewScroll,this)}},onViewScroll:function(){var j=this.proxy,g=this.gantt,a=this.dragData,i=g.getScroll(),b=i.left,c=i.top,h=g.rtl&&!g.up('[isViewport]');var e=j.getXY();var f;if(h){f=[e[0]-b+a.prevScroll.left,e[1]+c-a.prevScroll.top]}else {f=[e[0]+b-a.prevScroll.left,e[1]+c-a.prevScroll.top]}var d=this.deltaSetXY;if(h){this.deltaSetXY=[d[0]-b+a.prevScroll.left,d[1]+c-a.prevScroll.top]}else {this.deltaSetXY=[d[0]+b-a.prevScroll.left,d[1]+c-a.prevScroll.top]}a.prevScroll={left:b,top:c};j.setXY(f);this.onDragOver()},updateTip:function(b,a,c){if(this.dragData.isTaskDrag){if(b.isMilestone()&&a-Ext.Date.clearTime(a,!0)===0){a=Sch.util.Date.add(a,Sch.util.Date.MILLI,-1);c=Sch.util.Date.add(c,Sch.util.Date.MILLI,-1)}this.tip.updateContent(a,c,!0,b)}else {this.tip.updateContent(null,a,!0,b)}},afterRepair:function(){Ext.fly(this.dragData.sourceNode).show();if(this.tip){this.tip.hide()}this.dragging=!1},getRepairXY:function(){this.dragData.isTaskDrag&&this.gantt.fireEvent('aftertaskdrop',this.gantt);return this.dragData.repairXY},onDragDrop:function(h,g){var b=this,i=b.cachedTarget||Ext.dd.DragDropMgr.getDDById(g),a=b.dragData,e=b.gantt,f=a.start,c=!0,d=a.valid&&f&&a.originalStart-f!==0;a.ddCallbackArgs=[i,h,g];if(this.tip){this.tip.disable()}if(a.isTaskDrag&&d){a.finalize=function(){b.finalize.apply(b,arguments)};c=e.fireEvent('beforetaskdropfinalize',e,a,h)!==!1}if(c){this.finalize(d)}},finalize:function(h){var a=this,b=this.dragData,c=this.gantt,d=b.record,g=b.start,e,f;if(h){e=b.originalStart;if(b.isTaskDrag){d.setStartDate(g,!0,this.skipWeekendsDuringDragDrop,function(){f=d.getStartDate();if(e-f!==0){c.fireEvent('taskdrop',c,d);if(Ext.isIE9){a.proxy.el.setStyle('visibility','hidden');a.validDropTimer=Ext.Function.defer(a.onValidDrop,10,a,b.ddCallbackArgs)}else {a.onValidDrop.apply(a,b.ddCallbackArgs)}}else {a.onInvalidDrop.apply(a,b.ddCallbackArgs)}c.fireEvent('aftertaskdrop',c,d)})}else {d.setDeadlineDate(g);a.onValidDrop.apply(a,b.ddCallbackArgs)}}else {a.onInvalidDrop.apply(a,b.ddCallbackArgs);b.isTaskDrag&&c.fireEvent('aftertaskdrop',c,d)}},onInvalidDrop:function(a,b,c){if(!b){b=a;a=a.getTarget()||document.body}if(this.tip){this.tip.disable()}return Ext.dd.DragZone.prototype.onInvalidDrop.call(this,a,b,c)},autoOffset:function(){this.setDelta(0,0)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=c;this.maxX=b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=!0},setYConstraint:function(c,b,a){this.topConstraint=c;this.bottomConstraint=b;this.minY=c;this.maxY=b;if(a){this.setYTicks(this.initPageY,a)}this.constrainY=!0},constrainTo:function(a,b,c,d){this.resetConstraints();this.initPageX=a.left+c;this.initPageY=b.top+d;this.setXConstraint(a.left,a.right,this.xTickSize);this.setYConstraint(b.top-1,b.top-1,this.yTickSize)},startDrag:function(){this.gantt.el.ddScrollConfig={increment:Ext.dd.ScrollManager.increment,hthresh:Ext.dd.ScrollManager.hthresh,vthresh:-1};return Ext.dd.DragZone.prototype.startDrag.apply(this,arguments)},endDrag:function(){delete this.gantt.el.ddScrollConfig;return Ext.dd.DragZone.prototype.endDrag.apply(this,arguments)}},1,0,0,0,0,0,[Gnt.feature,'TaskDragDrop'],0);Ext.cmd.derive('Gnt.feature.ProgressBarResize',Ext.Base,{useTooltip:!0,increment:10,tip:null,resizable:null,ganttView:null,constructor:function(b){Ext.apply(this,b||{});var a=this.ganttView;a.on({destroy:this.cleanUp,scope:this});a.el.on('mousedown',this.onMouseDown,this,{delegate:'.sch-gantt-progressbar-handle'});this.callParent(arguments)},onMouseDown:function(d,e){var a=this.ganttView,b=a.resolveTaskRecord(e);if(a.fireEvent('beforeprogressbarresize',a,b)!==!1){var c=Ext.fly(e).prev('.sch-gantt-progress-bar');d.stopEvent();c.addCls('sch-progress-bar-resizing');this.resizable=this.createResizable(c,b,d);a.fireEvent('progressbarresizestart',a,b);Ext.getBody().on('mouseup',this.onBodyMouseUp,this,{single:!0,delay:1})}},createResizable:function(a,c,h){var f=this.ganttView.rtl,e=a.up(this.ganttView.eventSelector),d=e.getWidth()-2*this.ganttView.eventBorderWidth,g=d*this.increment/100;var b=Ext.create('Ext.resizer.Resizer',{target:a,taskRecord:c,handles:f?'w':'e',minWidth:0,maxWidth:d,minHeight:1,widthIncrement:g,listeners:{resizedrag:this.partialResize,resize:this.afterResize,scope:this}});b.resizeTracker.onMouseDown(h,b[f?'west':'east'].dom);e.addCls('sch-gantt-resizing');if(this.useTooltip){this.tip=Ext.create('Ext.ToolTip',{autoHide:!1,anchor:'b',html:'%'});this.tip.setTarget(a);this.tip.update(c.getPercentDone()+'%');this.tip.show()}return b},partialResize:function(c,a){var b=Math.round(a*100/(c.maxWidth*this.increment))*this.increment;if(this.tip){this.tip.body.update(b+'%')}},afterResize:function(a,c,g,f){var e=a.taskRecord;if(this.tip){this.tip.destroy();this.tip=null}var d=a.taskRecord.getPercentDone();if(Ext.isNumber(c)){var b=Math.round(c*100/(a.maxWidth*this.increment))*this.increment;b=Math.min(100,Math.max(0,b));a.taskRecord.setPercentDone(b)}if(d===a.taskRecord.getPercentDone()){this.ganttView.refreshNode(this.ganttView.indexOf(a.taskRecord))}a.destroy();this.resizable=null;this.ganttView.fireEvent('afterprogressbarresize',this.ganttView,e)},onBodyMouseUp:function(){if(this.resizable){this.afterResize(this.resizable)}},cleanUp:function(){if(this.tip){this.tip.destroy()}}},1,0,0,0,0,0,[Gnt.feature,'ProgressBarResize'],0);Ext.cmd.derive('Gnt.feature.TaskResize',Ext.Base,{constructor:function(b){Ext.apply(this,b);var a=this.ganttView;a.on({destroy:this.cleanUp,scope:this});a.mon(a.el,'mousedown',this.onMouseDown,this,{delegate:'.sch-resizable-handle'});this.callParent(arguments)},showDuration:!0,showExactResizePosition:!1,useTooltip:!0,tooltipConfig:null,validatorFn:Ext.emptyFn,validatorFnScope:null,taskRec:null,taskEl:null,isStart:null,ganttView:null,resizable:null,onMouseDown:function(c,g){var b=this.ganttView;var f=c.getTarget('.sch-gantt-task-segment');var d=c.getTarget(b.eventSelector);var a=b.resolveTaskRecord(d);if(f){d=f;a=a.getSegment(parseInt(f.getAttribute('data-segmentIndex'),10))}var e=a.isResizable();if(c.button!==0||e===!1||typeof e==='string'&&!d.className.match(e)){return}if(b.fireEvent('beforetaskresize',b,a,c)===!1){return}c.stopEvent();this.taskEl=Ext.get(d);this.taskRec=a;this.isStart=!!g.className.match('sch-resizable-handle-start');b.el.on({mousemove:this.onMouseMove,mouseup:this.onMouseUp,scope:this,single:!0})},onMouseMove:function(k,n){var j=this.ganttView,b=this.taskRec,a=this.taskEl,i=j.rtl,g=this.isStart,d=i&&!g||!i&&g,c=j.getSnapPixelAmount(),l=a.getWidth(),m,h;c=Math.max(1,c);var f={otherEdgeX:d?a.getRight():a.getLeft(),target:a,record:b,isStart:g,isWest:d,handles:d?'w':'e',minHeight:1,minWidth:c,widthIncrement:c,listeners:{resizedrag:this.partialResize,resize:this.afterResize,scope:this}};if(b instanceof Gnt.model.TaskSegment&&(h=this.taskEl.next('.sch-gantt-task-segment'))){f.maxWidth=i?h.getRight()-a.getRight():h.getLeft()-a.getLeft()}f.constrainRegion=a.up(j.getItemSelector()).getRegion();a.addCls('sch-gantt-resizing');this.ganttView.fireEvent('taskresizestart',this.ganttView,this.taskRec);var e=a.down('.sch-gantt-progress-bar');if(e){e.setWidth(100*e.getWidth()/a.getWidth()+'%')}this.resizable=Ext.create('Ext.resizer.Resizer',f);this.resizable.resizeTracker.onMouseDown(k,this.resizable[d?'west':'east'].dom);if(this.useTooltip){if(!this.tip){this.tip=Ext.create('Gnt.Tooltip',Ext.apply({mode:this.showDuration?'duration':'startend',gantt:this.ganttView},this.tooltipConfig))}else {this.tip.enable()}this.tip.showBy(a,k.getX());this.tip.updateContent(b.getStartDate(),b.getEndDate(),!0,b);Ext.getBody().on('mouseup',function(){this.tip.disable()},this,{single:!0})}},onMouseUp:function(b,c){var a=this.ganttView;a.el.un({mousemove:this.onMouseMove,mouseup:this.onMouseUp,scope:this,single:!0})},partialResize:function(b,m,r,q){var d=this.ganttView,n=b.isWest,a=b.record,c;if(n){c=d.getDateFromCoordinate(b.otherEdgeX-Math.min(m,this.resizable.maxWidth),!this.showExactResizePosition?'round':null)}else {c=d.getDateFromCoordinate(b.otherEdgeX+Math.min(m,this.resizable.maxWidth),!this.showExactResizePosition?'round':null)}if(!c||b.date-c===0){return}var e,f,i;if(this.showExactResizePosition){var g=d.timeAxis.roundDate(c,d.snapRelativeToEventStartDate?a.getStartDate():!1);g=a.skipNonWorkingTime(g,!a.isMilestone());var j=b.target.el,h;if(n){e=a.skipNonWorkingTime(g,!a.isMilestone());i=e;h=d.timeAxisViewModel.getDistanceBetweenDates(e,a.getEndDate());j.setWidth(h);var o=d.timeAxisViewModel.getDistanceBetweenDates(c,e);j.setX(j.getX()+o)}else {var k=Gnt.util.Data.cloneModelSet([a])[0];var l=a.getTaskStore();k.setTaskStore(l);k.setCalendar(a.getCalendar());k.setEndDateWithoutPropagation(g,!1,l.skipWeekendsDuringDragDrop);f=k.getEndDate();i=f;h=d.timeAxisViewModel.getDistanceBetweenDates(a.getStartDate(),f);j.setWidth(h)}}else {e=b.isStart?c:b.record.getStartDate();f=b.isStart?b.record.getEndDate():c;i=c}b.date=i;d.fireEvent('partialtaskresize',d,a,e,f,b.el,q);if(this.useTooltip){var p=this.validatorFn.call(this.validatorFnScope||this,a,e,f)!==!1;this.tip.updateContent(e,f,p,a)}},afterResize:function(b,m,l,k){if(this.useTooltip){this.tip.disable()}var a=this,c=b.record,i=c.getStartDate(),j=c.getEndDate(),d=b.isStart?b.date:i,e=b.isStart?j:b.date,g=a.ganttView,h=!1,f=!0;a.resizeContext={record:c,start:d,end:e,oldStart:c.getStartDate(),finalize:function(){a.finalize.apply(a,arguments)}};if(d&&e&&(d-i||e-j)&&a.validatorFn.call(a.validatorFnScope||a,c,d,e,k)!==!1){f=g.fireEvent('beforetaskresizefinalize',a,a.resizeContext,k)!==!1;h=!0}else {g.refreshKeepingScroll()}if(f){a.finalize(h)}},finalize:function(i){var g=this,a=g.ganttView,b=g.resizeContext,d=b.record,f=d.task||d,h=a.taskStore.skipWeekendsDuringDragDrop,e,c;if(i){if(b.start-b.oldStart!==0){e=d.getStartDate();c=b.start<=b.end?b.start:b.end;d.setStartDate(c,!1,h,function(g,b){c=d.getStartDate();if(!(c<e||c>e)){a.refreshNode(a.store.indexOf(f))}a.fireEvent('aftertaskresize',a,f)})}else {e=d.getEndDate();c=b.start<=b.end?b.end:b.start;d.setEndDate(c,!1,h,function(g,b){c=d.getEndDate();if(!(c<e||c>e)){a.refreshNode(a.store.indexOf(f))}a.fireEvent('aftertaskresize',a,f)})}}else {a.refreshNode(a.store.indexOf(f));a.fireEvent('aftertaskresize',a,f)}g.resizable.destroy();g.resizeContext=null},cleanUp:function(){if(this.tip){this.tip.destroy()}}},1,0,0,0,0,0,[Gnt.feature,'TaskResize'],0);Ext.cmd.derive('Gnt.feature.LabelEditor',Ext.Editor,{labelPosition:'',triggerEvent:'dblclick',delegate:null,dataIndex:null,shadow:!1,completeOnEnter:!0,cancelOnEsc:!0,ignoreNoChange:!0,ganttView:null,constructor:function(b,a){this.ganttView=b;this.ganttView.on({afterrender:this.onGanttRender,destroy:this.onGanttDestroy,scope:this});if(Ext.getVersion().isGreaterThan('6.2.0')){this.ganttView.on({itemclick:this.onGanttItemClick,scope:this})}Ext.apply(this,a);if(this.labelPosition==='left'){this.alignment='r-r'}else {if(this.labelPosition==='right'){this.alignment='l-l'}else {this.alignment='c-c'}}this.delegate='.sch-gantt-label-'+this.labelPosition;Ext.Editor.prototype.constructor.call(this,a)},onGanttItemClick:function(){this.cancelEdit()},edit:function(a){if(!a.isEditable(this.dataIndex)){return}var b=this.ganttView.getElementsFromEventRecord(a),c=b&&b[0];if(c){var d=c.up(this.ganttView.eventWrapSelector);this.record=a;if(!this.rendered){this.render(this.ganttView.getEl())}this.startEdit(d.down(this.delegate),this.dataIndex?a.get(this.dataIndex):'')}},onGanttRender:function(a){if(!this.field.width){this.autoSize='width'}this.on({beforestartedit:function(b,d,c){return a.fireEvent('labeledit_beforestartedit',a,this.record,c,b)},beforecomplete:function(c,d,b){return a.fireEvent('labeledit_beforecomplete',a,d,b,this.record,c)},complete:function(d,b,c){this.record.set(this.dataIndex,b);a.fireEvent('labeledit_complete',a,b,c,this.record,d)},scope:this});a.el.on(this.triggerEvent,function(c,b){this.edit(a.resolveTaskRecord(b))},this,{delegate:this.delegate})},onGanttDestroy:function(){this.destroy()}},1,0,['component','box','container','editor'],{'component':!0,'box':!0,'container':!0,'editor':!0},0,0,[Gnt.feature,'LabelEditor'],0);Ext.cmd.derive('Gnt.feature.DragCreator',Ext.Base,{disabled:!1,showDragTip:!0,tooltipConfig:null,dragTolerance:2,template:'<div class="sch-gantt-dragcreator-proxy"></div>',validatorFn:Ext.emptyFn,validatorFnScope:null,constructor:function(a){Ext.apply(this,a||{});this.init()},init:function(){var b=this.ganttView,c=b.el,a=Ext.Function.bind;this.lastTime=new Date();b.on({destroy:this.onGanttDestroy,scope:this});this.tracker=new Sch.util.DragTracker({el:c,tolerance:this.dragTolerance,onBeforeStart:a(this.onBeforeDragStart,this),onStart:a(this.onDragStart,this),onDrag:a(this.onDrag,this),onEnd:a(this.onDragEnd,this)});if(this.showDragTip){this.dragTip=new Gnt.Tooltip(Ext.apply({mode:'duration',cls:'sch-gantt-dragcreate-tip',gantt:b},this.tooltipConfig))}},setDisabled:function(a){this.disabled=a;if(this.dragTip){this.dragTip.setDisabled(a)}},getProxy:function(){if(!this.proxy){var a=this.ganttView.up('tablepanel').el;if(!(this.template instanceof Ext.Template)){this.template=new Ext.Template(this.template)}this.proxy=this.template.append(a,{},!0)}return this.proxy},onBeforeDragStart:function(c){var a=this.ganttView,e=c.getTarget('.'+a.timeCellCls,2);if(e&&!this.disabled){var b=a.resolveTaskRecord(e);var d=a.getDateFromDomEvent(c);if(!b.isReadOnly()&&!b.getStartDate()&&!b.getEndDate()&&a.fireEvent('beforedragcreate',a,b,d,c)!==!1){c.stopEvent();this.record=b;this.originalStart=d;this.rowRegion=a.getScheduleRegion(this.record,this.originalStart);this.dateConstraints=a.getDateConstraints(this.resourceRecord,this.originalStart);return !0}}return !1},onDragStart:function(){var a=this,c=a.ganttView,b=a.getProxy();a.start=a.originalStart;a.end=a.start;a.rowBoundaries={top:a.rowRegion.top,bottom:a.rowRegion.bottom};b.setBox({x:a.tracker.startXY[0],y:a.rowBoundaries.top,height:a.rowBoundaries.bottom-a.rowBoundaries.top});b.show();c.fireEvent('dragcreatestart',c);if(a.showDragTip){a.dragTip.updateContent(a.start,a.end,!0,a.record);a.dragTip.enable();a.dragTip.showBy(b)}},onDrag:function(f){var a=this,e=a.ganttView,c=a.tracker.getRegion().constrainTo(a.rowRegion),d=e.getStartEndDatesFromRegion(c,'round');if(!d){return}a.start=d.start||a.start;a.end=d.end||a.end;var b=a.dateConstraints;if(b){a.end=Sch.util.Date.constrain(a.end,b.start,b.end);a.start=Sch.util.Date.constrain(a.start,b.start,b.end)}a.valid=a.validatorFn.call(a.validatorFnScope||a,a.record,a.start,a.end,f)!==!1;if(a.showDragTip){a.dragTip.updateContent(a.start,a.end,a.valid,a.record)}Ext.apply(c,a.rowBoundaries);a.getProxy().setBox(c)},onDragEnd:function(c){var a=this,d=a.ganttView,b=!1;a.createContext={start:a.start,end:a.end,e:c,record:a.record,finalize:function(){a.finalize.apply(a,arguments)}};if(a.showDragTip){a.dragTip.disable()}if(!a.start||!a.end||a.end<a.start){a.valid=!1}if(a.valid){b=d.fireEvent('beforedragcreatefinalize',a,a.createContext,c)!==!1}if(b){a.finalize(a.valid)}},finalize:function(d){var c=this,a=c.createContext,b=c.ganttView;if(d){a.record.setStartEndDate(a.start,a.end,a.record.getTaskStore().skipWeekendsDuringDragDrop);b.fireEvent('dragcreateend',b,a.record,a.e)}c.proxy.hide();b.fireEvent('afterdragcreate',b)},onGanttDestroy:function(){if(this.dragTip){this.dragTip.destroy()}if(this.tracker){this.tracker.destroy()}if(this.proxy){Ext.destroy(this.proxy);this.proxy=null}}},1,0,0,0,0,0,[Gnt.feature,'DragCreator'],0);Ext.cmd.derive('Gnt.view.Gantt',Sch.view.TimelineGridView,{_cmpCls:'sch-ganttview',scheduledEventName:'task',trackOver:!1,toggleOnDblClick:!1,eventSelector:'.sch-gantt-item',eventWrapSelector:'.sch-event-wrap',barMargin:4,progressBarResizer:null,taskResizer:null,taskDragDrop:null,dragCreator:null,resizeConfig:null,createConfig:null,dragDropConfig:null,progressBarResizeConfig:null,externalGetRowClass:null,outsideLabelsGatherWidth:200,constructor:function(a){a=a||{};if(a){this.externalGetRowClass=a.getRowClass;delete a.getRowClass}Sch.view.TimelineGridView.prototype.constructor.apply(this,arguments);this.on({itemupdate:this.onRowUpdate,scope:this});this.mon(this.taskStore,{update:this.onTaskStoreUpdate,scope:this});this.initTreeFiltering()},onBeforeIndentationChange:function(){var a=this.getNavigationModel().getPosition();if(a&&a.record){this._lastNavigatedRecord=a.record}},onIndentationChange:function(){this._lastNavigatedRecord&&this.getNavigationModel().setPosition(this._lastNavigatedRecord);delete this._lastNavigatedRecord},onRender:function(){this.mon(this.getTaskStore(),{beforeindentationchange:this.onBeforeIndentationChange,indentationchange:this.onIndentationChange,scope:this});this.configureLabels();this.setupGanttEvents();this.setupTemplates();Sch.view.TimelineGridView.prototype.onRender.apply(this,arguments)},getDependencyStore:function(){return this.dependencyStore},configureFeatures:function(){if(this.enableProgressBarResize!==!1){this.progressBarResizer=Ext.create('Gnt.feature.ProgressBarResize',Ext.apply({ganttView:this},this.progressBarResizeConfig||{}));this.on({beforeprogressbarresize:this.onBeforeTaskProgressBarResize,progressbarresizestart:this.onTaskProgressBarResizeStart,afterprogressbarresize:this.onTaskProgressBarResizeEnd,scope:this})}if(this.taskResizeHandles!=='none'){this.taskResizer=Ext.create('Gnt.feature.TaskResize',Ext.apply({ganttView:this,validatorFn:this.resizeValidatorFn||Ext.emptyFn,validatorFnScope:this},this.resizeConfig||{}));this.on({beforedragcreate:this.onBeforeDragCreate,beforetaskresize:this.onBeforeTaskResize,taskresizestart:this.onTaskResizeStart,aftertaskresize:this.onTaskResizeEnd,progressbarresizestart:this.onTaskResizeStart,afterprogressbarresize:this.onTaskResizeEnd,scope:this})}if(this.enableTaskDragDrop){this.taskDragDrop=Ext.create('Gnt.feature.TaskDragDrop',this.getEl(),Ext.apply({gantt:this,taskSelector:this.eventSelector,deadlineSelector:'.gnt-deadline-indicator',validatorFn:this.dndValidatorFn||Ext.emptyFn,validatorFnScope:this,skipWeekendsDuringDragDrop:this.taskStore.skipWeekendsDuringDragDrop},this.dragDropConfig));this.on({beforetaskdrag:this.onBeforeTaskDrag,taskdragstart:this.onDragDropStart,aftertaskdrop:this.onDragDropEnd,scope:this})}if(this.enableDragCreation){this.dragCreator=Ext.create('Gnt.feature.DragCreator',Ext.apply({ganttView:this,validatorFn:this.createValidatorFn||Ext.emptyFn,validatorFnScope:this},this.createConfig))}},getTemplateForTask:function(a,b){if(a.isMilestone(b)){return this.milestoneTemplate}if(a.isLeaf()){return this.eventTemplate}return this.parentEventTemplate},refreshNotReadOnlyChildNodes:function(a){a.cascadeBy({before:function(b){return b==a||!b.getReadOnly()},after:function(b){if(b!==a){this.refreshNode(b)}},scope:this})},setShowRollupTasks:function(c){this.showRollupTasks=c;var a={};this.taskStore.getRootNode().cascadeBy(function(d){if(d.getRollup()){var b=d.parentNode;a[b.internalId]=b}});for(var d in a){var b=this.store.indexOf(a[d]);if(b>=0){this.refreshNode(b)}}},getRollupRenderData:function(l){var m=[];var o=this.timeAxis,h=o.getStart(),f=o.getEnd();for(var i=0;i<l.childNodes.length;i++){var b=l.childNodes[i];var c=b.getStartDate();var e=b.getEndDate()||c&&Sch.util.Date.add(c,b.getDurationUnit()||Sch.util.Date.DAY,1);if(b.getRollup()&&c&&e){if(Sch.util.Date.intersectSpans(c,e,h,f)){var a={},d=b.isMilestone();a.isRollup=!0;a.id=Ext.id();a.attr='rolluptaskid="'+b.getId()+'"';var k=e>f,j=Sch.util.Date.betweenLesser(c,h,f),g=this.getCoordinateFromDate(j?c:h),n=this.getCoordinateFromDate(k?f:e),p=d?0:n-g;a.offset=d?(n||g)-this.getXOffset(b):g;a.tpl=d?this.milestoneTemplate:this.eventTemplate;a.cls=b.getCls();a.ctcls='';a.record=b;if(d){a.side=Ext.isIE8m?Math.round(0.3*this.getRowHeight()):Math.round(0.5*this.getRowHeight());a.ctcls+=' sch-gantt-milestone'}else {a.width=Math.max(1,p);if(k){a.ctcls+=' sch-event-endsoutside '}if(!j){a.ctcls+=' sch-event-startsoutside '}a.ctcls+=' sch-gantt-task'}if(b.isReadOnly()){a.ctcls+=' sch-gantt-task-readonly'}if(b.isProject){a.ctcls+=' sch-gantt-project-task'}a.cls+=' sch-rollup-task';m.push(a)}}}return m},getLabelRenderData:function(b){var e=this.leftLabelField,d=this.rightLabelField,f=this.topLabelField,c=this.bottomLabelField,a,g={};if(e){a=e.dataIndex?b.data[e.dataIndex]:undefined;g.leftLabel=e.renderer?e.renderer.call(e.scope||this,a,b):Ext.util.Format.htmlEncode(a)}if(d){a=d.dataIndex?b.data[d.dataIndex]:undefined;g.rightLabel=d.renderer?d.renderer.call(d.scope||this,a,b):Ext.util.Format.htmlEncode(a)}if(f){a=f.dataIndex?b.data[f.dataIndex]:undefined;g.topLabel=f.renderer?f.renderer.call(f.scope||this,a,b):Ext.util.Format.htmlEncode(a)}if(c){a=c.dataIndex?b.data[c.dataIndex]:undefined;g.bottomLabel=c.renderer?c.renderer.call(c.scope||this,a,b):Ext.util.Format.htmlEncode(a)}return g},columnRenderer:function(V,W,a){var g=a.getStartDate(),I=this.timeAxis,f=Sch.util.Date,e={},t='',j='',c=I.getStart(),b=I.getEnd(),E=a.isMilestone(),J=!1,s,z,C;if(g){var p=a.getEndDate()||f.add(g,a.getDurationUnit()||f.DAY,1),R=I.getAt(0),H=(R.getEndDate()-R.getStartDate())/this.timeAxisViewModel.getTickWidth(),P=H*this.outsideLabelsGatherWidth,Q=f.intersectSpans(g,p,c,b),L=this.outsideLabelsGatherWidth>0,M=L&&f.intersectSpans(g,p,b,new Date(b.getTime()+P)),T=L&&f.intersectSpans(g,p,new Date(c.getTime()-P),c);if(Q||M||T){C=p>b;z=f.betweenLesser(g,c,b);var m,G,r;if(Q){m=this.getCoordinateFromDate(z?g:c);G=this.getCoordinateFromDate(C?b:p);r=E?0:G-m}else {z=!0;r=0;if(M){m=Math.floor(this.getCoordinateFromDate(b)+(g-b)/H)}else {m=Math.floor(this.getCoordinateFromDate(c)-(c-p)/H)}}var U=E?(G||m)-this.getXOffset(a):m;var B=Math.min(a.getPercentDone()||0,100)/100,h,A,K;var x=a.getSegments(),u;if(x){var y=0,F=x.length,l,k;for(l=0;l<F;l++){k=x[l];y+=(k.getEndDate()-k.getStartDate())*B}u=[];var n,o,q,i;for(l=0;l<F;l++){k=x[l];var d={},O=k.getCls()||'';i=k.getEndDate()||a.getStartDate();q=k.getStartDate();if(f.betweenLesser(q,c,b)){n=this.getCoordinateFromDate(q);if(f.betweenLesser(i,c,b)){o=this.getCoordinateFromDate(i)}else {o=this.getCoordinateFromDate(b)}}else {n=this.getCoordinateFromDate(c);if(f.betweenLesser(i,c,b)){o=this.getCoordinateFromDate(i)}else {if(q>b&&i>b){n=o=this.getCoordinateFromDate(b)+100}else {if(q<c&&i<c){n=o=this.getCoordinateFromDate(c)-100}else {o=this.getCoordinateFromDate(b)}}}}d.left=n-m;d.width=o-n;if(!h){y-=i-q;if(y<=0){h=f.add(i,f.MILLI,y);O+=' sch-segment-in-progress';A=this.getCoordinateFromDate(h);d.progressBarWidth=Math.min(Math.abs(A-n),d.width)}else {d.progressBarWidth=k.width}}else {d.progressBarWidth=0}d.percentDone=B*100;Ext.apply(d,k.data);d.cls=O;d.SegmentIndex=l;u.push(d)}u[0].cls+=' sch-gantt-task-segment-first';u[F-1].cls+=' sch-gantt-task-segment-last'}else {h=new Date((p-g)*B+g.getTime());if(h<c){h=c}else {if(h>b){h=b}}}A=this.getCoordinateFromDate(h);K=Math.min(Math.abs(A-m),r);e={id:a.internalId+'-x-x',offset:U,width:Math.max(1,r),ctcls:'',cls:'',print:this._print,record:a,percentDone:B*100,progressBarWidth:Math.max(0,K-2*this.eventBorderWidth),segments:u};s=this.eventRenderer&&this.eventRenderer.call(this.eventRendererScope||this,a,e,a.store)||{};Ext.apply(e,this.getLabelRenderData(a));J=!0;if(s){Ext.apply(e,s)}var v='';if(E){e.side=Math.round((this.enableBaseline?0.4:0.5)*this.getRowHeight());j+=' sch-gantt-milestone'}else {var S=8;e.width=Math.max(1,r);if(r<S){j+='sch-gantt-parent-noarrows'}if(C){j+=' sch-event-endsoutside '}if(!z){j+=' sch-event-startsoutside '}if(a.isLeaf()){var D=a.getResizable();j+=' sch-gantt-task';if(typeof D==='boolean'||typeof D==='string'){v+=' sch-event-resizable-'+D}}else {j+=' sch-gantt-parent-task'}}if(a.isReadOnly()){j+=' sch-gantt-task-readonly'}if(a.isProject){j+=' sch-gantt-project-task'}if(a.dirty){v+=' sch-dirty '}if(a.isDraggable()===!1){v+=' sch-event-fixed '}v+=a.isSegmented()?' sch-event-segmented ':' sch-event-notsegmented ';e.cls=(e.cls||'')+(a.getCls()||'')+v;e.ctcls+=' '+j;if(this.showRollupTasks){var N=this.getRollupRenderData(a);if(N.length>0){t+=this.rollupTemplate.apply(N)}}t+=this.getTemplateForTask(a).apply(e)}}if(this.enableBaseline){if(!s){s=this.eventRenderer&&this.eventRenderer.call(this,a,e,a.store)||{}}t+=this.baselineRenderer(a,s,c,b,J)}var w=a.getDeadlineDate();if(w){t+=this.deadlineTemplate.apply({dir:this.rtl?'right':'left',offset:this.getCoordinateFromDate(w),date:this.getFormattedEndDate(w),cls:new Date()>w&&!a.isCompleted()?'gnt-deadline-indicator-late':''})}return t},baselineRenderer:function(a,e,j,f,p){var o=Sch.util.Date,c=a.getBaselineStartDate(),d=a.getBaselineEndDate();if(c&&d&&o.intersectSpans(c,d,j,f)){var l=d>f;var k=o.betweenLesser(c,j,f);e=e||{};var h=a.isBaselineMilestone(),i=this.getCoordinateFromDate(k?c:j),n=this.getCoordinateFromDate(l?f:d),m=Math.max(1,h?0:n-i),q=this.getTemplateForTask(a,!0),g={progressBarStyle:e.baseProgressBarStyle||'',id:'base-'+a.internalId,progressBarWidth:Math.min(100,a.getBaselinePercentDone())*m/100,percentDone:a.getBaselinePercentDone(),offset:h?(n||i)-this.getXOffset(a,!0):i,print:this._print,width:Math.max(1,m),baseline:!0};var b='';if(h){g.side=Math.round(0.4*this.getRowHeight());b='sch-gantt-milestone-baseline sch-gantt-baseline-item'}else {if(a.isLeaf()){b='sch-gantt-task-baseline sch-gantt-baseline-item'}else {b='sch-gantt-parenttask-baseline sch-gantt-baseline-item'}}if(l){b+=' sch-event-endsoutside '}if(!k){b+=' sch-event-startsoutside '}g.ctcls=b+' '+(e.basecls||'');if(!p){Ext.apply(g,this.getLabelRenderData(a))}return q.apply(g)}return ''},setupTemplates:function(){var b={leftLabel:this.leftLabelField,rightLabel:this.rightLabelField,topLabel:this.topLabelField,bottomLabel:this.bottomLabelField,prefix:this.eventPrefix,taskResizeHandles:this.taskResizeHandles,enableDependencyDragDrop:this.enableDependencyDragDrop!==!1,allowParentTaskDependencies:this.allowParentTaskDependencies!==!1,enableProgressBarResize:this.enableProgressBarResize,rtl:this.rtl};var a;if(!this.eventTemplate){a=this.taskBodyTemplate?Ext.apply({innerTpl:this.taskBodyTemplate},b):b;this.eventTemplate=Ext.create('Gnt.template.Task',a)}if(!this.parentEventTemplate){a=this.parentTaskBodyTemplate?Ext.apply({innerTpl:this.parentTaskBodyTemplate},b):b;this.parentEventTemplate=Ext.create('Gnt.template.ParentTask',a)}if(!this.milestoneTemplate){a=this.milestoneBodyTemplate?Ext.apply({innerTpl:this.milestoneBodyTemplate},b):b;this.milestoneTemplate=Ext.create('Gnt.template.Milestone',a)}if(!this.rollupTemplate){this.rollupTemplate=Ext.create('Gnt.template.RollupTask')}if(!this.deadlineTemplate){this.deadlineTemplate=Ext.create('Gnt.template.Deadline')}},getTaskStore:function(){return this.taskStore},getEventStore:function(){return this.getTaskStore()},setupGanttEvents:function(){var a=this,b=this.taskStore;if(this.toggleParentTasksOnClick){this.on({taskclick:function(e,c){if(!c.isLeaf()&&(!b.isTreeFiltered()||b.allowExpandCollapseWhileFiltered)){var d=function(){a.fireEvent.apply(this,['taskdblclick'].concat(Array.prototype.slice.apply(arguments)))};a.on('taskclick',d);a.unbindListenerTimer=setTimeout(function(){a.un('taskclick',d)},300);c.isExpanded()?c.collapse():c.expand()}}})}},configureLabels:function(){Ext.Array.each(['left','right','top','bottom'],function(c){var a=this[c+'LabelField'];if(a){a=Ext.isObject(a)?Ext.apply({},a):a;if(Ext.isString(a)){a=this[c+'LabelField']={dataIndex:a}}if(a.editor){var b=a.editor;if(!b.isComponent){b=Ext.clone(b)}a.editor=Ext.create('Gnt.feature.LabelEditor',this,{labelPosition:c,field:b,dataIndex:a.dataIndex})}this[c+'LabelField']=a}},this);this.on('labeledit_beforestartedit',this.onBeforeLabelEdit,this)},onBeforeTaskDrag:function(b,a){return !this.readOnly&&a.isDraggable()!==!1&&(this.allowParentTaskMove||a.isLeaf())},onDragDropStart:function(){if(this.tip){this.tip.on('beforeshow',this.falseReturningFn)}},falseReturningFn:function(){return !1},onDragDropEnd:function(){if(this.tip){this.tip.un('beforeshow',this.falseReturningFn)}},onTaskProgressBarResizeStart:function(){if(this.tip){this.tip.hide();this.tip.disable()}},onTaskProgressBarResizeEnd:function(){if(this.tip){this.tip.enable()}},onTaskResizeStart:function(){var a=this.getScrollable();if(this.tip){this.tip.hide();this.tip.disable()}a.setDisabled&&a.setDisabled(!0)},onTaskResizeEnd:function(){var a=this.getScrollable();if(this.tip){this.tip.enable()}a.setDisabled&&a.setDisabled(!1)},onBeforeDragCreate:function(){return !this.readOnly},onBeforeTaskResize:function(b,a){return !this.readOnly&&a.getSchedulingMode()!=='EffortDriven'},onBeforeTaskProgressBarResize:function(){return !this.readOnly},onBeforeLabelEdit:function(){return !this.readOnly},afterRender:function(){Sch.view.TimelineGridView.prototype.afterRender.apply(this,arguments);this.getEl().on('mousemove',this.configureFeatures,this,{single:!0});Ext.dd.ScrollManager.register(this.el)},resolveTaskRecord:function(b){var a=this.findItemByChild(b);if(a){return this.getRecord(a)}return null},resolveEventRecord:function(a){return this.resolveTaskRecord(a)},resolveEventRecordFromResourceRow:function(a){return this.resolveTaskRecord(a)},highlightTask:function(a,c){if(!(a instanceof Ext.data.Model)){a=this.taskStore.getModelById(a)}if(a){a.isHighlighted=!0;var e=this.getRow(a);if(e){Ext.fly(e).addCls('sch-gantt-task-highlighted')}if(c!==!1){for(var b=0,f=a.successors.length;b<f;b++){var d=a.successors[b];this.highlightDependency(d);this.highlightTask(d.getTargetTask(),c)}}}},unhighlightTask:function(a,c){if(!(a instanceof Ext.data.Model)){a=this.taskStore.getModelById(a)}if(a){a.isHighlighted=!1;var e=this.getRow(a);if(e){Ext.fly(e).removeCls('sch-gantt-task-highlighted')}if(c!==!1){for(var b=0,f=a.successors.length;b<f;b++){var d=a.successors[b];this.unhighlightDependency(d);this.unhighlightTask(d.getTargetTask(),c)}}}},getRowClass:function(b){var a='';if(b.isHighlighted){a='sch-gantt-task-highlighted'}if(this.externalGetRowClass){a+=' '+(this.externalGetRowClass.apply(this,arguments)||'')}return a},clearSelectedTasksAndDependencies:function(){this.ownerGrid.getDependencyView().clearSelectedDependencies();this.el.select('.sch-gantt-task-highlighted').removeCls('sch-gantt-task-highlighted');this.taskStore.getRootNode().cascadeBy(function(a){a.isHighlighted=!1})},getCriticalPaths:function(){return this.taskStore.getCriticalPaths()},highlightCriticalPaths:function(){this.clearSelectedTasksAndDependencies();var e=this.getCriticalPaths(),f=this.ownerGrid.getDependencyView(),b,a,c,d;Ext.Array.each(e,function(g){for(a=0,c=g.length;a<c;a++){b=g[a];this.highlightTask(b,!1);if(a<c-1){for(var e=0,h=b.predecessors.length;e<h;e++){if(b.predecessors[e].getSourceId()==g[a+1].getId()){d=b.predecessors[e];break}}f.highlightDependency(d)}}},this);this.addCls('sch-gantt-critical-chain')},unhighlightCriticalPaths:function(){this.removeCls('sch-gantt-critical-chain');this.clearSelectedTasksAndDependencies()},getXOffset:function(c,b){var a=0;if(c.isMilestone(b)){a=Math.floor(this.getRowHeight()*0.3535533905932738)-2}return a},onDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.el)}clearTimeout(this.scrollTimer);clearTimeout(this.unbindListenerTimer);Sch.view.TimelineGridView.prototype.onDestroy.apply(this,arguments)},highlightDependency:function(a){this.ownerGrid.getDependencyView().highlightDependency(a)},unhighlightDependency:function(a){this.ownerGrid.getDependencyView().unhighlightDependency(a)},getLeftEditor:function(){return this.leftLabelField&&this.leftLabelField.editor},getRightEditor:function(){return this.rightLabelField&&this.rightLabelField.editor},getTopEditor:function(){return this.topLabelField&&this.topLabelField.editor},getBottomEditor:function(){return this.bottomLabelField&&this.bottomLabelField.editor},editLeftLabel:function(b){var a=this.getLeftEditor();if(a){a.edit(b)}},editRightLabel:function(b){var a=this.getRightEditor();if(a){a.edit(b)}},editTopLabel:function(b){var a=this.getTopEditor();if(a){a.edit(b)}},editBottomLabel:function(b){var a=this.getBottomEditor();if(a){a.edit(b)}},onRowUpdate:function(d,c){var a=this.store.getAt(c);if(a&&a.previous){var b=a.previous;if(a.parentNode&&(a.rollupField in b||a.getRollup())){this.refreshNode(a.parentNode)}if(a.readOnlyField in b){this.refreshNotReadOnlyChildNodes(a)}}},onTaskStoreUpdate:function(b,a,e,d,f){var c=a.previous;if(c&&a.getRollup()&&a.parentNode&&!a.parentNode.expanded&&b.isUndoingOrRedoing()){this.refreshNode(a.parentNode)}},handleScheduleEvent:function(a){var b=a.getTarget('.'+this.timeCellCls,3);if(b){var c=this.findRowByChild(b);if(a.type.indexOf('pinch')>=0){this.fireEvent('schedule'+a.type,this,a)}else {this.fireEvent('schedule'+a.type,this,this.getDateFromDomEvent(a,'floor'),this.indexOf(c),a)}}},scrollEventIntoView:function(b,g,n,d,e){e=e||this;var f=this;var o=this.taskStore;var k=function(a,c){f.up('panel').scrollTask.cancel();f.scrollElementIntoView(a,c,n);if(g){if(typeof g==='boolean'){a.highlight()}else {a.highlight(null,g)}}d&&d.call(e)};if(!b.isVisible()){b.bubble(function(a){a.expand()})}var a;var h=b.getStartDate(),j=b.getEndDate(),l=Boolean(h&&j),i;if(l){var c=this.timeAxis;if(!c.dateInAxis(h)||!c.dateInAxis(j)){var m=c.getEnd()-c.getStart();c.setTimeSpan(new Date(h.getTime()-m/2),new Date(j.getTime()+m/2))}i=this.getElementsFromEventRecord(b);a=i&&i[0]}else {a=this.getNode(b);if(a){a=Ext.fly(a).down(this.getCellSelector())}}if(a){k(a,l)}else {if(this.bufferedRenderer){this.scrollTimer=Ext.Function.defer(function(){f.bufferedRenderer.scrollTo(b,!1,function(){var c=f.getElementsFromEventRecord(b);a=c&&c[0];if(a){k(a,!0)}else {d&&d.call(e)}})},10)}}},isElementRenderedAndDisplayed:function(a){if(a instanceof Gnt.model.Task){a=this.view.getRowNode(a)}return !!(a&&Ext.fly(a).getHeight())},getItemBox:function(c){var f=Sch.util.Date,a=this,b=null,h=a.timeAxis.getStart(),j=a.timeAxis.getEnd(),g=c.isMilestone()&&c.getEndDate()||c.getStartDate(),i=c.getEndDate(),q=a.getTaskStore(),o,r,e,y,u,d,w,s,m,l,p;b=g&&i&&a.store.indexOf(c)>=0&&(!q.isTreeFiltered()||q.lastTreeFilter.filter.call(q.lastTreeFilter.scope||q,c))||null;if(b){e=a.getNode(c);if(e&&a.isElementRenderedAndDisplayed(e)){var n,t;var x=a.getNodeContainer();var k=40;if(c.isMilestone()){var v=a.getRowHeight()*0.16;u=Ext.fly(e).getOffsetsTo(x)[1];n=u+v;t=u+a.getRowHeight()-v}else {var z=Ext.fly(e).down('.x-grid-cell-inner > .sch-event-wrap .sch-gantt-item',!0)||e;n=Ext.fly(z).getOffsetsTo(x)[1];t=n+Ext.fly(z).getHeight()}o=a.getCoordinateFromDate(f.min(f.max(g,h),j));r=a.getCoordinateFromDate(f.max(f.min(i,j),h));if(h.getTime()>g.getTime()){o-=k}if(h.getTime()>i.getTime()){r-=k}if(j.getTime()<g.getTime()){o+=k}if(j.getTime()<i.getTime()){r+=k}b={rendered:!0,start:o,end:r,top:Math.round(n),bottom:Math.round(t)}}else {b={rendered:!1,start:a.getCoordinateFromDate(f.max(g,h)),end:a.getCoordinateFromDate(f.min(i,j))};w=a.all.startIndex;s=a.getRecord(w);m=a.all.endIndex;l=a.getRecord(m);if(s&&l){d=a.getRowHeight();if(c.isAbove(s)){b.top=-d;b.bottom=b.top+d;b.relPos='before'}else {if(c==l||c.isAbove(l)){y=a.indexOf(c);b.top=y*d;b.bottom=b.top+d}else {p=a.getNode(m);if(a.isElementRenderedAndDisplayed(p)){b.top=Ext.fly(p).getOffsetsTo(a.getNodeContainer())[1]+Ext.fly(p).getHeight()}else {b.top=(m+1)*d}b.bottom=b.top+d;b.relPos='after'}}}else {b=null}}if(b){b=a.adjustItemBox(c,b)}}return b},adjustItemBox:function(c,a){var b=a;if(c.isMilestone()){b={rendered:a.rendered,top:a.top,bottom:a.bottom+1,start:a.start-8,end:a.end+8,relPos:a.relPos}}return b},getDataForTooltipTpl:function(c,a){var e=a.getAttribute('rolluptaskid');if(e){var b=this.getTaskStore().getNodeById(e);if(b){c=b}}var d=Sch.view.TimelineGridView.prototype.getDataForTooltipTpl.call(this,c,a);d._useBaselineData=Boolean(Ext.fly(a).up('.sch-gantt-baseline-item'));return d}},1,['ganttview'],['component','box','dataview','tableview','gridview','ganttview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0,'ganttview':!0},['widget.ganttview'],[[Sch.mixin.GridViewCanvas.prototype.mixinId||Sch.mixin.GridViewCanvas.$className,Sch.mixin.GridViewCanvas],[Sch.mixin.FilterableTreeView.prototype.mixinId||Sch.mixin.FilterableTreeView.$className,Sch.mixin.FilterableTreeView]],[Gnt.view,'Gantt'],0);Ext.cmd.derive('Gnt.patches.RightClick',Sch.util.Patch,{target:'Gnt.view.Gantt',maxVersion:'6.0.1',overrides:{handleScheduleBarEvent:function(a){if(Ext.isGecko&&a.type==='click'&&a.button===2){return !1}return this.callParent(arguments)}}},0,0,0,0,0,0,[Gnt.patches,'RightClick'],0);Ext.cmd.derive('Ext.layout.container.CheckboxGroup',Ext.layout.container.Container,{autoFlex:!0,type:'checkboxgroup',createsInnerCt:!0,childEls:['innerCt'],renderTpl:['<table id="{ownerId}-innerCt" data-ref="innerCt" class="x-table-plain" cellpadding="0"','role="presentation" style="{tableStyle}"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">','{% this.renderColumn(out,parent,xindex-1) %}','</td>','</tpl>','</tr></table>'],lastOwnerItemsGeneration:null,beginLayout:function(i){var d=this,h,e,a,c,f,j=0,g=0,k=d.autoFlex,b=d.innerCt.dom.style;Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);h=d.columnNodes;i.innerCtContext=i.getEl('innerCt',d);if(!i.widthModel.shrinkWrap){e=h.length;if(d.columnsArray){for(a=0;a<e;a++){c=d.owner.columns[a];if(c<1){j+=c;g++}}for(a=0;a<e;a++){c=d.owner.columns[a];if(c<1){f=c/j*100+'%'}else {f=c+'px'}h[a].style.width=f}}else {for(a=0;a<e;a++){f=k?1/e*100+'%':'';h[a].style.width=f;g++}}if(!g){b.tableLayout='fixed';b.width=''}else {if(g<e){b.tableLayout='fixed';b.width='100%'}else {b.tableLayout='auto';if(k){b.width='100%'}else {b.width=''}}}}else {b.tableLayout='auto';b.width=''}},cacheElements:function(){var a=this;Ext.layout.container.Container.prototype.cacheElements.call(this);a.rowEl=a.innerCt.down('tr');a.columnNodes=a.rowEl.dom.childNodes},calculate:function(a){var h=this,d,c,b,g,f,e;if(!a.getDomProp('containerChildrenSizeDone')){h.done=!1}else {d=a.innerCtContext;c=a.widthModel.shrinkWrap;b=a.heightModel.shrinkWrap;g=b||c;f=d.el.dom;e=g&&d.getPaddingInfo();if(c){a.setContentWidth(f.offsetWidth+e.width,!0)}if(b){a.setContentHeight(f.offsetHeight+e.height,!0)}}},doRenderColumn:function(m,h,g){var l=h.$layout,j=l.owner,f=h.columnCount,i=j.items.items,b=i.length,e,a,d,c,k;if(j.vertical){d=Math.ceil(b/f);a=g*d;b=Math.min(b,a+d);c=1}else {a=g;c=f}for(;a<b;a+=c){e=i[a];l.configureItem(e);k=e.getRenderTree();Ext.DomHelper.generateMarkup(k,m)}},getColumnCount:function(){var c=this,b=c.owner,a=b.columns;if(c.columnsArray){return a.length}if(Ext.isNumber(a)){return a}return b.items.length},getItemSizePolicy:function(a){return this.autoSizePolicy},getRenderData:function(){var c=this,d=Ext.layout.container.Container.prototype.getRenderData.call(this),k=c.owner,a,e=c.getColumnCount(),b,g,h,j=c.autoFlex,i=0,f=0;if(c.columnsArray){for(a=0;a<e;a++){b=c.owner.columns[a];if(b<1){i+=b;f++}}}d.colCls=k.groupCls;d.columnCount=e;d.columns=[];for(a=0;a<e;a++){g=d.columns[a]={};if(c.columnsArray){b=c.owner.columns[a];if(b<1){h=b/i*100+'%'}else {h=b+'px'}g.style='width:'+h}else {g.style='width:'+1/e*100+'%';f++}}d.tableStyle=!f?'table-layout:fixed;':f<e?'table-layout:fixed;width:100%':j?'table-layout:auto;width:100%':'table-layout:auto;';return d},initLayout:function(){var b=this,a=b.owner;b.columnsArray=Ext.isArray(a.columns);b.autoColumns=!a.columns||a.columns==='auto';b.vertical=a.vertical;Ext.layout.container.Container.prototype.initLayout.call(this)},isValidParent:Ext.returnTrue,setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderColumn=this.doRenderColumn},renderChildren:function(){var a=this,b=a.owner.items.generation;if(a.lastOwnerItemsGeneration!==b){a.lastOwnerItemsGeneration=b;a.renderItems(a.getLayoutItems())}},renderItems:function(i){var a=this,c=i.length,b,d,h,e,g,f;if(c){Ext.suspendLayouts();if(a.autoColumns){a.addMissingColumns(c)}e=a.columnNodes.length;h=Math.ceil(c/e);for(b=0;b<c;b++){d=i[b];g=a.getRenderRowIndex(b,h,e);f=a.getRenderColumnIndex(b,h,e);if(!d.rendered){a.renderItem(d,g,f)}else {if(!a.isItemAtPosition(d,g,f)){a.moveItem(d,g,f)}}}if(a.autoColumns){a.removeExceedingColumns(c)}Ext.resumeLayouts(!0)}},isItemAtPosition:function(c,b,a){return c.el.dom===this.getNodeAt(b,a)},getRenderColumnIndex:function(a,c,b){if(this.vertical){return Math.floor(a/c)}else {return a%b}},getRenderRowIndex:function(a,c,b){var d=this;if(d.vertical){return a%c}else {return Math.floor(a/b)}},getNodeAt:function(b,a){return this.columnNodes[a].childNodes[b]},addMissingColumns:function(e){var a=this,c=a.columnNodes.length,d,g,f,b;if(c<e){d=e-c;g=a.rowEl;f=a.owner.groupCls;for(b=0;b<d;b++){g.createChild({cls:f,tag:'td',vAlign:'top',role:'presentation'})}}},removeExceedingColumns:function(d){var f=this,c=f.columnNodes.length,b,e,a;if(c>d){b=c-d;e=f.rowEl;for(a=0;a<b;a++){e.last().destroy()}}},renderItem:function(a,d,c){var b=this;b.configureItem(a);a.render(Ext.get(b.columnNodes[c]),d)},moveItem:function(e,d,b){var f=this,a=f.columnNodes[b],c=a.childNodes[d];a.insertBefore(e.el.dom,c||null)}},0,0,0,0,['layout.checkboxgroup'],0,[Ext.layout.container,'CheckboxGroup'],0);Ext.cmd.derive('Ext.form.CheckboxGroup',Ext.form.FieldContainer,{columns:'auto',vertical:!1,allowBlank:!0,blankText:'You must select at least one item in this group',defaultType:'checkboxfield',defaultBindProperty:'value',groupCls:'x-form-check-group',extraFieldBodyCls:'x-form-checkboxgroup-body',layout:'checkboxgroup',componentCls:'x-form-checkboxgroup',ariaRole:'group',ariaEl:'containerEl',ariaRenderAttributes:{'aria-invalid':!1},initComponent:function(){var a=this;a.name=a.name||a.id;Ext.form.FieldContainer.prototype.initComponent.call(this);a.initField()},initRenderData:function(){var f=this,a,c,d,b,g,e;a=Ext.form.FieldContainer.prototype.initRenderData.call(this);a.inputId=f.id+'-'+f.ariaEl;c=a.ariaAttributes;if(c){d=f.getBoxes();e=[];for(b=0,g=d.length;b<g;b++){e.push(d[b].id+'-inputEl')}c['aria-owns']=e.join(' ')}return a},initValue:function(){var a=this,b=a.value;a.originalValue=a.lastValue=b||a.getValue();if(b){a.setValue(b)}},onAdd:function(a){var b=this,d,e,c;if(a.isCheckbox){if(!a.name){a.name=b.name}b.mon(a,'change',b.checkChange,b)}else {if(a.isContainer){d=a.items.items;for(c=0,e=d.length;c<e;c++){b.onAdd(d[c])}}}Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(a){var b=this,d,e,c;if(a.isCheckbox){b.mun(a,'change',b.checkChange,b)}else {if(a.isContainer){d=a.items.items;for(c=0,e=d.length;c<e;c++){b.onRemove(d[c])}}}Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(b,c){var a=Ext.Object.toQueryString;return a(b)===a(c)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(a){return this.query('[isCheckbox]'+(a||''))},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return this.getBoxes('[checked]')},isDirty:function(){var b=this.getBoxes(),a,c=b.length;for(a=0;a<c;a++){if(b[a].isDirty()){return !0}}},setReadOnly:function(b){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){c[a].setReadOnly(b)}this.readOnly=b},reset:function(){var a=this,c=a.hasActiveError(),b=a.preventMark;a.preventMark=!0;a.batchChanges(function(){var c=a.getBoxes(),b,d=c.length;for(b=0;b<d;b++){c[b].reset()}});a.preventMark=b;a.unsetActiveError();if(c){a.updateLayout()}},resetOriginalValue:function(){var a=this,c=a.getBoxes(),b,d=c.length;for(b=0;b<d;b++){c[b].resetOriginalValue()}a.originalValue=a.getValue();a.checkDirty()},setValue:function(b){var f=this,g=f.getBoxes(),e,h=g.length,d,c,a;f.batchChanges(function(){Ext.suspendLayouts();for(e=0;e<h;e++){d=g[e];c=d.getName();a=!1;if(b){if(Ext.isArray(b[c])){a=Ext.Array.contains(b[c],d.inputValue)}else {a=b[c]}}d.setValue(a)}Ext.resumeLayouts(!0)});return f},getValue:function(){var b={},g=this.getBoxes(),e,h=g.length,d,c,f,a;for(e=0;e<h;e++){d=g[e];c=d.getName();f=d.inputValue;if(d.getValue()){if(b.hasOwnProperty(c)){a=b[c];if(!Ext.isArray(a)){a=b[c]=[a]}a.push(f)}else {b[c]=f}}}return b},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,c,b,d;if(a.disabled){b=!0}else {c=a.getErrors();b=Ext.isEmpty(c);d=a.wasValid;if(b){a.unsetActiveError()}else {a.setActiveError(c)}}if(b!==d){a.wasValid=b;a.fireEvent('validitychange',a,b);a.updateLayout()}return b}},0,['checkboxgroup'],['component','box','container','fieldcontainer','checkboxgroup'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0,'checkboxgroup':!0},['widget.checkboxgroup'],[['field',Ext.form.field.Field]],[Ext.form,'CheckboxGroup'],function(){this.borrow(Ext.form.field.Base,['markInvalid','clearInvalid','setError'])});Ext.cmd.derive('Ext.form.RadioManager',Ext.util.MixedCollection,{singleton:!0,getByName:function(b,a){return this.filterBy(function(c){return c.name===b&&c.getFormId()===a})},getWithValue:function(c,b,a){return this.filterBy(function(d){return d.name===c&&d.inputValue==b&&d.getFormId()===a})},getChecked:function(b,a){return this.findBy(function(c){return c.name===b&&c.checked&&c.getFormId()===a})}},0,0,0,0,0,0,[Ext.form,'RadioManager'],0);Ext.cmd.derive('Ext.form.field.Radio',Ext.form.field.Checkbox,{alternateClassName:'Ext.form.Radio',isRadio:!0,inputType:'radio',ariaRole:'radio',tabIndex:0,formId:null,getGroupValue:function(){var a=this.getManager().getChecked(this.name,this.getFormId());return a?a.inputValue:null},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!0)}},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments);this.formId=null},setValue:function(c){var a=this,b;if(Ext.isBoolean(c)){Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments)}else {b=a.getManager().getWithValue(a.name,c,a.getFormId()).getAt(0);if(b){b.setValue(!0)}}return a},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var a=Ext.form.field.Checkbox.prototype.getModelData.apply(this,arguments);if(a){a[this.getName()]=this.getSubmitValue()}return a},onChange:function(f,g){var a=this,b,e,d,c;Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments);if(f){c=a.getManager().getByName(a.name,a.getFormId()).items;e=c.length;for(b=0;b<e;b++){d=c[b];if(d!==a){d.setValue(!1)}}}},getManager:function(){return Ext.form.RadioManager}},0,['radio','radiofield'],['component','box','field','checkboxfield','checkbox','radiofield','radio'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'radiofield':!0,'radio':!0},['widget.radio','widget.radiofield'],0,[Ext.form.field,'Radio',Ext.form,'Radio'],0);Ext.cmd.derive('Ext.form.RadioGroup',Ext.form.CheckboxGroup,{allowBlank:!0,blankText:'You must select one item in this group',defaultType:'radiofield',local:!1,defaultBindProperty:'value',groupCls:'x-form-radio-group',ariaRole:'radiogroup',initRenderData:function(){var c=this,b,a;b=Ext.form.CheckboxGroup.prototype.initRenderData.call(this);a=b.ariaAttributes;if(a){a['aria-required']=!c.allowBlank;a['aria-invalid']=!1}return b},lookupComponent:function(b){var a=Ext.form.CheckboxGroup.prototype.lookupComponent.call(this,b);if(this.local){a.formId=this.getId()}return a},getBoxes:function(a,b){return (b||this).query('[isRadio]'+(a||''))},checkChange:function(){var a=this.getValue(),b=Ext.Object.getKeys(a)[0];if(Ext.isArray(a[b])){return}Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)},setValue:function(d){var f,c,g,b,a,h,e;if(Ext.isObject(d)){Ext.suspendLayouts();c=this.items.first();g=c?c.getFormId():null;for(e in d){f=d[e];b=Ext.form.RadioManager.getWithValue(e,f,g).items;h=b.length;for(a=0;a<h;++a){b[a].setValue(!0)}}Ext.resumeLayouts(!0)}return this},markInvalid:function(b){var a=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.markInvalid.call(this,b);if(a){a.setAttribute('aria-invalid',!0)}},clearInvalid:function(){var a=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.clearInvalid.call(this);if(a){a.setAttribute('aria-invalid',!1)}},privates:{getFocusables:function(){return this.getBoxes()},initDefaultFocusable:function(d){var c=this,b,a;b=c.getChecked();if(b.length){a=b[0]}else {a=c.findNextFocusableChild({beforeRender:d,step:1})}if(a){c.activateFocusable(a)}return a},getFocusableContainerEl:function(){return this.containerEl},onFocusableContainerFocusLeave:function(){this.clearFocusables();this.initDefaultFocusable()},doFocusableChildAdd:function(c){var d=this,f=d.mixins.focusablecontainer,b,a,e;b=c.isContainer?d.getBoxes('',c):[c];for(a=0,e=b.length;a<e;a++){f.doFocusableChildAdd.call(d,b[a])}},doFocusableChildRemove:function(c){var d=this,f=d.mixins.focusablecontainer,b,a,e;b=c.isContainer?d.getBoxes('',c):[c];for(a=0,e=b.length;a<e;a++){f.doFocusableChildRemove.call(d,b[a])}},focusChild:function(d,c,b){var a=this.mixins.focusablecontainer.focusChild.apply(this,arguments);if(!b.ctrlKey){a.setValue(!0)}}}},0,['radiogroup'],['component','box','container','fieldcontainer','checkboxgroup','radiogroup'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0,'checkboxgroup':!0,'radiogroup':!0},['widget.radiogroup'],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.form,'RadioGroup'],0);Ext.cmd.derive('Ext.form.field.Display',Ext.form.field.Base,{alternateClassName:['Ext.form.DisplayField','Ext.form.Display'],fieldSubTpl:['<div id="{id}" data-ref="inputEl" tabindex="-1" role="textbox" aria-readonly="true"',' aria-labelledby="{cmpId}-labelEl" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:!0,disableFormats:!0}],ariaRole:undefined,focusable:!1,readOnly:!0,fieldCls:'x-form-display-field',fieldBodyCls:'x-form-display-field-body',htmlEncode:!1,noWrap:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,getValue:function(){return this.value},valueToRaw:function(a){if(a||a===0||a===!1){return a}else {return ''}},isDirty:function(){return !1},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,'');a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,c=this.getRawValue(),b;if(a.renderer){b=a.renderer.call(a.scope||a,c,a)}else {b=a.htmlEncode?Ext.util.Format.htmlEncode(c):c}return b},getSubTplData:function(b){var a=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);a.value=this.getDisplayValue();return a}},0,['displayfield'],['component','box','field','displayfield'],{'component':!0,'box':!0,'field':!0,'displayfield':!0},['widget.displayfield'],0,[Ext.form.field,'Display',Ext.form,'DisplayField',Ext.form,'Display'],0);Ext.cmd.derive('Gnt.widget.ConstraintResolutionForm',Ext.form.Panel,{legacyMode:!1,config:{resolutionContext:null,dateFormat:null},bodyPadding:10,autoScroll:!0,initComponent:function(){var a=this;a.setupItemsFromResolutionContext(a.resolutionContext);a.setupFooterFromResolutionContext(a.resolutionContext);Ext.form.Panel.prototype.initComponent.apply(this,arguments)},setupItemsFromResolutionContext:function(a){var b=this,c;c=Ext.Array.map(a.resolutions,function(d,c){return {xtype:'radio',boxLabel:b.getResolutionOptionDescription(d.title,a),name:'resolutionOption',checked:d===a.getCancelActionOption(),inputValue:c,tabIndex:c}});b.items=[{xtype:'displayfield',itemId:'description',value:b.getConstraintViolationDescription(a),anchor:'-0'},{xtype:'radiogroup',itemId:'options',columns:1,title:b.L('Resolution options'),allowBlank:!1,items:c,anchor:'-0'}]},setupFooterFromResolutionContext:function(b){var a=this;a.fbar={itemId:'footer-tb',items:[{xtype:'checkbox',itemId:'dont-ask-cb',boxLabel:a.L("Don't ask again"),tabIndex:b.resolutions.length+1},'->',{text:a.L('OK'),itemId:'ok-btn',formBind:!0,tabIndex:b.resolutions.length+2,handler:a.onUserActionOk,scope:a},{text:a.L('Cancel'),itemId:'cancel-btn',tabIndex:b.resolutions.length+3,handler:a.onUserActionCancel,scope:a}]}},getDontAskValue:function(){var a=this;return a.down('#dont-ask-cb').getValue()},getConstraintViolationDescription:function(a){var c=this,e,f,d,b,h,g;e=a.title;b=a.task;h=b.getName()||'';d=b.getConstraintClass();g=c.dateFormat||c.L('dateFormat')||Ext.Date.defaultFormat;f=d&&d.getDisplayableConstraintDateForFormat(a.date,g,b)||a.date;return f?Ext.String.format(c.L('Task {0} violates constraint {1} {2}'),h,e,Ext.Date.format(f,g)):Ext.String.format(c.L('Task {0} violates constraint {1}'),h,e)},getResolutionOptionDescription:function(f,a){var g=this,e,c,b,d;e=a.task;b=e.getConstraintClass();d=g.dateFormat||g.L('dateFormat')||Ext.Date.defaultFormat;c=b&&b.getDisplayableConstraintDateForFormat(a.date,d,e)||a.date;return c?Ext.String.format(f,Ext.Date.format(c,d)):Ext.String.format(f,'')},onUserActionOk:function(c){var a=this,b;b=a.getValues();b.dontAsk=a.getDontAskValue();a.fireEvent('ok',a,b)},onUserActionCancel:function(b){var a=this;a.fireEvent('cancel',a)},getOptimalHeight:function(c){var a=this,g,f,b,d,e,h;if(c){g=a.getXY();f=a.getWidth();a.setXY([-10000,-10000]);a.setWidth(c)}b=a.getComponent('options');d=b.getEl().getOffsetsTo(a.body);h=a.getDockedComponent('footer-tb');e=d[1]+Ext.getDom(b.getEl()).scrollHeight+2*a.bodyPadding+h.getHeight()+10;if(c){a.setWidth(f);a.setXY(g)}return e}},0,['constraintresolutionform'],['component','box','container','panel','form','constraintresolutionform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'constraintresolutionform':!0},['widget.constraintresolutionform'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget,'ConstraintResolutionForm'],0);Ext.define('CGA.widget.ConstraintResolutionForm',{override:'Gnt.widget.ConstraintResolutionForm',getConstraintViolationDescription:function(b){var c=this,e,f,d,a,i,h,g;e=b.title;a=b.task;i=a.getName()||'';h=a.getSequenceNumber();d=a.getConstraintClass();g=c.dateFormat||c.L('dateFormat')||Ext.Date.defaultFormat;f=d&&d.getDisplayableConstraintDateForFormat(b.date,g,a)||b.date;return f?Ext.String.format(c.L('Task {0} violates constraint {1} {2}'),'['+h+'] '+i,e,Ext.Date.format(f,g)):Ext.String.format(c.L('Task {0} violates constraint {1}'),'['+h+'] '+i,e)}});Ext.cmd.derive('Gnt.widget.ConstraintResolutionWindow',Ext.window.Window,{modal:!0,closable:!0,resizable:!0,collapsible:!1,border:!1,bodyBorder:!1,config:{resolutionContext:null,dateFormat:null},form:null,minWidth:300,initComponent:function(){var a=this;a.title=a.L('Constraint violation');a.setupItems();a.height=Math.round(Ext.dom.Element.getViewportHeight()/3);a.width=Math.round(Ext.dom.Element.getViewportWidth()/4);Ext.window.Window.prototype.initComponent.apply(this,arguments);a.on('afterlayout',a.onAfterOptimalLayout,a,{single:!0})},setupItems:function(){var a=this;a.layout='fit';a.form=new Gnt.widget.ConstraintResolutionForm({resolutionContext:a.getResolutionContext(),dateFormat:a.getDateFormat(),bubbleEvents:['ok','cancel']});a.items=a.form},onAfterOptimalLayout:function(){var a=this,b,d,e,c;b=a.getHeight();d=a.form.getHeight();e=a.form.getOptimalHeight();c=e+b-d;b!=c&&a.setHeight(c)}},0,['constraintresolutionwindow'],['component','box','container','panel','window','constraintresolutionwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'constraintresolutionwindow':!0},['widget.constraintresolutionwindow'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget,'ConstraintResolutionWindow'],0);Ext.cmd.derive('Gnt.plugin.ConstraintResolutionGui',Ext.AbstractPlugin,{config:{dateFormat:null},cmpDetacher:null,storeDetacher:null,storedResolutions:null,init:function(b){var a=this;Ext.plugin.Abstract.prototype.init.apply(this,arguments);if(!a.disabled){a.enable()}},enable:function(){var a=this,b=a.getCmp();(arguments.callee.$previous||Ext.plugin.Abstract.prototype.enable).call(this);if(b.rendered){a.attachToTaskStore()}else {a.cmpDetacher=b.on('afterrender',function(){a.attachToTaskStore()},null,{destroyable:!0,single:!0})}},disable:function(){var a=this,b=a.getCmp();(arguments.callee.$previous||Ext.plugin.Abstract.prototype.disable).call(this);if(b.rendered){a.detachFromTaskStore()}else {a.cmpDetacher&&Ext.destroy(a.cmpDetacher);a.cmpDetacher=null}},attachToTaskStore:function(){var a=this,b,c;if(!a.storeDetacher){b=a.getCmp();c=b.getTaskStore();a.storeDetacher=b.mon(c,'constraintconflict',a.onConstraintConflict,a,{destroyable:!0})}},detachFromTaskStore:function(){var a=this;a.storeDetacher&&Ext.destroy(a.storeDetacher);a.storeDetacher=null},onConstraintConflict:function(i,b){var a=this,d=a.getCmp(),j=d.lockedGrid.getView(),g=d.normalGrid.getView(),k=d.getDependencyView(),f=g.indexOf(i),c,h,e={destroy:function(){Ext.destroy(h)}};function redrawTask(){if(f!=-1){j.refreshNode(f);g.refreshNode(f);k.updateDependencies(i.getAllDependencies())}}redrawTask();if(!a.hasStoredResolutionForContext(b)){c=new Gnt.widget.ConstraintResolutionWindow({dateFormat:a.getDateFormat(),resolutionContext:b});h=c.on({'ok':Ext.Function.bind(a.onUserActionOk,a,[b,redrawTask,c,e],!0),'cancel':Ext.Function.bind(a.onUserActionCancel,a,[b,redrawTask,c,e],!0),'close':Ext.Function.bind(a.onUserActionClose,a,[b,redrawTask,e],!0),destroyable:!0});d.completeEdit();c.show()}else {a.resolveSilently(b,redrawTask)}},getStoredResolutions:function(){var a=this;if(!a.storedResolutions){a.storedResolutions={}}return a.storedResolutions},getStoredResolutionKeyForContext:function(a){return a.title+a.resolutions.length},hasStoredResolutionForContext:function(b){var a=this,d=a.getStoredResolutionKeyForContext(b),c=a.getStoredResolutions();return Ext.isDefined(c[d])},getStoredResolutionForContext:function(b){var a=this,d=a.getStoredResolutionKeyForContext(b),c=a.getStoredResolutions();return c[d]},storeResolutionForContext:function(b,c){var a=this,d=a.getStoredResolutionKeyForContext(b),e=a.storedResolutions;a.storedResolutions[d]=c},resolveSilently:function(a,b){var d=this,c=d.getStoredResolutionForContext(a);a.resolutions[c].resolve();b()},onUserActionOk:function(h,a,g,b,c,e,d){var f=this;Ext.destroy(d);e.close();if(a.dontAsk){f.storeResolutionForContext(b,a.resolutionOption)}b.resolutions[a.resolutionOption].resolve();c()},onUserActionCancel:function(f,e,a,b,d,c){var g=this;Ext.destroy(c);d.close();a.cancelAction();b()},onUserActionClose:function(e,d,a,b,c){var f=this;Ext.destroy(c);a.cancelAction();b()}},0,0,0,0,['plugin.constraintresolutiongui'],0,[Gnt.plugin,'ConstraintResolutionGui'],0);Ext.cmd.derive('Gnt.plugin.ProjectLines',Sch.plugin.Lines,{innerTpl:'<span class="sch-gantt-project-line-text" style="{Style}">{Text}</span>',labelHeight:25,showHeaderElements:!0,taskStore:null,linesFor:'both',init:function(a){this.taskStore=this.taskStore||a.getTaskStore();this.bindTaskStore(this.taskStore);if(!this.store){this.store=new Ext.data.Store({fields:[{name:'Id'},{name:'ProjectId'},{name:'Date',type:'date'},{name:'Cls',type:'string'},{name:'Text',type:'string'}]})}Sch.plugin.Lines.prototype.init.apply(this,arguments);this.onTaskStoreLoad()},bindTaskStore:function(a){var b={nodeappend:this.onTaskStoreNodeAppend,noderemove:this.onTaskStoreNodeRemove,update:this.onUpdate,load:this.onTaskStoreLoad,scope:this};if(this.taskStore){this.taskStore.un(b)}if(a){a.on(b)}this.taskStore=a},onUpdate:function(f,a,c,b){b=b||[];if(a&&a.isProject&&c==Ext.data.Model.EDIT){var e=Ext.Array.some([a.startDateField,a.endDateField,a.nameField],function(d){return Ext.Array.indexOf(b,d)!==-1});if(e){var d=a.modified&&a.modified.Id||a.getId();this.store.remove(this.getProjectLines(d));this.store.add(this.retrieveProjectLines(a))}}},onTaskStoreNodeAppend:function(b,a){if(a&&a.isProject&&!this.taskStore.isSettingRoot){this.store.add(this.retrieveProjectLines(a))}},onTaskStoreNodeRemove:function(b,a){if(a&&a.isProject){this.store.remove(this.getProjectLines(a.getId()))}},onTaskStoreLoad:function(){this.refreshAllProjects()},refreshAllProjects:function(){this.store.removeAll(!0);this.store.add(this.retrieveProjectLines())},getProjectLines:function(b){var a=[];this.store.each(function(c){if(c.get('ProjectId')==b){a.push(c)}});return a},prepareProjectStartLine:function(a,b){return {Date:a.getStartDate(),Text:'Start of: '+a.getName(),Cls:'sch-gantt-project-line sch-gantt-project-line-start sch-gantt-project-line-'+a.getId(),ProjectId:a.getId(),Style:'margin-top:'+b*this.labelHeight+'px'}},prepareProjectEndLine:function(a,b){return {Date:a.getEndDate(),Text:'End of: '+a.getName(),Cls:'sch-gantt-project-line sch-gantt-project-line-end sch-gantt-project-line-'+a.getId(),ProjectId:a.getId(),Style:'margin-top:'+b*this.labelHeight+'px'}},retrieveProjectLines:function(b){var e=this,d=Ext.isArray(b)?b:b&&[b]||this.taskStore.getProjects(),c=[],f=e.linesFor;for(var a=0;a<d.length;a++){f!='end'&&c.push(e.prepareProjectStartLine(d[a],a));f!='start'&&c.push(e.prepareProjectEndLine(d[a],a))}return c},destroy:function(){this.bindTaskStore(null);this.store.destroy();Sch.plugin.Lines.prototype.destroy.apply(this,arguments)}},0,0,0,0,['plugin.gantt_projectlines'],0,[Gnt.plugin,'ProjectLines'],0);Ext.cmd.derive('Ext.grid.selection.Replicator',Ext.plugin.Abstract,{init:function(a){this.gridListeners=a.on({beforeselectionextend:this.onBeforeSelectionExtend,scope:this,destroyable:!0})},onBeforeSelectionExtend:function(c,a,b){var d=this.columns=[];a.eachColumn(function(e){d.push(e)});return this.replicateSelection(c,a,b)},replicateSelection:function(w,q,e){if(e.columns||q.isColumns){return}var j=this,n=j.columns,h,a,f,i,m,o,b,g,d,p,v,l,k=q.getFirstRowIndex(),r=q.getLastRowIndex(),u=r-k+1,c=[],s,t;h=n.length,d=n[0].getView().dataSource;if(u===1){i=j.getColumnValues(q.view.dataSource.getAt(k))}else {i=new Array(h);if(e.rows<0){c=[d.getAt(k+1),d.getAt(k)]}else {c=[d.getAt(r-1),d.getAt(r)]}c[0]=j.getColumnValues(c[0]);c[1]=j.getColumnValues(c[1]);for(a=0;a<h;a++){s=c[1][a];t=c[0][a];if(!isNaN(s)&&!isNaN(t)){i[a]=Number(s)-Number(t)}}}if(e.rows<0){m=e.end.rowIdx;o=e.start.rowIdx-1;g=-1}else {m=e.start.rowIdx;o=e.end.rowIdx+1;g=1}if(u===1){for(b=m;b!==o;b+=g){p=d.getAt(b);for(a=0;a<h;a++){f=n[a];if(f.dataIndex){p.set(f.dataIndex,i[a])}}}}else {for(b=m;b!==o;b+=g){p=d.getAt(b);v=j.getColumnValues(d.getAt(b-g));for(a=0;a<h;a++){f=n[a];if(f.dataIndex){l=v[a];if(!isNaN(l)){p.set(f.dataIndex,Ext.coerce(Number(l)+i[a],l))}}}}}},getColumnValues:function(e){var b=this.columns,f=b.length,a,c,d=new Array(b.length);for(a=0;a<f;a++){c=b[a];if(c.dataIndex){d[a]=e.get(c.dataIndex)}}return d},destroy:function(){this.gridListeners=Ext.destroy(this.gridListeners);Ext.plugin.Abstract.prototype.destroy.call(this)}},0,0,0,0,['plugin.selectionreplicator'],0,[Ext.grid.selection,'Replicator'],0);Ext.cmd.derive('Gnt.plugin.Replicator',Ext.grid.selection.Replicator,{init:function(a){this.gantt=a;Ext.grid.selection.Replicator.prototype.init.apply(this,arguments)},replicateSelection:function(x,p,h){var b=this;if(h.columns||p.isColumns||this.gantt.isReadOnly()){return}var l=p.getFirstRowIndex(),q=p.getLastRowIndex(),v=q-l+1,g=p.view.dataSource,n,o,k,f,r=b.columns,m=r.length,c,j,e,w,i,s,t,d,a;if(v===1){j=b.getColumnValues(g.getAt(l))}else {j=new Array(m);if(h.rows<0){e=[g.getAt(l+1),g.getAt(l)]}else {e=[g.getAt(q-1),g.getAt(q)]}e[0]=b.getColumnValues(e[0]);e[1]=b.getColumnValues(e[1]);for(a=0;a<m;a++){s=e[1][a];t=e[0][a];if(!isNaN(s)&&!isNaN(t)){j[a]=Number(s)-Number(t)}}}if(h.rows<0){n=h.end.rowIdx;o=h.start.rowIdx-1;k=-1}else {n=h.start.rowIdx;o=h.end.rowIdx+1;k=1}var u=!Ext.getVersion().isGreaterThan('6.2.0');if(u){b.gantt.lockedGrid.view.un('beforerefresh',b.gantt.selModel.onBeforeViewRefresh,b.gantt.selModel);b.gantt.normalGrid.view.un('beforerefresh',b.gantt.selModel.onBeforeViewRefresh,b.gantt.selModel)}if(v===1){for(d=n;d!==o;d+=k){f=g.getAt(d);if(f.isReadOnly()){continue}for(a=0;a<m;a++){c=r[a];if(c.putRawData){c.putRawData(Ext.clone(j[a]),f)}else {if(c.dataIndex){f.set(c.dataIndex,j[a])}}}}}else {for(d=n;d!==o;d+=k){f=g.getAt(d);if(f.isReadOnly()){continue}w=b.getColumnValues(g.getAt(d-k));for(a=0;a<m;a++){c=r[a];if(c.dataIndex){i=w[a];if(!isNaN(i)){if(i instanceof Date){f.set(c.dataIndex,Sch.util.Date.add(i,'ms',j[a]))}else {if(!Ext.isEmpty(i)){f.set(c.dataIndex,Ext.coerce(Number(i)+j[a],i))}}}}}}}if(u){b.gantt.lockedGrid.view.on('beforerefresh',b.gantt.selModel.onBeforeViewRefresh,b.gantt.selModel);b.gantt.normalGrid.view.on('beforerefresh',b.gantt.selModel.onBeforeViewRefresh,b.gantt.selModel)}},getColumnValues:function(a){return Ext.Array.map(this.columns,function(b){if(b.getRawData){return b.getRawData(a)}else {if(b.dataIndex){return a.get(b.dataIndex)}}})}},0,0,0,0,['plugin.gantt_selectionreplicator'],0,[Gnt.plugin,'Replicator'],0);Ext.cmd.derive('Gnt.template.TaskTooltip',Ext.XTemplate,{disableFormats:!0,dateFormat:null,markup:'<h2 class="sch-task-tip-header">{Name}</h2><table class="sch-task-tip"><tr><td>_startText_:</td> <td align="right">{[this.getStartDateString(values)]}</td></tr><tr><td>_endText_:</td> <td align="right">{[this.getEndDateString(values)]}</td></tr><tr><td>_percentText_:</td><td align="right">{[this.getPercentDoneString(values)]}%</td></tr></table>',constructor:function(a){this.markup=a||this.markup;this.markup=this.markup.replace(/_startText_/,this.L('startText'));this.markup=this.markup.replace(/_endText_/,this.L('endText'));this.markup=this.markup.replace(/_percentText_/,this.L('percentText'));this.dateFormat=this.L('format');Ext.XTemplate.prototype.constructor.call(this,this.markup)},getStartDateString:function(a){var b=a._record;var c=a._useBaselineData?b.getBaselineStartDate():b.getStartDate();return a._record.getDisplayStartDate(this.dateFormat,!0,c,!1,a._useBaselineData)},getEndDateString:function(a){var b=a._record;var c=a._useBaselineData?b.getBaselineEndDate():b.getEndDate();return a._record.getDisplayEndDate(this.dateFormat,!0,c,!1,a._useBaselineData)},getPercentDoneString:function(a){var b=a._record;var c=a._useBaselineData?b.getBaselinePercentDone():b.getPercentDone();return Math.round(c)}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.template,'TaskTooltip'],0);Ext.cmd.derive('Gnt.panel.Gantt',Sch.panel.TimelineTreePanel,{alternateClassName:['Sch.gantt.GanttPanel'],viewType:'ganttview',layout:'border',rowLines:!0,syncRowHeight:!1,rowHeight:24,rowHeightStyleSheetNode:null,tooltipTpl:!0,rowNumberColumn:null,topLabelField:null,leftLabelField:null,bottomLabelField:null,rightLabelField:null,weekendsAreWorkdays:!1,skipWeekendsDuringDragDrop:!0,enableTaskDragDrop:!0,enableProgressBarResize:!1,toggleParentTasksOnClick:!0,addRowOnTab:!0,recalculateParents:!0,cascadeChanges:!1,enableBaseline:!1,baselineVisible:!1,enableAnimations:!1,animate:!1,workingTimePlugin:null,todayLinePlugin:null,highlightWeekends:!0,allowParentTaskMove:!0,allowParentTaskDependencies:!0,enableDragCreation:!0,eventRenderer:null,eventRendererScope:null,eventTemplate:null,parentEventTemplate:null,rollupTemplate:null,milestoneTemplate:null,taskBodyTemplate:null,parentTaskBodyTemplate:null,milestoneBodyTemplate:null,autoHeight:null,calendar:null,crudManager:null,taskStore:null,dependencyStore:null,resourceStore:null,assignmentStore:null,columnLines:!1,dndValidatorFn:Ext.emptyFn,createValidatorFn:Ext.emptyFn,taskResizeHandles:'both',resizeValidatorFn:Ext.emptyFn,resizeConfig:null,progressBarResizeConfig:null,dragDropConfig:null,createConfig:null,autoFitOnLoad:!1,showRollupTasks:!1,enableConstraintsResolutionGui:!0,showProjectLines:!0,projectLinesConfig:null,constraintResolutionGuiConfig:null,scrollTaskIntoViewOnClick:!1,enableTaskReordering:!0,refreshLockedTreeOnDependencyUpdate:!1,_lockedDependencyListeners:null,_lastSpreadsheetSelection:null,earlyStartColumn:null,earlyEndColumn:null,lateStartColumn:null,lateEndColumn:null,earlyDatesListeners:null,lateDatesListeners:null,slackListeners:null,refreshTimeout:100,ganttEditingPlugin:null,simpleCascadeThreshold:30,forceDefineTimeSpanByStore:!0,keepSelection:!0,setShowRollupTasks:function(a){this.showRollupTasks=a;this.getSchedulingView().setShowRollupTasks(a)},onCalendarSet:function(b,a){if(this.needToTranslateOption('weekendsAreWorkdays')){a.setWeekendsAreWorkDays(this.weekendsAreWorkdays)}if(this.workingTimePlugin){this.workingTimePlugin.bindCalendar(a);this.timeAxisViewModel.setCalendar(a)}},initStores:function(){if(this.crudManager){if(this.crudManager&&!(this.crudManager instanceof Gnt.data.CrudManager)){this.crudManager=new Gnt.data.CrudManager(Ext.clone(this.crudManager))}if(!this.taskStore){this.taskStore=this.crudManager.getTaskStore()}if(!this.dependencyStore){this.dependencyStore=this.crudManager.getDependencyStore()}if(!this.resourceStore){this.resourceStore=this.crudManager.getResourceStore()}if(!this.assignmentStore){this.assignmentStore=this.crudManager.getAssignmentStore()}}if(!this.taskStore){Ext.Error.raise('You must specify a taskStore config.')}var a=Ext.StoreMgr.lookup(this.taskStore);if(!a){Ext.Error.raise('You have provided an incorrect taskStore identifier')}if(!(a instanceof Gnt.data.TaskStore)){Ext.Error.raise('A `taskStore` should be an instance of `Gnt.data.TaskStore` (or of a subclass)')}this.mon(a,{calendarset:this.onCalendarSet,scope:this});this.mon(a,{beforeindentationchange:this.onBeforeBatchStoreUpdate,indentationchange:this.onBatchStoreUpdate,beforebatchremove:this.onBeforeBatchStoreUpdate,batchremove:this.onBatchStoreUpdate,scope:this});Ext.apply(this,{store:a,taskStore:a});var d=a.calendar;if(this.dependencyStore){this.dependencyStore=Ext.StoreMgr.lookup(this.dependencyStore);a.setDependencyStore(this.dependencyStore)}else {this.dependencyStore=a.dependencyStore}this.dependencyStore.allowParentTaskDependencies=this.allowParentTaskDependencies;if(!(this.dependencyStore instanceof Gnt.data.DependencyStore)){Ext.Error.raise('The Gantt dependency store should be a Gnt.data.DependencyStore, or a subclass thereof.')}var c=this.resourceStore?Ext.StoreMgr.lookup(this.resourceStore):a.getResourceStore();if(!(c instanceof Gnt.data.ResourceStore)){Ext.Error.raise('A `ResourceStore` should be an instance of `Gnt.data.ResourceStore` (or of a subclass)')}var b=this.assignmentStore?Ext.StoreMgr.lookup(this.assignmentStore):a.getAssignmentStore();if(!(b instanceof Gnt.data.AssignmentStore)){Ext.Error.raise('An `assignmentStore` should be an instance of `Gnt.data.AssignmentStore` (or of a subclass)')}this.bindAssignmentStore(b,!0);this.bindResourceStore(c,!0);if(this.needToTranslateOption('weekendsAreWorkdays')){d.setWeekendsAreWorkDays(this.weekendsAreWorkdays)}},onBeforeBatchStoreUpdate:function(){this.taskStore.suspendEvent('refresh','add','insert','remove');this.taskStore.filterUpdateSuspended=!0;var b=this.getSchedulingView().getNavigationModel().getPosition();if(b){this._lastNavigationPosition=b.clone()}var c=this.getSelectionModel(),a=c.getSelected();if(a&&a.isCells&&this.keepSelection){this._lastCellSelectedRange=c.getSelected().getRange();var d=[];a.eachRow(function(a){d.push(a)});this._lastCellSelectedRecords=d}if(this.bufferedRenderer){this.suspendLayouts()}},onBatchStoreUpdate:function(){var d=this.getTaskStore();d.resumeEvent('refresh','add','insert','remove');d.filterUpdateSuspended=!1;var c=this._lastNavigationPosition;if(c){if(c.record&&d.getNodeById(c.record.getId())){this.getSchedulingView().getNavigationModel().setPosition(c)}delete this._lastNavigationPosition}this.refreshViews();if(this.bufferedRenderer){this.resumeLayouts(!0);d.reApplyFilter()}var e=this._lastCellSelectedRecords;if(e&&e.length){var i=this.lockedGrid.view;var a=-1,g,b;for(var f=0,j=e.length;f<j;f++){b=i.indexOf(e[f]);if(b!==-1){if(a===-1){a=g=b}else {if(b-a>1){break}else {a=b}}}else {if(a!==-1){break}}}if(a!==-1){a=Math.min(i.getNodes().length-1,a);var h=this._lastCellSelectedRange;this.getSelectionModel().selectCells([h[0][0],g],[h[1][0],a])}this._lastCellSelectedRecords=null;this._lastCellSelectedRange=null}},initComponent:function(){this.autoHeight=!1;this.initStores();if(this.needToTranslateOption('cascadeChanges')){this.setCascadeChanges(this.cascadeChanges)}if(this.needToTranslateOption('recalculateParents')){this.setRecalculateParents(this.recalculateParents)}if(this.needToTranslateOption('skipWeekendsDuringDragDrop')){this.setSkipWeekendsDuringDragDrop(this.skipWeekendsDuringDragDrop)}this.dependencyViewConfig=this.dependencyViewConfig||{};Ext.applyIf(this.dependencyViewConfig,{enableDependencyDragDrop:this.enableDependencyDragDrop});this.normalViewConfig=this.normalViewConfig||{};Ext.applyIf(this.normalViewConfig,{taskStore:this.taskStore,dependencyStore:this.dependencyStore,snapRelativeToEventStartDate:this.snapRelativeToEventStartDate,enableDependencyDragDrop:this.enableDependencyDragDrop,enableTaskDragDrop:this.enableTaskDragDrop,enableProgressBarResize:this.enableProgressBarResize,enableDragCreation:this.enableDragCreation,allowParentTaskMove:this.allowParentTaskMove,allowParentTaskDependencies:this.allowParentTaskDependencies,toggleParentTasksOnClick:this.toggleParentTasksOnClick,taskResizeHandles:this.taskResizeHandles,enableBaseline:this.baselineVisible||this.enableBaseline,leftLabelField:this.leftLabelField,rightLabelField:this.rightLabelField,topLabelField:this.topLabelField,bottomLabelField:this.bottomLabelField,eventTemplate:this.eventTemplate,parentEventTemplate:this.parentEventTemplate,milestoneTemplate:this.milestoneTemplate,rollupTemplate:this.rollupTemplate,taskBodyTemplate:this.taskBodyTemplate,parentTaskBodyTemplate:this.parentTaskBodyTemplate,milestoneBodyTemplate:this.milestoneBodyTemplate,resizeConfig:this.resizeConfig,dragDropConfig:this.dragDropConfig,showRollupTasks:this.showRollupTasks});if(this.topLabelField||this.bottomLabelField){this.addCls('sch-gantt-topbottom-labels '+(this.topLabelField?'sch-gantt-top-label':''));this.normalViewConfig.rowHeight=52}this.configureFunctionality();this.mon(this.taskStore,{beforecascade:this.onBeforeCascade,cascade:this.onAfterCascade,scope:this});if(this.tooltipTpl===!0){this.tooltipTpl=new Gnt.template.TaskTooltip()}Sch.panel.TimelineTreePanel.prototype.initComponent.apply(this,arguments);var a=this.getSelectionModel();if(this.keepSelection&&a instanceof Ext.grid.selection.SpreadsheetModel){this.mon(this.taskStore,{remove:this.tryRestoreSelectionAfterRemove,priority:1,scope:this});if(Ext.getVersion().isLessThan('6.0.1')||Ext.getVersion().isGreaterThan('6.2.0')){this.mon(this.taskStore,{remove:this.storeSelectionBeforeRemove,priority:2001,scope:this})}this.mon(this.taskStore,{beforebatchremove:this.storeSelectionBeforeRemove,batchremove:this.tryRestoreSelectionAfterBatchRemove,scope:this})}if(a instanceof Ext.grid.selection.SpreadsheetModel){var f=this.lockedGrid;var e=a.applyExtensible;a.applyExtensible=function(b){var a=e.apply(this,arguments);f.view.el.appendChild(a.handle);this.applyExtensible=e;return a}}if(this.autoFitOnLoad){var c=typeof this.autoFitOnLoad==='object'?this.autoFitOnLoad:{};this.normalGrid.on('afterlayout',function(){if(this.store.getCount()){this.zoomToFit(null,c)}this.mon(this.store,'load',function(){this.zoomToFit(null,c)},this)},this,{single:!0})}this.bodyCls=(this.bodyCls||'')+' sch-ganttpanel-container-body';var b=this.getSchedulingView();this.relayEvents(b,['taskclick','taskdblclick','taskcontextmenu','beforetaskresize','taskresizestart','partialtaskresize','beforetaskresizefinalize','aftertaskresize','beforeprogressbarresize','progressbarresizestart','afterprogressbarresize','beforetaskdrag','taskdragstart','beforetaskdropfinalize','beforedragcreate','dragcreatestart','beforedragcreatefinalize','dragcreateend','afterdragcreate','taskdrop','aftertaskdrop','labeledit_beforestartedit','labeledit_beforecomplete','labeledit_complete','scheduleclick','scheduledblclick','schedulecontextmenu','rowlongpress','containerlongpress']);this.relayEvents(this.lockedGrid.getView(),['rowlongpress','containerlongpress']);if(this.addRowOnTab){var d=this.lockedGrid.getView();d.onRowExit=Ext.Function.createInterceptor(d.onRowExit,this.beforeRowExit,this)}this.registerRenderer(b.columnRenderer,b);var g=' sch-ganttpanel sch-horizontal ';this.addCls(g);if(this.eventBorderWidth<1){this.addCls('sch-gantt-no-task-border')}if(this.baselineVisible){this.showBaseline()}this.on('add',function(a,b){if(b instanceof Ext.Editor){a.lockedGrid.suspendLayouts();a.suspendLayouts();a.lockedGrid.add(b);a.resumeLayouts();a.lockedGrid.resumeLayouts()}});this.on('viewready',this.onMyViewReady,this);this.on({dragcreatestart:function(){var b=this.findPlugin('scheduler_pan');var a=this.getSchedulingView().getScrollable();if(b){b.disable()}a.setDisabled&&a.setDisabled(!0)},afterdragcreate:function(){var b=this.findPlugin('scheduler_pan');var a=this.getSchedulingView().getScrollable();if(b){b.enable()}a.setDisabled&&a.setDisabled(!1)},scope:this});if(this.scrollTaskIntoViewOnClick){this.lockedGrid.on('itemclick',this.onRowClicked,this)}Ext.Array.each(this.lockedGrid.plugins||[],function(a){if(Sch.plugin&&Sch.plugin.TreeCellEditing&&a instanceof Sch.plugin.TreeCellEditing){this.ganttEditingPlugin=a;return !1}},this)},onRender:function(){this.setRowHeight(this.rowHeight);Sch.panel.TimelineTreePanel.prototype.onRender.apply(this,arguments)},tryRestoreSelectionAfterRemove:function(f,m,k){var e=this.getSelectionModel();var a=this._lastSpreadsheetSelection||e.selected;this._lastSpreadsheetSelection=null;if(!a||f.getCount()===0){return}var j=this.lockedGrid.getView();if(a.isCells){var b=a.getRange();if(b[1][0]===-1){return}var i=j.getNodes().length-1;e.selectCells([b[0][0],Math.min(i,b[0][1])],[b[1][0],Math.min(i,b[1][1])])}else {if(a.isRows){var d=a.getRecords();if(d.length){var c=!1;for(var g=0,l=d.length;g<l;g++){if(c=c||f.indexOf(d[g])!==-1){break}}if(!c){var h=j.getRecord(Math.min(k,f.getCount()-1));h&&e.select(h)}}}}},storeSelectionBeforeRemove:function(){var a=this.getSelectionModel().getSelected();if(!a){return}a=a.clone();if(a.isRows){var b=a.getRecords();if(b.length){a._lastRecordIndex=this.getView().indexOf(b[b.length-1])}}this._lastSpreadsheetSelection=a},tryRestoreSelectionAfterBatchRemove:function(c,k){var a=this._lastSpreadsheetSelection;this._lastSpreadsheetSelection=null;this.getSelectionModel().onStoreRemove(c,k,null,!1);if(!a||c.getCount()===0){return}var i=this.getSelectionModel();var j=this.lockedGrid.getView();if(a.isCells){var b=a.getRange();if(b[1][0]===-1){return}var h=j.getNodes().length;i.selectCells([b[0][0],Math.min(h,b[0][1])],[b[1][0],Math.min(h,b[1][1])])}else {if(a.isRows){var f=a.getRecords();var d=!1;for(var e=0,l=f.length;e<l;e++){if(d=d||c.indexOf(f[e])!==-1){break}}if(!d){var g=j.getRecord(Math.min(a._lastRecordIndex,c.getCount()-1));g&&i.select(g)}}}},getTreeViewDragDropPlugin:function(){var c=this.lockedGrid.view.plugins||[];var a;for(var b=0;b<c.length;b++){a=c[b];if(a instanceof Ext.tree.plugin.TreeViewDragDrop){return a}}},doSetTreeViewDragDropDisabled:function(b){var a=this.getTreeViewDragDropPlugin();if(a){if(b){a.disable()}else {a.enable()}}},setTreeViewDragDropDisabled:function(a){var c=this;var b=this.lockedGrid.view;if(b.rendered){c.doSetTreeViewDragDropDisabled(a)}else {b.on('render',function(){c.doSetTreeViewDragDropDisabled(a)})}},restoreSpreadsheetSelectionModel:function(){var a=this.getSelectionModel(),b=this.getTreeViewDragDropPlugin();if(a.isLocked()&&b&&!b.disabled){a.setLocked(!1);this.setTreeViewDragDropDisabled(!0);this.lockedGrid.view.on('cellmousedown',a.handleMouseDown,a);a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0})}},setReadOnly:function(a){Sch.panel.TimelineTreePanel.prototype.setReadOnly.apply(this,arguments);this.fireEvent('setreadonly',this,a)},getTimeSpanDefiningStore:function(){return this.taskStore},bindAutoTimeSpanListeners:function(){if(!this.autoFitOnLoad){Sch.panel.TimelineTreePanel.prototype.bindAutoTimeSpanListeners.apply(this,arguments)}},onBeforeCascade:function(){this.lockedGrid.view.onUpdate=this.normalGrid.view.onUpdate=Ext.emptyFn;this.suspendLayouts()},onAfterCascade:function(i,a){var d=this;this.lockedGrid.view.onUpdate=this.lockedGrid.view.self.prototype.onUpdate;this.normalGrid.view.onUpdate=this.normalGrid.view.self.prototype.onUpdate;d.resumeLayouts();if(a.nbrAffected>0){var e=this.lockedGrid.getView();if(a.nbrAffected<=d.simpleCascadeThreshold){var g=this.getView();var b=this.getSchedulingView();b.suspendEvents(!0);for(var h in a.affected){var f=a.affected[h];var c=e.store.indexOf(f);if(c>=0){g.refreshNode(c)}}b.resumeEvents();return}this.refreshViews()}},bindFullRefreshListeners:function(c){var a=this;var b=function(){if(a.refreshTimer){return}a.refreshTimer=setTimeout(function(){a.refreshTimer=null;a.redrawColumns([c])},a.refreshTimeout)};c.mon(this.taskStore,{nodeappend:b,nodeinsert:b,noderemove:b,scope:this})},bindSequentialDataListeners:function(a){var b=this.lockedGrid.view;var c=this.taskStore;a.mon(c,{nodeappend:function(e,d){if(!c.fillCount){this.updateAutoGeneratedCells(a,b.store.indexOf(d.parentNode))}},nodeinsert:function(d,e,c){this.updateAutoGeneratedCells(a,b.store.indexOf(c))},noderemove:function(e,d,c){if(!c){this.updateAutoGeneratedCells(a,b.store.indexOf(d))}},nodemove:function(d,c){this.updateAutoGeneratedCells(a,b.store.indexOf(c))},scope:this})},bindSlackListeners:function(){var a=Ext.Function.createBuffered(this.updateSlackColumns,this.refreshTimeout,this,[]);this.slackListeners=this.mon(this.taskStore,{resetearlydates:a,resetlatedates:a,scope:this,destroyable:!0})},bindEarlyDatesListeners:function(){var a=Ext.Function.createBuffered(this.updateEarlyDateColumns,this.refreshTimeout,this,[]);this.earlyDatesListeners=this.mon(this.taskStore,{resetearlydates:a,scope:this,destroyable:!0})},bindLateDatesListeners:function(){var a=Ext.Function.createBuffered(this.updateLateDateColumns,this.refreshTimeout,this,[]);this.lateDatesListeners=this.mon(this.taskStore,{resetlatedates:a,scope:this,destroyable:!0})},startEditScrollToEditor:function(){var a=this.ganttEditingPlugin;!Sch.disableOverrides&&a&&a.on('beforeedit',function(b,a){a.column.getEl().scrollIntoView(this.lockedGrid.getHeaderContainer().getEl())},this,{single:!0})},beforeRowExit:function(d,b,c,e){if(!(d instanceof Ext.event.Event)){e=c;c=b;b=d}if(e&&!c){var a=this.lockedGrid.getView();var f=a.getRecord(b);var g=a.saveFocusState;a.saveFocusState=function(){return Ext.emptyFn};f.addTaskBelow({leaf:!0});a.saveFocusState=g}},needToTranslateOption:function(a){return this.hasOwnProperty(a)||this.self.prototype.hasOwnProperty(a)&&this.self!=Gnt.panel.Gantt},resolveTaskRecord:function(a){return this.getSchedulingView().resolveTaskRecord(a)},fitTimeColumns:function(){this.getSchedulingView().fitColumns()},getResourceStore:function(){return this.getTaskStore().getResourceStore()},getAssignmentStore:function(){return this.getTaskStore().getAssignmentStore()},getCrudManager:function(){return this.crudManager},getTaskStore:function(){return this.taskStore},getEventStore:function(){return this.taskStore},getDependencyStore:function(){return this.dependencyStore},onDragDropStart:function(){if(this.tip){this.tip.hide();this.tip.disable()}},onDragDropEnd:function(){if(this.tip){this.tip.enable()}},configureFunctionality:function(){var a=this.plugins=[].concat(this.plugins||[]);if(this.enableConstraintsResolutionGui&&!Ext.Array.findBy(a,function(a){return a instanceof Gnt.plugin.ConstraintResolutionGui||a.ptype=='constraintresolutiongui'})){a.push(Ext.apply(this.constraintResolutionGuiConfig||{},{pluginId:'constraintresolutiongui',ptype:'constraintresolutiongui'}))}if(this.showProjectLines){a.push(Ext.apply({pluginId:'gantt_projectlines',ptype:'gantt_projectlines'},this.projectLinesConfig))}if(this.enableTaskReordering){if(!this.hasOwnProperty('lockedViewConfig')){this.lockedViewConfig=Ext.apply({},this.lockedViewConfig||{})}this.lockedViewConfig.plugins=[].concat(this.lockedViewConfig.plugins||[]);var c=this.lockedViewConfig.plugins;var b;Ext.Array.each(c,function(a){if(a==='treeviewdragdrop'||a.ptype==='treeviewdragdrop'){b=!0}});if(!b){var d=typeof this.enableTaskReordering!=='boolean'?this.enableTaskReordering:{ptype:'treeviewdragdrop',pluginId:'bryntum_treedragdrop',nodeHighlightOnDrop:!1,nodeHighlightOnRepair:!1,containerScroll:!0,dragZone:{onBeforeDrag:Ext.Function.bind(this.onBeforeTaskReorder,this),beforeDragOver:Ext.Function.bind(this.onBeforeTaskReorderOver,this)},dropZone:{onNodeDrop:this.onTaskReorder}};c.push(d)}}},getWorkingTimePlugin:function(){return this.workingTimePlugin},registerLockedDependencyListeners:function(){var a=this;var b=this.getDependencyStore();this._lockedDependencyListeners=this._lockedDependencyListeners||{load:function(){var b=a.getTaskStore();b.resetEarlyDates();b.resetLateDates();a.lockedGrid.getView().refreshView()},clear:function(){var b=a.getTaskStore();b.resetEarlyDates();b.resetLateDates();a.lockedGrid.getView().refreshView()},add:function(c,b){a.refreshTasksForDependencies(b)},update:function(g,b,f){if(f!=Ext.data.Model.COMMIT){var e=a.lockedGrid.view;if(b.previous[b.fromField]){var c=a.taskStore.getModelById(b.previous[b.fromField]);if(c){e.refreshNode(c)}}if(b.previous[b.toField]){var d=a.taskStore.getModelById(b.previous[b.toField]);if(d){e.refreshNode(d)}}}a.refreshTasksForDependencies([b])},remove:function(c,b){a.refreshTasksForDependencies(b)}};this.mun(b,this._lockedDependencyListeners);this.mon(b,this._lockedDependencyListeners)},getDependencyTasks:function(d){var a=d.getSourceTask(this.taskStore),b=d.getTargetTask(this.taskStore),c=[];if(a&&a.getTreeStore()){c.push(a)}if(b&&b.getTreeStore()){c.push(b)}return c},refreshLockedViewRows:function(b){var c=this.lockedGrid.view;for(var a=0;a<b.length;a++){c.refreshNode(b[a])}},refreshTasksForDependencies:function(d){var c=this,a={},b=[];Ext.Array.each(d,function(g){var f=c.getDependencyTasks(g);for(var e=0;e<f.length;e++){if(!a[f[e].getId()]){a[f[e].getId()]=1;b.push(f[e])}}c.refreshLockedViewRows(b)})},showBaseline:function(){this.addCls('sch-ganttpanel-showbaseline')},hideBaseline:function(){this.removeCls('sch-ganttpanel-showbaseline')},toggleBaseline:function(){this.el&&this.el.toggleCls('sch-ganttpanel-showbaseline')},zoomToFit:function(a,b){b=Ext.apply({adjustStart:1,adjustEnd:1},b);if(!a&&this.taskStore.isTreeFiltered()){a=this.getSchedulingView().store.getRange()}var c=a?this.taskStore.getTimeSpanForTasks(a):this.taskStore.getTotalTimeSpan();if(this.zoomToSpan(c,b)===null){if(!a){this.fitTimeColumns()}}},getCascadeChanges:function(){return this.taskStore.cascadeChanges},setCascadeChanges:function(a){this.taskStore.cascadeChanges=a},getRecalculateParents:function(){return this.taskStore.recalculateParents},setRecalculateParents:function(a){this.taskStore.recalculateParents=a},setSkipWeekendsDuringDragDrop:function(a){this.taskStore.skipWeekendsDuringDragDrop=this.skipWeekendsDuringDragDrop=a},getSkipWeekendsDuringDragDrop:function(){return this.taskStore.skipWeekendsDuringDragDrop},bindResourceStore:function(b,d){var a=this;var c={scope:a,update:a.onResourceStoreUpdate,datachanged:a.onResourceStoreDataChanged};if(!d&&a.resourceStore){if(b!==a.resourceStore&&a.resourceStore.autoDestroy){a.resourceStore.destroy()}else {a.mun(a.resourceStore,c)}if(!b){a.resourceStore=null}}if(b){b=Ext.data.StoreManager.lookup(b);a.mon(b,c);this.taskStore.setResourceStore(b)}a.resourceStore=b;if(b&&!d){a.refreshViews()}},bindAssignmentStore:function(b,d){var a=this;var c={scope:a,beforetaskassignmentschange:a.onBeforeSingleTaskAssignmentChange,taskassignmentschanged:a.onSingleTaskAssignmentChange,update:a.onAssignmentStoreUpdate,datachanged:a.onAssignmentStoreDataChanged};if(!d&&a.assignmentStore){if(b!==a.assignmentStore&&a.assignmentStore.autoDestroy){a.assignmentStore.destroy()}else {a.mun(a.assignmentStore,c)}if(!b){a.assignmentStore=null}}if(b){b=Ext.data.StoreManager.lookup(b);a.mon(b,c);this.taskStore.setAssignmentStore(b)}a.assignmentStore=b;if(b&&!d){a.refreshViews()}},onResourceStoreUpdate:function(b,a){Ext.Array.each(a.getTasks(),function(d){var c=this.lockedGrid.view.store.indexOf(d);if(c>=0){this.getView().refreshNode(c)}},this)},onResourceStoreDataChanged:function(){if(this.taskStore.getRootNode().childNodes.length>0){this.refreshViews()}},onAssignmentStoreDataChanged:function(){if(this.taskStore.getRootNode().childNodes.length>0){this.refreshViews()}},onAssignmentStoreUpdate:function(d,c){var b=c.getTask();if(b){var a=this.lockedGrid.view.store.indexOf(b);if(a>=0){this.getView().refreshNode(a)}}},onBeforeSingleTaskAssignmentChange:function(){this.assignmentStore.un('datachanged',this.onAssignmentStoreDataChanged,this)},onSingleTaskAssignmentChange:function(d,c){this.assignmentStore.on('datachanged',this.onAssignmentStoreDataChanged,this);if(this.rendered){var a=this.taskStore.getModelById(c);if(a&&a.parentNode){var b=this.taskStore.indexOf(a);if(b>=0){this.getView().refreshNode(b)}}}},updateAutoGeneratedCells:function(e,b){var a=this.lockedGrid.view;var h=a.all.startIndex;var d=a.all.endIndex;if(b<0||b>d){return}for(var c=Math.max(h,b);c<=d;c++){var g=a.store.getAt(c);var f=this.getCellDom(a,g,e);if(f){f.firstChild.innerHTML=e.renderer(null,null,g)}}},getCellDom:function(d,c,b){var a=d.getNode(c,!0);return a&&Ext.fly(a).down(b.getCellSelector(),!0)},redrawCell:function(e,a,c,d,b){if(!this.isDestroyed){var f=this.lockedGrid.view;var g=this.getCellDom(f,a,e);if(g){var h=[];if(c===undefined){c=this.taskStore.indexOf(a)}if(d===undefined){d=f.indexOf(a)}if(b===undefined){b=e.getIndex()}f.renderCell(e,a,c,d,b,h);var i=Ext.DomHelper.createDom(h.join(''));Ext.fly(g).down('.x-grid-cell-inner').syncContent(i)}}},redrawColumns:function(b){if(b.length&&!this.isDestroyed){var c=this.lockedGrid.view;for(var a=c.all.startIndex;a<=c.all.endIndex;a++){var f=c.store.getAt(a);for(var d=0,g=b.length;d<g;d++){var e=b[d];this.redrawCell(e,f,a,a,e.getIndex())}}}},updateSlackColumns:function(){if(this.slackColumn){this.redrawColumns([this.slackColumn])}},updateEarlyDateColumns:function(){var a=[];if(this.earlyStartColumn){a.push(this.earlyStartColumn)}if(this.earlyEndColumn){a.push(this.earlyEndColumn)}if(a.length){this.redrawColumns(a)}},updateLateDateColumns:function(){var a=[];if(this.lateStartColumn){a.push(this.lateStartColumn)}if(this.lateEndColumn){a.push(this.lateEndColumn)}if(a.length){this.redrawColumns(a)}},onMyViewReady:function(){this.on('beforeedit',this.onBeforeEdit,this);this.setupColumnListeners();this.mon(this.taskStore,{'nodestore-datachange-start':this.onFilterChange,'filter-clear':this.onFilterChange,scope:this});var b=this.down('splitter');if(b){b.on('dragend',function(){this.saveState()},this,{delay:10})}if(this.ganttEditingPlugin){if((Ext.isIE10m||Ext.isFirefox)&&Ext.getVersion().isLessThan('6.0.2')){this.applyIETabbingPatch()}this.ganttEditingPlugin.on({editingstart:this.onEditingStart,edit:this.onAfterEdit,canceledit:this.onAfterEdit})}var a=this.getTreeViewDragDropPlugin();if(a&&this.getSelectionModel() instanceof Ext.grid.selection.SpreadsheetModel){var c=this.lockedGrid.getView();c.getEl().on('mouseover',function(c,b){if(Ext.fly(b).hasCls('sch-gantt-column-dragdrop')){a.enable()}else {if(!a.dragZone.dragging){a.disable()}}},this,{delegate:c.getCellSelector()})}},applyIETabbingPatch:function(){var a=function(c,b){var a=b.column;a.preventUpdate=a._oldPreventUpdate;this.redrawCell(a,b.record)};var b=function(c,b){var a=b.column;a._oldPreventUpdate=a.preventUpdate;a.preventUpdate=!0};this.ganttEditingPlugin.on({edit:a,canceledit:a,scope:this});this.ganttEditingPlugin.on({beforeedit:b,priority:-50})},onBeforeEdit:function(c,a){var b=a.column;return !this.isReadOnly()&&a.record.isEditable(a.field)&&(!b.isEditable||b.isEditable(a.record))},onEditingStart:function(c,b){var a=b.field;if(a.originalInstantUpdate){a.setInstantUpdate(!0)}},onAfterEdit:function(c,b){var a=b.column.getEditor();if(a.setInstantUpdate){a.setInstantUpdate(!1)}},onFilterChange:function(){this.getSelectionModel().deselectAll()},setupColumnListeners:function(){var b=this;var a=this.lockedGrid.getHeaderContainer();a.on('add',this.onLockedColumnAdded,this);a.items.each(function(c){b.onLockedColumnAdded(a,c)})},onLockedColumnAdded:function(c,b){var a=Gnt.column;if(a){if(a.WBS&&b instanceof a.WBS||a.Sequence&&b instanceof a.Sequence){this.bindSequentialDataListeners(b)}else {if(a.Dependency&&b instanceof a.Dependency&&b.useSequenceNumber){this.bindFullRefreshListeners(b)}else {if(a.EarlyStartDate&&b instanceof a.EarlyStartDate){this.earlyStartColumn=b}else {if(a.EarlyEndDate&&b instanceof a.EarlyEndDate){this.earlyEndColumn=b}else {if(a.LateStartDate&&b instanceof a.LateStartDate){this.lateStartColumn=b}else {if(a.LateEndDate&&b instanceof a.LateEndDate){this.lateEndColumn=b}else {if(a.Slack&&b instanceof a.Slack){this.slackColumn=b}}}}}}}}if(!this.slackListeners&&this.slackColumn){this.bindSlackListeners()}if(!this.earlyDatesListeners&&(this.earlyStartColumn||this.earlyEndColumn)){this.bindEarlyDatesListeners()}if(!this.lateDatesListeners&&(this.lateStartColumn||this.lateEndColumn)){this.bindLateDatesListeners()}},getState:function(){var b=this,a=Sch.panel.TimelineTreePanel.prototype.getState.apply(this,arguments);a.lockedWidth=b.lockedGrid.getWidth();return a},applyState:function(a){var b=this;Sch.panel.TimelineTreePanel.prototype.applyState.apply(this,arguments);if(a&&a.lockedWidth){b.lockedGrid.setWidth(a.lockedWidth)}},completeEdit:function(){this.ganttEditingPlugin&&this.ganttEditingPlugin.completeEdit()},cancelEdit:function(){this.ganttEditingPlugin&&this.ganttEditingPlugin.cancelEdit()},setRowHeight:function(a){var c='#'+this.getId()+' .x-grid-cell';var b=c+'{ height:'+a+'px; }';if(!this.rowHeightStyleSheetNode){this.rowHeightStyleSheetNode=Ext.util.CSS.createStyleSheet(b).ownerNode}else {this.rowHeightStyleSheetNode.innerHTML=b}this.getSchedulingView().setRowHeight(a)},getTaskEditor:function(d){var c=this.plugins;for(var b=0,e=c.length;b<e;b++){var a=c[b];if(a.isTaskEditor&&(!d||a.matchFilters(d))){return a}}},onRowClicked:function(b,a){this.getSchedulingView().scrollEventIntoView(a,!1,!1)},onBeforeTaskReorder:function(c,b){var a=b.record;this._reorderingTask=a;return !this.isReadOnly()&&a&&!a.isReadOnly()},onBeforeTaskReorderOver:function(b,d){var c=b.getTargetFromEvent(d);if(c){var a=b.view.getRecord(c);return a!==this._reorderingTask&&!a.isReadOnly()}},onTaskReorder:function(h,e,i,g){var d=e.view.store;var b=g.records;var a={};var f=e.view.up('ganttpanel');f.suspendRefresh();Ext.Array.each(b,function(b){a[b.parentNode.id]=b.parentNode});d.suspendAutoRecalculateParents++;this.self.prototype.onNodeDrop.apply(this,arguments);d.suspendAutoRecalculateParents--;a[b[0].parentNode.id]=b[0].parentNode;var c=Ext.Object.getValues(a);c.sort(function(a,b){return a.data.depth>b.data.depth?-1:1});Ext.Array.each(c,function(a){a.refreshCalculatedParentNodeData()});f.resumeRefresh(!0)},getSelectedRows:function(){var b=this.getSelectionModel().getSelected();var a=[];if(Ext.grid.selection.Cells&&b instanceof Ext.grid.selection.Cells){b.eachRow(function(b){a.push(b)})}else {a=this.getSelectionModel().getSelection()}return a},destroy:function(){if(this.destroyStores){var a=this.taskStore.calendarManager;this.assignmentStore&&this.assignmentStore.destroy();this.assignmentStore=null;this.resourceStore&&this.resourceStore.destroy();this.resourceStore=null;this.taskStore&&this.taskStore.destroy();this.taskStore=null;this.dependencyStore&&this.dependencyStore.destroy();this.dependencyStore=null;this.dependencyStore&&this.dependencyStore.destroy();this.dependencyStore=null;a&&a.destroy()}if(this.rowHeightStyleSheetNode){this.rowHeightStyleSheetNode.parentNode.removeChild(this.rowHeightStyleSheetNode);this.rowHeightStyleSheetNode=null}clearTimeout(this.refreshTimer);Sch.panel.TimelineTreePanel.prototype.destroy.apply(this,arguments)},collapseAll:function(){this.taskStore.suspendEvent('refresh','add','insert','remove');this.lockedGrid.getView().blockRefresh=this.normalGrid.getView().blockRefresh=!0;Sch.panel.TimelineTreePanel.prototype.collapseAll.apply(this,arguments);this.lockedGrid.getView().blockRefresh=this.normalGrid.getView().blockRefresh=!1;this.taskStore.resumeEvent('refresh','add','insert','remove');this.refreshViews()},expandAll:function(){this.lockedGrid.getView().blockRefresh=this.normalGrid.getView().blockRefresh=!0;Sch.panel.TimelineTreePanel.prototype.expandAll.apply(this,arguments);this.lockedGrid.getView().blockRefresh=this.normalGrid.getView().blockRefresh=!1;this.refreshViews()},getCalendar:function(){return this.getTaskStore().getCalendar()}},0,['ganttpanel'],['component','box','container','panel','tablepanel','treepanel','timelinetree','ganttpanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'treepanel':!0,'timelinetree':!0,'ganttpanel':!0},['widget.ganttpanel'],[[Gnt.view.dependency.Mixin.prototype.mixinId||Gnt.view.dependency.Mixin.$className,Gnt.view.dependency.Mixin]],[Gnt.panel,'Gantt',Sch.gantt,'GanttPanel'],0);Ext.cmd.derive('CGA.template.ExternalDueDateTemplate',Ext.XTemplate,{disableFormats:!0,markup:'<div data-qtip="__EXTERNALDUEDATE__:  {date}" data-qalign="b-tl" class="cga-externalduedate-indicator {cls}" style="{dir}:{offset}px"></div>',constructor:function(){this.markup=this.markup.replace(/__EXTERNALDUEDATE__/,this.L('ExternalDueDate'));Ext.XTemplate.prototype.constructor.call(this,this.markup)}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.template,'ExternalDueDateTemplate'],0);Ext.cmd.derive('CGA.template.InternalDueDateTemplate',Ext.XTemplate,{disableFormats:!0,markup:'<div data-qtip="__INTERNALDUEDATE__:  {date}" data-qalign="b-tl" class="cga-internalduedate-indicator {cls}" style="{dir}:{offset}px"></div>',constructor:function(){this.markup=this.markup.replace(/__INTERNALDUEDATE__/,this.L('InternalDueDate'));Ext.XTemplate.prototype.constructor.call(this,this.markup)}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.template,'InternalDueDateTemplate'],0);Ext.cmd.derive('CGA.view.GanttView',Gnt.view.Gantt,{columnRenderer:function(aa,_,a){var h=a.getStartDate(),L=this.timeAxis,g=Sch.util.Date,f={},o='',k='',c=L.getStart(),b=L.getEnd(),H=a.isMilestone(),M=!1,u,D,F;if(h){var r=a.getEndDate()||g.add(h,a.getDurationUnit()||g.DAY,1),X=L.getAt(0),K=(X.getEndDate()-X.getStartDate())/this.timeAxisViewModel.getTickWidth(),V=K*this.outsideLabelsGatherWidth,W=g.intersectSpans(h,r,c,b),Q=this.outsideLabelsGatherWidth>0,S=Q&&g.intersectSpans(h,r,b,new Date(b.getTime()+V)),$=Q&&g.intersectSpans(h,r,new Date(c.getTime()-V),c);if(W||S||$){F=r>b;D=g.betweenLesser(h,c,b);var m,J,t;if(W){m=this.getCoordinateFromDate(D?h:c);J=this.getCoordinateFromDate(F?b:r);t=H?0:J-m}else {D=!0;t=0;if(S){m=Math.floor(this.getCoordinateFromDate(b)+(h-b)/K)}else {m=Math.floor(this.getCoordinateFromDate(c)-(c-r)/K)}}var Y=H?(J||m)-this.getXOffset(a):m;var z=Math.min(a.getPercentDone()||0,100)/100,i,y,O;var B=a.getSegments(),v;if(B){var C=0,I=B.length,d,l;for(d=0;d<I;d++){l=B[d];C+=(l.getEndDate()-l.getStartDate())*z}v=[];var p,q,s,j;for(d=0;d<I;d++){l=B[d];var e={},U=l.getCls()||'';j=l.getEndDate()||a.getStartDate();s=l.getStartDate();if(g.betweenLesser(s,c,b)){p=this.getCoordinateFromDate(s);if(g.betweenLesser(j,c,b)){q=this.getCoordinateFromDate(j)}else {q=this.getCoordinateFromDate(b)}}else {p=this.getCoordinateFromDate(c);if(g.betweenLesser(j,c,b)){q=this.getCoordinateFromDate(j)}else {if(s>b&&j>b){p=q=this.getCoordinateFromDate(b)+100}else {if(s<c&&j<c){p=q=this.getCoordinateFromDate(c)-100}else {q=this.getCoordinateFromDate(b)}}}}e.left=p-m;e.width=q-p;if(!i){C-=j-s;if(C<=0){i=g.add(j,g.MILLI,C);U+=' sch-segment-in-progress';y=this.getCoordinateFromDate(i);e.progressBarWidth=Math.min(Math.abs(y-p),e.width)}else {e.progressBarWidth=l.width}}else {e.progressBarWidth=0}e.percentDone=z*100;Ext.apply(e,l.data);e.cls=U;e.SegmentIndex=d;v.push(e)}v[0].cls+=' sch-gantt-task-segment-first';v[I-1].cls+=' sch-gantt-task-segment-last'}else {i=new Date((r-h)*z+h.getTime());if(i<c){i=c}else {if(i>b){i=b}}}y=this.getCoordinateFromDate(i);O=Math.min(Math.abs(y-m),t);f={id:a.internalId+'-x-x',offset:Y,width:Math.max(1,t),ctcls:'',cls:'',print:this._print,record:a,percentDone:z*100,progressBarWidth:Math.max(0,O-2*this.eventBorderWidth),segments:v};u=this.eventRenderer&&this.eventRenderer.call(this.eventRendererScope||this,a,f,a.store)||{};Ext.apply(f,this.getLabelRenderData(a));M=!0;if(u){Ext.apply(f,u)}var w='';if(H){f.side=Math.round((this.enableBaseline?0.4:0.5)*this.getRowHeight());k+=' sch-gantt-milestone'}else {var Z=8;f.width=Math.max(1,t);if(t<Z){k+='sch-gantt-parent-noarrows'}if(F){k+=' sch-event-endsoutside '}if(!D){k+=' sch-event-startsoutside '}if(a.isLeaf()){var G=a.getResizable();k+=' sch-gantt-task';if(typeof G==='boolean'||typeof G==='string'){w+=' sch-event-resizable-'+G}}else {k+=' sch-gantt-parent-task'}}if(a.isReadOnly()){k+=' sch-gantt-task-readonly'}if(a.isProject){k+=' sch-gantt-project-task'}if(a.dirty){w+=' sch-dirty '}if(a.isDraggable()===!1){w+=' sch-event-fixed '}w+=a.isSegmented()?' sch-event-segmented ':' sch-event-notsegmented ';f.cls=(f.cls||'')+(a.getCls()||'')+w;f.ctcls+=' '+k;if(this.showRollupTasks){var T=this.getRollupRenderData(a);if(T.length>0){o+=this.rollupTemplate.apply(T)}}o+=this.getTemplateForTask(a).apply(f)}}if(this.enableBaseline){if(!u){u=this.eventRenderer&&this.eventRenderer.call(this,a,f,a.store)||{}}var n=[];n.push({taskBaselineStart:CGA.utils.date.resetStart(a.getBaselineStartDate()),taskBaselineEnd:CGA.utils.date.resetEnd(a.getBaselineEndDate()),baselineCss:'baselineMainCss'});n.push({taskBaselineStart:a.data.WeeklyStartDate!=null?CGA.utils.date.resetStart(new Date(a.data.WeeklyStartDate)):null,taskBaselineEnd:a.data.WeeklyEndDate!=null?CGA.utils.date.resetEnd(new Date(a.data.WeeklyEndDate)):null,baselineCss:'baselineWeeklyCss'});n.push({taskBaselineStart:a.data.MonthlyStartDate!=null?CGA.utils.date.resetStart(new Date(a.data.MonthlyStartDate)):null,taskBaselineEnd:a.data.MonthlyEndDate!=null?CGA.utils.date.resetEnd(new Date(a.data.MonthlyEndDate)):null,baselineCss:'baselineMonthlyCss'});n.push({taskBaselineStart:a.data.BaseLinePlanedStartDate!=null?CGA.utils.date.resetStart(new Date(a.data.BaseLinePlanedStartDate)):null,taskBaselineEnd:a.data.BaseLinePlanedEndDate!=null?CGA.utils.date.resetEnd(new Date(a.data.BaseLinePlanedEndDate)):null,baselineCss:'baselineHistoryCss'});for(var d=0;d<n.length;d++){var N,P,R;N=n[d].taskBaselineStart;P=n[d].taskBaselineEnd;R=n[d].baselineCss;o+=this.baselineRenderer(a,u,c,b,M,R,N,P)}}var A=a.getDeadlineDate();if(A){o+=this.deadlineTemplate.apply({dir:this.rtl?'right':'left',offset:this.getCoordinateFromDate(A),date:this.getFormattedEndDate(A),cls:new Date()>A&&!a.isCompleted()?'gnt-deadline-indicator-late':''})}var E=a.getExternalDueDate();if(E){o+=this.ExternalDueDateTemplate.apply({dir:this.rtl?'right':'left',offset:this.getCoordinateFromDate(E),date:this.getFormattedEndDate(E),cls:new Date()>E&&!a.isCompleted()?'cga-externalduedate-indicator-late':''})}var x=a.getInternalDueDate();if(x){o+=this.InternalDueDateTemplate.apply({dir:this.rtl?'right':'left',offset:this.getCoordinateFromDate(x),date:this.getFormattedEndDate(x),cls:new Date()>x&&!a.isCompleted()?'cga-internalduedate-indicator-late':''})}return o},setupTemplates:function(){Gnt.view.Gantt.prototype.setupTemplates.apply(this,arguments);if(!this.ExternalDueDateTemplate){this.ExternalDueDateTemplate=Ext.create('CGA.template.ExternalDueDateTemplate')}if(!this.InternalDueDateTemplate){this.InternalDueDateTemplate=Ext.create('CGA.template.InternalDueDateTemplate')}},baselineRenderer:function(a,e,j,f,p,q,c,d){var o=Sch.util.Date;if(c&&d&&o.intersectSpans(c,d,j,f)){var l=d>f;var k=o.betweenLesser(c,j,f);e=e||{};var h=a.isBaselineMilestone(),i=this.getCoordinateFromDate(k?c:j),n=this.getCoordinateFromDate(l?f:d),m=Math.max(1,h?0:n-i),r=this.getTemplateForTask(a,!0),g={progressBarStyle:e.baseProgressBarStyle||'',id:'base-'+a.internalId,progressBarWidth:Math.min(100,a.getBaselinePercentDone())*m/100,percentDone:a.getBaselinePercentDone(),offset:h?(n||i)-this.getXOffset(a,!0):i,print:this._print,width:Math.max(1,m),baseline:!0};var b=q;if(h){g.side=Math.round(0.4*this.getRowHeight());b+=' sch-gantt-milestone-baseline sch-gantt-baseline-item'}else {if(a.isLeaf()){b+=' sch-gantt-task-baseline sch-gantt-baseline-item'}else {b+=' sch-gantt-parenttask-baseline sch-gantt-baseline-item'}}if(l){b+=' sch-event-endsoutside '}if(!k){b+=' sch-event-startsoutside '}g.ctcls=b+' '+(e.basecls||'');if(!p){Ext.apply(g,this.getLabelRenderData(a))}return r.apply(g)}return ''}},0,['cgaganttview'],['component','box','dataview','tableview','gridview','ganttview','cgaganttview'],{'component':!0,'box':!0,'dataview':!0,'tableview':!0,'gridview':!0,'ganttview':!0,'cgaganttview':!0},['widget.cgaganttview'],0,[CGA.view,'GanttView'],0);Ext.cmd.derive('Sch.patches.CellEditing',Sch.util.Patch,{target:'Ext.grid.plugin.CellEditing',maxVersion:'6.0.2',overrides:{activateCell:function(b){var c=this.callParent(arguments);if(!!c){var a=this.getEditor(b.record,b.column);if(a){a.el.skipGarbageCollection=!0;a.el.select('*').each(function(a){Ext.get(a).skipGarbageCollection=!0})}}return c}}},0,0,0,0,0,0,[Sch.patches,'CellEditing'],0);Ext.cmd.derive('Sch.patches.CellEditor',Sch.util.Patch,{target:'Ext.grid.CellEditor',minVersion:'6.0.2',maxVersion:'6.2.1',overrides:{onEditComplete:function(c,d){var a=this,b=Ext.Element.getActiveElement();a.editing=!1;a.boundEl=a.context.getCell();if(a.boundEl){a.restoreCell();if(a.boundEl.contains(b)&&a.boundEl.dom!==b){a.boundEl.focus()}}if(!c){a.cacheElement()}a.superclass.onEditComplete.apply(a,arguments);if(d){a.editingPlugin.cancelEdit(a)}else {a.editingPlugin.onEditComplete(a,a.getValue(),a.startValue)}}}},0,0,0,0,0,0,[Sch.patches,'CellEditor'],0);Ext.cmd.derive('Sch.plugin.TreeCellEditing',Ext.grid.plugin.CellEditing,{lockableScope:'locked',editorsStarted:0,init:function(){this.on('beforeedit',this.onMyBeforeEdit,this);Ext.grid.plugin.CellEditing.prototype.init.apply(this,arguments)},activateCell:function(b){var c=Ext.grid.plugin.CellEditing.prototype.activateCell.apply(this,arguments);if(c){var a=this.getEditor(b.record,b.column);if(!a._cancelEdit){a._cancelEdit=a.cancelEdit;a.cancelEdit=this.myCancelEdit}this.fireEvent('editingstart',this,a)}return c},checkReadOnly:function(){var a=this.getCmp();if(a){if(!a.isTimelineTreePanel&&!a.isTimelineGridPanel){a=a.up('tablepanel')}return !a.isReadOnly()}},onEditComplete:function(a,b,c){var d=this;if(a.field.applyChanges){if(b!==c){a.field.applyChanges(a.field.task||d.context.record)}return Ext.grid.plugin.CellEditing.prototype.onEditComplete.call(this,a,b,b)}else {return Ext.grid.plugin.CellEditing.prototype.onEditComplete.call(this,a,b,c)}},myCancelEdit:function(){var b=this,a=b.field;if(a&&a.applyChanges){var c=a.instantUpdate;a.instantUpdate=!0;var d=b._cancelEdit.apply(this,arguments);a.instantUpdate=c;return d}else {return b._cancelEdit.apply(this,arguments)}},onMyBeforeEdit:function(c,b){var a=b.column.getEditor();if(a&&a.setTask){a.setTask(b.record);b._valueFromTaskField=a.getValue()}return this.checkReadOnly()},setEditingContext:function(a){if(a.hasOwnProperty('_valueFromTaskField')){a.value=a.originalValue=a._valueFromTaskField;delete a._valueFromTaskField}Ext.grid.plugin.CellEditing.prototype.setEditingContext.apply(this,arguments)}},0,0,0,0,['plugin.scheduler_treecellediting'],0,[Sch.plugin,'TreeCellEditing'],0);Ext.cmd.derive('Sch.plugin.Pan',Ext.AbstractPlugin,{lockableScope:'top',enableVerticalPan:!0,statics:{KEY_SHIFT:1,KEY_CTRL:2,KEY_ALT:4,KEY_ALL:7},disableOnKey:0,constructor:function(a){Ext.apply(this,a)},init:function(a){this.view=a.getSchedulingView();this.view.on('afterrender',this.onRender,this)},onRender:function(a){this.view.el.on('mousedown',this.onMouseDown,this)},onMouseDown:function(a,d){if(a.event.touches&&a.event.touches.length>0){return}var c=this.self,b=this.disableOnKey;if(a.shiftKey&&b&c.KEY_SHIFT||a.ctrlKey&&b&c.KEY_CTRL||a.altKey&&b&c.KEY_ALT){return}if(a.getTarget(this.view.timeCellSelector,10)&&!a.getTarget(this.view.timeCellSelector+' > div > *')){this.mouseX=a.getX();this.mouseY=a.getY();Ext.getBody().on('mousemove',this.onMouseMove,this);Ext.getDoc().on('mouseup',this.onMouseUp,this);if(Ext.isIE||Ext.isGecko){Ext.getBody().on('mouseenter',this.onMouseUp,this)}a.stopEvent()}},onMouseMove:function(c){if(this.disabled){return}c.stopEvent();var e=c.getX();var f=c.getY();var b=0,a=this.mouseX-e;if(this.enableVerticalPan){b=this.mouseY-f}this.mouseX=e;this.mouseY=f;var d=this.view.getScroll();b&&this.view.scrollVerticallyTo(Math.max(0,b+d.top),!1);a&&this.view.scrollHorizontallyTo(Math.max(0,a+d.left),!1);this.view.headerCt.getScrollable().scrollBy(a,0,!1)},onMouseUp:function(a){Ext.getBody().un('mousemove',this.onMouseMove,this);Ext.getDoc().un('mouseup',this.onMouseUp,this);if(Ext.isIE||Ext.isGecko){Ext.getBody().un('mouseenter',this.onMouseUp,this)}}},1,0,0,0,['plugin.scheduler_pan'],0,[Sch.plugin,'Pan'],0);Ext.cmd.derive('Ext.grid.selection.Selection',Ext.Base,{constructor:function(a){this.view=a.ownerGrid.view}},1,0,0,0,0,0,[Ext.grid.selection,'Selection'],0);Ext.cmd.derive('Ext.grid.selection.Cells',Ext.grid.selection.Selection,{type:'cells',isCells:!0,clone:function(){var a=this,b=new a.self(a.view);if(a.startCell){b.startCell=a.startCell.clone();b.endCell=a.endCell.clone()}return b},contains:function(a){var b;if(!a||!a.isCellContext){return !1}if(this.startCell){b=this.getRowRange();if(a.rowIdx>=b[0]&&a.rowIdx<=b[1]){b=this.getColumnRange();return a.colIdx>=b[0]&&a.colIdx<=b[1]}}return !1},eachRow:function(f,e){var b=this,c=b.getRowRange(),d=new Ext.grid.CellContext(b.view),a;for(a=c[0];a<=c[1];a++){d.setRow(a);if(f.call(e||b,d.record)===!1){return}}},eachColumn:function(f,e){var b=this,c=b.getColumnRange(),d=new Ext.grid.CellContext(b.view),a;for(a=c[0];a<=c[1];a++){d.setColumn(a);if(f.call(e||b,d.column,a)===!1){return}}},eachCell:function(h,g){var c=this,f=c.getRowRange(),e=c.getColumnRange(),d=new Ext.grid.CellContext(c.view),b,a;for(b=f[0];b<=f[1];b++){d.setRow(b);for(a=e[0];a<=e[1];a++){d.setColumn(a);if(h.call(g||c,d,a,b)===!1){return}}}},getFirstRowIndex:function(){return this.startCell?Math.min(this.startCell.rowIdx,this.endCell.rowIdx):0},getLastRowIndex:function(){return this.startCell?Math.max(this.startCell.rowIdx,this.endCell.rowIdx):-1},getFirstColumnIndex:function(){return this.startCell?Math.min(this.startCell.colIdx,this.endCell.colIdx):0},getLastColumnIndex:function(){return this.startCell?Math.max(this.startCell.colIdx,this.endCell.colIdx):-1},privates:{clear:function(){var a=this,b=a.view;a.eachCell(function(a){b.onCellDeselect(a)});a.startCell=a.endCell=null},setRangeStart:function(a,b){this.startCell=(this.endCell=a.clone()).clone();this.view.onCellSelect(a)},setRangeEnd:function(n){var f=this,a,d,i,k,h,j,c,b,e=f.view,l=e.all,g=new Ext.grid.CellContext(e),m=e.getVisibleColumnManager().getColumns().length-1;f.endCell=n.clone();a=f.getRange();d=f.lastRange||a;i=Math.max(Math.min(a[0][1],d[0][1]),l.startIndex);k=Math.min(Math.max(a[1][1],d[1][1]),l.endIndex);h=Math.min(a[0][0],d[0][0]);j=Math.min(Math.max(a[1][0],d[1][0]),m);for(c=i;c<=k;c++){for(b=h;b<=j;b++){g.setPosition(c,b);if(c<a[0][1]||c>a[1][1]||b<a[0][0]||b>a[1][0]){e.onCellDeselect(g)}else {e.onCellSelect(g)}}}f.lastRange=a},extendRange:function(b){var a=this,c;if(b[b.type]<0){c=a.endCell.clone().setPosition(a.getLastRowIndex(),a.getLastColumnIndex());a.startCell=b.start.clone();a.setRangeEnd(c);a.view.getNavigationModel().setPosition(b.start)}else {a.startCell=a.startCell.setPosition(a.getFirstRowIndex(),a.getFirstColumnIndex());a.setRangeEnd(b.end);a.view.getNavigationModel().setPosition(b.end)}},getRange:function(){return [[this.getFirstColumnIndex(),this.getFirstRowIndex()],[this.getLastColumnIndex(),this.getLastRowIndex()]]},getRangeSize:function(){return this.getCount()},getCount:function(){var a=this.getRange();return (a[1][0]-a[0][0]+1)*(a[1][1]-a[0][1]+1)},selectAll:function(){var b=this,a=b.view;b.clear();b.setRangeStart((new Ext.grid.CellContext(a)).setPosition(0,0));b.setRangeEnd((new Ext.grid.CellContext(a)).setPosition(a.dataSource.getCount()-1,a.getVisibleColumnManager().getColumns().length-1))},isAllSelected:function(){var b=this.rangeStart,a=this.rangeEnd;if(b){if(!b.colIdx&&!b.rowIdx){return a.colIdx===a.view.getVisibleColumnManager().getColumns().length-1&&a.rowIdx===a.view.dataSource.getCount-1}}return !1},getColumnRange:function(){return [this.getFirstColumnIndex(),this.getLastColumnIndex()]},getRowRange:function(){return [this.getFirstRowIndex(),this.getLastRowIndex()]},onSelectionFinish:function(){var a=this;if(a.getCount()){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(a.getFirstRowIndex(),a.getFirstColumnIndex()),(new Ext.grid.CellContext(a.view)).setPosition(a.getLastRowIndex(),a.getLastColumnIndex()))}else {a.view.getSelectionModel().onSelectionFinish(a)}}}},0,0,0,0,0,0,[Ext.grid.selection,'Cells'],0);Ext.cmd.derive('Ext.grid.selection.Rows',Ext.grid.selection.Selection,{type:'rows',isRows:!0,clone:function(){var a=this,b=new a.self(a.view);if(a.selectedRecords){b.selectedRecords=a.selectedRecords.clone()}if(a.rangeStart){b.setRangeStart(a.rangeStart);b.setRangeEnd(a.rangeEnd)}return b},add:function(a){var b=this.selectedRecords||(this.selectedRecords=this.createRecordCollection());if(!b.byInternalId.get(a.internalId)){b.add(a);this.view.onRowSelect(a)}},remove:function(b){var a=this;if(a.selectedRecords&&a.selectedRecords.byInternalId.get(b.internalId)){a.selectedRecords.remove(b);a.view.onRowDeselect(b);a.allSelected=!1;return !0}},contains:function(b){if(!b||!b.isModel){return !1}var a=this,c=!1,f=a.selectedRecords,e,d;if(a.allSelected){a.add(b);return !0}if(f){c=!!f.byInternalId.get(b.internalId)}if(!c&&a.rangeStart!=null){d=a.getRange();e=a.view.dataSource.indexOf(b);c=e>=d[0]&&e<=d[1]}return c},getCount:function(){var c=this,a=c.selectedRecords,d=a?a.getCount():0,e=c.getRange(),b,f=c.view.dataSource;for(b=e[0];b<=e[1];b++){if(!a||!a.byInternalId.get(f.getAt(b).internalId)){d++}}return d},getRecords:function(){var a=this.selectedRecords;return a?a.getRange():[]},selectAll:function(){var a=this;a.clear();a.setRangeStart(0);a.setRangeEnd(a.view.dataSource.getCount()-1);a.addRange();a.allSelected=!0},getFirstRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.first()):0},getLastRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.first()):-1},eachRow:function(c,b){var a=this.selectedRecords;if(a){a.each(c,b||this)}},eachColumn:function(e,c){var b=this.view.getVisibleColumnManager().getColumns(),d=b.length,a;if(this.selectedRecords){for(a=0;a<d;a++){if(e.call(this||c,b[a],a)===!1){return}}}},eachCell:function(m,k){var c=this,i=c.selectedRecords,l=c.view,e=l.ownerGrid.getVisibleColumnManager().getColumns(),g,b,f,a,h,j,d=!1;if(e){g=e.length;a=new Ext.grid.CellContext(l);if(i){i.each(function(f){a.setRow(f);for(b=0;b<g;b++){a.setColumn(e[b]);if(m.call(k||c,a,a.colIdx,a.rowIdx)===!1){d=!0;return !1}}})}if(!d&&c.rangeStart!=null){h=c.getRange();c.view.dataSource.getRange(h[0],h[1],{callback:function(h){j=h.length;for(b=0;!d&&b<j;b++){a.setRow(h[b]);for(f=0;!d&&f<g;f++){a.setColumn(e[f]);if(m.call(k||c,a,a.colIdx,a.rowIdx)===!1){d=!0}}}}})}}},beginUpdate:function(){var a=this.selectedRecords;if(a){a.beginUpdate()}},endUpdate:function(){var a=this.selectedRecords;if(a){a.endUpdate()}},destroy:function(){this.selectedRecords=Ext.destroy(this.selectedRecords);this.callParent()},privates:{clear:function(){var a=this,b=a.view;a.allSelected=!1;if(a.selectedRecords){a.eachRow(function(a){b.onRowDeselect(a)});a.selectedRecords.clear()}},isAllSelected:function(){return !!this.allSelected},setRangeStart:function(a){this.allSelected=!1;this.rangeStart=this.rangeEnd=a;this.view.onRowSelect(a)},setRangeEnd:function(h){var c=this,b,e,a,k,d=c.view,j=d.dataSource,g=d.all,f=c.selectedRecords,i;c.rangeEnd=h;b=c.getRange();e=c.lastRange||b;for(a=Math.max(Math.min(b[0],e[0]),g.startIndex),h=Math.min(Math.max(b[1],e[1]),g.endIndex);a<=h;a++){k=g.item(a);if(a<b[0]||a>b[1]){if(f&&(i=f.byInternalId.get(j.getAt(a).internalId))){f.remove(i)}d.onRowDeselect(a)}else {d.onRowSelect(a)}}c.lastRange=b},extendRange:function(b){var c=this,d=c.view.dataSource,a;for(a=b.start.rowIdx;a<=b.end.rowIdx;a++){c.add(d.getAt(a))}},getRange:function(){var a=this.rangeStart,b=this.rangeEnd;if(a==null){return [0,-1]}else {if(a<=b){return [a,b]}}return [b,a]},getRangeSize:function(){var a=this.getRange();return a[1]-a[0]+1},createRecordCollection:function(){var a=this.view.dataSource,b=new Ext.util.Collection({rootProperty:'data',extraKeys:{byInternalId:{rootProperty:!1,property:'internalId'}},sorters:[function(b,c){return a.indexOf(b)-a.indexOf(c)}]});return b},addRange:function(){var a=this,c,b;if(a.rangeStart!=null){c=a.getRange();b=a.selectedRecords||(a.selectedRecords=a.createRecordCollection());a.view.dataSource.getRange(c[0],c[1],{callback:function(a){b.add.apply(b,a)}});a.setRangeStart(a.lastRange=null)}},onSelectionFinish:function(){var a=this,b=a.getContiguousSelection();if(b){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(b[0],0),(new Ext.grid.CellContext(a.view)).setPosition(b[1],a.view.getVisibleColumnManager().getColumns().length-1))}else {a.view.getSelectionModel().onSelectionFinish(a)}},getContiguousSelection:function(){var b=this.view.dataSource,a,d,c;if(this.selectedRecords){a=Ext.Array.sort(this.selectedRecords.getRange(),function(a,c){return b.indexOf(a)-b.indexOf(c)});d=a.length;if(d){for(c=1;c<d;c++){if(b.indexOf(a[c])!==b.indexOf(a[c-1])+1){return !1}}return [b.indexOf(a[0]),b.indexOf(a[d-1])]}}}}},0,0,0,0,0,0,[Ext.grid.selection,'Rows'],0);Ext.cmd.derive('Ext.grid.selection.Columns',Ext.grid.selection.Selection,{type:'columns',isColumns:!0,clone:function(){var a=this,c=new a.self(a.view),b=a.selectedColumns;if(b){c.selectedColumns=Ext.Array.slice(b)}return c},eachRow:function(c,b){var a=this.selectedColumns;if(a&&a.length){this.view.dataSource.each(c,b||this)}},eachColumn:function(h,f){var d=this,g=d.view,b=d.selectedColumns,e,a,c=new Ext.grid.CellContext(g);if(b){e=b.length;for(a=0;a<e;a++){c.setColumn(b[a]);if(h.call(f||d,c.column,c.colIdx)===!1){return !1}}}},eachCell:function(h,g){var d=this,e=d.view,c=d.selectedColumns,f,b,a=new Ext.grid.CellContext(e);if(c){f=c.length;e.dataSource.each(function(e){a.setRow(e);for(b=0;b<f;b++){a.setColumn(c[b]);if(h.call(g||d,a,a.colIdx,a.rowIdx)===!1){return !1}}})}},contains:function(b){var a=this.selectedColumns;if(b&&b.isColumn&&a&&a.length){return Ext.Array.contains(a,b)}return !1},getCount:function(){var a=this.selectedColumns;return a?a.length:0},getColumns:function(){return this.selectedColumns||[]},privates:{add:function(a){Ext.Array.include(this.selectedColumns||(this.selectedColumns=[]),a);this.refreshColumns(a)},clear:function(){var a=this,b=a.selectedColumns;if(b&&b.length){a.selectedColumns=[];a.refreshColumns.apply(a,b)}},isAllSelected:function(){var a=this.selectedColumns;return a&&a.length===this.view.ownerGrid.getVisibleColumnManager().getColumns().length},refreshColumns:function(j){var i=this,b=i.view,g=b.all,d,e=arguments,h=e.length,a,c=new Ext.grid.CellContext(b),f=[];if(b.rendered){for(a=0;a<h;a++){f[a]=i.contains(e[a])}for(d=g.startIndex;d<=g.endIndex;d++){c.setRow(d);for(a=0;a<h;a++){c.setColumn(e[a]);if(f[a]){b.onCellSelect(c)}else {b.onCellDeselect(c)}}}}},remove:function(a){if(this.selectedColumns){Ext.Array.remove(this.selectedColumns,a);if(a.getView()&&a.isVisible()){this.refreshColumns(a)}}},selectAll:function(){var a=this;a.clear();a.selectedColumns=a.view.getSelectionModel().lastContiguousColumnRange=a.view.getVisibleColumnManager().getColumns();a.refreshColumns.apply(a,a.selectedColumns)},extendRange:function(b){var c=this,d=c.view.getVisibleColumnManager().getColumns(),a;for(a=b.start.colIdx;a<=b.end.colIdx;a++){c.add(d[a])}},onSelectionFinish:function(){var a=this,b=a.getContiguousSelection();if(b){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(0,b[0]),(new Ext.grid.CellContext(a.view)).setPosition(a.view.dataSource.getCount()-1,b[1]))}else {a.view.getSelectionModel().onSelectionFinish(a)}},getContiguousSelection:function(){var a=Ext.Array.sort(this.selectedColumns,function(a,b){return a.getView().ownerGrid.getVisibleColumnManager().indexOf(a)-b.getView().ownerGrid.getVisibleColumnManager().indexOf(b)}),c=a.length,b;if(c){for(b=1;b<c;b++){if(a[b].getVisibleIndex()!==a[b-1].getVisibleIndex()+1){return !1}}return [a[0],a[c-1]]}}}},0,0,0,0,0,0,[Ext.grid.selection,'Columns'],0);Ext.cmd.derive('Ext.grid.selection.SelectionExtender',Ext.dd.DragTracker,{maskBox:{},constructor:function(a){var b=this;if(a.view.rendered){b.initSelectionExtender(a)}else {b.view=a.view;a.view.on({render:b.initSelectionExtender,args:[a],scope:b})}},initSelectionExtender:function(b){var a=this,c=Ext.dom.Element.DISPLAY;a.el=b.view.el;a.handle=b.view.ownerGrid.body.createChild({cls:'x-ssm-extender-drag-handle',style:'display:none'}).setVisibilityMode(c);a.handle.on({contextmenu:function(a){a.stopEvent()}});a.mask=a.el.createChild({cls:'x-ssm-extender-mask',style:'display:none'}).setVisibilityMode(c);a.superclass.constructor.call(a,b);a.mask.skipGarbageCollection=a.handle.skipGarbageCollection=!0;a.viewListeners=a.view.on({scroll:a.onViewScroll,scope:a,destroyable:!0});a.gridListeners=a.view.ownerGrid.on({columnResize:a.alignHandle,scope:a,destroyable:!0});a.extendX=!!(a.axes&1);a.extendY=!!(a.axes&2)},setHandle:function(c,b){var a=this;if(!a.view.rendered){a.view.on({render:a.initSelectionExtender,args:[c,b],scope:a});return}a.firstPos=c;a.lastPos=b;if(c&&b){if(a.curPos){a.curPos.setPosition(b)}else {a.curPos=b.clone()}if(c&&b){a.alignHandle()}}else {a.disable()}},alignHandle:function(){var a=this,b=a.lastPos&&a.lastPos.getCell();if(b){a.enable();a.handle.alignTo(b,'c-br')}else {a.disable()}},enable:function(){this.handle.show();Ext.dd.DragTracker.prototype.enable.call(this)},disable:function(){this.handle.hide();this.mask.hide();Ext.dd.DragTracker.prototype.disable.call(this)},onDrag:function(d){if(d.target===this.mask.dom){this.mask.hide();d.target=document.elementFromPoint.apply(document,d.getXY());this.mask.show()}var a=this,f=a.view,h=f.el.getY(),g=f.el.getX(),e=d.getTarget(a.view.getCellSelector()),c=a.scrollTask||(a.scrollTask=Ext.util.TaskManager.newTask({run:a.doAutoScroll,scope:a,interval:10})),b=a.scrollBy||(a.scrollBy=[]);if(!a.el.contains(d.target)){b[0]=b[1]=0;return c.stop()}if(a.lastXY[1]>h+f.el.getHeight(!0)-15){if(a.extendY){b[1]=3;c.start()}}else {if(a.lastXY[1]<h+10){if(a.extendY){b[1]=-3;c.start()}}else {if(a.lastXY[0]>g+f.el.getWidth(!0)-15){if(a.extendX){b[0]=3;c.start()}}else {if(a.lastXY[0]<g+10){if(a.extendX){b[0]=-3;c.start()}}else {b[0]=b[1]=0;c.stop()}}}}if(e&&e!==a.lastOverCell){a.lastOverCell=e;a.syncMaskOnCell(e)}},doAutoScroll:function(){var b=this,c=b.view,a;c.scrollBy.apply(c,b.scrollBy);a=document.elementFromPoint.apply(document,b.lastXY);if(a){a=Ext.fly(a).up(c.cellSelector);if(a&&a!==b.lastOverCell){b.lastOverCell=a;b.syncMaskOnCell(a)}}},onEnd:function(b){var a=this;if(a.scrollTask){a.scrollTask.stop()}if(a.extensionDescriptor){a.disable();a.view.getSelectionModel().extendSelection(a.extensionDescriptor)}},onViewScroll:function(){var a=this;if(a.active&&a.lastOverCell){a.syncMaskOnCell(a.lastOverCell)}if(a.firstPos){a.alignHandle()}},syncMaskOnCell:function(e){var a=this,f=a.view,i=f.all,d=a.curPos,c=a.maskBox,b,j=a.firstPos.clone(),k=a.lastPos.clone(),g=a.firstPos.clone(),h=a.lastPos.clone();j.setRow(Math.min(Math.max(j.rowIdx,i.startIndex),i.endIndex));k.setRow(Math.min(Math.max(k.rowIdx,i.startIndex),i.endIndex));a.selectionRegion=b=j.getCell().getRegion().union(k.getCell().getRegion());d.setPosition(f.getRecord(e),f.getHeaderByCell(e));e=Ext.fly(e);a.mask.dom.style.borderTopWidth=a.mask.dom.style.borderRightWidth=a.mask.dom.style.borderBottomWidth=a.mask.dom.style.borderLeftWidth='';if(d.rowIdx<a.firstPos.rowIdx&&a.extendY){a.extensionDescriptor={type:'rows',start:g.setRow(d.rowIdx),end:h.setRow(a.firstPos.rowIdx-1),rows:d.rowIdx-a.firstPos.rowIdx,mousePosition:a.lastXY};a.mask.dom.style.borderBottomWidth='0';c.x=b.x;c.y=e.getY();c.width=b.right-b.left;c.height=b.top-e.getY()}else {if(d.rowIdx>a.lastPos.rowIdx&&a.extendY){a.extensionDescriptor={type:'rows',start:g.setRow(a.lastPos.rowIdx+1),end:h.setRow(d.rowIdx),rows:d.rowIdx-a.lastPos.rowIdx,mousePosition:a.lastXY};a.mask.dom.style.borderTopWidth='0';c.x=b.x;c.y=b.bottom;c.width=b.right-b.left;c.height=e.getRegion().bottom-b.bottom}else {if(d.colIdx<a.firstPos.colIdx&&a.extendX){a.extensionDescriptor={type:'columns',start:g.setColumn(d.colIdx),end:h.setColumn(a.firstPos.colIdx-1),columns:d.colIdx-a.firstPos.colIdx,mousePosition:a.lastXY};a.mask.dom.style.borderRightWidth='0';c.x=e.getX();c.y=b.top;c.width=b.left-e.getX();c.height=b.bottom-b.top}else {if(d.colIdx>a.lastPos.colIdx&&a.extendX){a.extensionDescriptor={type:'columns',start:g.setColumn(a.lastPos.colIdx+1),end:h.setColumn(d.colIdx),columns:d.colIdx-a.lastPos.colIdx,mousePosition:a.lastXY};a.mask.dom.style.borderLeftWidth='0';c.x=b.right;c.y=b.top;c.width=e.getRegion().right-b.right;c.height=b.bottom-b.top}else {a.extensionDescriptor=null}}}}if(f.ownerGrid.hasListeners.selectionextenderdrag){f.ownerGrid.fireEvent('selectionextenderdrag',f.ownerGrid,f.getSelectionModel().getSelected(),a.extensionDescriptor)}if(a.extensionDescriptor){a.mask.show();a.mask.setBox(c)}else {a.mask.hide()}},destroy:function(){var a=this;Ext.destroy(a.gridListeners,a.viewListeners,a.mask,a.handle);Ext.dd.DragTracker.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.grid.selection,'SelectionExtender'],0);Ext.cmd.derive('Ext.grid.column.RowNumberer',Ext.grid.column.Column,{alternateClassName:'Ext.grid.RowNumberer',isRowNumberer:!0,text:'&#160;',width:23,sortable:!1,draggable:!1,autoLock:!0,lockable:!1,align:'right',producesHTML:!1,ignoreExport:!0,constructor:function(b){var a=this;a.width=a.width;Ext.grid.column.Column.prototype.constructor.apply(this,arguments);a.sortable=!1;a.scope=a},resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:'',cls:'x-row-numberer',tdCls:'x-grid-cell-row-numberer x-grid-cell-special',innerCls:'x-grid-cell-inner-row-numberer',rowspan:undefined,defaultRenderer:function(j,b,f,i,h,a,g){var c=this.rowspan,e=a.currentPage,d=g.store.indexOf(f);if(b&&c){b.tdAttr='rowspan="'+c+'"'}if(e>1){d+=(e-1)*a.pageSize}return d+1},updater:function(d,c,b,e,a){Ext.fly(d).down(this.getView().innerSelector,!0).innerHTML=this.defaultRenderer(c,null,b,null,null,a,e)}},1,['rownumberer'],['component','box','container','headercontainer','gridcolumn','rownumberer'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'rownumberer':!0},['widget.rownumberer'],0,[Ext.grid.column,'RowNumberer',Ext.grid,'RowNumberer'],0);Ext.define('Ext.theme.neptune.grid.column.RowNumberer',{override:'Ext.grid.column.RowNumberer',width:25});Ext.define('Ext.theme.triton.grid.column.RowNumberer',{override:'Ext.grid.column.RowNumberer',width:32});Ext.cmd.derive('Ext.grid.selection.SpreadsheetModel',Ext.selection.Model,{isSpreadsheetModel:!0,config:{columnSelect:{$value:!1,lazy:!0},cellSelect:{$value:!0,lazy:!0},rowSelect:{$value:!0,lazy:!0},dragSelect:{$value:!0,lazy:!0},selected:null,extensible:{$value:!0,lazy:!0}},checkboxSelect:!1,checkboxColumnIndex:0,showHeaderCheckbox:!0,checkboxHeaderWidth:24,rowNumbererHeaderWidth:46,columnSelectCls:'x-ssm-column-select',rowNumbererHeaderCls:'x-ssm-row-numberer-hd',checkerOnCls:'x-grid-hd-checker-on',tdCls:'x-grid-cell-special x-grid-cell-row-checker',bindComponent:function(b){var a=this,c,d;if(a.view!==b){if(a.view){a.navigationModel=null;Ext.destroy(a.viewListeners,a.navigationListeners)}a.view=b;if(b){a.getCellSelect();d=b.ownerGrid.lockedGrid;if(d){a.hasLockedHeader=!0;a.onViewCreated(d,d.getView())}else {b.grid.on({viewcreated:a.onViewCreated,scope:a,single:!0})}a.gridListeners=b.ownerGrid.on({columnschanged:a.onColumnsChanged,columnmove:a.onColumnMove,scope:a,destroyable:!0});c=a.getViewListeners();c.scope=a;c.destroyable=!0;a.viewListeners=b.on(c);a.navigationModel=b.getNavigationModel();a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0});if(a.getColumnSelect()){b.ownerGrid.addCls(a.columnSelectCls)}}}},getCheckboxHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==!1;return {ignoreExport:!0,isCheckerHd:b,text:'&#160;',clickTargetName:'el',width:a.checkboxHeaderWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:'',tdCls:a.tdCls,cls:b?'x-column-header-checkbox ':'',defaultRenderer:a.checkboxRenderer.bind(a),editRenderer:'&#160;',locked:a.hasLockedHeader}},checkboxRenderer:function(){return '<div class="x-grid-row-checker" role="presentation">&#160;</div>'},onHeaderClick:function(h,b,g){var a=this,c=a.selected,d,f,e;if(b===a.numbererColumn||b===a.checkColumn){g.stopEvent();if(!c||!c.isAllSelected()){a.selectAll()}else {a.deselectAll()}a.updateHeaderState();a.lastColumnSelected=null}else {if(a.columnSelect){if(g.shiftKey&&c&&c.lastColumnSelected){c.clear();d=this.view.ownerGrid.getVisibleColumnManager();f=Ext.Array.sort([d.indexOf(c.lastColumnSelected),d.indexOf(b)],Ext.Array.numericSortFn);for(e=f[0];e<=f[1];e++){a.selectColumn(d.getHeaderAtIndex(e),!0)}}else {if(a.isColumnSelected(b)){a.deselectColumn(b);a.selected.lastColumnSelected=null}else {a.selectColumn(b,g.ctrlKey);a.selected.lastColumnSelected=b}}}}},updateHeaderState:function(){var a=this,e=a.view.dataSource,d=e.getCount(),f=a.views,c=a.selected,h=c&&c.isRows&&!e.isBufferedStore&&d>0&&d===c.getCount(),b=a.checkColumn,g=a.checkerOnCls;if(f&&f.length){if(b){if(h){b.addCls(g)}else {b.removeCls(g)}}}},onBeforeReconfigure:function(f,e,b,d,c){var a=this;if(b){Ext.suspendLayouts();if(a.numbererColumn){a.numbererColumn.ownerCt.remove(a.numbererColumn,!1);b.unshift(a.numbererColumn)}if(a.checkColumn){a.checkColumn.ownerCt.remove(a.checkColumn,!1);b.unshift(a.checkColumn)}Ext.resumeLayouts()}},getCellContext:function(b,a){return (new Ext.grid.CellContext(this.view.ownerGrid.getView())).setPosition(b,a)},select:function(d,j,i){var c=this,a=c.selected,f=c.view,k=f.dataSource,h,e,b,g=!1;if(!a||!a.isRows||a.view!==f){c.resetSelection(!0);a=c.selected=new Ext.grid.selection.Rows(f)}else {if(!j){a.clear()}}if(!Ext.isArray(d)){d=[d]}h=d.length;for(e=0;e<h;e++){b=d[e];if(typeof b==='number'){b=k.getAt(b)}if(!a.contains(b)){a.add(b);g=!0}}if(g){c.updateHeaderState();if(i){c.fireSelectionChange()}}},deselect:function(a,h){var c=this,f=c.selected,i=c.view.dataSource,g,d,b,e=!1;if(f&&f.isRows){if(!Ext.isArray(a)){a=[a]}g=a.length;for(d=0;d<g;d++){b=a[d];if(typeof b==='number'){b=i.getAt(b)}e=e||f.remove(b)}}if(e){c.updateHeaderState();if(!h){c.fireSelectionChange()}}},selectCells:function(a,b,f){var c=this,e=c.view.ownerGrid.view,d;a=a.isCellContext?a.clone():(new Ext.grid.CellContext(e)).setPosition(a);b=b.isCellContext?b.clone():(new Ext.grid.CellContext(e)).setPosition(b);c.resetSelection(!0);c.selected=d=new Ext.grid.selection.Cells(a.view);d.setRangeStart(a);d.setRangeEnd(b);if(!f){c.fireSelectionChange()}},selectAll:function(e){var a=this,b=a.selected,c,d=a.view;if(a.rowSelect){if(!b||!b.isRows){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Rows(d)}c=!0}else {if(a.cellSelect){if(!b||!b.isCells){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Cells(d)}c=!0}else {if(a.columnSelect){if(!b||!b.isColumns){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Columns(d)}c=!0}}}if(c){b.selectAll();a.updateHeaderState();if(!e){a.fireSelectionChange()}}},deselectAll:function(b){var a=this.selected;if(a&&a.getCount()){a.clear();if(!b){this.fireSelectionChange()}}},selectRows:function(c,f,g){var b=this,a=b.selected,e=a&&a.isRows,h=c.length,d;if(!f||!e){b.resetSelection(!0)}if(!e){b.selected=a=new Ext.grid.selection.Rows(b.view)}if(c.isEntity){a.add(c)}else {for(d=0;d<h;d++){a.add(c[d])}}if(!g){b.fireSelectionChange()}},isSelected:function(a){return this.isRowSelected(a)},selectColumn:function(c,e,f){var b=this,a=b.selected,d=c.getView();if(!a||!a.isColumns||a.view!==d.ownerGrid.view){b.resetSelection(!0);b.selected=a=new Ext.grid.selection.Columns(d)}if(!a.contains(c)){if(!e){a.clear()}a.add(c);b.updateHeaderState();if(!f){b.fireSelectionChange()}}},deselectColumn:function(c,d){var b=this,a=b.getSelected();if(a&&a.isColumns&&a.contains(c)){a.remove(c);b.updateHeaderState();if(!d){b.fireSelectionChange()}}},getSelection:function(){var a=this.selected;if(a&&a.isRows){return a.getRecords()}return []},destroy:function(){var a=this,b=a.scrollEls;Ext.destroy(a.gridListeners,a.viewListeners,a.selected,a.navigationListeners,a.extensible);if(b){Ext.dd.ScrollManager.unregister(b)}a.selected=a.gridListeners=a.viewListeners=a.selectionData=a.navigationListeners=a.scrollEls=null;Ext.selection.Model.prototype.destroy.call(this)},privates:{axesConfigs:{x:1,y:2,xy:3,both:3,'true':3},getViewListeners:function(){return {beforerefresh:this.onBeforeViewRefresh,refresh:this.onViewRefresh,keyup:{element:'el',fn:this.onViewKeyUp,scope:this}}},onViewKeyUp:function(b){var a=this.selected;if(b.keyCode===b.SHIFT&&a&&a.isRows&&a.getRangeSize()){a.addRange()}},onColumnsChanged:function(){var a=this.selected,g,h,d,e,b,c,f;if(a){b=a.view;if(a.isCells){c=new Ext.grid.CellContext(b);g=a.getRowRange();h=b.getVisibleColumnManager().getColumns().length;for(e=g[0];e<=g[1];e++){c.setRow(e);for(d=0;d<h;d++){c.setColumn(d);b.onCellDeselect(c)}}}else {if(a.isColumns){f=!1;a.eachColumn(function(a,c){if(!a.isVisible()||!b.ownerGrid.isAncestor(a)){this.remove(a);f=!0}})}}}Ext.on('idle',f?this.fireSelectionChange:this.updateSelectionExtender,this,{single:!0})},onColumnMove:function(){this.updateSelectionExtender()},onBeforeViewRefresh:function(b){var a=this.selected;if(b.refreshCounter){if(a&&a.isCells){this.resetSelection()}}},onViewRefresh:function(e){var d=this,a=this.selected,c=d.view.store,b=!1;if(a&&a.isRows&&c.isFiltered()){a.eachRow(function(a){if(!c.contains(a)){this.remove(a);b=!0}})}this[b?'fireSelectionChange':'updateSelectionExtender']()},resetSelection:function(b){var a=this.selected;if(a){a.clear();if(!b){this.fireSelectionChange()}}},onViewCreated:function(e,b){var a=this,c=b.ownerGrid,d=b.headerCt;if(!c.lockable||b.isLockedView){if(a.getRowSelect()){a.getNumbererColumn()}if(a.checkboxSelect){a.addCheckbox(b,!0)}a.mon(b.ownerGrid,'beforereconfigure',a.onBeforeReconfigure,a)}d.sortOnClick=!a.getColumnSelect();if(a.getDragSelect()){b.on('render',a.onViewRender,a,{single:!0})}},onViewRender:function(b){var a=this,d=b.getEl(),e=a.views,f=e.length,c;for(c=0;c<f;c++){e[c].headerCt.sortOnClick=!a.columnSelect}d.ddScrollConfig={vthresh:50,hthresh:50,frequency:300,increment:100};Ext.dd.ScrollManager.register(d);(a.scrollEls||(a.scrollEls=[])).push(d);b.on('cellmousedown',a.handleMouseDown,a);if(b.lockingPartner){b.lockingPartner.on('cellmousedown',a.handleMouseDown,a)}},handleMouseDown:function(g,k,h,i,l,j,c){var b=this,a=b.selected,f=c.position.column,e,d;if(c.button||c.shiftKey||c.altKey||c.pointerType==='touch'){return}if(f){e=f===b.checkColumn;if(f===b.numbererColumn||e||!b.cellSelect){if(b.rowSelect){if(a&&a.isRows){if(!c.ctrlKey&&!e){a.clear()}}else {if(a){a.clear()}a=b.selected=new Ext.grid.selection.Rows(g)}d=!0}}else {if(a){a.clear()}if(!a||!a.isCells){a=b.selected=new Ext.grid.selection.Cells(g)}d=!0}b.lastOverRecord=b.lastOverColumn=null;Ext.getBody().on('mouseup',b.onMouseUp,b,{single:!0,view:a.view});if(d){a.view.el.on('mousemove',b.onMouseMove,b,{view:a.view})}}},onMouseMove:function(l,m,k){var a=this,h=k.view,c,g,j=l.getTarget(h.cellSelector),b=k.view.getHeaderByCell(j),e=a.selected,i,d,f;if(a.extensible){a.extensible.disable()}if(b){c=h.getRecord(j.parentNode);g=a.store.indexOf(c);d=c!==a.lastOverRecord;f=b!==a.lastOverColumn;if(d||f){i=a.getCellContext(c,b)}if(e.isRows){if(d){if(a.lastOverRecord){e.setRangeEnd(g)}else {e.setRangeStart(g)}}}else {if(d||f){if(a.lastOverRecord){e.setRangeEnd(i)}else {e.setRangeStart(i)}}}if(d||f){h.getNavigationModel().setPosition((new Ext.grid.CellContext(b.getView())).setPosition(c,b))}a.lastOverColumn=b;a.lastOverRecord=c}},onMouseUp:function(e,d,c){var a=this,b=c.view;if(b&&!b.destroyed){if(a.extensible){a.extensible.disable()}b.el.un('mousemove',a.onMouseMove,a);if(a.selected.isRows){a.selected.addRange()}a.fireSelectionChange()}},addCheckbox:function(d,e){var b=this,a=b.checkboxColumnIndex,c=d.headerCt;if(a!==!1){if(a==='first'){a=0}else {if(a==='last'){a=c.getColumnCount()}}b.checkColumn=c.add(a,b.getCheckboxHeaderConfig())}if(e!==!0){d.refresh()}},onNavigate:function(e){var b=this,d=e.view.ownerGrid.view,h=e.record,a=b.selected,f=(new Ext.grid.CellContext(d)).setPosition(h,e.column),c=e.keyEvent,i=c.getKey(),g;if(c.stopSelection){return}if(c.ctrlKey&&(i===c.UP||i===c.LEFT||i===c.RIGHT||i===c.DOWN)){return}if(a&&a.isCells&&a.getCount()>1&&c.type==='click'){return}if(!(b.cellSelect||b.columnSelect||b.rowSelect)||!e.record||c.type==='mousedown'){return}if(c.ctrlKey&&c.keyCode===c.A){if(!a||a.getCount()<2){b.selectAll()}else {b.deselectAll()}b.updateHeaderState();return}if(c.shiftKey){if(f.column===b.numbererColumn||f.column===b.checkColumn||!b.cellSelect||a&&a.isRows){if(b.rowSelect){if(!a||!a.isRows||a.view!==d){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Rows(d)}if(!a.getRangeSize()){a.setRangeStart(e.previousRecordIndex||0)}a.setRangeEnd(e.recordIndex);a.addRange();g=!0}}else {if(b.cellSelect){if(!a||!a.isCells||a.view!==d){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Cells(d)}if(!a.getRangeSize()){a.setRangeStart(e.previousPosition||b.getCellContext(0,0))}a.setRangeEnd(f);g=!0}}}else {if(f.column===b.numbererColumn||f.column===b.checkColumn||!b.cellSelect){if(b.rowSelect){if(!a||!a.isRows||a.view!==d){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Rows(d)}if(c.ctrlKey||f.column===b.checkColumn){if(a.contains(h)){a.remove(h)}else {a.add(h)}}else {a.clear();a.add(h)}g=!0}}else {if(b.cellSelect){if(!a||!a.isCells||a.view!==d){b.resetSelection(!0);b.selected=a=new Ext.grid.selection.Cells(d)}else {a.clear()}a.setRangeStart(f);g=!0}}}if(g){if(a.isRows){b.updateHeaderState()}b.fireSelectionChange()}},isRowSelected:function(a){var c=this,b=c.selected;if(b&&b.isRows){a=Ext.isNumber(a)?c.store.getAt(a):a;return b.contains(a)}else {return !1}},isColumnSelected:function(b){var c=this,a=c.selected;if(a&&a.isColumns){return a.contains(b)}else {return !1}},isCellSelected:function(c,e,a){var f=this,d,b=f.selected;c=c.ownerGrid.view;if(b){if(b.isColumns){if(typeof a==='number'){a=c.getVisibleColumnManager().getColumns()[a]}return b.contains(a)}if(b.isCells){d=(new Ext.grid.CellContext(c)).setPosition({row:e,column:a});return b.contains(d)}}return !1},applySelected:function(a){return a},updateSelected:function(a,g){var b,e,f,d,c;if(g){g.clear()}if(a&&a.getCount()){b=a.view;if(a.isRows){a.eachRow(b.onRowSelect,b)}else {if(a.isColumns){e=a.getColumns();f=e.length;if(f){c=new Ext.grid.CelContext(b);b.store.each(function(h){c.setRow(h);for(d=0;d<f;d++){c.setColumn(e[d]);b.onCellSelect(c)}})}}else {if(a.isCells){a.eachCell(b.onCellSelect,b)}}}}},getNumbererColumn:function(d){var b=this,c=b.numbererColumn,a=b.view;if(!c){if(a.isNormalView){a=a.ownerGrid.lockedGrid}c=b.numbererColumn=a.headerCt.down('rownumberer')||a.headerCt.add(0,b.getNumbererColumnConfig())}return c},getNumbererColumnConfig:function(){var a=this;return {xtype:'rownumberer',width:a.rowNumbererHeaderWidth,editRenderer:'&#160;',tdCls:a.rowNumbererTdCls,cls:a.rowNumbererHeaderCls,locked:a.hasLockedHeader}},updateRowSelect:function(d){var a=this,c=a.selected,b=a.view;if(b&&b.rendered){if(b.isNormalView){b=b.lockingPartner}if(d){if(a.checkColumn){a.checkColumn.show()}a.getNumbererColumn().show()}else {if(a.checkColumn){a.checkColumn.hide()}if(a.numbererColumn){a.numbererColumn.hide()}}if(!d&&c&&c.isRows){c.clear();a.fireSelectionChange()}}},updateColumnSelect:function(c){var a=this,e=a.selected,d=a.views,f=d?d.length:0,b;for(b=0;b<f;b++){d[b].headerCt.sortOnClick=!c}if(!c&&e&&e.isColumns){e.clear();a.fireSelectionChange()}if(c){a.view.ownerGrid.addCls(a.columnSelectCls)}else {a.view.ownerGrid.removeCls(a.columnSelectCls)}},updateCellSelect:function(c){var b=this,a=b.selected;if(!c&&a&&a.isCells){a.clear();b.fireSelectionChange()}},fireSelectionChange:function(){var a=this.view.ownerGrid,b=this.selected;this.updateSelectionExtender();a.fireEvent('selectionchange',a,b)},updateSelectionExtender:function(){var a=this.selected;if(a){a.onSelectionFinish()}},onSelectionFinish:function(d,b,c){var a=this.getExtensible();if(a){a.setHandle(b,c)}},applyExtensible:function(a){var b=this;if(a===!0||typeof a==='string'){a={axes:b.axesConfigs[a]}}else {a=Ext.Object.chain(a)}a.view=b.selected.view;return new Ext.grid.selection.SelectionExtender(a)},extendSelection:function(b){var a=this,c=a.selected;if(a.view.ownerGrid.fireEvent('beforeselectionextend',a.view.ownerGrid,c,b)!==!1){c.extendRange(b);a.fireSelectionChange()}},onIdChanged:function(e,c,b,d){var a=this.selected;if(a&&a.isRows&&a.selectedRecords){a.selectedRecords.updateKey(c,b)}},onPageAdd:function(h,g,e){var d=this.selected,f=e.length,a,c,b=d&&d.selectedRecords;if(b&&d.isRows){for(a=0;a<f;a++){c=e[a];if(b.get(c.id)){b.replace(c)}}}},refresh:function(){var a=this.getSelected();if(a&&a.isRows){Ext.selection.Model.prototype.refresh.call(this)}},onStoreAdd:function(){var a=this.getSelected();if(a&&a.isRows){Ext.selection.Model.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()}},onStoreClear:function(){this.resetSelection()},onStoreLoad:function(){var a=this.getSelected();if(a&&a.isRows){Ext.selection.Model.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()}},onStoreRefresh:function(){var a=this.selected;if(a&&a.isRows&&a.selectedRecords){this.updateSelectedInstances(a.selectedRecords)}this.updateHeaderState()},onStoreRemove:function(){var a=this.getSelected();if(a&&a.isRows){Ext.selection.Model.prototype.onStoreRemove.apply(this,arguments)}}}},0,0,0,0,['selection.spreadsheet'],0,[Ext.grid.selection,'SpreadsheetModel'],function(a){var b=Ext.ClassManager.get('Ext.grid.column.RowNumberer');if(b){a.prototype.rowNumbererTdCls=Ext.grid.column.RowNumberer.prototype.tdCls+' x-ssm-row-numberer-cell'}});Ext.define('Ext.theme.triton.grid.selection.SpreadsheetModel',{override:'Ext.grid.selection.SpreadsheetModel',checkboxHeaderWidth:32});Ext.cmd.derive('Gnt.selection.SpreadsheetModel',Ext.grid.selection.SpreadsheetModel,{privates:{getNumbererColumnConfig:function(){var a=this;return {xtype:'wbscolumn',text:'&nbsp;',width:a.rowNumbererHeaderWidth,editRenderer:'&#160;',tdCls:a.rowNumbererTdCls,cls:a.rowNumbererHeaderCls,sortable:!1,draggable:!1,hideable:!1,menuDisabled:!0,lockable:!1,ignoreExport:!0,locked:!0}}}},0,0,0,0,['selection.gantt_spreadsheet'],0,[Gnt.selection,'SpreadsheetModel'],0);Ext.cmd.derive('Gnt.plugin.taskeditor.BaseEditor',Ext.window.Window,{lockableScope:'top',closeOnBlur:!0,taskEditorCls:'Gnt.widget.taskeditor.TaskEditor',isTaskEditor:!0,taskEditor:null,panelConfig:null,height:340,width:600,layout:'card',constrain:!0,triggerEvent:'taskdblclick',closeAction:'hide',modal:!0,gantt:null,assignmentStore:null,resourceStore:null,taskStore:null,monitorDataUpdates:!1,monitorDataUpdatesInterval:500,taskEditorConfigs:'l10n,task,taskStore,assignmentStore,resourceStore',taskFilters:null,constructor:function(a){a=a||{};this.taskFilters=[];Ext.apply(this,a);this.title=this.L('title');if(!a.buttons){this.buttons=['->',{itemId:'teOkBtn',text:this.L('okText'),handler:this.onOkClick,scope:this},{text:this.L('cancelText'),handler:this.close,scope:this}]}Ext.window.Window.prototype.constructor.call(this,a);this.addCls('gnt-taskeditor-window');if(this.closeOnBlur){this.on('show',this.onFirstShow,this,{single:!0})}},showErrorMessage:function(){!Ext.Msg.isVisible()&&Ext.Msg.alert(this.L('alertCaption'),this.L('alertText'))},onOkClick:function(){!this.completeEditing()&&this.showErrorMessage()},getState:function(){if(this.rendered){return Ext.window.Window.prototype.getState.apply(this,arguments)}},init:function(a){this.assignmentStore=this.assignmentStore||a.getAssignmentStore();this.resourceStore=this.resourceStore||a.getResourceStore();this.taskStore=this.taskStore||a.getTaskStore();this.buildTaskEditor(Ext.apply(this.buildTaskEditorConfig(a),this.panelConfig));this.add(this.taskEditor);this.mon(a,this.triggerEvent,this.onTriggerEvent,this);this.gantt=a},buildTaskEditorConfig:function(b){var e={width:null,height:null,border:!1,showBaseline:b.enableBaseline,showRollup:b.showRollupTasks,allowParentTaskDependencies:b.allowParentTaskDependencies};var d=this.taskEditorConfigs.split(',');for(var c=0;c<d.length;c++){var a=d[c];if(typeof this[a]!=='undefined'){e[a]=this[a]}}return e},buildTaskEditor:function(b){this.taskEditor=Ext.create(this.taskEditorCls,b);var a=this.taskEditor.eventIndicator;this.relayEvents(this.taskEditor,['load'+a,'validate','beforeupdate'+a,'afterupdate'+a])},onTriggerEvent:function(b,a){this.showTask(a)},showTask:function(b){if(this.taskEditor&&b&&this.matchFilters(b)){this.taskEditor.loadTask(b);var a=this.gantt.isReadOnly();if(a!=this.taskEditor.setReadOnly()){this.taskEditor.setReadOnly(a)}this.down('#teOkBtn').setVisible(!a);this.show()}},matchFilters:function(c){if(!c){return}for(var a=0;a<this.taskFilters.length;a++){var b=this.taskFilters[a];if(!b.fn.call(b.scope,c)){return !1}}return !0},addFilter:function(b,a){this.taskFilters.push({fn:b,scope:a||this})},validate:function(){if(this.taskEditor){return this.taskEditor.validate()}},completeEditing:function(){if(this.taskEditor){var a=this.taskEditor.getActiveTab();if(a.editingPlugin&&a.editingPlugin.completeEdit){a.editingPlugin.completeEdit()}if(!this.taskEditor.validate()){return !1}if(this.taskEditor.updateTask()){this.hide();return !0}return !1}},updateTask:function(){if(this.taskEditor){return this.taskEditor.updateTask()}},afterRender:function(){var a=this;Ext.window.Window.prototype.afterRender.apply(this,arguments);a.startDataUpdatesMonitoring()},onFirstShow:function(){if(this.zIndexManager.mask){this.mon(this.zIndexManager.mask,'click',function(){if(this.isVisible()){this.hide()}},this)}},startDataUpdatesMonitoring:function(){var a=this,c=a.down('#teOkBtn'),b=!0;function monitor(){if(b&&c&&a.taskEditor){c.setDisabled(!a.taskEditor.isDataChanged()||!a.taskEditor.isDataValid());b=Ext.Function.defer(monitor,a.monitorDataUpdatesInterval)}}function unmonitor(){b!==!0&&clearTimeout(b);b=!0}if(a.monitorDataUpdates&&c){a.on({'show':monitor,'hide':unmonitor,'destroy':unmonitor})}}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[Ext.AbstractPlugin.prototype.mixinId||Ext.AbstractPlugin.$className,Ext.AbstractPlugin],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.plugin.taskeditor,'BaseEditor'],0);Ext.cmd.derive('Gnt.util.Data',Ext.Base,{singleton:!0,cloneModelSet:function(b,e,f){var d=[],a;var c=function(c){a=c.copy();a.phantom=!1;a.originalRecord=c;if(e){if(e.call(f||b,a,c)===!1){return}}d.push(a)};if(b.each){b.each(c)}else {Ext.Array.each(b,c)}return d},applyCloneChanges:function(g,c,f,n){var h=[];var l=c.autoSyncSuspended;if(c.autoSync&&!l){c.suspendAutoSync()}var i=g.getRemovedRecords();for(var a=0,k=i.length;a<k;a++){if(i[a].originalRecord){h.push(i[a].originalRecord)}}if(h.length){c.remove(h);g.removed.length=0}var b=g.getModifiedRecords(),e,d,j;for(a=0,k=b.length;a<k;a++){e=b[a].originalRecord;d=b[a].getData();delete d[b[a].idProperty];if(e){e.beginEdit();for(var m in d){e.set(m,d[m])}if(f){f.call(n||b[a],d,b[a])}e.endEdit()}else {if(f){f.call(n||b[a],d,b[a])}j=c.add(d);b[a].originalRecord=j&&j[0]}b[a].commit(!0)}if(c.autoSync&&!l){c.resumeAutoSync();c.sync()}}},0,0,0,0,0,0,[Gnt.util,'Data'],0);Ext.cmd.derive('Gnt.widget.taskeditor.BaseEditor',Ext.tab.Panel,{margin:'5 0 0 0',height:340,width:600,layout:'fit',border:!1,plain:!1,defaults:{margin:5,border:!1},eventIndicator:'task',task:null,taskBuffer:null,taskStore:null,assignmentStore:null,resourceStore:null,tabBar:{cls:'gnt-taskeditor-header'},clonedStores:null,constructor:function(b){var a=this;b=b||{};Ext.apply(a,b);if(!a.clonedStores){a.clonedStores=a.task||a.taskStore?a.cloneStores():{}}var d=a.buildItems(b);var c=a.items;if(c){d.push.apply(d,Ext.isArray(c)?c:[c]);delete b.items}a.items=d;if(a.items.length<=1){b.tabBar=b.tabBar||{};Ext.applyIf(b.tabBar,{hidden:!0})}Ext.tab.Panel.prototype.constructor.call(this,b)},buildItems:function(){return []},cloneTaskBranch:function(b,f){b=b||this.task;var c=this,e=c.getTaskStore(),h=e&&e.getRoot(),g=c.clonedStores,d,a;b.bubble(function(i){if(i!==h){var e=f[i.getId()];if(e){if(a){e.appendChild(a)}a=null;return !1}else {e=c.cloneTask(i);f[i.getId()]=e;e.taskStore=g.taskStore}if(a){e.appendChild(a)}else {d=e}a=e}});return {branch:a,task:d}},cloneRelevantTasks:function(a){a=a||this.task;var d=this,b={};var e=d.cloneTaskBranch(a,b),f=e.task,c=[e.branch];Ext.Array.each(a.predecessors,function(f){var e=d.cloneTaskBranch(f.getSourceTask(),b);if(e.branch){c.push(e.branch)}});Ext.Array.each(a.successors,function(f){var e=d.cloneTaskBranch(f.getTargetTask(),b);if(e.branch){c.push(e.branch)}});return {task:f,tasks:c}},loadTask:function(a){if(!a){return}this.clonedStores=this.cloneStores({task:a});this.loadClonedStores(this.clonedStores,a)},cloneTaskStore:function(d,c){var a=this.getTaskStore();if(!a){return null}var b=new a.self(Ext.apply({isCloned:!0,calendarManager:a.calendarManager,storeId:null,calendar:a.getCalendar(),model:a.model,weekendsAreWorkdays:a.weekendsAreWorkdays,cascadeChanges:a.cascadeChanges,batchSync:!1,recalculateParents:!1,skipWeekendsDuringDragDrop:a.skipWeekendsDuringDragDrop,moveParentAsGroup:a.moveParentAsGroup,enableDependenciesForParentTasks:a.enableDependenciesForParentTasks,availabilitySearchLimit:a.availabilitySearchLimit,autoNormalizeNodes:!1,dependenciesCalendar:a.dependenciesCalendar,proxy:{type:'memory',reader:{type:'json'}}},c));this.mon(a,{calendarset:function(e,a){b.setCalendar(a)}});return b},cloneDependencyStore:function(d,c){var b=this.getTaskStore();var a=this.dependencyStore||b&&b.getDependencyStore();if(!a){return null}return new a.self(Ext.apply({isCloned:!0,model:a.model,strictDependencyValidation:a.strictDependencyValidation,allowedDependencyTypes:a.allowedDependencyTypes,storeId:null,proxy:{type:'memory',reader:{type:'json'}}},c))},cloneAssignmentStore:function(d,c){var b=this.getTaskStore();var a=this.assignmentStore||b&&b.getAssignmentStore();if(!a){return null}return new a.self(Ext.apply({isCloned:!0,model:a.model,storeId:null,proxy:{type:'memory',reader:{type:'json'}}},c))},cloneResourceStore:function(d,c){var b=this.getTaskStore();var a=this.resourceStore||b&&b.getResourceStore();if(!a){return null}return new a.self(Ext.apply({isCloned:!0,model:a.model,storeId:null,proxy:{type:'memory',reader:{type:'json'}}},c))},cloneStores:function(a){a=a||{};var c=a.task||this.task,b=this.clonedStores||{},d=b.resourceStore||this.cloneResourceStore(c,a&&a.resourceStore),e=b.assignmentStore||this.cloneAssignmentStore(c,a&&a.assignmentStore),f=b.dependencyStore||this.cloneDependencyStore(c,a&&a.dependencyStore);var g=b.taskStore||this.cloneTaskStore(c,Ext.apply({assignmentStore:e,resourceStore:d,dependencyStore:f},a&&a.taskStore));d.taskStore=g;Ext.apply(b,{resourceStore:d,assignmentStore:e,dependencyStore:f,taskStore:g});return b},getTaskStore:function(a){a=a||this.task;return this.taskStore||a&&a.getTaskStore()},loadClonedStores:function(b,c){var a=this,e=a.cloneRelevantTasks(c),f=e.tasks,d=e.task;a.taskBuffer=d;b.taskStore.setRootNode({expanded:!0,children:f});d.taskStore.on({update:function(g,e,f){if(e===d&&f==Ext.data.Model.EDIT){a.onTaskUpdated.call(a,e);e.fireEvent(a.eventIndicator+'updated',e)}}});a.loadClonedDependencyStore(b,c);a.loadClonedResourceStore(b,c);a.loadClonedAssignmentStore(b,c)},loadClonedDependencyStore:function(a,b){a=a||this.clonedStores;a.dependencyStore&&a.dependencyStore.loadData(Gnt.util.Data.cloneModelSet(b.getAllDependencies(),function(d,c){d.setId(c.getId())}))},loadClonedResourceStore:function(a){a=a||this.clonedStores;a.resourceStore&&a.resourceStore.loadData(Gnt.util.Data.cloneModelSet(this.resourceStore||this.getTaskStore().getResourceStore(),function(c,b){c.setId(b.getId())}))},loadClonedAssignmentStore:function(a,b){a=a||this.clonedStores;a.assignmentStore&&a.assignmentStore.loadData(Gnt.util.Data.cloneModelSet(b.getAssignments(),function(d,c){d.setId(c.getId())}))},cloneTask:function(a){return a.copy(a.getId(),!1)},getTabByComponent:function(a){var b;this.items.each(function(c){if(a===c||a.isDescendantOf(c)){b=c;return !1}},this);return b},validate:function(){var b,d=this.getActiveTab(),c=[],a;b=this.doValidate(function(a){c.push(a)});if(!b&&d&&!Ext.Array.contains(c,d)){a=c[0];this.setActiveTab(a)}else {if(!b&&d){a=d}else {if(!b){a=c[0]}}}return this.fireEvent('validate',this,a)!==!1&&b},updateTask:function(){var a=this,b=!1;if(a.fireEvent('beforeupdate'+a.eventIndicator,a,function(){a.doUpdateTask()})!==!1){a.doUpdateTask();a.fireEvent('afterupdate'+a.eventIndicator,a);b=!0}return b},onDestroy:function(){if(this.clonedStores.taskStore){this.clonedStores.taskStore.destroy()}Ext.tab.Panel.prototype.onDestroy.apply(this,arguments)},doValidate:function(){return !0},isDataValid:function(){return this.doValidate()},isDataChanged:function(){return !1},doUpdateTask:function(){throw 'Abstract method called'},updateReadOnly:function(){throw 'Abstract method called'},getReadOnly:function(){return this.readOnly},setReadOnly:function(a){this.readOnly=a;this.updateReadOnly()},onTaskUpdated:function(){this.updateReadOnly()}},1,0,['component','box','container','panel','tabpanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0},0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.taskeditor,'BaseEditor'],0);Ext.cmd.derive('Ext.layout.container.Table',Ext.layout.container.Container,{alternateClassName:'Ext.layout.TableLayout',type:'table',createsInnerCt:!0,targetCls:'x-table-layout-ct',tableCls:'x-table-layout',cellCls:'x-table-layout-cell',childEls:['table','tbody'],tableAttrs:null,getItemSizePolicy:function(a){return this.autoSizePolicy},initInheritedState:function(b,a){a.inShrinkWrapTable=!0},getLayoutItems:function(){var f=this,c=[],d=Ext.layout.container.Container.prototype.getLayoutItems.call(this),e=d.length,b,a;for(a=0;a<e;a++){b=d[a];if(!b.hidden){c.push(b)}}return c},getHiddenItems:function(){var c=[],d=this.owner.items.items,e=d.length,b,a;for(b=0;b<e;++b){a=d[b];if(a.rendered&&a.hidden){c.push(a)}}return c},renderChildren:function(){var a=this,k=a.getLayoutItems(),h=a.tbody.dom,n=h.rows,l=k.length,m=a.getHiddenItems(),i,j,d,f,c,e,g,b;i=a.calculateCells(k);for(b=0;b<l;b++){j=i[b];d=j.rowIdx;f=j.cellIdx;c=k[b];e=n[d];if(!e){e=h.insertRow(d);if(a.trAttrs){e.set(a.trAttrs)}}g=Ext.get(e.cells[f]||e.insertCell(f));if(!c.rendered){a.renderItem(c,g,0)}else {if(!a.isValidParent(c,g,d,f,h)){a.moveItem(c,g,0)}}if(a.tdAttrs){g.set(a.tdAttrs)}if(c.tdAttrs){g.set(c.tdAttrs)}g.set({colSpan:c.colspan||1,rowSpan:c.rowspan||1,cls:a.cellCls+' '+(c.cellCls||'')});if(!i[b+1]||i[b+1].rowIdx!==d){f++;while(e.cells[f]){e.deleteCell(f)}}}d++;while(h.rows[d]){h.deleteRow(d)}for(b=0,l=m.length;b<l;++b){a.ensureInDocument(m[b].getEl())}},ensureInDocument:function(b){var a=b.dom.parentNode;while(a){if(a.tagName.toUpperCase()==='BODY'){return}a=a.parentNode}Ext.getDetachedBody().appendChild(b)},calculate:function(a){if(!a.hasDomProp('containerChildrenSizeDone')){this.done=!1}else {var g=a.targetContext,c=a.widthModel.shrinkWrap,b=a.heightModel.shrinkWrap,e=b||c,f=e&&this.table.dom,d=e&&g.getPaddingInfo();if(c){a.setContentWidth(f.offsetWidth+d.width,!0)}if(b){a.setContentHeight(f.offsetHeight+d.height,!0)}}},calculateCells:function(j){var i=[],h=0,b=0,f=0,e=this.columns||Infinity,c=[],k=j.length,g,d,a;for(d=0;d<k;d++){g=j[d];while(b>=e||c[b]>0){if(b>=e){b=0;f=0;h++;for(a=0;a<e;a++){if(c[a]>0){c[a]--}}}else {b++}}i.push({rowIdx:h,cellIdx:f});for(a=g.colspan||1;a;--a){c[b]=g.rowspan||1;++b}++f}return i},getRenderTree:function(){var a=this,h=a.getLayoutItems(),i=[],m=Ext.apply({tag:'table',id:a.owner.id+'-table','data-ref':'table',role:'presentation',cls:a.tableCls,cellspacing:0,cellpadding:0,cn:{tag:'tbody',id:a.owner.id+'-tbody','data-ref':'tbody',role:'presentation',cn:i}},a.tableAttrs),k=a.tdAttrs,d,n=h.length,b,f,c,g,j,e,l;l=a.calculateCells(h);for(d=0;d<n;d++){b=h[d];f=l[d];g=f.rowIdx;j=f.cellIdx;c=i[g];if(!c){c=i[g]={tag:'tr',role:'presentation',cn:[]};if(a.trAttrs){Ext.apply(c,a.trAttrs)}}e=c.cn[j]={tag:'td',role:'presentation'};if(k){Ext.apply(e,k)}Ext.apply(e,{colSpan:b.colspan||1,rowSpan:b.rowspan||1,cls:a.cellCls+' '+(b.cellCls||'')});a.configureItem(b);e.cn=b.getRenderTree()}return m},isValidParent:function(a,d,c,b){if(arguments.length===3){return this.table.isAncestor(a.el)}return a.el.dom.parentNode===this.tbody.dom.rows[c].cells[b]}},0,0,0,0,['layout.table'],0,[Ext.layout.container,'Table',Ext.layout,'TableLayout'],0);Ext.cmd.derive('Gnt.widget.taskeditor.BaseForm',Ext.form.Panel,{highlightTaskUpdates:!0,task:null,taskBuffer:null,taskStore:null,taskListeners:null,autoScroll:!0,defaults:{labelWidth:110},bodyPadding:5,border:!1,layout:'anchor',defaultType:'textfield',initComponent:function(){if(this.task){this.fieldNames=this.getFieldNames(this.task)}if(!this.items){this.buildFields()}Ext.form.Panel.prototype.initComponent.apply(this,arguments);if(this.task){this.loadRecord(this.task,this.taskBuffer)}},getFieldNames:function(b){if(!b){return}var a={};for(var c in this.fieldNames){a[c]=b[c]}return a},renameFields:function(f){var a=this.getFieldNames(f);if(!a){return}var e=this.getForm(),d=!1,b;for(var c in this.fieldNames){b=e.findField(this.fieldNames[c]);if(b&&a[c]&&a[c]!=b.name){d=!0;b.name=a[c]}}if(d){this.fieldNames=a}},setSuppressTaskUpdate:function(b){var a=this.getForm().getFields();a.each(function(a){a.setSuppressTaskUpdate&&a.setSuppressTaskUpdate(b)})},isDataChanged:function(){return this.isDirty()},buildTaskBuffer:function(a){var b=this;b.taskBuffer=a.copy();b.taskBuffer.taskStore=a.taskStore},loadRecord:function(b,e){var a=this;if(b&&b!==a.task){a.renameFields(b)}a.task=b;a.taskBuffer=e;if(!a.taskBuffer){a.buildTaskBuffer(b)}a.taskListeners&&a.taskListeners.destroy();a.taskListeners=a.mon(a.taskBuffer,{taskupdated:a.onTaskUpdated,destroyable:!0,scope:a});var c=a.getForm();c._record=b;this.suspendLayouts();var d=b.getData();c.getFields().each(function(f){if(f.getName() in d){if(f.setTask){f.setTask(a.taskBuffer)}else {f.setValue(d[f.getName()])}a.updateFieldReadOnly(f);if(c.trackResetOnLoad){f.resetOriginalValue()}}});this.resumeLayouts(!0);this.fireEvent('afterloadrecord',this,b)},updateFieldReadOnly:function(a){var b=this;if(!a.disabled){if(!a.forceReadOnly){var c=a.isTaskField;if(b.getReadOnly()){a.setReadOnly(!0);c&&a.suspendReadOnlyUpdate()}else {if(!c){var d=b.taskBuffer.isEditable(a.name);if(this.editable===!1){if(d&&a.inputEl){a.inputEl.dom.readOnly=!0}}a.setReadOnly(!d)}else {a.resumeReadOnlyUpdate();a.updateReadOnly(b.taskBuffer)}}}}},updateReadOnly:function(){var a=this,c=a.getForm(),b=a.taskBuffer.getData();c.getFields().each(function(c){if(c.getName() in b){a.updateFieldReadOnly(c)}})},updateRecord:function(b){var a=this;b=b||a.task;if(b&&a.fireEvent('beforeupdaterecord',a,b,a.updateRecordFn)!==!1){a.setSuppressTaskUpdate(!0);a.updateRecordFn.call(a,b);a.setSuppressTaskUpdate(!1);a.fireEvent('afterupdaterecord',a,b);return !0}return !1},updateRecordWithFieldValue:function(b,a){var c=b.getField(a.name);if(a.applyChanges){a.applyChanges(b)}else {if(c&&a.name in this.getForm().getFieldValues()){b.set(a.name,a.getValue())}}},updateRecordFn:function(a){var b=this;a.beginEdit();b.getForm().getFields().each(function(c){b.updateRecordWithFieldValue(a,c)});a.endEdit()},initFieldDefinition:function(b,d){var a=this;var c={taskStore:a.taskStore,task:a.task,highlightTaskUpdates:a.highlightTaskUpdates};if(!b.readOnly&&a.task){c.readOnly=!a.task.isEditable(b.name)}return Ext.apply(b,c,d)},getTaskFieldValue:function(b){var c=this,a=this.task;return a?a.get(c.fieldNames[b]):''},onTaskUpdated:function(b,a){this.updateReadOnly()},getReadOnly:function(){return this.readOnly},setReadOnly:function(a){this.readOnly=a;this.updateReadOnly()}},0,0,['component','box','container','panel','form'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0},0,0,[Gnt.widget.taskeditor,'BaseForm'],0);Ext.cmd.derive('Ext.form.FieldSet',Ext.container.Container,{checkboxUI:'default',collapsed:!1,toggleOnTitleClick:!0,baseCls:'x-fieldset',layout:'anchor',descriptionText:'{0} field set',expandText:'Expand field set',componentLayout:'fieldset',ariaRole:'group',focusable:!1,autoEl:'fieldset',childEls:['body'],renderTpl:['{%this.renderLegend(out,values);%}','<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{%this.renderContainer(out,values);%}','</div>'],stateEvents:['collapse','expand'],maskOnDisable:!1,beforeDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}Ext.container.Container.prototype.beforeDestroy.call(this)},initComponent:function(){var a=this,b=a.baseCls;if(a.ariaRole&&!a.ariaLabel){a.ariaLabel=Ext.String.formatEncode(a.descriptionText,a.title||'')}a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-expanded']=!a.collapsed;a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.layout.managePadding=a.layout.manageOverflow=!1;if(a.collapsed){a.addCls(b+'-collapsed');a.collapse()}if(a.title||a.checkboxToggle||a.collapsible){a.addTitleClasses();a.legend=a.createLegendCt()}a.initMonitor()},initRenderData:function(){var b=this,a=Ext.container.Container.prototype.initRenderData.call(this);a.bodyTargetCls=b.bodyTargetCls;b.protoBody.writeTo(a);delete b.protoBody;return a},getState:function(){var a=Ext.container.Container.prototype.getState.call(this);a=this.addPropertyToState(a,'collapsed');return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return !0},collapsedVertical:function(){return !0},createLegendCt:function(){var a=this,c=[],d={baseCls:a.baseCls+'-header',layout:'container',ui:a.ui,id:a.id+'-legend',autoEl:'legend',ariaRole:null,items:c,ownerCt:a,shrinkWrap:!0,ownerLayout:a.componentLayout},b;if(a.checkboxToggle){c.push(a.createCheckboxCmp())}else {if(a.collapsible){c.push(a.createToggleCmp())}}c.push(a.createTitleCmp());b=new Ext.container.Container(d);b.collapseImmune=!0;b.getInherited().collapseImmune=!0;return b},createTitleCmp:function(){var a=this,b={html:a.title,ui:a.ui,cls:a.baseCls+'-header-text',id:a.id+'-legendTitle',ariaRole:'presentation'};if(a.collapsible&&a.toggleOnTitleClick){b.listeners={click:{element:'el',scope:a,fn:a.toggle}};b.cls+=' '+a.baseCls+'-header-text-collapsible'}a.titleCmp=new Ext.Component(b);return a.titleCmp},createCheckboxCmp:function(){var a=this,d='-checkbox',b=a.baseCls+'-header'+d,c;b+=' '+b+'-'+a.ui;a.checkboxCmp=c=new Ext.form.field.Checkbox({hideEmptyLabel:!0,name:a.checkboxName||a.id+d,cls:b,id:a.id+'-legendChk',ui:a.checkboxUI,checked:!a.collapsed,msgTarget:'none',listeners:{change:a.onCheckChange,scope:a},ariaLabel:a.expandText});return c},createToggleCmp:function(){var a=this,b;a.toggleCmp=b=new Ext.panel.Tool({cacheHeight:!1,cls:a.baseCls+'-header-tool-'+a.ui,type:'toggle',handler:a.toggle,id:a.id+'-legendToggle',scope:a,ariaRole:'checkbox',ariaLabel:a.expandText,ariaRenderAttributes:{'aria-checked':!a.collapsed}});return b},doRenderLegend:function(d,c){var e=c.$comp,a=e.legend,b;if(a){a.ownerLayout.configureItem(a);b=a.getRenderTree();Ext.DomHelper.generateMarkup(b,d)}},getCollapsed:function(){return this.collapsed?'top':!1},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var a=this,b=a.legend;a.title=c;a.ariaLabel=Ext.String.formatEncode(a.descriptionText,c||'');if(a.rendered){if(!b){a.legend=b=a.createLegendCt();a.addTitleClasses();b.ownerLayout.configureItem(b);b.render(a.el,0)}a.titleCmp.update(c);a.ariaEl.dom.setAttribute('aria-label',a.ariaLabel)}else {if(b){a.titleCmp.update(c)}else {a.addTitleClasses();a.legend=a.createLegendCt()}}return a},addTitleClasses:function(){var a=this,c=a.title,b=a.baseCls;if(c){a.addCls(b+'-with-title')}if(c||a.checkboxToggle||a.collapsible){a.addCls(b+'-with-legend')}},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setExpanded:function(b){var a=this,d=a.checkboxCmp,c=a.toggleCmp,e=b?'expand':'collapse';if(!a.rendered||a.fireEvent('before'+e,a)!==!1){b=!!b;if(d){d.setValue(b)}else {if(c&&c.ariaEl.dom){c.ariaEl.dom.setAttribute('aria-checked',b)}}if(b){a.removeCls(a.baseCls+'-collapsed')}else {a.addCls(a.baseCls+'-collapsed')}if(a.ariaEl.dom){a.ariaEl.dom.setAttribute('aria-expanded',!!b)}a.collapsed=!b;if(b){delete a.getInherited().collapsed}else {a.getInherited().collapsed=!0}if(a.rendered){a.updateLayout({isRoot:!1});a.fireEvent(e,a)}}return a},getRefItems:function(c){var a=Ext.container.Container.prototype.getRefItems.apply(this,arguments),b=this.legend;if(b){a.unshift(b);if(c){a.unshift.apply(a,b.getRefItems(!0))}}return a},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;Ext.container.Container.prototype.finishRender.call(this);if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:'bodyStyle',styleIsText:!0})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(d){var b=this,e=b.getProtoBody(),a=b.padding,c;if(a!==undefined){if(Ext.isIE8){a=b.parseBox(a);c=Ext.Element.parseBox(0);c.top=a.top;a.top=0;e.setStyle('padding',b.unitizeBox(c))}d.setStyle('padding',b.unitizeBox(a))}},onCheckChange:function(b,a){this.setExpanded(a)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderLegend=this.doRenderLegend}}},0,['fieldset'],['component','box','container','fieldset'],{'component':!0,'box':!0,'container':!0,'fieldset':!0},['widget.fieldset'],[['fieldAncestor',Ext.form.FieldAncestor]],[Ext.form,'FieldSet'],0);Ext.cmd.derive('Gnt.field.Percent',Ext.form.field.Number,{alternateClassName:'Gnt.widget.PercentField',disableKeyFilter:!1,minValue:0,maxValue:100,allowExponential:!1,baseChars:'0123456789%',constructor:function(){Ext.form.field.Number.prototype.constructor.apply(this,arguments);this.invalidText=this.L('invalidText')},valueToRaw:function(a){if(Ext.isNumber(a)){return parseFloat(Ext.Number.toFixed(a,this.decimalPrecision))+'%'}return ''},getErrors:function(b){var a=this.parseValue(b);if(a===null){if(b!==null&&b!==''){return [this.invalidText]}else {a=''}}return Ext.form.field.Number.prototype.getErrors.call(this,a)}},1,['percentfield'],['component','box','field','textfield','spinnerfield','numberfield','percentfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0,'percentfield':!0},['widget.percentfield'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Percent',Gnt.widget,'PercentField'],0);Ext.cmd.derive('Gnt.field.mixin.TaskField',Ext.Mixin,{taskField:'',fieldProperty:'',getTaskValueMethod:'',setTaskValueMethod:'',isTaskField:!0,task:null,taskStore:null,suppressTaskUpdate:0,highlightTaskUpdates:!0,highlightColor:'#009900',lastHighlight:0,instantUpdate:!0,originalInstantUpdate:null,readOnlyUpdateSuspended:0,mixinConfig:{before:{constructor:'beforeConstructed',destroy:'beforeDestroyed'},after:{constructor:'afterConstructed'}},beforeConstructed:function(){this.setSuppressTaskUpdate(!0)},afterConstructed:function(){this.taskField=this.taskField||this.fieldProperty;this.task&&this.setTask(this.task);this.setSuppressTaskUpdate(!1)},setInstantUpdate:function(a){this.instantUpdate=a},beforeDestroyed:function(){this.destroyTaskListener()},setTask:function(a){if(!a){return}this.destroyTaskListener();this.updateReadOnly(a);this.task=a;a.on('taskupdated',this.onTaskUpdateProcess,this);if(!a.getCalendar(!0)&&!a.getTaskStore(!0)){a.taskStore=a.getTaskStore(!0)||this.taskStore;if(!a.taskStore){throw 'Configuration issue: Gnt.data.taskStore instance should be provided.'}if(!a.getCalendar(!0)&&!a.taskStore.getCalendar()){throw 'Configuration issue: Gnt.data.Calendar instance should be provided.'}}this.setSuppressTaskUpdate(!0);this.onSetTask(a);this.setSuppressTaskUpdate(!1)},onSetTask:function(a){a=a||this.task;this.setValue(this.getTaskValue(a))},setSuppressTaskUpdate:function(a){a?this.suppressTaskUpdate++:this.suppressTaskUpdate--},getSuppressTaskUpdate:function(){return this.suppressTaskUpdate},isReadOnlyUpdateSuspended:function(){return this.readOnlyUpdateSuspended},suspendReadOnlyUpdate:function(){this.readOnlyUpdateSuspended++},resumeReadOnlyUpdate:function(){if(this.isReadOnlyUpdateSuspended()){this.readOnlyUpdateSuspended--}return this.readOnlyUpdateSuspended},updateReadOnly:function(a){if(!this.disabled&&!this.forceReadOnly&&!this.isReadOnlyUpdateSuspended()){if(this.editable===!1){if(!a.isEditable(a[this.taskField])){this.setReadOnly(!0)}else {if(this.inputEl){this.setReadOnly(!1);this.inputEl.dom.readOnly=!0}}}else {this.setReadOnly(!a.isEditable(a[this.taskField]))}}},onTaskUpdateProcess:function(b,c){if(c!==this){var a=this.getValue();this.updateReadOnly(b);this.setSuppressTaskUpdate(!0);if(this.onTaskUpdate){this.onTaskUpdate(b,c)}else {this.onSetTask(b)}this.setSuppressTaskUpdate(!1);if(this.highlightTaskUpdates){var e=this.getValue(),d=Ext.isDate(a);if(d&&a-e!==0||!d&&String(a)!==String(e)){this.highlightField()}}}},highlightField:function(b,a){if(this.rendered&&new Date()-this.lastHighlight>1000){this.lastHighlight=new Date();this.inputEl.highlight(b||this.highlightColor,a||{attr:'color'})}},destroyTaskListener:function(){if(this.task){this.task.un('taskupdated',this.onTaskUpdateProcess,this)}},callTaskMethod:function(a,b,c){a=a||this.task;return a&&a[b].apply(a,c)},getTaskValue:function(a){return this.callTaskMethod(a,this.getTaskValueMethod,Ext.Array.slice(arguments,1))},setTaskValue:function(a){if(a.propagating){return}return this.callTaskMethod(a,this.setTaskValueMethod,Ext.Array.slice(arguments,1))},applyChanges:function(a){a=a||this.task;this.setTaskValue(a,this.getValue());a.fireEvent('taskupdated',a,this)}},0,0,0,0,0,0,[Gnt.field.mixin,'TaskField'],0);Ext.cmd.derive('Gnt.field.Date',Ext.form.field.Date,{adjustMilestones:!0,keepDuration:!1,reAssertValue:!0,keepTime:!0,onExpand:function(){var a=this.valueToVisible(this.getValue());this._expanding=!1;if(!this.isValid()){a=this.getRawValue();if(a){a=Ext.Date.parse(a,this.format)}}this.picker.setValue(Ext.isDate(a)?a:new Date())},applyKeptTimeToValue:function(a){if(this.keepTime&&!Ext.Date.formatContainsHourInfo(this.format)){this.applyTimeToValue(a,this.getTaskValue())}return a},applyTimeToValue:function(b,a){a=a||this.getTaskValue();if(Ext.isDate(b)&&a){b.setHours(a.getHours());b.setMinutes(a.getMinutes())}return b},onSelect:function(f,b){var a=this;if(this.keepTime||Ext.Date.formatContainsHourInfo(this.format)){a.applyTimeToValue(b,this.getTaskValue())}var e=a.getValue();var c=this.visibleToValue(b);var d=Ext.Date.format(b,this.format);if(e!=c){if(this.getErrors(d).length>0){a.setRawValue(d);a.collapse();a.validate()}else {a.setValue(c,!0);a.fireEvent('select',a,c);if(Ext.getVersion().isGreaterThan('6.0.1')){a.onTabOut(f)}else {a.inputEl.focus();a.collapse()}}}},setValue:function(c,d){if(this._expanding){return}Ext.form.field.Date.prototype.setValue.call(this,c);var a=this.task;if(!this.readOnly&&(d||this.instantUpdate)&&!this.getSuppressTaskUpdate()&&a&&a.taskStore&&c){this.applyChanges();if(this.reAssertValue){var b=this.getTaskValue();if(b-this.getValue()!==0){Ext.form.field.Date.prototype.setValue.call(this,b)}}a.fireEvent('taskupdated',a,this)}},rawToValue:function(a){if(!a){return null}var b=this.applyKeptTimeToValue(this.parseDate(a));return this.visibleToValue(b)||a||null},valueToRaw:function(a){if(!a){return a}return Ext.Date.format(this.valueToVisible(a),this.format)},getValue:function(){return Ext.isEmpty(this.value)?null:this.value},visibleToValue:function(){throw 'Abstract visibleToValue method called'},valueToVisible:function(){throw 'Abstract valueToVisible method called'},checkChange:function(){if(!this.suspendCheckChange){var a=this,b=a.rawToValue(a.inputEl?a.inputEl.getValue():Ext.valueFrom(a.rawValue,'')),c=a.lastValue;if(!a.isEqual(b,c)&&!a.isDestroyed){a.lastValue=b;a.fireEvent('change',a,b,c);a.onChange(b,c)}}},assertValue:function(){var a=this,f=a.rawValue,d=a.getRawValue(),e=a.getValue(),c=a.rawToValue(d),b=a.focusTask;if(b){b.cancel()}if(f!=d||c-e!==0){if(!a.validateOnBlur||a.isValid()){a.setValue(c,!0)}}},applyChanges:function(a){a=a||this.task;var b=a.getTaskStore(!0)||this.taskStore;if(this.value){this.setTaskValue(a,this.value,this.keepDuration,b.skipWeekendsDuringDragDrop)}else {this.setTaskValue(a,null)}},expand:function(){this._expanding=!0;Ext.form.field.Date.prototype.expand.apply(this,arguments)},beforeBlur:function(){this.assertValue()}},0,0,['component','box','field','textfield','pickerfield','datefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0},0,[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Date'],0);Ext.define('CGA.field.Date',{override:'Gnt.field.Date',adjustMilestones:!1});Ext.cmd.derive('Gnt.field.StartDate',Gnt.field.Date,{keepDuration:!0,taskField:'startDateField',getTaskValueMethod:'getStartDate',setTaskValueMethod:'setStartDate',isBaseline:!1,valueToVisible:function(b,a){a=a||this.task;return a.getDisplayStartDate(this.format,this.adjustMilestones,b,!0,this.isBaseline)},visibleToValue:function(a){var b=this.task;if(b&&a){var c=!Ext.isDate(this.lastValue)||this.lastValue-Ext.Date.clearTime(this.lastValue,!0)===0;if(this.adjustMilestones&&b.isMilestone(this.isBaseline)&&a-Ext.Date.clearTime(a,!0)===0&&c){a=b.getCalendar().getCalendarDay(a).getAvailabilityEndFor(a)||a}}return a}},0,['startdatefield'],['component','box','field','textfield','pickerfield','datefield','startdatefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'startdatefield':!0},['widget.startdatefield'],0,[Gnt.field,'StartDate'],0);Ext.cmd.derive('Gnt.field.EndDate',Gnt.field.Date,{taskField:'endDateField',getTaskValueMethod:'getEndDate',setTaskValueMethod:'setEndDate',validateStartDate:!0,valueToVisible:function(b,a){a=a||this.task;return a.getDisplayEndDate(this.format,this.adjustMilestones,b,!0)},visibleToValue:function(a){if(a&&this.task){if(!Ext.Date.formatContainsHourInfo(this.format)&&a-Ext.Date.clearTime(a,!0)===0){a=this.task.getCalendar().getCalendarDay(a).getAvailabilityEndFor(a)||Sch.util.Date.add(a,Sch.util.Date.DAY,1)}}else {a=null}return a},isValidAgainstStartDate:function(a){return !this.task||!a||a>=this.task.getStartDate()},getErrors:function(b){var a=Gnt.field.Date.prototype.getErrors.apply(this,arguments);if(a&&a.length){return a}if(this.validateStartDate){if(!this.isValidAgainstStartDate(this.rawToValue(b))){return [this.L('endBeforeStartText')]}}return []}},0,['enddatefield'],['component','box','field','textfield','pickerfield','datefield','enddatefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'enddatefield':!0},['widget.enddatefield'],0,[Gnt.field,'EndDate'],0);Ext.cmd.derive('Gnt.util.DurationParser',Ext.Base,{parseNumberFn:null,durationRegex:null,allowDecimals:!0,constructor:function(a){Ext.apply(this,a);if(this.unitsRegex){Ext.apply(this.l10n.unitsRegex,this.unitsRegex)}if(!this.durationRegex){this.durationRegex=this.allowDecimals?/^\s*([\-+]?\d+(?:[.,]\d*)?|[\-+]?(?:[.,]\d+))\s*(\w+)?/i:/^\s*([\-+]?\d+)(?![.,])\s*(\w+)?/i}},parse:function(d){var b=this.durationRegex.exec(d);if(d==null||!b){return null}var e=this.parseNumberFn(b[1]);var c=b[2];var a;if(c){Ext.iterate(this.L('unitsRegex'),function(e,b){if(b.test(c)){a=Sch.util.Date.getUnitByName(e);return !1}});if(!a){return null}}return {value:e,unit:a}}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.util,'DurationParser'],0);Ext.cmd.derive('Gnt.field.trigger.DurationSpinner',Ext.form.trigger.Spinner,{initEvents:function(){var a=this,b=a.isFieldEnabled,c=a.getStateEl(),d=a.el;c.addClsOnOver(a.overCls,b,a);c.addClsOnClick(a.clickCls,b,a);if(a.repeatClick){a.clickRepeater=new Ext.util.ClickRepeater(d,Ext.apply({preventDefault:!0,handler:a.onClick,delay:Ext.isIE?1000:250,listeners:{mousedown:a.onClickRepeaterMouseDown,scope:a},scope:a},this.repeaterConfig))}else {a.field.mon(d,{click:a.onClick,mousedown:a.onMouseDown,scope:a})}},onClick:function(){var a=this,d=arguments,c=a.clickRepeater?d[1]:d[0],b=a.field;if(!b.readOnly&&!b.disabled){if(a.upEl.contains(c.target)){Ext.callback(a.upHandler,a.scope,[b,a,c],0,b)}else {if(a.downEl.contains(c.target)){Ext.callback(a.downHandler,a.scope,[b,a,c],0,b)}}}!Ext.isIE&&b.inputEl.focus()}},0,0,0,0,['trigger.gantt_durationspinner'],0,[Gnt.field.trigger,'DurationSpinner'],0);Ext.cmd.derive('Gnt.field.Duration',Ext.form.field.Number,{alternateClassName:'Gnt.widget.DurationField',disableKeyFilter:!0,allowExponential:!1,minValue:0,durationUnit:'h',config:{triggers:{spinner:{type:'gantt_durationspinner',upHandler:'onSpinnerUpClick',downHandler:'onSpinnerDownClick',scope:'this'}}},useAbbreviation:!1,getDurationUnitMethod:'getDurationUnit',setTaskValueMethod:'setDuration',getTaskValueMethod:'getDuration',taskField:'durationField',durationParser:null,durationParserConfig:null,constructor:function(b){var a=this;Ext.apply(this,b);this.durationParser=new Gnt.util.DurationParser(Ext.apply({parseNumberFn:function(){return a.parseValue.apply(a,arguments)},allowDecimals:this.decimalPrecision>0},this.durationParserConfig));Ext.form.field.Number.prototype.constructor.apply(this,arguments);this.invalidText=this.L('invalidText')},onSetTask:function(){this.durationUnit=this.task[this.getDurationUnitMethod]();var a=this.getTaskValueMethod?this.getTaskValue():this.task.get(this.task[this.taskField]);this.setValue(a);this.setSpinUpEnabled(a==null||a<this.maxValue,!0);this.setSpinDownEnabled(a>this.minValue,!0)},rawToValue:function(b){var a=this.parseDuration(b);if(!a){return null}this.durationUnit=a.unit;return a.value!=null?a.value:null},valueToVisible:function(a,d){if(Ext.isNumber(a)){var c=parseInt(a,10),b=Ext.Number.toFixed(a,this.decimalPrecision);return String(c==b?c:b).replace('.',this.decimalSeparator)+' '+Sch.util.Date[this.useAbbreviation?'getShortNameOfUnit':'getReadableNameOfUnit'](d||this.durationUnit,a!==1)}return ''},valueToRaw:function(a){return this.valueToVisible(a,this.durationUnit,this.decimalPrecision,this.useAbbreviation)},parseDuration:function(b){if(b==null){return null}var a=this.durationParser.parse(b);if(!a){return null}a.unit=a.unit||this.durationUnit;return a},getDurationValue:function(){return this.parseDuration(this.getRawValue())},getErrors:function(a){var b;if(a){b=this.parseDuration(a);if(!b){return [this.L('invalidText')]}a=b.value}if(arguments.length>0&&a==null){a=''}return Ext.form.field.Number.prototype.getErrors.apply(this,arguments)},checkChange:function(){if(!this.suspendCheckChange){var c=this,a=c.getDurationValue(),b=c.lastValue;var d=a&&!b||!a&&b||a&&b&&(a.value!=b.value||a.unit!=b.unit);if(d&&!c.isDestroyed){c.lastValue=a;c.fireEvent('change',c,a,b);c.onChange(a,b)}}},getValue:function(){return this.value},applyChanges:function(a){a=a||this.task;this.setTaskValue(a,this.getValue(),this.durationUnit);a.fireEvent('taskupdated',a,this)},setValue:function(a,c){var b=a;if(Ext.isObject(a)){this.durationUnit=a.unit;b=a.value}Ext.form.field.Number.prototype.setValue.call(this,b);if(!this.readOnly&&(c||this.instantUpdate)&&!this.getSuppressTaskUpdate()&&this.task){this.applyChanges()}},assertValue:function(){var b=this,c=b.getValue(),e=b.durationUnit,a=b.getDurationValue();if(this.isValid()){var d=!a&&c||a&&(a.value!=c||a.unit!=e);if(d){b.setValue(a,!0)}}},beforeBlur:function(){this.assertValue()},onSpinUp:function(){var a=this;if(!a.readOnly){var b=a.getValue()||0;a.setSpinValue(Ext.Number.constrain(b+a.step,a.minValue,a.maxValue))}},onSpinDown:function(){var a=this;if(!a.readOnly){var b=a.getValue()||0;a.setSpinValue(Ext.Number.constrain(b-a.step,a.minValue,a.maxValue))}}},1,['durationfield'],['component','box','field','textfield','spinnerfield','numberfield','durationfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0,'durationfield':!0},['widget.durationfield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Duration',Gnt.widget,'DurationField'],0);Ext.cmd.derive('Gnt.field.Effort',Gnt.field.Duration,{alternateClassName:'Gnt.widget.EffortField',taskField:'effortField',getDurationUnitMethod:'getEffortUnit',setTaskValueMethod:'setEffort',getTaskValueMethod:'getEffort',applyChanges:function(a){a=a||this.task;this.setTaskValue(a,this.getValue()||null,this.durationUnit);a.fireEvent('taskupdated',a,this)}},0,['effortfield'],['component','box','field','textfield','spinnerfield','numberfield','durationfield','effortfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0,'durationfield':!0,'effortfield':!0},['widget.effortfield'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Effort',Gnt.widget,'EffortField'],0);Ext.cmd.derive('Gnt.field.BaselineStartDate',Gnt.field.StartDate,{taskField:'baselineStartDateField',getTaskValueMethod:'getBaselineStartDate',setTaskValueMethod:'setBaselineStartDate',isBaseline:!0,applyChanges:function(a,b){a=a||this.task;this.setTaskValue(a,this.value);if(!b){a.fireEvent('taskupdated',a,this)}}},0,['baselinestartdatefield'],['component','box','field','textfield','pickerfield','datefield','startdatefield','baselinestartdatefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'startdatefield':!0,'baselinestartdatefield':!0},['widget.baselinestartdatefield'],0,[Gnt.field,'BaselineStartDate'],0);Ext.cmd.derive('Gnt.field.BaselineEndDate',Gnt.field.EndDate,{taskField:'baselineEndDateField',getTaskValueMethod:'getBaselineEndDate',setTaskValueMethod:'setBaselineEndDate',isValidAgainstStartDate:function(a){return !this.task||!a||a>=this.task.getBaselineStartDate()},applyChanges:function(a,b){a=a||this.task;this.setTaskValue(a,this.value||null);if(!b){a.fireEvent('taskupdated',a,this)}}},0,['baselineenddatefield'],['component','box','field','textfield','pickerfield','datefield','enddatefield','baselineenddatefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'enddatefield':!0,'baselineenddatefield':!0},['widget.baselineenddatefield'],0,[Gnt.field,'BaselineEndDate'],0);Ext.cmd.derive('Gnt.widget.taskeditor.TaskForm',Gnt.widget.taskeditor.BaseForm,{alternateClassName:['Gnt.widget.TaskForm'],showGeneral:!0,showBaseline:!0,editBaseline:!1,nameConfig:null,durationConfig:null,startConfig:null,finishConfig:null,percentDoneConfig:null,baselineStartConfig:null,baselineFinishConfig:null,baselinePercentDoneConfig:null,effortConfig:null,constructor:function(b){b=b||{};this.showBaseline=b.showBaseline;this.editBaseline=b.editBaseline;var a=b.taskStore?b.taskStore.model.prototype:Gnt.model.Task.prototype;this.fieldNames={baselineEndDateField:a.baselineEndDateField,baselinePercentDoneField:a.baselinePercentDoneField,baselineStartDateField:a.baselineStartDateField,calendarIdField:a.calendarIdField,readOnlyField:a.readOnlyField,clsField:a.clsField,draggableField:a.draggableField,durationField:a.durationField,durationUnitField:a.durationUnitField,effortField:a.effortField,effortUnitField:a.effortUnitField,endDateField:a.endDateField,manuallyScheduledField:a.manuallyScheduledField,nameField:a.nameField,percentDoneField:a.percentDoneField,resizableField:a.resizableField,rollupField:a.rollupField,schedulingModeField:a.schedulingModeField,startDateField:a.startDateField,noteField:a.noteField,constraintTypeField:a.constraintTypeField,constraintDateField:a.constraintDateField};Gnt.widget.taskeditor.BaseForm.prototype.constructor.apply(this,arguments);this.addBodyCls('gnt-taskeditor-taskform')},buildFields:function(){var a=this,b=a.fieldNames;a.items=a.items||[];if(a.showGeneral){a.items.push(a.initFieldDefinition({xtype:'textfield',fieldLabel:a.L('taskNameText'),name:b.nameField,labelWidth:110,allowBlank:!1,flex:1,value:a.getTaskFieldValue(b.nameField)},a.nameConfig),{xtype:'fieldcontainer',layout:'hbox',defaults:{labelWidth:110,allowBlank:!1},items:[a.initFieldDefinition({xtype:'percentfield',fieldLabel:a.L('percentDoneText'),name:b.percentDoneField,margin:'0 0 0 8',flex:1,value:a.getTaskFieldValue(b.percentDoneField)},a.percentDoneConfig),a.initFieldDefinition({xtype:'durationfield',fieldLabel:a.L('durationText'),name:b.durationField,flex:1,value:a.getTaskFieldValue(b.durationField)},a.durationConfig)]},{xtype:'fieldset',title:a.L('datesText'),layout:'hbox',items:[{xtype:'container',layout:'anchor',flex:1,margin:'0 8 0 0',defaults:{labelWidth:110},items:[a.initFieldDefinition({xtype:'startdatefield',fieldLabel:a.L('startText'),width:'100%',allowBlank:!1,name:b.startDateField,value:a.getTaskFieldValue(b.startDateField)},a.startConfig),a.initFieldDefinition({xtype:'effortfield',fieldLabel:a.L('effortText'),name:b.effortField,invalidText:a.L('invalidEffortText'),width:'100%',allowBlank:!0,value:a.getTaskFieldValue(b.effortField)},a.effortConfig)]},a.initFieldDefinition({xtype:'enddatefield',fieldLabel:a.L('finishText'),flex:1,labelWidth:110,allowBlank:!1,name:b.endDateField,value:a.getTaskFieldValue(b.endDateField)},a.finishConfig)]})}if(a.showBaseline){a.items.push({xtype:'fieldset',title:a.L('baselineText'),layout:'hbox',items:[{xtype:'container',layout:'anchor',flex:1,margin:'0 8 0 0',defaults:{labelWidth:110,cls:'gnt-baselinefield'},items:[a.initFieldDefinition({xtype:'baselinestartdatefield',fieldLabel:a.L('baselineStartText'),name:b.baselineStartDateField,value:a.getTaskFieldValue(b.baselineStartDateField),width:'100%',readOnly:!a.editBaseline,forceReadOnly:!a.editBaseline},a.baselineStartConfig),a.initFieldDefinition({xtype:'percentfield',fieldLabel:a.L('baselinePercentDoneText'),width:'100%',name:b.baselinePercentDoneField,value:a.getTaskFieldValue(b.baselinePercentDoneField),readOnly:!a.editBaseline,forceReadOnly:!a.editBaseline},a.baselinePercentDoneConfig)]},a.initFieldDefinition({xtype:'baselineenddatefield',fieldLabel:a.L('baselineFinishText'),name:b.baselineEndDateField,cls:'gnt-baselinefield',flex:1,labelWidth:110,value:a.getTaskFieldValue(b.baselineEndDateField),readOnly:!a.editBaseline,forceReadOnly:!a.editBaseline},a.baselineFinishConfig)]})}},updateRecordWithFieldValue:function(c,a){var b=this;if(a.name!=b.fieldNames.constraintTypeField&&a.name!=b.fieldNames.constraintDateField){return Gnt.widget.taskeditor.BaseForm.prototype.updateRecordWithFieldValue.apply(this,arguments)}},updateRecordFn:function(a){var f=this,d=f.fieldNames,e=f.getForm(),c=e.findField(d.constraintTypeField),b=e.findField(d.constraintDateField);a.beginEdit();Gnt.widget.taskeditor.BaseForm.prototype.updateRecordFn.apply(this,arguments);if(c&&b&&a.setConstraint){a.setConstraint(c.getValue(),b.getValue())}a.endEdit()},buildTaskBuffer:function(a){Gnt.widget.taskeditor.BaseForm.prototype.buildTaskBuffer.apply(this,arguments);if(!a.getReadOnly()&&a.isReadOnly()){this.taskBuffer.isReadOnly=function(){return !0}}}},1,['taskform'],['component','box','container','panel','form','taskform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'taskform':!0},['widget.taskform'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.taskeditor,'TaskForm',Gnt.widget,'TaskForm'],0);Ext.cmd.derive('Gnt.field.SchedulingMode',Ext.form.field.ComboBox,{alternateClassName:'Gnt.widget.SchedulingmodeField',taskField:'schedulingModeField',setTaskValueMethod:'setSchedulingMode',getTaskValueMethod:'getSchedulingMode',pickerAlign:'tl-bl?',matchFieldWidth:!0,editable:!1,forceSelection:!0,triggerAction:'all',constructor:function(a){a=a||{};if(!a.store){this.initStore(a)}Ext.form.field.ComboBox.prototype.constructor.call(this,a);this.on('change',this.onFieldChange,this)},initStore:function(a){var b=this;a.store=b.getDefaultSchedulingModes()},getDefaultSchedulingModes:function(){var a=this;return [['Normal',a.L('Normal')],['FixedDuration',a.L('FixedDuration')],['EffortDriven',a.L('EffortDriven')],['DynamicAssignment',a.L('DynamicAssignment')]]},valueToVisible:function(d,e){var b=this,a=[];var c=this.findRecordByValue(d);if(c){a.push(c.data)}else {if(Ext.isDefined(b.valueNotFoundText)){a.push(b.valueNotFoundText)}}return b.displayTpl.apply(a)},getErrors:function(b){var a=Ext.form.field.ComboBox.prototype.getErrors.apply(this,arguments);if(a&&a.length){return a}if(!Ext.isEmpty(b)&&!(this.findRecordByDisplay(b)||this.findRecordByValue(b))){return [this.L('invalidText')]}else {return []}},getValue:function(){return this.value},onFieldChange:function(a,b){if(this.instantUpdate&&!this.getSuppressTaskUpdate()&&this.task&&this.value){this.applyChanges()}}},1,['schedulingmodefield'],['component','box','field','textfield','pickerfield','combobox','combo','schedulingmodefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'schedulingmodefield':!0},['widget.schedulingmodefield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'SchedulingMode',Gnt.widget,'SchedulingmodeField'],0);Ext.cmd.derive('Gnt.field.ManuallyScheduled',Ext.form.field.Checkbox,{alternateClassName:['Gnt.widget.ManuallyScheduledField'],taskField:'manuallyScheduledField',setTaskValueMethod:'setManuallyScheduled',getTaskValueMethod:'isManuallyScheduled',valueToVisible:function(a){return a?this.L('yes'):this.L('no')},getValue:function(){return this.value},setValue:function(a){Ext.form.field.Checkbox.prototype.setValue.call(this,a);if(this.instantUpdate&&!this.getSuppressTaskUpdate()&&this.task){this.applyChanges()}}},0,['manuallyscheduledfield'],['component','box','field','checkboxfield','checkbox','manuallyscheduledfield'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'manuallyscheduledfield':!0},['widget.manuallyscheduledfield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'ManuallyScheduled',Gnt.widget,'ManuallyScheduledField'],0);Ext.cmd.derive('Gnt.field.Calendar',Ext.form.field.ComboBox,{alternateClassName:'Gnt.widget.CalendarField',taskField:'calendarIdField',getTaskValueMethod:'getCalendarId',setTaskValueMethod:'setCalendarId',pickerAlign:'tl-bl?',matchFieldWidth:!0,editable:!0,triggerAction:'all',valueField:'Id',displayField:'Name',queryMode:'local',forceSelection:!0,allowBlank:!0,initComponent:function(){var a=this,b=a.getInitialConfig();if(!b.store||a.store.isEmptyStore){a.store={xclass:'Ext.data.Store',autoDestroy:!0,model:'Gnt.model.Calendar'}}if(!(a.store instanceof Ext.data.Store)){a.store=Ext.create(a.store)}Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments);a.updateCalendarsStore();a.mon(Ext.data.StoreManager,{add:function(b,a,c){if(a instanceof Gnt.data.Calendar){this.updateCalendarsStore()}},remove:function(b,a,c){if(a instanceof Gnt.data.Calendar){this.updateCalendarsStore()}},scope:a});a.on({show:function(){a.setReadOnly(a.readOnly)}});a.on('change',a.onFieldChange,a)},updateCalendarsStore:function(){this.store.loadData(this.getCalendarData())},setReadOnly:function(a){a=a||this.store.count()===0;Ext.form.field.ComboBox.prototype.setReadOnly.call(this,a)},getCalendarData:function(){return Ext.Array.map(Gnt.data.Calendar.getAllCalendars(),function(a){return {Id:a.calendarId,Name:a.name||a.calendarId}})},onSetTask:function(){this.setReadOnly(this.readOnly);this.setValue(this.getTaskValue())},valueToVisible:function(d,e){var a=this,b=[];var c=this.findRecordByValue(d);if(c){b.push(c.data)}else {if(Ext.isDefined(a.valueNotFoundText)&&typeof a.valueNotFoundText=='string'){b.push(a.valueNotFoundText)}}return a.displayTpl.apply(b)},getValue:function(){return this.value||''},getErrors:function(a){if(a){var c=this.findRecordByDisplay(a);if(c){if(this.task&&!this.task.isCalendarApplicable(c.getId())){return [this.L('calendarNotApplicable')]}}}var b=Ext.form.field.ComboBox.prototype.getErrors.apply(this,arguments);if(b&&b.length){return b}if(!Ext.isEmpty(a)&&!(this.findRecordByDisplay(a)||this.findRecordByValue(a))){return [this.L('invalidText')]}else {return []}},onFieldChange:function(b,a){this.setValue(a)},setValue:function(a){Ext.form.field.ComboBox.prototype.setValue.call(this,a);if(undefined===a||null===a||''===a){this.value=''}if(this.instantUpdate&&!this.getSuppressTaskUpdate()&&this.task){if(this.getTaskValue()!=this.value){this.applyChanges()}}},assertValue:function(){var a=this.getRawValue();if(!a&&this.value){this.setValue('')}else {Ext.form.field.ComboBox.prototype.assertValue.apply(this,arguments)}}},0,['calendarfield'],['component','box','field','textfield','pickerfield','combobox','combo','calendarfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'calendarfield':!0},['widget.calendarfield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Calendar',Gnt.widget,'CalendarField'],0);Ext.cmd.derive('Gnt.field.ConstraintType',Ext.form.field.ComboBox,{alternateClassName:'Gnt.widget.ConstraintType.Field',taskField:'constraintTypeField',getTaskValueMethod:'getConstraintType',setTaskValueMethod:'setConstraint',pickerAlign:'tl-bl?',matchFieldWidth:!1,forceSelection:!0,triggerAction:'all',initComponent:function(){var a=this;var b=a.L('none');a.store=a.store||Gnt.field.ConstraintType.buildDefaultConstraintTypeList(b);a.emptyText=a.emptyText||b;this.on('change',this.onFieldChange,this);Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},getErrors:function(b){var a=Ext.form.field.ComboBox.prototype.getErrors.apply(this,arguments);if(a&&a.length){return a}if(!Ext.isEmpty(b)&&!(this.findRecordByDisplay(b)||this.findRecordByValue(b))){return [this.L('invalidText')]}else {return []}},valueToVisible:function(d,e){var b=this,a=[];var c=this.findRecordByValue(!Ext.isEmpty(d)?d:null);if(c){a.push(c.data)}else {if(Ext.isDefined(b.valueNotFoundText)){a.push(b.valueNotFoundText||'')}}return b.displayTpl.apply(a)},applyChanges:function(a){var b=this,d=b.getValue(),c;a=a||b.task;c=Gnt.constraint.Base.getConstraintClass(d);b.setTaskValue(a,d,c&&c.getInitialConstraintDate(a)||null);a.fireEvent('taskupdated',a,b)},findRecordByDisplay:function(a){if(!a){return this.store.first()}return Ext.form.field.ComboBox.prototype.findRecordByDisplay.apply(this,arguments)},onFieldChange:function(c,b){var a=this;if(!a.getSuppressTaskUpdate()&&a.task&&(b||this.getRawValue()==a.L('none')||!b&&!this.getRawValue())){a.applyChanges()}},statics:{buildDefaultConstraintTypeList:function(b){var a=[];Ext.Array.each(Ext.ClassManager.getNamesByExpression('gntconstraint.*'),function(e){var c=Ext.ClassManager.get(e),d=c.alias[0],f=d.split('.').pop();c&&a.push([f,c.L('name')])});a=Ext.Array.sort(a,function(a,c){return a[1]>c[1]?1:-1});b&&a.unshift([null,b]);return a}}},0,['constrainttypefield'],['component','box','field','textfield','pickerfield','combobox','combo','constrainttypefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'constrainttypefield':!0},['widget.constrainttypefield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'ConstraintType',Gnt.widget.ConstraintType,'Field'],0);Ext.cmd.derive('Gnt.field.ConstraintDate',Gnt.field.Date,{taskField:'constraintDateField',getTaskValueMethod:'getConstraintDate',setTaskValueMethod:'setConstraintDate',reAssertValue:!1,valueToVisible:function(c,a){a=a||this.task;var e=this,b=a&&a.getConstraintClass(),d=e.format||Ext.Date.defaultFormat;if(b){return b.getDisplayableConstraintDateForFormat(c,d,a)}else {return c}},visibleToValue:function(a){var d=this,e=d.format||Ext.Date.defaultFormat,b=d.task,c=b&&b.getConstraintClass();if(c&&!Ext.isEmpty(a)){a=c.adjustConstraintDateFromDisplayableWithFormat(a,e,b)}return a}},0,['constraintdatefield'],['component','box','field','textfield','pickerfield','datefield','constraintdatefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'constraintdatefield':!0},['widget.constraintdatefield'],0,[Gnt.field,'ConstraintDate'],0);Ext.cmd.derive('Gnt.field.ReadOnly',Ext.form.field.Checkbox,{alternateClassName:['Gnt.widget.ReadOnlyField'],taskField:'readOnlyField',setTaskValueMethod:'setReadOnly',getTaskValueMethod:'getReadOnly',instantUpdate:!0,initEvents:function(){var a=this;a.on('change',a.onFieldValueChange,a);return Ext.form.field.Checkbox.prototype.initEvents.call(this)},valueToVisible:function(a){return a?this.L('yes'):this.L('no')},onFieldValueChange:function(a,b,c){if(a.instantUpdate&&!a.getSuppressTaskUpdate()&&a.task){a.applyChanges()}}},0,['readonlyfield'],['component','box','field','checkboxfield','checkbox','readonlyfield'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'readonlyfield':!0},['widget.readonlyfield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'ReadOnly',Gnt.widget,'ReadOnlyField'],0);Ext.cmd.derive('Gnt.widget.taskeditor.AdvancedForm',Gnt.widget.taskeditor.TaskForm,{alternateClassName:['Gnt.widget.AdvancedForm'],showGeneral:!1,showBaseline:!1,editBaseline:!1,showCalendar:!0,showManuallyScheduled:!0,showSchedulingMode:!0,showWbsCode:!0,showRollup:!1,showConstraint:!0,showReadOnly:!1,calendarConfig:null,manuallyScheduledConfig:null,schedulingModeConfig:null,wbsCodeConfig:null,rollupConfig:null,constraintTypeConfig:null,constraintDateConfig:null,defaults:{labelWidth:110,flex:1},bodyPadding:'5 5 0 0',readOnlyConfig:null,constructor:function(a){Gnt.widget.taskeditor.TaskForm.prototype.constructor.apply(this,arguments);this.addBodyCls('gnt-taskeditor-advancedtaskform')},buildFields:function(){var a=this,b=a.fieldNames;a.items=a.items||[];if(a.showCalendar){a.items.push(a.initFieldDefinition({xtype:'calendarfield',fieldLabel:this.L('calendarText'),name:b.calendarIdField,value:a.getTaskFieldValue(b.calendarIdField)},a.calendarConfig))}if(a.showManuallyScheduled){a.items.push(a.initFieldDefinition({xtype:'manuallyscheduledfield',fieldLabel:a.L('manuallyScheduledText'),name:b.manuallyScheduledField,value:a.getTaskFieldValue(b.manuallyScheduledField)},a.manuallyScheduledConfig))}if(a.showSchedulingMode){a.items.push(a.initFieldDefinition({xtype:'schedulingmodefield',fieldLabel:a.L('schedulingModeText'),name:b.schedulingModeField,value:a.getTaskFieldValue(b.schedulingModeField),allowBlank:!1},a.schedulingModeConfig))}if(a.showWbsCode){a.items.push(a.initFieldDefinition({xtype:'textfield',fieldLabel:a.L('wbsCodeText'),name:'wbsCode',forceReadOnly:!0,readOnly:!0,value:a.task&&a.task.getWBSCode()},a.wbsCodeConfig))}if(a.showRollup){this.items.push(a.initFieldDefinition({xtype:'checkboxfield',fieldLabel:this.L('rollupText'),name:b.rollupField,uncheckedValue:!1,value:a.getTaskFieldValue(b.rollupField)},a.rollupConfig))}if(a.showReadOnly){this.items.push(a.initFieldDefinition({xtype:'readonlyfield',fieldLabel:a.L('readOnlyText'),name:b.readOnlyField,value:a.getTaskFieldValue(b.readOnlyField)},a.readOnlyConfig))}if(a.showConstraint){a.items.push(a.initFieldDefinition({xtype:'constrainttypefield',fieldLabel:a.L('Constraint Type'),name:b.constraintTypeField,value:a.getTaskFieldValue(b.constraintTypeField)},a.constraintTypeConfig),a.initFieldDefinition({xtype:'constraintdatefield',fieldLabel:a.L('Constraint Date'),name:b.constraintDateField,value:a.getTaskFieldValue(b.constraintDateField)},a.constraintDateConfig))}}},1,['advanced_taskform'],['component','box','container','panel','form','taskform','advanced_taskform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'taskform':!0,'advanced_taskform':!0},['widget.advanced_taskform'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.taskeditor,'AdvancedForm',Gnt.widget,'AdvancedForm'],0);Ext.cmd.derive('Gnt.column.ResourceName',Ext.grid.column.Column,{flex:1,align:'left',resourceStore:null,constructor:function(a){a=a||{};this.text=a.text||this.L('text');Ext.apply(this,a);this.scope=this.scope||this;Ext.grid.column.Column.prototype.constructor.apply(this,arguments)},renderer:function(c,d,b){var a=b.getResource(this.resourceStore);return Ext.String.htmlEncode(a&&a.getName()||c)}},1,['resourcenamecolumn'],['component','box','container','headercontainer','gridcolumn','resourcenamecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'resourcenamecolumn':!0},['widget.resourcenamecolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column,'ResourceName'],0);Ext.cmd.derive('Gnt.column.AssignmentUnits',Ext.grid.column.Number,{dataIndex:'Units',format:'0 %',align:'left',editor:{xtype:'percentfield',minValue:0,maxValue:undefined,step:10,selectOnFocus:Ext.isIE?!1:!0},constructor:function(a){a=a||{};this.text=a.text||this.L('text');this.scope=this;Ext.grid.column.Number.prototype.constructor.apply(this,arguments)},renderer:function(a,c,b){if(a){return Ext.util.Format.number(a,this.format)}}},1,['assignmentunitscolumn'],['component','box','container','headercontainer','gridcolumn','numbercolumn','assignmentunitscolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'numbercolumn':!0,'assignmentunitscolumn':!0},['widget.assignmentunitscolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column,'AssignmentUnits'],0);Ext.cmd.derive('Gnt.widget.AssignmentEditGrid',Ext.grid.Panel,{assignmentStore:null,resourceStore:null,readOnly:!1,cls:'gnt-assignmentgrid',defaultAssignedUnits:100,confirmAddResource:!0,addResources:!0,taskId:null,refreshTimeout:100,resourceDupStore:null,resourceComboStore:null,assignmentUnitsEditor:null,constructor:function(a){Ext.apply(this,a);var b=a.assignmentStore;var c=a.taskStore||b.getTaskStore();this.store=a.store||new b.self({model:b.model,taskStore:c});var d=c.getResourceStore();this.resourceDupStore=a.resourceDupStore||new d.self({model:d.model,taskStore:c});this.resourceComboStore=new Ext.data.JsonStore({autoDestroy:!0,model:this.resourceDupStore.model});if(a.addResources!==undefined){this.addResources=a.addResources}this.columns=this.buildColumns();if(!this.readOnly){this.plugins=this.buildPlugins()}Ext.grid.Panel.prototype.constructor.apply(this,arguments)},suspendRefreshResources:function(){this.refreshResourcesSuspended++},resumeRefreshResources:function(){this.refreshResourcesSuspended--},refreshResources:function(){if(!this.refreshResourcesSuspended&&!this.isDestroyed){this.loadResources()}},suspendRefreshAssignments:function(){this.refreshAssignmentsSuspended++},resumeRefreshAssignments:function(){this.refreshAssignmentsSuspended--},refreshAssignments:function(){if(!this.refreshAssignmentsSuspended&&!this.isDestroyed){this.loadTaskAssignments()}},initComponent:function(){this.loadResources();var b=Ext.Function.createBuffered(this.refreshResources,this.refreshTimeout,this,[]);this.mon(this.resourceStore,{add:b,remove:b,load:b,clear:b});this.loadTaskAssignments();var a=Ext.Function.createBuffered(this.refreshAssignments,this.refreshTimeout,this,[]);this.mon(this.assignmentStore,{add:a,remove:a,load:a,clear:a});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},loadResources:function(b){if(!this.resourceStore){return !1}var a=Gnt.util.Data.cloneModelSet(this.resourceStore);this.resourceDupStore.loadData(a);this.resourceComboStore.loadData(a);if(!b){this.loadTaskAssignments()}return !0},afterRender:function(){var a;Ext.grid.Panel.prototype.afterRender.apply(this,arguments);if(this.taskId){var b=this.taskStore||this.assignmentStore.getTaskStore();a=b&&b.getModelById(this.taskId)}if(a){this.setEditableFields(a)}},getUnitsEditor:function(){if(!this.readOnly){if(!this.assignmentUnitsEditor){this.assignmentUnitsEditor=this.down('assignmentunitscolumn').getEditor()}}return this.assignmentUnitsEditor},setEditableFields:function(b){var a=this.getUnitsEditor();if(a){switch(b.getSchedulingMode()){case 'DynamicAssignment':a.setReadOnly(!0);break;default:a.setReadOnly(!1);}}},setReadOnly:function(a){if(this.cellEditing){if(a){this.cellEditing.disable()}else {this.cellEditing.enable()}}},loadTaskAssignments:function(a){a=a||this.taskId;if(!a){return !1}var d=this.taskStore||this.assignmentStore.getTaskStore(),b=d&&d.getModelById(a),c;if(b){c=b.getAssignments()}else {if(!this.assignmentStore){return !1}c=this.assignmentStore.queryBy(function(b){return b.getTaskId()==a})}this.taskId=a;var f=this.store,e=this.resourceDupStore,g=Gnt.util.Data.cloneModelSet(c,function(c,d){var f=d.getResourceId();var b=e.queryBy(function(e){var b=e.originalRecord;return (b.getId()||b.internalId)==f});if(b.getCount()){b=b.first();c.setResourceId(b.getId()||b.internalId)}});f.loadData(g);if(b&&this.rendered){this.setEditableFields(b)}return !0},insertAssignment:function(a,b){if(!a||!a.isModel){a=new this.store.model(a);if(!a){a.setUnits(this.defaultAssignedUnits)}}if(a.getResourceId()===undefined){a.setResourceId(null)}a.setTaskId(this.taskId);this.store.insert(0,a);var d=this,c=a.isValid;a.isValid=function(){return c.apply(this,arguments)&&d.isValidAssignment(this)};if(!b&&this.cellEditing){this.cellEditing.startEditByPosition({row:0,column:0})}return a},isValid:function(){var a=!0;this.store.each(function(b){if(!b.isValid()){a=!1;return !1}});return a},getAssignmentErrors:function(b){var a=b.getResourceId();if(!a){return [this.L('noValueText')]}if(!this.resourceDupStore.getModelById(a)){return [Ext.String.format(this.L('noResourceText'),a)]}},isValidAssignment:function(a){return !this.getAssignmentErrors(a)},buildPlugins:function(){var a=this.cellEditing=Ext.create('Ext.grid.plugin.CellEditing',{clicksToEdit:1});var b=a.startEdit;a.startEdit=function(){this.completeEdit();return b.apply(this,arguments)};a.on({beforeedit:this.onEditingStart,scope:this});return [a]},hide:function(){this.cellEditing.cancelEdit();return Ext.grid.Panel.prototype.hide.apply(this,arguments)},onEditingStart:function(c,a){var b=this.store.model.prototype;if(a.field==b.resourceIdField){this.assignment=a.record;this.resourceId=a.record.getResourceId();this.resourceComboStore.loadData(this.resourceDupStore.getRange());this.resourceComboStore.filter(this.resourcesFilter)}},resourceRender:function(d,a,e){var b=this.getAssignmentErrors(e);if(b&&b.length){a.tdCls='x-form-invalid';a.tdAttr='data-errorqtip="'+b.join('<br>')+'"'}else {a.tdCls='';a.tdAttr='data-errorqtip=""'}var c=this.resourceDupStore.getModelById(d);return Ext.String.htmlEncode(c&&c.getName()||d)},filterResources:function(d){var a=d.getId(),c=this.store.model.prototype.resourceIdField,b=!0;if(a!==this.resourceId){this.store.each(function(e){if(a==e.get(c)){b=!1;return !1}})}return b},onResourceComboAssert:function(a){var b=a.getRawValue();if(b){var e=this.resourceDupStore.findExact(a.displayField,b);var d=e!==-1?this.resourceDupStore.getAt(e):!1;if(!d){var g=this.assignment;var f=this;var c=function(h){var e=f.resourceStore.model,c={};c[e.prototype.nameField]=b;c=new e(c);c.setId(c.internalId);var d=f.resourceDupStore.add(c);if(d&&d.length){if(!h){a.getStore().add(c);a.setValue(d[0].getId())}else {g.setResourceId(d[0].getId())}}};if(this.confirmAddResource){var i=Ext.String.format(this.L('confirmAddResourceText'),Ext.String.htmlEncode(b));var h=Ext.Msg.confirm(this.L('confirmAddResourceTitle'),i,function(b){if(b=='yes'){c(!0)}});setTimeout(function(){h.toFront()},1)}else {c()}}else {a.select(d,!0)}}},buildColumns:function(){var a=this;this.resourceCombo=new Ext.form.field.ComboBox({queryMode:'local',store:this.resourceComboStore,allowBlank:!1,editing:this.addResources,validateOnChange:!1,autoSelect:!1,forceSelection:!this.addResources,valueField:this.resourceComboStore.model.prototype.idProperty,displayField:this.resourceComboStore.model.prototype.nameField,queryCaching:!1,listConfig:{getInnerTpl:function(){return '{'+this.displayField+':htmlEncode}'}}});this.resourcesFilter=Ext.create('Ext.util.Filter',{filterFn:this.filterResources,scope:this});if(this.addResources){Ext.Function.interceptBefore(this.resourceCombo,'assertValue',function(){a.onResourceComboAssert(this)})}return [{xtype:'resourcenamecolumn',editor:this.resourceCombo,dataIndex:this.assignmentStore.model.prototype.resourceIdField,renderer:this.resourceRender,scope:this},{xtype:'assignmentunitscolumn',assignmentStore:this.assignmentStore,dataIndex:this.assignmentStore.model.prototype.unitsField}]},saveResources:function(){Gnt.util.Data.applyCloneChanges(this.resourceDupStore,this.resourceStore)},saveTaskAssignments:function(){this.suspendRefreshAssignments();this.suspendRefreshResources();this.saveResources();var c=this.store.model,b=this.resourceDupStore,a=!0;Gnt.util.Data.applyCloneChanges(this.store,this.assignmentStore,function(f){var d=b.getById(this.getResourceId());if(!d||!d.originalRecord){a=!1;return}var e=d.originalRecord;f[c.prototype.resourceIdField]=e.getId()||e.internalId});this.resumeRefreshAssignments();this.resumeRefreshResources();return a},isDataChanged:function(){var a=this;return a.store&&a.store.getUpdatedRecords().length>0||a.store.getNewRecords().length>0||a.store.getRemovedRecords().length>0},isDataValid:function(){var a=!0;this.store.each(function(b){if(!b.isValid()){a=!1;return !1}});return a}},1,['assignmenteditgrid'],['component','box','container','panel','tablepanel','gridpanel','grid','assignmenteditgrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'assignmenteditgrid':!0},['widget.assignmenteditgrid'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget,'AssignmentEditGrid'],0);Ext.cmd.derive('Gnt.widget.DependencyGrid',Ext.grid.Panel,{readOnly:!1,showCls:!1,cls:'gnt-dependencygrid',task:null,dependencyStore:null,taskModel:null,direction:'predecessors',oppositeStore:null,taskStoreListeners:null,refreshTimeout:100,allowParentTaskDependencies:!1,useSequenceNumber:!1,lagEditor:null,typesCombo:null,constructor:function(a){a=a||{};Ext.Array.each(['idText','taskText','blankTaskText','invalidDependencyText','parentChildDependencyText','duplicatingDependencyText','transitiveDependencyText','cyclicDependencyText','typeText','lagText','clsText','endToStartText','startToStartText','endToEndText','startToEndText'],function(b){if(b in a){this[b]=a[b]}},this);this.store=a.store||new Ext.data.JsonStore({autoDestroy:!0,model:a.dependencyStore?a.dependencyStore.model:'Gnt.model.Dependency'});if(!this.readOnly){this.plugins=this.buildPlugins()}this.direction=a.direction||this.direction;if(!a.taskModel){a.taskModel=Ext.ClassManager.get('Gnt.model.Task');if(a.dependencyStore){var b=a.dependencyStore.getTaskStore();if(b){a.taskModel=b.model}}}if(a.oppositeStore){this.setOppositeStore(a.oppositeStore)}Ext.grid.Panel.prototype.constructor.call(this,a)},initComponent:function(){if(this.task){this.setTask(this.task);this.loadDependencies(this.task)}if(!this.title){this.title=this.direction==='predecessors'?this.L('predecessorsText'):this.L('successorsText')}this.columns=this.buildColumns();Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},destroy:function(){if(this.deferredStoreBind){this.tasksCombo.un('render',this.bindTaskStore,this)}this.tasksCombo.destroy();this.typesCombo.destroy();this.lagEditor.destroy();Ext.grid.Panel.prototype.destroy.apply(this,arguments);this.cellEditing.destroy()},setTask:function(a){if(!a){return}this.task=a;var b=a.dependencyStore||a.getTaskStore().dependencyStore;if(b&&b!==this.dependencyStore){if(this.dependencyStore){this.mun(this.dependencyStore,this.onDependencyStoreDataChanged,this)}this.dependencyStore=b;if(this.typesCombo){this.typesCombo.store.filter(this.typesFilter)}this.mon(this.dependencyStore,this.onDependencyStoreDataChanged,this)}this.setReadOnly(a.isReadOnly())},setReadOnly:function(a){if(this.cellEditing){if(a){this.cellEditing.disable()}else {this.cellEditing.enable()}}},onDependencyStoreDataChanged:function(){this.loadDependencies()},buildPlugins:function(){var a=this.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});a.on({beforeedit:this.onEditingStart,edit:this.onEditingDone,scope:this});return [a]},hide:function(){this.cellEditing.cancelEdit();Ext.grid.Panel.prototype.hide.apply(this,arguments)},onEditingStart:function(c,b){var a=this.store.model.prototype;switch(b.field){case a.lagField:this.lagEditor.durationUnit=b.record.getLagUnit();break;case a.typeField:this.typesCombo.store.filter(this.typesFilter);if(this.typesCombo.store.count()<2){return !1};break;case a.fromField:if(this.direction=='predecessors'){this.activeDependency=b.record;this.refilterTasksCombo()};break;case a.toField:if(this.direction!='predecessors'){this.activeDependency=b.record;this.refilterTasksCombo()};break;}},onEditingDone:function(c,a){var b=this.store.model.prototype;if(a.field==b.lagField){a.record.setLagUnit(this.lagEditor.durationUnit)}this.getView().refreshView()},dependencyTypeRender:function(b){var a=this.store.model.Type;switch(b){case a.EndToStart:return this.L('endToStartText');case a.StartToStart:return this.L('startToStartText');case a.EndToEnd:return this.L('endToEndText');case a.StartToEnd:return this.L('startToEndText');}return b},taskValidate:function(c,b){if(!c){return [this.L('blankTaskText')]}if(!b.isValid()){var a=this.getDependencyErrors(b);if(a&&a.length){return a}return [this.L('invalidDependencyText')]}},taskRender:function(e,a,f){var b=this.taskValidate(e,f),c;if(b&&b.length){a.tdCls='x-form-invalid';a.tdAttr='data-errorqtip="'+b.join('<br>')+'"'}else {a.tdCls='';a.tdAttr='data-errorqtip=""'}var d=this.dependencyStore&&this.dependencyStore.getTaskStore();if(d){c=d.getModelById(e);return c&&Ext.String.htmlEncode(c.getName())||''}return ''},filterTasks:function(e){var c=e.getId(),a,b,d;if(this.direction==='predecessors'){b=c;d=this.task.getId();a=this.activeDependency&&this.activeDependency.getSourceId()}else {d=c;b=this.task.getId();a=this.activeDependency&&this.activeDependency.getTargetId()}return !this.activeDependency||c==a||this.isValidDependency(b,d)},refilterTasksCombo:function(){this.tasksCombo.getStore().addFilter(this.tasksFilter)},bindTaskStore:function(){var b=this.dependencyStore&&this.dependencyStore.getTaskStore();if(b){if(!this.taskStoreListeners){var a=Ext.Function.createBuffered(this.bindTaskStore,this.refreshTimeout,this,[]);this.taskStoreListeners=this.mon(b,{nodeappend:a,nodeinsert:a,noderemove:a,update:a,refresh:a,clear:a,'nodestore-datachange-end':a,scope:this,destroyable:!0})}var c=new Ext.data.JsonStore({autoDestroy:!0,model:b.model,sorters:b.model.prototype.nameField});var d=b.getRoot();c.loadData(Gnt.util.Data.cloneModelSet(b.toArray(),function(b,a){if(a===d||a.hidden||a.isReadOnly()){return !1}if(!a.getId()){b.setId(a.getId())}}));this.tasksFilter=new Ext.util.Filter({id:'dependencygrid-tasksfilter',filterFn:this.filterTasks,scope:this});c.filter(this.tasksFilter);this.tasksCombo.bindStore(c)}},buildTasksCombo:function(){var a=this;return new Ext.form.field.ComboBox({queryMode:'local',allowBlank:!1,editing:!1,forceSelection:!0,valueField:this.taskModel.prototype.idProperty,displayField:this.taskModel.prototype.nameField,queryCaching:!1,listConfig:{getInnerTpl:function(){return '{'+this.displayField+':htmlEncode}'}},validator:function(b){if(!b){return a.L('blankTaskText')}return !0}})},filterAllowedTypes:function(d){if(!this.dependencyStore||!this.dependencyStore.allowedDependencyTypes){return !0}var b=this.dependencyStore.allowedDependencyTypes;var c=this.store.model.Type;for(var a=0,f=b.length;a<f;a++){var e=c[b[a]];if(d.getId()==e){return !0}}return !1},buildTypesCombo:function(){var a=this.store.model.Type;this.typesFilter=new Ext.util.Filter({id:'typesfilter',filterFn:this.filterAllowedTypes,scope:this});var b=new Ext.data.ArrayStore({fields:[{name:'id',type:'int'},'text'],data:[[a.EndToStart,this.L('endToStartText')],[a.StartToStart,this.L('startToStartText')],[a.EndToEnd,this.L('endToEndText')],[a.StartToEnd,this.L('startToEndText')]]});b.filter(this.typesFilter);return new Ext.form.field.ComboBox({triggerAction:'all',queryMode:'local',editable:!1,valueField:'id',displayField:'text',store:b})},buildLagEditor:function(){return new Gnt.field.Duration({minValue:Number.NEGATIVE_INFINITY})},buildColumns:function(){var b=this,a=this.store.model.prototype,e=[],f=this.dependencyStore&&this.dependencyStore.getTaskStore();this.tasksCombo=this.buildTasksCombo();if(!f){this.deferredStoreBind=!0;this.tasksCombo.on('afterrender',this.bindTaskStore,this)}else {this.bindTaskStore()}var d={};var c=a[this.direction==='predecessors'?'fromField':'toField'];if(this.useSequenceNumber){d={text:this.L('snText'),dataIndex:c,renderer:function(e,f,d){var a=b.dependencyStore&&b.dependencyStore.getTaskStore(),c=a&&a.getModelById(d.get('From'));return c?c.getSequenceNumber():''},width:50}}else {d={text:this.L('idText'),dataIndex:c,width:50}}e.push(d,{text:this.L('taskText'),dataIndex:c,flex:1,editor:this.tasksCombo,renderer:function(c,d,a){return b.taskRender(c,d,a)}});this.lagEditor=this.buildLagEditor();this.typesCombo=this.buildTypesCombo();e.push({text:this.L('typeText'),dataIndex:a.typeField,width:120,renderer:this.dependencyTypeRender,scope:this,editor:this.typesCombo},{text:this.L('lagText'),dataIndex:a.lagField,width:100,editor:this.lagEditor,renderer:function(d,e,c){return b.lagEditor.valueToVisible(d,c.get(a.lagUnitField),2)}},{text:this.L('clsText'),dataIndex:a.clsField,hidden:!this.showCls,width:100});return e},insertDependency:function(d,f){if(!this.dependencyStore){return}var e=this.task.getId(),b=this.store.model.prototype,a={},h=this;if(d){a=d}else {a[b.typeField]=this.typesCombo.store.getAt(0).getId();a[b.lagField]=0;a[b.lagUnitField]='d'}if(this.direction==='predecessors'){a[b.toField]=e}else {a[b.fromField]=e}var c=this.store.insert(0,a);if(c.length){var g=c[0].isValid;c[0].isValid=function(){return g.call(this,!1)&&h.isValidDependency(this)}}if(!f){this.cellEditing.startEditByPosition({row:0,column:1})}return c},onOppositeStoreChange:function(){this.getView().refreshView()},setOppositeStore:function(b){var a={update:this.onOppositeStoreChange,datachanged:this.onOppositeStoreChange,scope:this};if(this.oppositeStore){this.mun(this.oppositeStore,a)}this.oppositeStore=b;this.mon(this.oppositeStore,a)},loadDependencies:function(a){var d=this;a=a||this.task;if(!a){return}if(this.task!==a){this.setTask(a)}var b;if(this.direction==='predecessors'){b=a.getIncomingDependencies(!0);if(!this.oppositeStore){this.oppositeData=a.getOutgoingDependencies(!0)}}else {b=a.getOutgoingDependencies(!0);if(!this.oppositeStore){this.oppositeData=a.getIncomingDependencies(!0)}}var c=Gnt.util.Data.cloneModelSet(b,function(b){var c=b.isValid;b.isValid=function(){return c.call(this,!1)&&d.isValidDependency(this)}});this.store.loadData(c);this.fireEvent('loaddependencies',this,this.store,c,a)},getDependencyErrors:function(c,e){var a=this,j=a.dependencyStore,d=[],b,h;if(c instanceof Gnt.model.Dependency){b=c;c=a.task.getId();e=c;h=b.getType();if(a.direction==='predecessors'){c=b.getSourceId()}else {e=b.getTargetId()}}if(b){a.store.each(function(f){if(c==f.getSourceId()&&e==f.getTargetId()&&f!==b){d.push(a.L('duplicatingDependencyText'));return !1}});if(d.length){return d}}var f=a.store.getRange();b&&f.splice(Ext.Array.indexOf(f,b),1);var i=a.task[a.direction];var g=j.getDependencyError(c,e,h,f,i);if(g){switch(g){case -3:case -8:case -5:case -6:return [a.L('transitiveDependencyText')];case -4:case -7:return [a.L('cyclicDependencyText')];case -9:return [a.L('parentChildDependencyText')];}return [this.L('invalidDependencyText')]}return d},isValidDependency:function(){return !this.getDependencyErrors.apply(this,arguments).length},isValid:function(){var a=!0;this.store.each(function(b){if(!b.isValid()){a=!1;return !1}});return a},saveDependencies:function(){if(!this.dependencyStore||!this.isValid()){return}Gnt.util.Data.applyCloneChanges(this.store,this.dependencyStore)},isDataChanged:function(){var a=this;return a.store&&a.store.getUpdatedRecords().length>0||a.store.getNewRecords().length>0||a.store.getRemovedRecords().length>0},isDataValid:function(){return this.isValid()}},1,['dependencygrid'],['component','box','container','panel','tablepanel','gridpanel','grid','dependencygrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'dependencygrid':!0},['widget.dependencygrid'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget,'DependencyGrid'],0);Ext.cmd.derive('Gnt.widget.taskeditor.TaskEditor',Gnt.widget.taskeditor.BaseEditor,{alternateClassName:['Gnt.widget.TaskEditor'],taskFormClass:'Gnt.widget.taskeditor.TaskForm',advancedFormClass:'Gnt.widget.taskeditor.AdvancedForm',showAssignmentGrid:!0,showDependencyGrid:!0,allowParentTaskDependencies:!0,showNotes:!0,showAdvancedForm:!0,showRollup:!1,showReadOnly:!0,showBaseline:!0,taskFormConfig:null,dependencyGridClass:'Gnt.widget.DependencyGrid',dependencyGridConfig:null,assignmentGridClass:'Gnt.widget.AssignmentEditGrid',assignmentGridConfig:null,advancedFormConfig:null,notesConfig:null,notesPanel:null,notesEditor:null,taskForm:null,assignmentGrid:null,dependencyGrid:null,advancedForm:null,margin:0,buildItems:function(){var a=this,c=[];var b=a.clonedStores||{};a.taskFormConfig=a.taskFormConfig||{};Ext.applyIf(a.taskFormConfig,{showBaseline:a.showBaseline,showRollup:!1});a.taskForm=Ext.create(a.taskFormClass,Ext.apply({task:a.task,border:!1,taskStore:a.taskStore},a.taskFormConfig));c.push(a.taskForm);if(a.showDependencyGrid){a.dependencyGrid=Ext.create(a.dependencyGridClass,Ext.apply({allowParentTaskDependencies:a.allowParentTaskDependencies,taskModel:a.taskStore.model,task:a.task,margin:0,border:!1,tbar:{layout:'auto',items:[{xtype:'button',iconCls:'gnt-action-add',text:a.L('addDependencyText'),itemId:'add-dependency-btn',handler:function(){a.dependencyGrid.insertDependency()}},{xtype:'button',iconCls:'gnt-action-remove',text:a.L('dropDependencyText'),itemId:'drop-dependency-btn',disabled:!0,handler:function(){var b=a.dependencyGrid.getSelectionModel().getSelection();if(b&&b.length){a.dependencyGrid.store.remove(b)}}}]},listeners:{selectionchange:function(d,c){var b=a.dependencyGrid;if(!b.dropDepBtn){b.dropDepBtn=b.down('#drop-dependency-btn')}b.dropDepBtn&&b.dropDepBtn.setDisabled(!c.length)}}},a.dependencyGridConfig));c.push(a.dependencyGrid)}if(a.showAssignmentGrid&&a.assignmentStore&&a.resourceStore){if(!b.assignmentStore){b.assignmentStore=a.cloneAssignmentStore(a.task)}if(!b.resourceStore){b.resourceStore=a.cloneResourceStore(a.task)}a.assignmentGrid=Ext.create(a.assignmentGridClass,Ext.apply({assignmentStore:a.assignmentStore,resourceStore:a.resourceStore,border:!1,margin:0,store:b.assignmentStore,resourceDupStore:b.resourceStore,tbar:{layout:'auto',items:[{xtype:'button',iconCls:'gnt-action-add',text:a.L('addAssignmentText'),itemId:'add-assignment-btn',handler:function(){a.assignmentGrid.insertAssignment()}},{xtype:'button',iconCls:'gnt-action-remove',text:a.L('dropAssignmentText'),itemId:'drop-assignment-btn',disabled:!0,handler:function(){var b=a.assignmentGrid.getSelectionModel().getSelection();if(b&&b.length){a.assignmentGrid.store.remove(b)}}}]},listeners:{afterrender:{fn:function(b){b.loadTaskAssignments(a.task.get(a.task.idProperty))},single:!0},selectionchange:function(d,c){var b=a.assignmentGrid;if(!b.dropBtn){b.dropBtn=b.down('#drop-assignment-btn')}b.dropBtn&&b.dropBtn.setDisabled(!c.length)}}},a.assignmentGridConfig));c.push(a.assignmentGrid)}if(a.showAdvancedForm){a.advancedFormConfig=a.advancedFormConfig||{};a.advancedForm=Ext.create(a.advancedFormClass,Ext.applyIf(a.advancedFormConfig,{showGeneral:!1,showBaseline:!1,showCalendar:!0,showManuallyScheduled:!0,showSchedulingMode:!0,showWbsCode:!0,showConstraint:!0,showRollup:a.showRollup,showReadOnly:a.showReadOnly,layout:{type:'table',columns:2},border:!1,margin:0,task:a.task,taskStore:a.taskStore}));c.push(a.advancedForm)}if(a.showNotes){a.notesEditor=Ext.create('Ext.form.field.HtmlEditor',Ext.apply({listeners:{afterrender:function(b){a.notesEditor.setValue(a.task.get(a.task.noteField))}},readOnly:a.task&&!a.task.isEditable(a.task.noteField),isDataChanged:function(){return this.isDirty()}},a.notesConfig));a.notesPanel=Ext.create('Ext.panel.Panel',{border:!1,margin:0,layout:'fit',items:a.notesEditor});c.push(a.notesPanel)}if(!a.taskForm.title){a.taskForm.title=a.L('generalText')}if(a.assignmentGrid&&!a.assignmentGrid.title){a.assignmentGrid.title=a.L('resourcesText')}if(a.advancedForm&&!a.advancedForm.title){a.advancedForm.title=a.L('advancedText')}if(a.notesPanel&&!a.notesPanel.title){a.notesPanel.title=a.L('notesText')}return c},bindDependencyGrid:function(){var a=this.clonedStores.dependencyStore;var b=this.dependencyGrid;b.store.taskStore=this.clonedStores.taskStore;if(a){this.mon(b,{loaddependencies:function(c,b){a.loadData(b.getRange().concat(Gnt.util.Data.cloneModelSet(c.oppositeData)))}});this.mon(b.store,{add:function(c,b){a.add(b)},remove:function(c,b){a.remove(b)}});this.dependencyGridBound=!0}},loadTask:function(b){if(!b){return}this.task=b;var a=this,d=a.taskForm,f=a.dependencyGrid,c=a.assignmentGrid,j=b.isReadOnly();d.setSuppressTaskUpdate(!0);d.getForm().reset();Gnt.widget.taskeditor.BaseEditor.prototype.loadTask.apply(this,arguments);var e=a.clonedStores,g=a.taskBuffer;if(f){if(!a.dependencyGridBound){a.bindDependencyGrid()}f.loadDependencies(b);f.tab.setVisible(a.allowParentTaskDependencies||b.isLeaf())}if(c){if(e.assignmentStore!==c.getStore()){c.reconfigure(e.assignmentStore)}if(c.resourceDupStore!==e.resourceStore){c.resourceDupStore=e.resourceStore}c.loadResources(!0);c.loadTaskAssignments(b.getId()||b.getPhantomId());c.task=g}d.loadRecord(b,g);if(a.advancedForm){a.advancedForm.setSuppressTaskUpdate(!0);var i=a.advancedForm.getForm();i.reset();a.advancedForm.loadRecord(b,d.taskBuffer);var h=i.findField('wbsCode');if(h){h.setValue(b.getWBSCode())}a.advancedForm.setSuppressTaskUpdate(!1)}d.setSuppressTaskUpdate(!1);if(a.notesEditor){a.notesEditor.setValue(b.getNote())}a.setReadOnly(j);a.fireEvent('loadtask',a,b)},updateReadOnly:function(){var a=this,d=a.taskBuffer,b=a.getReadOnly(),c=b||d.isReadOnly();if(d){if(a.taskForm){if(b!=a.taskForm.getReadOnly()){a.taskForm.setReadOnly(b)}else {a.taskForm.updateReadOnly()}}if(a.assignmentGrid){a.assignmentGrid.setReadOnly(c);a.assignmentGrid.down('toolbar').setVisible(!c)}if(a.dependencyGrid){a.dependencyGrid.down('toolbar').setVisible(!c)}if(a.notesEditor){a.notesEditor.setReadOnly(c||!d.isEditable(d.noteField))}if(a.advancedForm){if(b!=a.advancedForm.getReadOnly()){a.advancedForm.setReadOnly(b)}else {a.advancedForm.updateReadOnly()}}}},doValidate:function(a){var b=Gnt.widget.taskeditor.BaseEditor.prototype.doValidate.apply(this,arguments);if(this.taskForm&&!this.taskForm.isValid()){b=!1;a&&a(this.getTabByComponent(this.taskForm),this.taskForm)}if(this.dependencyGrid&&!this.dependencyGrid.isValid()){b=!1;a&&a(this.getTabByComponent(this.dependencyGrid),this.dependencyGrid)}if(this.assignmentGrid&&!this.assignmentGrid.isValid()){b=!1;a&&a(this.getTabByComponent(this.assignmentGrid),this.assignmentGrid)}if(this.advancedForm&&!this.advancedForm.isValid()){b=!1;a&&a(this.getTabByComponent(this.advancedForm),this.advancedForm)}return b},doUpdateTask:function(){this.taskForm&&this.taskForm.updateRecord();this.advancedForm&&this.advancedForm.updateRecord();this.notesEditor&&this.task.set(this.task.noteField,this.notesEditor.getValue());this.assignmentGrid&&this.assignmentGrid.saveTaskAssignments();this.dependencyGrid&&this.dependencyGrid.saveDependencies()},isDataChanged:function(a){var b=Gnt.widget.taskeditor.BaseEditor.prototype.isDataChanged.apply(this,arguments);if(this.taskForm&&this.taskForm.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.taskForm))}if(this.dependencyGrid&&this.dependencyGrid.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.dependencyGrid))}if(this.assignmentGrid&&this.assignmentGrid.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.assignmentGrid))}if(this.advancedForm&&this.advancedForm.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.advancedForm))}if(this.notesEditor&&this.notesEditor.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.notesEditor))}return b}},0,['taskeditor'],['component','box','container','panel','tabpanel','taskeditor'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0,'taskeditor':!0},['widget.taskeditor'],0,[Gnt.widget.taskeditor,'TaskEditor',Gnt.widget,'TaskEditor'],0);Ext.cmd.derive('Gnt.plugin.taskeditor.TaskEditor',Gnt.plugin.taskeditor.BaseEditor,{alternateClassName:['Gnt.plugin.TaskEditor'],ptype:'gantt_taskeditor',taskEditorCls:'Gnt.widget.taskeditor.TaskEditor',height:390,width:600,taskEditorConfigs:'l10n,task,taskStore,assignmentStore,resourceStore,generalText,resourcesText,dependencyText,addDependencyText,dropDependencyText,notesText,advancedText,wbsCodeText,addAssignmentText,dropAssignmentText,showAssignmentGrid,showDependencyGrid,allowParentTaskDependencies,showNotes,showStyle,showAdvancedForm,taskFormClass,advancedFormClass,taskFormConfig,dependencyGridConfig,assignmentGridConfig,advancedFormConfig,styleFormConfig,dependencyGridClass,assignmentGridClass',constructor:function(a){Gnt.plugin.taskeditor.BaseEditor.prototype.constructor.apply(this,arguments);this.addFilter(function(b){return b&&!b.isProject})},init:function(a){Gnt.plugin.taskeditor.BaseEditor.prototype.init.apply(this,arguments);a.taskEditor=this}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},['plugin.gantt_taskeditor'],0,[Gnt.plugin.taskeditor,'TaskEditor',Gnt.plugin,'TaskEditor'],0);Ext.cmd.derive('Gnt.widget.taskeditor.ProjectForm',Gnt.widget.taskeditor.BaseForm,{alternateClassName:['Gnt.widget.ProjectForm'],showCalendar:!1,nameConfig:null,readOnlyConfig:null,allowDependenciesConfig:null,startConfig:null,finishConfig:null,calendarConfig:null,constructor:function(b){b=b||{};var a=b.taskStore&&b.taskStore.projectModel&&b.taskStore.projectModel.prototype||Gnt.model.Project.prototype;this.fieldNames={calendarIdField:a.calendarIdField,readOnlyField:a.readOnlyField,allowDependenciesField:a.allowDependenciesField,startDateField:a.startDateField,endDateField:a.endDateField,nameField:a.nameField,descriptionField:a.descriptionField};Gnt.widget.taskeditor.BaseForm.prototype.constructor.apply(this,arguments);this.addBodyCls('gnt-projecteditor-projectform')},buildFields:function(){var a=this,b=a.fieldNames;a.items=a.items||[];a.items.push({xtype:'fieldset',title:a.L('projectText'),layout:'vbox',defaults:{allowBlank:!1},items:[a.initFieldDefinition({xtype:'textfield',fieldLabel:a.L('nameText'),name:b.nameField,labelWidth:110,flex:1,value:a.getTaskFieldValue(b.nameField)},a.nameConfig),a.initFieldDefinition({xtype:'readonlyfield',fieldLabel:a.L('readOnlyText'),name:b.readOnlyField,labelWidth:110,flex:1,value:a.getTaskFieldValue(b.readOnlyField)},a.readOnlyConfig),a.initFieldDefinition({xtype:'checkboxfield',fieldLabel:a.L('allowDependenciesText'),name:b.allowDependenciesField,labelWidth:110,flex:1,value:a.getTaskFieldValue(b.allowDependenciesField)},a.allowDependenciesConfig)]},a.initFieldDefinition({xtype:'fieldset',title:a.L('datesText'),layout:'hbox',defaults:{labelWidth:110,allowBlank:!1,margin:'5 5 5 0'},items:[a.initFieldDefinition({xtype:'startdatefield',fieldLabel:a.L('startText'),width:260,name:b.startDateField,value:a.getTaskFieldValue(b.startDateField)},a.startConfig),a.initFieldDefinition({xtype:'enddatefield',fieldLabel:a.L('finishText'),flex:1,labelWidth:110,name:b.endDateField,value:a.getTaskFieldValue(b.endDateField)},a.finishConfig)]}));if(a.showCalendar){a.items.push({xtype:'fieldset',layout:'hbox',defaults:{labelWidth:110,allowBlank:!1,margin:'5 0 5 0'},items:[a.initFieldDefinition({xtype:'calendarfield',fieldLabel:this.L('calendarText'),width:260,name:b.calendarIdField,value:a.getTaskFieldValue(b.calendarIdField)},a.calendarConfig)]})}}},1,['projectform'],['component','box','container','panel','form','projectform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'projectform':!0},['widget.projectform'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.widget.taskeditor,'ProjectForm',Gnt.widget,'ProjectForm'],0);Ext.cmd.derive('Gnt.widget.taskeditor.ProjectEditor',Gnt.widget.taskeditor.BaseEditor,{alternateClassName:['Gnt.widget.ProjectEditor'],eventIndicator:'project',projectFormClass:'Gnt.widget.taskeditor.ProjectForm',showDescription:!0,projectFormConfig:null,descriptionConfig:null,descriptionPanel:null,descriptionEditor:null,projectForm:null,buildItems:function(){var a=this,c=[],b=this.task;a.projectForm=Ext.create(a.projectFormClass,Ext.applyIf(a.projectFormConfig||{},{task:b,taskStore:a.taskStore}));c.push(a.projectForm);if(a.showDescription){a.descriptionEditor=Ext.create('Ext.form.field.HtmlEditor',Ext.apply({listeners:{afterrender:function(b){a.descriptionEditor.setValue(a.task.get(a.task.descriptionField))}},readOnly:b&&!b.isEditable(b.descriptionField),isDataChanged:function(){return this.isDirty()}},a.descriptionConfig));a.descriptionPanel=Ext.create('Ext.panel.Panel',{border:!1,layout:'fit',items:a.descriptionEditor});c.push(a.descriptionPanel)}if(!a.projectForm.title){a.projectForm.title=a.L('generalText')}if(a.descriptionPanel&&!a.descriptionPanel.title){a.descriptionPanel.title=this.L('descriptionText')}return c},loadProject:function(a){this.loadTask.apply(this,arguments)},loadTask:function(a){if(!a){return}this.task=a;var b=this.projectForm;b.setSuppressTaskUpdate(!0);b.getForm().reset();Gnt.widget.taskeditor.BaseEditor.prototype.loadTask.apply(this,arguments);b.loadRecord(a,this.taskBuffer);if(this.descriptionEditor){this.descriptionEditor.setValue(a.getDescription())}this.setReadOnly(a.isReadOnly());b.setSuppressTaskUpdate(!1);this.fireEvent('loadproject',this,a)},setReadOnly:function(c){var b=this,a=b.task;if(a){if(b.descriptionEditor){b.descriptionEditor.setReadOnly(c||!a.isEditable(a.descriptionField))}}},onTaskUpdated:function(a){this.setReadOnly(a.isReadOnly())},updateProject:function(){this.updateTask()},loadClonedDependencyStore:Ext.emptyFn,loadClonedResourceStore:Ext.emptyFn,loadClonedAssignmentStore:Ext.emptyFn,doValidate:function(a){var b=Gnt.widget.taskeditor.BaseEditor.prototype.doValidate.apply(this,arguments);if(this.projectForm&&!this.projectForm.isValid()){b=!1;a&&a(this.getTabByComponent(this.projectForm))}return b},doUpdateTask:function(){var a=this.task;this.projectForm&&this.projectForm.updateRecord();this.descriptionEditor&&a.set(a.descriptionField,this.descriptionEditor.getValue())},isDataChanged:function(a){var b=Gnt.widget.taskeditor.BaseEditor.prototype.isDataChanged.apply(this,arguments);if(this.projectForm&&this.projectForm.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.projectForm))}if(this.descriptionEditor&&this.descriptionEditor.isDataChanged()){b=!0;a&&a(this.getTabByComponent(this.descriptionEditor))}return b}},0,['projecteditor'],['component','box','container','panel','tabpanel','projecteditor'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0,'projecteditor':!0},['widget.projecteditor'],0,[Gnt.widget.taskeditor,'ProjectEditor',Gnt.widget,'ProjectEditor'],0);Ext.cmd.derive('Gnt.plugin.taskeditor.ProjectEditor',Gnt.plugin.taskeditor.BaseEditor,{alternateClassName:['Gnt.plugin.ProjectEditor'],ptype:'gantt_projecteditor',taskEditorCls:'Gnt.widget.taskeditor.ProjectEditor',taskEditorConfigs:'l10n,task,taskStore,assignmentStore,resourceStore,projectFormClass,showDescription,projectFormConfig,descriptionConfig',constructor:function(a){Gnt.plugin.taskeditor.BaseEditor.prototype.constructor.apply(this,arguments);this.addCls('gnt-projecteditor-window');this.addFilter(function(b){return b&&b.isProject})},init:function(a){Gnt.plugin.taskeditor.BaseEditor.prototype.init.apply(this,arguments);a.projectEditor=this}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},['plugin.gantt_projecteditor'],0,[Gnt.plugin.taskeditor,'ProjectEditor',Gnt.plugin,'ProjectEditor'],0);Ext.cmd.derive('CGA.model.Line',Ext.data.Model,{idProperty:'milestoneId',fields:[{name:'milestoneId'},{name:'Date',type:'date'},{name:'Cls',type:'string'},{name:'Text',type:'string'}]},0,0,0,0,0,0,[CGA.model,'Line'],0);Ext.cmd.derive('CGA.plugin.MilestoneLine',Sch.plugin.Lines,{innerTpl:'<span class="sch-gantt-project-line-text">{Text}</span>',showHeaderElements:!0,taskStore:null,linesFor:'both',allRemoved:!1,loaded:!1,init:function(a){this.taskStore=this.taskStore||a.getTaskStore();this.bindTaskStore(this.taskStore);if(!this.store){this.store=new Ext.data.Store({model:'CGA.model.Line'})}Sch.plugin.Lines.prototype.init.apply(this,arguments);a.on('viewchange',this.onViewChange,this);this.onViewChange()},onViewChange:function(){this.refresh()},refresh:function(){this.loadStore()},loadStore:function(){this.store.removeAll(!0);this.store.add(this.retrieveMileStoneLines())},bindTaskStore:function(a){var b={load:this.onLoad,update:this.onUpdate,scope:this,delay:1};if(this.taskStore){this.taskStore.un(b)}if(a){a.on(b)}this.taskStore=a},onLoad:function(e,c,a,b,f,d){this.loaded=!0},onUpdate:function(c,a,b){if(a.get('Milestone')==!0&&a.get('isGridlineMilestone')==!0&&b==Ext.data.Model.EDIT){this.store.removeAll();this.store.add(this.retrieveMileStoneLines())}},prepareMilestoneLine:function(a){return {Date:a.getStartDate(),Text:a.getName(),Cls:'sch-gantt-milestone-line-start sch-gantt-milestone-line-'+a.getId(),milestoneId:a.getId()}},retrieveMileStoneLines:function(){var d=this,b=[];var c=this.taskStore.queryBy(function(a,b){return a.get('Milestone')==!0&&a.get('isGridlineMilestone')==!0});for(var a=0;a<c.items.length;a++){b.push(d.prepareMilestoneLine(c.items[a]))}return b},destroy:function(){this.bindTaskStore(null);this.store.destroy();Sch.plugin.Lines.prototype.destroy.apply(this,arguments)}},0,0,0,0,['plugin.cga_milestoneline'],0,[CGA.plugin,'MilestoneLine'],0);Ext.cmd.derive('Gnt.column.Sequence',Ext.grid.column.Column,{width:40,align:'right',sortable:!1,dataIndex:'index',constructor:function(a){a=a||{};this.text=a.text||this.L('text');Ext.grid.column.Column.prototype.constructor.apply(this,arguments)},renderer:function(b,c,a){return a.getSequenceNumber()}},1,['ganttcolumn.sequence','sequencecolumn'],['component','box','container','headercontainer','gridcolumn','sequencecolumn','ganttcolumn.sequence'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'sequencecolumn':!0,'ganttcolumn.sequence':!0},['widget.ganttcolumn.sequence','widget.sequencecolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column,'Sequence'],0);Ext.cmd.derive('Gnt.column.mixin.TaskFieldColumn',Ext.Mixin,{instantUpdate:!1,field:null,fieldProperty:'',fieldConfigs:'instantUpdate,fieldProperty',defaultEditor:'textfield',useRenderer:!0,mixinConfig:{after:{initComponent:'afterInitComponent',onRender:'_beforeRender'},afterIf:{applyColumnCls:'applyColumnCls'}},_beforeRender:function(){var a=this.getEditor&&this.getEditor();if(a&&a.setInstantUpdate){a.originalInstantUpdate=a.instantUpdate;a.setInstantUpdate(!1)}},initTaskFieldColumn:function(a){this.text=this.config.text||this.L('text');this.initColumnEditor(a);this.scope=this.scope||this;if(this.useRenderer){this.renderer=this.renderer||this.taskFieldRenderer}this.on('added',this.onColumnAdded,this)},applyColumnCls:function(c,a,b){if(!b.isEditable(this.dataIndex)){a.tdCls=(a.tdCls||'')+' sch-column-readonly'}},afterInitComponent:function(){this.hasCustomRenderer=!0},initColumnEditor:function(b){var a=this.editor;if(a){if('string'==typeof a){a={xtype:a}}if(!a.isInstance){if(!a.xtype&&!a.xclass){a.xtype=this.defaultEditor}var c=Ext.copyTo(Ext.apply({},b),this,this.fieldConfigs,!0);this.editor=Ext.ComponentManager.create(Ext.apply(c,a))}this.field=this.editor}},onColumnAdded:function(){var a=this.up('[taskStore]');var b=a.taskStore;if(!this.dataIndex){this.dataIndex=b.model.prototype[this.fieldProperty]}if(this.onReadOnlySet){this.mon(a,'setreadonly',this.onReadOnlySet,this)}},getValueToRender:function(b,d,c){var a=this.field;return a&&a.valueToVisible&&a.valueToVisible(b,c)||b},taskFieldRenderer:function(b,c,d){var a=Ext.util.Format.htmlEncode(this.getValueToRender.apply(this,arguments));this.applyColumnCls(b,c,d);return a},afterClassMixedIn:function(a){var b=this.prototype,c=b.mixinConfig,d=c&&c.beforeIf,e=c&&c.afterIf;d&&Ext.Object.each(d,function(c,d){if(c in a.prototype){a.addMember(c,function(){if(b[d].apply(this,arguments)!==!1){return this.callParent(arguments)}})}else {a.addMember(c,function(){b[d].apply(this,arguments)})}});e&&Ext.Object.each(e,function(c,d){if(c in a.prototype){a.addMember(c,function(){this.callParent(arguments);b[d].apply(this,arguments)})}else {a.addMember(c,function(){b[d].apply(this,arguments)})}})}},0,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column.mixin,'TaskFieldColumn'],0);Ext.cmd.derive('Gnt.column.Name',Ext.tree.Column,{draggable:!0,fieldProperty:'nameField',editor:'textfield',initComponent:function(){this.initTaskFieldColumn();Ext.tree.Column.prototype.initComponent.apply(this,arguments)},applyColumnCls:function(c,a,b){a.tdCls=a.tdCls||'';if(b.isProject){a.tdCls+=' sch-gantt-project-name'}if(!b.isLeaf()){a.tdCls+=' sch-gantt-parent-cell'}}},0,['ganttcolumn.name','namecolumn'],['component','box','container','headercontainer','gridcolumn','treecolumn','namecolumn','ganttcolumn.name'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'treecolumn':!0,'namecolumn':!0,'ganttcolumn.name':!0},['widget.ganttcolumn.name','widget.namecolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'Name'],0);Ext.cmd.derive('Gnt.column.Duration',Ext.grid.column.Column,{width:80,align:'left',decimalPrecision:2,useAbbreviation:!1,instantUpdate:!0,fieldProperty:'durationField',fieldConfigs:['instantUpdate','useAbbreviation','decimalPrecision','fieldProperty'],editor:'durationfield',defaultEditor:'durationfield',initComponent:function(){this.initTaskFieldColumn();Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){if(!Ext.isNumber(a)){return ''}return this.field.valueToVisible(a,b.getDurationUnit())},putRawData:function(a,b){b.setDuration(a)}},0,['durationcolumn','ganttcolumn.duration'],['component','box','container','headercontainer','gridcolumn','durationcolumn','ganttcolumn.duration'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'durationcolumn':!0,'ganttcolumn.duration':!0},['widget.durationcolumn','widget.ganttcolumn.duration'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'Duration'],0);Ext.cmd.derive('Gnt.column.ConstraintType',Ext.grid.column.Column,{width:100,align:'left',data:null,fieldProperty:'constraintTypeField',editor:'constrainttypefield',defaultEditor:'constrainttypefield',initComponent:function(){this.initTaskFieldColumn({store:this.data,taskField:this.fieldProperty});Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&this.field.valueToVisible(a,b)||''}},0,['constrainttypecolumn','ganttcolumn.constrainttype'],['component','box','container','headercontainer','gridcolumn','constrainttypecolumn','ganttcolumn.constrainttype'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'constrainttypecolumn':!0,'ganttcolumn.constrainttype':!0},['widget.constrainttypecolumn','widget.ganttcolumn.constrainttype'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'ConstraintType'],0);Ext.cmd.derive('Gnt.column.ConstraintDate',Ext.grid.column.Date,{width:100,align:'left',fieldProperty:'constraintDateField',editor:'constraintdatefield',defaultEditor:'constraintdatefield',initComponent:function(){this.initTaskFieldColumn({format:this.editorFormat||this.format||Ext.Date.defaultFormat,taskField:this.fieldProperty});Ext.grid.column.Date.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&Ext.Date.format(this.field.valueToVisible(a,b),this.format)||''}},0,['constraintdatecolumn','ganttcolumn.constraintdate'],['component','box','container','headercontainer','gridcolumn','datecolumn','constraintdatecolumn','ganttcolumn.constraintdate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'constraintdatecolumn':!0,'ganttcolumn.constraintdate':!0},['widget.constraintdatecolumn','widget.ganttcolumn.constraintdate'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'ConstraintDate'],0);Ext.cmd.derive('Gnt.util.DependencyParser',Ext.Base,{separator:/\s*;\s*/,parseNumberFn:null,dependencyRegex:null,types:null,constructor:function(c){Ext.apply(this,c);this.initTypes();var b=this.L('typeText');for(var a=0;a<this.types.length;a++){this.types[a]=b[this.types[a]]||this.types[a]}var d='(-?\\d+)('+this.types.join('|')+')?([\\+\\-].*)?';this.dependencyRegex=this.dependencyRegex||new RegExp(d,'i');this.durationParser=new Gnt.util.DurationParser({parseNumberFn:this.parseNumberFn})},initTypes:function(){this.types=this.types||['SS','SF','FS','FF']},parse:function(h){if(!h){return []}var d=h.split(this.separator);var g=[];var j=this.dependencyRegex;for(var c=0;c<d.length;c++){var i=d[c];if(!i&&c==d.length-1){continue}var b=j.exec(i);var a={};if(!b){return null}a.taskId=parseInt(b[1],10);a.type=Ext.Array.indexOf(this.types,(b[2]||this.types[2]).toUpperCase());var f=b[3];if(f){var e=this.durationParser.parse(f);if(!e){return null}a.lag=e.value;a.lagUnit=e.unit||'d'}g.push(a)}return g}},1,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.util,'DependencyParser'],0);Ext.cmd.derive('Gnt.field.Dependency',Ext.form.field.Text,{alternateClassName:'Gnt.widget.DependencyField',type:'predecessors',separator:';',task:null,dependencyParser:null,dependencyParserConfig:null,useSequenceNumber:!1,constructor:function(a){var b=this;Ext.apply(this,a);this.dependencyParser=new Gnt.util.DependencyParser(Ext.apply({parseNumberFn:function(){return Gnt.widget.DurationField.prototype.parseValue.apply(b,arguments)}},this.dependencyParserConfig));Ext.form.field.Text.prototype.constructor.apply(this,arguments);this.addCls('gnt-field-dependency')},isPredecessor:function(){return this.type==='predecessors'},setTask:function(a){this.task=a;this.setRawValue(this.getFieldDisplayValue(a))},getDependencies:function(){return this.dependencyParser.parse(this.getRawValue())},getTaskIdFromDependency:function(c){var d=this.task.getTaskStore(),a=c.taskId,b;if(this.useSequenceNumber){b=d.getBySequenceNumber(a);a=b&&b.getId()}return a},getErrors:function(o){if(!o){return []}var n=this.dependencyParser.parse(o);if(!n){return [this.L('invalidFormatText')]}var l=this.getDependencies(),h=this.isPredecessor(),g=this.task,b=g.getTaskStore().dependencyStore,p=g[h?'predecessors':'successors'],m=this.dependencyParser.types,k=b.allowedDependencyTypes,q=b.model.Type,f;var e=[];for(var a=0;a<l.length;a++){var c=l[a];f=this.getTaskIdFromDependency(c);if(!f){return [this.L('invalidDependencyText')]}if(b.allowedDependencyTypes&&!b.isValidDependencyType(c.type)){var i='';for(var j=0,r=k.length;j<r;j++){i+=m[q[k[j]]]+','}return [Ext.String.format(this.L('invalidDependencyType'),m[c.type],i.substring(0,i.length-1))]}var d=new b.model();d.setSourceId(h?f:g.getId());d.setTargetId(h?g.getId():f);d.setType(c.type);d.setLag(c.lag,c.lagUnit);e.push(d)}for(a=0;a<e.length;a++){if(!b.isValidDependency(e[a],e,p)){return [this.L('invalidDependencyText')]}}return Ext.form.field.Text.prototype.getErrors.call(this,n.value)},getFieldDisplayValue:function(i){var e=this.isPredecessor(),h=e?i.getIncomingDependencies(!0):i.getOutgoingDependencies(!0),l=this.dependencyParser.types,k=Gnt.model.Dependency.Type.EndToStart,g=[],b;for(var d=0;d<h.length;d++){var a=h[d];b=e?a.getSourceTask():a.getTargetTask();if(b&&a.isValid(!1)){var j=a.getType(),c=a.getLag(),f=a.getLagUnit();g.push(Ext.String.format('{0}{1}{2}{3}{4}',this.useSequenceNumber?b.getSequenceNumber():b.getId(),c||j!==k?l[j]:'',c>0?'+':'',c||'',c&&f!=='d'?f:''))}}return g.join(this.separator)},isDirty:function(b){b=b||this.task;if(!b){return !1}var e=this.isPredecessor(),f=b.getTaskStore().dependencyStore,c=e?b.getIncomingDependencies():b.getOutgoingDependencies(),g=b.getId();for(var a=0,d=c.length;a<d;a++){if(c[a].dirty||c[a].phantom){return !0}}if(f){var h=e?'getTargetId':'getSourceId';c=f.getRemovedRecords();for(a=0,d=c.length;a<d;a++){if(c[a][h]()==g){return !0}}}return !1},applyChanges:function(c){c=c||this.task;var f=c.getTaskStore().dependencyStore,g=this.getDependencies(),e=this.isPredecessor(),h=e?c.getIncomingDependencies(!0):c.getOutgoingDependencies(!0),i=[],b;var l=Ext.Array.map(g,function(a){return this.getTaskIdFromDependency(a)},this);for(b=0;b<h.length;b++){if(!Ext.Array.contains(l,h[b][e?'getSourceId':'getTargetId']())){i.push(h[b])}}if(i.length>0){f.remove(i)}var k=[];for(b=0;b<g.length;b++){var d=g[b];var j=this.getTaskIdFromDependency(d);var a=f.getTasksLinkingDependency(j,c.getId());if(a){a.beginEdit();a.setType(d.type);a.setLag(d.lag,d.lagUnit);a.endEdit()}else {a=new f.model();a.setSourceId(e?j:c.getId());a.setTargetId(e?c.getId():j);a.setType(d.type);a.setLag(d.lag,d.lagUnit);k.push(a)}}if(k.length>0){f.add(k)}}},1,['dependencyfield'],['component','box','field','textfield','dependencyfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'dependencyfield':!0},['widget.dependencyfield'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Dependency',Gnt.widget,'DependencyField'],0);Ext.cmd.derive('Gnt.column.Dependency',Ext.grid.column.Column,{separator:';',type:'predecessors',field:null,useSequenceNumber:!1,constructor:function(a){a=a||{};var b=a.editor;delete a.editor;Ext.apply(this,a);a.editor=b||Ext.create('Gnt.field.Dependency',{type:this.type,separator:this.separator,useSequenceNumber:this.useSequenceNumber});if(!(a.editor instanceof Gnt.widget.DependencyField)){a.editor=Ext.ComponentManager.create(a.editor,'dependencyfield')}a.field=a.editor;this.scope=this;Ext.grid.column.Column.prototype.constructor.call(this,a)},afterRender:function(){var a=this.up('ganttpanel');a.registerLockedDependencyListeners();Ext.grid.column.Column.prototype.afterRender.apply(this,arguments)},getContainingPanel:function(){if(!this.panel){this.panel=this.up('tablepanel')}return this.panel},setDirtyClass:function(b,c){var a=this.getContainingPanel().getView();if(a.markDirty&&this.field.isDirty(c)){b.tdCls=a.dirtyCls}},isEditable:function(a){var b=this.gantt||this.up('ganttpanel');if(a.isProject){return !1}return !a.isProject&&(b&&b.allowParentTaskDependencies||a.isLeaf())},getRawData:function(b){var a;if(this.type==='predecessors'){a=b.getIncomingDependencies(!0)}else {a=b.getOutgoingDependencies(!0)}return Ext.Array.map(a,function(a){var c=a.copy(null).data;delete c[a.idProperty];return c})},renderer:function(c,b,a){if(!a.isEditable(this.dataIndex)||!this.isEditable(a)){b.tdCls=(b.tdCls||'')+' sch-column-readonly'}else {this.setDirtyClass(b,a)}return this.field.getFieldDisplayValue(a)}},1,0,['component','box','container','headercontainer','gridcolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0},0,0,[Gnt.column,'Dependency'],0);Ext.cmd.derive('Gnt.column.Predecessor',Gnt.column.Dependency,{type:'predecessors',constructor:function(a){a=a||{};this.text=a.text||this.L('text');Gnt.column.Dependency.prototype.constructor.apply(this,arguments)},putRawData:function(d,b){var a=b.getDependencyStore();var c=[];a.remove(b.getIncomingDependencies(!0));Ext.isArray(d)&&Ext.Array.each(d,function(f){if(b.getTaskStore().getById(f[a.model.prototype.fromField])){var e=new a.model(f);e.setTargetId(b.getId());if(a.isValidDependency(e)){c.push(e)}}});a.add(c)}},1,['ganttcolumn.predecessor','predecessorcolumn'],['component','box','container','headercontainer','gridcolumn','predecessorcolumn','ganttcolumn.predecessor'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'predecessorcolumn':!0,'ganttcolumn.predecessor':!0},['widget.ganttcolumn.predecessor','widget.predecessorcolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column,'Predecessor'],0);Ext.cmd.derive('Gnt.column.ManuallyScheduled',Ext.grid.Column,{width:50,align:'center',instantUpdate:!1,fieldProperty:'manuallyScheduledField',editor:'manuallyscheduledfield',defaultEditor:'manuallyscheduledfield',initComponent:function(){this.initTaskFieldColumn();Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},getValueToRender:function(b,c,a){return this.field.valueToVisible(a.isManuallyScheduled())}},0,['ganttcolumn.manuallyscheduledcolumn','manuallyscheduledcolumn'],['component','box','container','headercontainer','gridcolumn','manuallyscheduledcolumn','ganttcolumn.manuallyscheduledcolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'manuallyscheduledcolumn':!0,'ganttcolumn.manuallyscheduledcolumn':!0},['widget.ganttcolumn.manuallyscheduledcolumn','widget.manuallyscheduledcolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'ManuallyScheduled'],0);Ext.cmd.derive('Gnt.field.Note',Ext.form.field.Picker,{alternateClassName:'Gnt.widget.NoteField',matchFieldWidth:!1,editable:!1,pickerConfig:null,previewFn:null,previewFnScope:null,taskField:'noteField',getTaskValueMethod:'getNote',setTaskValueMethod:'setNote',afterRender:function(){Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);this.on('collapse',this.onPickerCollapse,this)},valueToVisible:function(a){if(this.previewFn){return this.previewFn.call(this.previewFnScope||this,a)}else {return Ext.util.Format.stripTags(a)}},createPicker:function(){var a=new Ext.form.field.HtmlEditor(Ext.apply({frame:!0,shadow:!1,floating:!0,height:200,width:300,listeners:{change:this.onPickerChange,initialize:this.onPickerInit,scope:this}},this.pickerConfig||{}));return a},onPickerInit:function(a){var c=a.win.document.body;var b=this;a.win.focus=Ext.emptyFn;a.win.document.onkeydown=function(d){var c=new Ext.event.Event(d);if(c.keyCode===c.ESC){b.collapse()}}},onPickerChange:function(b,a){this.setRawValue(this.valueToVisible(a))},getValue:function(){return this.getPicker().getValue()},setValue:function(a){Ext.form.field.Picker.prototype.setValue.call(this,this.valueToVisible(a));this.getPicker().setValue(a);if(this.instantUpdate&&!this.getSuppressTaskUpdate()&&this.task){this.applyChanges()}},onPickerCollapse:function(){this.setValue(this.getPicker().getValue())},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else {a.expand()}}}},0,['noteeditor','notefield'],['component','box','field','textfield','pickerfield','notefield','noteeditor'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'notefield':!0,'noteeditor':!0},['widget.noteeditor','widget.notefield'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.field,'Note',Gnt.widget,'NoteField'],0);Ext.cmd.derive('Gnt.column.Note',Ext.grid.column.Column,{editor:'notefield',defaultEditor:'notefield',fieldProperty:'noteField',previewFn:null,previewFnScope:null,fieldConfigs:['instantUpdate','previewFn','previewFnScope','fieldProperty'],initComponent:function(){this.initTaskFieldColumn();Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)}},0,['ganttcolumn.note','notecolumn'],['component','box','container','headercontainer','gridcolumn','notecolumn','ganttcolumn.note'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'notecolumn':!0,'ganttcolumn.note':!0},['widget.ganttcolumn.note','widget.notecolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'Note'],0);Ext.cmd.derive('Gnt.column.StartDate',Ext.grid.column.Date,{width:100,align:'left',editorFormat:null,adjustMilestones:!0,keepDuration:!0,fieldProperty:'startDateField',fieldConfigs:['instantUpdate','adjustMilestones','keepDuration','fieldProperty'],editor:'startdatefield',defaultEditor:'startdatefield',initComponent:function(){this.initTaskFieldColumn({format:this.editorFormat||this.format||Ext.Date.defaultFormat});Ext.grid.column.Date.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&Ext.Date.format(this.field.valueToVisible(a,b),this.format)||''},putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}b.setStartDate(a)}},0,['ganttcolumn.startdate','startdatecolumn'],['component','box','container','headercontainer','gridcolumn','datecolumn','startdatecolumn','ganttcolumn.startdate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'startdatecolumn':!0,'ganttcolumn.startdate':!0},['widget.ganttcolumn.startdate','widget.startdatecolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'StartDate'],0);Ext.define('CGA.column.StartDate',{override:'Gnt.column.StartDate',adjustMilestones:!1});Ext.cmd.derive('Gnt.column.BaselineStartDate',Gnt.column.StartDate,{width:100,fieldProperty:'baselineStartDateField',fieldConfigs:['instantUpdate','adjustMilestones','fieldProperty'],editor:'baselinestartdatefield',defaultEditor:'baselinestartdatefield',putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}b.setBaselineStartDate(a)}},0,['baselinestartdatecolumn','ganttcolumn.baselinestartdate'],['component','box','container','headercontainer','gridcolumn','datecolumn','startdatecolumn','ganttcolumn.startdate','baselinestartdatecolumn','ganttcolumn.baselinestartdate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'startdatecolumn':!0,'ganttcolumn.startdate':!0,'baselinestartdatecolumn':!0,'ganttcolumn.baselinestartdate':!0},['widget.baselinestartdatecolumn','widget.ganttcolumn.baselinestartdate'],0,[Gnt.column,'BaselineStartDate'],0);Ext.cmd.derive('Gnt.column.EndDate',Ext.grid.column.Date,{width:100,align:'left',editorFormat:null,adjustMilestones:!0,validateStartDate:!0,keepDuration:!1,fieldProperty:'endDateField',fieldConfigs:['instantUpdate','adjustMilestones','keepDuration','validateStartDate','fieldProperty'],editor:'enddatefield',defaultEditor:'enddatefield',initComponent:function(){this.initTaskFieldColumn({format:this.editorFormat||this.format||Ext.Date.defaultFormat});Ext.grid.column.Date.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&Ext.Date.format(this.field.valueToVisible(a,b),this.format)||''},putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}if(a&&b.getStartDate()&&b.getStartDate()>a){b.setDuration(0)}b.setEndDate(a,b.isMilestone(),!1)}},0,['enddatecolumn','ganttcolumn.enddate'],['component','box','container','headercontainer','gridcolumn','datecolumn','enddatecolumn','ganttcolumn.enddate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'enddatecolumn':!0,'ganttcolumn.enddate':!0},['widget.enddatecolumn','widget.ganttcolumn.enddate'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'EndDate'],0);Ext.define('CGA.column.EndDate',{override:'Gnt.column.EndDate',adjustMilestones:!1});Ext.cmd.derive('Gnt.column.BaselineEndDate',Gnt.column.EndDate,{width:100,fieldProperty:'baselineEndDateField',fieldConfigs:['instantUpdate','adjustMilestones','keepDuration','validateStartDate','fieldProperty'],editor:'baselineenddatefield',defaultEditor:'baselineenddatefield',putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}b.setBaselineEndDate(a)}},0,['baselineenddatecolumn','ganttcolumn.baselineenddate'],['component','box','container','headercontainer','gridcolumn','datecolumn','enddatecolumn','ganttcolumn.enddate','baselineenddatecolumn','ganttcolumn.baselineenddate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'enddatecolumn':!0,'ganttcolumn.enddate':!0,'baselineenddatecolumn':!0,'ganttcolumn.baselineenddate':!0},['widget.baselineenddatecolumn','widget.ganttcolumn.baselineenddate'],0,[Gnt.column,'BaselineEndDate'],0);Ext.cmd.derive('Ext.grid.column.Check',Ext.grid.column.Column,{alternateClassName:['Ext.ux.CheckColumn','Ext.grid.column.CheckColumn'],align:'center',ignoreExport:!0,stopSelection:!0,tdCls:'x-grid-cell-checkcolumn',innerCls:'x-grid-cell-inner-checkcolumn',clickTargetName:'el',defaultFilterType:'boolean',constructor:function(){this.scope=this;Ext.grid.column.Column.prototype.constructor.apply(this,arguments)},processEvent:function(h,n,k,e,m,b,g,l){var a=this,d=h==='keydown'&&b.getKey(),f=h==='mousedown',j=a.disabled,i,c;b.stopSelection=!d&&a.stopSelection;if(!j&&(f||(d===b.ENTER||d===b.SPACE))){c=!a.isRecordChecked(g);if(a.fireEvent('beforecheckchange',a,e,c)!==!1){a.setRecordCheck(g,c,k,l,b);a.fireEvent('checkchange',a,e,c);if(f&&!a.getView().actionableMode){b.preventDefault()}}}else {i=Ext.grid.column.Column.prototype.processEvent.apply(this,arguments)}return i},onEnable:function(){Ext.grid.column.Column.prototype.onEnable.apply(this,arguments);this._setDisabled(!1)},onDisable:function(){this._setDisabled(!0)},_setDisabled:function(d){var b=this,c=b.disabledCls,a;a=b.up('tablepanel').el.select(b.getCellSelector());if(d){a.addCls(c)}else {a.removeCls(c)}},defaultRenderer:function(d,c){var a='x-',b=a+'grid-checkcolumn';if(this.disabled){c.tdCls+=' '+this.disabledCls}if(d){b+=' '+a+'grid-checkcolumn-checked'}return '<div class="'+b+'" role="button" tabIndex="0"></div>'},isRecordChecked:function(a){var b=this.property;if(b){return a[b]}return a.get(this.dataIndex)},setRecordCheck:function(c,a,e,f,g){var b=this,d=b.property;if(d){c[d]=a;b.updater(e,a)}else {c.set(b.dataIndex,a)}},updater:function(a,b){a=Ext.fly(a);a[this.disabled?'addCls':'removeCls'](this.disabledCls);Ext.fly(a.down(this.getView().innerSelector,!0).firstChild)[b?'addCls':'removeCls']('x-grid-checkcolumn-checked')}},1,['checkcolumn'],['component','box','container','headercontainer','gridcolumn','checkcolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'checkcolumn':!0},['widget.checkcolumn'],0,[Ext.grid.column,'Check',Ext.ux,'CheckColumn',Ext.grid.column,'CheckColumn'],0);Ext.cmd.derive('Gnt.column.ShowInTimeline',Ext.grid.column.Check,{fieldProperty:'showInTimelineField',initComponent:function(a){this.initTaskFieldColumn();Ext.grid.column.Check.prototype.initComponent.call(this,a);this.tdCls=(this.tdCls||'')+' gnt-showintimeline-cell'},onReadOnlySet:function(b,a){this.setDisabled(a)},taskFieldRenderer:function(){var a=this.defaultRenderer.apply(this,arguments);this.applyColumnCls.apply(this,arguments);return a}},0,['ganttcolumn.showintimeline','showintimelinecolumn'],['component','box','container','headercontainer','gridcolumn','checkcolumn','showintimelinecolumn','ganttcolumn.showintimeline'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'checkcolumn':!0,'showintimelinecolumn':!0,'ganttcolumn.showintimeline':!0},['widget.ganttcolumn.showintimeline','widget.showintimelinecolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'ShowInTimeline'],0);Ext.cmd.derive('Gnt.column.PercentDone',Ext.grid.column.Number,{width:50,format:'0',align:'center',editor:'percentfield',defaultEditor:'percentfield',fieldProperty:'percentDoneField',useRenderer:!1,initComponent:function(){this.initTaskFieldColumn({decimalPrecision:0});Ext.grid.column.Number.prototype.initComponent.apply(this,arguments)}},0,['ganttcolumn.percentdone','percentdonecolumn'],['component','box','container','headercontainer','gridcolumn','numbercolumn','percentdonecolumn','ganttcolumn.percentdone'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'numbercolumn':!0,'percentdonecolumn':!0,'ganttcolumn.percentdone':!0},['widget.ganttcolumn.percentdone','widget.percentdonecolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[Gnt.column,'PercentDone'],0);Ext.cmd.derive('CGA.field.PercentDone',Gnt.field.Percent,{taskField:'percentDoneField',getTaskValueMethod:'getPercentDone',setTaskValueMethod:'setPercentDone',applyChanges:function(a){a=a||this.task;var b=a.getTaskStore(!0)||this.taskStore;if(this.value){this.setTaskValue(a,this.value)}else {this.setTaskValue(a,null)}a.fireEvent('taskupdated',a,this)},setValue:function(b,a){var c=b;Gnt.field.Percent.prototype.setValue.call(this,c);if(!this.readOnly&&(a||this.instantUpdate)&&!this.getSuppressTaskUpdate()&&this.task){this.applyChanges()}}},0,['percentDoneField'],['component','box','field','textfield','spinnerfield','numberfield','percentfield','percentDoneField'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0,'percentfield':!0,'percentDoneField':!0},['widget.percentDoneField'],[[Gnt.field.mixin.TaskField.prototype.mixinId||Gnt.field.mixin.TaskField.$className,Gnt.field.mixin.TaskField]],[CGA.field,'PercentDone'],0);Ext.cmd.derive('CGA.column.PercentDone',Gnt.column.PercentDone,{editor:'percentDoneField',defaultEditor:'percentDoneField'},0,0,['component','box','container','headercontainer','gridcolumn','numbercolumn','percentdonecolumn','ganttcolumn.percentdone'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'numbercolumn':!0,'percentdonecolumn':!0,'ganttcolumn.percentdone':!0},0,0,[CGA.column,'PercentDone'],0);Ext.cmd.derive('CGA.column.Flags',Ext.grid.column.Column,{sortable:!1,initComponent:function(){var a=this;Ext.grid.column.Column.prototype.initComponent.apply(this,arguments);a.usingDefaultRenderer=!0},renderer:function(p,l,a,n,m,o,q){var h=a.get('ManuallyScheduled');var k=a.get('Note')!=''&&a.get('Note')!=null;var d=a.get('PercentDone')==100;var c=a.get('ConstraintType');var i=a.get('HasIssues');var j=a.get('IsLocked')&&a.get('leaf');var b='';if(c!=null&&c!=''){if(c.indexOf('must')>-1&&!h&&!d){b+='<i  style="color:red;padding-left: 2px;padding-right: 2px;" class="fa fa-calendar"/>'}else {b+='<i  style="color:#5fa2dd;padding-left: 2px;padding-right: 2px;" class="fa fa-calendar"/>'}}if(h&&!d){b+='<i style="color:#5fa2dd;padding-left: 2px;padding-right: 2px;" class="fa fa-thumb-tack"/>'}if(d){b+='<i  style="color:#5fa2dd;padding-left: 2px;padding-right: 2px;" class="fa fa-check"/>'}if(k){b+='<i  style="color:#5fa2dd;padding-left: 2px;padding-right: 2px;" class="fa fa-comment"/>'}if(i){var g=a.get('LateStartIssues');var e=a.get('SoonToStartIssues');var f=a.get('InProgressIssues');b+='<i  data-qtip="'+this.L('LateStartIssues')+': '+g+'<br/>'+this.L('SoonToStartIssues')+': '+e+'<br/>'+this.L('InProgressIssues')+': '+f+'<br/>"style="color:#3959dd;padding-left: 2px;padding-right: 2px;" class="fa fa-bell"/><span class="issue-badge" reference="badgeElement" unselectable="on">'+(Number(g)+Number(e)+Number(f))+'</span></i>'}if(j){b+='<i  style="color:#747474;padding-left: 2px;padding-right: 2px;" class="fa fa-lock"/>'}return b}},0,['flagscolumn','ganttcolumn.flags'],['component','box','container','headercontainer','gridcolumn','flagscolumn','ganttcolumn.flags'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'flagscolumn':!0,'ganttcolumn.flags':!0},['widget.flagscolumn','widget.ganttcolumn.flags'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.column,'Flags'],0);Ext.cmd.derive('CGA.column.ReadOnlyText',Ext.grid.column.Column,{initComponent:function(){this.initTaskFieldColumn();Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},renderer:function(b,c,a){return a.get(this.dataIndex)}},0,['ganttcolumn.readonlytext','readonlytextcolumn'],['component','box','container','headercontainer','gridcolumn','readonlytextcolumn','ganttcolumn.readonlytext'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'readonlytextcolumn':!0,'ganttcolumn.readonlytext':!0},['widget.ganttcolumn.readonlytext','widget.readonlytextcolumn'],[[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[CGA.column,'ReadOnlyText'],0);Ext.cmd.derive('CGA.field.CompletedDate',Gnt.field.Date,{taskField:'CompletedDate',getTaskValueMethod:'getCompletedDate',setTaskValueMethod:'setCompletedDate',valueToVisible:function(b,a){a=a||this.task;return a.getDisplayCompletedDate(this.format,b,!0)},visibleToValue:function(a){if(a&&this.task){}else {a=null}return a},isValidAgainstStartedDate:function(b){var a=this.task.getStartedDate();if(a!=null){a=new Date(a);a=CGA.utils.date.resetEnd(a,this.task.getDuration())}return !this.task||!b||CGA.utils.date.resetEnd(b,this.task.getDuration())>=a||a==null},getErrors:function(b){var a=Gnt.field.Date.prototype.getErrors.apply(this,arguments);if(a&&a.length){return a}if(!this.isValidAgainstStartedDate(this.rawToValue(b))){return [this.L('endBeforeStartedText')]}return []}},0,['completedDateField'],['component','box','field','textfield','pickerfield','datefield','completedDateField'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'completedDateField':!0},['widget.completedDateField'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.field,'CompletedDate'],0);Ext.cmd.derive('CGA.column.CompletedDate',Ext.grid.column.Date,{editorFormat:null,fieldProperty:'completedDateField',fieldConfigs:['fieldProperty'],editor:'completedDateField',width:100,align:'left',initComponent:function(){this.initTaskFieldColumn({format:this.editorFormat||this.format||Ext.Date.defaultFormat});Ext.grid.column.Date.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&Ext.Date.format(this.field.valueToVisible(a,b),this.format)||''},putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}b.StartedDate=a}},0,['completeddatecolumn','ganttcolumn.completeddate'],['component','box','container','headercontainer','gridcolumn','datecolumn','completeddatecolumn','ganttcolumn.completeddate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'completeddatecolumn':!0,'ganttcolumn.completeddate':!0},['widget.completeddatecolumn','widget.ganttcolumn.completeddate'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable],[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[CGA.column,'CompletedDate'],0);Ext.cmd.derive('CGA.field.StartedDate',Gnt.field.Date,{taskField:'StartedDate',getTaskValueMethod:'getStartedDate',setTaskValueMethod:'setStartedDate',valueToVisible:function(b,a){a=a||this.task;return a.getDisplayStartedDate(this.format,b,!0)},visibleToValue:function(a){if(a&&this.task){}else {a=null}return a},isValidAgainstCompletedDate:function(b){var a=this.task.getCompletedDate();if(a!=null){a=new Date(a);a=CGA.utils.date.resetStart(a)}return !this.task||!b||CGA.utils.date.resetStart(b)<=a||a==null},getErrors:function(b){var a=Gnt.field.Date.prototype.getErrors.apply(this,arguments);if(a&&a.length){return a}if(!this.isValidAgainstCompletedDate(this.rawToValue(b))){return [this.L('endBeforeStartedText')]}return []}},0,['startedDateField'],['component','box','field','textfield','pickerfield','datefield','startedDateField'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'startedDateField':!0},['widget.startedDateField'],0,[CGA.field,'StartedDate'],0);Ext.cmd.derive('CGA.column.StartedDate',Ext.grid.column.Date,{editorFormat:null,fieldProperty:'startedDateField',fieldConfigs:['fieldProperty'],editor:'startedDateField',width:100,align:'left',initComponent:function(){this.initTaskFieldColumn({format:this.editorFormat||this.format||Ext.Date.defaultFormat});Ext.grid.column.Date.prototype.initComponent.apply(this,arguments)},getValueToRender:function(a,c,b){return a&&Ext.Date.format(this.field.valueToVisible(a,b),this.format)||''},putRawData:function(a,b){if(a&&!(a instanceof Date)){a=Ext.Date.parse(a,this.format)}b.StartedDate=a}},0,['ganttcolumn.starteddate','starteddatecolumn'],['component','box','container','headercontainer','gridcolumn','datecolumn','starteddatecolumn','ganttcolumn.starteddate'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'datecolumn':!0,'starteddatecolumn':!0,'ganttcolumn.starteddate':!0},['widget.ganttcolumn.starteddate','widget.starteddatecolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable],[Gnt.column.mixin.TaskFieldColumn.prototype.mixinId||Gnt.column.mixin.TaskFieldColumn.$className,Gnt.column.mixin.TaskFieldColumn]],[CGA.column,'StartedDate'],0);Ext.cmd.derive('CGA.column.Dirty',Ext.grid.column.Column,{initComponent:function(){Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},renderer:function(b,c,a){return a.dirty}},0,['dirtycolumn','ganttcolumn.dirty'],['component','box','container','headercontainer','gridcolumn','dirtycolumn','ganttcolumn.dirty'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'dirtycolumn':!0,'ganttcolumn.dirty':!0},['widget.dirtycolumn','widget.ganttcolumn.dirty'],0,[CGA.column,'Dirty'],0);Ext.cmd.derive('CGA.column.Cycle',Ext.grid.column.Column,{initComponent:function(){Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},renderer:function(c,d,b){var a=!1;if(b.predecessors&&b.predecessors.length>0){a=!1;b.predecessors.forEach(function(e){a=a||e.isValid(!0)});a=!a}return a}},0,['cyclecolumn','ganttcolumn.cycle'],['component','box','container','headercontainer','gridcolumn','cyclecolumn','ganttcolumn.cycle'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'cyclecolumn':!0,'ganttcolumn.cycle':!0},['widget.cyclecolumn','widget.ganttcolumn.cycle'],0,[CGA.column,'Cycle'],0);Ext.cmd.derive('CGA.plugin.HighlightTaskArea',Ext.AbstractPlugin,{tpl:'<div class="gnt-taskarea" style="{height}px"><div class="gnt-taskarea-inner"></div></div>',config:{enabled:!1},setEnabled:function(){(arguments.callee.$previous||Ext.plugin.Abstract.prototype.setEnabled).apply(this,arguments);if(this.panel){this.repaintAllAreas()}},init:function(a){var b=this,c=(a.parentTaskBodyTemplate||Gnt.template.ParentTask.prototype.innerTpl)+b.tpl;Ext.apply(a.getSchedulingView(),{parentTaskBodyTemplate:c});b.panel=a;b.taskStore=a.getTaskStore();a.getSchedulingView().on({refresh:this.repaintAllAreas,itemupdate:this.repaintAllAreas,itemremove:this.repaintAllAreas,itemadd:this.repaintAllAreas,delay:1,scope:this});a.on('afterrender',function(){b.getEnabled()&&a.getSchedulingView().getEl().addCls('gnt-taskarea-enabled')},null,{single:!0})},getLastVisibleChild:function(a){var b;if(!a||a.isLeaf()||!a.isExpanded()){b=a}else {b=this.getLastVisibleChild(a.lastChild)}return b},repaintAllAreas:function(){if(!this.getEnabled()){return}var b=this.panel.getSchedulingView();var a=this.panel.getSchedulingView().getNodes();Ext.Array.each(a,function(c){if(c){var a=b.getRecord(c);if(a&&!a.isRoot()&&!a.isLeaf()&&!a.isMilestone()&&a.isExpanded()){this.refreshAreaSize(a)}}},this)},refreshAreaSize:function(b){var f=this.panel.getSchedulingView();var g=f.getElementsFromEventRecord(b)[0];if(!g){return}var d=g.down('.gnt-taskarea');if(!d){return}var a=this.getLastVisibleChild(b);var e=0;if(a&&a!==b){var c=f.getNode(a);if(c){e=Ext.fly(c).getY()-d.getY()+Ext.fly(c).getHeight()}}if(e<0){return}d.setHeight(e)},updateEnabled:function(c,d){var b=this.getCmp(),a=b.rendered&&b.getSchedulingView();if(a){if(c){a.getEl().addCls('gnt-taskarea-enabled')}else {a.getEl().removeCls('gnt-taskarea-enabled')}}}},0,0,0,0,['plugin.highlightsubtasksarea'],0,[CGA.plugin,'HighlightTaskArea'],0);Ext.cmd.derive('CGA.widget.DependencyGrid',Gnt.widget.DependencyGrid,{onEditingStart:function(c,a){if(a.record.getData().Cls=='dynamic-dep'){return !1}var b=this.store.model.prototype;switch(a.field){case b.lagField:this.lagEditor.durationUnit=a.record.getLagUnit();break;case b.typeField:this.typesCombo.store.filter(this.typesFilter);if(this.typesCombo.store.count()<2){return !1};break;case b.fromField:if(this.direction=='predecessors'){this.activeDependency=a.record;this.refilterTasksCombo()};break;case b.toField:if(this.direction!='predecessors'){this.activeDependency=a.record;this.refilterTasksCombo()};break;}},bindTaskStore:function(){var b=this.dependencyStore&&this.dependencyStore.getTaskStore();if(b){if(!this.taskStoreListeners){var a=Ext.Function.createBuffered(this.bindTaskStore,this.refreshTimeout,this,[]);this.taskStoreListeners=this.mon(b,{nodeappend:a,nodeinsert:a,noderemove:a,update:a,refresh:a,clear:a,'nodestore-datachange-end':a,scope:this,destroyable:!0})}var c=new Ext.data.JsonStore({autoDestroy:!0,model:b.model,sorters:b.model.prototype.nameField});var d=b.getRoot();c.loadData(CGA.utils.Data.cloneModelSet(b.toArray(),function(b,a){if(a===d||a.hidden||a.isReadOnly()){return !1}if(!a.getId()){b.setId(a.getId())}}));this.tasksFilter=new Ext.util.Filter({id:'dependencygrid-tasksfilter',filterFn:this.filterTasks,scope:this});c.filter(this.tasksFilter);this.tasksCombo.bindStore(c)}},buildTasksCombo:function(){var a=this;return new Ext.form.field.ComboBox({queryMode:'local',allowBlank:!1,editing:!1,forceSelection:!0,anyMatch:!0,valueField:this.taskModel.prototype.idProperty,displayField:'DependencySearchText',queryCaching:!1,displayTpl:Ext.create('Ext.XTemplate','<tpl for=".">','{WBSCode} - {DependencySearchText}','</tpl>'),listConfig:{getInnerTpl:function(){return '{WBSCode} - {'+this.displayField+':htmlEncode}'}},validator:function(b){if(!b){return a.L('blankTaskText')}return !0}})},taskRender:function(e,b,f){var c=this.taskValidate(e,f),a;if(c&&c.length){b.tdCls='x-form-invalid';b.tdAttr='data-errorqtip="'+c.join('<br>')+'"'}else {b.tdCls='';b.tdAttr='data-errorqtip=""'}var d=this.dependencyStore&&this.dependencyStore.getTaskStore();if(d){a=d.getModelById(e);return a&&Ext.String.htmlEncode(a.getWBSCode()+' - '+a.data.DependencySearchText)||''}return ''}},0,0,['component','box','container','panel','tablepanel','gridpanel','grid','dependencygrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'dependencygrid':!0},0,0,[CGA.widget,'DependencyGrid'],0);Ext.cmd.derive('CGA.widget.taskeditor.TaskForm',Gnt.widget.taskeditor.TaskForm,{showActual:!0,startedDateConfig:null,complitedDateConfig:null,getReadOnly:function(){return this.readOnly||this.task.get('isVirtual')||this.task.get('isBuildingGroup')},buildFields:function(){var a=this,b=a.fieldNames;a.items=a.items||[];if(a.showGeneral){a.items.push({xtype:'fieldcontainer',layout:'hbox',items:[a.initFieldDefinition({xtype:'textfield',fieldLabel:a.L('taskNameText'),name:b.nameField,labelWidth:60,allowBlank:!1,flex:1},a.nameConfig),a.initFieldDefinition({xtype:'percentDoneField',fieldLabel:a.L('completedText'),name:b.percentDoneField,flex:1},a.percentDoneConfig)]},{xtype:'fieldset',title:a.L('expectedText'),layout:'hbox',defaults:{labelWidth:60,allowBlank:!1},items:[a.initFieldDefinition({xtype:'startdatefield',fieldLabel:a.L('startText'),flex:1,name:b.startDateField},a.startConfig),a.initFieldDefinition({xtype:'enddatefield',fieldLabel:a.L('finishText'),flex:1,name:b.endDateField},a.finishConfig),a.initFieldDefinition({xtype:'durationfield',fieldLabel:a.L('durationText'),name:b.durationField,flex:1},a.durationConfig)]})}if(a.showActual){a.items.push({xtype:'fieldset',title:a.L('actualText'),layout:'hbox',defaults:{labelWidth:60,allowBlank:!0},items:[a.initFieldDefinition({xtype:'startedDateField',fieldLabel:a.L('startText'),name:'StartedDate',flex:1,validator:function(a){if(!this.value){this.nextNode().setValue(null)}return !0}},a.startedDateConfig),a.initFieldDefinition({xtype:'completedDateField',fieldLabel:a.L('finishText'),name:'CompletedDate',flex:1},a.complitedDateConfig)]})}if(a.showBaseline){a.items.push({xtype:'fieldset',title:a.L('baselineText'),layout:'hbox',defaults:{labelWidth:60,allowBlank:!0},items:[a.initFieldDefinition({xtype:'baselinestartdatefield',fieldLabel:a.L('baselineStartText'),name:b.baselineStartDateField,readOnly:!a.editBaseline,flex:1,forceReadOnly:!a.editBaseline},a.baselineStartConfig),a.initFieldDefinition({xtype:'baselineenddatefield',fieldLabel:a.L('baselineFinishText'),name:b.baselineEndDateField,flex:1,readOnly:!a.editBaseline,forceReadOnly:!a.editBaseline},a.baselineFinishConfig)]})}}},0,0,['component','box','container','panel','form','taskform'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'taskform':!0},0,0,[CGA.widget.taskeditor,'TaskForm'],0);Ext.cmd.derive('CGA.widget.taskeditor.TaskEditor',Gnt.widget.taskeditor.TaskEditor,{itemId:'myTaskEditor',dependencyGridClass:'CGA.widget.DependencyGrid',taskFormClass:'CGA.widget.taskeditor.TaskForm',advancedFormConfig:{showSchedulingMode:!1,showCalendar:!1,showWbsCode:!0,showConstraint:!0,showRollup:!1,showReadOnly:!1},buildItems:function(){var a=this,c=[];var b=a.clonedStores||{};a.taskFormConfig=a.taskFormConfig||{};Ext.applyIf(a.taskFormConfig,{showBaseline:a.showBaseline,showRollup:!1});a.taskForm=Ext.create(a.taskFormClass,Ext.apply({task:a.task,border:!1,taskStore:a.taskStore},a.taskFormConfig));c.push(a.taskForm);if(a.showDependencyGrid){a.dependencyGrid=Ext.create(a.dependencyGridClass,Ext.apply({allowParentTaskDependencies:a.allowParentTaskDependencies,taskModel:a.taskStore.model,task:a.task,margin:0,border:!1,tbar:{layout:'auto',items:[{xtype:'button',iconCls:'gnt-action-add',text:a.L('addDependencyText'),itemId:'add-dependency-btn',handler:function(){a.dependencyGrid.insertDependency()}},{xtype:'button',iconCls:'gnt-action-remove',text:a.L('dropDependencyText'),itemId:'drop-dependency-btn',disabled:!0,handler:function(){var b=a.dependencyGrid.getSelectionModel().getSelection();if(b&&b.length){a.dependencyGrid.store.remove(b)}}}]},listeners:{selectionchange:function(d,c){var b=a.dependencyGrid;if(!b.dropDepBtn){b.dropDepBtn=b.down('#drop-dependency-btn')}b.dropDepBtn&&b.dropDepBtn.setDisabled(!c.length);c.forEach(function(a){if(a.getData().Cls=='dynamic-dep'){b.dropDepBtn.setDisabled(!0)}})}}},a.dependencyGridConfig));c.push(a.dependencyGrid)}if(a.showAssignmentGrid&&a.assignmentStore&&a.resourceStore){if(!b.assignmentStore){b.assignmentStore=a.cloneAssignmentStore(a.task)}if(!b.resourceStore){b.resourceStore=a.cloneResourceStore(a.task)}a.assignmentGrid=Ext.create(a.assignmentGridClass,Ext.apply({assignmentStore:a.assignmentStore,resourceStore:a.resourceStore,border:!1,margin:0,store:b.assignmentStore,resourceDupStore:b.resourceStore,tbar:{layout:'auto',items:[{xtype:'button',iconCls:'gnt-action-add',text:a.L('addAssignmentText'),itemId:'add-assignment-btn',handler:function(){a.assignmentGrid.insertAssignment()}},{xtype:'button',iconCls:'gnt-action-remove',text:a.L('dropAssignmentText'),itemId:'drop-assignment-btn',disabled:!0,handler:function(){var b=a.assignmentGrid.getSelectionModel().getSelection();if(b&&b.length){a.assignmentGrid.store.remove(b)}}}]},listeners:{afterrender:{fn:function(b){b.loadTaskAssignments(a.task.get(a.task.idProperty))},single:!0},selectionchange:function(d,c){var b=a.assignmentGrid;if(!b.dropBtn){b.dropBtn=b.down('#drop-assignment-btn')}b.dropBtn&&b.dropBtn.setDisabled(!c.length)}}},a.assignmentGridConfig));c.push(a.assignmentGrid)}if(a.showAdvancedForm){a.advancedFormConfig=a.advancedFormConfig||{};a.advancedForm=Ext.create(a.advancedFormClass,Ext.applyIf(a.advancedFormConfig,{showGeneral:!1,showBaseline:!1,showCalendar:!0,showManuallyScheduled:!0,showSchedulingMode:!0,showWbsCode:!0,showConstraint:!0,showRollup:a.showRollup,showReadOnly:a.showReadOnly,layout:{type:'table',columns:2},border:!1,margin:0,task:a.task,taskStore:a.taskStore}));c.push(a.advancedForm)}if(a.showNotes){a.notesEditor=Ext.create('Ext.form.field.HtmlEditor',Ext.apply({listeners:{afterrender:function(b){a.notesEditor.setValue(a.task.get(a.task.noteField))}},readOnly:a.task&&!a.task.isEditable(a.task.noteField),isDataChanged:function(){return this.isDirty()}},a.notesConfig));a.notesPanel=Ext.create('Ext.panel.Panel',{border:!1,margin:0,layout:'fit',items:a.notesEditor});c.push(a.notesPanel)}if(!a.taskForm.title){a.taskForm.title=a.L('generalText')}if(a.assignmentGrid&&!a.assignmentGrid.title){a.assignmentGrid.title=a.L('resourcesText')}if(a.advancedForm&&!a.advancedForm.title){a.advancedForm.title=a.L('advancedText')}if(a.notesPanel&&!a.notesPanel.title){a.notesPanel.title=a.L('notesText')}return c}},0,0,['component','box','container','panel','tabpanel','taskeditor'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0,'taskeditor':!0},0,0,[CGA.widget.taskeditor,'TaskEditor'],0);Ext.cmd.derive('CGA.plugin.TaskEditor',Gnt.plugin.taskeditor.TaskEditor,{ptype:'cga_taskeditor',height:480,width:650,taskEditorCls:'CGA.widget.taskeditor.TaskEditor',customTabsIds:[],showTask:function(a){var d=Ext.ComponentQuery.query('constrainttypefield')[0];var c=Ext.ComponentQuery.query('constraintdatefield')[0];if(!a.isLeaf()){d.setDisabled(!0);c.setDisabled(!0)}else {d.setDisabled(!1);c.setDisabled(!1)}if(this.taskEditor&&a&&this.matchFilters(a)){this.taskEditor.loadTask(a);var b=this.gantt.isReadOnly();if(b!=this.taskEditor.setReadOnly()){this.taskEditor.setReadOnly(b)}this.down('#teOkBtn').setVisible(!b);this.show()}},constructor:function(a){a=a||{};a.showAssignmentGrid=!1;a.buttons=['->',{itemId:'teOkBtn',text:this.L('okText'),handler:function(){this.completeEditing()||Ext.Msg.alert(this.L('alertCaption'),this.L('alertText'));var b=Ext.ComponentQuery.query('cga-gantt')[0];b.getCrudManager().getTaskStore().adjustToCalendar(null)},scope:this},{text:this.L('cancelText'),handler:this.close,scope:this},{text:this.L('startedText'),cls:'started-btn',handler:function(e){var b=this;var c=b.taskEditor.items.items[0].getForm().findField('StartedDate');c.on({change:{single:!0,scope:b,fn:b.onStarted}});var d=c.triggerEl.elements[0];d.fireEvent('click',d);Ext.ComponentQuery.query('datepicker')[0].setValue(new Date(Date.now()))},scope:this},{text:this.L('finishedText'),cls:'finished-btn',handler:function(e){var b=this;var c=b.taskEditor.items.items[0].getForm().findField('CompletedDate');var d=c.triggerEl.elements[0];c.on({change:{single:!0,scope:b,fn:b.onFinished}});d.fireEvent('click',d);Ext.ComponentQuery.query('datepicker')[0].setValue(new Date(Date.now()))},scope:this}];Gnt.plugin.taskeditor.TaskEditor.prototype.constructor.call(this,a)},onStarted:function(c,a,b){this.taskEditor.task.set('isStarted',!0)},onFinished:function(c,a,b){this.taskEditor.task.set('isFinished',!0);this.taskEditor.task.setPercentDone(100);this.taskEditor.taskForm.form.setValues({PercentDone:100})},listeners:{}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},['plugin.cga_taskeditor'],0,[CGA.plugin,'TaskEditor'],0);Ext.cmd.derive('Gnt.plugin.DependencyEditor',Ext.form.Panel,{ptype:'gantt_dependencyeditor',hideOnBlur:!0,showLag:!1,triggerEvent:'dependencydblclick',constrain:!0,lockableScope:'top',header:!1,border:!1,frame:!0,labelWidth:60,floating:!0,hideMode:'offsets',bodyPadding:10,initComponent:function(){this.buttons=this.hasOwnProperty('buttons')?this.buttons:this.buttons||[{text:this.L('okButtonText'),itemId:'okbutton',scope:this,handler:function(){this.getForm().updateRecord(this.dependencyRecord);this.collapse()}},{text:this.L('cancelButtonText'),itemId:'cancelbutton',scope:this,handler:function(){this.collapse()}},{text:this.L('deleteButtonText'),itemId:'deletebutton',scope:this,handler:function(){var a=this.taskStore&&this.taskStore.getDependencyStore();a.remove(this.dependencyRecord);this.collapse()}}];Ext.form.Panel.prototype.initComponent.apply(this,arguments);this.saveButton=this.down('#okbutton');this.deleteButton=this.down('#deletebutton');this.addCls('sch-gantt-dependencyeditor')},getState:function(){if(this.rendered){return Ext.form.Panel.prototype.getState.apply(this,arguments)}},init:function(a){a.on(this.triggerEvent,this.onTriggerEvent,this);this.gantt=a;this.taskStore=a.getTaskStore();this.add(this.buildFields())},renderAndCollapse:function(){this.render(Ext.getBody());this.collapse(Ext.Component.DIRECTION_TOP,!1);this.hide();if(this.hideOnBlur){this.on({show:function(){this.mon(Ext.getBody(),{click:this.onMouseClick,scope:this})},hide:function(){this.mun(Ext.getBody(),{click:this.onMouseClick,scope:this})},delay:50})}},show:function(a,d){this.dependencyRecord=a;this.getForm().loadRecord(a);this.fromLabel.setValue(Ext.String.htmlEncode(this.dependencyRecord.getSourceTask().getName()));this.toLabel.setValue(Ext.String.htmlEncode(this.dependencyRecord.getTargetTask().getName()));if(this.typeField){var b=this.taskStore&&this.taskStore.getDependencyStore(),c=b&&b.allowedDependencyTypes;this.typeField.store.filter();this.typeField.setReadOnly(c&&c.length<2)}Ext.form.Panel.prototype.show.call(this);this.el.setXY(d);this.expand(!this.constrain);if(this.constrain){this.doConstrain(Ext.util.Region.getRegion(Ext.getBody()))}this.saveButton&&this.saveButton.setVisible(!this.gantt.isReadOnly());this.deleteButton&&this.deleteButton.setVisible(!this.gantt.isReadOnly())},buildFields:function(){var a=this,b=a.taskStore&&a.taskStore.getDependencyStore();var c=[a.fromLabel=new Ext.form.TextField({readOnly:!0,border:!1,fieldLabel:a.L('fromText'),cls:'sch-gantt-dependencyeditor-readonly'}),a.toLabel=new Ext.form.TextField({readOnly:!0,border:!1,fieldLabel:a.L('toText'),cls:'sch-gantt-dependencyeditor-readonly'}),a.typeField=a.buildTypeField()];if(a.showLag){c.push(a.lagField=new Ext.form.NumberField({name:b?b.model.prototype.lagField:Gnt.model.Dependency.prototype.lagField,fieldLabel:a.L('lagText')}))}return c},onTriggerEvent:function(c,a,b,d){if(!this.rendered){this.renderAndCollapse()}if(a!==this.dependencyRecord){this.show(a,b.getXY())}},filterAllowedTypes:function(e){var a=this.taskStore&&this.taskStore.getDependencyStore();if(!a||!a.allowedDependencyTypes){return !0}var c=a.allowedDependencyTypes;var d=a.model.Type;for(var b=0,g=c.length;b<g;b++){var f=d[c[b]];if(e.getId()==f){return !0}}return !1},buildTypeField:function(){var b=this.taskStore?this.taskStore.getDependencyStore().model:Gnt.model.Dependency;var a=b.Type;this.typesFilter=new Ext.util.Filter({filterFn:this.filterAllowedTypes,scope:this});var c=new Ext.data.ArrayStore({fields:[{name:'id',type:'int'},'text'],data:[[a.EndToStart,this.L('endToStartText')],[a.StartToStart,this.L('startToStartText')],[a.EndToEnd,this.L('endToEndText')],[a.StartToEnd,this.L('startToEndText')]]});c.filter(this.typesFilter);return new Ext.form.field.ComboBox({name:b.prototype.typeField,fieldLabel:this.L('typeText'),triggerAction:'all',queryMode:'local',editable:!1,valueField:'id',displayField:'text',store:c})},onMouseClick:function(a){if(this.collapsed||a.within(this.getEl())||a.getTarget('.x-layer')||a.getTarget('.sch-ignore-click')){return}this.collapse()},afterCollapse:function(){delete this.dependencyRecord;this.hide();Ext.form.Panel.prototype.afterCollapse.apply(this,arguments);if(this.hideOnBlur){this.mun(Ext.getBody(),'click',this.onMouseClick,this)}}},0,0,['component','box','container','panel','form'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0},['plugin.gantt_dependencyeditor'],[[Ext.AbstractPlugin.prototype.mixinId||Ext.AbstractPlugin.$className,Ext.AbstractPlugin],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.plugin,'DependencyEditor'],0);Ext.cmd.derive('CGA.plugin.DependencyEditor',Gnt.plugin.DependencyEditor,{ptype:'cga_gantt_dependencyeditor',readOnlyBeforeShow:null,show:function(a,c){var b=this;if(a.getData().Cls=='dynamic-dep'){}else {Gnt.plugin.DependencyEditor.prototype.show.apply(this,arguments)}}},0,0,['component','box','container','panel','form'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0},['plugin.cga_gantt_dependencyeditor'],0,[CGA.plugin,'DependencyEditor'],0);Ext.cmd.derive('CGA.plugin.ConstraintResolutionGui',Gnt.plugin.ConstraintResolutionGui,{onConstraintConflict:function(c,a){if(!this.counter){this.counter=0}var b=!0;if(b==!0){this.counter++;if(this.counter<250){a.resolutions[2].resolve()}else {this.counter=0;setTimeout(function(){a.resolutions[2].resolve()},0)}}else {Gnt.plugin.ConstraintResolutionGui.prototype.onConstraintConflict.apply(this,arguments)}}},0,0,0,0,0,0,[CGA.plugin,'ConstraintResolutionGui'],0);Ext.cmd.derive('Sch.plugin.exporter.AbstractExporter',Ext.util.Observable,{pageHeaderHeight:41,pageFooterHeight:41,bufferedHeightMargin:25,isExporter:!0,paperWidth:0,paperHeight:0,printHeight:0,lockedRowsHeight:0,normalRowsHeight:0,iterateTimeout:10,tableSelector:undefined,currentPage:undefined,headerTplDataFn:null,footerTplDataFn:null,headerTplDataFnScope:null,footerTplDataFnScope:null,config:{exporterId:'abstractexporter',name:'',translateURLsToAbsolute:!0,expandAllBeforeExport:!1,headerTpl:'<div class="sch-export-header" style="height:{height}px; width:{width}px"><h2>{pageNo}/{totalPages}</h2></div>',tpl:'<!DOCTYPE html><html class="x-border-box {htmlClasses}"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><title>{title}</title>{styles}</head><body class="x-webkit sch-export {bodyClasses}">{header}<div id="{id}" class="{componentClasses}" style="height:{bodyHeight}px; width:{totalWidth}px; position: relative !important">{HTML}</div>{footer}</body></html>',footerTpl:'<div class="sch-export-header" style="height:{height}px; width:{width}px"><h2>{pageNo}/{totalPages}</h2></div>',rowVisibilityThreshold:0.6},callbacks:undefined,error:undefined,extractedPages:undefined,numberOfPages:0,firstExportedRowOffset:0,secondaryCanvasOffset:0,eventBoxes:null,dependencyPainter:null,dependenciesHtml:'',depViewBeforeRefreshDetacher:null,depView:null,collectRowsTimer:null,collectRowsTimerTimeout:1,constructor:function(a){var b=this;a=a||{};Ext.util.Observable.prototype.constructor.apply(this,arguments);delete a.getUserHeaderTplData;delete a.getUserFooterTplData;b.initConfig(a);if(!a.tableSelector){b.tableSelector='.x-grid-item-container'}if(!a.name){b.setName(b.L('name'))}},destroy:function(){clearTimeout(this.collectRowsStepTimer);clearTimeout(this.collectRowsTimer);clearTimeout(this.scrollToTimer);Ext.util.Observable.prototype.destroy.apply(this,arguments)},setHeaderTpl:function(a){this.headerTpl=this.getTplInstance(a)},getHeaderTpl:function(){return this.headerTpl},setTpl:function(a){this.tpl=this.getTplInstance(a)},getTpl:function(){return this.tpl},setFooterTpl:function(a){this.footerTpl=this.getTplInstance(a)},getFooterTpl:function(){return this.footerTpl},getTplInstance:function(a){return a&&!a.isTemplate?new Ext.XTemplate(a,{disableFormats:!0}):a},getBodyClasses:function(){var b=new RegExp('x-ie\\d?|x-gecko','g'),a=document.body.className.replace(b,'');if(Ext.isIE){a+=' sch-ie-export'}return a},getComponentClasses:function(){return this.getComponent().el.dom.className},setComponent:function(b){var a=this;a.component=b;a.view=b.getSchedulingView();a.normalGrid=b.normalGrid;a.lockedGrid=b.lockedGrid;a.normalView=b.normalGrid.getView();a.lockedView=b.lockedGrid.getView();a.lockedBodySelector='#'+a.lockedView.getId();a.normalBodySelector='#'+a.normalView.getId();a.lockedHeader=a.lockedGrid.headerCt;a.normalHeader=a.normalGrid.headerCt;a.headerHeight=a.normalHeader.getHeight();a.printHeight=Math.floor(a.paperHeight)-a.headerHeight-(a.exportConfig.showHeader?a.pageHeaderHeight:0)-(a.exportConfig.showFooter?a.pageFooterHeight:0);a.saveComponentState(b);a.initDependencyPainter(b)},getComponent:function(){return this.component},setPaperSize:function(a,c){var b=this;if(c==='landscape'){b.paperWidth=a.height;b.paperHeight=a.width}else {b.paperWidth=a.width;b.paperHeight=a.height}},getPaperFormat:function(){return this.exportConfig.format},isBuffered:function(){return !!this.getBufferedRenderer()},getBufferedRenderer:function(){return this.view.bufferedRenderer},setComponentRange:function(b){var d=this,e=d.getComponent();if(b.range!=='complete'){var h=d.view,c,a;switch(b.range){case 'date':c=new Date(b.dateFrom);a=new Date(b.dateTo);if(Sch.util.Date.getDurationInDays(c,a)<1){a=Sch.util.Date.add(a,Sch.util.Date.DAY,1)};break;case 'current':var f=h.getVisibleDateRange();c=f.startDate;a=f.endDate||h.timeAxis.getEnd();break;case 'completedata':var g=e.getEventStore().getTotalTimeSpan();c=g.start;a=g.end;break;}if(c&&a){e.setTimeSpan(c,a)}}d.ticks=e.timeAxis.getTicks();if(b.rowsRange=='visible'){b.rowsRange=d.findVisibleRowsRange()}else {b.rowsRange=null}},getStylesheets:function(){var c=this.getTranslateURLsToAbsolute(),b=Ext.getHead().select('link[rel="stylesheet"], style',!0),a='';b.each(function(d){var b=d.dom.cloneNode(!0);if(c&&b.href){b.setAttribute('href',b.href)}a+=b.outerHTML;if(Ext.isIE&&b.styleSheet&&/style/i.test(b.tagName)){a+='<style type="text/css">'+d.dom.styleSheet.cssText+'</style>'}});return a},forEachTimeSpanPlugin:function(a,f,e){if(Sch.feature&&Sch.feature.AbstractTimeSpan){var g=this;var c=[].concat(a.plugins,a.normalGrid.plugins,a.columnLinesFeature);for(var b=0,h=c.length;b<h;b++){var d=c[b];if(d instanceof Sch.feature.AbstractTimeSpan){f.call(e||g,d)}}}},setCellSize:function(b){var a=this;a.timeColumnWidth=b[0];if(a.timeColumnWidth){this.getComponent().setTimeColumnWidth(a.timeColumnWidth)}if(b.length>1){a.view.setRowHeight(b[1])}},findVisibleRowsRange:function(){var d=this,c=d.lockedView.all,g=c.startIndex,h=c.endIndex;var b=!1,e=-1,f=-1;for(var a=g;a<=h;a++){var i=c.item(a,!0);if(d.isRowVisible(i,d.lockedBox)){if(!b){e=a;b=!0}f=a}else {if(b){break}}}return [e,f]},prepareComponent:function(b,c){var a=this;b=b||a.getComponent();a.suspendInfiniteScroll(b);a.forEachTimeSpanPlugin(b,function(a){a._renderDelay=a.renderDelay;a.renderDelay=0});b.getSchedulingView().timeAxisViewModel.suppressFit=!0;b.timeAxis.autoAdjust=!1;b.normalGrid.expand();b.lockedGrid.expand();if(Ext.getVersion().isGreaterThan('6.2.0')){a.lockedBox=a.lockedGrid.body.getBox();a.normalBox=a.normalGrid.body.getBox()}else {a.lockedBox=a.lockedView.getBox();a.normalBox=a.normalView.getBox()}a.setComponentRange(c);c.cellSize&&a.setCellSize(c.cellSize);c.beforeExport&&c.beforeExport(b,a.ticks);a.prepareColumns(c.columns);if(a.expandAllBeforeExport&&b.expandAll){b.expandAll()}a.fitComponentIntoPage();a.view.timeAxisViewModel.setTickWidth(a.view.timeAxisViewModel.getTickWidth());if(a.isBuffered()&&Ext.isIE8){a.normalView.bufferedRenderer.variableRowHeight=!1;a.lockedView.bufferedRenderer.variableRowHeight=!1}},prepareColumns:function(a){var b=this;if(a){b.lockedGrid.headerCt.items.each(function(b){if(Ext.Array.contains(a,b)){b.show()}else {b.hide()}})}},restoreComponent:function(b){var a=this;b=b||a.getComponent();a.forEachTimeSpanPlugin(b,function(a){a.renderDelay=a._renderDelay;delete a._renderDelay});if(a.depViewBeforeRefreshDetacher){a.depViewBeforeRefreshDetacher.destroy();a.depViewBeforeRefreshDetacher=null;a.depView.updateCanvasLayer()}a.restoreComponentState(b);a.restoreInfiniteScroll(b);a.exportConfig.afterExport&&a.exportConfig.afterExport(b)},saveComponentState:function(a){a=a||this.getComponent();var h=this,c=a.getSchedulingView(),e=a.normalGrid,d=a.lockedGrid;var g=[];d.headerCt.items.each(function(b){g.push({column:b,visible:!b.isHidden()})});var b=c.timeAxisViewModel;var i=b.originalTickWidth;var f=b.getTickWidth();b.setTickWidth(f,!0);h.restoreSettings={width:a.getWidth(),height:a.getHeight(),rowHeight:b.getViewRowHeight(),originalTickWidth:i,columnWidth:f,startDate:a.getStart(),endDate:a.getEnd(),normalWidth:e.getWidth(),normalLeft:e.getEl().getStyle('left'),lockedWidth:d.getWidth(),lockedCollapse:d.collapsed,normalCollapse:e.collapsed,columns:g,autoAdjust:a.timeAxis.autoAdjust,suppressFit:b.suppressFit,startIndex:c.all.startIndex,lockedScrollX:h.lockedView.getScrollX(),normalScrollX:c.getScrollX(),scrollY:c.getVerticalScroll()}},restoreComponentState:function(b){var c=this;b=b||c.getComponent();var a=c.restoreSettings,d=b.getSchedulingView();b.timeAxis.autoAdjust=a.autoAdjust;b.normalGrid.show();b.setWidth(a.width);b.setHeight(a.height);b.setTimeSpan(a.startDate,a.endDate);b.setTimeColumnWidth(a.columnWidth,!0);b.setRowHeight(a.rowHeight);Ext.Array.each(a.columns,function(a){a.column.setVisible(a.visible)});b.lockedGrid.show();b.normalGrid.setWidth(a.normalWidth);b.normalGrid.getEl().setStyle('left',a.normalLeft);b.lockedGrid.setWidth(a.lockedWidth);d.timeAxisViewModel.suppressFit=a.suppressFit;d.timeAxisViewModel.setTickWidth(a.columnWidth);d.timeAxisViewModel.originalTickWidth=a.originalTickWidth;if(a.lockedCollapse){b.lockedGrid.collapse()}if(a.normalCollapse){b.normalGrid.collapse()}c.restoreComponentScroll(a);if(c.getBufferedRenderer()){if(Ext.isIE8){c.normalView.bufferedRenderer.variableRowHeight=!0;c.lockedView.bufferedRenderer.variableRowHeight=!0}}},restoreComponentScroll:function(a){var b=this;b.lockedView.setScrollX(a.lockedScrollX);b.normalView.scrollTo(a.normalScrollX,a.scrollY)},extractPages:function(c,b,d,e){var a=this;a.enableGarbageCollector=Ext.enableGarbageCollector;Ext.enableGarbageCollector=!1;Ext.dom.GarbageCollector.pause();a.exportConfig=b;a.normalRows=[];a.lockedRows=[];a.extractedPages=[];a.numberOfPages=0;a.lockedRowsHeight=0;a.normalRowsHeight=0;a.firstExportedRowOffset=0;a.secondaryCanvasOffset=0;a._abort=!1;a.setPaperSize(b.pageSize,b.orientation);a.setComponent(c,b);a.prepareComponent(c,b);a.callbacks={success:d,scope:e||a};a.collectRowsTimer=setTimeout(function(){clearTimeout(a.collectRowsTimer);a.collectRows(a._onRowsCollected,a,b)},a.collectRowsTimerTimeout)},onPagesExtracted:function(a){var b=this;a=b.renderPages(a);b.restoreComponent();b.submitPages(a)},submitPages:function(c){var b=this,a=b.callbacks;a.success.call(a.scope,c);Ext.enableGarbageCollector=b.enableGarbageCollector;Ext.dom.GarbageCollector.resume()},getCurrentPage:function(){return this.currentPage},setCurrentPage:function(a){this.currentPage=a},getExpectedNumberOfPages:function(){throw 'Sch.plugin.exporter.AbstractExporter: [getExpectedNumberOfPages] Abstract method called.'},commitPage:function(c){var a=this;a.numberOfPages++;var b=a.preparePageToCommit(c);a.fireEvent('beforecommitpage',a,b,a.numberOfPages,a.getExpectedNumberOfPages());var d=Ext.apply({html:b.dom.innerHTML,number:a.numberOfPages},c);a.extractedPages.push(d);a.fireEvent('commitpage',a,d,a.numberOfPages,a.getExpectedNumberOfPages())},collectLockedRow:function(c,d){var a=Ext.fly(c).getHeight();this.lockedRowsHeight+=a;var b={height:a,row:c.cloneNode(!0),record:this.lockedView.getRecord(d)};this.lockedRows.push(b);return b},collectNormalRow:function(c,d){var b=Ext.fly(c).getHeight();this.normalRowsHeight+=b;var a={height:b,row:c.cloneNode(!0),record:this.normalView.getRecord(d)};this.normalRows.push(a);if(this.depView&&this.depView.getDependencyStore()){this.fillRecordRelatedBoxes(a.record)}return a},_onRowsCollected:function(){var a=this,b=a.depView;if(b&&b.getDependencyStore()){a.renderDependencies()}a.onRowsCollected.apply(a,arguments)},onRowsCollected:function(){throw 'Sch.plugin.exporter.AbstractExporter: [onRowsCollected] Abstract method called.'},_abort:!1,abort:function(){this._abort=function(){this.restoreComponent()}},iterateAsync:function(d,b){var a=this;b=b||a;var c=function(){var f=arguments;var e=setInterval(function(){clearInterval(e);!a._abort?d.apply(b,[].concat.apply([c],f)):a._abort()},a.iterateTimeout)};c.apply(a,Ext.Array.slice(arguments,2))},callAsync:function(c,a){a=a||this;var b=setInterval(function(){clearInterval(b);c.apply(a,Ext.Array.slice(arguments,2))},this.iterateTimeout)},canStartRowsCollecting:function(){var b=this.getComponent(),a=b.getDependencyView();return !a||a.getDependencyCanvas()},depViewRefreshBlocker:function(){return !1},collectRows:function(e,f,c){var a=this,b=0;if(!a.canStartRowsCollecting()){var h=Ext.Array.slice(arguments,0);a.collectRowsTimer=setTimeout(function(){clearTimeout(a.collectRowsTimer);a.collectRows.apply(a,h)},a.collectRowsTimerTimeout);return}var g=a.getComponent().getDependencyView();if(a.depView){a.depViewBeforeRefreshDetacher=g.on({beforerefresh:a.depViewRefreshBlocker,destroyable:!0})}var d=a.isBuffered();if(c.rowsRange){b=c.rowsRange[0];d=!(c.rowsRange[0]>=a.view.all.startIndex&&c.rowsRange[1]<=a.view.all.endIndex)}if(d){a.scrollToTimer=setTimeout(function(){a.scrollTo(b,function(){b&&a.initFirstExportedRowOffset(b);a.iterateAsync(a.collectRowsStep,a,b,e,f,c)})},1)}else {b&&a.initFirstExportedRowOffset(b);a.collectRowsStepTimer=setTimeout(function(){a.collectRowsStep(null,b,e,f,c)},1)}},initFirstExportedRowOffset:function(a){this.firstExportedRowOffset=this.view.el.getScrollTop()-this.view.el.getTop()+Ext.fly(this.view.getNode(a)).getTop()},isRowVisible:function(g,c){var e=Ext.fly(g),d=e.getTop(),b=e.getHeight(),f=d+b,a=(1-this.getRowVisibilityThreshold())*b;return d+a>c.top&&f-a<c.bottom},collectRowsStep:function(o,d,f,h,e){var a=this,g=a.normalView.all.endIndex,n=a.component.store.getCount(),m=e.rowsRange,j=a.normalView.all.slice(d),i=a.lockedView.all.slice(d),c=0;var l;if(m){l=m[1]}var k=!1;for(var b=d;c<j.length;c++){if(b>l){k=!0;break}i[c]&&a.collectLockedRow(i[c],b,e);a.collectNormalRow(j[c],b,e);b++}a.fireEvent('collectrows',a,d,b,n);if(!k&&a.isBuffered()){if(g+1<n){a.callAsync(function(){a.scrollTo(g+1,function(){o(g+1,f,h,e)})})}else {a.callAsync(function(){a.scrollTo(0,function(){f.call(h||a,a.lockedRows,a.normalRows)})})}}else {f.call(h||a,a.lockedRows,a.normalRows)}},renderPages:function(a){var d=this;a=a||d.extractedPages;for(var b=0,e=a.length;b<e;b++){var c=a[b];c.html=d.applyPageTpl(c)}return a},applyPageTpl:function(b){var a=this;return a.getTpl().apply(a.getPageTplData(b))},applyHeaderTpl:function(c){var a=this,b=a.getHeaderTpl();if(a.exportConfig.showHeader&&b){var d=a.headerTplDataFn;var e=d&&d.call(a.headerTplDataFnScope||a,c);return b.apply(Ext.apply(a.getHeaderTplData(c),e))}return ''},applyFooterTpl:function(c){var a=this,b=a.getFooterTpl();if(a.exportConfig.showFooter&&b){var d=a.footerTplDataFn;var e=d&&d.call(a.footerTplDataFnScope||a,c);return b.apply(Ext.apply(a.getFooterTplData(c),e))}return ''},getHeaderTplData:function(b){var a=this;return {width:a.paperWidth,height:a.pageHeaderHeight,totalPages:a.numberOfPages,pageNo:b.number}},getFooterTplData:function(b){var a=this;return {width:a.paperWidth,height:a.pageFooterHeight,totalPages:a.numberOfPages,pageNo:b.number}},getPageTplData:function(b){var a=this;return {id:a.getComponent().id,bodyClasses:a.getBodyClasses(),bodyHeight:a.printHeight+a.headerHeight,componentClasses:a.getComponentClasses(),styles:a.getStylesheets(),showHeader:a.exportConfig.showHeader,showFooter:a.exportConfig.showFooter,header:a.applyHeaderTpl(b),HTML:b.html,footer:a.applyFooterTpl(b),totalWidth:a.paperWidth,pageNo:b.number,totalPages:a.numberOfPages,title:b.number+' of '+a.numberOfPages}},fitComponentIntoPage:Ext.emptyFn,getLockedGridBody:function(a){a=a||this.getCurrentPage();return a.down(this.lockedBodySelector+' '+this.tableSelector,!0)},getNormalGridBody:function(a){a=a||this.getCurrentPage();return a.down(this.normalBodySelector+' '+this.tableSelector,!0)},emptyLockedGrid:function(a){Ext.fly(this.getLockedGridBody(a)).select(this.lockedView.getItemSelector()).remove()},fillGrids:function(d,e,b,a){var c=this;c.fillLockedGrid(d,b,a);c.fillNormalGrid(e,b,a)},fillLockedGrid:function(d,c,b){var a=this;if(!b){a.emptyLockedGrid()}a.appendRows(a.getLockedGridBody(),d||a.lockedRows,c)},fillNormalGrid:function(d,c,b){var a=this;if(!b){a.emptyNormalGrid()}a.appendRows(a.getNormalGridBody(),d||a.normalRows,c)},appendRows:function(c,b,d){for(var a=0,e=b.length;a<e;a++){c.appendChild(d?b[a].row.cloneNode(!0):b[a].row)}},emptyNormalGrid:function(a){Ext.fly(this.getNormalGridBody(a)).select(this.normalView.getItemSelector()).remove()},getRowHeight:function(){return this.view.timeAxisViewModel.getViewRowHeight()},getTotalSize:function(){return {width:this.getTotalWidth(),height:this.getTotalHeight()}},getTotalHeight:function(){var a=this,b;if(a.isBuffered()){b=a.bufferedHeightMargin+a.normalRowsHeight}else {b=a.lockedView.getEl().down(a.tableSelector).getHeight()}return a.headerHeight+b},getTotalWidth:function(){var a;if(Ext.getVersion().isGreaterThan('6.2.0')){a=this.component.lockedGrid.split?this.component.down('splitter').getWidth():0}else {a=this.component.split?this.component.down('splitter').getWidth():0}return this.getLockedGridWidth()+a+this.normalView.getEl().down(this.tableSelector).getWidth()},getLockedGridWidth:function(){return this.lockedHeader.getEl().down('.x-box-inner').getWidth()},getNormalGridWidth:function(){return this.normalHeader.getEl().down('.x-box-inner').getWidth()},preparePageToCommit:function(s){var a=this.getCurrentPage(),h=this.component,m=h.lockedGrid,d=h.normalGrid,k=a.down('.sch-secondary-canvas',!0);a.select('.sch-remove').remove();var b=function(b){return a.down('#'+b,!0)},g=function(a){if(a){a.style.width='100%'}},f=function(a){if(a){a.style.height='100%'}};var o=a.down(this.normalBodySelector,!0);o.style.top='0px';var n=a.down(this.lockedBodySelector,!0);n.style.top='0px';var i;if(i=this.getLockedGridBody()){if(Ext.isIE9m){i.style.top=''}else {i.style.transform=''}}var j;if(j=this.getNormalGridBody()){if(Ext.isIE9m){j.style.top=''}else {j.style.transform=''}}if(k){k.style.top=this.secondaryCanvasOffset+'px';Ext.fly(k).select('.sch-column-line').setHeight(this.normalRowsHeight)}var l=[b(h.id+'-targetEl'),b(h.id+'-innerCt'),b(m.id),b(m.body.id),b(m.view.el.id)];if(Ext.getVersion().isGreaterThan('6.2.0')){var c='.x-';var e=a.down(c+'grid-scroll-container',!0);e.style.top=this.headerHeight+1+'px';e.style.left=0;f(e);g(e);var p=a.down(c+'grid-scroll-body',!0);f(p);p.style['overflow-y']='hidden';Ext.Array.each(a.query(c+'grid-view',!0),function(a){f(a)});n.style.margin=o.style.margin=0;Ext.Array.each(a.query(c+'grid-scroll-container '+c+'scroller-spacer',!0),function(a){a.parentNode.removeChild(a)});var q=a.down('.x-splitter',!0);if(q){Ext.fly(q).setZIndex(2)}}Ext.Array.each(l,f);g(l[0]);g(l[1]);if(!Ext.isIE){g(b(d.headerCt.id))}else {var r=b(d.headerCt.id);if(r){r.style.width=''}}Ext.Array.each([b(d.id),b(d.body.id),b(d.getView().id)],function(a){if(a){a.style.height=a.style.width='100%'}});return a},startPage:function(c){var b=this;var a=(c||b.getComponent().body).dom.cloneNode(!0);a.id='';b.setCurrentPage(Ext.get(a))},scrollTo:function(c,b,d){var a=this;if(a.component.ensureVisible){var e=a.component.store.getAt(c);if(e){a.component.ensureVisible(e,{callback:function(){if(b&&this.isLocked===!1){b.apply(d||a)}},select:!1,focus:!1,animate:!1})}else {b.apply(d||a)}}else {a.lockedView.bufferedRenderer.scrollTo(c,!1,function(){a.normalView.bufferedRenderer.scrollTo(c,!1,b,d||a)})}},removeNode:function(a){if(a&&a.parentNode){a.parentNode.removeChild(a)}else {if(a.elements){for(var b=0;b<a.elements.length;b++){var c=a.elements[b];c.parentNode.removeChild(c)}}}},restoreInfiniteScroll:function(a){var b=a.getSchedulingView();if(a.infiniteScroll&&b.rendered){a.timeAxis.setTimeSpan(this._oldStart,this._oldEnd);b.setScrollX(this._oldScrollX);b.bindInfiniteScrollListeners()}},suspendInfiniteScroll:function(a){var b=a.getSchedulingView();if(a.infiniteScroll&&b.rendered){b.unbindInfiniteScrollListeners();this._oldStart=a.timeAxis.getStart();this._oldEnd=a.timeAxis.getEnd();this._oldScrollX=b.getScrollX();var c=a.getEventStore().getTotalTimeSpan();a.setTimeSpan(c.start,c.end)}},dependencyPainterMembers:{getItemBox:function(d,a){var c=this,b=c.exporter.eventBoxes[a.internalId];return b||this.callParent(arguments)}},initDependencyPainter:function(c){var a=this,b=c.getDependencyView();if(b){a.dependencyPainter=b.clonePainter();Ext.override(a.dependencyPainter,Ext.apply({},{exporter:a},a.dependencyPainterMembers))}a.depView=b;a.eventBoxes={}},fillRecordRelatedBoxes:function(j){var e=this,a=e.normalView,i=e.depView.painter,h=e.depView.getDependencyStore();var g=j.getEvents();for(var f=0;f<g.length;f++){var d=g[f];if(a.timeAxis.isRangeInAxis(d)&&h.getEventDependencies(d).length){var b=i.getItemBox(a,d);for(var c=0;c<b.length;c++){if(a.bufferedRenderer){b[c].top+=a.bufferedRenderer.bodyTop;b[c].bottom+=a.bufferedRenderer.bodyTop}b[c].rendered=!0}e.eventBoxes[d.internalId]=b}}},renderDependencies:function(){var a=this,b=a.depView;if(b.getDrawDependencies()){a.dependenciesHtml=a.dependencyPainter.generatePaintMarkup(b.getPrimaryView(),b.getDependencyStore().getRange())}else {a.dependenciesHtml=''}}},1,0,0,0,0,[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.plugin.exporter,'AbstractExporter'],0);Ext.cmd.derive('Sch.plugin.exporter.SinglePage',Sch.plugin.exporter.AbstractExporter,{config:{exporterId:'singlepage'},getExpectedNumberOfPages:function(){return 1},getPaperFormat:function(){var c=this,a=c.getTotalSize(),b=c.exportConfig.DPI,e=Ext.Number.toFixed(a.width/b,1),d=Ext.Number.toFixed(a.height/b,1);return e+'in*'+d+'in'},onRowsCollected:function(){var a=this;a.startPage();a.fillGrids();a.commitPage();a.onPagesExtracted()},getPageTplData:function(){var b=this,a=b.getTotalSize();return Ext.apply(Sch.plugin.exporter.AbstractExporter.prototype.getPageTplData.apply(this,arguments),{bodyHeight:a.height,totalWidth:a.width})},getHeaderTplData:function(b){var a=this;return Ext.apply(Sch.plugin.exporter.AbstractExporter.prototype.getHeaderTplData.apply(this,arguments),{width:a.getTotalWidth(),height:a.pageHeaderHeight})},getFooterTplData:function(b){var a=this;return Ext.apply(Sch.plugin.exporter.AbstractExporter.prototype.getFooterTplData.apply(this,arguments),{width:a.getTotalWidth(),height:a.pageHeaderHeight})},fitComponentIntoPage:function(){var b=this,a=b.lockedGrid;a.setWidth(a.headerCt.getEl().first('.x-box-inner').getWidth())},preparePageToCommit:function(){var c=this,a=Sch.plugin.exporter.AbstractExporter.prototype.preparePageToCommit.apply(this,arguments),d=a.select('.sch-secondary-canvas').first(),k=d.select('.sch-zone'),j=d.select('.sch-column-line'),g=c.getTotalHeight();d.setTop(0);k.setHeight(g);j.setHeight(g);var b=a.selectNode('.sch-dependencyview-ct');if(b){b.innerHTML=c.dependenciesHtml;b.style.top='0px';b.style.left='0px';b.style.visibility='visible'}var e=c.normalView,i=e.getEl().down(c.tableSelector).getWidth(),m=e.id,l=a.select('#'+m).first().dom;l.style.width=i+'px';var h=a.selectNode('#'+c.normalView.id);h.style.overflow='hidden';var f=a.selectNode('.x-splitter');if(f){f.style.height='100%'}return a}},0,0,0,0,0,0,[Sch.plugin.exporter,'SinglePage'],0);Ext.cmd.derive('Sch.plugin.exporter.MultiPage',Sch.plugin.exporter.AbstractExporter,{config:{exporterId:'multipage'},rowPageIndex:0,columnPageIndex:0,pagesPerColumn:0,depsTopOffset:0,onRowsCollected:function(b,c){var a=this;a.depsTopOffset=-a.firstExportedRowOffset;a.rowPageIndex=0;a.columnPageIndex=0;a.pagesPerColumn=0;a.buildPageFrames(function(){a.buildPages(a.onPagesExtracted,a,b,c)})},buildPages:function(e,f,c,d){var a=this,b=a.pageFrames[0];a.startPage(b,!0);this.iterateAsync(a.rowIteratorStep,a,{rowIndex:0,pageFrame:b,rowsHeight:0,leftHeight:this.printHeight,lockeds:[],normals:[],lockedRows:c,normalRows:d,callback:e,scope:f||a})},rowIteratorStep:function(j,a){var b=this,f=a.rowIndex,l=a.lockedRows,g=a.normalRows,k=a.leftHeight,d=a.lockeds,e=a.normals,i=!0;if(f<g.length){var h=l[f],c=g[f];if(c.height<=k){d.push(h);e.push(c);a.leftHeight-=c.height;a.rowsHeight+=c.height;i=!1}else {b.fillGrids(d,e,a.pageFrame);b.commitPage({rowsHeight:a.rowsHeight});b.startPage(a.pageFrame);a.lockeds=[h];a.normals=[c];a.leftHeight=b.printHeight-c.height;a.rowsHeight=c.height}a.rowIndex++}else {if(b.columnPageIndex<b.pageFrames.length){b.fillGrids(d,e,a.pageFrame);b.commitPage({rowsHeight:a.rowsHeight});a.pageFrame=b.pageFrames[b.columnPageIndex];b.startPage(a.pageFrame,!0);a.leftHeight=b.printHeight;a.rowsHeight=0;a.lockeds=[];a.normals=[];a.rowIndex=0}else {b.fillGrids(d,e,a.pageFrame);b.commitPage({rowsHeight:a.rowsHeight});a.callback.call(a.scope);return}}if(i){j(a)}else {b.rowIteratorStep(j,a)}},fillGrids:function(e,f,c){var a=this,b=a.lockedColumnPages[a.columnPageIndex-1],d=!b||b&&b.leftWidth;if(b){a.fillLockedGrid(e,!0);a.removeHiddenLockedColumns(b)}if(d){a.fillNormalGrid(f,!0);a.removeInvisibleEvents(-c.normalGridOffset,-c.normalGridOffset+c.normalGridWidth)}},buildPageFrame:function(i,d){var a=this,c=a.lockedColumnPages[i];if(c){a.lockedGrid.setWidth(a.showLockedColumns(c.start,c.end)+(c.startOffset||0));if(c.leftWidth){a.normalGrid.show()}else {var g=a.lockedGrid.headerCt.getHeight();a.lockedGrid.getVisibleColumns()[0].setHeight(g);a.normalGrid.hide()}}else {a.lockedGrid.setWidth(0);a.lockedGrid.hide();a.normalGrid.show()}var b=a.getComponent().body.dom.cloneNode(!0);b.id='';b=Ext.get(b);b.normalGridOffset=d;b.lockedGridOffset=c&&c.startOffset||0;b.normalGridWidth=a.normalGrid.getWidth();b.lockedGridWidth=a.lockedGrid.getWidth();b.down(a.lockedBodySelector,!0).style.position='';b.down('#'+a.lockedView.id,!0).style.overflow='visible';if(!a.normalGrid.hidden){var f=b.select(a.normalBodySelector).first();f.dom.style.position='';f.dom.style.top='0px';var j=a.getNormalGridBody(b);var e=b.down('#'+a.normalView.headerCt.id,!0);var h=b.down('.sch-secondary-canvas',!0);var k=b.down('#'+a.normalView.id,!0);j.style.left=d+'px';e.style.left=d+'px';e.style.overflow='visible';h.style.left=d+'px';k.style.overflow='visible'}return b},buildPageFrames:function(e,b){var a=this;b=b||a;a.lockedColumnPages=a.calculateLockedColumnPages();var d=Math.ceil(a.getTotalWidth()/a.paperWidth),c=a.pageFrames=[];a.iterateAsync(function(i,f,g){if(f>=d){e.call(b,c);return}c.push(a.buildPageFrame(f,g));var h=a.lockedColumnPages[f];if(h){g-=h.leftWidth||0}else {g-=a.paperWidth}i(f+1,g)},a,0,0)},startPage:function(c,b){var a=this;if(b){a.depsTopOffset=-a.firstExportedRowOffset;if(a.columnPageIndex==1){a.pagesPerColumn=a.extractedPages.length}a.rowPageIndex=0;a.columnPageIndex++;a.secondaryCanvasOffset=a.firstExportedRowOffset}a.rowPageIndex++;Sch.plugin.exporter.AbstractExporter.prototype.startPage.apply(this,arguments);a.emptyNormalGrid();a.emptyLockedGrid()},commitPage:function(b){var a=this;Sch.plugin.exporter.AbstractExporter.prototype.commitPage.call(this,Ext.apply({row:a.rowPageIndex,column:a.columnPageIndex},b));a.secondaryCanvasOffset-=b.rowsHeight;a.depsTopOffset-=b.rowsHeight},getExpectedPagesPerColumn:function(){return this.pagesPerColumn||Math.ceil((this.normalRowsHeight||this.component.store.count()*this.component.getRowHeight())/this.printHeight)},getExpectedColumnsNumber:function(){return this.pageFrames?this.pageFrames.length:Math.ceil((this.lockedGrid.getWidth()+this.ticks.length*this.view.timeAxisViewModel.getTickWidth())/this.paperWidth)},getExpectedNumberOfPages:function(){return this.getExpectedColumnsNumber()*this.getExpectedPagesPerColumn()},calculateLockedColumnPages:function(){var e=this,d=[],f=e.lockedColumns,c=e.paperWidth,a;for(var b=0,i=f.length;b<i;b++){var h=f[b],g=h.width;a=a||{start:b,end:b};c-=g;if(c<0){d.push(a);if(c){a={start:b,end:b}}c=e.paperWidth-g+c}else {a.end=b}}if(a){a.leftWidth=c;d.push(a)}return d},getPageTplData:function(a){return Ext.apply(Sch.plugin.exporter.AbstractExporter.prototype.getPageTplData.apply(this,arguments),{title:a.number+' of '+this.numberOfPages+' (column: '+a.column+', row: '+a.row+')'})},showLockedColumns:function(b,c){var g=this,d=g.lockedColumns,f=0;b=b||0;c=c||d.length-1;for(var a=0;a<d.length;a++){var e=d[a];if(a>=b&&a<=c){e.column.show();f+=e.width}else {e.column.hide()}}return f},removeInvisibleEvents:function(d,c){var a=this,e=a.getNormalGridBody(),b=a.normalView.eventSelector;Ext.Array.each(Ext.fly(e).select(b).elements,function(b){var e=parseInt(b.style.left,10),f=e+parseInt(b.style.width,10);if(f<d||e>c){a.removeNode(b)}})},removeHiddenLockedColumns:function(c){var a=this,j=a.getCurrentPage(),g=a.getLockedGridBody();for(var b=0;b<a.lockedColumns.length;b++){var d=a.lockedColumns[b].column;if(b<c.start||b>c.end){var e='#'+d.getId();var h=j.select(e);a.removeNode(h);var f=d.getCellSelector();var i=Ext.fly(g).select(f);a.removeNode(i)}}},fitComponentIntoPage:function(){var a=this,b=a.getComponent();b.setWidth(a.paperWidth)},prepareComponent:function(c,d){var a=this,b=a.lockedColumns=[];Sch.plugin.exporter.AbstractExporter.prototype.prepareComponent.apply(this,arguments);a.lockedGrid.headerCt.items.each(function(a){if(!a.hidden){b.push({column:a,width:a.getWidth()})}})},restoreComponentState:function(){Sch.plugin.exporter.AbstractExporter.prototype.restoreComponentState.apply(this,arguments);this.showLockedColumns()},preparePageToCommit:function(i){var a=this,b=Sch.plugin.exporter.AbstractExporter.prototype.preparePageToCommit.apply(this,arguments),f=b.down('.x-splitter',!0),c=b.selectNode('.sch-dependencyview-ct'),e=a.pageFrames[a.columnPageIndex-1];if(f){if(e.lockedHidden){f.style.display='none';b.down('.x-grid-inner-normal',!0).style.left=0}else {Ext.fly(f).setHeight('100%')}}if(!e.normalHidden){if(c){c.innerHTML=a.dependenciesHtml;c.style.top=a.depsTopOffset+'px';c.style.visibility='visible'}var d=b.selectNode('#'+a.normalView.id);if(d){var h=a.normalView.getEl().down(a.tableSelector).getWidth();d.style.width=h+'px';d.style.overflow='hidden'}}if(!e.lockedHidden){var g=b.selectNode('#'+a.lockedView.id);if(g){g.style.overflow='hidden'}}return b}},0,0,0,0,0,0,[Sch.plugin.exporter,'MultiPage'],0);Ext.cmd.derive('Sch.plugin.exporter.MultiPageVertical',Sch.plugin.exporter.AbstractExporter,{config:{exporterId:'multipagevertical'},minRowHeight:20,minAverageColumnWidth:100,visibleColumns:null,visibleColumnsWidth:0,depsTopOffset:0,onRowsCollected:function(c,b){var a=this;a.depsTopOffset=-a.firstExportedRowOffset;a.iterateAsync(function(m,i){if(i===b.length){a.onPagesExtracted();return}var d=i,h=a.printHeight,f=0,j=[],l=[],k=!1,e,g;a.startPage();while(!k&&d<b.length){e=b[d];g=c[d];h-=e.height;if(h>0){f+=e.height;g&&j.push(g);l.push(e);d++}else {k=!0}}a.fillGrids(j,l);a.commitPage({rowIndex:d,rowsHeight:f});a.secondaryCanvasOffset-=f;m(d)},a,0)},startPage:function(){var a=this;Sch.plugin.exporter.AbstractExporter.prototype.startPage.apply(this,arguments);var b=a.getCurrentPage().select('#'+a.lockedView.id).first();b.dom.style.overflow='visible'},commitPage:function(b){var a=this;Sch.plugin.exporter.AbstractExporter.prototype.commitPage.apply(this,arguments);if(a.depView&&a.depView.getDependencyStore()){a.depsTopOffset-=b.rowsHeight}},getExpectedNumberOfPages:function(){return Math.ceil(this.normalRowsHeight/this.printHeight)},prepareColumns:function(c){Sch.plugin.exporter.AbstractExporter.prototype.prepareColumns.apply(this,arguments);var a=this,b=a.visibleColumns=[];a.visibleColumnsWidth=0;a.lockedGrid.headerCt.items.each(function(d){if(!d.hidden){b.push({column:d,width:d.getWidth()});a.visibleColumnsWidth+=d.getWidth()}})},fitComponentIntoPage:function(){var a=this,d=a.getComponent(),m=d.getSchedulingView(),j=d.normalGrid,i=d.lockedGrid,k=a.getTotalWidth(),l=a.ticks,h=a.timeColumnWidth||m.timeAxisViewModel.getTickWidth();var b=Math.floor(a.visibleColumnsWidth/k*a.paperWidth);var g=a.visibleColumns.length,c=g*a.minAverageColumnWidth;c=c>a.paperWidth/2?Math.floor(a.paperWidth/2):c;b=c>b?c:b;var e=a.paperWidth-b;var f=e/l.length;a.setRowHeight(f/h*a.getRowHeight());d.setWidth(a.paperWidth);j.setWidth(e);i.setWidth(b);a.fitLockedColumnWidth(b);d.setTimeColumnWidth(f)},setRowHeight:function(b){var a=this;a.component.setRowHeight(b<a.minRowHeight?a.minRowHeight:b)},fitLockedColumnWidth:function(e){var h=this,a=this.visibleColumns;var f=e/h.visibleColumnsWidth;if(a.length){for(var b=0;b<a.length;b++){var c=a[b],d=c.width,g=Math.floor(d*f);c.column.setWidth(g)}this._restoreColumnWidth=!0}},restoreComponentState:function(c){var e=this;c=c||e.getComponent();if(this._restoreColumnWidth){var b=this.visibleColumns;for(var a=0;a<b.length;a++){var d=b[a];d.column.setWidth(d.width)}}Sch.plugin.exporter.AbstractExporter.prototype.restoreComponentState.apply(this,arguments)},preparePageToCommit:function(){var a=this,c=Sch.plugin.exporter.AbstractExporter.prototype.preparePageToCommit.apply(this,arguments),b=c.selectNode('.sch-dependencyview-ct');if(b){b.innerHTML=a.dependenciesHtml;b.style.top=a.depsTopOffset+'px';b.style.left='0px';b.style.visibility='visible'}var g=a.normalView.getEl().down(a.tableSelector).getWidth();var d=c.selectNode('#'+a.normalView.id);d.style.width=g+'px';d.style.overflow='hidden';var f=c.selectNode('#'+a.lockedView.id);f.style.overflow='hidden';var e=c.selectNode('.x-splitter');if(e){e.style.height='100%'}return c}},0,0,0,0,0,0,[Sch.plugin.exporter,'MultiPageVertical'],0);Ext.cmd.derive('Sch.widget.ResizePicker',Ext.Panel,{width:200,height:200,border:!0,collapsible:!1,bodyStyle:'position:absolute; margin:5px',verticalCfg:{height:120,value:24,increment:2,minValue:20,maxValue:80,reverse:!0,disabled:!0},horizontalCfg:{width:120,value:100,minValue:25,increment:5,maxValue:200,disable:!0},initComponent:function(){var a=this;a.horizontalCfg.value=a.dialogConfig.columnWidth;a.verticalCfg.value=a.dialogConfig.rowHeight;a.verticalCfg.disabled=a.dialogConfig.scrollerDisabled||!1;a.dockedItems=[a.vertical=new Ext.slider.Single(Ext.apply({dock:'left',style:'margin-top:10px',vertical:!0,stateful:a.dialogConfig.stateful,stateId:'exporter_resize_vertical',stateEvents:['change'],listeners:{change:a.onSliderChange,changecomplete:a.onSliderChangeComplete,scope:a}},a.verticalCfg)),a.horizontal=new Ext.slider.Single(Ext.apply({dock:'top',style:'margin-left:28px',stateful:a.dialogConfig.stateful,stateId:'exporter_resize_horizontal',stateEvents:['change'],listeners:{change:a.onSliderChange,changecomplete:a.onSliderChangeComplete,scope:a}},a.horizontalCfg))];Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;a.addCls('sch-ux-range-picker');a.valueHandle=a.body.createChild({cls:'sch-ux-range-value',cn:{tag:'span'}});a.valueSpan=a.valueHandle.down('span');var b=new Ext.dd.DD(a.valueHandle);Ext.apply(b,{startDrag:function(){a.dragging=!0;this.constrainTo(a.body)},onDrag:function(){a.updateValuesFromHandles()},endDrag:function(){a.updateValuesFromHandles();a.dragging=!1}});a.setValues(a.getValues());Ext.panel.Panel.prototype.afterRender.apply(this,arguments);a.body.on('click',a.onBodyClick,a)},onBodyClick:function(b,c){var a=[b.getXY()[0]-8-this.body.getX(),b.getXY()[1]-8-this.body.getY()];this.valueHandle.setLeft(Ext.Number.constrain(a[0],0,this.getAvailableWidth()));this.valueHandle.setTop(Ext.Number.constrain(a[1],0,this.getAvailableHeight()));this.updateValuesFromHandles();this.onSliderChangeComplete()},updateValuesFromHandles:function(){this.setValues(this.getValuesFromXY())},getAvailableWidth:function(){return this.body.getWidth()-18},getAvailableHeight:function(){return this.body.getHeight()-18},getValuesFromXY:function(a){a=a||[this.valueHandle.getLeft(!0),this.valueHandle.getTop(!0)];var d=a[0]/this.getAvailableWidth();var e=a[1]/this.getAvailableHeight();var b=Math.round((this.horizontalCfg.maxValue-this.horizontalCfg.minValue)*d);var c=Math.round((this.verticalCfg.maxValue-this.verticalCfg.minValue)*e)+this.verticalCfg.minValue;return [b+this.horizontalCfg.minValue,c]},getXYFromValues:function(a){var c=this.horizontalCfg.maxValue-this.horizontalCfg.minValue;var d=this.verticalCfg.maxValue-this.verticalCfg.minValue;var e=Math.round((a[0]-this.horizontalCfg.minValue)*this.getAvailableWidth()/c);var b=a[1]-this.verticalCfg.minValue;var f=Math.round(b*this.getAvailableHeight()/d);return [e,f]},updatePosition:function(){var a=this.getValues();var b=this.getXYFromValues(a);this.valueHandle.setLeft(Ext.Number.constrain(b[0],0,this.getAvailableWidth()));if(this.verticalCfg.disabled){this.valueHandle.setTop(this.dialogConfig.rowHeight)}else {this.valueHandle.setTop(Ext.Number.constrain(b[1],0,this.getAvailableHeight()))}this.positionValueText();this.setValueText(a)},positionValueText:function(){var b=this.valueHandle.getTop(!0);var a=this.valueHandle.getLeft(!0);this.valueSpan.setLeft(a>30?-30:10);this.valueSpan.setTop(b>10?-20:20)},setValueText:function(a){if(this.verticalCfg.disabled){a[1]=this.dialogConfig.rowHeight}this.valueSpan.update('['+a.toString()+']')},setValues:function(a){this.horizontal.setValue(a[0]);if(this.verticalCfg.reverse){if(!this.verticalCfg.disabled){this.vertical.setValue(this.verticalCfg.maxValue+this.verticalCfg.minValue-a[1])}}else {if(!this.verticalCfg.disabled){this.vertical.setValue(a[1])}}if(!this.dragging){this.updatePosition()}this.positionValueText();this.setValueText(a)},getValues:function(){if(!this.verticalCfg.disabled){var a=this.vertical.getValue();if(this.verticalCfg.reverse){a=this.verticalCfg.maxValue-a+this.verticalCfg.minValue}return [this.horizontal.getValue(),a]}return [this.horizontal.getValue()]},onSliderChange:function(){this.fireEvent('change',this,this.getValues());if(!this.dragging){this.updatePosition()}},onSliderChangeComplete:function(){this.fireEvent('changecomplete',this,this.getValues())},afterLayout:function(){Ext.panel.Panel.prototype.afterLayout.apply(this,arguments);this.updatePosition()}},0,['dualrangepicker'],['component','box','container','panel','dualrangepicker'],{'component':!0,'box':!0,'container':!0,'panel':!0,'dualrangepicker':!0},['widget.dualrangepicker'],0,[Sch.widget,'ResizePicker'],0);Ext.cmd.derive('Sch.widget.ColumnPicker',Ext.form.field.ComboBox,{multiSelect:!0,valueField:'id',displayField:'name',forceSelection:!0,editable:!1,listConfig:{cls:'sch-columnpicker-list'},columns:null,columnEmptyText:null,columnEmptyRegExp:/^(\s*|&(nbsp|#160);)$/,initComponent:function(){this.store=new Ext.data.Store({proxy:'memory',fields:['id','name','column'],data:this.processColumns(this.columns)});Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},processColumns:function(b){var d=this,a=[],c=Ext.Array.map(b||[],function(c){if(!c.isHidden()){a.push(c.id)}return {id:c.id,name:d.getColumnTitle(c),column:c}});this.value=this.value||a;return c},getColumnTitle:function(a){var b=this;return !Ext.String.trim(a.text)||a.text.match(b.columnEmptyRegExp)?b.columnEmptyText:a.text},getSelectedColumns:function(){var b=this,a=b.getValue();if(!Ext.isArray(a)){a=[a]}return Ext.Array.map(a,function(a){return b.store.getById(a).get('column')})}},0,0,['component','box','field','textfield','pickerfield','combobox','combo'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0},0,0,[Sch.widget,'ColumnPicker'],0);Ext.cmd.derive('Sch.widget.ExportDialogForm',Ext.form.Panel,{border:!1,bodyPadding:'10 10 0 10',autoHeight:!0,stateful:!0,rangeField:null,resizerHolder:null,resizePicker:null,dateFromField:null,dateToField:null,datesHolder:null,columnPicker:null,rowsRangeField:null,exportersField:null,formatField:null,orientationField:null,dpiField:null,showHeaderField:null,showFooterField:null,dateRangeFormat:'',columnPickerConfig:null,dpiFieldConfig:null,dateRangeRestriction:!0,rangeFieldConfig:null,rowsRangeFieldConfig:null,formatFieldConfig:null,orientationFieldConfig:null,exportersFieldConfig:null,showHeaderFieldConfig:null,showFooterFieldConfig:null,dateFromFieldConfig:null,dateToFieldConfig:null,showResizePicker:!1,showColumnPicker:!0,showDPIField:!0,showShowHeaderField:!0,showShowFooterField:!1,showRowsRangeField:!0,initComponent:function(){var a=this;a.fieldDefaults=Ext.apply({labelAlign:'left',labelWidth:120,anchor:'99%'},a.fieldDefaults);a.items=a.createFields();Ext.form.Panel.prototype.initComponent.apply(this,arguments);a.onRangeChange(a.rangeField,a.rangeField.getValue());a.onExporterChange(a.exportersField,a.exportersField.getValue())},isValid:function(){var a=this;if(a.rangeField.getValue()=='date'){return a.dateFromField.isValid()&&a.dateToField.isValid()}return !0},getValues:function(c,f,d,e){var a=Ext.form.Panel.prototype.getValues.apply(this,arguments);a.showHeader=!!a.showHeader;a.showFooter=!!a.showFooter;a.onlyVisibleRows=!!a.onlyVisibleRows;if(this.resizePicker&&this.rangeField.getValue()=='current'){var b=this.resizePicker.getValues();if(c){a+='&cellSize[0]='+b[0]+'&cellSize[1]='+b[1]}else {a.cellSize=b}}if(this.columnPicker){a.columns=this.columnPicker.getSelectedColumns()}return a},createFields:function(){var a=this,c='<table class="sch-fieldcontainer-label-wrap"><td width="1" class="sch-fieldcontainer-label">',d='<td><div class="sch-fieldcontainer-separator"></div></table>';if(a.showResizePicker){a.resizePicker=new Sch.widget.ResizePicker({dialogConfig:a,margin:'10 20'});a.resizerHolder=new Ext.form.FieldContainer({fieldLabel:a.scrollerDisabled?a.L('adjustCols'):a.L('adjustColsAndRows'),labelAlign:'top',hidden:!0,labelSeparator:'',beforeLabelTextTpl:c,afterLabelTextTpl:d,layout:'vbox',defaults:{flex:1,allowBlank:!1},items:[a.resizePicker]})}a.dateFromField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'datefield',fieldLabel:a.L('dateRangeFromText'),baseBodyCls:'sch-exportdialogform-date',name:'dateFrom',format:a.dateRangeFormat||Ext.Date.defaultFormat,allowBlank:!1,maxValue:a.dateRangeRestriction&&a.endDate||null,minValue:a.dateRangeRestriction&&a.startDate||null,value:a.startDate}),a.dateFromFieldConfig));a.dateToField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'datefield',fieldLabel:a.L('dateRangeToText'),name:'dateTo',format:a.dateRangeFormat||Ext.Date.defaultFormat,baseBodyCls:'sch-exportdialogform-date',allowBlank:!1,maxValue:a.dateRangeRestriction&&a.endDate||null,minValue:a.dateRangeRestriction&&a.startDate||null,value:a.endDate}),a.dateToFieldConfig));a.datesHolder=new Ext.form.FieldContainer({fieldLabel:a.L('specifyDateRange'),labelAlign:'top',hidden:!0,labelSeparator:'',beforeLabelTextTpl:c,afterLabelTextTpl:d,layout:'vbox',defaults:{flex:1,allowBlank:!1},items:[a.dateFromField,a.dateToField]});if(a.showColumnPicker){a.columnPicker=new Sch.widget.ColumnPicker(a.applyStateful(Ext.apply({fieldLabel:a.L('columnPickerLabel'),columnEmptyText:a.L('columnEmptyText'),cls:'sch-export-dialog-columns'},a.columnPickerConfig)))}if(a.showDPIField){a.dpiField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'numberfield',fieldLabel:a.L('dpiFieldLabel'),cls:'sch-export-dialog-dpi',minValue:65,name:'DPI',value:a.exportConfig.DPI,maxValue:200}),a.dpiFieldConfig))}if(a.showShowHeaderField){a.showHeaderField=Ext.ComponentManager.create(Ext.apply(a.applyStatefulFull({xtype:'checkbox',fieldLabel:a.L('showHeaderLabel'),cls:'sch-export-dialog-header',name:'showHeader',checked:!!a.exportConfig.showHeader,checkedValue:!0,uncheckedValue:!1}),a.showHeaderFieldConfig))}if(a.showShowFooterField){a.showFooterField=Ext.ComponentManager.create(Ext.apply(a.applyStatefulFull({xtype:'checkbox',fieldLabel:a.L('showFooterLabel'),cls:'sch-export-dialog-footer',name:'showFooter',checked:!!a.exportConfig.showFooter,checkedValue:!0,uncheckedValue:!1}),a.showFooterFieldConfig))}a.formatField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'combobox',fieldLabel:a.L('formatFieldLabel'),value:a.exportConfig.format,triggerAction:'all',forceSelection:!0,editable:!1,name:'format',queryMode:'local',store:a.pageFormats||['A5','A4','A3','Letter','Legal']}),a.formatFieldConfig));a.orientationField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'combobox',fieldLabel:a.L('orientationFieldLabel'),value:a.exportConfig.orientation,triggerAction:'all',forceSelection:!0,editable:!1,name:'orientation',displayField:'name',valueField:'value',queryMode:'local',store:{fields:['name','value'],data:[{name:a.L('orientationPortraitText'),value:'portrait'},{name:a.L('orientationLandscapeText'),value:'landscape'}]}}),a.orientationFieldConfig));a.rangeField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'combobox',fieldLabel:a.L('rangeFieldLabel'),value:a.exportConfig.range,triggerAction:'all',cls:'sch-export-dialog-range',forceSelection:!0,editable:!1,name:'range',queryMode:'local',displayField:'name',valueField:'value',store:{fields:['name','value'],data:[{name:a.L('completeViewText'),value:'complete'},{name:a.L('completeDataText'),value:'completedata'},{name:a.L('dateRangeText'),value:'date'},{name:a.L('currentViewText'),value:'current'}]}}),a.rangeFieldConfig));a.mon(a.rangeField,'change',a.onRangeChange,a);a.exportersField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'combobox',fieldLabel:a.L('exportersFieldLabel'),value:a.defaultExporter,triggerAction:'all',cls:'sch-export-dialog-exporter',forceSelection:!0,editable:!1,name:'exporterId',queryMode:'local',displayField:'name',valueField:'value',store:{fields:['name','value'],data:Ext.Array.map(a.exporters,function(a){return {name:a.getName(),value:a.getExporterId()}})}}),a.exportersFieldConfig));a.mon(a.exportersField,'change',a.onExporterChange,a);if(a.showRowsRangeField){a.rowsRangeField=Ext.ComponentManager.create(Ext.apply(a.applyStateful({xtype:'combobox',fieldLabel:a.L('rowsRangeLabel'),value:a.exportConfig.rowsRange,triggerAction:'all',cls:'sch-export-dialog-rowsrange',forceSelection:!0,editable:!1,name:'rowsRange',queryMode:'local',displayField:'name',valueField:'value',store:{fields:['name','value'],data:[{name:a.L('allRowsLabel'),value:'all'},{name:a.L('visibleRowsLabel'),value:'visible'}]}}),a.rowsRangeFieldConfig))}var b=[];b.push(a.rangeField);if(a.resizerHolder){b.push(a.resizerHolder)}b.push(a.datesHolder);if(a.columnPicker){b.push(a.columnPicker)}if(a.rowsRangeField){b.push(a.rowsRangeField)}b.push(a.exportersField,a.formatField,a.orientationField);if(a.dpiField){b.push(a.dpiField)}if(a.showHeaderField){b.push(a.showHeaderField)}if(a.showFooterField){b.push(a.showFooterField)}return b},applyStateful:function(a){if(!this.stateful){return a}var c=this,b=c.stateId||'exporter';return Ext.applyIf(a,{stateful:!0,stateId:b+'_'+a.name})},applyStatefulFull:function(b){if(!this.stateful){return b}var a=this;return Ext.apply(a.applyStateful(b),{stateEvents:['change'],applyState:a.applyFieldState,getState:a.getFieldState})},getFieldState:function(){return {value:this.getValue()}},applyFieldState:function(a){if('value' in a){this.setValue(a.value)}},onRangeChange:function(b,a){switch(a){case 'complete':case 'completedata':this.datesHolder.hide();this.resizerHolder&&this.resizerHolder.hide();break;case 'date':this.datesHolder.show();this.resizerHolder&&this.resizerHolder.hide();break;case 'current':this.datesHolder.hide();if(this.resizerHolder){this.resizerHolder.show();this.resizePicker.expand(!0)};break;}},onExporterChange:function(b,a){switch(a){case 'singlepage':this.disableFields(!0);break;default:this.disableFields(!1);}},disableFields:function(a){var b=this;b.formatField.setDisabled(a);b.orientationField.setDisabled(a)}},0,['export_dialog_form'],['component','box','container','panel','form','export_dialog_form'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'export_dialog_form':!0},['widget.export_dialog_form'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.widget,'ExportDialogForm'],0);Ext.cmd.derive('Sch.widget.ExportDialog',Ext.window.Window,{alternateClassName:'Sch.widget.PdfExportDialog',width:450,cls:'sch-exportdialog',frame:!1,layout:'fit',draggable:!0,constrain:!0,progressBar:null,buttonsPanel:null,buttonsPanelScope:null,doExportFnScope:null,doExportFn:function(a,b,c){throw 'Sch.widget.ExportDialog: doExportFn needs to be set in the config'},form:null,defaultFormXType:'export_dialog_form',exportButtonConfig:null,cancelButtonConfig:null,formConfigs:'pageFormats,startDate,endDate,rowHeight,columnWidth,defaultExporter,exporters,dateRangeFormat,exportConfig,showColumnPicker,columnPickerConfig,showDPIField,dpiFieldConfig,showShowHeaderField,showShowFooterField,showResizePicker,stateful,stateId,dateRangeRestriction,showRowsRangeField,rowsRangeFieldConfig,rangeFieldConfig,formatFieldConfig,orientationFieldConfig,exportersFieldConfig',constructor:function(a){Ext.apply(this,a);this.title=this.title||this.L('title');Ext.window.Window.prototype.constructor.apply(this,arguments)},mapFormConfigs:function(){this.form=this.form||{};var a=this.form;var d=this.formConfigs.split(',');for(var c=0,e=d.length;c<e;c++){var b=d[c];if(this.hasOwnProperty(b)&&!a.hasOwnProperty(b)){a[b]=this[b]}}if(this.hasOwnProperty('showFooterField')&&!a.hasOwnProperty('showShowFooterField')){a.showShowFooterField=this.showFooterField}if(this.hasOwnProperty('showHeaderField')&&!a.hasOwnProperty('showShowHeaderField')){a.showShowHeaderField=this.showHeaderField}if(a.stateId){a.stateId='form_'+a.stateId}},initComponent:function(){var a=this;if(!a.form||!a.form.isForm){a.mapFormConfigs();a.form=a.buildForm()}Ext.apply(a,{items:{items:[a.form,a.progressBar||a.buildProgressBar()]},fbar:a.buildButtons(a.buttonsPanelScope||a)});Ext.window.Window.prototype.initComponent.apply(this,arguments)},afterRender:function(){var a=this;if(a.form.resizePicker){a.relayEvents(a.form.resizePicker,['change','changecomplete','select'])}Ext.window.Window.prototype.afterRender.apply(this,arguments)},buildButtons:function(b){var a=this;return [Ext.apply({xtype:'button',scale:'medium',itemId:'export',text:a.L('exportButtonText'),handler:a.onExportButtonPress,scope:b||a},a.exportButtonConfig),Ext.apply({xtype:'button',scale:'medium',itemId:'cancel',text:a.L('cancelButtonText'),handler:a.onCancelButtonPress,scope:b||a},a.cancelButtonConfig)]},onExportButtonPress:function(){if(this.form.isValid()){var a=this.form.getValues();this.beforeExport();var b=this.dateRangeFormat||Ext.Date.defaultFormat;if(a.dateFrom&&!Ext.isDate(a.dateFrom)){a.dateFrom=Ext.Date.parse(a.dateFrom,b)}if(a.dateTo&&!Ext.isDate(a.dateTo)){a.dateTo=Ext.Date.parse(a.dateTo,b)}this.doExportFn.call(this.doExportFnScope||this,a,this.onExportSuccess,this.onExportFailure)}},afterExport:function(){var a=this.down('#export');a&&a.enable();this.progressBar&&this.progressBar.hide()},beforeExport:function(){var a=this.down('#export');a&&a.disable();this.progressBar&&this.progressBar.show()},onExportSuccess:function(){this.afterExport()},onExportFailure:function(){this.afterExport()},onCancelButtonPress:function(){this.destroy()},buildForm:function(a){this.form=Ext.apply(this.form||{},a);return Ext.ComponentManager.create(this.form,this.defaultFormXType)},buildProgressBar:function(){return this.progressBar=new Ext.ProgressBar({text:this.L('progressBarText'),animate:!0,hidden:!0,margin:'4px 10px 10px 10px'})}},1,['exportdialog'],['component','box','container','panel','window','exportdialog'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'exportdialog':!0},['widget.exportdialog'],[[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.widget,'ExportDialog',Sch.widget,'PdfExportDialog'],0);Ext.cmd.derive('Sch.plugin.Export',Ext.util.Observable,{alternateClassName:'Sch.plugin.PdfExport',lockableScope:'top',pageSizes:{A5:{width:5.8,height:8.3},A4:{width:8.3,height:11.7},A3:{width:11.7,height:16.5},Letter:{width:8.5,height:11},Legal:{width:8.5,height:14}},DPI:72,printServer:undefined,timeout:60000,headerTpl:null,headerTplDataFn:null,headerTplDataFnScope:null,tpl:null,footerTpl:null,footerTplDataFn:null,footerTplDataFnScope:null,exportDialogClassName:'Sch.widget.ExportDialog',exportDialogConfig:{},exporterConfig:null,exportConfig:{format:'A4',orientation:'portrait',range:'complete',rowsRange:'all',showHeader:!0,showFooter:!1},expandAllBeforeExport:!1,translateURLsToAbsolute:!0,openAfterExport:!0,beforeExport:Ext.emptyFn,afterExport:Ext.emptyFn,fileFormat:'pdf',defaultExporter:'multipage',exporters:undefined,callbacks:undefined,currentAjaxRequest:undefined,hideExportDialogTimeout:1000,constructor:function(b){var a=this;b=b||{};a.exportersIndex={};if(b.exportDialogConfig){Ext.Object.each(this.exportConfig,function(c,e,d){var a=b.exportDialogConfig[c];if(a){d[c]=a}})}Ext.util.Observable.prototype.constructor.call(this,b);a.setFileFormat(a.fileFormat);if(!a.exporters){a.exporters=a.buildExporters()}a.initExporters();a.bindExporters()},init:function(b){var a=this;b.showExportDialog=Ext.Function.bind(a.showExportDialog,a);b.doExport=Ext.Function.bind(a.doExport,a);a.scheduler=b},initExporters:function(){var c=this,b=c.exporters;for(var a=0;a<b.length;a++){if(!b[a].isExporter){b[a]=c.createExporter(b[a])}}},bindExporters:function(){var b=this.exporters;for(var a=0;a<b.length;a++){this.bindExporter(b[a])}},bindExporter:function(b){var a=this;a.mon(b,{commitpage:a.onPageCommit,collectrows:a.onRowCollected,scope:a})},unbindExporter:function(b){var a=this;a.mun(b,{commitpage:a.onPageCommit,collectrows:a.onRowCollected,scope:a})},buildExporters:function(){return ['Sch.plugin.exporter.SinglePage','Sch.plugin.exporter.MultiPage','Sch.plugin.exporter.MultiPageVertical']},getExporterConfig:function(c,d){var a=this;var b=Ext.apply({translateURLsToAbsolute:a.translateURLsToAbsolute,expandAllBeforeExport:a.expandAllBeforeExport,DPI:a.DPI},a.exporterConfig);if(a.headerTpl){b.headerTpl=a.headerTpl}if(a.headerTplDataFn){b.headerTplDataFn=a.headerTplDataFn;b.headerTplDataFnScope=a.headerTplDataFnScope}if(a.tpl){b.tpl=a.tpl}if(a.footerTpl){b.footerTpl=a.footerTpl}if(a.footerTplDataFn){b.footerTplDataFn=a.footerTplDataFn;b.footerTplDataFnScope=a.footerTplDataFnScope}return b},createExporter:function(a,c){var d=this,b=d.getExporterConfig(a,c);if(Ext.isObject(a)){return Ext.create(Ext.apply(b,a))}else {return Ext.create(a,Ext.apply(b,c))}},registerExporter:function(a,b){if(!(a instanceof Sch.plugin.exporter.AbstractExporter)){a=this.createExporter.apply(this,arguments)}this.exporters.push(a);this.bindExporter(a)},getExporter:function(a){if(!a){return}var b=this.exportersIndex[a];if(b){return b}b=this.exportersIndex[a]=Ext.Array.findBy(this.exporters,function(b){return b.getExporterId()==a});return b},getExporters:function(){return this.exporters},setFileFormat:function(a){this.fileFormat=a},showExportDialog:function(){var a=this,b=a.getActiveExportDialog();if(b){b.destroy()}a.setActiveExportDialog(a.buildExportDialog());b=a.getActiveExportDialog();b.on('destroy',a.onExportDialogDestroy,a);if(b.progressBar){b.mon(a,{progressupdate:a.onExportProgress,scope:a})}b.show()},buildExportDialog:function(){return Ext.create(this.exportDialogClassName,this.buildExportDialogConfig())},buildExportDialogConfig:function(){var a=this,b=a.scheduler.getSchedulingView();return Ext.apply({doExportFn:a.doExport,doExportFnScope:a,startDate:a.scheduler.getStart(),endDate:a.scheduler.getEnd(),rowHeight:b.timeAxisViewModel.getViewRowHeight(),columnWidth:b.timeAxisViewModel.getTickWidth(),defaultExporter:a.defaultExporter,exportConfig:Ext.apply(a.exportConfig,{DPI:a.DPI}),exporters:a.exporters,pageFormats:a.getPageFormats(),columnPickerConfig:{columns:a.scheduler.lockedGrid.query('gridcolumn[ignoreInExport!=true]')}},a.exportDialogConfig)},onExportDialogDestroy:function(){this.cancelExport();this.setActiveExportDialog(null)},onExportProgress:function(d,c){var b=this.getActiveExportDialog(),a=b&&b.progressBar;if(a){a.updateProgress(d);if(typeof c=='string'){a.updateText(c)}}},showError:function(a){Ext.Msg.alert('',a||this.L('generalError'))},getPageFormats:function(){var b=this.pageSizes,a=[];Ext.Object.each(b,function(c,b){a.push({width:b.width,height:b.height,name:c})});return Ext.Array.map(a.sort(function(a,b){return a.width-b.width}),function(a){return a.name})},getExportConfig:function(c){var b=this;var a=Ext.apply({fileFormat:b.fileFormat,exporterId:b.defaultExporter,beforeExport:Ext.Function.bind(b.beforeExport,b),afterExport:Ext.Function.bind(b.afterExport,b)},c,b.exportConfig);a.DPI=a.DPI||b.DPI;a.pageSize=Ext.apply({},b.pageSizes[a.format]);a.pageSize.width*=a.DPI;a.pageSize.height*=a.DPI;return a},doExport:function(h,e,f,g){var a=this,c=a.scheduler,b=a.getExportConfig(h);a.callbacks={success:e,failure:f,scope:g||a};var d=a.exporter=a.getExporter(b.exporterId);if(a.fireEvent('beforeexport',c,d,b)!==!1){a.myBeforeExport();a.exporter.extractPages(c,b,function(i){a.onPagesExtracted(i,c,d,b)},a)}},cancelExport:function(){if(this.currentAjaxRequest){Ext.Ajax.abort(this.currentAjaxRequest);this.currentAjaxRequest=null}else {if(this.exporter){this.exporter.abort()}}this.scheduler.getEl().unmask()},onPagesExtracted:function(b,c,d,a){this.fireEvent('progressupdate',0.8,this.L('requestingPrintServer'));this.doRequest(b,a)},onRowCollected:function(d,c,a,b){this.fireEvent('progressupdate',0.2*(a+1)/b,Ext.String.format(this.L('fetchingRows'),a+1,b))},onPageCommit:function(c,d,b,a){a=Math.max(b,a);this.fireEvent('progressupdate',0.2+0.6*b/a,Ext.String.format(this.L('builtPage'),b,a))},onExportSuccess:function(d){var a=this,c=a.getActiveExportDialog(),b=a.callbacks,e=b&&b.success,f=b&&b.scope||a;a.fireEvent('progressupdate',1);a.myAfterExport(!0,d.url);e&&e.apply(f,arguments);a.hideExportDialogTimer=setTimeout(function(){c&&c.destroy()},a.hideExportDialogTimeout);if(a.openAfterExport){a.openAfterExportTimer=setTimeout(function(){window.open(d.url,'ExportedPanel')},0)}},onExportFailure:function(c,f){var a=this,e=this.getActiveExportDialog(),b=a.callbacks,d=b&&b.failure,g=b&&b.scope||a;d&&d.call(g,c);a.fireEvent('error',e,c,f);a.showError(c);a.myAfterExport(!1,null)},doRequest:function(b,f){var a=this,e=a.scheduler;if(!a.test&&!a.debug){if(a.printServer){var c={method:'POST',url:a.printServer,timeout:a.timeout,params:Ext.apply({html:{array:Ext.JSON.encode(b)},startDate:e.getStartDate(),endDate:e.getEndDate(),format:a.exporter.getPaperFormat(),orientation:f.orientation,range:f.range,fileFormat:a.fileFormat},this.getParameters()),success:a.onRequestSuccess,failure:a.onRequestFailure,scope:a};Ext.apply(c,this.getAjaxConfig(c));this.currentAjaxRequest=Ext.Ajax.request(c)}else {a.onExportFailure('Print server URL is not defined, please specify printServer config')}}else {if(a.debug){var g=b||[];for(var d=0,i=g.length;d<i;d++){var h=window.open();h.document.write(g[d].html);h.document.close()}}a.onExportSuccess(a.testResponse||{success:!0,url:'foo',htmlArray:b})}},onRequestSuccess:function(c){this.currentAjaxRequest=null;var b=this,a;try{a=Ext.JSON.decode(c.responseText)}catch(d){b.onExportFailure('Wrong server response received');return}if(a.success){b.onExportSuccess(a)}else {b.onExportFailure(a.msg,a)}},onRequestFailure:function(a){this.currentAjaxRequest=null;var c=this,b=a.status===200?a.responseText:a.statusText;c.onExportFailure(b,a)},getParameters:function(){return {}},getAjaxConfig:function(a){return {}},getActiveExportDialog:function(){return this.win},setActiveExportDialog:function(a){this.win=a},myBeforeExport:function(){this.fireEvent('exportstart',this);var c=this.scheduler.getEl().mask();c.addCls('sch-export-mask');var a=this.getActiveExportDialog(),b=a&&a.progressBar;if(b){b.show()}},myAfterExport:function(a,b){this.fireEvent('afterexport',this,a,b);this.scheduler.getEl().unmask()},destroy:function(){var a=this.getActiveExportDialog();a&&a.destroy();Ext.util.Observable.prototype.destroy.apply(this,arguments);clearTimeout(this.openAfterExportTimer);clearTimeout(this.hideExportDialogTimer);if(this.getActiveExportDialog()){this.getActiveExportDialog().destroy()}}},1,0,0,0,['plugin.scheduler_export'],[[Ext.AbstractPlugin.prototype.mixinId||Ext.AbstractPlugin.$className,Ext.AbstractPlugin],[Sch.mixin.Localizable.prototype.mixinId||Sch.mixin.Localizable.$className,Sch.mixin.Localizable]],[Sch.plugin,'Export',Sch.plugin,'PdfExport'],0);Ext.cmd.derive('Sch.plugin.Printable',Sch.plugin.Export,{alternateClassName:['Sch.plugin.Print'],docType:'<!DOCTYPE HTML>',beforePrint:function(){},afterPrint:function(){},exportDialogConfig:{showDPIField:!0},removeSecondaryCanvas:!1,wrapHeaders:!1,autoPrintAndClose:!0,mainTpl:'{docType}<html class="x-border-box {htmlClasses}"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><title>{title}</title>{styles}</head><body class="sch-print-body {bodyClasses}"><div class="sch-print-ct" style="width:{totalWidth}px"><tpl for="pages">{html}</tpl></div><script type="text/javascript">{setupScript}</script></body></html>',pageTpl:'{header}<div id="{id}" class="{componentClasses}" style="height:{bodyHeight}px; width:{totalWidth}px; position: relative !important">{HTML}</div>{footer}<div style="page-break-after:always;"></div>',setupScriptTpl:'window.onload = function(){ document._loaded  = true;if ({autoPrintAndClose}) {window.print();if (!{isChrome}) window.close();}}',openAfterExport:!1,DPI:72,fakeBackgroundColor:!1,doRequest:function(){},constructor:function(a){Ext.apply(this,a);if(!this.mainTpl.isTemplate){this.mainTpl=new Ext.XTemplate(this.mainTpl)}Sch.plugin.Export.prototype.constructor.apply(this,arguments);this.exportDialogConfig=Ext.applyIf({l10n:{title:this.L('dialogTitle'),exportButtonText:this.L('exportButtonText')}},this.exportDialogConfig)},init:function(a){Sch.plugin.Export.prototype.init.apply(this,arguments);a.print=Ext.Function.bind(this.print,this)},getExporterConfig:function(c,d){var b=this,a=Sch.plugin.Export.prototype.getExporterConfig.apply(this,arguments);return Ext.apply(a,{tpl:b.pageTpl})},getExportConfig:function(c){var a=this,b=Sch.plugin.Export.prototype.getExportConfig.apply(this,arguments);return Ext.apply(b,{beforeExport:Ext.Function.bind(a.beforePrint,a),afterExport:Ext.Function.bind(a.afterPrint,a)})},buildExporters:function(){return ['Sch.plugin.exporter.MultiPage','Sch.plugin.exporter.MultiPageVertical']},onPagesExtracted:function(d,a,b,c){this.fireEvent('progressupdate',0.8,this.L('requestingPrintServer'));this.printPages(d,a,b,c)},print:function(){this.showExportDialog()},onBeforePageCommit:function(f,a,m,l){var e=this.scheduler,i=e.lockedGrid,j=e.normalGrid,g=function(b){return a.select('#'+b).first()};var d=a.select(f.normalBodySelector).first(),c=g(j.headerCt.id),h=a.select(f.lockedBodySelector).first(),b=g(i.headerCt.id);d.addCls(['sch-print-normal-rows-ct',this.fakeBackgroundColor?' sch-print-fake-background':'']);h.addCls('sch-print-locked-rows-ct');if(this.removeSecondaryCanvas){a.select('.sch-secondary-canvas').remove()}if(this.fakeBackgroundColor){var k=d.select('.sch-event');k.each(function(b){b.setStyle('border-right-width',b.dom.style.width)})}c.addCls('sch-print-normalheader');b.addCls('sch-print-lockedheader');if(this.wrapHeaders){c.wrap('<div class="sch-print-header-wrap"></div>');b.wrap('<div class="sch-print-header-wrap"></div>')}},prepareMainTplData:function(a){return a},printPages:function(g,e,b,h){if(!this.mainTpl||!this.mainTpl.isTemplate){this.mainTpl=new Ext.XTemplate(this.mainTpl,{compiled:!0,disableFormats:!0})}var f=b.getStylesheets(),c=document.body;var d=this.mainTpl.apply(this.prepareMainTplData({docType:this.docType,htmlClasses:c.parentNode.className,bodyClasses:c.className,title:e.title||'',styles:f,totalWidth:b.paperWidth,setupScript:this.setupScriptTpl.replace('{autoPrintAndClose}',this.autoPrintAndClose).replace('{isChrome}',Ext.isChrome),pages:g}));var a=window.open('','printgrid');if(!a||!a.document){return !1}this.printWindow=a;a.document.write(d);a.document.close();this.onExportSuccess({success:!0,url:'foo',htmlArray:[d]})},bindExporter:function(b){var a=this;Sch.plugin.Export.prototype.bindExporter.apply(this,arguments);a.mon(b,{beforecommitpage:a.onBeforePageCommit,scope:a})},unbindExporter:function(b){var a=this;Sch.plugin.Export.prototype.unbindExporter.apply(this,arguments);a.mun(b,{beforecommitpage:a.onBeforePageCommit,scope:a})}},1,0,0,0,['plugin.scheduler_print','plugin.scheduler_printable'],0,[Sch.plugin,'Printable',Sch.plugin,'Print'],0);Ext.cmd.derive('Gnt.plugin.exporter.mixin.DependencyPainter',Ext.Base,{fillRecordRelatedBoxes:function(c){if(c.hasDependencies()){var b=this,d=b.normalView,e=b.component.getDependencyView().painter;var a=e.getItemBox(b.normalView,c);if(a){if(d.bufferedRenderer){a.top+=d.bufferedRenderer.bodyTop;a.bottom+=d.bufferedRenderer.bodyTop}a.rendered=!0;b.eventBoxes[c.internalId]=a}}},onClassMixedIn:function(a){a.addMember('fillRecordRelatedBoxes',this.prototype.fillRecordRelatedBoxes)}},0,0,0,0,0,0,[Gnt.plugin.exporter.mixin,'DependencyPainter'],0);Ext.cmd.derive('Gnt.plugin.exporter.MultiPage',Sch.plugin.exporter.MultiPage,{normalGridOffset:0,onRowsCollected:function(){var a=this;a.normalGridOffset=0;Sch.plugin.exporter.MultiPage.prototype.onRowsCollected.apply(this,arguments)},startPage:function(a,c){var b=this;b.normalGridOffset=a.normalGridOffset;Sch.plugin.exporter.MultiPage.prototype.startPage.apply(this,arguments)},buildPageFrame:function(c,d){var b=this;var a=Sch.plugin.exporter.MultiPage.prototype.buildPageFrame.apply(this,arguments);a.normalHidden=b.normalGrid.hidden;a.lockedHidden=b.lockedGrid.hidden;return a}},0,0,0,0,0,[[Gnt.plugin.exporter.mixin.DependencyPainter.prototype.mixinId||Gnt.plugin.exporter.mixin.DependencyPainter.$className,Gnt.plugin.exporter.mixin.DependencyPainter]],[Gnt.plugin.exporter,'MultiPage'],0);Ext.cmd.derive('Gnt.plugin.exporter.MultiPageVertical',Sch.plugin.exporter.MultiPageVertical,{},0,0,0,0,0,[[Gnt.plugin.exporter.mixin.DependencyPainter.prototype.mixinId||Gnt.plugin.exporter.mixin.DependencyPainter.$className,Gnt.plugin.exporter.mixin.DependencyPainter]],[Gnt.plugin.exporter,'MultiPageVertical'],0);Ext.cmd.derive('Gnt.plugin.Printable',Sch.plugin.Printable,{buildExporters:function(){return ['Gnt.plugin.exporter.MultiPage','Gnt.plugin.exporter.MultiPageVertical']},showExportDialog:function(){this.exportDialogConfig.scrollerDisabled=!0;Sch.plugin.Printable.prototype.showExportDialog.apply(this,arguments)}},0,0,0,0,['plugin.gantt_printable'],0,[Gnt.plugin,'Printable'],0);Ext.cmd.derive('Gnt.plugin.exporter.SinglePage',Sch.plugin.exporter.SinglePage,{},0,0,0,0,0,[[Gnt.plugin.exporter.mixin.DependencyPainter.prototype.mixinId||Gnt.plugin.exporter.mixin.DependencyPainter.$className,Gnt.plugin.exporter.mixin.DependencyPainter]],[Gnt.plugin.exporter,'SinglePage'],0);Ext.cmd.derive('CGA.plugin.exporter.MultiPageVertical',Gnt.plugin.exporter.MultiPageVertical,{setRowHeight:function(){}},0,0,0,0,0,0,[CGA.plugin.exporter,'MultiPageVertical'],0);Ext.cmd.derive('CGA.plugin.Printable',Gnt.plugin.Printable,{buildExporters:function(){return ['Gnt.plugin.exporter.SinglePage','Gnt.plugin.exporter.MultiPage','CGA.plugin.exporter.MultiPageVertical']},ptype:'cga_gantt_printable',autoPrintAndClose:!0,showExportDialog:function(){var a=Ext.ComponentQuery.query('[xtype=cga-gantt]')[0];a.columns.forEach(function(a){if(a.dataIndex=='Name'||a.dataIndex=='index'||a.dataIndex=='StartDate'||a.dataIndex=='EndDate'||a.dataIndex=='Duration'||a.dataIndex=='Predecessor'){a['ignoreInExport']=!1}else {a['ignoreInExport']=!0}});Gnt.plugin.Printable.prototype.showExportDialog.apply(this,arguments)},setupScriptTpl:'window.onload = setTimeout(function(){ document._loaded  = true;if ({autoPrintAndClose}) {window.print();if (!{isChrome}) window.close();}}, 1000);',pageSizes:{A5:{width:5.8,height:8.3},A4:{width:8.3,height:11.7},A3:{width:11.7,height:16.5},Letter:{width:8.5,height:11},Legal:{width:8.5,height:14},A0:{width:43,height:60.8},A1:{width:29.9,height:43},A2:{width:20.9,height:30.4}}},0,0,0,0,['plugin.cga_gantt_printable'],0,[CGA.plugin,'Printable'],0);Ext.cmd.derive('CGA.filter.SearchFilter',Ext.form.TextField,{enableKeyEvents:!0,margin:0,border:0,cls:'filterfield',width:'100%',hideLabel:!0,initComponent:function(){var a=this.dataType?this:this.up();if(a.dataType=='date'){this.fieldStyle='direction:ltr'}Ext.form.field.Text.prototype.initComponent.call(this)},listeners:{'keyup':{fn:function(c,i){var e=!1;var a=c.getValue();var f='';var h;var b='=';if(a.indexOf('>')>-1||a.indexOf('<')>-1||a.indexOf('-')>-1||a.indexOf('=')>-1||a.indexOf('!')>-1){a=a.replace(' ','');if(a.indexOf('>')>-1){b='>';a=a.replace(b,'')}if(a.indexOf('<')>-1){b='<';a=a.replace(b,'')}if(a.indexOf('=')>-1){b='=';a=a.replace(b,'')}if(a.indexOf('!')>-1){b='!';a=a.replace(b,'')}if(a.indexOf('-')>-1){b='-';h=a.split('-');a=h[0];f=h[1]}}var d=this.dataType?this:c.up();if(d.dataType=='date'&&a){var g=new RegExp('^[0-9]{1,2}/[0-9]{1,2}/([0-9]{2}|[0-9]{4})$');if(b=='-'){if(!g.test(a)||!g.test(f)){a=!1}}else {if(!g.test(a)){a=!1}}}if(a){c.store.customFilters.forEach(function(g,j,h){if(g.dataIndex===d.dataIndex){g.value=a;g.opr=b;g.toValue=f;e=!0}});if(!e){c.store.customFilters.push({dataIndex:d.dataIndex,dataType:d.dataType,value:a,opr:b,toValue:f})}c.store.doFilters()}else {if(c.store.customFilters.length>0){c.store.customFilters.forEach(function(a,g,f){if(a.dataIndex==d.dataIndex){f.splice(g);e=!0}if(a.dataIndex=='StartDate'){var b=Ext.ComponentQuery.query('[xtype=filterMenuBtn]')[0].getMenu();b.items.items.forEach(function(b){if(b.reference=='betweenDates'){b.setChecked(!1)}})}});if(c.store.customFilters.length==0){c.store.clearTreeFilter()}else {if(e){c.store.doFilters()}}}}},buffer:200},'keydown':function(b,a){if(a.getKey()===a.DOWN){a.stopEvent()}},'specialkey':{fn:function(a,b){if(b.getKey()===b.ESC){a.reset();a.store.doFilters()}}},'render':function(){var a=this;a.store=a.up('ganttpanel').taskStore;a.mon(this.store,'filter-clear',function(){a.reset()})}}},0,['gantt-filter-search'],['component','box','field','textfield','gantt-filter-search'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'gantt-filter-search':!0},['widget.gantt-filter-search'],0,[CGA.filter,'SearchFilter'],0);Ext.cmd.derive('CGA.filter.CheckboxFilter',Ext.form.Checkbox,{enableKeyEvents:!0,margin:0,border:0,cls:'filterfield',width:'100%',hideLabel:!0,style:'padding-left:20px;padding-right:20px',onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){a.setValue(!a.checked);if(a.getValue()){a.store.customFilters.push({dataIndex:a.dataIndex,dataType:'checkbox',value:!0,opr:'=',toValue:''})}else {a.store.customFilters.forEach(function(b,d,c){if(b.dataIndex==a.dataIndex){c.splice(d)}})}a.store.doFilters()}},listeners:{'render':function(){var a=this;a.store=a.up('ganttpanel').taskStore;a.mon(a.store,'filter-clear',function(){a.reset()})}}},0,['gantt-filter-checkbox'],['component','box','field','checkboxfield','checkbox','gantt-filter-checkbox'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'gantt-filter-checkbox':!0},['widget.gantt-filter-checkbox'],0,[CGA.filter,'CheckboxFilter'],0);Ext.cmd.derive('CGA.filter.DynamicListFilter',Ext.form.field.ComboBox,{enableKeyEvents:!0,margin:0,border:0,cls:'filterfield',width:'100%',hideLabel:!0,queryMode:'local',multiSelect:!0,displayField:'label',valueField:'value',matchFieldWidth:!1,listConfig:{minWidth:100},listeners:{change:function(e,d,f){var b=d;var a=this.up('ganttpanel').taskStore;var c=this;a.customFilters.forEach(function(a,g,b){if(a.dataIndex==c.dataIndex){b.splice(g)}});if(b&&b.length>0){if(b.indexOf('!clear!')!=-1){e.clearValue()}else {a.customFilters.push({dataIndex:c.dataIndex,dataType:'text',value:b,opr:'in'})}}if(a.customFilters.length==0){a.clearTreeFilter()}else {a.doFilters()}},render:function(){var g=this;var e=this.up('ganttpanel').taskStore;var d={};var b=this.dataIndex;var f=!1;g.mon(e,'filter-clear',function(){g.reset()});e.root.cascadeBy(function(c){var a=c.get(b);if(!a||c.get(b)==null){f=!0;return}d[a]={label:a,value:a}});var a=[];for(var h in d){a.push(d[h])}a.push({label:this.L('clear'),value:'!clear!'});if(f==!0){a.push({label:this.L('blank'),value:'BLANK'})}var c=Ext.create('Ext.data.Store',{data:a});if(b=='SpotName'){c.setFields([{name:'label',sortType:function(a){if(isNaN(a)){return -200}else {return parseInt(a)}}}])}c.sort('label','ASC');this.store=c;CGA.view.BulkOperationBaseForm.setStore({index:b,pointer:c})}}},0,['gantt-filter-dynamiclist'],['component','box','field','textfield','pickerfield','combobox','combo','gantt-filter-dynamiclist'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'gantt-filter-dynamiclist':!0},['widget.gantt-filter-dynamiclist'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.filter,'DynamicListFilter'],0);Ext.cmd.derive('Gnt.plugin.TaskContextMenu',Ext.menu.Menu,{ptype:'gantt_taskcontextmenu',lockableScope:'top',plain:!0,triggerEvent:['rowcontextmenu','containercontextmenu','rowlongpress','containerlongpress'],hideEvent:null,grid:null,rec:null,triggerEventXY:null,lastHighlightedItem:null,taskEditorInjected:!1,config:{splitDuration:0,splitDurationUnit:'d',maxSplitDuration:1,maxSplitDurationUnit:'d',minSplitDuration:1,minSplitDurationUnit:'h'},initComponent:function(){var a=this.hideEvent;this.defaults=this.defaults||{};this.defaults.scope=this;this.triggerEvent=[].concat(this.triggerEvent);if(a){if(!Ext.isArray(a)){a=[a]}}if(Ext.isIE){a=a||[];a.push('itemclick')}this.hideEvent=a;this.buildMenuItems();Ext.menu.Menu.prototype.initComponent.apply(this,arguments)},init:function(a){this.grid=a;this.bindTriggerEvent();this.bindHideEvent()},getState:function(){if(this.rendered){return Ext.menu.Menu.prototype.getState.apply(this,arguments)}},isNotProject:function(a){return !a||!a.isProject},isReadOnly:function(a){return this.getCmp().isReadOnly()||a&&a.isReadOnly()},createMenuItems:function(){var a=this;return [{handler:this.deleteTask,requiresTask:!0,itemId:'deleteTask',text:this.L('deleteTask'),isValidAction:function(b){return !a.isReadOnly(b)}},{handler:this.editLeftLabel,requiresTask:!0,itemId:'editLeftLabel',text:this.L('editLeftLabel'),isValidAction:function(b){return a.grid.getSchedulingView().getLeftEditor()&&!a.isReadOnly(b)}},{handler:this.editRightLabel,requiresTask:!0,itemId:'editRightLabel',text:this.L('editRightLabel'),isValidAction:function(b){return a.grid.getSchedulingView().getRightEditor()&&!a.isReadOnly(b)}},{handler:this.toggleMilestone,requiresTask:!0,itemId:'toggleMilestone',text:this.L('convertToMilestone'),isValidAction:function(b){return this.isNotProject(b)&&!a.isReadOnly(b)}},{handler:this.splitTask,requiresTask:!0,itemId:'splitTask',isValidAction:function(b,c){return b&&!a.isReadOnly(b)&&b.getStartDate()&&b.getEndDate()&&!b.isMilestone()&&b.isLeaf()&&c&&c.getTarget('.sch-gantt-task-bar')},text:this.L('splitTask')},{text:this.L('add'),itemId:'addTaskMenu',menu:{plain:!0,defaults:{scope:this},items:[{handler:this.addTaskAboveAction,requiresTask:!0,itemId:'addTaskAbove',text:this.L('addTaskAbove'),isValidAction:function(b){return a.isNotProject(b)&&!a.isReadOnly(b.parentNode)}},{handler:this.addTaskBelowAction,itemId:'addTaskBelow',text:this.L('addTaskBelow'),isValidAction:function(b){return b&&a.isNotProject(b)&&!a.isReadOnly(b.parentNode)||!b&&!a.isReadOnly()}},{handler:this.addMilestone,itemId:'addMilestone',requiresTask:!0,text:this.L('addMilestone'),isValidAction:function(b){return a.isNotProject(b)&&!a.isReadOnly(b.parentNode)}},{handler:this.addSubtask,requiresTask:!0,itemId:'addSubtask',text:this.L('addSubtask'),isValidAction:function(b){return !a.isReadOnly(b)}},{handler:this.addSuccessor,requiresTask:!0,itemId:'addSuccessor',text:this.L('addSuccessor'),isValidAction:function(b){return a.isNotProject(b)&&!a.isReadOnly(b.parentNode)}},{handler:this.addPredecessor,requiresTask:!0,itemId:'addPredecessor',text:this.L('addPredecessor'),isValidAction:function(b){return a.isNotProject(b)&&!a.isReadOnly(b.parentNode)}}]}},{text:this.L('deleteDependency'),requiresTask:!0,itemId:'deleteDependencyMenu',isValidAction:function(b){return b&&!a.isReadOnly(b)&&b.getAllDependencies().length>0},menu:{plain:!0,listeners:{beforeshow:this.populateDependencyMenu,mouseover:this.onDependencyMouseOver,mouseleave:this.onDependencyMouseOut,scope:this}}}]},buildMenuItems:function(){this.items=this.createMenuItems()},bindGridEvents:function(a,e,b){b=b||this;var d=this.getCmp();if(a){for(var c=a.length-1;c>=0;c--){d.on(a[c],e,b)}}},bindTriggerEvent:function(){this.bindGridEvents(this.triggerEvent,this.onTriggerEvent)},bindHideEvent:function(){this.bindGridEvents(this.hideEvent,this.onHideEvent)},onHideEvent:function(){this.hide()},swallowNextClickEvent:function(){Ext.getBody().on('click',function(a){a.stopPropagation()},null,{single:!0,capture:!0})},populateDependencyMenu:function(a){if(a.up('menuitem').isDisabled()){return !1}var c=this.getCmp(),d=c.getTaskStore(),b=this.rec.getAllDependencies(),e=c.dependencyStore;a.removeAll();if(!b.length){return !1}var f=this.rec.getId()||this.rec.internalId;Ext.Array.each(b,function(b){var c=b.getSourceId(),g=d.getModelById(c==f?b.getTargetId():c);if(g){a.add({dependency:b,text:Ext.String.htmlEncode(Ext.util.Format.ellipsis(g.getName(),30)),scope:this,handler:function(c){e.remove(c.dependency)},disabled:this.isReadOnly(this.rec)})}},this)},onDependencyMouseOver:function(c,a,d){if(a){var b=this.getCmp().getSchedulingView();if(this.lastHighlightedItem){b.unhighlightDependency(this.lastHighlightedItem.dependency)}this.lastHighlightedItem=a;b.highlightDependency(a.dependency)}},onDependencyMouseOut:function(a,b){if(this.lastHighlightedItem){this.getCmp().getSchedulingView().unhighlightDependency(this.lastHighlightedItem.dependency)}},onTriggerEvent:function(){var a=this.getTriggerEventContext.apply(this,arguments);if(!a.e.type.match('longpress')||a.e.pointerType!=='mouse'){this.activateMenu(a.record,a.e)}},getTriggerEventContext:function(){var b={};for(var a=0,c=arguments.length-1;a<=c;a++){if(arguments[a] instanceof Gnt.model.Task){b.record=arguments[a];break}}for(a=arguments.length-1;a>=0;a--){if(arguments[a] instanceof Ext.EventObjectImpl){b.e=arguments[a];break}}return b},activateMenu:function(b,a){if(this.getCmp().taskStore.getRootNode()===b){return}if(a.type.match('longpress')){this.swallowNextClickEvent()}a.stopEvent();this.rec=b;this.triggerEventXY=a.getXY();this.configureMenuItems(a);this.showAt(a.getXY());this.focus()},addTaskEditorEntry:function(){this.insert(0,{text:this.L('taskInformation'),itemId:'taskEditor',requiresTask:!0,handler:function(){this.getCmp().getTaskEditor(this.rec).showTask(this.rec)},isValidAction:function(a){return this.getCmp().getTaskEditor(a)},scope:this});this.taskEditorInjected=!0},setTaskEditorEntryLabel:function(b){var a=this.down('#taskEditor');if(b&&a){a.setText(b.isProject?this.L('projectInformation'):this.L('taskInformation'))}},configureMenuItems:function(c){var a=this.rec;var d=this;if(this.getCmp().getTaskEditor()){if(!this.taskEditorInjected){this.addTaskEditorEntry()}this.setTaskEditorEntryLabel(a)}Ext.Array.each(this.query('menuitem'),function(b){b.setDisabled(!d.isMenuItemEnabled(b,a,c))});var b=this.down('#toggleMilestone');if(a&&b){b.setText(a.isMilestone()?this.L('convertToRegular'):this.L('convertToMilestone'))}},isMenuItemEnabled:function(a,b,c){var d=a.requiresTask&&!b||a.isValidAction&&!a.isValidAction.call(a.scope||a,b,c);return !d},copyTask:function(b){var c=b&&b.self||this.getCmp().getTaskStore().getModel();var a=new c({leaf:!0});a.setPercentDone(0);a.setName(this.L('newTaskText',this.texts));a.set(a.startDateField,b&&b.getStartDate()||null);a.set(a.endDateField,b&&b.getEndDate()||null);a.set(a.durationField,b&&b.getDuration()||null);a.set(a.durationUnitField,b&&b.getDurationUnit()||'d');return a},addTaskAbove:function(a){var b=this.rec;if(b){b.addTaskAbove(a)}else {this.getCmp().taskStore.getRootNode().appendChild(a)}},addTaskBelow:function(a){var b=this.rec;if(b){b.addTaskBelow(a)}else {this.getCmp().taskStore.getRootNode().appendChild(a)}},deleteTask:function(){var a=this.getCmp().getSelectedRows().slice();if(this.rec&&!Ext.Array.contains(a,this.rec)){a.push(this.rec)}this.getCmp().getTaskStore().removeTasks(a)},editLeftLabel:function(){this.getCmp().getSchedulingView().editLeftLabel(this.rec)},editRightLabel:function(){this.getCmp().getSchedulingView().editRightLabel(this.rec)},addTaskAboveAction:function(){this.addTaskAbove(this.copyTask(this.rec))},addTaskBelowAction:function(){this.addTaskBelow(this.copyTask(this.rec))},addSubtask:function(){var a=this.rec;var b=this.copyTask(this.isNotProject(a)&&a);a.addSubtask(b)},addSuccessor:function(){var a=this.rec;a.addSuccessor(this.copyTask(a))},addPredecessor:function(){var a=this.rec;a.addPredecessor(this.copyTask(a))},addMilestone:function(){var a=this.rec,b=this.copyTask(a);a.addTaskBelow(b);b.setStartEndDate(a.getEndDate(),a.getEndDate())},toggleMilestone:function(){if(this.rec.isMilestone()){this.rec.convertToRegular()}else {this.rec.convertToMilestone()}},getSplitDate:function(b){var e=b.task,g=b.date,c=b.tick,f=b.timeAxis,a=this.getMaxSplitDuration(),d;if(c){d=c.getStartDate();if(a){a=e.getUnitConverter().convertDurationToMs(a,this.getMaxSplitDurationUnit());if(a<c.getEndDate()-c.getStartDate()){d=null}}}return d||f.roundDate(g,e.getStartDate())},getSplitDuration:function(b){if(this.splitDuration){return this.splitDuration}var g=b.task,i=b.pos,h=b.date,c=b.tick;if(c){var a=g.calculateDuration(c.getStartDate(),c.getEndDate(),Sch.util.Date.MILLI),f=g.getUnitConverter(),e=this.getMinSplitDuration(),d=this.getMaxSplitDuration();if(e||d){if(d){a=Math.min(a,f.convertDurationToMs(d,this.getMaxSplitDurationUnit()))}if(e){a=Math.max(a,f.convertDurationToMs(e,this.getMinSplitDurationUnit()))}}return f.convertMSDurationToUnit(a,this.getSplitDurationUnit(g,i,h,c))}},getSplitDurationUnit:function(a){return this.splitDuration?this.splitDurationUnit:Sch.util.Date.MILLI},splitTask:function(){var a=this,e=a.grid.getSchedulingView(),d=e.getDateFromX(a.triggerEventXY[0]),c=e.timeAxis;var b={task:a.rec,pos:a.triggerEventXY,date:d,timeAxis:c,tick:c.getAt(Math.floor(c.getTickFromDate(d)))};b.task.split(a.getSplitDate(b),a.getSplitDuration(b),a.getSplitDurationUnit(b))}},0,['gantt_taskcontextmenu'],['component','box','container','panel','menu','gantt_taskcontextmenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'gantt_taskcontextmenu':!0},['plugin.gantt_taskcontextmenu','widget.gantt_taskcontextmenu'],[[Ext.AbstractPlugin.prototype.mixinId||Ext.AbstractPlugin.$className,Ext.AbstractPlugin],[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.plugin,'TaskContextMenu'],0);Ext.cmd.derive('CGA.widget.FieldSetWithCheckToggle',Ext.form.FieldSet,{checked:!1,name:'',value:'',boxLabel:'',border:!0,collapsibleFieldset:!1,defaultType:'textfield',defaults:{anchor:'-20'},initComponent:function(){this.radio=new Ext.form.Radio({name:this.name,value:this.value,checked:this.checked,boxLabel:this.boxLabel,hideLabel:!0,listeners:{change:function(c,a,b){if(a){this.fieldset.items.each(function(d,f,e){if(d.itemId=='ignoreQualityControls'&&d.permission!=!0){d.disable()}else {d.enable()}});if(this.collapsibleFieldset){this.fieldset.expand(!1)}}else {this.fieldset.items.each(function(d,f,e){d.disable()});if(this.collapsibleFieldset){this.fieldset.collapse(!1)}}},scope:this}});this.fieldset=new Ext.form.FieldSet({xtype:'fieldset',border:this.border,collapsed:this.collapsibleFieldset&&!this.checked,hideLabel:!0,items:this.items,defaults:this.defaults,defaultType:this.defaultType,style:this.style,layout:this.layout});var a={items:[Ext.create('Ext.container.Container',{layout:{type:'fit'},items:[this.radio]}),this.fieldset],border:!1};Ext.apply(this,Ext.apply(this.initialConfig,a));CGA.widget.FieldSetWithCheckToggle.superclass.initComponent.call(this);if(!this.value){this.fieldset.items.each(function(a,c,b){a.disable()})}}},0,['CGA_fieldsetwithradiotoggle','FieldSetWithCheckToggle'],['component','box','container','fieldset','CGA_fieldsetwithradiotoggle','FieldSetWithCheckToggle'],{'component':!0,'box':!0,'container':!0,'fieldset':!0,'CGA_fieldsetwithradiotoggle':!0,'FieldSetWithCheckToggle':!0},['widget.CGA_fieldsetwithradiotoggle','widget.FieldSetWithCheckToggle'],0,[CGA.widget,'FieldSetWithCheckToggle'],0);Ext.cmd.derive('Ext.layout.component.FieldSet',Ext.layout.component.Body,{type:'fieldset',defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayout:function(a){var b=this.owner.legend;Ext.layout.component.Body.prototype.beginLayout.call(this,a);if(b){a.legendContext=a.context.getCmp(b)}},beginLayoutCycle:function(a){var c=a.target,b;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments);if(c.collapsed){a.setContentHeight(0);a.restoreMinHeight=c.minHeight;delete c.minHeight;if(a.widthModel.shrinkWrap){b=this.lastComponentSize;a.setContentWidth(b&&b.contentWidth||this.defaultCollapsedWidth)}}},finishedLayout:function(b){var c=this.owner,a=b.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments);if(a){c.minHeight=a}},calculateOwnerWidthFromContentWidth:function(c,a){var b=c.legendContext;if(b){a=Math.max(a,b.getProp('width'))}return Ext.layout.component.Body.prototype.calculateOwnerWidthFromContentWidth.call(this,c,a)},calculateOwnerHeightFromContentHeight:function(a,d){var c=a.getBorderInfo(),b=a.legendContext;return a.getProp('contentHeight')+a.getPaddingInfo().height+(Ext.isIE8?a.bodyContext.getPaddingInfo().top:0)+(b?b.getProp('height'):c.top)+c.bottom},publishInnerHeight:function(c,d){var b=c.legendContext,a=0;if(b){a=b.getProp('height')}if(a===undefined){this.done=!1}else {Ext.layout.component.Body.prototype.publishInnerHeight.call(this,c,d-a)}},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}},0,0,0,0,['layout.fieldset'],0,[Ext.layout.component,'FieldSet'],0);Ext.cmd.derive('CGA.view.BulkOperationBaseForm',Ext.Window,{statics:{stores:{},setStore:function(b){var a=Ext.create('Ext.data.Store');a.add(b.pointer.getRange());a.filterBy(function(a){return a.getData().value!='!clear!'&&a.getData().value!='BLANK'});this.stores[b.index]=a}},grid:null,isFromContextMenu:null,constructor:function(a){this.grid=a.grid;this.isFromContextMenu=a.isFromContextMenu;Ext.window.Window.prototype.constructor.apply(this,arguments)},initComponent:function(){var a=this;a.applyLocale();Ext.apply(a,{title:this.L('bulkOperations'),rtl:a.grid.up().getViewModel().get('currentLocale')=='he',width:600,autoHeight:!0,modal:!0,closeAction:'hide',resizable:!1,layout:'fit',hideOnMaskTap:!0,items:[Ext.create('Ext.form.Panel',{bodyStyle:'background-color: #f6f6f6;',items:[{xtype:'FieldSetWithCheckToggle',itemId:'UpdateConstraintDateFieldSet',boxLabel:this.L('UpdateConstraintDate'),style:{border:'0px !important',borderTop:'0px !important'},border:!1,value:!0,layout:{type:'column'},width:'100%',name:'bulkOperations',defaults:{margin:'0 10 0 0'},items:[{xtype:'constrainttypefield',fieldLabel:this.L('constraintType'),name:'ConstraintType',flex:1,matchFieldWidth:!0,readOnly:!1,allowBlank:!1,width:'54%'},{xtype:'datefield',fieldLabel:this.L('constraintDate'),name:'ConstraintDate',flex:1,readOnly:!1,width:'42%',validator:function(b){if(Ext.isEmpty(b)&&!this.previousNode().value||!Ext.isEmpty(b)&&this.previousNode().value){return !0}else {return a.L('emptyValueError')}}}]},{xtype:'FieldSetWithCheckToggle',itemId:'UpdateActualeDateFieldSet',boxLabel:this.L('UpdateActualeDate'),layout:'vbox',border:!1,style:{border:'0px !important',borderTop:'0px !important'},name:'bulkOperations',layout:{type:'column'},defaults:{margin:'0 10 0 0'},width:'100%',items:[{xtype:'radiofield',boxLabel:'',name:'actualDateRadio',itemId:'manualActualDateRadio',checked:!0,inputValue:'',style:{margin:' 0 20 0 0'},listeners:{change:function(b,a){if(a){this.up().query('datefield').forEach(function(c){c.setDisabled(!1)})}}}},{xtype:'datefield',fieldLabel:this.L('startDate'),name:'StartedDate',flex:1,readOnly:!1,allowBlank:!1,width:'40%'},{xtype:'datefield',fieldLabel:this.L('endDate'),name:'CompletedDate',flex:1,readOnly:!1,width:'40%',validator:function(b){if(!Ext.isEmpty(this.previousNode().value)){return !0}else {return a.L('emptyStartDateValueError')}}},{xtype:'radiofield',boxLabel:this.L('setAllDone'),itemId:'setAllDone',name:'actualDateRadio',checked:!1,inputValue:'',style:{margin:' 10 20 10 0'},width:'100%',listeners:{change:function(b,a){if(a){this.up().query('datefield').forEach(function(c){c.setDisabled(!0)})}}}},{xtype:'checkbox',boxLabel:this.L('ignoreQualityControls'),itemId:'ignoreQualityControls',name:'actualDate',checked:!1,inputValue:'extjs',permission:a.grid.up().getViewModel().get('irrelevantPermission'),style:{marginTop:'25px !important',marginRight:'0px !important',marginLeft:'0px !important'}}]}],buttons:[{text:a.L('OK'),handler:function(t){var u=this.up('window').grid;var i=[];if(a.isFromContextMenu){i=u.getSelectedRows()}else {var q=this.up('form').items.getAt(0);var r=this.up('window').grid.taskStore;var m=q.queryBy(function(a){return a.xtype=='combobox'});var f=m.every(function(a){if(a.xtype=='combobox'){return a.validate()}else {if(a.xtype=='fieldset'){return a.items.getRange().every(function(b){return b.validate()})}else {return !0}}});if(f){var b={};m.forEach(function(a){b[a.itemId]=a.value});var v=r.getRootNode();v.cascadeBy(function(c){var a=c.getData();if(a.ConstructName&&a.StagePrototypeName&&a.SpotName){if(a.ConstructName===b['ConstructName']&&a.StagePrototypeName===b['StagePrototypeName']&&(parseInt(a.SpotName)>=parseInt(b['SpotNameFrom'])&&parseInt(a.SpotName)<=parseInt(b['SpotNameTo'])||parseInt(a.SpotName)<=parseInt(b['SpotNameFrom'])&&parseInt(a.SpotName)>=parseInt(b['SpotNameTo']))){i.push(c)}}})}else {return !1}}var j=this.up('form').queryBy(function(a){return a.itemId=='setAllDone'&&a.xtype=='radiofield'})[0];var h=this.up('form').queryBy(function(a){return a.itemId=='manualActualDateRadio'&&a.xtype=='radiofield'})[0];if(h.value&&!h.isDisabled()){var k=h.up().queryBy(function(a){return a.xtype=='datefield'});var f=k.every(function(a){return a.validate()});if(!f){return !1}}var d=this.up('form').queryBy(function(a){return a.itemId=='UpdateConstraintDateFieldSet'&&a.xtype=='FieldSetWithCheckToggle'})[0];if(d.radio.checked&&!d.isDisabled()){var k=d.down('fieldset').queryBy(function(a){return a.xtype=='datefield'});var f=k.every(function(a){return a.validate()});if(!f){return !1}}var c=this.up('form').queryBy(function(a){return a.itemId=='ignoreQualityControls'&&a.xtype=='checkbox'})[0];c=c.value&&!j.isDisabled();var g=[];var l=j.value&&!j.isDisabled();var p=this.up('form').queryBy(function(a){if(!a.radio){return !1}return a.radio.checked==!0&&a.xtype=='FieldSetWithCheckToggle'})[0];var o=p.queryBy(function(a){return a.xtype=='fieldset'})[0];var e={};o.items.getRange().forEach(function(a){if(a.xtype=='datefield'||a.xtype=='constrainttypefield'){e[a.name]=a.value}});i.forEach(function(b){if(d.radio.checked&&!d.isDisabled()){b.setConstraintWithoutPropagation(e.ConstraintType,e.ConstraintDate)}else {var j=b.getData();var m=l?j.StartDate:e.StartedDate;var k=l?j.EndDate:e.CompletedDate;var i=b.setStartedDate(m,!1,'',c==!1?'simulation':!0);var h=b.setCompletedDate(k,!1,'',c==!1?'simulation':!0);b.set('ignoreQualityControls',c);if(i.success&&h.success&&l){b.set('isFinished',!0);b.setPercentDone(100)}if(!i.success){var f=b.copy();f.set('errorType',a.L(i.errorType));f.set('newStartedDate',i.value);g.push(f.getData())}if(!h.success){var f=b.copy();f.set('errorType',a.L(h.errorType));f.set('newCompletedDate',h.value);g.push(f.getData())}}});Ext.StoreManager.get('Tasks').adjustToCalendar();t.up('window').close();if(g.length>0){var n=Ext.create('Ext.data.Store',{storeId:'rejectedRecordsStore',fields:['Name','errorType'],groupField:'errorType',data:g});var s=Ext.create('Ext.window.Window',{width:600,height:400,rtl:this.up('window').rtl,modal:!0,title:a.L('inspectionErrorsFound'),resizable:!1,layout:{type:'fit'},items:[{xtype:'grid',hideHeaders:!0,height:300,features:[{groupHeaderTpl:'<span style="font-weight:bold;">{name}</span>',ftype:'groupingsummary',showSummaryRow:!1,enableGroupingMenu:!1}],columns:[{text:'Name',dataIndex:'Name',width:'100%'}],disableSelection:!0,store:n,dockedItems:[{xtype:'toolbar',dock:'bottom',layout:{type:'hbox'},items:[{xtype:'radiogroup',columns:2,flex:3,vertical:!0,items:[{boxLabel:a.L('ignoreQualityControls'),name:'ignore',inputValue:'true',disabled:!a.grid.up().getViewModel().get('irrelevantPermission')},{boxLabel:a.L('doWithoutThisStage'),name:'ignore',inputValue:'false'}],listeners:{change:function(){this.nextNode().setDisabled(!1)}}},{xtype:'button',text:a.L('OK'),flex:1,disabled:!0,handler:function(){if(this.previousNode().value){this.up('window').close()}else {var a=this.up('grid').store.getRange();a.forEach(function(c){var a=c.getData();var d=Ext.ComponentQuery.query('cga-gantt')[0].crudManager;var b=d.taskStore.store.getById(c.data.Id);if(a.hasOwnProperty('newStartedDate')){b.setStartedDate(a.newStartedDate,!1,'',!0)}if(a.hasOwnProperty('newCompletedDate')){b.setCompletedDate(a.newCompletedDate,!1,'',!0)}b.set('ignoreQualityControls',!0)});this.up('window').close()}}}]}]}]});s.show()}}},{text:a.L('Cancel'),handler:function(){this.up('window').close()}}]})]});if(!this.isFromContextMenu){var b=Ext.getClass(this).stores;var a=this;var c=new Ext.form.FieldSet({title:this.L('filterFields'),border:!1,style:{border:'0px !important',borderTop:'0px !important'},layout:{type:'vbox'},width:'100%',defaults:{xtype:'combobox',queryMode:'local',displayField:'label',width:'300px',forceSelection:!0,typeAhead:!0,validator:function(b){if(!Ext.isEmpty(b)){return !0}else {return a.L('emptyValueError')}}},items:[{fieldLabel:this.L('stagePrototype'),store:b['StagePrototypeName'],emptyText:this.L('selecetStagePrototype'),itemId:'StagePrototypeName'},{fieldLabel:this.L('constructName'),store:b['ConstructName'],emptyText:this.L('selectConstructName'),itemId:'ConstructName'},{xtype:'fieldset',style:{border:'0px !important',borderTop:'0px !important',borderTop:'0px !important',paddingRight:'0px !important',paddingLeft:'0px !important'},layout:{type:'hbox'},defaults:{xtype:'combobox',queryMode:'local',displayField:'label',forceSelection:!0,typeAhead:!0,validator:function(b){if(!Ext.isEmpty(b)){return !0}else {return a.L('emptyValueError')}}},items:[{fieldLabel:this.L('fromSpotName'),store:b['SpotName'],emptyText:this.L('selectSpotName'),itemId:'SpotNameFrom',width:'300px'},{fieldLabel:this.L('toSpotName'),store:b['SpotName'],emptyText:this.L('selectSpotName'),itemId:'SpotNameTo',labelStyle:'padding-left: 15px !important; padding-right: 15px !important;',width:'260px'}]}]});this.items[0].insert(0,c);this.items[0].updateLayout()}Ext.window.Window.prototype.initComponent.apply(this,arguments)}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.view,'BulkOperationBaseForm'],0);Ext.cmd.derive('issuesPkgs.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!issuesPkgs.locale.Active){issuesPkgs.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=issuesPkgs.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in issuesPkgs.locale.Active){issuesPkgs.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {issuesPkgs.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[issuesPkgs.locale,'Locale'],0);Ext.cmd.derive('issuesPkgs.locale.En',issuesPkgs.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesPkgs.view.IssuesView':{Alldates:'',Export:'Export',NoAreaFilters:'No area filters',progressFilters:'Progress filters',Late:'Late',Due:'Due',OnTime:'On time',Done:'Done',Administrative:'Administrative',Irrelevant:'Display Irrelevant',Progress:'Progress Filters',Filters:'Filters',FilterByMe:'My issues',Clear:'Clear',Add:'Add',Attendees:'Attendees',NewIssue:'New Issue',Sign:'Sign',Send:'Send',Invite:'Invite',Description:'Description',ExistingIssue:'Existing Issue',Inviting:'Inviting...',Loading:'Loading...',clearFilter:'Clear Filter',NEW:'New'},'issuesPkgs.view.IssuesGrid':{SendReminderTo:'Send reminder to',NoRecordsFound:'No records found',Name:'Name',Title:'Title',Description:'Description',Responsible:'Responsible',Accountable:'Accountable',DueDate:'DueDate',filter:'filter',Before:'Before',After:'After',On:'On',SendReminderAtProjectLevel:'Send reminder at project level',EscalateToAccuountable:'Escalate to accountable',Kind:'Kind',Type:'Type',IssueNotRelated:'Issue Not Related',IssueEnded:'Issue Ended',IrrelevantIssue:'Irrelevant Issue',EnterText:'Enter search text',IssueDetails:'Issue Details',SendSuccessfully:'Send Successfully',Loading:'Loading...'},'issuesPkgs.filter.CustomDate':{ThisWeek:'This Week',PastMonth:'Past Month',BeforeToday:'Over Due',CalendarMonth:'By Month',SelectMonth:'Select a month:'},'issuesPkgs.view.TreePicker':{AreaFilterExist:'Area Filters Exist'},'issuesPkgs.view.IssuesViewController':{Selected:'Selected',Cancel:'Cancel',Save:'Save',Loading:'Loading...',Signin:'Signing...'},'issuesPkgs.view.IssuesGridSelector':{Selected:'Selected',Filters:'Filters',Kind:'Kind',Type:'Type',Name:'Name',Subject:'Subject',Description:'Description',Responsible:'Responsible',Accountable:'Accountable',DueDate:'DueDate',Filters:'Filters',Before:'Before',After:'After',On:'On',Loading:'Loading...'},'issuesPkgs.window.NewAttendant':{Cancel:'Cancel',Save:'Save',AddedSuccessfully:'Added Successfully',Contact:'Contact',Loading:'Loading...',Details:'Details',NewAttendant:'New Attendant',FullName:'Full Name',Email:'Email',Role:'Role'},'controller.IssuesViewController':{Loading:'Loading...',Signin:'Signing...'},'issuesPkgs.window.SendWindow':{SendIssues:'Send Summery',Send:'Send',Cancel:'Cancel',To:'To',From:'From',Subject:'Subject',Loading:'Loading...',CC:'CC',Sending:'Sending...',SendSuccessfully:'Send Successfully',Bcc:'Bcc'},'issuesPkgs.window.IssuesSelectorWindow':{Selected:'Selected',Cancel:'Cancel',Save:'Save',Loading:'Loading...',SelectIssues:'Select Issues',Image:'Image'},'issuesPkgs.view.AttendeesGrid':{Name:'Name',Email:'Email',Role:'Role',Status:'Status',Loading:'Loading...',Invited:'Invited',NoReason:'No Response'}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesPkgs.locale,'En'],0);Ext.cmd.derive('issuesPkgs.locale.He',issuesPkgs.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesPkgs.view.IssuesView':{Alldates:'',Export:'',NoAreaFilters:'  ',progressFilters:' ',Late:'',Due:'',OnTime:'',Done:'',Administrative:'',Irrelevant:'  ',Progress:' ',Filters:'',FilterByMe:' ',Clear:'',Add:'',Attendees:'',NewIssue:' ',Sign:'',Send:'',Invite:'',Description:'',ExistingIssue:' ',Inviting:' ...',Loading:'...',NEW:'',clearFilter:' '},'issuesPkgs.view.IssuesGrid':{SendReminderTo:'  ',NoRecordsFound:'  ',Name:'',Title:'',Description:'',Responsible:'',Accountable:'',DueDate:' ',filter:'',Before:'',After:'',On:' ',SendReminderAtProjectLevel:'   ',EscalateToAccuountable:' ',Kind:'',Type:'',IssueNotRelated:'  ',IssueEnded:' ',IrrelevantIssue:'  ',EnterText:'  ',Loading:'...',IssueDetails:' ',SendSuccessfully:' '},'issuesPkgs.filter.CustomDate':{ThisWeek:' ',PastMonth:' ',BeforeToday:'  ',CalendarMonth:' ',SelectMonth:' :'},'issuesPkgs.view.TreePicker':{AreaFilterExist:'  '},'issuesPkgs.view.IssuesViewController':{Selected:'',Cancel:'',Save:'',Loading:'...',Signin:'...'},'issuesPkgs.view.IssuesGridSelector':{Selected:'',Filters:'',Kind:'',Type:'',Subject:'',Description:'',Responsible:'',Accountable:'',Name:'',DueDate:' ',Before:'',After:'',On:' ',Loading:'...'},'issuesPkgs.window.NewAttendant':{Cancel:'',Save:'',AddedSuccessfully:' ',Contact:' ',Loading:'...',Details:'',NewAttendant:'  ',FullName:' ',Email:' ',Role:''},'controller.IssuesViewController':{Loading:'...',Signin:'...'},'issuesPkgs.window.SendWindow':{SendIssues:' ',Send:'',Cancel:'',To:'',From:'',Subject:'',Loading:'...',CC:'',Sending:'...',SendSuccessfully:' ',Bcc:' '},'issuesPkgs.window.IssuesSelectorWindow':{Selected:'',Cancel:'',Save:'',Loading:'...',SelectIssues:' '},'issuesPkgs.view.AttendeesGrid':{Name:'',Email:'"',Role:'',Status:'',Loading:'...',Invited:'',NoReason:' '}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesPkgs.locale,'He'],0);Ext.cmd.derive('issuesPkgs.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in issuesPkgs.locale.Active){if(a===issuesPkgs.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in issuesPkgs.locale.Active){issuesPkgs.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[issuesPkgs.mixin,'Localizable'],0);Ext.cmd.derive('Ext.grid.filters.filter.Base',Ext.Base,{factoryConfig:{type:'grid.filter'},$configPrefixed:!1,$configStrict:!1,config:{itemDefaults:null,menuDefaults:{xtype:'menu'},updateBuffer:500},active:!1,type:'string',dataIndex:null,menu:null,isGridFilter:!0,defaultRoot:'data',filterIdPrefix:'x-gridfilter',constructor:function(c){var a=this,b;a.initConfig(c);b=a.column;b.on('destroy',a.destroy,a);a.dataIndex=a.dataIndex||b.dataIndex;a.task=new Ext.util.DelayedTask(a.setValue,a)},destroy:function(){this.grid=this.menu=Ext.destroy(this.menu);this.callParent()},addStoreFilter:function(a){this.getGridStore().getFilters().add(a)},createFilter:function(a,b){return new Ext.util.Filter(this.getFilterConfig(a,b))},getFilterConfig:function(a,b){a.id=this.getBaseIdPrefix();if(!a.property){a.property=this.dataIndex}if(!a.root){a.root=this.defaultRoot}if(b){a.id+='-'+b}return a},createMenu:function(){this.menu=Ext.widget(this.getMenuConfig())},getActiveState:function(b,c){var a=b.active;return a!==undefined?a:c!==undefined},getBaseIdPrefix:function(){return this.filterIdPrefix+'-'+this.dataIndex},getMenuConfig:function(){return Ext.apply({},this.getMenuDefaults())},getGridStore:function(){return this.grid.getStore()},getStoreFilter:function(a){var b=this.getBaseIdPrefix();if(a){b+='-'+a}return this.getGridStore().getFilters().get(b)},onValueChange:function(b,d){var a=this,c=a.updateBuffer;if(b.isValid()){if(d.getKey()===d.RETURN){a.menu.hide();return}if(c){a.task.delay(c,null,null,[a.getValue(b)])}else {a.setValue(a.getValue(b))}}},preprocess:Ext.emptyFn,removeStoreFilter:function(a){this.getGridStore().getFilters().remove(a)},getValue:Ext.emptyFn,setActive:function(b){var a=this,d=a.owner.activeFilterMenuItem,c;if(a.active!==b){a.active=b;a.preventDefault=!0;c=a.getGridStore().getFilters();c.beginUpdate();if(b){a.activate()}else {a.deactivate()}c.endUpdate();a.preventDefault=!1;if(d&&d.activeFilter===a){d.setChecked(b)}a.setColumnActive(b)}},setColumnActive:function(a){this.column[a?'addCls':'removeCls'](this.owner.filterCls)},showMenu:function(b){var a=this;if(!a.menu){a.createMenu()}b.activeFilter=a;b.setMenu(a.menu,!1);b.setChecked(a.active);b.setDisabled(a.disabled===!0);a.activate(!0)},updateStoreFilter:function(){this.getGridStore().getFilters().notify('endupdate')}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.grid.filters.filter,'Base'],0);Ext.cmd.derive('Ext.grid.filters.filter.TriFilter',Ext.grid.filters.filter.Base,{menuItems:['lt','gt','-','eq'],constructor:function(i){var a=this,f=!1,g={},d,e,c,b,h;Ext.grid.filters.filter.Base.prototype.constructor.call(this,i);b=a.value;e=a.getStoreFilter('lt');d=a.getStoreFilter('gt');c=a.getStoreFilter('eq');if(e||d||c){f=a.active=!0;if(e){a.onStateRestore(e)}if(d){a.onStateRestore(d)}if(c){a.onStateRestore(c)}}else {if(a.grid.stateful&&a.getGridStore().saveStatefulFilters){b=undefined}a.active=a.getActiveState(i,b)}g.lt=e||a.createFilter({operator:'lt',value:!f&&b&&Ext.isDefined(b.lt)?b.lt:null},'lt');g.gt=d||a.createFilter({operator:'gt',value:!f&&b&&Ext.isDefined(b.gt)?b.gt:null},'gt');g.eq=c||a.createFilter({operator:'eq',value:!f&&b&&Ext.isDefined(b.eq)?b.eq:null},'eq');a.filter=g;if(a.active){a.setColumnActive(!0);if(!f){for(h in b){a.addStoreFilter(a.filter[h])}}}},activate:function(h){var a=this,g=a.filter,i=a.fields,f,b,e,c,d;if(a.preventFilterRemoval){return}for(e in g){f=g[e];b=i[e];c=f.getValue();if(c||c===0){b.setValue(c);if(d===undefined){d=a.owner.activeFilterMenuItem===b.up('menuitem')}if(!d){b.up('menuitem').setChecked(!0,!0)}if(!h){a.addStoreFilter(f)}}}},deactivate:function(){var a=this,d=a.filter,e,b,c;if(!a.countActiveFilters()||a.preventFilterRemoval){return}a.preventFilterRemoval=!0;for(e in d){b=d[e];c=b.getValue();if(c||c===0){a.removeStoreFilter(b)}}a.preventFilterRemoval=!1},countActiveFilters:function(){var d=this.filter,a=this.getGridStore().getFilters(),e=this.getBaseIdPrefix(),c=0,b;if(a.length){for(b in d){if(a.get(e+'-'+b)){c++}}}return c},onFilterRemove:function(c){var a=this,b;if(!a.menu&&a.countActiveFilters()){a.active=!1}else {if(a.menu){b={};b[c]=null;a.setValue(b)}}},onStateRestore:Ext.emptyFn,setValue:function(f){var c=this,b=c.filter,i=[],d=[],k=!1,l=c.getGridStore().getFilters(),m,j,a,e,n,h,g;if(c.preventFilterRemoval){return}c.preventFilterRemoval=!0;if('eq' in f){a=b.lt.getValue();if(a||a===0){d.push(b.lt)}a=b.gt.getValue();if(a||a===0){d.push(b.gt)}a=f.eq;if(a||a===0){i.push(b.eq);b.eq.setValue(a)}else {d.push(b.eq)}}else {a=b.eq.getValue();if(a||a===0){d.push(b.eq)}if('lt' in f){a=f.lt;if(a||a===0){i.push(b.lt);b.lt.setValue(a)}else {d.push(b.lt)}}if('gt' in f){a=f.gt;if(a||a===0){i.push(b.gt);b.gt.setValue(a)}else {d.push(b.gt)}}}h=d.length;g=i.length;k=!!(c.countActiveFilters()+g-h);if(h||g||k!==c.active){l.beginUpdate();if(h){for(e=0;e<h;e++){j=d[e];c.fields[j.getOperator()].setValue(null);j.setValue(null);c.removeStoreFilter(j)}}if(g){for(e=0;e<g;e++){c.addStoreFilter(i[e])}}c.setActive(k);l.endUpdate()}c.preventFilterRemoval=!1}},1,0,0,0,0,0,[Ext.grid.filters.filter,'TriFilter'],0);Ext.cmd.derive('Ext.grid.filters.filter.Date',Ext.grid.filters.filter.TriFilter,{type:'date',config:{fields:{lt:{text:'Before'},gt:{text:'After'},eq:{text:'On'}},pickerDefaults:{xtype:'datepicker',border:0},updateBuffer:0,dateFormat:undefined},itemDefaults:{xtype:'menucheckitem',selectOnFocus:!0,width:125,menu:{layout:'auto',plain:!0}},applyDateFormat:function(a){return a||Ext.Date.defaultFormat},createMenu:function(m){var a=this,l={scope:a,checkchange:a.onCheckChange},i=a.menuItems,f,e,j,d,k,b,h,c,g;Ext.grid.filters.filter.TriFilter.prototype.createMenu.apply(this,arguments);e=a.getItemDefaults();f=a.getFields();j=Ext.apply({minDate:a.minDate,maxDate:a.maxDate,format:a.dateFormat,listeners:{scope:a,select:a.onMenuSelect}},a.getPickerDefaults());a.fields={};for(d=0,k=i.length;d<k;d++){b=i[d];if(b!=='-'){c={menu:{xtype:'datemenu',hideOnClick:!1,pickerCfg:Ext.apply({itemId:b},j)}};if(e){Ext.merge(c,e)}if(f){Ext.merge(c,f[b])}h=a.menu.add(c);g=a.fields[b]=h.down('datepicker');g.filter=a.filter[b];g.filterKey=b;h.on(l)}else {a.menu.add(b)}}},getPicker:function(a){return this.fields[a]},onCheckChange:function(d,c){var b=d.down('datepicker').filter,a;if(!c&&b.getValue()){a={};a[b.getOperator()]=null;this.setValue(a)}},onFilterRemove:function(a){var b={};b[a]=null;this.setValue(b);this.fields[a].up('menuitem').setChecked(!1,!0)},onStateRestore:function(a){a.setSerializer(this.getSerializer());a.setConvert(this.convertDateOnly)},getFilterConfig:function(a,b){a=Ext.grid.filters.filter.TriFilter.prototype.getFilterConfig.call(this,a,b);a.serializer=this.getSerializer();a.convert=this.convertDateOnly;return a},convertDateOnly:function(b){var a=null;if(b){a=Ext.Date.clearTime(b,!0).getTime()}return a},getSerializer:function(){var a=this;return function(c){var b=c.value;if(b){c.value=Ext.Date.format(b,a.getDateFormat())}}},onMenuSelect:function(i,f){var g=this,b=g.fields,h=g.filter,a=b[i.itemId],c=b.gt,d=b.lt,j=b.eq,e={};a.up('menuitem').setChecked(!0,!0);if(a===j){d.up('menuitem').setChecked(!1,!0);c.up('menuitem').setChecked(!1,!0)}else {j.up('menuitem').setChecked(!1,!0);if(a===c&&+d.value<+f){d.up('menuitem').setChecked(!1,!0);if(h.lt.getValue()!=null){e.lt=null}}else {if(a===d&&+c.value>+f){c.up('menuitem').setChecked(!1,!0);if(h.gt.getValue()!=null){e.gt=null}}}}e[a.filterKey]=f;g.setValue(e);i.up('menu').hide()}},0,0,0,0,['grid.filter.date'],0,[Ext.grid.filters.filter,'Date'],0);Ext.cmd.derive('issuesPkgs.filter.CustomDate',Ext.grid.filters.filter.Date,{type:'customDate',menuItems:['gt','lt','-','eq'],isLoaded:!1,activate:function(){var a=this;Ext.grid.filters.filter.Date.prototype.activate.apply(this,arguments);if(!a.isLoaded){this.menu.add([{xtype:'menucheckitem',text:this.L('ThisWeek'),operator:'week',selectOnFocus:!0,width:125,listeners:{checkchange:function(c,b){a.handlePresetMenu(c,b)}}},{xtype:'menucheckitem',text:this.L('BeforeToday'),operator:'beforeToday',selectOnFocus:!0,width:125,listeners:{checkchange:function(c,b){a.handlePresetMenu(c,b)}}},{xtype:'menucheckitem',operator:'yearmonth',text:this.L('CalendarMonth'),selectOnFocus:!0,width:125,listeners:{checkchange:function(c,b){a.handlePresetMenu(c,b)}}}]);a.isLoaded=!0}},handlePresetMenu:function(a,d){var c=this;c.currentField=a;if(d){switch(a.operator){case 'week':this.onMenuSelect(this.fields.lt,new Date());this.fields.lt.setValue(new Date());this.onMenuSelect(this.fields.gt,Ext.Date.subtract(new Date(),Ext.Date.DAY,7));this.fields.gt.setValue(Ext.Date.subtract(new Date(),Ext.Date.DAY,7));break;case 'month':this.onMenuSelect(this.fields.lt,new Date());this.fields.lt.setValue(new Date());this.onMenuSelect(this.fields.gt,Ext.Date.subtract(new Date(),Ext.Date.DAY,30));this.fields.gt.setValue(Ext.Date.subtract(new Date(),Ext.Date.DAY,30));break;case 'beforeToday':this.onMenuSelect(this.fields.lt,new Date());this.fields.lt.setValue(new Date());break;case 'yearmonth':var b=new Ext.Window({title:this.L('SelectMonth'),width:310,rtl:c.grid.up('panel').rtl,parentRefernce:c,height:370,modal:!0,resizable:!1,hideOnMaskTap:!0,items:[Ext.create({xtype:'monthpicker',renderTo:document.body,value:new Date(),listeners:{okclick:function(){var c=new Date(this.value[1],this.value[0],1);var e=Ext.Date.getLastDateOfMonth(c);var b=this.up();b.parentRefernce.onMenuSelect(b.parentRefernce.fields.lt,e);b.parentRefernce.fields.lt.setValue(e);b.parentRefernce.onMenuSelect(b.parentRefernce.fields.gt,c);b.parentRefernce.fields.gt.setValue(c);b.parentRefernce.setCheckboxes(b.parentRefernce.currentField);b.parentRefernce.currentField.setChecked(!0,!0);b.close()},cancelclick:function(){this.up().parentRefernce.grid.up('window').modal=!0;b.parentRefernce.currentField.setChecked(!1,!0);this.up().close()}}})],listeners:{close:function(){this.parentRefernce.grid.up('window').modal=!0;this.parentRefernce.currentField.setChecked(!1,!0)}}});Ext.WindowManager.register(b);Ext.WindowManager.register(this.grid.up('window'));this.grid.up('window').modal=!1;b.show();Ext.Function.defer(function(){Ext.WindowManager.bringToFront(b)},100);}if(a.operator!='yearmonth'){this.setCheckboxes(a);a.setChecked(!0,!0)}}},setCheckboxes:function(a){this.menu.items.items.forEach(function(b,c){if(b.xtype=='menucheckitem'){if(c<2){if(a.operator=='beforeToday'&&c==0){b.setChecked(!1)}else {b.setChecked(!0)}}else {b.setChecked(!1)}}})}},0,0,0,0,['grid.filter.customDate'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.filter,'CustomDate'],0);Ext.cmd.derive('issuesPkgs.view.IssuesGridSelector',Ext.grid.Panel,{originGrid:null,bodyCls:'issuesComponent',scrollable:'vertical',initComponent:function(){var a=this;var b=Ext.create('Ext.data.Store');Ext.apply(a,{columns:[{flex:1,text:a.L('Name'),dataIndex:'name',sortable:!0},{flex:1,text:a.L('Subject'),dataIndex:'subject',sortable:!0},{flex:3,text:a.L('Description'),dataIndex:'description',sortable:!0},{flex:1,text:a.L('Responsible'),dataIndex:'responsible',sortable:!0,filter:{type:'list'}},{flex:1,text:a.L('Accountable'),dataIndex:'accountable',sortable:!0,filter:{type:'list'},summaryType:'count',summaryRenderer:function(b,c,d){return b+' '+a.L('issues')}},{flex:2,text:a.L('DueDate'),dataIndex:'issueDueDate',sortable:!0,filter:{type:'customDate',fields:{gt:{text:a.L('After')},lt:{text:a.L('Before')},eq:{text:a.L('On')},week:{text:'week'}}},renderer:Ext.util.Format.dateRenderer('m-d-Y')},{flex:1,text:a.L('Kind'),dataIndex:'kind',sortable:!0,filter:{type:'list'}},{flex:1,text:a.L('Type'),dataIndex:'issueTypeType',sortable:!0,filter:{type:'list'}}],viewConfig:a.originGrid.viewConfig,features:a.originGrid.features,emptyText:a.originGrid.emptyText,store:b,rtl:a.originGrid.isLocalRtl(),plugins:[{ptype:'gridfilters',menuFilterText:a.L('Filters')}],selModel:{selType:'checkboxmodel',showHeaderCheckbox:!0}});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},listeners:{render:function(a){a.body.mask(a.L('Loading'));var b={mode:'byProject'};a.crudManager.fetchFromServer(b,!1).then(function(b){if(b.isError){}else {var c=[];b.kanbanStore.taskStore.forEach(function(d){c.push({id:d.i,name:d.n,subject:d.su,accountable:d.ac,responsible:d.res,issueDueDate:d.dd!=null?new Date(d.dd):null,description:d.de,kind:d.ki,subkind:d.sk,progress:d.pro})});a.getStore().loadData(c);a.body.unmask()}})},select:function(a,b){this.updateCounterLabel(a)},deselect:function(a,b){this.updateCounterLabel(a)}},updateCounterLabel:function(a){this.up().down('[itemId=selectionCounterLabel]').setText(a.selected.length+' '+this.L('Selected'))},constructor:function(a){var b=this;b.crudManager=a.crudManager;b.originGrid=a.originGrid;Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['issuesGridSelector'],['component','box','container','panel','tablepanel','gridpanel','grid','issuesGridSelector'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'issuesGridSelector':!0},['widget.issuesGridSelector'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'IssuesGridSelector'],0);Ext.cmd.derive('issuesPkgs.window.IssuesSelectorWindow',Ext.Window,{cls:'extjsWizardWrapper',alwaysOnTop:!0,closeAction:'hide',modal:!0,resizable:!1,width:'98%',height:'98%',layout:'fit',initComponent:function(){var a=this;Ext.apply(a,{title:a.L('SelectIssues'),buttons:[{xtype:'label',itemId:'selectionCounterLabel',text:'0 '+a.L('Selected')},{xtype:'label',width:20},{text:a.L('Save'),cls:'submitButton',handler:function(d){var a=d.up('window');a.mask(a.L('Loading'));var c=a.down('issuesGridSelector');if(c.getSelection().length>0){var b=[];c.getSelection().forEach(function(a){b.push(a.id)});a.crudManager.connectToMeeting(b).then(function(e){var b=Ext.ComponentQuery.query('issuesGrid')[0];var c=b.getController();var f=c.modifiyFieldsToFitModel(e.kanbanStore.taskStore);b.getStore().add(f);a.unmask();a.close()})}}},{text:a.L('Cancel'),cls:'closeButton',handler:function(a){a.up('window').close()}}],items:[{xtype:'issuesGridSelector',crudManager:a.crudManager,originGrid:a.originGrid}]});Ext.window.Window.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.crudManager=a.crudManager;b.rtl=a.rtl;b.originGrid=a.originGrid;Ext.window.Window.prototype.constructor.apply(this,arguments)}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.window,'IssuesSelectorWindow'],0);Ext.cmd.derive('issuesPkgs.utils.DownloadUtil',Ext.Base,{statics:{download:function(o,m,n){var d=window,h='application/octet-stream',f=n||h,a=o,g=!m&&!n&&a,b=document.createElement('a'),k=function(a){return String(a)},e=d.Blob||d.MozBlob||d.WebKitBlob||k,i=m||'download',c,l;e=e.call?e.bind(d):Blob;if(String(this)==='true'){a=[a,f];f=a[0];a=a[1]}if(g&&g.length<2048){i=g.split('/').pop().split('?')[0];b.href=g;if(b.href.indexOf(g)!==-1){var j=new XMLHttpRequest();j.open('GET',g,!0);j.responseType='blob';j.onload=function(a){issuesPkgs.utils.DownloadUtil.download(a.target.response,i,h)};setTimeout(function(){j.send()},0);return j}}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(a)){if(a.length>1024*1024*1.999&&e!==k){a=dataUrlToBlob(a);f=a.type||h}else {return navigator.msSaveBlob?navigator.msSaveBlob(dataUrlToBlob(a),i):saver(a)}}c=a instanceof e?a:new e([a],{type:f});function dataUrlToBlob(h){var b=h.split(/[:;,]/),i=b[1],g=b[2]=='base64'?atob:decodeURIComponent,c=g(b.pop()),f=c.length,a=0,d=new Uint8Array(f);for(a;a<f;++a){d[a]=c.charCodeAt(a)}return new e([d],{type:i})}function saver(a,e){if('download' in b){b.href=a;b.setAttribute('download',i);b.className='download-js-link';b.innerHTML='downloading...';b.style.display='none';document.body.appendChild(b);setTimeout(function(){b.click();document.body.removeChild(b);if(e===!0){setTimeout(function(){d.URL.revokeObjectURL(b.href)},250)}},66);return !0}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){a=a.replace(/^data:([\w\/\-\+]+)/,h);if(!window.open(a)){if(confirm('Displaying New Document\n\nUse Save As... to download, then click back to return to this page.')){location.href=a}}return !0}var c=document.createElement('iframe');document.body.appendChild(c);if(!e){a='data:'+a.replace(/^data:([\w\/\-\+]+)/,h)}c.src=a;setTimeout(function(){document.body.removeChild(c)},333)}if(navigator.msSaveBlob){return navigator.msSaveBlob(c,i)}if(d.URL){saver(d.URL.createObjectURL(c),!0)}else {if(typeof c==='string'||c.constructor===k){try{return saver('data:'+f+';base64,'+d.btoa(c))}catch(p){return saver('data:'+f+','+encodeURIComponent(c))}}l=new FileReader();l.onload=function(a){saver(this.result)};l.readAsDataURL(c)}return !0}}},0,0,0,0,0,0,[issuesPkgs.utils,'DownloadUtil'],0);Ext.cmd.derive('issuesPkgs.view.IssuesViewController',Ext.app.ViewController,{setNewIssueByExisting:function(){var a=this;var b=Ext.create('issuesPkgs.window.IssuesSelectorWindow',{rtl:a.getView().rtl,crudManager:a.getView().crudManager,originGrid:a.getView().down('issuesGrid')});b.show()},onRemoveAttendant:function(c){var e=this;var a=c.up('AttendeesGrid');a.body.mask(e.L('Loading'));var b=c.getWidgetRecord();var d=this.getView();d.crudManager.sendRemoveAttendant(b.data.Id).then(function(d){if(d.isError){}else {a.getStore().remove(b);a.body.unmask()}})},addNewIssue:function(b){var c=this;var a=c.getView().down('issuesGrid').getStore();a.add(b)},createNewIssueWindow:function(b,d,c){var a=this;var e={data:{}};var f=new Ext.Window({itemId:'addNewChildIssue',cls:'extjsWizardWrapper addNewChildIssue',width:600,height:500,resizable:!1,titleAlign:'center',closeAction:'destroy',header:!0,modal:!0,rtl:a.getView().rtl,items:[{xtype:'issueDetailsView',dock:'top',rtl:a.getView().rtl,itemId:'issueDetails',border:'0 0 50 0',height:'100%',crudManager:b,issue:e,stores:d,mi:c?a.getView().filterByRecord.data.Id:null,locale:a.getView().currentLocale,isNew:!0}]});f.show()},setNewIssue:function(c){var a=this;var b=a.getView().crudManager;var d=a.getView().down('issuesGrid').getController().stores;if(c){b.getIssueTypesByMeetingResponse(a.getView().filterByRecord.data.MeetingtypeId).then(function(e){d.issueTypeStore.filter(new Ext.util.Filter({id:'issueTypesByMeeting',filterFn:function(a){return e.issueTypesStore.filter(function(b){return a.data.value==b.Id}).length>0}}));a.createNewIssueWindow(b,d,c)})}else {a.createNewIssueWindow(b,d,c)}},signMeeting:function(){var b=this;var a=this.getView();a.mask(b.L('Signin'));this.getView().crudManager.sendSignMeeting().then(function(c){if(c.isError){}else {Ext.toast('Sign Successfully');b.getView().getViewModel().set('Signed',!0);a.unmask();a.filterByRecord.set('Signed',!0)}})},downloadPdf:function(){return this.getView().crudManager.getPdf()},downloadXls:function(){var b=this.view.up('window')!=null?this.view.up('window').title:'Export';b=b+'.csv';var c=[];Ext.each(this.getView().down('grid').columns,function(a,b){c.push(a)});var e=issuesPkgs.ux.exporter.Exporter.exportStore(this.getView().down('grid').getStore(),'csv',{columns:c});var a=document.createElement('a');a.style='display: none';var f=new Blob(['\ufeff'+e],{type:'text/csv;charset=utf-16'});var d=window.URL.createObjectURL(f);a.href=d;a.charset='utf-16';a.download=b;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(d)},100)},addHeaders:function(a){var b=this.getView();a.forEach(function(c){b.headerCt.add(c)})}},0,0,0,0,['controller.IssuesViewController'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'IssuesViewController'],0);Ext.cmd.derive('issuesPkgs.view.IssuesGridController',Ext.app.ViewController,{thisUserId:null,thisUserIsAdministrator:!1,stores:{},applyFilter:function(b,a,h){var e=this;var c=this.getViewModel();c.resetProgressFilters();var d=b=='area'?'area':a;if(typeof d==='boolean'){d=b}var f=this.view.store;if(!h){var g=new Ext.util.Filter({id:d,filterFn:function(f){var d=f.getData();if(b=='area'){if(a[d.AssetId]||a[d.SpotId]||a[d.ConstructId]){c.incrementProgressFilterCount(d.progress);return !0}}else {if(b=='responsibleUserId'){if(e.thisUserId&&(d.accountableUserId==e.thisUserId||d.responsibleUserId==e.thisUserId)){c.incrementProgressFilterCount(d.progress);return !0}}else {if(d[b]!=a){c.incrementProgressFilterCount(d.progress);return !0}}}}});f.filter(g)}else {f.removeFilter(d);c.getFirstLoadResetProgress()}},sendReminder:function(c,a){var b=c.getData();return this.view.crudManager.sendReminderToServer(b.id,b[a],a)},setToolbarDateLabel:function(c){if(this.getView().config.issuesMode=='byStage'){var e=this.view.store.filters.getRange();var b=e.filter(function(a){return a.getProperty()=='issueDueDate'});var a='';if(c===!1){a=this.view.up('issuesComponent').L('Alldates')}else {if(b.length==1){switch(c.getOperator()){case 'gt':a=this.view.L('After');break;case 'lt':a=this.view.L('Before');break;case 'eq':a=this.view.L('On');break;}a=a+' '+this.dateFormater(c.getValue())}else {a=b[0].getOperator()=='gt'?this.dateFormater(b[0].getValue()):this.dateFormater(b[1].getValue());a+=' - ';a+=b[0].getOperator()=='gt'?this.dateFormater(b[1].getValue()):this.dateFormater(b[0].getValue())}}var d=Ext.ComponentQuery.query('[itemId=dateRangeLabel]')[0];if(d){d.setText(a)}}},loadIrrelevantStore:function(c,a){var b=this;a.body.mask(this.view.L('Loading'));if(c){a.crudManager.fetchFromServer(b.crudParam,!0).then(function(e){var d=b.modifiyFieldsToFitModel(e.kanbanStore.taskStore);a.getStore().loadData(d);a.body.unmask()},function(b){a.body.unmask()})}else {a.crudManager.fetchFromServer(b.crudParam,!1).then(function(e){var d=b.modifiyFieldsToFitModel(e.kanbanStore.taskStore);a.getStore().loadData(d);a.body.unmask()},function(b){a.body.unmask()})}},dateFormater:function(b){var a=Ext.util.Format.dateRenderer();return a(b)},loadGridStore:function(e,d,g,f){var a=this;a.stores['userStore']=Ext.create('issuesPkgs.store.usersStore');var c=Ext.ComponentQuery.query('issuesPkgs-treepicker')[0].getStore();var b=this.view.up('issuesComponent');a.crudParam={id:b.filterByRecord!=null?b.filterByRecord.id:null,mode:b.queryMode,areaId:b.areaId,stageTypeId:b.stageTypeId};return e.fetchFromServer(a.crudParam,!1).then(function(b){a.thisUserId=b.userInfo;a.thisUserIsAdministrator=b.userIsAdministrator;c.setRoot({children:b.kanbanStore.constructStore});var h={};b.kanbanStore.taskStore.forEach(function(a){h[a.con]=!0;h[a.spo]=!0;h[a.ass]=!0});c.filterBy(function(a){var c=a.getData();if(h[c.value]){a.parentNode.set('someChildTrue',!0);return !0}else {a.parentNode.set('someChildFalse',!0);return !1}});if(c.getRange().length==0){Ext.ComponentQuery.query('issuesPkgs-treepicker')[0].setDisabled(!0)}c.getRootNode().cascadeBy(function(c){var a=c.getData();if(a.hasOwnProperty('someChildFalse')&&!a.hasOwnProperty('someChildTrue')){a.leaf=!0;c.set(a)}});var i=[];b.kanbanStore.resourceStore.forEach(function(a){i.push({name:a.n,url:a.iu,id:a.i})});a.stores['userStore'].loadData(i);a.stores['issueStatusStore']=Ext.create('Ext.data.Store');b.kanbanStore.issueStatusOptions.forEach(function(c){a.stores['issueStatusStore'].add({value:c.value,label:c.label})});a.stores['issueTagsStore']=Ext.create('Ext.data.Store');b.kanbanStore.issueTagOptions.forEach(function(c){a.stores['issueTagsStore'].add({value:c.value,label:c.label})});a.stores['issueTypeStore']=Ext.create('Ext.data.Store');b.kanbanStore.issueTypeOptions.forEach(function(c){a.stores['issueTypeStore'].add({value:c.value,label:c.label})});a.stores['workerStore']=Ext.create('Ext.data.Store');b.kanbanStore.workers.forEach(function(c){a.stores['workerStore'].add({value:c.value,label:c.label,fullPathUrl:c.fullPathUrl,userId:c.userId})});var j=a.modifiyFieldsToFitModel(b.kanbanStore.taskStore);d.loadData(j);if(a.getView().up('issuesComponent').queryMode=='byMeeting'){d.sort('sequence')}else {d.sort('issueDueDate')}return d})},modifiyFieldsToFitModel:function(c){var d=this;var a=this.getViewModel();a.resetProgressFilters();var b=[];c.forEach(function(e){b.push({id:e.i,AssetId:e.ass,SpotId:e.spo,ConstructId:e.con,name:e.n,title:Ext.isEmpty(e.ti)?e.it:e.ti,issueDueDate:e.dd!=null?new Date(e.dd):null,issueDueDateString:e.dds,issueRequestedDueDate:e.rdd!=null?new Date(e.rdd):null,subject:e.su,status:e.s,accountable:e.ac,accountableId:e.aci,accountableUserId:e.acui,responsible:e.res,responsibleId:e.resi,responsibleUserId:e.resui,description:e.de,progress:e.pro,issueComments:e.c,issueHistory:e.h,issueEvents:e.ke,issueSubTasks:e.st,meetingSubject:e.ms,issueType:e.it,issueTypeId:e.iti,tag:e.t,richDescription:e.rd,userId:e.kui,stores:d.stores,relatedIssue:e.ris,similarIssues:e.si,meetingSubjectIssues:e.msil,tasks:e.st,sequence:e.sq,events:e.ke,administrative:e.ad,irrelevant:e.ir,kind:e.ki,issueTypeType:e.itt,ownerId:e.ow});a.incrementProgressFilterCount(e.pro);a.setFirstLoadResetProgress()});return b}},0,0,0,0,['controller.IssuesGridController'],0,[issuesPkgs.view,'IssuesGridController'],0);Ext.cmd.derive('Ext.grid.filters.filter.SingleFilter',Ext.grid.filters.filter.Base,{constructor:function(d){var a=this,b,c;Ext.grid.filters.filter.Base.prototype.constructor.call(this,d);c=a.value;b=a.getStoreFilter();if(b){a.active=!0}else {if(a.grid.stateful&&a.getGridStore().saveStatefulFilters){c=undefined}a.active=a.getActiveState(d,c);b=a.createFilter({operator:a.operator,value:c});if(a.active){a.addStoreFilter(b)}}if(a.active){a.setColumnActive(!0)}a.filter=b},activate:function(a){if(a){this.activateMenu()}else {this.addStoreFilter(this.filter)}},deactivate:function(){this.removeStoreFilter(this.filter)},getValue:function(a){return a.getValue()},onFilterRemove:function(){if(!this.menu||this.active){this.active=!1}}},1,0,0,0,0,0,[Ext.grid.filters.filter,'SingleFilter'],0);Ext.cmd.derive('Ext.grid.filters.filter.List',Ext.grid.filters.filter.SingleFilter,{type:'list',operator:'in',itemDefaults:{checked:!1,hideOnClick:!1},idField:'id',labelField:'text',labelIndex:null,loadingText:'Loading...',loadOnShow:!0,single:!1,plain:!0,constructor:function(c){var a=this,b;Ext.grid.filters.filter.SingleFilter.prototype.constructor.call(this,c);a.labelIndex=a.labelIndex||a.column.dataIndex;if(!a.options&&a.value!=null&&a.active){b=a.getGridStore();if(!b.isEmptyStore){b.on(a.getGridStoreListeners())}a.grid.on('reconfigure',a.onReconfigure,a);a.inferOptionsFromGridStore=!0}},destroy:function(){var a=this,b=a.store,d=a.autoStore,c=a.gridStoreListeners;if(b){if(d||b.autoDestroy){b.destroy()}else {b.un('load',a.bindMenuStore,a)}a.store=null}if(a.inferOptionsFromGridStore){a.grid.un('reconfigure',a.onReconfigure,a)}if(c){a.getGridStore().un(c);a.gridStoreListeners=null}Ext.grid.filters.filter.SingleFilter.prototype.destroy.call(this)},activateMenu:function(){var f=this,d=f.filter.getValue(),c,a,e,b;if(!d||!d.length){return}c=f.menu.items;for(a=0,e=c.length;a<e;a++){b=c.getAt(a);if(Ext.Array.indexOf(d,b.value)>-1){b.setChecked(!0,!0)}}},bindMenuStore:function(b){var a=this;if(a.grid.destroyed||a.preventFilterRemoval){return}a.createListStore(b);a.createMenuItems(a.store);a.loaded=!0},createListStore:function(d){var a=this,e=a.store,l=d.isStore,j=a.idField,i=a.labelField,h=!1,c,g,f,k,b;if(l){if(d!==a.getGridStore()){h=!0;e=a.store=d}else {a.autoStore=!0;c=a.getOptionsFromStore(d)}}else {c=[];for(f=0,k=d.length;f<k;f++){b=d[f];switch(Ext.typeOf(b)){case 'array':c.push(b);break;case 'object':c.push(b);break;default:if(b!=null){g={};g[j]=b;g[i]=b;c.push(g)};}}}if(!h){if(e){e.destroy()}e=a.store=new Ext.data.Store({fields:[j,i],data:c});if(!a.gridStoreListeners){a.getGridStore().on(a.getGridStoreListeners())}a.loaded=!0}a.setStoreFilter(e)},createMenu:function(f){var a=this,c=a.getGridStore(),b=a.store,e=a.options,d;if(b){a.store=b=Ext.StoreManager.lookup(b)}Ext.grid.filters.filter.SingleFilter.prototype.createMenu.call(this,f);d=a.menu;if(b){if(!b.getCount()){d.add({text:a.loadingText,iconCls:'x-mask-msg-text'});d.on('show',a.show,a);b.on('load',a.bindMenuStore,a,{single:!0})}else {a.createMenuItems(b)}}else {if(e){a.bindMenuStore(e)}else {if(c.getCount()||c.isFiltered()){a.bindMenuStore(c)}else {c.on('load',a.bindMenuStore,a,{single:!0})}}}},createMenuItems:function(l){var a=this,b=a.menu,n=l.getCount(),o=Ext.Array.contains,j,h,g,m,f,k,c,i,d,p,e;if(n&&b){j={checkchange:a.onCheckChange,scope:a};h=a.getItemDefaults();b.suspendLayouts();b.removeAll(!0);m=a.single?Ext.id():null;k=a.idField;i=a.labelField;e=[];for(d=0;d<n;d++){g=l.getAt(d);f=g.get(k);c=g.get(i);if(c==null||o(e,f)){continue}e.push(c);p=b.add(Ext.apply({text:c,group:m,value:f,listeners:j},h))}b.resumeLayouts(!0)}},getFilterConfig:function(a,b){a.value=a.value||[];return Ext.grid.filters.filter.SingleFilter.prototype.getFilterConfig.call(this,a,b)},getGridStoreListeners:function(){var a=this;return a.gridStoreListeners={scope:a,add:a.onDataChanged,refresh:a.onDataChanged,remove:a.onDataChanged,update:a.onDataChanged}},getOptionsFromStore:function(f){var k=this,g=f.getData(),i={},j=[],m=k.dataIndex,l=k.labelIndex,e,c,h,d,a,b;if(f.isFiltered()&&!f.remoteFilter){g=g.getSource()}e=g.items;h=e.length;for(c=0;c<h;++c){d=e[c].data;a=d[m];b=d[l];if(b===undefined){b=a}if(!i[a]){i[a]=1;j.push([a,b])}}return j},onCheckChange:function(){var a=this,b=a.updateBuffer;if(b){a.task.delay(b,null,null)}else {a.setValue()}},onDataChanged:function(a){if(!this.preventDefault){this.bindMenuStore(a)}},onReconfigure:function(b,a){if(a){this.bindMenuStore(a)}},setStoreFilter:function(d){var a=this,b=a.value,c=a.filter;if(b){if(!Ext.isArray(b)){b=[b]}c.setValue(b)}if(a.active){a.preventFilterRemoval=!0;a.addStoreFilter(c);a.preventFilterRemoval=!1}},setValue:function(){var a=this,f=a.menu.items,e=[],c,b,d;a.preventDefault=!0;for(c=0,b=f.length;c<b;c++){d=f.getAt(c);if(d.checked){e.push(d.value)}}a.filter.setValue(e);b=e.length;if(b&&a.active){a.updateStoreFilter()}else {a.setActive(!!b)}a.preventDefault=!1},show:function(){var a=this.store;if(this.loadOnShow&&!this.loaded&&!a.hasPendingLoad()){a.load()}}},1,0,0,0,['grid.filter.list'],0,[Ext.grid.filters.filter,'List'],0);Ext.cmd.derive('issuesPkgs.filter.ListNoEmpties',Ext.grid.filters.filter.List,{type:'listNoEmpties',getOptionsFromStore:function(f){var k=this,g=f.getData(),i={},j=[],m=k.dataIndex,l=k.labelIndex,e,c,h,d,a,b;if(f.isFiltered()&&!f.remoteFilter){g=g.getSource()}e=g.items;h=e.length;for(c=0;c<h;++c){d=e[c].data;a=d[m];b=d[l];if(b===undefined){b=a}if(!i[a]&&!Ext.isEmpty(a)){i[a]=1;j.push([a,b])}}return j}},0,0,0,0,['grid.filter.listNoEmpties'],0,[issuesPkgs.filter,'ListNoEmpties'],0);Ext.cmd.derive('Ext.grid.plugin.DragDrop',Ext.plugin.Abstract,{dragText:'{0} selected row{1}',ddGroup:'GridDD',enableDrop:!0,enableDrag:!0,containerScroll:!1,init:function(a){Ext.applyIf(a,{copy:this.copy,allowCopy:this.allowCopy});a.on('render',this.onViewRender,this,{single:!0})},destroy:function(){var a=this;a.dragZone=a.dropZone=Ext.destroy(a.dragZone,a.dropZone);Ext.plugin.Abstract.prototype.destroy.call(this)},enable:function(){var a=this;if(a.dragZone){a.dragZone.unlock()}if(a.dropZone){a.dropZone.unlock()}(arguments.callee.$previous||Ext.plugin.Abstract.prototype.enable).call(this)},disable:function(){var a=this;if(a.dragZone){a.dragZone.lock()}if(a.dropZone){a.dropZone.lock()}(arguments.callee.$previous||Ext.plugin.Abstract.prototype.disable).call(this)},onViewRender:function(b){var a=this,d=b.ownerCt.ownerGrid||b.ownerCt,c;d.relayEvents(b,['beforedrop','drop']);if(a.enableDrag){if(a.containerScroll){c=b.getEl()}a.dragZone=new Ext.view.DragZone(Ext.apply({view:b,ddGroup:a.dragGroup||a.ddGroup,dragText:a.dragText,containerScroll:a.containerScroll,scrollEl:c},a.dragZone))}if(a.enableDrop){a.dropZone=new Ext.grid.ViewDropZone(Ext.apply({view:b,ddGroup:a.dropGroup||a.ddGroup},a.dropZone))}}},0,0,0,0,['plugin.gridviewdragdrop'],0,[Ext.grid.plugin,'DragDrop'],0);Ext.cmd.derive('issuesPkgs.view.IssuesGrid',Ext.grid.Panel,{cls:'issuesComponent',controller:'IssuesGridController',layout:'fit',bodyCls:'issuesGrid',viewConfig:{getRowClass:function(b){var a='';switch(b.get('progress')){case 'Late':a='late-row';break;case 'On Time':a='OnTime-row';break;case 'Due':a='Due-row';break;case 'Done':a='Done-row';break;}if(b.get('irrelevant')){a='Irrelevant-row'}return a},plugins:{ptype:'gridviewdragdrop',dragText:'Drag and drop to reorganize'}},issuesMode:'default',crudManager:null,initComponent:function(){var a=this;Ext.apply(a,{contextMenu:Ext.create('Ext.menu.Menu',{rtl:a.up('issuesComponent').rtl,setCurrentItems:function(b){var c=a.up('issuesComponent').getViewModel().get('Signed');this.removeAll();this.add(a.getMeetingMenu());if(b.data.responsibleId){this.add({text:a.L('SendReminderTo')+' '+b.data.responsible,roleField:'responsibleId',disabled:c})}if(b.data.accountableId&&b.data.accountableId!=b.data.responsibleId){this.add({text:a.L('EscalateToAccuountable')+' '+b.data.accountable,roleField:'accountableId',disabled:c})}this.add({text:a.L('SendReminderAtProjectLevel'),roleField:'projectId',disabled:c});this.currentRecord=b},defaults:{handler:function(a){var b=Ext.ComponentQuery.query('issuesGrid')[0];b.getController().sendReminder(a.up().currentRecord,a.roleField).then(function(c){if(c.isError){Ext.toast(c.message)}else {Ext.toast(b.L('SendSuccessfully'))}})}},currentRecord:null}),emptyText:this.L('NoRecordsFound'),plugins:[{ptype:'gridfilters',menuFilterText:this.L('filter')}],enableColumnMove:!1,border:!0,store:Ext.create('issuesPkgs.store.viewIssuesStore'),features:[{id:'group',ftype:'groupingsummary',groupHeaderTpl:'{columnName}:  {name}',enableGroupingMenu:!0}],columns:[{flex:1,text:'#',dataIndex:'name',sortable:!0,filter:{type:'string',emptyText:this.L('EnterText')}},{flex:2,text:this.L('Title'),dataIndex:'title',sortable:!0,filter:{type:'string',emptyText:this.L('EnterText')}},{flex:4,text:this.L('Description'),dataIndex:'description',sortable:!0,filter:{type:'string',emptyText:this.L('EnterText')}},{flex:2,text:this.L('Responsible'),dataIndex:'responsible',sortable:!0,filter:{type:'list'}},{flex:2,text:this.L('Accountable'),dataIndex:'accountable',sortable:!0,filter:{type:'list'},summaryType:'count',summaryRenderer:function(a,b,c){return a+' '+this.L('issues')}},{flex:3,text:this.L('DueDate'),dataIndex:'issueDueDate',sortable:!0,filter:{type:'customDate',fields:{gt:{text:this.L('After')},lt:{text:this.L('Before')},eq:{text:this.L('On')},week:{text:'week'}}},renderer:Ext.util.Format.dateRenderer('m-d-Y')},{flex:2,text:this.L('Kind'),dataIndex:'kind',sortable:!0,filter:{type:'listNoEmpties'}}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},getMeetingMenu:function(){var a=this;if(a.config.issuesMode=='byMeeting'){var b=a.up('issuesComponent').getViewModel().get('Signed');var c=[{text:a.L('IrrelevantIssue'),handler:function(c){var b=c.up().currentRecord;a.mask('Loading');a.crudManager.setIssueIrrelevant(b.data.id).then(function(d){if(!d.isError){a.getStore().remove(b)}a.unmask()})},disabled:b},{text:a.L('IssueEnded'),handler:function(c){var d=c.up().currentRecord;a.mask('Loading');var b=a.up('issuesComponent').filterByRecord;a.crudManager.setIssueEnded(b.data.Id,d.data.id).then(function(b){if(!b.isError){}a.unmask()})},disabled:b},{text:a.L('IssueNotRelated'),handler:function(d){var b=d.up().currentRecord;a.mask('Loading');var c=a.up('issuesComponent').filterByRecord;a.crudManager.setIssueNotRelated(c.data.Id,b.data.id).then(function(c){if(!c.isError){a.getStore().remove(b)}a.unmask()})},disabled:b},{xtype:'menuseparator'}];return c}else {return}},constructor:function(b){var a=this;a.issuesMode=b.issuesMode||a.issuesMode;a.areaId=b.areaId;a.stageTypeId=b.stageTypeId;Ext.grid.Panel.prototype.constructor.apply(this,arguments)},listeners:{render:function(a){a.mask(a.L('Loading'));var b=a.config.crudManager;this.getController().loadGridStore(b,this.store).then(function(c){var b=Ext.ComponentQuery.query('issuesGrid')[0];b.unmask()})},filterchange:function(d,b,c){var a=b.find(function(a){return a.getProperty()=='issueDueDate'});if(b.length==0){this.getController().setToolbarDateLabel(!1)}if(a){this.getController().setToolbarDateLabel(a)}},beforeitemcontextmenu:function(b,a,e,d,c){c.stopEvent();if(!a.get('irrelevant')){b.up().contextMenu.setCurrentItems(a);b.up().contextMenu.showAt(c.getXY())}},celldblclick:function(c,g,h,b,k,i,j){if(!b.get('irrelevant')){var a=this;var f=b;var e=a.config.issuesMode=='byMeeting'?a.up('issuesComponent').getViewModel().get('Signed'):!1;var d=new Ext.Window({itemId:'issueEditorWindow',cls:'issueEditorWindow extjsWizardWrapper',width:750,height:800,resizable:!1,style:{top:'5%'},title:a.L('IssueDetails'),rtl:a.isLocalRtl(),titleAlign:'center',header:!0,modal:!0,items:[{xtype:'issueEditorView',clientInstance:window.client,recordId:b.id,isMeetingSigned:e,issue:f,currentLocal:c.up().crudManager.externalConfig.currentLocal,projectId:c.up().crudManager.externalConfig.projectId}]});d.show();window.onresize=function(){d.center()}}},beforedrop:function(h,a,e,c){var b=e.get('sequence');var d=a.records[0];var f=a.records[0].get('sequence');var g=a.view.grid.getStore().queryBy(function(d){return d.data.sequence>=b}).getRange().forEach(function(b){var d=c=='after'?b.get('sequence')-1:b.get('sequence')+1;b.set('sequence',d)});d.set('sequence',b)}}},1,['issuesGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','issuesGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'issuesGrid':!0},['widget.issuesGrid'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'IssuesGrid'],0);Ext.cmd.derive('issuesPkgs.view.TreePicker',Ext.form.field.Picker,{disabledCls:'x-tree-checkbox-checked-disabled',triggerCls:'x-form-arrow-trigger',config:{store:null,matchFieldWidth:!1,grow:!0,displayField:null,columns:null,selectOnTab:!0,maxPickerHeight:300,minPickerHeight:100},editable:!1,initComponent:function(){var a=this;Ext.form.field.Picker.prototype.initComponent.apply(this,arguments);a.mon(a.store,{scope:a,load:a.onLoad,update:a.onUpdate})},createPicker:function(){var a=this,b=new Ext.tree.Panel({store:a.store,scrollable:!0,floating:!0,grow:!0,displayField:a.displayField,minHeight:a.minPickerHeight,height:a.maxPickerHeight,width:300,resizable:!0,manageHeight:!1,rootVisible:!1,selModel:{selType:'checkboxmodel',mode:'MULTI',checkOnly:!0},shadow:!0,listeners:{scope:a,itemclick:a.onItemClick,select:function(c,b){b.expand();b.cascadeBy(function(a){c.select(a,!0,!0)});a.checkTriState(c,b);a.notifyView(!0)},deselect:function(b,c){c.cascadeBy(function(a){b.deselect(a,!0)});a.checkTriState(b,c);a.notifyView(!1,b)}},viewConfig:{listeners:{scope:a,render:a.onViewRender}}}),c=b.getView();if(Ext.isIE9&&Ext.isStrict){c.on({scope:a,highlightitem:a.repaintPickerView,unhighlightitem:a.repaintPickerView,afteritemexpand:a.repaintPickerView,afteritemcollapse:a.repaintPickerView})}return b},onViewRender:function(a){a.getEl().on('keypress',this.onPickerKeypress,this)},repaintPickerView:function(){var a=this.picker.getView().getEl().dom.style;a.display=a.display},notifyView:function(c,b){if(c){var a=this.up('panel').getViewModel();a.set('NoAreaFiltersApplied',!1)}else {if(b.getSelection().length==0){var a=this.up('panel').getViewModel();a.set('NoAreaFiltersApplied',!0);this.unSelectAll()}}},onItemClick:function(h,d,g,f,i){var e=this;var a=this.up('panel').down('grid').getController();var c=e.getPicker().getSelection();var b={};c.forEach(function(a){b[a.data.value]=!0});if(c.length>0){a.applyFilter('area',b,!1);this.selectItem(d)}else {a.applyFilter('area',[],!0)}},unSelectAll:function(){var a=this;a.setRawValue('');a.getPicker().setSelection(null);a.getPicker().collapseAll();var b=this.up('panel').down('grid').getController();b.applyFilter('area',[],!0)},checkTriState:function(b,a){var d=this;if(!a.parentNode.isRoot()&&!b.isSelected(a.parentNode)){var c=a.parentNode.childNodes;if(c.every(function(c){return b.isSelected(c)})){a.parentNode.set('cls','');b.select(a.parentNode,!0,!0)}else {if(c.some(function(c){return b.isSelected(c)})){a.parentNode.set('cls',d.disabledCls);b.deselect(a.parentNode)}else {a.parentNode.set('cls','')}}}},onPickerKeypress:function(a,c){var b=a.getKey();if(b===a.ENTER||b===a.TAB&&this.selectOnTab){this.selectItem(this.picker.getSelectionModel().getSelection()[0])}},selectItem:function(b){var a=this;a.setValue(b.getId());a.fireEvent('select',a,b)},onExpand:function(){var d=this,e=d.picker,b=e.store,c=d.value,a;if(c){a=b.getNodeById(c)}if(!a){a=b.getRoot()}},setValue:function(c){var a=this,b;var e=a.getPicker().getSelection();a.value=[];if(a.store.loading){return a}b=c?a.store.getNodeById(c):a.store.getRoot();if(c===undefined){b=a.store.getRoot();a.value=b.getId()}else {b=a.store.getNodeById(c)}var d='';e.forEach(function(b,f){a.value.push(b.getId());d+=b.getData().text;d+=f==e.length-1?'':', '});a.setRawValue(this.L('AreaFilterExist'));return a},getSubmitValue:function(){return this.value},getValue:function(){return this.value},onLoad:function(){var a=this.value;if(a){this.setValue(a)}},onUpdate:function(e,c,d,a){var b=this.displayField;if(d==='edit'&&a&&Ext.Array.contains(a,b)&&this.value===c.getId()){this.setRawValue(c.get(b))}}},0,['issuesPkgs-treepicker'],['component','box','field','textfield','pickerfield','issuesPkgs-treepicker'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'issuesPkgs-treepicker':!0},['widget.issuesPkgs-treepicker'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'TreePicker'],0);Ext.cmd.derive('issuesPkgs.store.AreaTreeStore',Ext.data.TreeStore,{},0,0,0,0,0,0,[issuesPkgs.store,'AreaTreeStore'],0);Ext.cmd.derive('issuesPkgs.view.IssuesViewModel',Ext.app.ViewModel,{data:{LateCount:0,DueCount:0,OnTimeCount:0,DoneCount:0,FirstLoadLateCount:0,FirstLoadDueCount:0,FirstLoadOnTimeCount:0,FirstLoadDoneCount:0,NoAreaFiltersApplied:!0,Signed:!1,filters:{}},filtersInitValues:{responsibleUserId:!1,administrative:!1,irrelevant:!1,doneFilter:!0,onTimeFilter:!0,dueFilter:!0,lateFilter:!0},formulas:{disableFilterButton:{bind:{irrelevant:'{filters.irrelevant}',administrative:'{filters.administrative}',responsibleUserId:'{filters.responsibleUserId}',doneFilter:'{filters.doneFilter}',onTimeFilter:'{filters.onTimeFilter}',dueFilter:'{filters.dueFilter}',lateFilter:'{filters.lateFilter}'},get:function(a){return !(a.irrelevant||a.responsibleUserId||a.administrative||(!a.doneFilter||!a.onTimeFilter||!a.dueFilter||!a.lateFilter))}}},resetProgressFilters:function(){this.set('LateCount',0);this.set('DueCount',0);this.set('OnTimeCount',0);this.set('DoneCount',0)},getFirstLoadResetProgress:function(){this.set('LateCount',this.get('FirstLoadLateCount'));this.set('DueCount',this.get('FirstLoadDueCount'));this.set('OnTimeCount',this.get('FirstLoadOnTimeCount'));this.set('DoneCount',this.get('FirstLoadDoneCount'))},setFirstLoadResetProgress:function(){this.set('FirstLoadLateCount',this.get('LateCount'));this.set('FirstLoadDueCount',this.get('DueCount'));this.set('FirstLoadOnTimeCount',this.get('OnTimeCount'));this.set('FirstLoadDoneCount',this.get('DoneCount'))},incrementProgressFilterCount:function(c,b){var a=b||1;switch(c){case 'Late':this.set('LateCount',this.data.LateCount+a);break;case 'Due':this.set('DueCount',this.data.DueCount+a);break;case 'On Time':this.set('OnTimeCount',this.data.OnTimeCount+a);break;case 'Done':this.set('DoneCount',this.data.DoneCount+a);break;}}},0,0,0,0,['viewmodel.IssuesViewModel'],0,[issuesPkgs.view,'IssuesViewModel'],0);Ext.cmd.derive('issuesPkgs.window.SendWindow',Ext.Window,{cls:'extjsWizardWrapper',layout:'border',alwaysOnTop:!0,closeAction:'hide',modal:!0,bodyStyle:{background:'#ffffff',padding:'10px'},crudManager:null,initComponent:function(){var a=this;Ext.apply(a,{title:a.L('SendIssues'),buttons:[{xtype:'button',text:a.L('Send'),cls:'submitButton',handler:function(c){var a=c.up('window');a.mask(a.L('Sending'));var b={subject:a.down('#subjectTextField').getValue(),emailBody:a.down('#bodyField').getValue(),isEmailBodyHTML:!0,sendCcToSender:!1,passowrdRequired:!1,toEmails:a.down('#toTagField').getValue(),ccEmails:a.down('#ccTagField').getValue(),bccEmails:a.down('#bccTagField').getValue()};a.crudManager.sendSummeryEmail(b).then(function(b){Ext.toast(a.L('SendSuccessfully'));a.unmask();a.close()})}},{xtype:'button',text:a.L('Cancel'),cls:'closeButton',handler:function(a){a.up('window').close()}}],items:[{xtype:'panel',header:!1,itemId:'northPanel',region:'north',width:'100%',layout:{type:'vbox',align:'stretch'},defaultType:'textfield',defaults:{labelWidth:55},items:[{fieldLabel:a.L('From'),value:window.screenConfig.userEmail,readOnly:!0,itemId:'fromTextField'},{fieldLabel:a.L('Subject'),itemId:'subjectTextField'}]},{xtype:'panel',header:!1,itemId:'centerPanel',region:'center',layout:'fit',width:a.width,items:[{xtype:'htmleditor',rtl:a.rtl,itemId:'bodyField',createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=='http://'){var b=this.getDoc().getSelection().getRangeAt(0);this.relayCmd('InsertHTML','<a onClick="window.open(\''+a+'\')" href="'+a+'">'+b.startContainer.data.substring(b.startOffset,b.endOffset)+'</a>')}}}]}]});Ext.window.Window.prototype.initComponent.apply(this,arguments)},resizable:!1,width:900,height:560,listeners:{afterrender:function(a){a.mask(a.L('Loading')),a.crudManager.getWorkersStore().then(function(d){if(d.isError){}else {var b=Ext.create('Ext.data.Store',{fileds:[{name:'n',type:'string'},{name:'e',type:'string'},{name:'i',type:'string'}]});b.loadData(d.store);var c=[];b.getRange().forEach(function(e){var b=a.attendeesStore.getById(e.data.i);if(b){c.push(e.data.e);b.set('doNotRemove',!0);a.attendeesStore.remove(b)}});a.attendeesStore.getRange().forEach(function(f){var e=b.add(f.getData())[0];e.set('doNotRemove',!0);c.push(e.data.e)});a.down('#northPanel').insert(1,[{xtype:'tagfield',itemId:'toTagField',fieldLabel:a.L('To'),store:b,displayField:'n',valueField:'e',queryMode:'local',filterPickList:!0,listeners:{beforedeselect:function(c,b,f,e){if(b.data.doNotRemove){return !1}}}},{xtype:'tagfield',itemId:'ccTagField',fieldLabel:a.L('CC'),store:b,displayField:'n',valueField:'e',queryMode:'local',filterPickList:!0},{xtype:'tagfield',itemId:'bccTagField',fieldLabel:a.L('Bcc'),store:b,displayField:'n',valueField:'e',queryMode:'local',filterPickList:!0}]);a.down('#toTagField').setValue(c);a.unmask()}})}},constructor:function(b){var a=this;a.attendeesStore=Ext.create('Ext.data.Store');a.attendeesStore.loadData(b.attendeesStore.getRange());a.rtl=b.rtl;a.crudManager=b.crudManager;Ext.window.Window.prototype.constructor.apply(this,arguments)}},1,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.window,'SendWindow'],0);Ext.cmd.derive('issuesPkgs.view.IssuesView',Ext.panel.Panel,{bodyCls:'issuesComponent',cls:'issuesComponent extjsWizardWrapper',itemId:'mainIssuePanel',viewModel:'IssuesViewModel',controller:'IssuesViewController',width:'100%',crudManager:null,layout:'border',queryMode:'default',renderMode:'asWindow',filterByRecord:null,listeners:{afterrender:function(a,b){a.adjustAccordingToMode()},beforedestroy:function(a,b){if(a.editorChangesTimer!=null){a.sendEditorData();clearTimeout(a.editorChangesTimer)}}},adjustAccordingToMode:function(){var a=this;if(a.renderMode=='asWindow'){a.setHeight(a.up().getHeight()-45);var b='';if(a.filterByRecord){b=a.filterByRecord.getData().Name}var c=a.up();c.setTitle(c.title+' - '+b)}else {a.setHeight($(document).height()-60)}if(a.queryMode=='byMeeting'){a.getViewModel().set('Signed',a.filterByRecord.getData().Signed);a.dockedItems.items[0].insert(5,[{xtype:'tbfill'},{xtype:'button',text:a.L('NewIssue'),bind:{disabled:'{Signed}'},menu:{xtype:'menu',items:[{text:a.L('NewIssue'),handler:function(){a.getController().setNewIssue(!0)}},{text:a.L('ExistingIssue'),handler:function(){a.getController().setNewIssueByExisting()}}]}},{xtype:'button',text:a.L('Sign'),bind:{disabled:'{Signed}'},handler:function(b){var a=b.up('panel');a.getController().signMeeting()}},{xtype:'button',text:a.L('Send'),handler:function(){var b=Ext.create('issuesPkgs.window.SendWindow',{rtl:a.rtl,crudManager:a.crudManager,attendeesStore:a.down('AttendeesGrid').getStore()});b.show()},bind:{disabled:'{!Signed}'}},{xtype:'button',text:a.L('Invite'),handler:function(){a.mask(a.L('Inviting'));a.crudManager.inviteInvitees().then(function(b){a.unmask()})},bind:{disabled:'{Signed}'}},{xtype:'button',text:'PDF',handler:function(){a.mask(a.L('Loading'));a.getController().downloadPdf().then(function(b){window.open(b.url);a.unmask()})},bind:{disabled:'{!Signed}'}}]);this.query('[itemId=exportButton]')[0].setHidden(!0);this.query('[itemId=newButton]')[0].setHidden(!0);this.down('[itemId=centerPanel]').insert(0,[{region:'north',title:a.L('Description'),xtype:'fieldset',margin:2,collapseDirection:'top',collapsible:!0,layout:'fit',split:!0,items:[{xtype:'htmleditor',value:a.filterByRecord.data.ReachDescription,itemId:'descriptionEditor',createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=='http://'){var b=this.getDoc().getSelection().getRangeAt(0);this.relayCmd('InsertHTML','<a onClick="window.open(\''+a+'\')" href="'+a+'">'+b.startContainer.data.substring(b.startOffset,b.endOffset)+'</a>')}},rtl:a.rtl,bind:{disabled:'{Signed}'},listeners:{change:function(e,b,c,d){a.setEditorChangeTimer()}}}]}]);this.down('[itemId=progressFilterPanel]').insert(0,{xtype:'panel',autoScroll:!0,split:!0,title:a.L('Attendees'),region:'north',height:220,header:{titlePosition:0,items:[{xtype:'button',style:'background-color: #58a4f5 !important',text:a.L('Add'),bind:{disabled:'{Signed}'},handler:function(){var b=Ext.create('issuesPkgs.window.NewAttendant',{crudManager:a.crudManager,meeting:a.filterByRecord,rtl:a.rtl});b.show()}}]},items:[{xtype:'AttendeesGrid',bind:{disabled:'{Signed}'}}]})}},editorChangesTimer:null,setEditorChangeTimer:function(){var a=this;if(a.editorChangesTimer){clearTimeout(a.editorChangesTimer)}a.editorChangesTimer=Ext.Function.defer(function(){a.sendEditorData()},3500)},sendEditorData:function(){var a=this;var b=a.down('#descriptionEditor').getValue();a.filterByRecord.set('ReachDescription',b);a.crudManager.syncMeetingDescription(b).then(function(b){a.editorChangesTimer=null})},loadFiltersInitialValues:function(){var a=this.getViewModel();a.set('filters',Object.assign({},a.filtersInitValues))},initComponent:function(){var a=this;a.loadFiltersInitialValues();Ext.apply(a,{dockedItems:[{xtype:'toolbar',dock:'top',itemId:'topToolbar',style:{background:'#f0f3f7'},items:[{xtype:'issuesPkgs-treepicker',displayField:'text',queryMode:'local',width:171,hidden:a.queryMode=='byStage',emptyText:this.L('NoAreaFilters'),store:Ext.create('issuesPkgs.store.AreaTreeStore',{})},{xtype:'button',hidden:a.queryMode=='byStage',text:this.L('Clear'),bind:{disabled:'{NoAreaFiltersApplied}'},handler:function(a){var b=a.previousNode();b.unSelectAll()}},{xtype:'tbspacer',hidden:a.queryMode=='byStage',width:10},{xtype:'button',text:this.L('Filters'),menu:{xtype:'menu',defaults:{xtype:'menucheckitem',publishes:'checked',listeners:{checkchange:function(c,b,e){var a=Ext.ComponentQuery.query('issuesGrid')[0];var f=a.up().viewModel;if(c.menuRole=='Progress'){var d=Ext.ComponentQuery.query('[itemId=progressFilterPanel]')[0];if(b){d.expand()}else {d.collapse()}}else {if(c.menuRole=='irrelevant'){a.getController().loadIrrelevantStore(b,a)}else {var a=Ext.ComponentQuery.query('issuesGrid')[0];a.getController().applyFilter(c.menuRole,!1,!b)}}c.publishState('checked',b)}}},items:[{text:this.L('Irrelevant'),menuRole:'irrelevant',bind:{checked:'{filters.irrelevant}'}},{text:this.L('Administrative'),menuRole:'administrative',bind:{checked:'{filters.administrative}'}},{text:this.L('FilterByMe'),menuRole:'responsibleUserId',bind:{checked:'{filters.responsibleUserId}'}}]}},{xtype:'button',tooltip:this.L('clearFilter'),iconCls:'fa fa-ban icon-attention',bind:{disabled:'{disableFilterButton}'},handler:function(a){a.up('issuesComponent').loadFiltersInitialValues()}},{xtype:'button',itemId:'exportButton',text:this.L('Export'),listeners:{click:'downloadXls'}},{xtype:'button',itemId:'newButton',text:this.L('NEW'),handler:function(){a.getController().setNewIssue(!1)}},{xtype:'tbfill'},{xtype:'label',text:this.L('Alldates'),itemId:'dateRangeLabel'}]}],items:[{xtype:'panel',region:'west',collapsible:!0,bodyStyle:'background:#f0f3f7;padding:2px;',minSize:100,width:220,maxSize:450,split:!0,itemId:'progressFilterPanel',listeners:{resize:function(){this.updateLayout()}},items:[{xtype:'panel',title:this.L('progressFilters'),bodyStyle:'background:#f0f3f7',height:240,region:'center',autoScroll:!0,defaultType:'checkboxfield',reference:'filterPanel',defaults:{handler:function(b,c){var a=this.nextNode('issuesGrid').getController();a.applyFilter('progress',b.filterValue,c)}},items:[{filterValue:'Late',style:{color:'#900',fontWeight:'bold'},bind:{boxLabel:this.L('Late')+' ({LateCount})',value:'{filters.lateFilter}'}},{filterValue:'Due',style:{color:'#ff7514',fontWeight:'bold'},bind:{boxLabel:this.L('Due')+' ({DueCount})',value:'{filters.dueFilter}'}},{filterValue:'On Time',style:{color:'#278cf4',fontWeight:'bold'},bind:{boxLabel:this.L('OnTime')+' ({OnTimeCount})',value:'{filters.onTimeFilter}'}},{filterValue:'Done',style:{color:'#128104',fontWeight:'bold'},bind:{boxLabel:this.L('Done')+' ({DoneCount})',value:'{filters.doneFilter}'}}]}]},{xtype:'panel',header:!1,itemId:'centerPanel',region:'center',layout:'border',items:[{xtype:'issuesGrid',crudManager:a.crudManager,issuesMode:a.queryMode,header:!1,region:'center',scrollable:'vertical',rtl:a.rtl,collapsible:!1,split:!0,areaId:a.areaId,stageId:a.stageId}]}]});Ext.on('resize',function(c,b){a.setSize(c-45,b)});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.filterByRecord=b.record;a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';a.queryMode=b.queryMode;a.renderMode=b.renderMode!=null?b.renderMode:a.renderMode;a.areaId=b.areaId;a.stageTypeId=b.stageTypeId;issuesPkgs.locale[a.currentLocale].apply();a.crudManager=Ext.create('issuesPkgs.store.CrudManager');a.crudManager.setExternalConfig({client:b.clientInstance,projectId:b.projectId,filterByRecord:b.record,currentLocal:a.currentLocale});Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['issuesComponent'],['component','box','container','panel','issuesComponent'],{'component':!0,'box':!0,'container':!0,'panel':!0,'issuesComponent':!0},['widget.issuesComponent'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'IssuesView'],0);Ext.cmd.derive('CGA.plugin.TaskContextMenu',Gnt.plugin.TaskContextMenu,{crudManager:!1,triggerEvent:['rowcontextmenu','containercontextmenu'],activateMenu:function(a,b){if(this.grid.isReadOnly()||this.grid.taskStore.getRootNode()===a){return}var c=!1;if(a&&a.get('isReadOnly')==!0){c=!0}b.stopEvent();this.rec=a;this.triggerEventXY=b.getXY();this.configureMenuItems(b,c);this.showAt(b.getXY());this.focus()},deleteTask:function(){this.grid.getTaskStore().removeTasks(this.grid.getSelectedRows())},createMenuItems:function(){var a=this;var e=[{text:this.L('moreInfo'),requiresTask:!0,isValidAction:function(a){return a.data.isMilestone!==!0&&(a.data.isBuildingGroup||!a.data.isBuildingGroup&&a.data.leaf)},handler:this.openMoreInfo},{text:this.L('changeTaskColor'),requiresTask:!0,isColorMenu:!0,menu:{showSeparator:!1,items:[Ext.create('Ext.ColorPalette',{allowReselect:!0,listeners:{select:function(b,a){this.rec.beginEdit();this.rec.set('Color',a);this.rec.endEdit();this.hide()},scope:this}})]},isValidAction:function(b){return !a.isReadOnly(b)&&b.data.isVirtual!=!0&&b.data.isMilestone}},{handler:this.openIssues,requiresTask:!0,text:this.L('openIssues'),isValidAction:function(b){var a=this.grid.getSelectedRows();if(a.length!=1){return !1}else {return !0}}},{handler:this.bulkOperations,requiresTask:!0,itemId:'bulkOperations',text:this.L('bulkOperations'),isValidAction:function(c){var b=this.grid.getSelectedRows();return b.every(function(b){return !a.isReadOnly(b)&&b.data.isVirtual!=!0&&b.data.leaf==!0})}},{handler:this.deleteTask,requiresTask:!0,itemId:'deleteTask',text:this.L('deleteTask'),isValidAction:function(b){return !a.isReadOnly(b)&&b.data.isVirtual!=!0}},{text:this.L('add'),itemId:'addTaskMenu',menu:{plain:!0,defaults:{scope:this},items:[{handler:this.addTaskAboveAction,requiresTask:!0,itemId:'addTaskAbove',text:this.L('addTaskAbove'),isValidAction:function(a){return this.validateMenus('addTaskAbove',a)}},{handler:this.addTaskBelowAction,requiresTask:!0,itemId:'addTaskBelow',text:this.L('addTaskBelow'),isValidAction:function(a){return this.validateMenus('addTaskBelow',a)}},{handler:this.addSubtaskMenu,requiresTask:!0,itemId:'addSubtask',text:this.L('addSubtask'),isValidAction:function(a){return this.validateMenus('addSubtask',a)}},{handler:this.addSuccessor,requiresTask:!0,itemId:'addSuccessor',text:this.L('addSuccessor'),isValidAction:function(a){return this.validateMenus('addSuccessor',a)}},{handler:this.addPredecessor,requiresTask:!0,itemId:'addPredecessor',text:this.L('addPredecessor'),isValidAction:function(a){return this.validateMenus('addPredecessor',a)}}]}},{text:this.L('deleteDependency'),requiresTask:!0,itemId:'deleteDependencyMenu',isValidAction:function(b){return b&&!a.isReadOnly(b)&&b.getPredecessors().length>0},menu:{plain:!0,listeners:{beforeshow:this.populateDependencyMenu,mouseover:this.onDependencyMouseOver,mouseleave:this.onDependencyMouseOut,scope:this}}},{handler:this.hideTask,requiresTask:!0,itemId:'hideTask',text:this.L('hideTask'),isValidAction:function(c){var b=this.grid.getSelectedRows();return b.every(function(b){return !a.isReadOnly(b)&&b.data.isVirtual!=!0&&b.data.leaf==!0})}},{handler:this.releaseTaskLock,text:this.L('releaseLock'),requiresTask:!0,itemId:'releaseLock',isValidAction:function(b){return b&&!a.isReadOnly(b)&&!b.data.isBuildingGroup&&b.data.leaf&&b.data.isMilestone!==!0&&b.data.IsLocked==!0}}];var b=[];var d=['addPredecessor','addSubtask','addTaskBelow','addTaskAbove','addTaskBelow','addSuccessor'];var c=[];if(this.isResearchMode()){b=b.concat(d)}e.forEach(function(a){if(b.indexOf(a.itemId)==-1){if(a.menu&&a.menu.items){var d=[];a.menu.items.forEach(function(c){if(b.indexOf(c.itemId)==-1){d.push(c)}});a.menu.items=d}c.push(a)}});return c},populateDependencyMenu:function(a){if(a.up('menuitem').isDisabled()){return !1}var c=this.getCmp(),d=c.getTaskStore(),b=this.rec.predecessors,e=c.dependencyStore;a.removeAll();if(!b.length){return !1}var f=this.rec.getId()||this.rec.internalId;Ext.Array.each(b,function(b){var c=b.getSourceId(),g=d.getModelById(c==f?b.getTargetId():c);if(g){a.add({dependency:b,text:Ext.util.Format.ellipsis(Ext.String.htmlEncode(g.getName()),30),scope:this,handler:function(c){e.remove(c.dependency)},disabled:this.isReadOnly(this.rec)})}},this)},isNotReadOnly:function(a){return !this.isReadOnly(a)},isResearchMode:function(){var a=Ext.urlDecode(location.search.substring(1));return (a['viewMode']?a['viewMode']:null)=='research'},isMileStonesMenu:!1,configureMenuItems:function(h,i){Gnt.plugin.TaskContextMenu.prototype.configureMenuItems.apply(this,arguments);var j=this.down('#addTaskMenu');var f=this.down('#hideTask');if(h.record.data.Hide){f.setText(this.L('unHideTask'))}else {f.setText(this.L('hideTask'))}if(h.record.data.isMilestone){var b={addTaskAbove:{text:this.L('addTaskAboveMilestone')},addTaskBelow:{text:this.L('addTaskBelowMilestone')},addSubtask:{text:this.L('addSubtaskMilestone')}};for(menuType in b){var e=this.down('#'+menuType);e.setText(b[menuType].text)}this.isMileStonesMenu=!0}else {if(this.isMileStonesMenu){var b={addTaskAbove:{text:this.L('addTaskAbove')},addTaskBelow:{text:this.L('addTaskBelow')},addSubtask:{text:this.L('addSubtask')}};for(prop in b){var e=this.down('#'+prop);e.setText(b[prop].text)}this.isMileStonesMenu=!1}}var g=this.rec;if(!g){return}var a=this.query('[isColorMenu]')[0].menu.items.first(),d=a.getValue(),c=g.get('Color');if(a.el){if(d&&c&&c!==d){a.el.down('a.color-'+d).removeCls(a.selectedCls);if(a.el.down('a.color-'+c)){a.select(c.toUpperCase())}}else {if(d&&!c){a.el.down('a.color-'+d).removeCls(a.selectedCls)}}}},bulkOperations:function(){var b=this;var a=Ext.create('CGA.view.BulkOperationBaseForm',{grid:this.grid,isFromContextMenu:!0});a.show()},openIssues:function(){var c=this;var b=this.rec.getPath().split('/');var a='';b.forEach(function(d,e){if(d!=''){var c=Ext.StoreManager.get('Tasks').getById(d)?Ext.StoreManager.get('Tasks').getById(d).data.Name:'';if(c!=''){if(e!=b.length-1){a=a+c+', '}else {a=a+c+'.'}}}});var d=new Ext.create('tasksByStages.view.Window',{width:'98%',height:'98%',onFocusLeave:function(a){if(this){}},cls:'extjsWizardWrapper',modal:!0,resizable:!1,draggable:!1,hideOnMaskTap:!0,closeAction:'destroy',title:a,titleAlign:'center',clientInstance:window.client,selectedGroupingKey:this.rec.data.dbGroupingKey,constructId:this.rec.data.constructId,spotId:this.rec.data.spotId,stageTypeId:this.rec.data.stageType,stageId:this.rec.data.Id,assetId:this.rec.data.assetId,projectId:c.grid.crudManager.projectId,locale:c.grid.up().getViewModel().get('currentLocale')});d.show()},openMoreInfo:function(){var a=this.rec;var e=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var f=e/2-400/2;var g=c/2-600/2;var d='top='+g+',left='+f+',height=600,width=400,resizable=no,location=no,menubar=no,scrollbars=no,titlebar=no,toolbar=no';var b;if(a.data.isBuildingGroup){if(a.data.assetId!=null&&a.data.assetId!=''){b='main/asset/'+a.data.assetId}else {if(a.data.spotId!=null&&a.data.spotId!=''){b='main/spot/'+a.data.spotId}else {b='main/construct/'+a.data.constructId}}}else {b='main/stage/'+a.data.Id}window.open(screenConfig.instanceURL+screenConfig.openMobileURL+b,a.get('Name'),d,!1)},addTaskAbove:function(a){var b=this.rec;if(b){b.addTaskAbove(a)}else {this.grid.taskStore.getRootNode().appendChild(a)}},addSuccessorAction:function(a){var b=this.rec;a.calendar=a.calendar||b.getCalendar();a.taskStore=a.taskStore||b.getTaskStore(!0);if(b.getEndDate()){a.beginEdit();a.set(b.startDateField,b.getEndDate());a.set(b.endDateField,a.calculateEndDate(b.getEndDate(),1,Sch.util.Date.DAY));a.set(b.durationField,1);a.set(b.durationUnitField,Sch.util.Date.DAY);a.endEdit()}a.isSuccessor=!0;a.orgId=b.id;b.addSuccessor(a)},addPredecessorAction:function(a){var b=this.rec;a.calendar=a.calendar||b.getCalendar();a.taskStore=a.taskStore||b.getTaskStore(!0);if(b.getStartDate()){a.beginEdit();a.set(b.startDateField,a.calculateStartDate(b.getStartDate(),1,Sch.util.Date.DAY));a.set(b.endDateField,b.getStartDate());a.set(b.durationField,1);a.set(b.durationUnitField,Sch.util.Date.DAY);a.endEdit()}a.isPredecessor=!0;a.orgId=b.id;b.addPredecessor(a)},addSuccessor:function(){var a=this.rec;var b=this.copyTask(a);this.openModal(a,b,'Task',this.addSuccessorAction)},releaseTaskLock:function(){var a=this.rec;a.setIsLocked(!1)},addPredecessor:function(){var a=this.rec;var b=this.copyTask(a);this.openModal(a,b,'Task',this.addPredecessorAction)},addTaskBelow:function(a){var b=this.rec;if(b){b.addTaskBelow(a)}else {this.grid.taskStore.getRootNode().appendChild(a)}},hideTask:function(){if(this.rec){this.rec.setHide(!this.rec.data.Hide)}},copyTask:function(a){var b=Gnt.plugin.TaskContextMenu.prototype.copyTask.apply(this,arguments);b.beginEdit();b.set('isDependable',a.get('isDependable'));if(a.data.Cls=='phaseMilestone'){b.set('Cls',a.get('Cls'))}else {if(a.get('AssetName')){b.set('Cls','assetStage')}else {b.set('Cls','constructStage')}}if(a.get('ConstructName')){b.set('ConstructName',a.get('ConstructName'))}b.set('isMilestone',a.data.isMilestone);if(a.get('ConstructName')){b.set('ConstructName',a.get('ConstructName'))}if(a.get('SpotName')){b.set('SpotName',a.get('SpotName'))}if(a.get('AssetName')){b.set('AssetName',a.get('AssetName'))}b.endEdit();return b},addTaskAboveAction:function(){var b=this.rec.data.isMilestone==!0?'Milestone':'Task';var a=this.rec;var c=this.copyTask(a);this.openModal(a,c,b,this.addTaskAbove)},addTaskBelowAction:function(){var b=this.rec.data.isMilestone==!0?'Milestone':'Task';var a=this.rec;var c=this.copyTask(a);this.openModal(a,c,b,this.addTaskBelow)},addSubtaskMenu:function(){var b=this.rec.data.isMilestone==!0?'Milestone':'Task';var a=this.rec;var c=this.copyTask(this.isNotProject(a)&&a);this.openModal(a,c,b,this.addSubtaskAction)},addSubtaskAction:function(b){var a=this.rec;a.addSubtask(b,function(){dependencyStore=a.getDependencyStore();dependencyStore.queryBy(function(c){return c.data.To_js==a.id}).each(function(a){a.set('To_js',b.id)})})},addMilestone:function(){var b=this.rec,a=this.copyTask(b);a.set('Milestone',!0);this.openModal(b,a,'Milestone',this.addTaskBelow)},toggleMilestone:function(){if(this.rec.isMilestone()){this.rec.convertToRegular();this.rec.set('Milestone',!1)}else {this.rec.convertToMilestone();this.rec.set('Milestone',!0)}},openModal:function(c,f,b,e){var a=this;a.parentTask=c;var d=function(d,g){if(d.success==!0){var h=Ext.create('Ext.data.Store',{fields:['label','value'],data:d.types});var i=new ccReidComponents.window.Window({taskContextMenu:a,callback:g,task:f,title:a.grid.up().getViewModel().get('currentLocale').toLowerCase()=='he'||a.grid.up().getViewModel().get('currentLocale').toLowerCase()=='iw'?a.L(b)+' '+a.L('new'):a.L('new')+' '+a.L(b),autoScroll:!0,width:600,modal:!0,closeAction:'destroy',resizable:!1,locale:a.grid.up().getViewModel().get('currentLocale'),items:[Ext.create('Ext.form.Panel',{items:[{xtype:'combobox',allowBlank:!1,allowOnlyWhitespace:!1,anyMatch:!0,queryMode:'local',emptyText:a.grid.up().getViewModel().get('currentLocale').toLowerCase()=='he'||a.grid.up().getViewModel().get('currentLocale').toLowerCase()=='iw'?a.L('Select')+' '+a.L('Type')+' '+a.L(b):a.L('Select')+' '+a.L(b)+' '+a.L('Type'),name:'stageType',displayField:'label',valueField:'value',store:h,margin:'25 0 25 60',width:'400px',label:a.L('SelectStageType')}],buttons:[{text:a.L('Add'),xtype:'ccreid_submitbutton',submitFunction:function(){var j=this.up('form');var i=this.up('window');var h=i.task;h.set('stageType',j.form.getFields().items[0].lastValue);h.set('Name',j.form.getFields().items[0].lastMutatedValue);h.set('StagePrototypeName',j.form.getFields().items[0].lastMutatedValue);h.set('constructId',a.parentTask.getData().constructId);h.set('spotId',a.parentTask.getData().spotId);i.callback.call(i.taskContextMenu,h);i.close()}}]})]});i.show()}};this.crudManager.getTaskTypes(c,b,d,e)},validateMenus:function(d,a){var c=a.parentNode;var b=this;switch(d){case 'addTaskAbove':if(a.data.isMilestone){return a.id.indexOf(':phasesGroup')==-1}else {return b.isNotProject(a)&&!b.isReadOnly(c)&&(!a.data.isBuildingGroup||a.data.isMilestone)&&!a.parentNode.isRoot()};break;case 'addTaskBelow':if(a.data.isMilestone){return a.id.indexOf(':phasesGroup')==-1}else {return b.isNotProject(a)&&!b.isReadOnly(c)&&(!a.data.isBuildingGroup||a.data.isMilestone)&&!a.parentNode.isRoot()};break;case 'addSubtask':if(a.data.isMilestone){return !0}else {return !a.data.isVirtual};break;case 'addSuccessor':if(a.data.isMilestone){return a.id.indexOf(':phasesGroup')==-1}else {return b.isNotProject(a)&&!b.isReadOnly(a.parentNode)&&a.get('isDependable')};break;case 'addPredecessor':if(a.data.isMilestone){return a.id.indexOf(':phasesGroup')==-1}else {return b.isNotProject(a)&&!b.isReadOnly(a.parentNode)&&a.get('isDependable')};break;default:break;}}},0,0,['component','box','container','panel','menu','gantt_taskcontextmenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'gantt_taskcontextmenu':!0},['plugin.cga_taskcontextmenu'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.plugin,'TaskContextMenu'],0);Ext.cmd.derive('CGA.view.Gantt',Gnt.panel.Gantt,{stateful:!0,stateId:'cga-gantt',viewType:'cgaganttview',mode:'horizontal',cascadeChanges:!0,addRowOnTab:!1,allowParentTaskDependencies:!1,showTodayLine:!0,enableTaskDragDrop:!0,enableTaskReordering:!0,scrollTaskIntoViewOnClick:!0,showCrudManagerMask:!1,loadMask:!1,showProjectLines:!0,enableProgressBarResize:!0,showRollupTasks:!0,eventBorderWidth:0,autoFitOnLoad:!0,disableTasksReorder:!1,baselineVisible:!1,enableBaseline:!0,projectLinesConfig:{linesFor:'start'},selModel:{type:'gantt_spreadsheet',mode:'MULTI',cellSelect:!1,allowDeselect:!0,allowSelect:!1,rowNumbererTdCls:'wbsCol',rowNumbererHeaderWidth:70},lockedGridConfig:{width:780},lockedViewConfig:{getRowClass:function(b){var c=this;var a=[];switch(b.getCls()){case 'assetStage':a.push('simple-line');a.push('simple-icon-aStage');break;case 'constructStage':a.push('simple-line');a.push('simple-icon-cStage');break;case 'spotGroup':a.push('simple-line');a.push('simple-icon-layers');break;case 'assetGroup':a.push('simple-line');a.push('simple-icon-map');break;case 'constructGroup':a.push('simple-line');a.push('simple-icon-home');break;case 'phaseMilestone':a.push('simple-line');a.push('simple-icon-compass');break;}if(b.isRoot()){a.push('root-row')}if(b.isLeaf()!=!0&&Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.get('parentRowHidden')==!0){a.push('hideParentRow')}return a.join(' ')}},normalViewConfig:{getRowClass:function(b){var a=[];if(b.isLeaf()!=!0&&Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.get('parentRowHidden')==!0){a.push('hideParentRow')}return a.join(' ')}},taskBodyTemplate:'<div class="sch-gantt-progress-bar" style="width:{progressBarWidth}px;{progressBarStyle}" unselectable="on"></div>',leftLabelField:{dataIndex:'Name',editor:{xtype:'textfield'}},plugins:[{pluginId:'cga_taskcontextmenu',ptype:'cga_taskcontextmenu',crudManager:this.crudManager},{pluginId:'highlightsubtasksarea',ptype:'highlightsubtasksarea'},{ptype:'scheduler_treecellediting',clicksToEdit:2,pluginId:'editingInterface'},{ptype:'cga_gantt_printable',exportDialogConfig:{showDPIField:!0,showColumnPicker:!0,showResizePicker:!0,dateRangeRestriction:!1,stateful:!0,stateId:'gntprint'},exportConfig:{format:'A4',orientation:'landscape',range:'complete',rowsRange:'all',showHeader:!0,showFooter:!1},defaultExporter:'multipagevertical'},{ptype:'cga_milestoneline'},new CGA.plugin.ConstraintResolutionGui()],initComponent:function(){var a=this.up();if(a.crudManager.customCalendarManager.getProjectCalendar().weekendSecondDay==6){this.weekStartDay=0}this.tooltipTpl='<strong class="tipHeader">{Name}</strong><table class="taskTip"><tr><td>'+this.L('startText')+'</td><td align="right">{[values._record.getDisplayStartDate(Ext.Date.defaultFormat,false)]}</td></tr><tr><td>'+this.L('endText')+'</td><td align="right">{[values._record.getDisplayEndDate(Ext.Date.defaultFormat,false)]}</td></tr><tr><td>'+this.L('durationText')+'</td><td align="right">{[values._record.getDuration()]}</td></tr><tr><td>'+this.L('progressText')+'</td><td align="right">{[ Math.round(values.PercentDone)]}%</td></tr><tr><td>'+this.L('baselineStartText')+'</td><td align="right">{[Ext.util.Format.date(values.BaselineStartDate, Ext.Date.defaultFormat)]}</td></tr><tr><td>'+this.L('baselineEndText')+'</td><td align="right">{[Ext.util.Format.date(values.BaselineEndDate, Ext.Date.defaultFormat)]}</td></tr><tr><td>'+this.L('baselineDurationText')+'</td><td align="right">{[values._record.get("BaselineDuration")]}</td></tr></table>';var c=new Ext.data.JsonStore({model:'CGA.model.Dependency'});var b=Ext.create('CGA.plugin.TaskEditor',{dependencyGridConfig:{store:c},allowParentTaskDependencies:!1,rtl:a.getViewModel().get('currentLocale')=='he'});this.addPlugin(b);this.addPlugin({ptype:'cga_gantt_dependencyeditor',showLag:!0,rtl:this.up().getViewModel().get('currentLocale')=='he'});Gnt.panel.Gantt.prototype.initComponent.apply(this,arguments);this.on('viewready',this.cgaonMyViewReady,this)},cgaonMyViewReady:function(){this.on('beforeedit',this.cgaonBeforeEdit,this)},cgaonBeforeEdit:function(b,a){return !a.record.hasChildNodes()},eventRenderer:function(f,d){var c,b,a,e;if(f.get('Color')){c=Ext.String.format('background-color: #{0};border-color:#{0}',f.get('Color'));if(!d.segments){e={style:c}}else {b=d.segments;for(a=0;a<b.length;a++){b[a].style=c}}}return e},onBeforeTaskReorderOver:function(c,e){var d=c.getTargetFromEvent(e);if(d){var b=c.view.getRecord(d);var a=b!==this._reorderingTask&&!b.isReadOnly();a=a&&!b.get('isVirtual');a=a&&this._reorderingTask.get('constructId')==b.get('constructId');a=a&&this._reorderingTask.get('spotId')==b.get('spotId');a=a&&this._reorderingTask.get('assetId')==b.get('assetId');return a}},onBeforeTaskReorder:function(b){var a=b.view.up().up();if(a.disableTasksReorder){return !1}else {Gnt.panel.Gantt.prototype.onBeforeTaskReorder.apply(this,arguments)}},listeners:{sortchange:function(b){var a=b.view.up().up();a.disableTasksReorder=!0;a.crudManager.taskStore.store.model.getField('index').persist=!1}}},0,['cga-gantt'],['component','box','container','panel','tablepanel','treepanel','timelinetree','ganttpanel','cga-gantt'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'treepanel':!0,'timelinetree':!0,'ganttpanel':!0,'cga-gantt':!0},['widget.cga-gantt'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.view,'Gantt'],0);Ext.cmd.derive('CGA.view.MainViewport',Ext.Viewport,{viewModel:'advanced-viewport',controller:'advanced-viewport',layout:'border',initComponent:function(){var b=this;function showHeader(){var a=Ext.urlDecode(location.search.substring(1));return (a['groupingType']?a['groupingType']:null)!='PhasesOnly'}this.items=[{xtype:'cga-gantt',region:'center',title:showHeader()?this.title:null,reference:'gantt',infiniteScroll:!1,crudManager:this.crudManager,columns:this.columns,header:{xtype:'cga-controlheader',needAdjustToCalendar:this.needAdjustToCalendar},dependencyStore:this.crudManager.getDependencyStore(),readOnly:b.getViewModel().get('readOnlyMode')}];Ext.container.Viewport.prototype.initComponent.apply(this,arguments);var a=this.items.items[0].getPlugin('cga_taskcontextmenu');a.crudManager=this.crudManager;this.mon(this.crudManager,{beforesync:this.beforeCrudOperationStart,beforeadd:this.beforeCrudOperationStart,afteradd:this.onCrudOperationComplete,remove:this.onCrudOperationComplete,beforeremove:this.onCrudOperationComplete,beforeload:this.beforeCrudOperationStart,synccanceled:this.onCrudOperationComplete,loadcanceled:this.onCrudOperationComplete,load:this.onCrudOperationComplete,sync:this.onCrudOperationComplete,requestfail:this.onCrudOperationComplete,haschanges:function(){this.getViewModel().set('hasChanges',!0)},nochanges:function(){this.getViewModel().set('hasChanges',!1)},simulationLineInit:function(d,a){if(a.success==!0){var b=this.getViewModel().get('availableSimulations');var c=b.getProxy();if(a.ganttVersions.length>0){c.data=a.ganttVersions;b.load()}}},scope:this})},beforeCrudOperationStart:function(a,b,c){this.items.items[0].suspendRefresh()},onCrudOperationComplete:function(a){this.items.items[0].resumeRefresh()}},0,['advanced-viewport'],['component','box','container','viewport','advanced-viewport'],{'component':!0,'box':!0,'container':!0,'viewport':!0,'advanced-viewport':!0},['widget.advanced-viewport'],0,[CGA.view,'MainViewport'],0);Ext.cmd.derive('CGA.Application',Ext.app.Application,{name:'CGA',stores:['Locales','Tasks','Dependencies','CrudManager'],views:['MainViewport'],routes:{':lc':{before:'onBeforeLocaleEstablished',action:'onLocaleEstablished'}},defaultToken:'en',glyphFontFamily:'FontAwesome',listen:{controller:{'*':{'locale-change':'onLocaleChange'}}},init:function(){Ext.state.Manager.setProvider(Ext.create('Ext.state.LocalStorageProvider'))},undoManager:null,crudManager:null,mainView:null,currentLocale:null,isInit:!1,getStore:function(a){if(a=='CrudManager'){if(!this.crudManager){this.crudManager=Ext.app.Application.prototype.getStore.apply(this,arguments);this.mon(this.crudManager,{loadfail:this.onCrudError,syncfail:this.onCrudError,beforeloadapply:this.onBeforeloadapply,beforeload:this.onBeforeLoad})}return this.crudManager}return Ext.app.Application.prototype.getStore.apply(this,arguments)},onCrudError:function(c,a,b){Ext.Msg.show({title:this.L('error'),msg:a.message||this.L('requestError'),icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:Ext.Msg.minWidth})},onBeforeloadapply:function(a,b,c){},onLocaleChange:function(a,b){this.redirectTo(a)},onBeforeLocaleEstablished:function(b,d){var a=this,c=a.getLocalesStore().getById(b);switch(!0){case c&&!a.mainView&&a.currentLocale!=b:var f;if(b=='he'){initLocaleHE()}else {initLocaleEN()};var e=c.get('cls');Ext.require('CGA.locale.'+e,function(){CGA.locale[e].apply();Ext.onReady(function(){d.resume()})});break;case c&&!a.mainView&&a.currentLocale==b:d.resume();break;case c&&a.mainView&&!0:a.deactivate();d.stop();window.location.hash='#'+b;window.location.reload(!0);break;default:d.stop();}},onLocaleEstablished:function(a){this.lc=a;this.getCrudManagerStore().load()},launch:function(){},onAppUpdate:function(){Ext.Msg.confirm('Application Update','This application has an update, reload?',function(a){if(a==='yes'){window.location.reload()}})},onBeforeLoad:function(a,b,c){},onLoad:function(b,g){var a=this;a.undoManager=new Gnt.data.undoredo.Manager({transactionBoundary:'timeout',stores:[a.crudManager.getCalendarManager(),a.crudManager.getTaskStore(),a.crudManager.getResourceStore(),a.crudManager.getAssignmentStore(),a.crudManager.getDependencyStore()]});var c=[];if(a.isInit==!0){return}a.isInit=!0;a.currentLocale=a.lc;if(g.success==!0){var f=g.ganttStore.tasks.metadata;var j=f.needAdjustToCalendar==!1;c.push({xtype:'dragdropcolumn',locked:!0,sortable:!1,draggable:!1});c.push({xtype:'sequencecolumn',width:45,tdCls:'seqCol',locked:!0,sortable:!1,draggable:!1});c.push({xtype:'flagscolumn',width:60,locked:!0,sortable:!1,draggable:!1});if('columnsDefinition' in f&&Array.isArray(f.columnsDefinition)&&f.columnsDefinition.length>0){f.columnsDefinition.forEach(function(d){if(d.columnKey.indexOf('dynamicFields')==-1){var a={};a.text=d.fieldBinding.label;a.xtype=d.fieldBinding.dataType;a.dataIndex=d.columnKey;if(d.searchable==!0){if(d.filterType=='BOOLEAN'){a.items={xtype:'gantt-filter-checkbox',itemId:a.dataIndex,dataIndex:a.dataIndex}}else {if(d.filterType=='DYNAMICDROPDOWN'){a.items={xtype:'gantt-filter-dynamiclist',dataIndex:a.dataIndex,itemId:a.dataIndex}}else {if(d.filterType=='DATE'){a.items={xtype:'gantt-filter-search',dataIndex:a.dataIndex,dataType:'date',itemId:a.dataIndex}}else {if(d.columnKey=='PercentDone'){a.items={xtype:'gantt-filter-search',dataIndex:a.dataIndex,dataType:'number',itemId:a.dataIndex}}else {if(d.columnKey=='Duration'){a.items={xtype:'gantt-filter-search',dataIndex:a.dataIndex,dataType:'number',itemId:a.dataIndex}}else {a.items={xtype:'gantt-filter-search',itemId:a.dataIndex}}}}}}}if(a.xtype=='namecolumn'){a.width=300;a.locked=!0}else {a.autoSize=!0}if(d.columnKey.indexOf('Predecessor')>-1){a.useSequenceNumber=!0}if(d.visible==!1){a.hidden=!0}c.push(a)}})}var d={};d.text=this.L('Dirty');d.xtype='dirtycolumn';d.items={xtype:'gantt-filter-checkbox',itemId:'isDirty',dataIndex:'isDirty'};d.autoSize=!0;d.locked=!0;c.push(d);var e={};e.text=this.L('DepError');e.xtype='cyclecolumn';e.items={xtype:'gantt-filter-checkbox',itemId:'isCycle',dataIndex:'isCycle'};e.autoSize=!0;e.locked=!0;c.push(e)}c.forEach(function(a){a.sortable=!1});var i=Ext.create('Ext.data.Store',{fields:['Id','Description'],autoLoad:!1});Ext.override(Ext.grid.header.Container,{privates:{createFocusableContainerKeyNav:function(c){var a=this;return new Ext.util.KeyNav(c,{scope:a,space:a.onHeaderActivate,enter:a.onHeaderActivate})}}});if(b.customCalendarManager!=null&&b.customCalendarManager.getProjectCalendar()!=null){Ext.override(Gnt.data.Calendar,{weekendFirstDay:b.customCalendarManager.getProjectCalendar().weekendFirstDay,weekendSecondDay:b.customCalendarManager.getProjectCalendar().weekendSecondDay,hoursPerDay:b.customCalendarManager.getProjectCalendar().HoursPerDay,defaultAvailability:b.customCalendarManager.getProjectCalendar().DefaultAvailability})}var h='<span class="logo-icon">&nbsp;</span><span style="margin-left: 10px;margin-right: 10px;font-size: 18px;">'+g.title+'</span>';a.mainView=a.getMainViewportView().create({viewModel:{type:'advanced-viewport',data:{crud:b,undoManager:a.undoManager,taskStore:b.getTaskStore(),calendarManager:b.customCalendarManager,currentLocale:a.currentLocale,availableLocales:a.getLocalesStore(),availableSimulations:i,hasChanges:g.adjustOnLoad==!0,readOnlyMode:!1}},columns:c,needAdjustToCalendar:j,crudManager:b,startDate:this.startDate,endDate:this.endDate,title:h,rawTitle:g.title});b.ScheduleLock(b.projectId||b.researchId,!0,!1).then(function(c){var e=c.isLocked==!0;var d=c.lockingUserName;if(e==!0){var f=Ext.ComponentQuery.query('[xtype=lockingUserContainer]')[0];f.setHtml('&nbsp;<span class="readonlyWarning" title="'+a.L('readOnlylockedBy')+' '+d+'"><i class="fa fa-lock"></i></span>');a.mainView.down('ganttpanel').setReadOnly(!0);a.mainView.down('ganttpanel').setTitle(h);a.mainView.getViewModel().set('readOnlyMode',e);a.mainView.getViewModel().set('lockingUser',d)}});if(b.projectId!=null){b.getGanttPermissions(b.projectId).then(function(d){var c=d.irrelevantPermission;a.mainView.getViewModel().set('irrelevantPermission',c)})}b.getSimulations();Ext.EventManager.addListener(window,'beforeunload',onBeforeUnload,this,{normalized:!1});function onBeforeUnload(c){if(Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.data.readOnlyMode!=!0&&Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.data.saveBaselineMode!=!0){var a=Ext.ComponentQuery.query('advanced-viewport')[0].crudManager;a.ScheduleLock(a.projectId||a.researchId,!1,!0)}}window.onbeforeunload=function(a){if(Ext.ComponentQuery.query('advanced-viewport')[0].getViewModel().data.hasChanges==!0&&Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.data.readOnlyMode!=!0||Ext.ComponentQuery.query('advanced-viewport')[0].viewModel.data.saveBaselineMode==!0){return 'You have unsaved changes!'}};Ext.getDoc().on('keydown',function(a){if(a.getKey()===a.self.F5){onBeforeUnload(a)}})}},0,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA,'Application'],0);Ext.application({name:'CGA',extend:CGA.Application,autoCreateViewport:!1});function initLocaleEN(){Ext.onReady(function(){if(Ext.data&&Ext.data.Types){Ext.data.Types.stripRe=/[\$,%]/g}if(Ext.Date){Ext.Date.altUserFormats=['m/d/y','m/j/y','m/d/Y','n/j/Y','n/j/y','n/d/Y','n/d/y'],Ext.Date.monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];Ext.Date.getShortMonthName=function(a){return Ext.Date.monthNames[a].substring(0,3)};Ext.Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)};Ext.Date.parseCodes.S.s='(?:st|nd|rd|th)'}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:',',decimalSeparator:'.',currencySign:'$',dateFormat:'m/d/Y'})}});Ext.define('Ext.locale.en.data.validator.Bound',{override:'Ext.data.validator.Bound',emptyMessage:'Must be present'});Ext.define('Ext.locale.en.data.validator.Email',{override:'Ext.data.validator.Email',message:'Is not a valid email address'});Ext.define('Ext.locale.en.data.validator.Exclusion',{override:'Ext.data.validator.Exclusion',message:'Is a value that has been excluded'});Ext.define('Ext.locale.en.data.validator.Format',{override:'Ext.data.validator.Format',message:'Is in the wrong format'});Ext.define('Ext.locale.en.data.validator.Inclusion',{override:'Ext.data.validator.Inclusion',message:'Is not in the list of acceptable values'});Ext.define('Ext.locale.en.data.validator.Length',{override:'Ext.data.validator.Length',minOnlyMessage:'Length must be at least {0}',maxOnlyMessage:'Length must be no more than {0}',bothMessage:'Length must be between {0} and {1}'});Ext.define('Ext.locale.en.data.validator.Presence',{override:'Ext.data.validator.Presence',message:'Must be present'});Ext.define('Ext.locale.en.data.validator.Range',{override:'Ext.data.validator.Range',minOnlyMessage:'Must be must be at least {0}',maxOnlyMessage:'Must be no more than than {0}',bothMessage:'Must be between {0} and {1}',nanMessage:'Must be numeric'});Ext.define('Ext.locale.en.view.View',{override:'Ext.view.View',emptyText:''});Ext.define('Ext.locale.en.grid.plugin.DragDrop',{override:'Ext.grid.plugin.DragDrop',dragText:'{0} selected row{1}'});Ext.define('Ext.locale.en.view.AbstractView',{override:'Ext.view.AbstractView',loadingText:'Loading...'});Ext.define('Ext.locale.en.picker.Date',{override:'Ext.picker.Date',todayText:'Today',minText:'This date is before the minimum date',maxText:'This date is after the maximum date',disabledDaysText:'',disabledDatesText:'',nextText:'Next Month (Control+Right)',prevText:'Previous Month (Control+Left)',monthYearText:'Choose a month (Control+Up/Down to move years)',todayTip:'{0} (Spacebar)',format:'m/d/y',startDay:0});Ext.define('Ext.locale.en.picker.Month',{override:'Ext.picker.Month',okText:'&#160;OK&#160;',cancelText:'Cancel'});Ext.define('Ext.locale.en.toolbar.Paging',{override:'Ext.PagingToolbar',beforePageText:'Page',afterPageText:'of {0}',firstText:'First Page',prevText:'Previous Page',nextText:'Next Page',lastText:'Last Page',refreshText:'Refresh',displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display'});Ext.define('Ext.locale.en.form.Basic',{override:'Ext.form.Basic',waitTitle:'Please Wait...'});Ext.define('Ext.locale.en.form.field.Base',{override:'Ext.form.field.Base',invalidText:'The value in this field is invalid'});Ext.define('Ext.locale.en.form.field.Text',{override:'Ext.form.field.Text',minLengthText:'The minimum length for this field is {0}',maxLengthText:'The maximum length for this field is {0}',blankText:'This field is required',regexText:'',emptyText:null});Ext.define('Ext.locale.en.form.field.Number',{override:'Ext.form.field.Number',decimalPrecision:2,minText:'The minimum value for this field is {0}',maxText:'The maximum value for this field is {0}',nanText:'{0} is not a valid number'});Ext.define('Ext.locale.en.form.field.Date',{override:'Ext.form.field.Date',disabledDaysText:'Disabled',disabledDatesText:'Disabled',minText:'The date in this field must be after {0}',maxText:'The date in this field must be before {0}',invalidText:'{0} is not a valid date - it must be in the format {1}',format:'m/d/y',altFormats:'m/d/y|m/j/y|m/d/Y|n/j/Y|n/j/y|n/d/Y|n/d/y|m-d-y|m-j-y|m-d-Y|n-j-Y|n-j-y|n-d-Y|n-d-y|m.d.y|m.j.y|m.d.Y|n.j.Y|n.j.y|n.d.Y|n.d.y|m/d|m-d|md|mdy|mdY|d|Y-m-d'});Ext.define('Ext.locale.en.form.field.ComboBox',{override:'Ext.form.field.ComboBox',valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:'Loading...'})});Ext.define('Ext.locale.en.form.field.VTypes',{override:'Ext.form.field.VTypes',emailText:'This field should be an e-mail address in the format "user@example.com"',urlText:'This field should be a URL in the format "http://www.example.com"',alphaText:'This field should only contain letters and _',alphanumText:'This field should only contain letters, numbers and _'});Ext.define('Ext.locale.en.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',createLinkText:'Please enter the URL for the link:'},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:'Bold (Ctrl+B)',text:'Make the selected text bold.',cls:'x-html-editor-tip'},italic:{title:'Italic (Ctrl+I)',text:'Make the selected text italic.',cls:'x-html-editor-tip'},underline:{title:'Underline (Ctrl+U)',text:'Underline the selected text.',cls:'x-html-editor-tip'},increasefontsize:{title:'Grow Text',text:'Increase the font size.',cls:'x-html-editor-tip'},decreasefontsize:{title:'Shrink Text',text:'Decrease the font size.',cls:'x-html-editor-tip'},backcolor:{title:'Text Highlight Color',text:'Change the background color of the selected text.',cls:'x-html-editor-tip'},forecolor:{title:'Font Color',text:'Change the color of the selected text.',cls:'x-html-editor-tip'},justifyleft:{title:'Align Text Left',text:'Align text to the left.',cls:'x-html-editor-tip'},justifycenter:{title:'Center Text',text:'Center text in the editor.',cls:'x-html-editor-tip'},justifyright:{title:'Align Text Right',text:'Align text to the right.',cls:'x-html-editor-tip'},insertunorderedlist:{title:'Bullet List',text:'Start a bulleted list.',cls:'x-html-editor-tip'},insertorderedlist:{title:'Numbered List',text:'Start a numbered list.',cls:'x-html-editor-tip'},createlink:{title:'Hyperlink',text:'Make the selected text a hyperlink.',cls:'x-html-editor-tip'},sourceedit:{title:'Source Edit',text:'Switch to source editing mode.',cls:'x-html-editor-tip'}}})});Ext.define('Ext.locale.en.grid.header.Container',{override:'Ext.grid.header.Container',sortAscText:'Sort Ascending',sortDescText:'Sort Descending',columnsText:'Columns'});Ext.define('Ext.locale.en.grid.GroupingFeature',{override:'Ext.grid.feature.Grouping',emptyGroupText:'(None)',groupByText:'Group by this field',showGroupsText:'Show in Groups'});Ext.define('Ext.locale.en.grid.PropertyColumnModel',{override:'Ext.grid.PropertyColumnModel',nameText:'Name',valueText:'Value',dateFormat:'m/j/Y',trueText:'true',falseText:'false'});Ext.define('Ext.locale.en.grid.BooleanColumn',{override:'Ext.grid.BooleanColumn',trueText:'true',falseText:'false',undefinedText:'&#160;'});Ext.define('Ext.locale.en.grid.NumberColumn',{override:'Ext.grid.NumberColumn',format:'0,000.00'});Ext.define('Ext.locale.en.grid.DateColumn',{override:'Ext.grid.DateColumn',format:'m/d/Y'});Ext.define('Ext.locale.en.form.field.Time',{override:'Ext.form.field.Time',minText:'The time in this field must be equal to or after {0}',maxText:'The time in this field must be equal to or before {0}',invalidText:'{0} is not a valid time',format:'g:i A',altFormats:'g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H'});Ext.define('Ext.locale.en.form.field.File',{override:'Ext.form.field.File',buttonText:'Browse...'});Ext.define('Ext.locale.en.form.CheckboxGroup',{override:'Ext.form.CheckboxGroup',blankText:'You must select at least one item in this group'});Ext.define('Ext.locale.en.form.RadioGroup',{override:'Ext.form.RadioGroup',blankText:'You must select one item in this group'});Ext.define('Ext.locale.en.window.MessageBox',{override:'Ext.window.MessageBox',buttonText:{ok:'OK',cancel:'Cancel',yes:'Yes',no:'No'}});Ext.define('Ext.locale.en.grid.filters.Filters',{override:'Ext.grid.filters.Filters',menuFilterText:'Filters'});Ext.define('Ext.locale.en.grid.filters.filter.Boolean',{override:'Ext.grid.filters.filter.Boolean',yesText:'Yes',noText:'No'});Ext.define('Ext.locale.en.grid.filters.filter.Date',{override:'Ext.grid.filters.filter.Date',fields:{lt:{text:'Before'},gt:{text:'After'},eq:{text:'On'}},dateFormat:null});Ext.define('Ext.locale.en.grid.filters.filter.List',{override:'Ext.grid.filters.filter.List',loadingText:'Loading...'});Ext.define('Ext.locale.en.grid.filters.filter.Number',{override:'Ext.grid.filters.filter.Number',emptyText:'Enter Number...'});Ext.define('Ext.locale.en.grid.filters.filter.String',{override:'Ext.grid.filters.filter.String',emptyText:'Enter Filter Text...'});Ext.define('Ext.locale.en.Component',{override:'Ext.Component'})}function initLocaleHE(){Ext.onReady(function(){if(Ext.Date){Ext.Date.defaultDateFormat='d/m/Y';Ext.Date.defaultFormat='d/m/Y';Ext.Date.altUserFormats=['d/m/y','j/m/y','j/m/Y','j/n/Y','j/n/y','d/n/Y','d/n/y'],Ext.Date.monthNames=['','','','','','','','','','','',''];Ext.Date.getShortMonthName=function(a){return Ext.Date.monthNames[a].substring(0,3)};Ext.Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=['','','','','','',''];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:',',decimalSeparator:'.',currencySign:'',dateFormat:'d/m/Y'})}});Ext.define('Ext.locale.he.grid.DateColumn',{override:'Ext.grid.DateColumn',format:'d/m/Y'});Ext.define('Ext.locale.he.view.View',{override:'Ext.view.View',emptyText:''});Ext.define('Ext.locale.he.grid.plugin.DragDrop',{override:'Ext.grid.plugin.DragDrop',dragText:'  {0}'});Ext.define('Ext.locale.he.tab.Tab',{override:'Ext.tab.Tab',closeText:' '});Ext.define('Ext.locale.he.form.field.Base',{override:'Ext.form.field.Base',invalidText:'   '});Ext.define('Ext.locale.he.view.AbstractView',{override:'Ext.view.AbstractView',loadingText:'...'});Ext.define('Ext.locale.he.picker.Date',{override:'Ext.picker.Date',todayText:'',minText:'.      ',maxText:'.      ',disabledDaysText:'',disabledDatesText:'',nextText:'(Control+Right)  ',prevText:'(Control+Left)  ',monthYearText:'(  Control+Up/Down)  ',todayTip:' ) {0})',format:'d/m/Y',startDay:0});Ext.define('Ext.locale.he.picker.Month',{override:'Ext.picker.Month',okText:'&#160;&#160;',cancelText:''});Ext.define('Ext.locale.he.toolbar.Paging',{override:'Ext.PagingToolbar',beforePageText:'',afterPageText:'{0} ',firstText:' ',prevText:' ',nextText:' ',lastText:' ',refreshText:'',displayMsg:' {0} - {1}  {2}',emptyMsg:'  '});Ext.define('Ext.locale.he.form.field.Text',{override:'Ext.form.field.Text',minLengthText:'{0}     ',maxLengthText:'{0}     ',blankText:'  ',regexText:'',emptyText:null});Ext.define('Ext.locale.he.form.field.Number',{override:'Ext.form.field.Number',minText:'{0}     ',maxText:'{0}     ',nanText:'   {0}'});Ext.define('Ext.locale.he.form.field.Date',{override:'Ext.form.field.Date',disabledDaysText:'',disabledDatesText:'',minText:'{0}      ',maxText:'{0}      ',invalidText:'{1}     -    {0}',format:'d/m/y',altFormats:'d/m/y|j/m/y|j/m/Y|j/n/Y|j/n/y|d/n/Y|d/n/y|d-m-y|j-m-y|j-m-Y|j-n-Y|j-n-y|d-n-Y|d-n-y|d.m.y|j.m.y|j.m.Y|j.n.Y|j.n.y|d.n.Y|d.n.y|d/m/Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d'});Ext.define('Ext.locale.he.form.field.Picker',{override:'Ext.form.field.Picker',format:'d/m/y'});Ext.define('Ext.locale.he.form.field.File',{override:'Ext.form.field.File',buttonText:' ...'});Ext.define('Ext.locale.he.form.field.ComboBox',{override:'Ext.form.field.ComboBox',valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:'...'})});Ext.define('Ext.locale.he.form.field.VTypes',{override:'Ext.form.field.VTypes',emailText:'"user@example.com"        ',urlText:'"http://www.example.com"       ',alphaText:'_      ',alphanumText:'_     ,  '});Ext.define('Ext.locale.he.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',createLinkText:':      '},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:'(Ctrl+B) ',text:'.   ',cls:'x-html-editor-tip'},italic:{title:'(Ctrl+I) ',text:'.   ',cls:'x-html-editor-tip'},underline:{title:'(Ctrl+U)  ',text:'.     ',cls:'x-html-editor-tip'},increasefontsize:{title:' ',text:'.    ',cls:'x-html-editor-tip'},decreasefontsize:{title:' ',text:'.    ',cls:'x-html-editor-tip'},backcolor:{title:'  ',text:'.      ',cls:'x-html-editor-tip'},forecolor:{title:' ',text:'.      ',cls:'x-html-editor-tip'},justifyleft:{title:' ',text:'.    ',cls:'x-html-editor-tip'},justifycenter:{title:' ',text:'.    ',cls:'x-html-editor-tip'},justifyright:{title:' ',text:'.    ',cls:'x-html-editor-tip'},insertunorderedlist:{title:' ',text:'.  ',cls:'x-html-editor-tip'},insertorderedlist:{title:' ',text:'.  ',cls:'x-html-editor-tip'},createlink:{title:'',text:'.    ',cls:'x-html-editor-tip'},sourceedit:{title:'  ',text:'.  ',cls:'x-html-editor-tip'}}})});Ext.define('Ext.locale.he.grid.header.Container',{override:'Ext.grid.header.Container',sortAscText:'  ',sortDescText:'  ',lockText:' ',unlockText:' ',columnsText:''});Ext.define('Ext.locale.he.grid.GroupingFeature',{override:'Ext.grid.feature.Grouping',emptyGroupText:'()',groupByText:'    ',showGroupsText:' '});Ext.define('Ext.locale.he.grid.PropertyColumnModel',{override:'Ext.grid.PropertyColumnModel',nameText:'',valueText:'',dateFormat:'m/j/Y'});Ext.define('Ext.locale.he.window.MessageBox',{override:'Ext.window.MessageBox',buttonText:{ok:'',cancel:'',yes:'',no:''}});Ext.define('Ext.locale.he.Component',{override:'Ext.Component'})}Ext.define('Ext.overrides.app.Application',{override:'Ext.app.Application',autoCreateViewport:!1,config:{enableQuickTips:!0},applyMainView:function(c){var b,d,e,a;if(typeof c==='string'){b=this.getView(c)}else {b=Ext.ClassManager.getByConfig(c)}d=b.prototype;if(!d.isViewport){a=d.plugins;a=['viewport'].concat(a?Ext.Array.from(a,!0):[]);e={plugins:a}}return b.create(e)},getDependencies:function(g,c,b){var d=Ext.app.Controller,f=g.prototype,e=c.$namespace,a=c.autoCreateViewport;if(a){if(a===!0){a='Viewport'}else {b.push('Ext.plugin.Viewport')}d.processDependencies(f,b,e,'view',a)}},onBeforeLaunch:function(){var a=this,b=a.autoCreateViewport;if(a.getEnableQuickTips()){a.initQuickTips()}if(b){a.initViewport()}arguments.callee.$previous.apply(this,arguments)},getViewportName:function(){var b=null,a=this.autoCreateViewport;if(a){b=a===!0?'Viewport':a}return b},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}});Ext.cmd.derive('Ext.app.domain.Controller',Ext.app.EventDomain,{singleton:!0,type:'controller',prefix:'controller.',idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(a==='#'){b=!!c.isApplication}else {if(this.idMatchRe.test(a)){b=c.getId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}}return b}},1,0,0,0,0,0,[Ext.app.domain,'Controller'],0);Ext.cmd.derive('Ext.data.PageMap',Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:''},clear:function(b){var a=this;a.pageMapGeneration=(a.pageMapGeneration||0)+1;a.indexMap={};Ext.util.LruCache.prototype.clear.call(this,b)},forEach:function(k,f){var d=this,b=Ext.Object.getKeys(d.map),h=b.length,j=d.getPageSize(),a,c,e,g,i;for(a=0;a<h;a++){b[a]=+b[a]}Ext.Array.sort(b,Ext.Array.numericSortFn);f=f||d;for(a=0;a<h;a++){e=b[a];g=d.getPage(e);i=g.length;for(c=0;c<i;c++){if(k.call(f,g[c],(e-1)*j+c)===!1){return}}}},findBy:function(d,a){var c=this,b=null;a=a||c;c.forEach(function(c,e){if(d.call(a,c,e)){b=c;return !1}});return b},findIndexBy:function(d,a){var c=this,b=-1;a=a||c;c.forEach(function(e,c){if(d.call(a,e)){b=c;return !1}});return b},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},findIndex:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findIndexBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(a,g){var c=this,d=c.getPageSize(),k=a+Math.floor((g.length-1)/d),i=(a-1)*d,j=c.indexMap,b,f,h,e;for(e=0;a<=k;a++,e+=d){b=Ext.Array.slice(g,e,e+d);for(f=0,h=b.length;f<h;f++){j[b[f].internalId]=i++}c.add(a,b);c.fireEvent('pageadd',c,a,b)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},getByInternalId:function(b){var a=this.indexMap[b];if(a!=null){return this.getAt(a)}},indexOf:function(b){var a=-1;if(b){a=this.indexMap[b.internalId];if(a==null){a=-1}}return a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(d){var b=this,a=b.getPage(d),f,c,e;if(a){if(b.fireEvent('beforepageremove',b,d,a)!==!1){f=a.length;for(c=0;c<f;c++){delete b.indexMap[a[c].internalId]}e=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);b.fireEvent('pageremove',b,d,a);a.length=0}}return e},getPage:function(a){return this.get(a)},hasRange:function(e,d){var a=this,c=a.getPageFromRecordIndex(e),b=a.getPageFromRecordIndex(d);for(;c<=b;c++){if(!a.hasPage(c)){return !1}}return (b-1)*a._pageSize+a.getPage(b).length>d},hasPage:function(a){return !!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(l,f){f--;if(!this.hasRange(l,f)){Ext.raise('PageMap asked for range which it does not have')}var c=this,k=Ext.Array,e=c.getPageSize(),g=c.getPageFromRecordIndex(l),h=c.getPageFromRecordIndex(f),m=(g-1)*e,n=h*e-1,a=g,j=[],d,i,b;for(;a<=h;a++){if(a===g){d=l-m;b=d>0}else {d=0;b=!1}if(a===h){i=e-(n-f);b=b||i<e}if(b){k.push(j,k.slice(c.getPage(a),d,i))}else {k.push(j,c.getPage(a))}}return j},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,'PageMap'],0);Ext.cmd.derive('Ext.data.BufferedStore',Ext.data.ProxyStore,{isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a&&a.setEnablePaging){a.setEnablePaging(!0)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var a=this,b=new Ext.data.PageMap({store:a,rootProperty:'data',pageSize:a.getPageSize(),maxSize:a.getPurgePageCount(),listeners:{clear:a.onPageMapClear,scope:a}});a.relayEvents(b,['beforepageremove','pageadd','pageremove']);a.pageRequests={};return b},removeAll:function(b){var a=this,c=a.getData();if(c){if(b){a.suspendEvent('clear')}c.clear();if(b){a.resumeEvent('clear')}}},flushLoad:function(){var b=this,a=b.pendingLoadOptions;b.clearLoadTask();if(!a){return}b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},reload:function(d){var a=this,f=a.getData(),i=Number.MAX_VALUE,c,b,j,k,g,e,h,l;if(!d){d={}}if(a.loading||a.fireEvent('beforeload',a,d)===!1){return}e=function(){var g=a.totalCount,h=b-c;if(b>=g){b=g-1;c=Math.max(b-h,0)}if(a.rangeCached(c,Math.min(b,a.totalCount))){a.loading=!1;f.un('pageadd',e);l=f.getRange(c,b+1);a.fireEvent('load',a,l,!0);a.fireEvent('refresh',a)}};h=Math.ceil((a.getLeadingBufferZone()+a.getTrailingBufferZone())/2);if(a.lastRequestStart&&a.preserveScrollOnReload){c=a.lastRequestStart;b=a.lastRequestEnd;i=a.getTotalCount()}else {c=d.start||0;b=c+(d.count||a.getPageSize())-1}f.clear(!0);delete a.totalCount;c=Math.max(c-h,0);b=Math.min(b+h,i);j=a.getPageFromRecordIndex(c);k=a.getPageFromRecordIndex(b);a.loading=!0;d.waitForReload=e;f.on('pageadd',e);for(g=j;g<=k;g++){a.prefetchPage(g,d)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},clearData:function(c){var b=this,a=b.getData();if(a){a.clear()}},getCount:function(){return this.totalCount||0},getRange:function(c,b,f){var a=this,k=a.totalCount-1,m=a.lastRequestStart,l=[],h=a.getData(),g,d,e,i,j;f=Ext.apply({prefetchStart:c,prefetchEnd:b},f);b=b>=a.totalCount?k:b;d=c===0?0:c-1;e=b===k?b:b+1;a.lastRequestStart=c;a.lastRequestEnd=b;if(a.rangeCached(d,e)){a.onRangeAvailable(f);l=h.getRange(c,b+1)}else {a.fireEvent('cachemiss',a,c,b);i=a.getPageFromRecordIndex(d);j=a.getPageFromRecordIndex(e);g=function(l,k,m){if(k>=i&&k<=j&&a.rangeCached(d,e)){a.fireEvent('cachefilled',a,c,b);h.un('pageadd',g);a.onRangeAvailable(f)}};h.on('pageadd',g);a.prefetchRange(c,b)}a.primeCache(c,b,c<m?-1:1);return l},getById:function(b){var a=this.data.findBy(function(a){return a.getId()===b});return a},getAt:function(a){var b=this.getData();if(b.hasRange(a,a)){return b.getAt(a)}},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var a=this,c;if(b&&typeof b==='string'){c=a.grouper;if(!c){a.grouper=new Ext.util.Grouper({property:b,direction:d||'ASC',root:'data'})}else {if(d===undefined){c.toggle()}else {c.setDirection(d)}}}else {a.grouper=b?a.getSorters().decodeSorter(b,'Ext.util.Grouper'):null}a.getData().clear();a.loadPage(1,{callback:function(){a.fireEvent('groupchange',a,a.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(c){var a=this,b=a.getPurgePageCount();return b?Math.max(a.getData().getMaxSize()||0,Math.ceil((c+a.getTrailingBufferZone()+a.getLeadingBufferZone())/a.getPageSize())*2+b):0},loadToPrefetch:function(b){var a=this,f=b,h,d,i,e=b.start,k=b.start+b.limit-1,m=a.getViewSize()||b.limit,c=Math.min(k,b.start+m-1),p=a.getPageFromRecordIndex(Math.max(e-a.getTrailingBufferZone(),0)),q=a.getPageFromRecordIndex(k+a.getLeadingBufferZone()),g=a.getData(),j=function(){d=d||[];if(b.loadCallback){b.loadCallback.call(b.scope||a,d,o,!0)}if(b.callback){b.callback.call(b.scope||a,d,e||0,k||0,b)}},n=function(){a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('load',a,d,!0)},l=function(){if(a.rangeCached(e,c)){a.loading=!1;d=g.getRange(e,c+1);g.un('pageadd',l);if(a.hasListeners.guaranteedrange){a.guaranteeRange(e,c,b.callback,b.scope)}j();n()}},o;g.setMaxSize(a.calculatePageCacheSize(m));if(a.fireEvent('beforeload',a,b)!==!1){delete a.totalCount;a.loading=!0;if(b.callback){f=Ext.apply({},b);delete f.callback}a.on('prefetch',function(m,e,d,k){o=k;if(d){if(i=a.getTotalCount()){g.on('pageadd',l);c=Math.min(c,i-1);q=a.getPageFromRecordIndex(Math.min(c+a.getLeadingBufferZone(),i-1));for(h=p+1;h<=q;++h){a.prefetchPage(h,f)}}else {j();n()}}else {a.loading=!1;j();a.fireEvent('load',a,e,!1)}},null,{single:!0});a.prefetchPage(p,f)}},prefetch:function(b){var a=this,c=a.getPageSize(),d=a.getData(),e,f;if(c){if(a.lastPageSize&&c!=a.lastPageSize){Ext.raise('pageSize cannot be dynamically altered')}if(!d.getPageSize()){d.setPageSize(c)}}else {a.pageSize=d.setPageSize(c=b.limit)}a.lastPageSize=c;if(!b.page){b.page=a.getPageFromRecordIndex(b.start);b.start=(b.page-1)*c;b.limit=Math.ceil(b.limit/c)*c}f=a.pageRequests[b.page];if(!f||f.getOperation().pageMapGeneration!==d.pageMapGeneration){b=Ext.apply({action:'read',filters:a.getFilters().items,sorters:a.getSorters().items,grouper:a.getGrouper(),internalCallback:a.onProxyPrefetch,internalScope:a},b);e=a.createOperation('read',b);e.pageMapGeneration=d.pageMapGeneration;if(a.fireEvent('beforeprefetch',a,e)!==!1){a.pageRequests[b.page]=e.execute();if(a.getProxy().isSynchronous){delete a.pageRequests[b.page]}}}return a},onPageMapClear:function(){var a=this,e=a.wasLoading,d=a.pageRequests,b=a.getData(),c;b.clearListeners();b.on('clear',a.onPageMapClear,a);a.relayEvents(b,['beforepageremove','pageadd','pageremove']);a.loading=!0;a.totalCount=0;for(c in d){if(d.hasOwnProperty(c)){d[c].getOperation().abort()}}a.fireEvent('clear',a);a.loading=e},prefetchPage:function(d,e){var a=this,b=a.getPageSize(),f=(d-1)*b,c=a.totalCount;if(c!==undefined&&a.data.getCount()===c){return}a.prefetch(Ext.applyIf({page:d,start:f,limit:b},e))},onProxyPrefetch:function(b){if(this.destroyed){return}var a=this,g=b.getResultSet(),e=b.getRecords(),d=b.wasSuccessful(),i=b.getPage(),c=b.waitForReload,k=a.totalCount,h=a.pageRequests,j,f;if(b.pageMapGeneration===a.getData().pageMapGeneration){if(g){a.totalCount=g.getTotal();if(a.totalCount!==k){a.fireEvent('totalcountchange',a.totalCount)}}if(i!==undefined){delete a.pageRequests[i]}a.loading=!1;a.fireEvent('prefetch',a,e,d,b);if(d){if(a.totalCount===0){if(c){for(j in h){f=h[j].getOperation();if(f.waitForReload===c){delete f.waitForReload}}a.getData().un('pageadd',c);a.fireEvent('load',a,[],!0);a.fireEvent('refresh',a)}}else {a.cachePage(e,b.getPage())}}Ext.callback(b.getCallback(),b.getScope()||a,[e,b,d])}},cachePage:function(b,d){var a=this,e=b.length,c;if(!Ext.isDefined(a.totalCount)){a.totalCount=b.length;a.fireEvent('totalcountchange',a.totalCount)}for(c=0;c<e;c++){b[c].join(a)}a.getData().addPage(d,b)},rangeCached:function(a,b){return this.getData().hasRange(a,b)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(a,b){return this.rangeCached(a,b)},onRangeAvailable:function(a){var c=this,f=c.getTotalCount(),e=a.prefetchStart,b=a.prefetchEnd>f-1?f-1:a.prefetchEnd,d;b=Math.max(0,b);d=c.getData().getRange(e,b+1);if(a.fireEvent!==!1){c.fireEvent('guaranteedrange',d,e,b,a)}if(a.callback){a.callback.call(a.scope||c,d,e,b,a)}},guaranteeRange:function(d,e,b,c,a){a=Ext.apply({callback:b,scope:c},a);this.getRange(d,e+1,a)},prefetchRange:function(c,d){var a=this,e,f,b,g=a.getData();if(!a.rangeCached(c,d)){e=a.getPageFromRecordIndex(c);f=a.getPageFromRecordIndex(d);g.setMaxSize(a.calculatePageCacheSize(d-c+1));for(b=e;b<=f;b++){if(!a.pageCached(b)){a.prefetchPage(b)}}}},primeCache:function(a,b,g){var c=this,f=c.getLeadingBufferZone(),e=c.getTrailingBufferZone(),h=c.getPageSize(),d=c.totalCount;if(g===-1){a=Math.max(a-f,0);b=Math.min(b+e,d-1)}else {if(g===1){a=Math.max(Math.min(a-e,d-h),0);b=Math.min(b+f,d-1)}else {a=Math.min(Math.max(Math.floor(a-(f+e)/2),0),d-c.pageSize);b=Math.min(Math.max(Math.ceil(b+(f+e)/2),0),d-1)}}c.prefetchRange(a,b)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else {this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.fireEvent('beforesort',a,b);a.clearAndLoad({callback:function(){a.fireEvent('sort',a,b)}})}else {a.fireEvent('sort',a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return !1}}},0,0,0,0,['store.buffered'],0,[Ext.data,'BufferedStore'],0);Ext.cmd.derive('Ext.data.Request',Ext.Base,{config:{action:undefined,params:undefined,method:'GET',url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(b){var a=this.getParams(),c;if(a){return a[b]}return c},setParam:function(c,b){var a=this.getParams()||{};a[c]=b;this.setParams(a)}},1,0,0,0,0,0,[Ext.data,'Request'],0);Ext.cmd.derive('Ext.data.Validation',Ext.data.Model,{isValidation:!0,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(q){var e=this,i=e.data,c=e.record,m=c.fields,l=c.generation,p=c.data,r=c.validationSeparator,f=null,k,h,a,d,s,g,u,t,n,j,o,b;if(q||e.syncGeneration!==l){e.syncGeneration=l;for(g=0,n=m.length;g<n;++g){d=m[g];b=d.name;o=p[b];k=d.defaultInvalidMessage;a=0;if(!(b in i)){i[b]=h=!0}else {h=i[b]}if(d.validate!==Ext.emptyFn){j=d.validate(o,r,null,c);if(j!==!0){a=j||k}}if(!a){a=!0}if(a!==h){(f||(f={}))[b]=a}}if(f){e.set(f)}}}},0,0,0,0,0,0,[Ext.data,'Validation'],0);Ext.cmd.derive('Ext.dom.Helper',Ext.Base,function(){var b='afterbegin',d='afterend',a='beforebegin',c='beforeend',g=['BeforeBegin','previousSibling'],f=['AfterEnd','nextSibling'],e={beforebegin:g,afterend:f},h={beforebegin:g,afterend:f,afterbegin:['AfterBegin','firstChild'],beforeend:['BeforeEnd','lastChild']};return {singleton:!0,alternateClassName:['Ext.DomHelper','Ext.core.DomHelper'],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:'class',htmlFor:'for'},closeTags:{},detachedDiv:document.createElement('div'),decamelizeName:function(){var b=/([a-z])([A-Z])/g,a={};function decamel(c,a,b){return a+'-'+b.toLowerCase()}return function(c){return a[c]||(a[c]=c.replace(b,decamel))}}(),generateMarkup:function(a,b){var e=this,i=typeof a,d,c,f,g,h;if(i==='string'||i==='number'){b.push(a)}else {if(Ext.isArray(a)){for(g=0;g<a.length;g++){if(a[g]){e.generateMarkup(a[g],b)}}}else {f=a.tag||'div';b.push('<',f);for(d in a){if(a.hasOwnProperty(d)){c=a[d];if(c!==undefined&&!e.confRe.test(d)){if(typeof c==='object'){b.push(' ',d,'="');e.generateStyles(c,b,!0).push('"')}else {b.push(' ',e.attributeTransform[d]||d,'="',c,'"')}}}}if(e.emptyTags.test(f)){b.push('/>')}else {b.push('>');if(c=a.tpl){c.applyOut(a.tplData,b)}if(c=a.html){b.push(c)}if(c=a.cn||a.children){e.generateMarkup(c,b)}h=e.closeTags;b.push(h[f]||(h[f]='</'+f+'>'))}}}return b},generateStyles:function(c,d,f){var e=d||[],a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];a=this.decamelizeName(a);if(f&&Ext.String.hasHtmlCharacters(b)){b=Ext.String.htmlEncode(b)}e.push(a,':',b,';')}}return d||e.join('')},markup:function(a){if(typeof a==='string'){return a}var b=this.generateMarkup(a,[]);return b.join('')},applyStyles:function(b,a){Ext.fly(b).applyStyles(a)},createContextualFragment:function(e){var d=this.detachedDiv,b=document.createDocumentFragment(),c,a;d.innerHTML=e;a=d.childNodes;c=a.length;while(c--){b.appendChild(a[0])}return b},createDom:function(e,f){var c=this,d=c.markup(e),b=c.detachedDiv,a;b.innerHTML=d;a=b.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?a.cloneNode(!0):a},insertHtml:function(g,f,j){var o=this,l,k,n,m,i;g=g.toLowerCase();if(f.insertAdjacentHTML){if(o.ieInsertHtml){i=o.ieInsertHtml(g,f,j);if(i){return i}}l=h[g];if(l){f.insertAdjacentHTML(l[0],j);return f[l[1]]}}else {if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}k=Ext.supports.CreateContextualFragment?f.ownerDocument.createRange():undefined;m='setStart'+(this.endRe.test(g)?'After':'Before');if(e[g]){if(k){k[m](f);i=k.createContextualFragment(j)}else {i=this.createContextualFragment(j)}f.parentNode.insertBefore(i,g===a?f:f.nextSibling);return f[(g===a?'previous':'next')+'Sibling']}else {n=(g===b?'first':'last')+'Child';if(f.firstChild){if(k){try{k[m](f[n]);i=k.createContextualFragment(j)}catch(p){i=this.createContextualFragment(j)}}else {i=this.createContextualFragment(j)}if(g===b){f.insertBefore(i,f.firstChild)}else {f.appendChild(i)}}else {f.innerHTML=j}return f[n]}}},insertBefore:function(c,d,b){return this.doInsert(c,d,b,a)},insertAfter:function(b,c,a){return this.doInsert(b,c,a,d)},insertFirst:function(c,d,a){return this.doInsert(c,d,a,b)},append:function(b,d,a){return this.doInsert(b,d,a,c)},overwrite:function(b,c,e){var d=this,a;b=Ext.getDom(b);c=d.markup(c);if(d.ieOverwrite){a=d.ieOverwrite(b,c)}if(!a){b.innerHTML=c;a=b.firstChild}return e?Ext.get(a):a},doInsert:function(f,j,k,g){var i=this,h;f=f.dom||Ext.getDom(f);if('innerHTML' in f){h=i.insertHtml(g,f,i.markup(j))}else {h=i.createDom(j,null);if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}if(e[g]){f.parentNode.insertBefore(h,g===a?f:f.nextSibling)}else {if(f.firstChild&&g===b){f.insertBefore(h,f.firstChild)}else {f.appendChild(h)}}}return k?Ext.get(h):h},createTemplate:function(b){var a=this.markup(b);return new Ext.Template(a)},createHtml:function(a){return this.markup(a)}}},0,0,0,0,0,0,[Ext.dom,'Helper',Ext,'DomHelper',Ext.core,'DomHelper'],0);Ext.define('Ext.overrides.dom.Helper',function(){var a=/^(?:table|thead|tbody|tr|td)$/i,f=/td|tr|tbody|thead/i,e='<table>',d='</table>',c=e+'<tbody>',b='</tbody>'+d,h=c+'<tr>',g='</tr>'+b;return {override:'Ext.dom.Helper',ieInsertHtml:function(d,b,e){var c=null;if(Ext.isIE9m&&a.test(b.tagName)){c=this.insertIntoTable(b.tagName.toLowerCase(),d,b,e)}return c},ieOverwrite:function(b,c){if(Ext.isIE9m&&a.test(b.tagName)){while(b.firstChild){b.removeChild(b.firstChild)}if(c){return this.insertHtml('afterbegin',b,c)}}},ieTable:function(g,f,e,d){var h=-1,a=this.detachedDiv,b,c;a.innerHTML=[f,e,d].join('');while(++h<g){a=a.firstChild}b=a.nextSibling;if(b){b=a;a=document.createDocumentFragment();while(b){c=b.nextSibling;a.appendChild(b);b=c}}return a},insertIntoTable:function(a,k,i,o){var j,q,n=k==='beforebegin',l=k==='afterbegin',p=k==='beforeend',m=k==='afterend';if(a==='td'&&(l||p)||!f.test(a)&&(n||m)){return null}q=n?i:m?i.nextSibling:l?i.firstChild:null;if(n||m){i=i.parentNode}if(a==='td'||a==='tr'&&(p||l)){j=this.ieTable(4,h,o,g)}else {if((a==='tbody'||a==='thead')&&(p||l)||a==='tr'&&(n||m)){j=this.ieTable(3,c,o,b)}else {j=this.ieTable(2,e,o,d)}}i.insertBefore(j,q);return j}}}());Ext.cmd.derive('Ext.dom.Query',Ext.Base,function(){var DQ,doc=document,cache,simpleCache,valueCache,useClassList=!!doc.documentElement.classList,useElementPointer=!!doc.documentElement.firstElementChild,useChildrenCollection=function(){var a=doc.createElement('div');a.innerHTML='<!-- -->text<!-- -->';return a.children&&a.children.length===0}(),nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*\|\\]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*#/,isIE=window.ActiveXObject?!0:!1,key=30803,longHex=/\\([0-9a-fA-F]{6})/g,shortHex=/\\([0-9a-fA-F]{1,6})\s{0,1}/g,nonHex=/\\([^0-9a-fA-F]{1})/g,escapes=/\\/g,num,hasEscapes,supportsColonNsSeparator=function(){var a,b='<r><a:b xmlns:a="n"></a:b></r>';if(window.DOMParser){a=(new DOMParser()).parseFromString(b,'application/xml')}else {a=new ActiveXObject('Microsoft.XMLDOM');a.loadXML(b)}return !!a.getElementsByTagName('a:b').length}(),longHexToChar=function(b,a){return String.fromCharCode(parseInt(a,16))},shortToLongHex=function(b,a){while(a.length<6){a='0'+a}return '\\'+a},charToLongHex=function(b,a){num=a.charCodeAt(0).toString(16);if(num.length===1){num='0'+num}return '\\0000'+num},unescapeCssSelector=function(a){return hasEscapes?a.replace(longHex,longHexToChar):a},setupEscapes=function(a){hasEscapes=a.indexOf('\\')>-1;if(hasEscapes){a=a.replace(shortHex,shortToLongHex).replace(nonHex,charToLongHex).replace(escapes,'\\\\')}return a};eval('var batch = 30803, child, next, prev, byClassName;');child=useChildrenCollection?function child(a,b){return a.children[b]}:function child(b,c){var d=0,a=b.firstChild;while(a){if(a.nodeType==1){if(++d==c){return a}}a=a.nextSibling}return null};next=useElementPointer?function(a){return a.nextElementSibling}:function(a){while((a=a.nextSibling)&&a.nodeType!=1){}return a};prev=useElementPointer?function(a){return a.previousElementSibling}:function(a){while((a=a.previousSibling)&&a.nodeType!=1){}return a};function children(c){var a=c.firstChild,d=-1,b;while(a){b=a.nextSibling;if(a.nodeType==3&&!nonSpace.test(a.nodeValue)){c.removeChild(a)}else {a.nodeIndex=++d}a=b}return this}byClassName=useClassList?function(f,a){a=unescapeCssSelector(a);if(!a){return f}var d=[],g=-1,e,b,c;for(e=0;b=f[e];e++){c=b.classList;if(c){if(c.contains(a)){d[++g]=b}}else {if((' '+b.className+' ').indexOf(a)!==-1){d[++g]=b}}}return d}:function(d,a){a=unescapeCssSelector(a);if(!a){return d}var e=[],f=-1,c,b;for(c=0;b=d[c];c++){if((' '+b.className+' ').indexOf(a)!==-1){e[++f]=b}}return e};function attrValue(a,b){if(!a.tagName&&typeof a.length!='undefined'){a=a[0]}if(!a){return null}if(b=='for'){return a.htmlFor}if(b=='class'||b=='className'){return a.className}return a.getAttribute(b)||a[b]}function getNodes(d,i,a){var f=[],k=-1,m,b,h,e,j,n,g,c,l;if(!d){return f}a=a.replace('|',':')||'*';if(typeof d.getElementsByTagName!='undefined'){d=[d]}if(!i){a=unescapeCssSelector(a);if(!supportsColonNsSeparator&&DQ.isXml(d[0])&&a.indexOf(':')!==-1){for(b=0;h=d[b];b++){m=h.getElementsByTagName(a.split(':').pop());for(e=0;j=m[e];e++){if(j.tagName===a){f[++k]=j}}}}else {for(b=0;h=d[b];b++){m=h.getElementsByTagName(a);for(e=0;j=m[e];e++){f[++k]=j}}}}else {if(i=='/'||i=='>'){g=a.toUpperCase();for(b=0;h=d[b];b++){n=h.childNodes;for(e=0;l=n[e];e++){if(l.nodeName==g||l.nodeName==a||a=='*'){f[++k]=l}}}}else {if(i=='+'){g=a.toUpperCase();for(b=0;c=d[b];b++){while((c=c.nextSibling)&&c.nodeType!=1){}if(c&&(c.nodeName==g||c.nodeName==a||a=='*')){f[++k]=c}}}else {if(i=='~'){g=a.toUpperCase();for(b=0;c=d[b];b++){while(c=c.nextSibling){if(c.nodeName==g||c.nodeName==a||a=='*'){f[++k]=c}}}}}}}return f}function concat(a,b){a.push.apply(a,b);return a}function byTag(a,b){if(a.tagName||a===doc){a=[a]}if(!b){return a}var e=[],f=-1,d,c;b=b.toLowerCase();for(d=0;c=a[d];d++){if(c.nodeType==1&&c.tagName.toLowerCase()==b){e[++f]=c}}return e}function byId(a,c){c=unescapeCssSelector(c);if(a.tagName||a===doc){a=[a]}if(!c){return a}var d=[],f=-1,e,b;for(e=0;b=a[e];e++){if(b&&b.id==c){d[++f]=b;return d}}return d}function byAttribute(l,c,d,m,k){var h=[],n=-1,j=k=='{',e=DQ.operators[m],b,i,g,f,a;d=unescapeCssSelector(d);for(f=0;a=l[f];f++){if(a.nodeType===1){if(!g){i=DQ.isXml(a);g=!0}if(!i){if(j){b=DQ.getStyle(a,c)}else {if(c=='class'||c=='className'){b=a.className}else {if(c=='for'){b=a.htmlFor}else {if(c=='href'){b=a.getAttribute('href',2)}else {b=a.getAttribute(c)}}}}}else {b=a.getAttribute(c)}if(e&&e(b,d)||!e&&b){h[++n]=a}}}return h}function byPseudo(c,b,a){a=unescapeCssSelector(a);return DQ.pseudos[b](c,a)}function nodupIEXml(b){var f=++key,e,a,c,d;b[0].setAttribute('_nodup',f);e=[b[0]];for(a=1,c=b.length;a<c;a++){d=b[a];if(!d.getAttribute('_nodup')!=f){d.setAttribute('_nodup',f);e[e.length]=d}}for(a=0,c=b.length;a<c;a++){b[a].removeAttribute('_nodup')}return e}function nodup(a){if(!a){return []}var h=a.length,g,d,e=a,f,i=-1,c,b;if(!h||typeof a.nodeType!='undefined'||h==1){return a}if(isIE&&typeof a[0].selectSingleNode!='undefined'){return nodupIEXml(a)}c=++key;a[0]._nodup=c;for(d=1;g=a[d];d++){if(g._nodup!=c){g._nodup=c}else {e=[];for(b=0;b<d;b++){e[++i]=a[b]}for(b=d+1;f=a[b];b++){if(f._nodup!=c){f._nodup=c;e[++i]=f}}return e}}return e}function quickDiffIEXml(c,d){var f=++key,e=[],a,b;for(a=0,b=c.length;a<b;a++){c[a].setAttribute('_qdiff',f)}for(a=0,b=d.length;a<b;a++){if(d[a].getAttribute('_qdiff')!=f){e[e.length]=d[a]}}for(a=0,b=c.length;a<b;a++){c[a].removeAttribute('_qdiff')}return e}function quickDiff(c,b){var e=c.length,g=++key,d=[],a,f;if(!e){return b}if(isIE&&typeof c[0].selectSingleNode!='undefined'){return quickDiffIEXml(c,b)}for(a=0;a<e;a++){c[a]._qdiff=g}for(a=0,f=b.length;a<f;a++){if(b[a]._qdiff!=g){d[d.length]=b[a]}}return d}function quickId(b,d,c,a){if(b==c){a=unescapeCssSelector(a);var e=c.ownerDocument||c;return e.getElementById(a)}b=getNodes(b,d,'*');return byId(b,a)}return {singleton:!0,alternateClassName:['Ext.core.DomQuery','Ext.DomQuery'],_init:function(){DQ=this;DQ.operators=Ext.Object.chain(Ext.util.Operators);DQ._cache=cache=new Ext.util.LruCache({maxSize:200});DQ._valueCache=valueCache=new Ext.util.LruCache({maxSize:200});DQ._simpleCache=simpleCache=new Ext.util.LruCache({maxSize:200})},clearCache:function(){cache.clear();valueCache.clear();simpleCache.clear()},getStyle:function(b,a){return Ext.fly(b,'_DomQuery').getStyle(a)},compile:function(path,type){type=type||'select';var fn=['var f = function(root) {\n var mode; ++batch; var n = root || document;\n'],lastPath,matchers=DQ.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe),tokenMatch,matched,j,t,m;path=setupEscapes(path);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,'')+'";';path=path.replace(lmode[1],'')}while(path.substr(0,1)=='/'){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;tokenMatch=path.match(tagTokenRe);if(type=='select'){if(tokenMatch){if(tokenMatch[1]=='#'){fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");'}else {fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],'')}else {if(path.substr(0,1)!='@'){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else {if(tokenMatch){if(tokenMatch[1]=='#'){fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");'}else {fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],'')}}while(!(modeMatch=path.match(modeRe))){matched=!1;for(j=0;j<matchersLn;j++){t=matchers[j];m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(b,a){return m[a]});path=path.replace(m[0],'');matched=!0;break}}if(!matched){Ext.raise({sourceClass:'Ext.DomQuery',sourceMethod:'compile',msg:'Error parsing selector. Parsing failed at "'+path+'"'})}}if(modeMatch[1]){fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,'')+'";';path=path.replace(modeMatch[1],'')}}fn[fn.length]='return nodup(n);\n}';eval(fn.join(''));return f},jsSelect:function(i,c,j){c=c||doc;if(typeof c=='string'){c=doc.getElementById(c)}var g=Ext.splitAndUnescape(i,','),d=[],b,f,h,a,e;for(f=0,h=g.length;f<h;f++){a=g[f].replace(trimRe,'');b=cache.get(a);if(!b){b=DQ.compile(a,j);if(!b){Ext.raise({sourceClass:'Ext.DomQuery',sourceMethod:'jsSelect',msg:a+' is not a valid selector'})}cache.add(a,b)}else {setupEscapes(a)}e=b(c);if(e&&e!==doc){d=d.concat(e)}}if(g.length>1){return nodup(d)}return d},isXml:function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=='HTML':!1},select:doc.querySelectorAll?function(b,a,d,c){a=a||doc;if(!DQ.isXml(a)){try{if(a.parentNode&&a.nodeType!==9&&b.indexOf(',')===-1&&!startIdRe.test(b)){b=Ext.makeIdSelector(Ext.id(a))+' '+b;a=a.parentNode}return c?[a.querySelector(b)]:Ext.Array.toArray(a.querySelectorAll(b))}catch(e){}}return DQ.jsSelect.call(this,b,a,d)}:function(a,b,c){return DQ.jsSelect.call(this,a,b,c)},selectNode:function(a,b){return Ext.DomQuery.select(a,b,null,!0)[0]},selectValue:function(a,e,d){a=a.replace(trimRe,'');var b=valueCache.get(a),c,f;if(!b){b=DQ.compile(a,'select');valueCache.add(a,b)}else {setupEscapes(a)}c=b(e);return DQ.getNodeValue(c[0]||c,d)},getNodeValue:function(a,c){if(typeof a.normalize=='function'){a.normalize()}var d=a&&a.firstChild,b=d?d.nodeValue:null;if(c!==undefined&&(b==null||b==='')){b=c}return b},selectNumber:function(b,c,a){var d=DQ.selectValue(b,c,a||0);return parseFloat(d)},is:function(a,d){if(typeof a=='string'){a=doc.getElementById(a)}var b=Ext.isArray(a),c=DQ.filter(b?a:[a],d);return b?c.length==a.length:c.length>0},filter:function(d,a,e){a=a.replace(trimRe,'');var b=simpleCache.get(a),c;if(!b){b=DQ.compile(a,'simple');simpleCache.add(a,b)}else {setupEscapes(a)}c=b(d);return e?quickDiff(c,d):c},matchers:[{re:/^\.([\w\-\\]+)/,select:useClassList?'n = byClassName(n, "{1}");':'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w\-\\]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-\.]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],pseudos:{'first-child':function(f){var d=[],e=-1,a,b,c;for(b=0;c=a=f[b];b++){while((a=a.previousSibling)&&a.nodeType!=1){}if(!a){d[++e]=c}}return d},'last-child':function(f){var d=[],e=-1,a,b,c;for(b=0;c=a=f[b];b++){while((a=a.nextSibling)&&a.nodeType!=1){}if(!a){d[++e]=c}}return d},'nth-child':function(l,c){var g=[],h=-1,k=nthRe.exec(c=='even'&&'2n'||c=='odd'&&'2n+1'||!nthRe2.test(c)&&'n+'+c||c),i=(k[1]||1)-0,f=k[2]-0,e,b,j,a,d;for(e=0;b=l[e];e++){d=b.parentNode;if(batch!=d._batch){j=0;for(a=d.firstChild;a;a=a.nextSibling){if(a.nodeType==1){a.nodeIndex=++j}}d._batch=batch}if(i==1){if(f===0||b.nodeIndex==f){g[++h]=b}}else {if((b.nodeIndex+f)%i===0){g[++h]=b}}}return g},'only-child':function(e){var c=[],d=-1,b,a;for(b=0;a=e[b];b++){if(!prev(a)&&!next(a)){c[++d]=a}}return c},'empty':function(i){var g=[],h=-1,d,b,f,e,c,a;for(d=0;b=i[d];d++){f=b.childNodes;e=0;a=!0;while(c=f[e]){++e;if(c.nodeType==1||c.nodeType==3){a=!1;break}}if(a){g[++h]=b}}return g},'contains':function(e,f){var c=[],d=-1,b,a;for(b=0;a=e[b];b++){if((a.textContent||a.innerText||a.text||'').indexOf(f)!=-1){c[++d]=a}}return c},'nodeValue':function(e,f){var c=[],d=-1,b,a;for(b=0;a=e[b];b++){if(a.firstChild&&a.firstChild.nodeValue==f){c[++d]=a}}return c},'checked':function(e){var c=[],d=-1,b,a;for(b=0;a=e[b];b++){if(a.checked===!0){c[++d]=a}}return c},'not':function(b,a){return DQ.filter(b,a,!0)},'any':function(i,f){var h=f.split('|'),d=[],g=-1,e,b,a,c;for(b=0;a=i[b];b++){for(c=0;e=h[c];c++){if(DQ.is(a,e)){d[++g]=a;break}}}return d},'odd':function(a){return this['nth-child'](a,'odd')},'even':function(a){return this['nth-child'](a,'even')},'nth':function(b,a){return b[a-1]||[]},'first':function(a){return a[0]||[]},'last':function(a){return a[a.length-1]||[]},'has':function(f,e){var g=DQ.select,c=[],d=-1,b,a;for(b=0;a=f[b];b++){if(g(e,a).length>0){c[++d]=a}}return c},'next':function(h,g){var e=DQ.is,d=[],f=-1,b,a,c;for(b=0;a=h[b];b++){c=next(a);if(c&&e(c,g)){d[++f]=a}}return d},'prev':function(h,g){var e=DQ.is,d=[],f=-1,b,a,c;for(b=0;a=h[b];b++){c=prev(a);if(c&&e(c,g)){d[++f]=a}}return d},focusable:function(c){var e=c.length,d=[],b=0,a;for(;b<e;b++){a=c[b];if(Ext.fly(a,'_DomQuery').isFocusable()){d.push(a)}}return d},visible:function(c,e){var f=c.length,d=[],b=0,a;for(;b<f;b++){a=c[b];if(Ext.fly(a,'_DomQuery').isVisible(e)){d.push(a)}}return d},isScrolled:function(f){var d=[],e=-1,b,a,c;for(b=0;a=f[b];b++){c=Ext.fly(a,'_DomQuery').getScroll();if(c.top>0||c.left>0){d[++e]=a}}return d}}}},0,0,0,0,0,0,[Ext.dom,'Query',Ext.core,'DomQuery',Ext,'DomQuery'],function(){this._init()});Ext.cmd.derive('Ext.dom.GarbageCollector',Ext.Base,{singleton:!0,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.lastTime=Ext.now();a.resume()},collect:function(){var g=this,b=Ext.cache,a,f,c,d,e,h;for(a in b){if(!b.hasOwnProperty(a)){continue}c=b[a];if(c.skipGarbageCollection){continue}f=c.dom;try{e=Ext.isGarbage(f)}catch(i){delete b[a];continue}if(e){if(c&&c.dom){c.collect()}}}if(Ext.isIE9m){d={};for(a in b){if(b.hasOwnProperty(a)){d[a]=b[a]}}Ext.cache=Ext.dom.Element.cache=d}g.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&Ext.now()-b>a.interval){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,'GarbageCollector'],0);Ext.cmd.derive('Ext.event.gesture.Recognizer',Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return !1},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,'Recognizer'],0);Ext.cmd.derive('Ext.event.gesture.SingleTouch',Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:'Not Single Touch',TOUCH_MOVED:'Touch Moved',EVENT_CANCELED:'Event Canceled'},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return !1}},0,0,0,0,0,0,[Ext.event.gesture,'SingleTouch'],0);Ext.cmd.derive('Ext.event.gesture.DoubleTap',Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:'Different Target'},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:['singletap','doubletap'],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var a=this,b;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}b=a.lastStartPoint=c.changedTouches[0].point;a.startPoint=a.startPoint||b;a.startTime=c.time;clearTimeout(a.singleTapTimer)},onTouchMove:function(c){var a=this,b=c.changedTouches[0].point;if(Math.abs(b.getDistanceTo(a.lastStartPoint))>=a.getMoveDistance()){a.startPoint=null;return a.fail(a.self.TOUCH_MOVED)}},onTouchEnd:function(b){var a=this,f=a.getMaxDuration(),d=b.time,g=b.target,e=a.lastTapTime,h=a.lastTarget,i=b.changedTouches[0].point,c;a.lastTapTime=d;a.lastTarget=g;if(e){c=d-e;if(c<=f&&Math.abs(i.getDistanceTo(a.startPoint))<=a.getTapDistance()){if(g!==h){return a.fail(a.self.DIFFERENT_TARGET)}a.lastTarget=null;a.lastTapTime=0;a.fire('doubletap',b,{touch:b.changedTouches[0],duration:c});a.startPoint=null;return}}if(d-a.startTime>f){a.fireSingleTap(b)}else {a.setSingleTapTimer(b)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(b,a){this.fire('singletap',b,{touch:a});this.startPoint=null},reset:function(){var a=this;a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,'DoubleTap'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)});Ext.cmd.derive('Ext.event.gesture.Drag',Ext.event.gesture.SingleTouch,{priority:100,isStarted:!1,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:['dragstart','drag','dragend','dragcancel'],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=!1;this.onTouchEnd(this.lastMoveEvent)}return !1}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(a){var f=this.startPoint,b=a.changedTouches[0],c=b.point,e=this.getMinDistance(),d=this.info;if(Math.abs(c.getDistanceTo(f))>=e){this.isStarted=!0;this.previousPoint=this.lastPoint=c;this.resetInfo('x',a,b);this.resetInfo('y',a,b);d.time=a.time;this.fire('dragstart',a,d)}},onTouchMove:function(a){if(!this.isStarted){this.tryDragStart(a)}if(!this.isStarted){return}var b=a.changedTouches[0],c=b.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=c;this.lastMoveEvent=a;this.updateInfo('x',a,b);this.updateInfo('y',a,b);this.info.time=a.time;this.fire('drag',a,this.info)},onAxisDragEnd:function(b,a){var c=a.time-a.previousTime[b];if(c>0){a.flick.velocity[b]=(a[b]-a.previous[b])/c}},resetInfo:function(b,h,g){var f=this.lastPoint[b],d=this.startPoint[b],e=f-d,c=b.toUpperCase(),a=this.info;a.touch=g;a.delta[b]=e;a.absDelta[b]=Math.abs(e);a.previousTime[b]=this.startTime;a.previous[b]=d;a[b]=f;a.direction[b]=0;a['start'+c]=this.startPoint[b];a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=0;a.startTime=this.startTime},updateInfo:function(b,l,k){var e=this,d=e.lastPoint[b],g=e.previousPoint[b],f=e.startPoint[b],i=d-f,a=e.info,h=a.direction,c=b.toUpperCase(),j=a.previous[b];a.touch=k;a.delta[b]=i;a.absDelta[b]=Math.abs(i);if(d!==j&&d!==a[b]){a.previous[b]=a[b];a.previousTime[b]=a.time}a[b]=d;if(d>g){h[b]=1}else {if(d<g){h[b]=-1}}a['start'+c]=f;a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=a.previous[b]-f;a.startTime=e.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,!0);return !1},doEnd:function(a,d){if(!this.isStarted){this.tryDragStart(a)}if(this.isStarted){var c=a.changedTouches[0],e=c.point,b=this.info;this.isStarted=!1;this.lastPoint=e;this.updateInfo('x',a,c);this.updateInfo('y',a,c);b.time=a.time;this.onAxisDragEnd('x',b);this.onAxisDragEnd('y',b);this.fire(d?'dragcancel':'dragend',a,b);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,'Drag'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.drag)});Ext.cmd.derive('Ext.event.gesture.Swipe',Ext.event.gesture.SingleTouch,{priority:500,handledEvents:['swipestart','swipe','swipecancel'],inheritableStatics:{MAX_OFFSET_EXCEEDED:'Max Offset Exceeded',MAX_DURATION_EXCEEDED:'Max Duration Exceeded',DISTANCE_NOT_ENOUGH:'Distance Not Enough'},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(b){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}var a=b.changedTouches[0];this.startTime=b.time;this.isHorizontal=!0;this.isVertical=!0;this.startX=a.pageX;this.startY=a.pageY},onTouchMove:function(b){var f=b.changedTouches[0],h=f.pageX,i=f.pageY,k=h-this.startX,l=i-this.startY,c=Math.abs(h-this.startX),d=Math.abs(i-this.startY),j=b.time-this.startTime,g=this.getMinDistance(),m=b.time,a,e;if(m-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&d>this.getMaxOffset()){this.isHorizontal=!1}if(this.isVertical&&c>this.getMaxOffset()){this.isVertical=!1}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&c<g){a=k<0?'left':'right';e=c}else {if(this.isVertical&&d<g){a=l<0?'up':'down';e=d}}}if(a&&!this.started){this.started=!0;this.fire('swipestart',b,{touch:f,direction:a,distance:e,duration:j})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(a){if(this.onTouchMove(a)===!1){return !1}var d=a.changedTouches[0],k=d.pageX,l=d.pageY,h=k-this.startX,i=l-this.startY,f=Math.abs(h),g=Math.abs(i),e=this.getMinDistance(),j=a.time-this.startTime,b,c;if(this.isVertical&&g<e){this.isVertical=!1}if(this.isHorizontal&&f<e){this.isHorizontal=!1}if(this.isHorizontal){b=h<0?'left':'right';c=f}else {if(this.isVertical){b=i<0?'up':'down';c=g}else {return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=!1;this.fire('swipe',a,{touch:d,direction:b,distance:c,duration:j})},onTouchCancel:function(a){this.fire('swipecancel',a);return !1},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,'Swipe'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.swipe)});Ext.cmd.derive('Ext.event.gesture.EdgeSwipe',Ext.event.gesture.Swipe,{priority:800,handledEvents:['edgeswipe','edgeswipestart','edgeswipeend','edgeswipecancel'],inheritableStatics:{NOT_NEAR_EDGE:'Not Near Edge'},config:{minDistance:60},onTouchStart:function(b){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===!1){return !1}var a=b.changedTouches[0];this.started=!1;this.direction=null;this.isHorizontal=!0;this.isVertical=!0;this.startX=a.pageX;this.startY=a.pageY},onTouchMove:function(c){var e=c.changedTouches[0],l=e.pageX,m=e.pageY,f=l-this.startX,g=m-this.startY,i=Math.abs(m-this.startY),h=Math.abs(l-this.startX),d=this.getMinDistance(),j=this.getMaxOffset(),k=c.time-this.startTime,o=Ext.Viewport&&Ext.Element.getViewportWidth(),n=Ext.Viewport&&Ext.Element.getViewportHeight(),a,b;if(this.isVertical&&h>j){this.isVertical=!1}if(this.isHorizontal&&i>j){this.isHorizontal=!1}if(this.isVertical&&this.isHorizontal){if(i>h){this.isHorizontal=!1}else {this.isVertical=!1}}if(this.isHorizontal){a=f<0?'left':'right';b=f}else {if(this.isVertical){a=g<0?'up':'down';b=g}}a=this.direction||(this.direction=a);if(a==='up'){b=g*-1}else {if(a==='left'){b=f*-1}}this.distance=b;if(!b){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(a==='right'&&this.startX>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='down'&&this.startY>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='left'&&o-this.startX>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='up'&&n-this.startY>d){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=!0;this.startTime=c.time;this.fire('edgeswipestart',c,{touch:e,direction:a,distance:b,duration:k})}else {this.fire('edgeswipe',c,{touch:e,direction:a,distance:b,duration:k})}},onTouchEnd:function(a){var b;if(this.onTouchMove(a)!==!1){b=a.time-this.startTime;this.fire('edgeswipeend',a,{touch:a.changedTouches[0],direction:this.direction,distance:this.distance,duration:b})}},onTouchCancel:function(a){this.fire('edgeswipecancel',a,{touch:a.changedTouches[0]});return !1},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,'EdgeSwipe'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)});Ext.cmd.derive('Ext.event.gesture.LongPress',Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:'Duration Not Enough'},config:{moveDistance:8,minDuration:1000},handledEvents:['longpress','taphold'],fireLongPress:function(a){this.fire('longpress',a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=!0},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}this.startPoint=a.changedTouches[0].point;this.isLongPress=!1;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(b){if(b==='longpress'){var a=Array.prototype.slice.call(arguments);a[0]='taphold';this.fire.apply(this,a)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,'LongPress'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)});Ext.cmd.derive('Ext.event.gesture.MultiTouch',Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:!1,isStarted:!1,onTouchStart:function(a){var b=this.requiredTouchesCount,d=a.touches,c=d.length;if(c===b){this.start(a)}else {if(c>b){this.end(a)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,!0);return !1},start:function(){if(!this.isTracking){this.isTracking=!0;this.isStarted=!1}},end:function(b,a){if(this.isTracking){this.isTracking=!1;if(this.isStarted){this.isStarted=!1;this[a?'fireCancel':'fireEnd'](b)}}},reset:function(){this.isTracking=this.isStarted=!1}},0,0,0,0,0,0,[Ext.event.gesture,'MultiTouch'],0);Ext.cmd.derive('Ext.event.gesture.Pinch',Ext.event.gesture.MultiTouch,{priority:600,handledEvents:['pinchstart','pinch','pinchend','pinchcancel'],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,e,d,a;e=b[0].point;d=b[1].point;a=e.getDistanceTo(d);if(a===0){return}if(!this.isStarted){this.isStarted=!0;this.startDistance=a;this.fire('pinchstart',c,{touches:b,distance:a,scale:1})}else {this.fire('pinch',c,{touches:b,distance:a,scale:a/this.startDistance})}},fireEnd:function(a){this.fire('pinchend',a)},fireCancel:function(a){this.fire('pinchcancel',a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Pinch'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.pinch)});Ext.cmd.derive('Ext.event.gesture.Rotate',Ext.event.gesture.MultiTouch,{priority:700,handledEvents:['rotatestart','rotate','rotateend','rotatecancel'],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(g){if(!this.isTracking){return}var b=g.touches,c=this.lastAngle,i,h,a,e,d,f;i=b[0].point;h=b[1].point;a=i.getAngleTo(h);if(c!==null){f=Math.abs(c-a);e=a+360;d=a-360;if(Math.abs(e-c)<f){a=e}else {if(Math.abs(d-c)<f){a=d}}}this.lastAngle=a;if(!this.isStarted){this.isStarted=!0;this.startAngle=a;this.fire('rotatestart',g,{touches:b,angle:a,rotation:0})}else {this.fire('rotate',g,{touches:b,angle:a,rotation:a-this.startAngle})}this.lastTouches=Ext.Array.clone(b)},fireEnd:function(a){this.lastAngle=null;this.fire('rotateend',a)},fireCancel:function(a){this.lastAngle=null;this.fire('rotatecancel',a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Rotate'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.rotate)});Ext.cmd.derive('Ext.event.gesture.Tap',Ext.event.gesture.SingleTouch,{priority:200,handledEvents:['tap','tapcancel'],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===!1){return !1}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var a=b.changedTouches[0],c=a.point;if(Math.abs(c.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire('tapcancel',b,{touch:a});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire('tap',a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire('tapcancel',a,{touch:a.changedTouches[0]});return !1},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,'Tap'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)});Ext.cmd.derive('Ext.event.publisher.Focus',Ext.event.publisher.Dom,{type:'focus',handledEvents:['focusenter','focusleave','focusmove'],handledDomEvents:['focusin','focusout'],doDelegatedEvent:function(a,c){var d=this,b;a=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,a,!1);if(a){if(a.type==='focusout'){if(a.relatedTarget==null){d.processFocusIn(a,a.target,document.body,c)}}else {b=a.relatedTarget;d.processFocusIn(a,b==null||!b.tagName?document.body:b,a.target,c)}}},processFocusIn:function(i,d,e,l){var c=this,h,a,b=[],f,g,j,k;j=Ext.fly(d);k=Ext.fly(e);if(j&&j.isFocusSuspended()||k&&k.isFocusSuspended()){return}for(a=d,h=Ext.dom.Element.getCommonAncestor(e,d,!0);a&&a!==h;a=a.parentNode){b.push(a)}if(b.length){f=c.createSyntheticEvent('focusleave',i,d,e);c.publish('focusleave',b,f);if(f.isStopped){return}}b.length=0;for(a=e;a!==h;a=a.parentNode){b.push(a)}g=c.createSyntheticEvent('focusenter',i,e,d);if(b.length){c.publish('focusenter',b,g);if(g.isStopped){return}}b=c.getPropagatingTargets(h);if(b.length){f=c.createSyntheticEvent('focusmove',i,e,d);c.publish('focusmove',b,f);if(f.isStopped){return}}if(l){c.afterEvent(i)}Ext.GlobalEvents.fireEvent('focus',{event:g,toElement:e,fromElement:d})},createSyntheticEvent:function(d,c,e,b){var a=new Ext.event.Event(c);a.type=d;a.relatedTarget=b;a.target=e;return a}},0,0,0,0,0,0,[Ext.event.publisher,'Focus'],function(a){var b;a.instance=new a();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:['focus','blur'],doDelegatedEvent:function(c,e){var d=this;c=d.callSuper([c,!1]);if(c){clearTimeout(b);b=0;if(c.type==='blur'){var f=c.target===window?document.body:c.target;b=setTimeout(function(){b=0;d.processFocusIn(c,f,document.body,e);a.previousActiveElement=null},0);if(c.target===window||c.target===document){a.previousActiveElement=null}else {a.previousActiveElement=c.target}}else {d.processFocusIn(c,a.previousActiveElement||document.body,c.target===window?document.body:c.target,e)}}}})}});Ext.cmd.derive('Ext.fx.State',Ext.Base,{isAnimatable:{'background-color':!0,'background-image':!0,'background-position':!0,'border-bottom-color':!0,'border-bottom-width':!0,'border-color':!0,'border-left-color':!0,'border-left-width':!0,'border-right-color':!0,'border-right-width':!0,'border-spacing':!0,'border-top-color':!0,'border-top-width':!0,'border-width':!0,'bottom':!0,'color':!0,'crop':!0,'font-size':!0,'font-weight':!0,'height':!0,'left':!0,'letter-spacing':!0,'line-height':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'opacity':!0,'outline-color':!0,'outline-offset':!0,'outline-width':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'right':!0,'text-indent':!0,'text-shadow':!0,'top':!0,'vertical-align':!0,'visibility':!0,'width':!0,'word-spacing':!0,'z-index':!0,'zoom':!0,'transform':!0},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(d,a){var g=this.data,e=Ext.isArray(a),b=g.transform,c,f;if(!b){b=g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof d=='string'){switch(d){case 'translate':if(e){c=a.length;if(c==0){break}b.translateX=a[0];if(c==1){break}b.translateY=a[1];if(c==2){break}b.translateZ=a[2]}else {b.translateX=a};break;case 'rotate':if(e){c=a.length;if(c==0){break}b.rotateX=a[0];if(c==1){break}b.rotateY=a[1];if(c==2){break}b.rotateZ=a[2]}else {b.rotate=a};break;case 'scale':if(e){c=a.length;if(c==0){break}b.scaleX=a[0];if(c==1){break}b.scaleY=a[1];if(c==2){break}b.scaleZ=a[2]}else {b.scaleX=a;b.scaleY=a};break;case 'skew':if(e){c=a.length;if(c==0){break}b.skewX=a[0];if(c==1){break}b.skewY=a[1]}else {b.skewX=a};break;default:b[d]=a;}}else {for(f in d){if(d.hasOwnProperty(f)){a=d[f];this.setTransform(f,a)}}}},set:function(b,a){var d=this.data,c;if(typeof b!='string'){for(c in b){a=b[c];if(c==='transform'){this.setTransform(a)}else {d[c]=a}}}else {if(b==='transform'){this.setTransform(a)}else {d[b]=a}}return this},unset:function(b){var a=this.data;if(a.hasOwnProperty(b)){delete a[b]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,'State'],0);Ext.cmd.derive('Ext.fx.animation.Abstract',Ext.Evented,{isAnimation:!0,config:{name:'',element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:'linear',iteration:1,direction:'normal',delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:'0%',STATE_TO:'100%',DIRECTION_UP:'up',DIRECTION_DOWN:'down',DIRECTION_LEFT:'left',DIRECTION_RIGHT:'right',stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(b){var c=this.stateNameRegex,a;for(a in b){if(c.test(a)){this.setState(a,b[a])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent('stop',this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(c,d){var b=this.getStates(),a;a=Ext.factory(d,Ext.fx.State,b[c]);if(a){b[c]=a}return this},getState:function(a){return this.getStates()[a]},getData:function(){var a=this,b=a.getStates(),d={},e=a.getBefore(),f=a.getAfter(),k=b[a.STATE_FROM],l=b[a.STATE_TO],i=k.getData(),j=l.getData(),h,c,g;for(c in b){if(b.hasOwnProperty(c)){g=b[c];h=g.getData();d[c]=h}}return {before:e?e.getData():{},after:f?f.getData():{},states:d,from:i,to:j,duration:a.getDuration(),iteration:a.getIteration(),direction:a.getDirection(),easing:a.getEasing(),delay:a.getDelay(),onEnd:a.getOnEnd(),onBeforeEnd:a.getOnBeforeEnd(),onBeforeStart:a.getOnBeforeStart(),scope:a.getScope(),preserveEndState:a.getPreserveEndState(),replacePrevious:a.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,'Abstract'],0);Ext.cmd.derive('Ext.fx.animation.Slide',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.SlideIn',config:{direction:'left',out:!1,offset:0,easing:'auto',containerBox:'auto',elementBox:'auto',isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:'down',down:'up',left:'right',right:'left'},applyEasing:function(a){if(a==='auto'){return 'ease-'+(this.getOut()?'in':'out')}return a},getContainerBox:function(){var a=this._containerBox;if(a==='auto'){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==='auto'){a=this.getElement().getBox()}return a},getData:function(){var o=this.getElementBox(),b=this.getContainerBox(),a=o?o:b,j=this.getFrom(),m=this.getTo(),d=this.getOut(),c=this.getOffset(),g=this.getDirection(),n=this.getUseCssTransform(),p=this.getReverse(),e=0,f=0,h,i,k,l;if(p){g=this.reverseDirectionMap[g]}switch(g){case this.DIRECTION_UP:if(d){f=b.top-a.top-a.height-c}else {f=b.bottom-a.bottom+a.height+c};break;case this.DIRECTION_DOWN:if(d){f=b.bottom-a.bottom+a.height+c}else {f=b.top-a.height-a.top-c};break;case this.DIRECTION_RIGHT:if(d){e=b.right-a.right+a.width+c}else {e=b.left-a.left-a.width-c};break;case this.DIRECTION_LEFT:if(d){e=b.left-a.left-a.width-c}else {e=b.right-a.right+a.width+c};break;}h=d?0:e;i=d?0:f;if(n){j.setTransform({translateX:h,translateY:i})}else {j.set('left',h);j.set('top',i)}k=d?e:0;l=d?f:0;if(n){m.setTransform({translateX:k,translateY:l})}else {m.set('left',k);m.set('top',l)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,['animation.slide','animation.slideIn'],0,[Ext.fx.animation,'Slide',Ext.fx.animation,'SlideIn'],0);Ext.cmd.derive('Ext.fx.animation.SlideOut',Ext.fx.animation.Slide,{config:{out:!0}},0,0,0,0,['animation.slideOut'],0,[Ext.fx.animation,'SlideOut'],0);Ext.cmd.derive('Ext.fx.animation.Fade',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.FadeIn',config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(c){var b=this.getTo(),a=this.getFrom();if(c){a.set('opacity',1);b.set('opacity',0)}else {a.set('opacity',0);b.set('opacity',1)}}},0,0,0,0,['animation.fade','animation.fadeIn'],0,[Ext.fx.animation,'Fade',Ext.fx.animation,'FadeIn'],0);Ext.cmd.derive('Ext.fx.animation.FadeOut',Ext.fx.animation.Fade,{config:{out:!0,before:{}}},0,0,0,0,['animation.fadeOut'],0,[Ext.fx.animation,'FadeOut'],0);Ext.cmd.derive('Ext.fx.animation.Flip',Ext.fx.animation.Abstract,{config:{easing:'ease-in',direction:'right',half:!1,out:null},getData:function(){var c=this,k=c.getFrom(),m=c.getTo(),j=c.getDirection(),b=c.getOut(),l=c.getHalf(),a=l?90:180,h=1,i=1,d=0,e=0,f=0,g=0;if(b){i=0.8}else {h=0.8}switch(j){case this.DIRECTION_UP:if(b){f=a}else {d=-a};break;case this.DIRECTION_DOWN:if(b){f=-a}else {d=a};break;case this.DIRECTION_RIGHT:if(b){g=a}else {e=-a};break;case this.DIRECTION_LEFT:if(b){g=-a}else {e=a};break;}k.setTransform({rotateX:d,rotateY:e,scale:h});m.setTransform({rotateX:f,rotateY:g,scale:i});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,['animation.flip'],0,[Ext.fx.animation,'Flip'],0);Ext.cmd.derive('Ext.fx.animation.Pop',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.PopIn',config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var b=this.getTo(),a=this.getFrom(),c=this.getOut();if(c){a.set('opacity',1);a.setTransform({scale:1});b.set('opacity',0);b.setTransform({scale:0})}else {a.set('opacity',0);a.setTransform({scale:0});b.set('opacity',1);b.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,['animation.pop','animation.popIn'],0,[Ext.fx.animation,'Pop',Ext.fx.animation,'PopIn'],0);Ext.cmd.derive('Ext.fx.animation.PopOut',Ext.fx.animation.Pop,{config:{out:!0,before:{}}},0,0,0,0,['animation.popOut'],0,[Ext.fx.animation,'PopOut'],0);Ext.cmd.derive('Ext.fx.Animation',Ext.Base,{constructor:function(a){var c=Ext.fx.animation.Abstract,b;if(typeof a=='string'){b=a;a={}}else {if(a&&a.type){b=a.type}}if(b){c=Ext.ClassManager.getByAlias('animation.'+b)}return Ext.factory(a,c)}},1,0,0,0,0,0,[Ext.fx,'Animation'],0);Ext.cmd.derive('Ext.fx.runner.Css',Ext.Evented,{prefixedProperties:{'transform':!0,'transform-origin':!0,'perspective':!0,'transform-style':!0,'transition':!0,'transition-property':!0,'transition-duration':!0,'transition-timing-function':!0,'transition-delay':!0,'animation':!0,'animation-name':!0,'animation-duration':!0,'animation-iteration-count':!0,'animation-direction':!0,'animation-timing-function':!0,'animation-delay':!0},lengthProperties:{'top':!0,'right':!0,'bottom':!0,'left':!0,'width':!0,'height':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'border-bottom-width':!0,'border-left-width':!0,'border-right-width':!0,'border-spacing':!0,'border-top-width':!0,'border-width':!0,'outline-width':!0,'letter-spacing':!0,'line-height':!0,'text-indent':!0,'word-spacing':!0,'font-size':!0,'translate':!0,'translateX':!0,'translateY':!0,'translateZ':!0,'translate3d':!0},durationProperties:{'transition-duration':!0,'transition-delay':!0,'animation-duration':!0,'animation-delay':!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:'px',DEFAULT_UNIT_ANGLE:'deg',DEFAULT_UNIT_DURATION:'ms',formattedNameCache:{},transformMethods3d:['translateX','translateY','translateZ','rotate','rotateX','rotateY','rotateZ','skewX','skewY','scaleX','scaleY','scaleZ'],transformMethodsNo3d:['translateX','translateY','rotate','skewX','skewY','scaleX','scaleY'],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var c=this.styleSheet,a,b;if(!c){a=document.createElement('style');a.type='text/css';(document.head||document.getElementsByTagName('head')[0]).appendChild(a);b=document.styleSheets;this.styleSheet=c=b[b.length-1]}return c},applyRules:function(j){var i=this.getStyleSheet(),h=this.ruleStylesCache,k=i.cssRules,d,g,b,c,f,a,e;for(d in j){g=j[d];b=h[d];if(b===undefined){f=k.length;i.insertRule(d+'{}',f);b=h[d]=k.item(f).style}c=b.$cache;if(!c){c=b.$cache={}}for(a in g){e=this.formatValue(g[a],a);a=this.formatName(a);if(c[a]!==e){c[a]=e;if(e===null){b.removeProperty(a)}else {b.setProperty(a,e,'important')}}}}return this},applyStyles:function(f){var c,e,d,b,a,g;for(c in f){if(f.hasOwnProperty(c)){e=document.getElementById(c);if(!e){continue}d=e.style;b=f[c];for(a in b){if(b.hasOwnProperty(a)){g=this.formatValue(b[a],a);a=this.formatName(a);if(g===null){d.removeProperty(a)}else {d.setProperty(a,g,'important')}}}}}return this},formatName:function(b){var c=this.formattedNameCache,a=c[b];if(!a){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[b]){a=this.vendorPrefix+b}else {a=b}c[b]=a}return a},formatValue:function(a,c){var j=typeof a,i=this.DEFAULT_UNIT_LENGTH,g,d,b,f,h,e,k;if(a===null){return ''}if(j=='string'){if(this.lengthProperties[c]){k=a.match(this.lengthUnitRegex)[1];if(k.length>0){}else {return a+i}}return a}else {if(j=='number'){if(a==0){return '0'}if(this.lengthProperties[c]){return a+i}if(this.angleProperties[c]){return a+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[c]){return a+this.DEFAULT_UNIT_DURATION}}else {if(c==='transform'){g=this.transformMethods;h=[];for(b=0,f=g.length;b<f;b++){d=g[b];h.push(d+'('+this.formatValue(a[d],d)+')')}return h.join(' ')}else {if(Ext.isArray(a)){e=[];for(b=0,f=a.length;b<f;b++){e.push(this.formatValue(a[b],c))}return e.length>0?e.join(', '):'none'}}}}return a}},1,0,0,0,0,0,[Ext.fx.runner,'Css'],0);Ext.cmd.derive('Ext.fx.runner.CssTransition',Ext.fx.runner.Css,{alternateClassName:'Ext.Animator',singleton:!0,listenersAttached:!1,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0;Ext.getWin().on('transitionend','onTransitionEnd',this)},onTransitionEnd:function(c){var a=c.target,b=a.id;if(b&&this.runningAnimationsData.hasOwnProperty(b)){this.refreshRunningAnimationsData(Ext.get(a),[c.browserEvent.propertyName])}},onAnimationEnd:function(d,a,b,c,n){var l=d.getId(),j=this.runningAnimationsData[l],k={},h={},g,f,e,m,i;b.un('stop','onAnimationStop',this);if(j){g=j.nameMap}k[l]=h;if(a.onBeforeEnd){a.onBeforeEnd.call(a.scope||this,d,c)}b.fireEvent('animationbeforeend',b,d,c);this.fireEvent('animationbeforeend',this,b,d,c);if(n||!c&&!a.preserveEndState){f=a.toPropertyNames;for(e=0,m=f.length;e<m;e++){i=f[e];if(g&&!g.hasOwnProperty(i)){h[i]=null}}}if(a.after){Ext.merge(h,a.after)}this.applyStyles(k);if(a.onEnd){a.onEnd.call(a.scope||this,d,c)}b.fireEvent('animationend',b,d,c);this.fireEvent('animationend',this,b,d,c);Ext.AnimationQueue.stop(Ext.emptyFn,b)},onAllAnimationsEnd:function(b){var c=b.getId(),a={};delete this.runningAnimationsData[c];a[c]={'transition-property':null,'transition-duration':null,'transition-timing-function':null,'transition-delay':null};this.applyStyles(a);this.fireEvent('animationallend',this,b)},hasRunningAnimations:function(c){var b=c.getId(),a=this.runningAnimationsData;return a.hasOwnProperty(b)&&a[b].sessions.length>0},refreshRunningAnimationsData:function(i,m,f,g){var s=i.getId(),r=this.runningAnimationsData,e=r[s];if(!e){return}var o=e.nameMap,n=e.nameList,c=e.sessions,h,j,p,d,b,a,k,q,l=!1;f=Boolean(f);g=Boolean(g);if(!c){return this}h=c.length;if(h===0){return this}if(g){e.nameMap={};n.length=0;for(b=0;b<h;b++){a=c[b];this.onAnimationEnd(i,a.data,a.animation,f,g)}c.length=0}else {for(b=0;b<h;b++){a=c[b];k=a.map;q=a.list;for(j=0,p=m.length;j<p;j++){d=m[j];if(k[d]){delete k[d];Ext.Array.remove(q,d);a.length--;if(--o[d]==0){delete o[d];Ext.Array.remove(n,d)}}}if(a.length==0){c.splice(b,1);b--;h--;l=!0;this.onAnimationEnd(i,a.data,a.animation,f)}}}if(!g&&!f&&c.length==0&&l){this.onAllAnimationsEnd(i)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var c=this.testElement,d,b,a;if(!c){d=document.createElement('iframe');d.setAttribute('tabIndex',-1);a=d.style;a.setProperty('visibility','hidden','important');a.setProperty('width','0px','important');a.setProperty('height','0px','important');a.setProperty('position','absolute','important');a.setProperty('border','0px','important');a.setProperty('zIndex','-1000','important');document.body.appendChild(d);b=d.contentDocument;b.open();b.writeln('</body>');b.close();this.testElement=c=b.createElement('div');c.style.setProperty('position','absolute','important');b.body.appendChild(c);this.testElementComputedStyle=window.getComputedStyle(c)}return c},getCssStyleValue:function(b,a){var c=this.getTestElement(),e=this.testElementComputedStyle,d=c.style;d.setProperty(b,a);if(Ext.browser.is.Firefox){c.offsetHeight}a=e.getPropertyValue(b);d.removeProperty(b);return a},run:function(t){var a=this,H=a.lengthProperties,E={},j={},d={},i,f,m,k,F,g,e,u,v,s,r,w,x,G,c,o,y,C,h,b,l,D,n,z,q,p,A,B;if(!a.listenersAttached){a.attachListeners()}t=Ext.Array.from(t);for(w=0,G=t.length;w<G;w++){c=t[w];c=Ext.factory(c,Ext.fx.Animation);i=c.getElement();Ext.AnimationQueue.start(Ext.emptyFn,c);C=window.getComputedStyle(i.dom);f=i.getId();d=Ext.merge({},c.getData());if(c.onBeforeStart){c.onBeforeStart.call(c.scope||a,i)}c.fireEvent('animationstart',c);a.fireEvent('animationstart',a,c);d[f]=d;F=d.before;m=d.from;k=d.to;d.fromPropertyNames=g=[];d.toPropertyNames=e=[];for(b in k){if(k.hasOwnProperty(b)){k[b]=l=a.formatValue(k[b],b);h=a.formatName(b);z=H.hasOwnProperty(b);if(!z){l=a.getCssStyleValue(h,l)}if(m.hasOwnProperty(b)){m[b]=n=a.formatValue(m[b],b);if(!z){n=a.getCssStyleValue(h,n)}if(l!==n){g.push(h);e.push(h)}}else {D=C.getPropertyValue(h);if(l!==D){e.push(h)}}}}o=e.length;if(o===0){a.onAnimationEnd(i,d,c);continue}s=a.getRunningData(f);A=s.sessions;if(A.length>0){a.refreshRunningAnimationsData(i,Ext.Array.merge(g,e),!0,d.replacePrevious)}q=s.nameMap;p=s.nameList;y={};for(x=0;x<o;x++){b=e[x];y[b]=!0;if(!q.hasOwnProperty(b)){q[b]=1;p.push(b)}else {q[b]++}}B={element:i,map:y,list:e.slice(),length:o,data:d,animation:c};A.push(B);c.on('stop','onAnimationStop',a);r=Ext.apply({},F);Ext.apply(r,m);if(p.length>0){g=Ext.Array.difference(p,g);e=Ext.Array.merge(g,e);r['transition-property']=g}E[f]=r;j[f]=Ext.apply({},k);j[f]['transition-property']=e;j[f]['transition-duration']=d.duration;j[f]['transition-timing-function']=d.easing;j[f]['transition-delay']=d.delay;c.startTime=Date.now()}v=a.$className;a.applyStyles(E);u=function(b){if(b.data===v&&b.source===window){window.removeEventListener('message',u,!1);a.applyStyles(j)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener('message',u,!1);window.postMessage(v,'*')})}else {Ext.defer(function(){window.addEventListener('message',u,!1);window.postMessage(v,'*')},1)}},onAnimationStop:function(h){var c=this.runningAnimationsData,e,f,d,b,g,a;for(e in c){if(c.hasOwnProperty(e)){f=c[e];d=f.sessions;for(b=0,g=d.length;b<g;b++){a=d[b];if(a.animation===h){this.refreshRunningAnimationsData(a.element,a.list.slice(),!1)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,'CssTransition',Ext,'Animator'],0);Ext.cmd.derive('Ext.perf.Accumulator',Ext.Base,function(){var b=null,d=Ext.global['chrome'],c,a=function(){a=Ext.now;var b,c;if(Ext.isChrome&&d&&d.Interval){b=new d.Interval();b.start();a=function(){return b.microseconds()/1000}}else {if(window.ActiveXObject){try{c=new ActiveXObject('SenchaToolbox.Toolbox');Ext.senchaToolbox=c;a=function(){return c.milliseconds}}catch(e){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=a;return a()};function adjustSet(a,b){a.sum+=b;a.min=Math.min(a.min,b);a.max=Math.max(a.max,b)}function leaveFrame(f){var d=f?f:a()-this.time,e=this,c=e.accum;++c.count;if(!--c.depth){adjustSet(c.total,d)}adjustSet(c.pure,d-e.childTime);b=e.parent;if(b){++b.accum.childCount;b.childTime+=d}}function makeSet(){return {min:Number.MAX_VALUE,max:0,sum:0}}function makeTap(b,a){return function(){var c=b.enter(),d=a.apply(this,arguments);c.leave();return d}}function setToJSON(d,e,b,c){var a={avg:0,min:c.min,max:c.max,sum:0};if(d){b=b||0;a.sum=c.sum-e*b;a.avg=a.sum/d}return a}return {constructor:function(b){var a=this;a.count=a.childCount=a.depth=a.maxDepth=0;a.pure=makeSet();a.total=makeSet();a.name=b},statics:{getTimestamp:a},format:function(b){if(!c){c=new Ext.XTemplate(['{name} - {count} call(s)','<tpl if="count">','<tpl if="childCount">',' ({childCount} children)','</tpl>','<tpl if="depth - 1">',' ({depth} deep)','</tpl>','<tpl for="times">',', {type}: {[this.time(values.sum)]} msec (','avg={[this.time(values.sum / parent.count)]}',')','</tpl>','</tpl>'].join(''),{time:function(a){return Math.round(a*100)/100}})}var a=this.getData(b);a.name=this.name;a.pure.type='Pure';a.total.type='Total';a.times=[a.pure,a.total];return c.apply(a)},getData:function(b){var a=this;return {count:a.count,childCount:a.childCount,depth:a.maxDepth,pure:setToJSON(a.count,a.childCount,b,a.pure),total:setToJSON(a.count,a.childCount,b,a.total)}},enter:function(){var c=this,d={accum:c,leave:leaveFrame,childTime:0,parent:b};++c.depth;if(c.maxDepth<c.depth){c.maxDepth=c.depth}b=d;d.time=a();return d},monitor:function(c,a,b){var d=this.enter();if(b){c.apply(a,b)}else {c.call(a)}d.leave()},report:function(){Ext.log(this.format())},tap:function(d,g){var j=this,k=typeof g==='string'?[g]:g,b,f,a,h,e,c,i,l;l=function(){if(typeof d==='string'){b=Ext.global;h=d.split('.');for(a=0,e=h.length;a<e;++a){b=b[h[a]]}}else {b=d}for(a=0,e=k.length;a<e;++a){c=k[a];f=c.charAt(0)==='!';if(f){c=c.substring(1)}else {f=!(c in b.prototype)}i=f?b:b.prototype;i[c]=makeTap(j,i[c])}};Ext.ClassManager.onCreated(l,j,d);return j}}},1,0,0,0,0,0,[Ext.perf,'Accumulator'],function(){Ext.perf.getTimestamp=this.getTimestamp});Ext.cmd.derive('Ext.perf.Monitor',Ext.Base,{singleton:!0,alternateClassName:'Ext.Perf',constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var d=new Ext.perf.Accumulator('$'),g=d.total,a=Ext.perf.Accumulator.getTimestamp,e=0,f,c,b;b=a();do{f=d.enter();f.leave();++e}while(g.sum<100);c=a();return (c-b)/e},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(b,c,a){this.get(b).monitor(c,a)},report:function(){var a=this,b=a.accumulators,c=a.calibrate();b.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0});a.updateGC();Ext.log('Calibration: '+Math.round(c*100)/100+' msec/sample');Ext.each(b,function(a){Ext.log(a.format(c))})},getData:function(c){var a={},b=this.accumulators;Ext.each(b,function(b){if(c||b.count){a[b.name]=b.getData()}});return a},reset:function(){Ext.each(this.accumulators,function(b){var a=b;a.count=a.childCount=a.depth=a.maxDepth=0;a.pure={min:Number.MAX_VALUE,max:0,sum:0};a.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var b=this.accumulatorsByName.GC,c=Ext.senchaToolbox,a;if(b){b.count=c.garbageCollectionCounter||0;if(b.count){a=b.pure;b.total.sum=a.sum=c.garbageCollectionMilliseconds;a.min=a.max=a.sum/b.count;a=b.total;a.min=a.max=a.sum/b.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get('GC');a.watchGarbageCollector(!1)}},setup:function(a){if(!a){a={render:{'Ext.Component':'render'},layout:{'Ext.layout.Context':'run'}}}this.currentConfig=a;var d,c,f,b,e;for(d in a){if(a.hasOwnProperty(d)){c=a[d];f=Ext.Perf.get(d);for(b in c){if(c.hasOwnProperty(b)){e=c[b];f.tap(b,e)}}}}this.watchGC()},setupLog:function(e){var a,f,d,b,c;for(a in e){if(e.hasOwnProperty(a)){f=Ext.ClassManager.get(a);if(f){d=e[a];c={};for(b in d){c[b]=function(b,a){return function(){var g,c,f,d,h;g=+Date.now();h=this.callParent(arguments);c=+Date.now()-g;if(window.console&&c>0){d=a==='this'?this:typeof a==='string'?this[a]:typeof a==='number'?arguments[a]:null;if(d){f=d.id}if(f!=null){console.log(b+' for '+f+': '+c+'ms')}else {console.log(b+' for unknown: '+c+'ms')}if(console.trace){console.trace()}}return h}}(b,d[b])}Ext.override(f,c)}}}}},1,0,0,0,0,0,[Ext.perf,'Monitor',Ext,'Perf'],0);Ext.cmd.derive('Ext.util.LocalStorage',Ext.Base,{id:null,destroyed:!1,lazyKeys:!0,prefix:'',session:!1,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(c){var d=this,e=d.cache,b={_users:1},a;if(Ext.isString(c)){b.id=c}else {Ext.apply(b,c)}if(!(a=e[b.id])){a=new d(b)}else {++a._users}return a},supported:!0},constructor:function(b){var a=this;Ext.apply(a,b);if(a._users){Ext.util.LocalStorage.cache[a.id]=a}a.init()},init:function(){var a=this,b=a.id;if(!a.prefix&&b){a.prefix=b+'-'}a._store=a.session?window.sessionStorage:window.localStorage},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id];a._store=a._keys=null;a.callParent()},getKeys:function(){var c=this,g=c._store,f=c.prefix,a=c._keys,e=f.length,d,b;if(!a){c._keys=a=[];for(d=g.length;d--;){b=g.key(d);if(b.length>e){if(f===b.substring(0,e)){a.push(b.substring(e))}}}}return a},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var a=this,e=a._store,d=a.prefix,b=a._keys||a.getKeys(),c;for(c=b.length;c--;){e.removeItem(d+b[c])}b.length=0},key:function(a){var b=this._keys||this.getKeys();return 0<=a&&a<b.length?b[a]:null},getItem:function(a){var b=this.prefix+a;return this._store.getItem(b)},removeItem:function(d){var a=this,f=a.prefix+d,b=a._store,c=a._keys,e=b.length;b.removeItem(f);if(c&&e!==b.length){if(a.lazyKeys){a._keys=null}else {Ext.Array.remove(c,d)}}},setItem:function(d,f){var b=this,g=b.prefix+d,a=b._store,e=a.length,c=b._keys;a.setItem(g,f);if(c&&e!==a.length){c.push(d)}}},1,0,0,0,0,0,[Ext.util,'LocalStorage'],function(){var a=this;if('localStorage' in window){return}if(!Ext.isIE){a.supported=!1;return}a.override({data:null,flushDelay:1,init:function(){var a=this,c=a.data,b;a.el=b=document.createElement('div');b.id=a.id||(a.id='extjs-localstore');b.addBehavior('#default#userdata');Ext.getHead().dom.appendChild(b);b.load(a.id);c=b.getAttribute('xdata');a.data=c=c?Ext.decode(c):{};a._flushFn=function(){a._timer=null;a.save(0)}},destroy:function(){var a=this,b=a.el;if(b){if(a._timer){a.save()}b.parentNode.removeChild(b);a.data=a.el=null;a.callParent()}},getKeys:function(){var b=this,a=b._keys;if(!a){b._keys=a=Ext.Object.getKeys(b.data)}return a},save:function(b){var a=this;if(!b){if(a._timer){clearTimeout(a._timer);a._timer=null}a.el.setAttribute('xdata',Ext.encode(a.data));a.el.save(a.id)}else {if(!a._timer){a._timer=Ext.defer(a._flushFn,b)}}},clear:function(){var a=this;a.data={};a._keys=null;a.save(a.flushDelay)},getItem:function(b){var a=this.data;return b in a?a[b]:null},removeItem:function(b){var a=this,d=a._keys,c=a.data;if(b in c){delete c[b];if(d){if(a.lazyKeys){a._keys=null}else {Ext.Array.remove(d,b)}}a.save(a.flushDelay)}},setItem:function(b,e){var a=this,c=a.data,d=a._keys;if(d&&!(b in c)){d.push(b)}c[b]=e;a.save(a.flushDelay)}})});Ext.cmd.derive('Ext.ElementLoader',Ext.Base,{statics:{Renderer:{Html:function(c,b,a){c.getTarget().setHtml(b.responseText,a.scripts===!0,a.rendererScope);return !0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.setTarget(a.target);if(a.autoLoad){b=a.autoLoad;if(b===!0){b=null}a.load(b)}},setTarget:function(a){var b=this;a=Ext.get(a);if(b.target&&b.target!==a){b.abort()}b.target=a},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===!0?null:a)},load:function(b){b=Ext.apply({},b);var a=this,d=Ext.isDefined(b.loadMask)?b.loadMask:a.loadMask,c=Ext.apply({},b.params),e=Ext.apply({},b.ajaxOptions),f=b.callback||a.callback,g=b.scope||a.scope||a;Ext.applyIf(e,a.ajaxOptions);Ext.applyIf(b,e);Ext.applyIf(c,a.params);Ext.apply(c,a.baseParams);Ext.applyIf(b,{url:a.url});Ext.apply(b,{scope:a,params:c,callback:a.onComplete});if(a.fireEvent('beforeload',a,b)===!1){return}if(d){a.addMask(d)}a.active={options:b,mask:d,scope:g,callback:f,success:b.success||a.success,failure:b.failure||a.failure,renderer:b.renderer||a.renderer,scripts:Ext.isDefined(b.scripts)?b.scripts:a.scripts};a.active.request=Ext.Ajax.request(b);a.setOptions(a.active,b)},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(d,e,c){var a=this,b=a.active,g,f;if(b){f=b.scope;g=b.rendererScope;if(e){e=a.getRenderer(b.renderer).call(g,a,c,b)!==!1}if(e){Ext.callback(b.success,f,[a,c,d]);a.fireEvent('load',a,c,d)}else {Ext.callback(b.failure,f,[a,c,d]);a.fireEvent('exception',a,c,d)}Ext.callback(b.callback,f,[a,e,c,d]);if(b.mask){a.removeMask()}}delete a.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(b,c){var a=this;a.stopAutoRefresh();a.autoRefresh=Ext.interval(function(){a.load(c)},b)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,'ElementLoader'],0);Ext.cmd.derive('Ext.ComponentLoader',Ext.ElementLoader,{statics:{Renderer:{Data:function(c,b,d){var a=!0;try{c.getTarget().update(Ext.decode(b.responseText))}catch(e){a=!1}return a},Component:function(f,d,e){var b=!0,a=f.getTarget(),c=[];try{c=Ext.decode(d.responseText)}catch(g){b=!1}if(b){a.suspendLayouts();if(e.removeAll){a.removeAll()}a.add(c);a.resumeLayouts(!0)}return b}}},target:null,loadOnRender:!1,loadMask:!1,renderer:'html',setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!==b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else {a.mon(b,'render',a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll;b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(a){if(Ext.isFunction(a)){return a}var b=this.statics().Renderer;switch(a){case 'component':return b.Component;case 'data':return b.Data;default:return Ext.ElementLoader.Renderer.Html;}}},0,0,0,0,0,0,[Ext,'ComponentLoader'],0);Ext.cmd.derive('Ext.EventManager',Ext.Base,{singleton:!0,mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,addListener:function(b,a,e,d,c){Ext.get(b).addListener(a,e,d,c)},onWindowResize:function(c,b,a){Ext.GlobalEvents.on('resize',c,b,a)},onWindowUnload:function(c,b,a){Ext.getWin().on('unload',c,b,a)},purgeElement:function(a,b){Ext.get(a).clearListeners()},removeAll:function(a){Ext.get(a).clearListeners()},removeListener:function(b,a,e,d,c){Ext.get(b).removeListener(a,e,d,c)},removeResizeListener:function(b,a){Ext.GlobalEvents.un('resize',b,a)},removeUnloadListener:function(b,a){Ext.getWin().un('unload',b,a)},stopEvent:function(a){this.stopPropagation(a);this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a;if(a.stopPropagation){a.stopPropagation()}else {a.cancelBubble=!0}},preventDefault:function(a){a=a.browserEvent||a;if(a.preventDefault){a.preventDefault()}else {a.returnValue=!1;try{if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}catch(b){}}},getId:function(a){a=Ext.get(a);return a.id},getRelatedTarget:function(a){a=a.browserEvent||a;var b=a.relatedTarget;if(!b){if(this.mouseLeaveRe.test(a.type)){b=a.toElement}else {if(this.mouseEnterRe.test(a.type)){b=a.fromElement}}}return this.resolveTextNode(b)},getPageX:function(a){return this.getPageXY(a)[0]},getPageXY:function(c){c=c.browserEvent||c;var d=c.pageX,e=c.pageY,a=document.documentElement,b=document.body;if(!d&&d!==0){d=c.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0);e=c.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0)}return [d,e]},getPageY:function(a){return this.getPageXY(a)[1]},getTarget:function(a){a=a.browserEvent||a;return Ext.EventManager.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(a){if(a){var b=HTMLElement.prototype.toString.call(a);if(b!=='[xpconnect wrapped native prototype]'&&b!=='[object XULElement]'){return a.nodeType===3?a.parentNode:a}}}:function(a){return a&&a.nodeType===3?a.parentNode:a}},0,0,0,0,0,0,[Ext,'EventManager'],function(a){a.on=a.addListener;a.un=a.removeListener});Ext.cmd.derive('Ext.Img',Ext.Component,{autoEl:'img',baseCls:'x-img',config:{src:null},alt:'',title:'',imgCls:'',maskOnDisable:!1,initComponent:function(){if(this.glyph){this.autoEl='div'}Ext.Component.prototype.initComponent.call(this)},applySrc:function(a){return a&&Ext.resolveResource(a)},getElConfig:function(){var b=this,g=b.autoEl,a=Ext.Component.prototype.getElConfig.call(this),d=Ext._glyphFontFamily,e=b.glyph,c,f;if(g==='img'||Ext.isObject(g)&&g.tag==='img'){c=a}else {if(b.glyph){if(typeof e==='string'){f=e.split('@');e=f[0];d=f[1]||d}a.html='&#'+e+';';if(d){a.style=a.style||{};a.style.fontFamily=d}a.role='img'}else {a.cn=[c={tag:'img',id:b.id+'-img'}]}}if(c){if(b.imgCls){c.cls=(c.cls?c.cls+' ':'')+b.imgCls}c.src=b.src||Ext.BLANK_IMAGE_URL}if(b.alt){(c||a).alt=b.alt}else {(c||a).alt=''}if(b.title){(c||a).title=b.title}return a},onRender:function(){var a=this,b=a.autoEl,c;Ext.Component.prototype.onRender.apply(this,arguments);c=a.el;if(b==='img'||Ext.isObject(b)&&b.tag==='img'){a.imgEl=c}else {a.imgEl=c.getById(a.id+'-img')}},onDestroy:function(){var b=this,a=b.imgEl;if(a&&b.el!==a){a.destroy()}this.imgEl=null;Ext.Component.prototype.onDestroy.call(this)},getTitle:function(){return this.title},setTitle:function(b){var c=this,a=c.imgEl;c.title=b||'';if(a){a.dom.title=b||''}},getAlt:function(){return this.alt},setAlt:function(b){var c=this,a=c.imgEl;c.alt=b||'';if(a){a.dom.alt=b||''}},updateSrc:function(b){var a=this.imgEl;if(a){a.dom.src=b||Ext.BLANK_IMAGE_URL}},setGlyph:function(a){var c=this,b=Ext._glyphFontFamily,f=c.glyph,e=c.el,d;c.glyph=a;if(c.rendered&&a!==f){if(typeof a==='string'){d=a.split('@');a=d[0];b=d[1]||b}e.dom.innerHTML='&#'+a+';';if(b){e.setStyle('font-family',b)}}}},0,['image','imagecomponent'],['component','box','image','imagecomponent'],{'component':!0,'box':!0,'image':!0,'imagecomponent':!0},['widget.image','widget.imagecomponent'],0,[Ext,'Img'],0);Ext.cmd.derive('Ext.resizer.SplitterTracker',Ext.dd.DragTracker,{enabled:!0,overlayCls:'x-resizable-overlay',createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:'presentation',cls:this.overlayCls,html:'&#160;'});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(':not([hidden])')},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(':not([hidden])')},onBeforeStart:function(g){var a=this,c=a.getPrevCmp(),b=a.getNextCmp(),e=a.getSplitter().collapseEl,f=g.getTarget(),d;if(!c||!b){return !1}if(e&&f===e.dom){return !1}if(b.collapsed||c.collapsed){return !1}a.prevBox=c.getEl().getBox();a.nextBox=b.getEl().getBox();a.constrainTo=d=a.calculateConstrainRegion();if(!d){return !1}return d},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+'-active')},onResizeKeyDown:function(b){var a=this,d=a.getSplitter(),f=b.getKey(),e=d.orientation==='vertical'?0:1,g=f===b.UP||f===b.LEFT?-1:1,c;if(!a.active&&a.onBeforeStart(b)){Ext.fly(b.target).on('keyup',a.onResizeKeyUp,a);a.triggerStart(b);a.onMouseDown(b);a.startXY=d.getXY();a.lastKeyDownXY=Ext.Array.slice(a.startXY);c=a.easing=new Ext.fx.easing.Linear();c.setStartTime(Ext.Date.now());c.setStartValue(1);c.setEndValue(4);c.setDuration(2000)}if(a.active){a.lastKeyDownXY[e]=Math.round(a.lastKeyDownXY[e]+g*a.easing.getValue());a.lastXY=a.lastKeyDownXY;d.setXY(a.getXY('dragTarget'))}},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var a=this,k=a.getSplitter(),j=k.getWidth(),e=k.defaultSplitMin,l=k.orientation,c=a.prevBox,g=a.getPrevCmp(),b=a.nextBox,f=a.getNextCmp(),i,h,d;if(l==='vertical'){d={prevCmp:g,nextCmp:f,prevBox:c,nextBox:b,defaultMin:e,splitWidth:j};i=new Ext.util.Region(c.y,a.getVertPrevConstrainRight(d),c.bottom,a.getVertPrevConstrainLeft(d));h=new Ext.util.Region(b.y,a.getVertNextConstrainRight(d),b.bottom,a.getVertNextConstrainLeft(d))}else {i=new Ext.util.Region(c.y+(g.minHeight||e),c.right,(g.maxHeight?c.y+g.maxHeight:b.bottom-(f.minHeight||e))+j,c.x);h=new Ext.util.Region((f.maxHeight?b.bottom-f.maxHeight:c.y+(g.minHeight||e))-j,b.right,b.bottom-(f.minHeight||e),b.x)}return i.intersect(h)},performResize:function(p,b){var c=this,k=c.getSplitter(),n=k.orientation,f=c.getPrevCmp(),e=c.getNextCmp(),l=k.ownerCt,j=l.query('>[flex]'),o=j.length,h=n==='vertical',i=0,d=h?'width':'height',m=0,g,a;for(;i<o;i++){g=j[i];a=h?g.getWidth():g.getHeight();m+=a;g.flex=a}b=h?b[0]:b[1];if(f){a=c.prevBox[d]+b;if(f.flex){f.flex=a}else {f[d]=a}}if(e){a=c.nextBox[d]-b;if(e.flex){e.flex=a}else {e[d]=a}}l.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+'-active');a.performResize(c,a.getResizeOffset())},onDrag:function(f){var a=this,d=a.getOffset('dragTarget'),b=a.getSplitter(),c=b.getEl(),e=b.orientation;if(e==='vertical'){c.setX(a.startRegion.left+d[0])}else {c.setY(a.startRegion.top+d[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return (a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return (a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset('dragTarget')}},0,0,0,0,0,0,[Ext.resizer,'SplitterTracker'],0);Ext.define('Ext.rtl.resizer.SplitterTracker',{override:'Ext.resizer.SplitterTracker',getVertPrevConstrainLeft:function(a){return !this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl?(a.prevCmp.maxWidth?a.prevBox.right-a.prevCmp.maxWidth:a.nextBox.x+(a.nextCmp.minWidth||a.defaultMin))-a.splitWidth:arguments.callee.$previous.apply(this,arguments)},getVertPrevConstrainRight:function(a){return !this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl?a.prevBox.right-(a.prevCmp.minWidth||a.defaultMin):arguments.callee.$previous.apply(this,arguments)},getVertNextConstrainLeft:function(a){return !this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl?a.nextBox.x+(a.nextCmp.minWidth||a.defaultMin):arguments.callee.$previous.apply(this,arguments)},getVertNextConstrainRight:function(a){return !this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl?(a.nextCmp.maxWidth?a.nextBox.x+a.nextCmp.maxWidth:a.prevBox.right-(a.prevBox.minWidth||a.defaultMin))+a.splitWidth:arguments.callee.$previous.apply(this,arguments)},getResizeOffset:function(){var a=this.getOffset('dragTarget');if(!this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl){a[0]=-a[0]}return a}});Ext.cmd.derive('Ext.event.publisher.MouseEnterLeave',Ext.event.publisher.Dom,{type:'mouseEnterLeave'},0,0,0,0,0,0,[Ext.event.publisher,'MouseEnterLeave'],function(a){var b={mouseover:'mouseenter',mouseout:'mouseleave'};if(!Ext.supports.MouseEnterLeave){a.override({handledDomEvents:['mouseover','mouseout'],handledEvents:['mouseenter','mouseleave'],doDelegatedEvent:function(c){var h,g,i,e,f,d;c=this.callParent([c]);h=c.getTarget();g=c.getRelatedTarget();if(g&&Ext.fly(h).contains(g)){return}i=h.id;if(i){e=Ext.cache[i];if(e){f=b[c.type];c=c.chain({type:f});if(e.hasListeners[f]){d=e.events[f];if(d){d=d.directs;if(d){c.setCurrentTarget(e.dom);d.fire(c,c.target)}}}}}}})}a.instance=new a()});Ext.cmd.derive('Ext.form.field.FileButton',Ext.button.Button,{childEls:['fileInputEl'],inputCls:'x-form-file-input',cls:'x-form-file-btn',preventDefault:!1,tabIndex:undefined,autoEl:{tag:'div',unselectable:'on'},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>','>'],keyHandlers:null,ariaEl:'fileInputEl',getAfterMarkup:function(a){return this.getTpl('afterTpl').apply(a)},getTemplateArgs:function(){var b=this,a;a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=b.inputCls;a.inputName=b.inputName||b.id;a.tabIndex=b.tabIndex||null;a.role=b.ariaRole;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},fireChange:function(a){this.fireEvent('change',this,a,this.fileInputEl.dom.value)},createFileInput:function(c){var a=this,b=a.fileInputEl=a.el.createChild({name:a.inputName,id:!c?a.id+'-fileInputEl':undefined,cls:a.inputCls,tag:'input',type:'file',size:1,role:'button'});b.dom.setAttribute('data-componentid',a.id);b.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},onFileFocus:function(b){var a=this.ownerCt;if(!this.hasFocus){this.onFocus(b)}if(a&&!a.hasFocus){a.onFocus(b)}},onFileBlur:function(b){var a=this.ownerCt;if(this.hasFocus){this.onBlur(b)}if(a&&a.hasFocus){a.onBlur(b)}},reset:function(a){var b=this;if(a){b.fileInputEl.destroy()}b.createFileInput(!a)},restoreInput:function(a){var b=this;b.fileInputEl.destroy();a=Ext.get(a);b.el.appendChild(a);b.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=!0},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=!1},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,['filebutton'],['component','box','button','filebutton'],{'component':!0,'box':!0,'button':!0,'filebutton':!0},['widget.filebutton'],0,[Ext.form.field,'FileButton'],0);Ext.define('Ext.rtl.form.field.FileButton',{override:'Ext.form.field.FileButton',createFileInput:function(b){var a=this;a.fileInputEl=a.el.createChild({name:a.inputName,id:!b?a.id+'-fileInputEl':undefined,cls:a.inputCls+' '+(a.getInherited().rtl?'x-rtl':''),tag:'input',type:'file',size:1,role:'button'});a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFocus,blur:a.onBlur})}});Ext.cmd.derive('Ext.form.field.Tag',Ext.form.field.ComboBox,{noWrap:!1,multiSelect:!0,delimiter:',',tipTpl:undefined,forceSelection:!0,createNewOnEnter:!1,createNewOnBlur:!1,encodeSubmitValue:!1,triggerOnClick:!0,stacked:!1,filterPickList:!1,grow:!0,growMin:!1,growMax:!1,selectOnFocus:!0,fieldSubTpl:['<div id="{cmpId}-listWrapper" data-ref="listWrapper" class="x-tagfield {fieldCls} {typeCls} {typeCls}-{ui}" style="{wrapperStyle}">','<ul id="{cmpId}-itemList" data-ref="itemList" class="x-tagfield-list{itemListCls}">','<li id="{cmpId}-inputElCt" data-ref="inputElCt" class="x-tagfield-input">','<div id="{cmpId}-emptyEl" data-ref="emptyEl" class="{emptyCls}">{emptyText}</div>','<input id="{cmpId}-inputEl" data-ref="inputEl" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx != null">tabindex="{tabIdx}" </tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','class="x-tagfield-input-field {inputElCls}" autocomplete="off">','</li>','</ul>','</div>',{disableFormats:!0}],extraFieldBodyCls:'x-tagfield-body',childEls:['listWrapper','itemList','inputEl','inputElCt','emptyEl'],emptyInputCls:'x-tagfield-emptyinput',clearValueOnEmpty:!1,tagItemCls:'x-tagfield-item',tagItemTextCls:'x-tagfield-item-text',tagItemCloseCls:'x-tagfield-item-close',tagItemSelector:'.x-tagfield-item',tagItemCloseSelector:'.x-tagfield-item-close',tagSelectedCls:'x-tagfield-item-selected',initComponent:function(){var a=this,c=a.typeAhead,b=a.delimiter;if(a.createNewOnEnter||a.createNewOnBlur){a.forceSelection=!1}a.typeAhead=!1;if(a.value==null){a.value=[]}a.selectionModel=new Ext.selection.Model({mode:'MULTI',onSelectChange:function(d,c,b,a){a()},listeners:{scope:a,selectionchange:a.onSelectionChange,focuschange:a.onFocusChange}});Ext.form.field.ComboBox.prototype.initComponent.call(this);a.typeAhead=c;if(b&&a.multiSelect){a.delimiterRegexp=new RegExp(Ext.String.escapeRegex(b))}},initEvents:function(){var a=this,b=a.inputEl;Ext.form.field.ComboBox.prototype.initEvents.apply(this,arguments);if(!a.enableKeyEvents){b.on('keydown',a.onKeyDown,a);b.on('keyup',a.onKeyUp,a)}a.listWrapper.on({scope:a,click:a.onItemListClick,mousedown:a.onItemMouseDown})},isValid:function(){var a=this,b=a.disabled,c=a.forceValidation||!b;return c?a.validateValue(a.getValue()):b},onBindStore:function(b){var a=this;Ext.form.field.ComboBox.prototype.onBindStore.call(this,b);if(b){a.valueStore=new Ext.data.Store({model:b.getModel(),useModelWarning:!1});a.selectionModel.bindStore(a.valueStore);if(a.filterPickList){a.listFilter=new Ext.util.Filter({scope:a,filterFn:a.filterPicked});a.changingFilters=!0;b.filter(a.listFilter);a.changingFilters=!1}}},filterPicked:function(a){return !this.valueCollection.contains(a)},onUnbindStore:function(d){var a=this,b=a.valueStore,c=a.picker;if(c){c.bindStore(null)}if(b){b.destroy();a.valueStore=null}if(a.filterPickList&&!d.destroyed){a.changingFilters=!0;d.removeFilter(a.listFilter);a.changingFilters=!1}Ext.form.field.ComboBox.prototype.onUnbindStore.apply(this,arguments)},onValueCollectionEndUpdate:function(){var a=this,c=a.valueCollection.items,b=a.valueStore;if(a.isSelectionUpdating()){return}if(a.filterPickList){a.changingFilters=!0;a.store.filter(a.listFilter);a.changingFilters=!1}Ext.form.field.ComboBox.prototype.onValueCollectionEndUpdate.call(this);Ext.suspendLayouts();if(b){b.suspendEvents();b.loadRecords(c);b.resumeEvents()}Ext.resumeLayouts(!0);a.alignPicker()},checkValueOnDataChange:Ext.emptyFn,onSelectionChange:function(b,a){this.applyMultiselectItemMarkup();this.fireEvent('valueselectionchange',this,a)},onFocusChange:function(c,b,a){this.fireEvent('valuefocuschange',this,b,a)},onDestroy:function(){this.selectionModel=Ext.destroy(this.selectionModel);Ext.form.field.ComboBox.prototype.onDestroy.apply(this,arguments)},getSubTplData:function(i){var b=this,a=Ext.form.field.ComboBox.prototype.getSubTplData.apply(this,arguments),h=b.emptyText,g=b.emptyInputCls,f=h&&a.value.length<1,e=b.growMin,d=b.growMax,c='';a.value='';a.emptyText=f?h:'';a.emptyCls=f?b.emptyCls:g;a.inputElCls=f?g:'';a.itemListCls='';if(b.grow){if(Ext.isNumber(e)&&e>0){c+='min-height:'+e+'px;'}if(Ext.isNumber(d)&&d>0){c+='max-height:'+d+'px;'}}a.wrapperStyle=c;if(b.stacked===!0){a.itemListCls+=' x-tagfield-stacked'}if(!b.multiSelect){a.itemListCls+=' x-tagfield-singleselect'}return a},afterRender:function(){var a=this,b=a.inputEl,c=a.emptyText;if(c){if(Ext.supports.Placeholder&&b){b.dom.removeAttribute('placeholder')}else {a.applyEmptyText()}}a.applyMultiselectItemMarkup();Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments)},findRecord:function(b,c){var a=this.getStore().queryRecords(b,c);return a.length?a[0]:!1},getCursorPosition:function(){var a;if(document.selection){a=document.selection.createRange();a.collapse(!0);a.moveStart('character',-this.inputEl.dom.value.length);a=a.text.length}else {a=this.inputEl.dom.selectionStart}return a},hasSelectedText:function(){var a=this.inputEl.dom,c,b;if(document.selection){c=document.selection;b=c.createRange();return b.parentElement()===a}else {return a.selectionStart!==a.selectionEnd}},onKeyDown:function(a){var c=this,f=a.getKey(),i=c.inputEl,h=i.dom.value,e=c.valueCollection,b=c.selectionModel,g=!1,d;if(c.readOnly||c.disabled||!c.editable){return}if(e.getCount()>0&&(h===''||c.getCursorPosition()===0&&!c.hasSelectedText())){d=b.getCount()>0?e.indexOf(b.getLastSelected()):-1;if(f===a.BACKSPACE||f===a.DELETE){if(d>-1){if(b.getCount()>1){d=-1}e.remove(b.getSelection())}else {e.remove(e.last())}b.clearSelections();if(d>0){b.select(d-1)}else {if(e.getCount()){b.select(e.last())}}g=!0}else {if(f===a.RIGHT||f===a.LEFT){if(d===-1&&f===a.LEFT){b.select(e.last());g=!0}else {if(d>-1){if(f===a.RIGHT){if(d<e.getCount()-1){b.select(d+1,a.shiftKey);g=!0}else {if(!a.shiftKey){b.deselectAll();g=!0}}}else {if(f===a.LEFT&&d>0){b.select(d-1,a.shiftKey);g=!0}}}}}else {if(f===a.A&&a.ctrlKey){b.selectAll();g=a.A}}}}if(g){c.preventKeyUpEvent=g;a.stopEvent();return}if(c.isExpanded&&f===a.ENTER&&c.picker.highlightedItem){c.preventKeyUpEvent=!0}if(c.enableKeyEvents){Ext.form.field.ComboBox.prototype.onKeyDown.apply(this,arguments)}if(!a.isSpecialKey()&&!a.hasModifier()){b.deselectAll()}},onKeyUp:function(b,f){var a=this,d=a.inputEl,c=d.dom.value,e=a.preventKeyUpEvent;if(a.preventKeyUpEvent){b.stopEvent();if(e===!0||b.getKey()===e){delete a.preventKeyUpEvent}return}if(a.multiSelect&&a.delimiterRegexp&&a.delimiterRegexp.test(c)||a.createNewOnEnter&&b.getKey()===b.ENTER){c=Ext.Array.clean(c.split(a.delimiterRegexp));d.dom.value='';a.setValue(a.valueStore.getRange().concat(c));d.focus()}Ext.form.field.ComboBox.prototype.onKeyUp.call(this,b,f)},onTypeAhead:function(){var a=this,f=a.displayField,d=a.inputEl.dom,g=a.getPicker(),e=a.getStore().findRecord(f,d.value),b,h,c;if(e){b=e.get(f);h=b.length;c=d.value.length;g.highlightItem(g.getNode(e));if(c!==0&&c!==h){d.value=b;a.selectText(c,b.length)}}},onItemListClick:function(c){var a=this,d=a.selectionModel,b=c.getTarget(a.tagItemSelector),e=b?c.getTarget(a.tagItemCloseSelector):!1;if(a.readOnly||a.disabled){return}c.stopPropagation();if(b){if(e){a.removeByListItemNode(b);if(a.valueStore.getCount()>0){a.fireEvent('select',a,a.valueStore.getRange())}}else {a.toggleSelectionByListItemNode(b,c.shiftKey)}if(!Ext.supports.TouchEvents){a.inputEl.focus()}}else {if(d.getCount()>0){d.deselectAll()}a.inputEl.focus();if(a.triggerOnClick){a.onTriggerClick()}}},onItemMouseDown:function(a){a.preventDefault()},getMultiSelectItemMarkup:function(){var a=this,b=a._getChildElCls&&a._getChildElCls()||'';if(!a.multiSelectItemTpl){if(!a.labelTpl){a.labelTpl='{'+a.displayField+'}'}a.labelTpl=a.getTpl('labelTpl');if(a.tipTpl){a.tipTpl=a.getTpl('tipTpl')}a.multiSelectItemTpl=new Ext.XTemplate(['<tpl for=".">','<li data-selectionIndex="{[xindex - 1]}" data-recordId="{internalId}" class="'+a.tagItemCls+b,'<tpl if="this.isSelected(values)">',' '+a.tagSelectedCls,'</tpl>','{%','values = values.data;','%}',a.tipTpl?'" data-qtip="{[this.getTip(values)]}">':'">','<div class="'+a.tagItemTextCls+'">{[this.getItemLabel(values)]}</div>','<div class="'+a.tagItemCloseCls+b+'"></div>','</li>','</tpl>',{isSelected:function(b){return a.selectionModel.isSelected(b)},getItemLabel:function(b){return Ext.String.htmlEncode(a.labelTpl.apply(b))},getTip:function(b){return Ext.String.htmlEncode(a.tipTpl.apply(b))},strict:!0}])}if(!a.multiSelectItemTpl.isTemplate){a.multiSelectItemTpl=this.getTpl('multiSelectItemTpl')}return a.multiSelectItemTpl.apply(a.valueCollection.getRange())},applyMultiselectItemMarkup:function(){var a=this,b=a.itemList;if(b){b.select('.x-tagfield-item').destroy();a.inputElCt.insertHtml('beforeBegin',a.getMultiSelectItemMarkup());a.autoSize()}},getRecordByListItemNode:function(a){return this.valueCollection.items[Number(a.getAttribute('data-selectionIndex'))]},toggleSelectionByListItemNode:function(e,d){var c=this,a=c.getRecordByListItemNode(e),b=c.selectionModel;if(a){if(b.isSelected(a)){b.deselect(a)}else {b.select(a,d)}}},removeByListItemNode:function(c){var b=this,a=b.getRecordByListItemNode(c);if(a){b.pickerSelectionModel.deselect(a)}},getDisplayValue:function(){return this.getRawValue()},getRawValue:function(){var e=this,b=e.getValueRecords(),c=[],a,d;for(a=0,d=b.length;a<d;a++){c.push(b[a].data[e.displayField])}return c.join(',')},setRawValue:function(a){return},removeValue:function(b){var c=this,g=c.valueCollection,f,d,a,e=[];if(b){b=Ext.Array.from(b);for(d=0,f=b.length;d<f;++d){a=b[d];if(!a.isModel){a=g.byValue.get(a)}if(a){e.push(a)}}c.valueCollection.beginUpdate();c.pickerSelectionModel.deselect(e);c.valueCollection.endUpdate()}},setValue:function(a,k,q){var b=this,j=b.valueStore,i=b.valueField,g=[],f=b.store,n=b.autoLoadOnValue,p=f.getCount()>0||f.isLoaded(),o=f.hasPendingLoad(),r=n&&!p&&!o,e,m,d,c,l,h;if(Ext.isEmpty(a)){a=null}else {if(Ext.isString(a)&&b.multiSelect){a=a.split(b.delimiter)}else {a=Ext.Array.from(a,!0)}}if(a&&b.queryMode==='remote'&&!f.isEmptyStore&&q!==!0&&r){for(d=0,m=a.length;d<m;d++){e=a[d];if(!e||!e.isModel){c=j.findExact(i,e);if(c>-1){a[d]=j.getAt(c)}else {c=b.findRecord(i,e);if(!c){if(b.forceSelection){g.push(e)}else {c={};c[b.valueField]=e;c[b.displayField]=e;l=b.valueStore.getModel();c=new l(c)}}if(c){a[d]=c}}}}if(g.length){h={};h[b.valueParam||b.valueField]=g.join(b.delimiter);f.load({params:h,callback:function(){b.setValue(a,k,!0);b.autoSize();b.lastQuery=!1}});return !1}}if(!b.multiSelect&&a.length>0){for(d=a.length-1;d>=0;d--){if(a[d].isModel){a=a[d];break}}if(Ext.isArray(a)){a=a[a.length-1]}}return Ext.form.field.ComboBox.prototype.setValue.call(this,a,k)},updateValue:function(){var a=this,b=a.valueCollection.getRange(),d=b.length,c;for(c=0;c<d;c++){b[c]=b[c].get(a.valueField)}a.setHiddenValue(b);a.value=a.multiSelect?b:b[0];if(!Ext.isDefined(a.value)){a.value=undefined}a.applyMultiselectItemMarkup();a.checkChange();a.applyEmptyText()},getValueRecords:function(){return this.valueCollection.getRange()},getSubmitData:function(){var b=this,a=Ext.form.field.ComboBox.prototype.getSubmitData.apply(this,arguments);if(b.multiSelect&&b.encodeSubmitValue&&a&&a[b.name]){a[b.name]=Ext.encode(a[b.name])}return a},assertValue:function(){var a=this,b=a.inputEl.dom.value,d=!Ext.isEmpty(b)?a.findRecordByDisplay(b):!1,c=!1;if(!d&&!a.forceSelection&&a.createNewOnBlur&&!Ext.isEmpty(b)){c=b}else {if(d){c=d}}if(c){a.addValue(c)}a.inputEl.dom.value='';a.collapse()},isEqual:function(b,c){var f=Ext.Array.from,e=this.valueField,a,d,g,h;b=f(b);c=f(c);d=b.length;if(d!==c.length){return !1}for(a=0;a<d;a++){g=b[a].isModel?b[a].get(e):b[a];h=c[a].isModel?c[a].get(e):c[a];if(g!==h){return !1}}return !0},applyEmptyText:function(){var a=this,g=a.emptyText,b=a.emptyEl,e=a.inputEl,f=a.listWrapper,d=a.emptyCls,c=a.emptyInputCls,h;if(a.rendered&&g){h=Ext.isEmpty(a.value)&&!a.hasFocus;if(h){e.dom.value='';b.setHtml(g);b.addCls(d);b.removeCls(c);f.addCls(d);e.addCls(c)}else {b.addCls(c);b.removeCls(d);f.removeCls(d);e.removeCls(c)}a.autoSize()}},preFocus:function(){var a=this,b=a.inputEl,c=b.dom.value==='';a.emptyEl.addCls(a.emptyInputCls);a.emptyEl.removeCls(a.emptyCls);a.listWrapper.removeCls(a.emptyCls);a.inputEl.removeCls(a.emptyInputCls);if(a.selectOnFocus||c){b.dom.select()}},onFocus:function(){var c=this,a=c.focusCls,b=c.itemList;if(a&&b){b.addCls(a)}Ext.form.field.ComboBox.prototype.onFocus.apply(this,arguments)},onBlur:function(){var c=this,a=c.focusCls,b=c.itemList;if(a&&b){b.removeCls(a)}Ext.form.field.ComboBox.prototype.onBlur.apply(this,arguments)},renderActiveError:function(){var a=this,c=a.invalidCls,b=a.itemList,d=a.hasActiveError();if(c&&b){b[d?'addCls':'removeCls'](a.invalidCls+'-field')}Ext.form.field.ComboBox.prototype.renderActiveError.apply(this,arguments)},autoSize:function(){var a=this;if(a.grow&&a.rendered){a.autoSizing=!0;a.updateLayout()}return a},afterComponentLayout:function(){var a=this,b;if(a.autoSizing){b=a.getHeight();if(b!==a.lastInputHeight){if(a.isExpanded){a.alignPicker()}a.fireEvent('autosize',a,b);a.lastInputHeight=b;a.autoSizing=!1}}}},0,['tagfield'],['component','box','field','textfield','pickerfield','combobox','combo','tagfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'tagfield':!0},['widget.tagfield'],0,[Ext.form.field,'Tag'],0);Ext.define('Ext.rtl.form.field.Tag',{override:'Ext.form.field.Tag',privates:{_getChildElCls:function(){return this.getInherited().rtl?' '+this._rtlCls:''}}});Ext.cmd.derive('Ext.grid.ColumnManager',Ext.Base,{alternateClassName:['Ext.grid.ColumnModel'],columns:null,constructor:function(b,c,a){this.headerCt=c;if(a){this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var a=this,c=a.getColumns(),d=c.length,b;if(a.variableRowHeight==null){a.variableRowHeight=!1;for(b=0;!a.variableRowHeight&&b<d;b++){a.variableRowHeight=!!c[b].variableRowHeight}}return a.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var a=this.getColumns(),c=a[b];return c||null},getPreviousSibling:function(c){var a=this.getHeaderIndex(c),b=null;if(a>0){b=this.getColumns()[a-1]}return b},getNextSibling:function(c){var a=this.getHeaderIndex(c),b;if(a!==-1){b=this.getColumns()[a+1]}return b||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var a=this.getColumns(),b=a.length;return b>0?a[b-1]:null},getHeaderByDataIndex:function(d){var c=this.getColumns(),e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.dataIndex===d){return b}}return null},getHeaderById:function(e){var c=this.getColumns(),d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.getItemId()===e){return b}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(':not([hidden])')||a.prev(':not([hidden])')}return a},cacheColumns:function(){var a=this.getHeaderColumns(this.headerCt),b=this.secondHeaderCt;if(b){a=a.concat(this.getHeaderColumns(b))}this.columns=a},getHeaderColumns:function(a){var b=this.visibleOnly?a.getVisibleGridColumns():a.getGridColumns();return Ext.Array.clone(b)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null;this.callParent()}},1,0,0,0,0,0,[Ext.grid,'ColumnManager',Ext.grid,'ColumnModel'],function(){this.createAlias('indexOf','getHeaderIndex')});Ext.cmd.derive('Ext.view.DropZone',Ext.dd.DropZone,{indicatorCls:'x-grid-drop-indicator',indicatorHtml:['<div class="','x-','grid-drop-indicator-left" role="presentation"></div>','<div class="x-grid-drop-indicator-right" role="presentation"></div>'].join(''),constructor:function(b){var a=this;Ext.apply(a,b);if(!a.ddGroup){a.ddGroup='view-dd-zone-'+a.view.id}Ext.dd.DropZone.prototype.constructor.call(this,a.view.el)},fireViewEvent:function(){var a=this,b;a.lock();b=a.view.fireEvent.apply(a.view,arguments);a.unlock();return b},getTargetFromEvent:function(h){var e=h.getTarget(this.view.getItemSelector()),d,b,c,a,g,f;if(!e){d=h.getY();for(a=0,b=this.view.getNodes(),g=b.length;a<g;a++){c=b[a];f=Ext.fly(c).getBox();if(d<=f.bottom){return c}}}return e},getIndicator:function(){var a=this;if(!a.indicator){a.indicator=new Ext.Component({ariaRole:'presentation',html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:!0,shadow:!1})}return a.indicator},getPosition:function(d,c){var e=d.getXY()[1],a=Ext.fly(c).getRegion(),b;if(a.bottom-e>=(a.bottom-a.top)/2){b='before'}else {b='after'}return b},containsRecordAtOffset:function(f,d,g){if(!d){return !1}var a=this.view,e=a.indexOf(d),c=a.getNode(e+g),b=c?a.getRecord(c):null;return b&&Ext.Array.contains(f,b)},positionIndicator:function(f,h,i){var a=this,c=a.view,d=a.getPosition(i,f),b=c.getRecord(f),g=h.records,e;if(!Ext.Array.contains(g,b)&&(d==='before'&&!a.containsRecordAtOffset(g,b,-1)||d==='after'&&!a.containsRecordAtOffset(g,b,1))){a.valid=!0;if(a.overRecord!==b||a.currentPosition!==d){e=Ext.fly(f).getY()-c.el.getY()-1;if(d==='after'){e+=Ext.fly(f).getHeight()}if(c.touchScroll===2){e+=c.getScrollY()}a.getIndicator().setWidth(Ext.fly(c.el).getWidth()).showAt(0,e);a.overRecord=b;a.currentPosition=d}}else {a.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=!1;this.getIndicator().hide()}},onNodeOver:function(c,e,d,b){var a=this;if(!Ext.Array.contains(b.records,a.view.getRecord(c))){a.positionIndicator(c,b,d)}return a.valid?a.dropAllowed:a.dropNotAllowed},notifyOut:function(d,b,e,c){var a=this;Ext.dd.DropZone.prototype.notifyOut.apply(this,arguments);a.overRecord=a.currentPosition=null;a.valid=!1;if(a.indicator){a.indicator.hide()}},onContainerOver:function(f,e,d){var a=this,b=a.view,c=b.dataSource.getCount();if(c){a.positionIndicator(b.all.last(),d,e)}else {a.overRecord=a.currentPosition=null;a.getIndicator().setWidth(Ext.fly(b.el).getWidth()).showAt(0,0);a.valid=!0}return a.dropAllowed},onContainerDrop:function(b,c,a){return this.onNodeDrop(b,null,c,a)},onNodeDrop:function(f,g,h,e){var a=this,d=!1,c={wait:!1,processDrop:function(){a.invalidateDrop();a.handleNodeDrop(e,a.overRecord,a.currentPosition);d=!0;a.fireViewEvent('drop',f,e,a.overRecord,a.currentPosition)},cancelDrop:function(){a.invalidateDrop();d=!0}},b=!1;if(a.valid){b=a.fireViewEvent('beforedrop',f,e,a.overRecord,a.currentPosition,c);if(c.wait){return}if(b!==!1){if(!d){c.processDrop()}}}return b},destroy:function(){this.indicator=Ext.destroy(this.indicator);Ext.dd.DropZone.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.view,'DropZone'],0);Ext.cmd.derive('Ext.grid.ViewDropZone',Ext.view.DropZone,{indicatorHtml:'<div class="x-grid-drop-indicator-left" role="presentation"></div><div class="x-grid-drop-indicator-right" role="presentation"></div>',indicatorCls:'x-grid-drop-indicator',handleNodeDrop:function(a,h,g){var b=this.view,f=b.getStore(),e,d,c,i;if(a.copy){d=a.records;a.records=[];for(c=0,i=d.length;c<i;c++){a.records.push(d[c].copy())}}else {a.view.store.remove(a.records,a.view===b)}if(h&&g){e=f.indexOf(h);if(g!=='before'){e++}f.insert(e,a.records)}else {f.add(a.records)}b.getSelectionModel().select(a.records);b.getNavigationModel().setPosition(a.records[0])}},0,0,0,0,0,0,[Ext.grid,'ViewDropZone'],0);Ext.cmd.derive('Ext.grid.column.Template',Ext.grid.column.Column,{alternateClassName:'Ext.grid.TemplateColumn',initComponent:function(){var a=this;a.tpl=!Ext.isPrimitive(a.tpl)&&a.tpl.compile?a.tpl:new Ext.XTemplate(a.tpl);a.hasCustomRenderer=!0;Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},defaultRenderer:function(c,d,a){var b=Ext.apply({},a.data,a.getAssociatedData());return this.tpl.apply(b)},updater:function(b,a){Ext.fly(b).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.CheckColumn.prototype.defaultRenderer.call(this,a)}},0,['templatecolumn'],['component','box','container','headercontainer','gridcolumn','templatecolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'templatecolumn':!0},['widget.templatecolumn'],0,[Ext.grid.column,'Template',Ext.grid,'TemplateColumn'],0);Ext.cmd.derive('Ext.grid.column.Widget',Ext.grid.column.Column,{config:{defaultWidgetUI:{}},ignoreExport:!0,sortable:!1,onWidgetAttach:null,preventUpdate:!0,stopSelection:!0,initComponent:function(){var b=this,a;Ext.grid.column.Column.prototype.initComponent.apply(this,arguments);a=b.widget;b.widget=a=Ext.apply({},a);if(!a.ui){a.ui=b.getDefaultWidgetUI()[a.xtype]||'default'}b.isFixedSize=Ext.isNumber(a.width)},processEvent:function(c,d,h,e,f,b,g,i){var a;if(this.stopSelection&&c==='click'){a=b.getTarget(d.innerSelector);if(a&&a!==b.target){b.stopSelection=!0}}},beforeRender:function(){var a=this,b=a.tdCls,c;a.listenerScopeFn=function(b){if(b==='this'){return this}return a.resolveListenerScope(b)};a.liveWidgets={};a.cachedStyles={};a.freeWidgetStack=[c=a.getFreeWidget()];b=b?b+' ':'';a.tdCls=b+c.getTdCls();a.setupViewListeners(a.getView());Ext.grid.column.Column.prototype.beforeRender.call(this)},afterRender:function(){var a=this.getView();Ext.grid.column.Column.prototype.afterRender.call(this);if(a&&a.viewReady&&!a.ownerGrid.reconfiguring){this.onViewRefresh(a,a.getViewRange())}},defaultRenderer:Ext.emptyFn,updater:function(c,b,a){this.updateWidget(a)},onResize:function(e){var a=this,d=a.liveWidgets,c=a.getView(),f,b;if(!a.isFixedSize&&a.rendered&&c&&c.viewReady){b=c.getEl().down(a.getCellInnerSelector());if(b){e-=parseInt(a.getCachedStyle(b,'padding-left'),10)+parseInt(a.getCachedStyle(b,'padding-right'),10);for(f in d){d[f].setWidth(e)}}}},onAdded:function(){var b=this,a;Ext.grid.column.Column.prototype.onAdded.apply(this,arguments);a=b.getView();if(a){b.setupViewListeners(a);if(a&&a.viewReady&&b.rendered&&a.getEl().down(b.getCellSelector())){b.onViewRefresh(a,a.getViewRange())}}},onRemoved:function(e){var a=this,c=a.liveWidgets,b=a.viewListeners,d;if(a.rendered){a.viewListeners=b&&Ext.destroy(b);if(!e){for(d in c){c[d].detachFromBody()}}}Ext.grid.column.Column.prototype.onRemoved.apply(this,arguments)},onDestroy:function(){var b=this,e=b.liveWidgets,d=b.freeWidgetStack,g,a,c,f;if(b.rendered){for(g in e){a=e[g];a.$widgetRecord=a.$widgetColumn=null;delete a.getWidgetRecord;delete a.getWidgetColumn;a.destroy()}for(c=0,f=d.length;c<f;++c){d[c].destroy()}}b.freeWidgetStack=b.liveWidgets=null;Ext.grid.column.Column.prototype.onDestroy.call(this)},getWidget:function(b){var a=this.liveWidgets,c;if(b&&a){c=a[b.internalId]}return c||null},privates:{getCachedStyle:function(c,a){var b=this.cachedStyles;return b[a]||(b[a]=Ext.fly(c).getStyle(a))},getFreeWidget:function(){var b=this,a=b.freeWidgetStack?b.freeWidgetStack.pop():null;if(!a){a=Ext.widget(b.widget);a.resolveListenerScope=b.listenerScopeFn;a.getWidgetRecord=b.widgetRecordDecorator;a.getWidgetColumn=b.widgetColumnDecorator;a.dataIndex=b.dataIndex;a.measurer=b;a.ownerCmp=b.getView();a.isLayoutChild=b.returnFalse}return a},onBeforeRefresh:function(){var a=this.liveWidgets,b;for(b in a){a[b].detachFromBody()}},onItemAdd:function(l,q,o){var a=this,m=a.getView(),n=!!a.onWidgetAttach,k=a.dataIndex,h=a.isFixedSize,p=l.length,f,d,i,e,b,j,c,g;if(a.isVisible(!0)){for(f=0;f<p;f++){d=l[f];if(d.isNonData){continue}i=m.getRowFromItem(o[f]);if(i){e=i.cells[a.getVisibleIndex()].firstChild;if(!h&&!g){g=a.lastBox.width-parseInt(a.getCachedStyle(e,'padding-left'),10)-parseInt(a.getCachedStyle(e,'padding-right'),10)}b=a.liveWidgets[d.internalId]=a.getFreeWidget();b.$widgetColumn=a;b.$widgetRecord=d;Ext.fly(e).empty();if(b.defaultBindProperty&&k){b.setConfig(b.defaultBindProperty,d.get(k))}if(n){Ext.callback(a.onWidgetAttach,a.scope,[a,b,d],0,a)}j=b.el||b.element;if(j){e.appendChild(j.dom);if(!h){b.setWidth(g)}b.reattachToBody()}else {if(!h){b.width=g}b.render(e)}c=b.getFocusEl();if(c){if(m.actionableMode){if(!c.isTabbable()){c.restoreTabbableState()}}else {if(c.isTabbable()){c.saveTabbableState()}}}}}}},onItemRemove:function(j,k,c){var f=this,g=f.liveWidgets,a,h,d,i,e,b;if(f.rendered){c=Ext.Array.from(c);i=c.length;for(e=0;e<i;e++){h=c[e];d=h.getAttribute('data-recordId');if(d&&(a=g[d])){delete g[d];f.freeWidgetStack.unshift(a);a.$widgetRecord=a.$widgetColumn=null;b=a.getFocusEl();if(b){if(b.isTabbable(!0)){b.saveTabbableState({includeHidden:!0})}b.blur()}a.detachFromBody()}}}},onItemUpdate:function(a,b,c){this.updateWidget(a)},onViewRefresh:function(p,o){var b=this,m=p.all,s=!!b.onWidgetAttach,e=b.liveWidgets,n=b.dataIndex,k=b.isFixedSize,c,a,j,i,h,g,f,d,r,l,q;if(b.isVisible(!0)){b.liveWidgets={};Ext.suspendLayouts();for(g=m.startIndex,f=0;g<=m.endIndex;g++,f++){d=o[f];if(d.isNonData){continue}h=d.internalId;c=p.getRow(m.item(g)).cells[b.getVisibleIndex()].firstChild;a=b.liveWidgets[h]=e[h]||b.getFreeWidget();a.$widgetRecord=d;a.$widgetColumn=b;delete e[h];l=b.lastBox;if(l&&!k&&i===undefined){i=l.width-parseInt(b.getCachedStyle(c,'padding-left'),10)-parseInt(b.getCachedStyle(c,'padding-right'),10)}if(a.defaultBindProperty&&n){a.setConfig(a.defaultBindProperty,o[f].get(n))}if(s){Ext.callback(b.onWidgetAttach,b.scope,[b,a,d],0,b)}j=a.el||a.element;if(j){q=j.dom;if(q.parentNode!==c){Ext.fly(c).empty();c.appendChild(j.dom)}if(!k){a.setWidth(i)}a.reattachToBody()}else {if(!k){a.width=i}Ext.fly(c).empty();a.render(c)}}Ext.resumeLayouts(!0);for(r in e){a=e[r];a.$widgetRecord=a.$widgetColumn=null;b.freeWidgetStack.unshift(a);a.detachFromBody()}}},returnFalse:function(){return !1},setupViewListeners:function(b){var a=this;a.viewListeners=b.on({refresh:a.onViewRefresh,itemupdate:a.onItemUpdate,itemadd:a.onItemAdd,itemremove:a.onItemRemove,scope:a,destroyable:!0});if(Ext.isIE8){b.on('beforerefresh',a.onBeforeRefresh,a)}},updateWidget:function(c){var b=this.dataIndex,a;if(this.rendered){a=this.liveWidgets[c.internalId];if(a&&a.defaultBindProperty&&b){a.setConfig(a.defaultBindProperty,c.get(b))}}},widgetRecordDecorator:function(){return this.$widgetRecord},widgetColumnDecorator:function(){return this.$widgetColumn}}},0,['widgetcolumn'],['component','box','container','headercontainer','gridcolumn','widgetcolumn'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'widgetcolumn':!0},['widget.widgetcolumn'],0,[Ext.grid.column,'Widget'],0);Ext.cmd.derive('Ext.grid.feature.Feature',Ext.util.Observable,{wrapsItem:!1,isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,constructor:function(a){this.initialConfig=a;Ext.util.Observable.prototype.constructor.apply(this,arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,getFireEventArgs:function(b,c,a,d){return [b,c,a,d]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}},1,0,0,0,['feature.feature'],0,[Ext.grid.feature,'Feature'],0);Ext.cmd.derive('Ext.grid.feature.AbstractSummary',Ext.grid.feature.Feature,{summaryRowCls:'x-grid-row-summary',readDataOptions:{recordCreator:Ext.identityFn},summaryRowTpl:{fn:function(c,a,b){if(a.record.isSummary&&this.summaryFeature.showSummaryRow){this.summaryFeature.outputSummaryRecord(a.record,a,c,b)}else {this.nextTpl.applyOut(a,c,b)}},priority:1000},showSummaryRow:!0,init:function(){var a=this;a.view.summaryFeature=a;a.rowTpl=a.view.self.prototype.rowTpl;a.view.addRowTpl(a.summaryRowTpl).summaryFeature=a;a.summaryData={};a.groupInfo={};if(!a.summaryTableCls){a.summaryTableCls='x-grid-item'}a.summaryRowSelector='.'+a.summaryRowCls},bindStore:function(c,b){var a=this;Ext.destroy(a.readerListeners);if(a.remoteRoot){a.readerListeners=b.getProxy().getReader().on({scope:a,destroyable:!0,rawdata:a.onReaderRawData})}},onReaderRawData:function(a){this.summaryRows=null;this.readerRawData=a},toggleSummaryRow:function(a,d){var b=this,e=b.showSummaryRow,c;a=a!=null?!!a:!b.showSummaryRow;b.showSummaryRow=a;if(a&&a!==e){b.updateSummaryRow=!0}if(b.lockingPartner){if(!d){b.lockingPartner.toggleSummaryRow(a,!0);c=!0}}else {c=!0}if(c){b.grid.ownerGrid.getView().refresh()}},createRenderer:function(a,c){var e=this,d=c.ownerGroup,f=d?e.summaryData[d]:e.summaryData,b=a.dataIndex||a.getItemId();return function(e,d){return a.summaryRenderer?a.summaryRenderer(c.data[b],f,b,d):c.data[b]}},outputSummaryRecord:function(e,f,j){var c=f.view,i=c.rowValues,d=f.columns||c.headerCt.getVisibleGridColumns(),g=d.length,b,a,h={view:c,record:e,rowStyle:'',rowClasses:[this.summaryRowCls],itemClasses:[],recordIndex:-1,rowId:c.getRowId(e),columns:d};for(b=0;b<g;b++){a=d[b];a.savedRenderer=a.renderer;if(a.summaryType||a.summaryRenderer){a.renderer=this.createRenderer(a,e)}else {a.renderer=Ext.emptyFn}}c.rowValues=h;c.self.prototype.rowTpl.applyOut(h,j,parent);c.rowValues=i;for(b=0;b<g;b++){a=d[b];a.renderer=a.savedRenderer;a.savedRenderer=null}},getSummary:function(f,c,a,e){var d=!!e,b=d?e:f;if(c){if(Ext.isFunction(c)){if(d){return b.aggregate(a,c)}else {return b.aggregate(c,null,!1,[a])}}switch(c){case 'count':return b.count(a);case 'min':return b.min(a);case 'max':return b.max(a);case 'sum':return b.sum(a);case 'average':return b.average(a);default:return '';}}},getRawData:function(){var a=this.readerRawData;if(a){return a}return this.view.getStore().getProxy().getReader().rawData},generateSummaryData:function(h){var c=this,a=c.summaryRows,e={},k={},g,d,i,b,f,a,j,l;if(!a){i=c.getRawData();if(!i){return}g=c.view.store.getProxy().getReader();d=Ext.create('reader.'+g.type,g.getConfig());d.setRootProperty(c.remoteRoot);a=d.getRoot(i);if(a){j=[];if(!Ext.isArray(a)){a=[a]}f=a.length;for(b=0;b<f;++b){l=d.extractRecordData(a[b],c.readDataOptions);j.push(l)}c.summaryRows=a=j}d.destroy();c.readerRawData=null}if(a){for(b=0,f=a.length;b<f;b++){e=a[b];if(h){k[e[h]]=e}}}return h?k:e},setSummaryData:function(e,d,c,b){var a=this.summaryData;if(b){if(!a[b]){a[b]={}}a[b][d]=c}else {a[d]=c}},destroy:function(){Ext.destroy(this.readerListeners);this.readerRawData=this.summaryRows=null;Ext.grid.feature.Feature.prototype.destroy.call(this)}},0,0,0,0,['feature.abstractsummary'],0,[Ext.grid.feature,'AbstractSummary'],0);Ext.cmd.derive('Ext.grid.feature.GroupStore',Ext.util.Observable,{isStore:!0,defaultViewSize:100,isFeatureStore:!0,badGrouperKey:'[object Object]',constructor:function(b,c){var a=this;Ext.util.Observable.prototype.constructor.call(this);a.groupingFeature=b;a.bindStore(c);if(!b.grid.isLocked){a.bindViewStoreListeners()}},bindStore:function(b){var a=this;if(!b||a.store!==b){Ext.destroy(a.storeListeners);a.store=null}if(b){a.storeListeners=b.on({groupchange:a.onGroupChange,remove:a.onRemove,add:a.onAdd,idchanged:a.onIdChanged,update:a.onUpdate,refresh:a.onRefresh,clear:a.onClear,scope:a,destroyable:!0});a.store=b;a.processStore(b)}},bindViewStoreListeners:function(){var b=this.groupingFeature.view,a=b.getStoreListeners();a.scope=b;this.on(a)},processStore:function(d){var j=this,a=j.groupingFeature,r=a.startCollapsed,e=j.data,p=Ext.Array,x=p.indexOf,y=p.splice,i=d.getGroups(),t=i?i.length:0,u=d.getGroupField(),h=i&&p.unique(Ext.Object.getValues(i.itemGroupKeys)),s=!1,f=a.getCache(),l,k,b,w,q,m,n,g,c,o,v;a.invalidateCache();k=a.getCache();if(f.map){k.map=f.map}if(e){e.clear()}else {e=j.data=new Ext.util.Collection({rootProperty:'data',extraKeys:{byInternalId:{property:'internalId',rootProperty:''}}})}if(d.getCount()){a.startCollapsed=!1;if(t>0){v=d.getModel();for(b=0;b<t;b++){m=i.getAt(b);c=m.getGroupKey();if(j.badGrouperKey===c&&(q=a.getGrouper(u))){a.startCollapsed=r;d.group(q);return}l=k[c]=f[c]||a.getMetaGroup(c);y(h,x(h,c),1);s=l.isCollapsed=r||l.isCollapsed;if(s){o={};o[u]=c;l.placeholder=g=new v(o);g.isNonData=g.isCollapsedPlaceholder=!0;g.group=m;e.add(g)}else {e.insert(j.data.length,m.items)}}if(h.length){for(b=0,w=h.length;b<w;b++){n=h[b];k[n]=f[n]}}f=null}else {e.add(d.getRange())}}},isCollapsed:function(a){return this.groupingFeature.getCache()[a].isCollapsed},isLoading:function(){return !1},getData:function(){return this.data},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.data.getCount()},rangeCached:function(b,a){return a<this.getCount()},getRange:function(d,b,a){var c=this.data.getRange(d,Ext.isNumber(b)?b+1:b);if(a&&a.callback){a.callback.call(a.scope||this,c,d,b,a)}return c},getAt:function(a){return this.data.getAt(a)},getById:function(a){return this.store.getById(a)},getByInternalId:function(a){return this.store.getByInternalId(a)||this.data.byInternalId.get(a)},expandGroup:function(b){var a=this,f=a.groupingFeature,e,d,c,g;if(typeof b==='string'){b=f.getGroup(b)}if(b){g=b.items;e=f.getMetaGroup(b);d=e.placeholder}if(g.length&&(c=a.data.indexOf(d))!==-1){e.isCollapsed=!1;a.isExpandingOrCollapsing=1;a.data.removeAt(c);a.data.insert(c,b.items);a.fireEvent('replace',a,c,[d],b.items);a.fireEvent('groupexpand',a,b);a.isExpandingOrCollapsing=0}},collapseGroup:function(b){var a=this,e=a.groupingFeature,d,f,g,c;if(typeof b==='string'){b=e.getGroup(b)}if(b){c=b.items}if(c&&(g=c.length)&&(d=a.data.indexOf(c[0]))!==-1){e.getMetaGroup(b).isCollapsed=!0;a.isExpandingOrCollapsing=2;a.data.removeAt(d,g);a.data.insert(d,f=a.getGroupPlaceholder(b));a.fireEvent('replace',a,d,c,[f]);a.fireEvent('groupcollapse',a,b);a.isExpandingOrCollapsing=0}},getGroupPlaceholder:function(d){var b=this.groupingFeature.getMetaGroup(d);if(!b.placeholder){var e=this.store,g=e.getModel(),c={},f=d.getGroupKey(),a;c[e.getGroupField()]=f;a=b.placeholder=new g(c);a.isNonData=a.isCollapsedPlaceholder=!0;a.groupKey=f}return b.placeholder},indexOf:function(a){var b=-1;if(!a.isCollapsedPlaceholder){b=this.data.indexOf(a)}return b},contains:function(a){return this.indexOf(a)>-1},indexOfPlaceholder:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},indexOfTotal:function(a){return this.store.indexOf(a)},onAdd:function(b){var a=this;a.processStore(a.store);a.fireEvent('refresh',a);return !1},onClear:function(d,c,b){var a=this;a.processStore(a.store);a.fireEvent('clear',a)},onIdChanged:function(d,b,a,c){this.data.updateKey(b,a)},onRefresh:function(){this.processStore(this.store);this.fireEvent('refresh',this)},onRemove:function(){var a=this;a.processStore(a.store);a.fireEvent('refresh',a);return !1},onUpdate:function(k,b,j,c){var a=this,g=a.groupingFeature,f,i,d,e,h;if(k.isGrouped()){f=b.group=g.getGroup(b);if(f){i=g.getMetaGroup(b);if(c&&Ext.Array.contains(c,g.getGroupField())){return a.onRefresh(a.store)}if(i.isCollapsed){a.fireEvent('update',a,i.placeholder)}else {Ext.suspendLayouts();a.fireEvent('update',a,b,j,c);h=f.items;d=h[0];e=h[h.length-1];if(d!==b){d.group=f;a.fireEvent('update',a,d,'edit',c);delete d.group}if(e!==b&&e!==d&&g.showSummaryRow){e.group=f;a.fireEvent('update',a,e,'edit',c);delete e.group}Ext.resumeLayouts(!0)}}delete b.group}else {a.fireEvent('update',a,b,j,c)}},onGroupChange:function(b,a){if(!a){this.processStore(b)}this.fireEvent('groupchange',b,a)},destroy:function(){var a=this;a.bindStore(null);Ext.destroyMembers(a,'data','groupingFeature');Ext.util.Observable.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.grid.feature,'GroupStore'],0);Ext.cmd.derive('Ext.grid.feature.Grouping',Ext.grid.feature.Feature,{eventPrefix:'group',eventSelector:'.x-grid-group-hd',refreshData:{},wrapsItem:!0,groupHeaderTpl:'{columnName}: {name}',depthToIndent:17,collapsedCls:'x-grid-group-collapsed',hdCollapsedCls:'x-grid-group-hd-collapsed',hdNotCollapsibleCls:'x-grid-group-hd-not-collapsible',collapsibleCls:'x-grid-group-hd-collapsible',ctCls:'x-group-hd-container',groupByText:'Group by this field',showGroupsText:'Show in groups',hideGroupedHeader:!1,startCollapsed:!1,enableGroupingMenu:!0,enableNoGroups:!0,collapsible:!0,groupers:null,expandTip:'Click to expand. CTRL key collapses all others',collapseTip:'Click to collapse. CTRL/click collapses all others',showSummaryRow:!1,outerTpl:['{%','if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {','this.groupingFeature.setup(values.rows, values.view.rowValues);','}','this.nextTpl.applyOut(values, out, parent);','if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {','this.groupingFeature.cleanup(values.rows, values.view.rowValues);','}','%}',{priority:200}],groupRowTpl:['{%','var me = this.groupingFeature,','colspan = "colspan=" + values.columns.length;','if (me.disabled || parent.rows.length === 1 && parent.rows[0].isSummary) {','values.needsWrap = false;','} else {','me.setupRowData(values.record, values.rowIndex, values);','}','%}','<tpl if="needsWrap">','<tpl if="isFirstRow">','{% values.view.renderColumnSizer(values, out); %}','<tr data-boundView="{view.id}" data-recordId="{record.internalId:htmlEncode}" data-recordIndex="{[values.isCollapsedGroup ? -1 : values.recordIndex]}" class="{groupHeaderCls}">','<td class="{[me.ctCls]}" {[colspan]}>','{%','var groupTitleStyle = (!values.view.lockingPartner || (values.view.ownerCt === values.view.ownerCt.ownerLockable.lockedGrid) || (values.view.lockingPartner.headerCt.getVisibleGridColumns().length === 0)) ? "" : "visibility:hidden";','%}','<div data-groupname="{groupName:htmlEncode}" class="','x-','grid-group-hd {collapsibleCls}" nottabindex="0" hidefocus="on" {ariaCellInnerAttr}>','<div class="','x-','grid-group-title" style="{[groupTitleStyle]}" {ariaGroupTitleAttr} data-qtip="{[values.isCollapsedGroup ? me.expandTip : me.collapseTip]}">','{[values.groupHeaderTpl.apply(values.metaGroupCache, parent) || "&#160;"]}','</div>','</div>','</td>','</tr>','</tpl>','<tpl if="!isCollapsedGroup">','{%','values.itemClasses.length = 0;','this.nextTpl.applyOut(values, out, parent);','%}','</tpl>','<tpl if="summaryRecord">','{%me.outputSummaryRecord(values.summaryRecord, values, out, parent);%}','</tpl>','<tpl else>','{%this.nextTpl.applyOut(values, out, parent);%}','</tpl>',{priority:200,beginRowSync:function(b){var a=this.groupingFeature;b.add('header',a.eventSelector);b.add('summary',a.summaryRowSelector)},syncContent:function(c,b,f){c=Ext.fly(c,'syncDest');b=Ext.fly(b,'syncSrc');var a=this.groupingFeature,h=c.down(a.eventSelector,!0),g=b.down(a.eventSelector,!0),e=c.down(a.summaryRowSelector,!0),d=b.down(a.summaryRowSelector,!0);if(h&&g){Ext.fly(h).syncContent(g)}if(e&&d){if(f){this.groupingFeature.view.updateColumns(e,d,f)}else {Ext.fly(e).syncContent(d)}}}}],init:function(c){var a=this,b=a.view,f=a.getGridStore(),d,e;b.isGrouping=f.isGrouped();a.mixins.summary.init.call(a);Ext.grid.feature.Feature.prototype.init.call(this,c);b.headerCt.on({columnhide:a.onColumnHideShow,columnshow:a.onColumnHideShow,columnmove:a.onColumnMove,scope:a});b.addTpl(Ext.XTemplate.getTpl(a,'outerTpl')).groupingFeature=a;b.addRowTpl(Ext.XTemplate.getTpl(a,'groupRowTpl')).groupingFeature=a;b.preserveScrollOnRefresh=!0;if(f.isBufferedStore){a.collapsible=!1}else {d=a.lockingPartner;if(d&&d.dataSource){a.dataSource=b.dataSource=e=d.dataSource}else {a.dataSource=b.dataSource=e=new Ext.grid.feature.GroupStore(a,f)}}c=c.ownerLockable||c;c.on('beforereconfigure',a.beforeReconfigure,a);b.on({afterrender:a.afterViewRender,scope:a,single:!0});if(e){e.on('groupchange',a.onGroupChange,a)}else {a.setupStoreListeners(f)}a.mixins.summary.bindStore.call(a,c,c.getStore())},getGridStore:function(){return this.view.getStore()},indexOf:function(a){return this.dataSource.indexOf(a)},indexOfPlaceholder:function(a){return this.dataSource.indexOfPlaceholder(a)},isInCollapsedGroup:function(d){var c=this,e=c.getGridStore(),b=!1,a;if(e.isGrouped()&&(a=c.getMetaGroup(d))){b=!!(a&&a.isCollapsed)}return b},createCache:function(){var a=this.metaGroupCache={},b=this.lockingPartner;if(b){b.metaGroupCache=a}a.map={};return a},getCache:function(){return this.metaGroupCache||this.createCache()},invalidateCache:function(){var a=this.lockingPartner;this.metaGroupCache=null;if(a){a.metaGroupCache=null}},vetoEvent:function(c,d,b,a){if(a.type!=='mouseover'&&a.type!=='mouseout'&&a.type!=='mouseenter'&&a.type!=='mouseleave'&&a.getTarget(this.eventSelector)){return !1}},enable:function(){var a=this,c=a.view,e=a.getGridStore(),d=a.hideGroupedHeader&&a.getGroupedHeader(),b;c.isGrouping=!0;if(c.lockingPartner){c.lockingPartner.isGrouping=!0}Ext.grid.feature.Feature.prototype.enable.call(this);if(a.lastGrouper){e.group(a.lastGrouper);a.lastGrouper=null}if(d){d.hide()}b=a.view.headerCt.getMenu().down('#groupToggleMenuItem');if(b){b.setChecked(!0,!0)}},disable:function(){var a=this,c=a.view,f=a.getGridStore(),d=a.hideGroupedHeader&&a.getGroupedHeader(),e=f.getGrouper(),b;c.isGrouping=!1;if(c.lockingPartner){c.lockingPartner.isGrouping=!1}Ext.grid.feature.Feature.prototype.disable.call(this);if(e){a.lastGrouper=e;f.clearGrouping()}if(d){d.show()}b=a.view.headerCt.getMenu().down('#groupToggleMenuItem');if(b){b.setChecked(!1,!0);b.disable()}},afterViewRender:function(){var a=this,b=a.view;b.on({scope:a,groupclick:a.onGroupClick});if(a.enableGroupingMenu){a.injectGroupingMenu()}a.pruneGroupedHeader();a.lastGrouper=a.getGridStore().getGrouper();if(a.disabled){a.disable()}},injectGroupingMenu:function(){var a=this,b=a.view.headerCt;b.showMenuBy=a.showMenuBy;b.getMenuItems=a.getMenuItems()},onColumnHideShow:function(l,m){var a=this,e=a.view,k=e.headerCt,i=k.getMenu(),c=i.activeHeader,f=i.down('#groupMenuItem'),g,h=a.grid.getVisibleColumnManager().getColumns().length,d,j,b;if(c&&f){g=c.groupable===!1||!c.dataIndex||a.view.headerCt.getVisibleGridColumns().length<2?'disable':'enable';f[g]()}if(e.rendered&&h){d=e.el.query('.'+a.ctCls);for(b=0,j=d.length;b<j;++b){d[b].colSpan=h}}},onColumnMove:function(){var a=this,f=a.view,b,g,e,c,d,h;if(f.getStore().isGrouped()){g=a.getCache().map;Ext.suspendLayouts();for(b in g){e=a.getGroup(b);c=e.first();d=e.last();h=a.getMetaGroup(b);if(h.isCollapsed){c=d=a.dataSource.getGroupPlaceholder(b)}f.refreshNode(c);if(a.showSummaryRow&&d!==c){f.refreshNode(d)}}Ext.resumeLayouts(!0)}},showMenuBy:function(h,i,d){var a=this,e=a.getMenu(),f=e.down('#groupMenuItem'),g=d.groupable===!1||!d.dataIndex||a.view.headerCt.getVisibleGridColumns().length<2?'disable':'enable',b=e.down('#groupToggleMenuItem'),c=a.grid.getStore().isGrouped();f[g]();if(b){b.setChecked(c,!0);b[c?'enable':'disable']()}Ext.grid.header.Container.prototype.showMenuBy.apply(a,arguments)},getMenuItems:function(){var a=this,e=a.groupByText,f=a.disabled||!a.getGroupField(),c=a.showGroupsText,b=a.enableNoGroups,d=a.view.headerCt.getMenuItems;return function(){var g=d.call(this);g.push('-',{iconCls:'x-group-by-icon',itemId:'groupMenuItem',text:e,handler:a.onGroupMenuItemClick,scope:a});if(b){g.push({itemId:'groupToggleMenuItem',text:c,checked:!f,checkHandler:a.onGroupToggleMenuItemClick,scope:a})}return g}},onGroupMenuItemClick:function(c,g){var a=this,e=c.parentMenu,b=e.activeHeader,f=a.view,d=a.getGridStore();if(a.disabled){a.lastGrouper=null;a.block();a.enable();a.unblock()}f.isGrouping=!0;d.group(a.getGrouper(b.dataIndex)||b.dataIndex);a.pruneGroupedHeader()},block:function(b){var a=this;a.blockRefresh=a.view.blockRefresh=!0;if(a.lockingPartner&&!b){a.lockingPartner.block(!0)}},unblock:function(b){var a=this;a.blockRefresh=a.view.blockRefresh=!1;if(a.lockingPartner&&!b){a.lockingPartner.unblock(!0)}},onGroupToggleMenuItemClick:function(b,a){this[a?'enable':'disable']()},pruneGroupedHeader:function(){var a=this,b=a.getGroupedHeader();if(a.hideGroupedHeader&&b){Ext.suspendLayouts();if(a.prunedHeader&&a.prunedHeader!==b){a.prunedHeader.show()}a.prunedHeader=b;if(b.rendered){b.hide()}Ext.resumeLayouts(!0)}},getHeaderNode:function(b){var f=this.view.getEl(),c,a,e,d;if(f){b=Ext.htmlEncode(b);c=f.query(this.eventSelector);for(a=0,e=c.length;a<e;++a){d=c[a];if(d.getAttribute('data-groupName')===b){return d}}}},getGroup:function(a){var b=this.getGridStore(),d=a,c;if(b.isGrouped()){if(a.isModel){a=a.get(b.getGroupField())}if(typeof a!=='string'){a=b.getGrouper().getGroupString(d)}c=b.getGroups().getByKey(a)}return c},getGrouper:function(b){var a=this.groupers;if(!a){return null}return Ext.Array.findBy(a,function(a){return a.property===b})},getGroupField:function(){return this.getGridStore().getGroupField()},getMetaGroup:function(a){var d=this.metaGroupCache||this.createCache(),c,b;if(a.isModel){a=this.getGroup(a)}if(a!=null){c=typeof a==='string'?a:a.getGroupKey();b=d[c];if(!b){b=d[c]={isCollapsed:!1,lastGroup:null,lastGroupGeneration:null,lastFilterGeneration:null,aggregateRecord:new Ext.data.Model()};d.map[c]=!0}}return b},isExpanded:function(a){return !this.getMetaGroup(a).isCollapsed},expand:function(a,b){this.doCollapseExpand(!1,a,b)},expandAll:function(){var c=this,b=c.getCache(),d=c.lockingPartner,a;for(a in b){if(b.hasOwnProperty(a)){b[a].isCollapsed=!1}}Ext.suspendLayouts();c.dataSource.onRefresh();Ext.resumeLayouts(!0);for(a in b){if(b.hasOwnProperty(a)){c.afterCollapseExpand(!1,a);if(d){d.afterCollapseExpand(!1,a)}}}},collapse:function(a,b){this.doCollapseExpand(!0,a,b)},isAllCollapsed:function(){var c=this,a=c.getCache(),b;for(b in a){if(a.hasOwnProperty(b)){if(!a[b].isCollapsed){return !1}}}return !0},isAllExpanded:function(){var c=this,a=c.getCache(),b;for(b in a){if(a.hasOwnProperty(b)){if(a[b].isCollapsed){return !1}}}return !0},collapseAll:function(){var c=this,b=c.getCache(),a,d=c.lockingPartner;for(a in b){if(b.hasOwnProperty(a)){b[a].isCollapsed=!0}}Ext.suspendLayouts();c.dataSource.onRefresh();Ext.resumeLayouts(!0);for(a in b){if(b.hasOwnProperty(a)){c.afterCollapseExpand(!0,a);if(d){d.afterCollapseExpand(!0,a)}}}},doCollapseExpand:function(b,c,f){var a=this,e=a.lockingPartner,d=a.getGroup(c);if(a.getMetaGroup(d).isCollapsed!==b){a.isExpandingOrCollapsing=!0;Ext.suspendLayouts();if(b){a.dataSource.collapseGroup(d)}else {a.dataSource.expandGroup(d)}Ext.resumeLayouts(!0);a.afterCollapseExpand(b,c,f);if(e){e.afterCollapseExpand(b,c,!1)}a.isExpandingOrCollapsing=!1}},afterCollapseExpand:function(f,c,g){var d=this,a=d.view,e=a.bufferedRenderer,b;b=d.getHeaderNode(c);a.fireEvent(f?'groupcollapse':'groupexpand',a,b,c);if(g){if(b){a.scrollElIntoView(Ext.fly(b).up(a.getItemSelector()),!1,!0)}else {if(e){e.scrollTo(d.getGroup(c).getAt(0))}}}},onGroupChange:function(b,a){if(!a){this.view.ownerGrid.getView().refreshView()}else {this.lastGrouper=a}},getMenuItem:function(c){var b=this.view,a=b.headerCt.down('gridcolumn[dataIndex='+c+']'),d=b.headerCt.getMenu();return a?d.down('menuitem[headerId='+a.id+']'):null},onGroupKey:function(d,a){var b=this,c=b.getGroupName(a.target);if(c){b.onGroupClick(b.view,a.target,c,a)}},onGroupClick:function(i,h,b,g){var a=this,e=a.getCache(),f=e.map,d=!a.isExpanded(b),c;if(a.collapsible){if(g.ctrlKey){Ext.suspendLayouts();for(c in f){if(c===b){if(d){a.expand(b)}}else {if(!e[c].isCollapsed){a.doCollapseExpand(!0,c,!1)}}}Ext.resumeLayouts(!0);return}if(d){a.expand(b)}else {a.collapse(b)}}},setupRowData:function(d,u,a){var c=this,k=a.recordIndex,j=c.refreshData,b=c.getCache(),n=j.header,f=j.groupField,i=c.getGridStore(),t=c.view.dataSource,q=t.isBufferedStore,m=c.grid.columnManager.getHeaderByDataIndex(f),r=!!(m&&m.renderer),s=d.groupKey,h=d.isCollapsedPlaceholder&&s?c.getGroup(s):d.group,l,e,p,o,g;a.isCollapsedGroup=!1;a.summaryRecord=a.groupHeaderCls=null;if(j.doGrouping){l=i.getGrouper();if(d.isCollapsedPlaceholder){e=h.getGroupKey();g=h.items;a.isFirstRow=a.isLastRow=!0;a.groupHeaderCls=c.hdCollapsedCls;a.isCollapsedGroup=a.needsWrap=!0;a.groupName=e;a.metaGroupCache=b;b.groupField=f;b.name=b.renderedGroupValue=r?m.renderer(h.getAt(0).get(f),{},d):e;b.groupValue=g[0].get(f);b.columnName=n?n.text:f;a.collapsibleCls=c.collapsible?c.collapsibleCls:c.hdNotCollapsibleCls;b.rows=b.children=g;if(c.showSummaryRow){a.summaryRecord=j.summaryData[e]}return}e=l.getGroupString(d);if(h){g=h.items;a.isFirstRow=d===g[0];a.isLastRow=d===g[g.length-1]}else {a.isFirstRow=k===0;if(!a.isFirstRow){p=i.getAt(k-1);if(p){a.isFirstRow=!p.isEqual(l.getGroupString(p),e)}}a.isLastRow=k===(q?i.getTotalCount():i.getCount())-1;if(!a.isLastRow){o=i.getAt(k+1);if(o){a.isLastRow=!o.isEqual(l.getGroupString(o),e)}}}if(a.isFirstRow){b.groupField=f;b.name=b.renderedGroupValue=r?m.renderer(d.get(f),{},d):e;b.groupValue=d.get(f);b.columnName=n?n.text:f;a.collapsibleCls=c.collapsible?c.collapsibleCls:c.hdNotCollapsibleCls;a.groupName=e;if(!c.isExpanded(e)){a.itemClasses.push(c.hdCollapsedCls);a.isCollapsedGroup=!0}if(q){b.rows=b.children=[]}else {b.rows=b.children=c.getRecordGroup(d).items}a.metaGroupCache=b}if(a.isLastRow){if(c.showSummaryRow){a.summaryRecord=j.summaryData[e];a.itemClasses.push('x-grid-group-last')}}a.needsWrap=a.isFirstRow||a.summaryRecord}},setup:function(g,f){var a=this,b=a.refreshData,d=f.view,c=d.isGrouping=!a.disabled&&a.getGridStore().isGrouped(),e=d.bufferedRenderer;a.skippedRows=0;if(e){e.variableRowHeight=d.bufferedRenderer.variableRowHeight||c}b.groupField=a.getGroupField();b.header=a.getGroupedHeader(b.groupField);b.doGrouping=c;f.groupHeaderTpl=Ext.XTemplate.getTpl(a,'groupHeaderTpl');if(c&&a.showSummaryRow){b.summaryData=a.generateSummaryData()}},cleanup:function(c,a){var b=this.refreshData;a.metaGroupCache=a.groupHeaderTpl=a.isFirstRow=null;b.groupField=b.header=b.summaryData=null},getAggregateRecord:function(b,c){var a;if(c===!0||!b.aggregateRecord){a=new Ext.data.Model();b.aggregateRecord=a;a.isNonData=a.isSummary=!0}return b.aggregateRecord},generateSummaryData:function(){var a=this,d=a.getGridStore(),i=d.getFilters(),k=d.getGroups().items,q=d.getProxy().getReader(),p=a.getGroupField(),o=a.lockingPartner,n=a.updateSummaryRow,l={},j=a.view.ownerCt,e,m,c,b,g,h,f;if(a.remoteRoot){f=a.mixins.summary.generateSummaryData.call(a,p);h=!!f}for(e=0,m=k.length;e<m;++e){c=k[e];b=a.getMetaGroup(c);if(n||h||d.updating||a.grid.reconfiguring||a.didGroupChange(c,b,i)){g=a.populateRecord(c,b,f);if(!o||j===j.ownerLockable.normalGrid){b.lastGroup=c;b.lastGroupGeneration=c.generation;b.lastFilterGeneration=i.generation}}else {g=a.getAggregateRecord(b)}l[c.getGroupKey()]=g}a.updateSummaryRow=!1;return l},getGroupName:function(d){var e=this,f=e.view,c=e.eventSelector,a,b;a=Ext.fly(d).findParent(c);if(!a){b=Ext.fly(d).findParent(f.itemSelector);if(b){a=b.down(c,!0)}}if(a){return Ext.htmlDecode(a.getAttribute('data-groupname'))}},getRecordGroup:function(c){var b=this.getGridStore(),a=b.getGrouper();if(a){return b.getGroups().getByKey(a.getGroupString(c))}},getGroupedHeader:function(a){var d=this,f=d.view.headerCt,e=d.lockingPartner,c,b;a=a||d.getGroupField();if(a){c='[dataIndex='+a+']';b=f.down(c);if(!b&&e){b=e.view.headerCt.down(c)}}return b||null},getFireEventArgs:function(b,c,a,d){return [b,c,a,this.getGroupName(a),d]},destroy:function(){var a=this,b=a.dataSource;a.storeListeners=Ext.destroy(a.storeListeners);a.view=a.prunedHeader=a.grid=a.dataSource=a.groupers=null;a.invalidateCache();Ext.grid.feature.Feature.prototype.destroy.call(this);if(b){b.bindStore(null);Ext.destroy(b)}},beforeReconfigure:function(i,a,h,e,g){var b=this,f=b.view,d=b.dataSource,c;if(a&&a!==e){c=a.isBufferedStore;if(!d){Ext.destroy(b.storeListeners);b.setupStoreListeners(a)}if(c!==e.isBufferedStore){Ext.raise('Cannot reconfigure grouping switching between buffered and non-buffered stores')}f.isGrouping=!!a.getGrouper();d.bindStore(a)}},populateRecord:function(l,m,h){var b=this,o=b.grid.ownerLockable?b.grid.ownerLockable.view:b.view,n=b.getGridStore(),a=b.getAggregateRecord(m),k=o.headerCt.getGridColumns(),p=k.length,j=l.getGroupKey(),f,d,g,c,i,e;a.beginEdit();if(h){f=h[j];for(d in f){if(f.hasOwnProperty(d)){if(d!==a.idProperty){a.set(d,f[d])}}}}for(g=0;g<p;++g){c=k[g];i=c.dataIndex||c.getItemId();if(!h){e=b.getSummary(n,c.summaryType,i,l);a.set(i,e)}else {e=a.get(c.dataIndex)}b.setSummaryData(a,c.getItemId(),e,j)}a.ownerGroup=j;a.endEdit(!0);a.commit();return a},privates:{didGroupChange:function(b,a,d){var c=!0;if(b===a.lastGroup){c=a.lastGroupGeneration!==b.generation||a.lastFilterGeneration!==d.generation}return c},setupStoreListeners:function(b){var a=this;a.storeListeners=b.on({groupchange:a.onGroupChange,scope:a,destroyable:!0})}}},0,0,0,0,['feature.grouping'],[['summary',Ext.grid.feature.AbstractSummary]],[Ext.grid.feature,'Grouping'],0);Ext.cmd.derive('Ext.grid.feature.GroupingSummary',Ext.grid.feature.Grouping,{showSummaryRow:!0,vetoEvent:function(d,e,c,b){var a=Ext.grid.feature.Grouping.prototype.vetoEvent.apply(this,arguments);if(a!==!1&&b.getTarget(this.summaryRowSelector)){a=!1}return a}},0,0,0,0,['feature.groupingsummary'],0,[Ext.grid.feature,'GroupingSummary'],0);Ext.cmd.derive('Ext.grid.filters.filter.Boolean',Ext.grid.filters.filter.SingleFilter,{type:'boolean',operator:'=',defaultValue:!1,yesText:'Yes',noText:'No',updateBuffer:0,createMenu:function(e){var a=this,d=Ext.id(),c={scope:a,click:a.onClick},b=a.getItemDefaults();Ext.grid.filters.filter.SingleFilter.prototype.createMenu.apply(this,arguments);a.menu.add([Ext.apply({text:a.yesText,filterKey:1,group:d,checked:!!a.defaultValue,listeners:c},b),Ext.apply({text:a.noText,filterKey:0,group:d,checked:!a.defaultValue,listeners:c},b)])},onClick:function(a){this.setValue(!!a.filterKey)},setValue:function(b){var a=this;a.filter.setValue(b);if(b!==undefined&&a.active){a.value=b;a.updateStoreFilter()}else {a.setActive(!0)}},activateMenu:Ext.emptyFn},0,0,0,0,['grid.filter.boolean'],0,[Ext.grid.filters.filter,'Boolean'],0);Ext.cmd.derive('Ext.grid.filters.filter.Number',Ext.grid.filters.filter.TriFilter,{type:'number',config:{fields:{gt:{iconCls:'x-grid-filters-gt',margin:'0 0 3px 0'},lt:{iconCls:'x-grid-filters-lt',margin:'0 0 3px 0'},eq:{iconCls:'x-grid-filters-eq',margin:0}}},emptyText:'Enter Number...',itemDefaults:{xtype:'numberfield',enableKeyEvents:!0,hideEmptyLabel:!1,labelSeparator:'',labelWidth:29,selectOnFocus:!1},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var a=this,j={scope:a,keyup:a.onValueChange,spin:{fn:a.onInputSpin,buffer:200},el:{click:a.stopFn}},g=a.getItemDefaults(),h=a.menuItems,k=a.getFields(),f,e,i,c,d,b;Ext.grid.filters.filter.TriFilter.prototype.createMenu.call(this);a.fields={};for(e=0,i=h.length;e<i;e++){c=h[e];if(c!=='-'){f=k[c];b={labelClsExtra:'x-grid-filters-icon '+f.iconCls};if(g){Ext.merge(b,g)}Ext.merge(b,f);b.emptyText=b.emptyText||a.emptyText;delete b.iconCls;a.fields[c]=d=a.menu.add(b);d.filter=a.filter[c];d.filterKey=c;d.on(j)}else {a.menu.add(c)}}},getValue:function(a){var b={};b[a.filterKey]=a.getValue();return b},onInputSpin:function(a,c){var b={};b[a.filterKey]=a.getValue();this.setValue(b)},stopFn:function(a){a.stopPropagation()}},0,0,0,0,['grid.filter.number','grid.filter.numeric'],0,[Ext.grid.filters.filter,'Number'],0);Ext.cmd.derive('Ext.grid.filters.filter.String',Ext.grid.filters.filter.SingleFilter,{type:'string',operator:'like',emptyText:'Enter Filter Text...',itemDefaults:{xtype:'textfield',enableKeyEvents:!0,hideEmptyLabel:!1,iconCls:'x-grid-filters-find',labelSeparator:'',labelWidth:29,margin:0,selectOnFocus:!0},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var b=this,a;Ext.grid.filters.filter.SingleFilter.prototype.createMenu.call(this);a=Ext.apply({},b.getItemDefaults());if(a.iconCls&&!('labelClsExtra' in a)){a.labelClsExtra='x-grid-filters-icon '+a.iconCls}delete a.iconCls;a.emptyText=a.emptyText||b.emptyText;b.inputItem=b.menu.add(a);b.inputItem.on({scope:b,keyup:b.onValueChange,el:{click:function(a){a.stopPropagation()}}})},setValue:function(b){var a=this;if(a.inputItem){a.inputItem.setValue(b)}a.filter.setValue(b);if(b&&a.active){a.value=b;a.updateStoreFilter()}else {a.setActive(!!b)}},activateMenu:function(){this.inputItem.setValue(this.filter.getValue())}},0,0,0,0,['grid.filter.string'],0,[Ext.grid.filters.filter,'String'],0);Ext.cmd.derive('Ext.grid.filters.Filters',Ext.plugin.Abstract,{pluginId:'gridfilters',defaultFilterTypes:{'boolean':'boolean','int':'number',date:'date',number:'number'},filterCls:'x-grid-filters-filtered-column',menuFilterText:'Filters',showMenu:!0,stateId:undefined,init:function(b){var a=this,c,d;a.grid=b;b.filters=a;if(a.grid.normalGrid){a.isLocked=!0}b.clearFilters=a.clearFilters.bind(a);c=b.store;d=b.headerCt;d.on({scope:a,add:a.onAdd,menucreate:a.onMenuCreate});b.on({scope:a,destroy:a.onGridDestroy,reconfigure:a.onReconfigure});a.bindStore(c);if(b.stateful){c.statefulFilters=!0}a.initColumns()},initColumns:function(){var f=this.grid,g=f.getStore(),e=f.columnManager.getColumns(),h=e.length,b,c,d,a;for(b=0;b<h;b++){c=e[b];d=c.filter;if(d&&!d.isGridFilter){if(!a){a=g.getFilters();a.beginUpdate()}this.createColumnFilter(c)}}if(a){a.endUpdate()}},createColumnFilter:function(a){var c=this,d=a.filter,b={column:a,grid:c.grid,owner:c},e,f,g;if(Ext.isString(d)){b.type=d}else {Ext.apply(b,d)}if(!b.type){f=c.store.getModel();e=f&&f.getField(a.dataIndex);g=e&&e.type;b.type=g&&c.defaultFilterTypes[g]||a.defaultFilterType||'string'}a.filter=Ext.Factory.gridFilter(b)},onAdd:function(c,a,d){var b=a.filter;if(b&&!b.isGridFilter){this.createColumnFilter(a)}},onMenuCreate:function(b,a){a.on({beforeshow:this.onMenuBeforeShow,scope:this})},onMenuBeforeShow:function(f){var a=this,b,c,e,d;if(a.showMenu){if(!a.filterMenuItem){a.filterMenuItem={}}e=f.up('tablepanel');d=e.id;b=a.filterMenuItem[d];if(!b||b.destroyed){b=a.createMenuItem(f,d)}a.activeFilterMenuItem=b;c=a.getMenuFilter(e.headerCt);if(c){c.showMenu(b)}b.setVisible(!!c);a.sep.setVisible(!!c)}},createMenuItem:function(c,d){var a=this,b;a.sep=c.add('-');b=c.add({checked:!1,itemId:'filters',text:a.menuFilterText,listeners:{scope:a,checkchange:a.onCheckChange}});return a.filterMenuItem[d]=b},onGridDestroy:function(){var a=this,b=a.filterMenuItem,c;a.bindStore(null);a.sep=Ext.destroy(a.sep);for(c in b){b[c].destroy()}a.grid=null},onUnbindStore:function(a){a.getFilters().un('remove',this.onFilterRemove,this)},onBindStore:function(a,c,b){this.local=!a.getRemoteFilter();a.getFilters().on('remove',this.onFilterRemove,this)},onFilterRemove:function(h,e){var g=e.items.length,f=this.grid.columnManager,c,b,d,a;for(c=0;c<g;c++){b=e.items[c];d=f.getHeaderByDataIndex(b.getProperty());if(d){a=d.filter;if(!a||!a.menu||b.getId().indexOf(a.getBaseIdPrefix())===-1){continue}if(!a.preventFilterRemoval){a.onFilterRemove(b.getOperator())}}}},getMenuFilter:function(a){return a.getMenu().activeHeader.filter},onCheckChange:function(d,c){var a=this.isLocked?d.up('tablepanel'):this.grid,b=this.getMenuFilter(a.headerCt);b.setActive(c)},getHeaders:function(){return this.grid.view.headerCt.columnManager.getColumns()},isStateful:function(){return this.grid.stateful},addFilter:function(b){var c=this,l=c.grid,j=c.store,h=!1,g=!0,i,d,f,k,e,a;if(!Ext.isArray(b)){b=[b]}for(f=0,k=b.length;f<k;f++){e=b[f];i=e.dataIndex;d=l.columnManager.getHeaderByDataIndex(i);if(d){h=!0;if(e.value){g=!1}a=d.filter;if(a&&a.isGridFilter){a.deactivate();a.destroy();if(c.activeFilterMenuItem){c.activeFilterMenuItem.menu=null}}d.filter=e}}if(h){j.suppressNextFilter=g;c.initColumns();j.suppressNextFilter=!1}},addFilters:function(a){if(a){this.addFilter(a)}},clearFilters:function(){var f=this.grid,d=f.columnManager.getColumns(),h=f.store,e,b,c,g,a;for(c=0,g=d.length;c<g;c++){e=d[c];b=e.filter;if(b&&b.isGridFilter){if(!a){a=h.getFilters();a.beginUpdate()}b.setActive(!1)}}if(a){a.endUpdate()}},onReconfigure:function(f,a,e,d){var b=this.filterMenuItem,c;for(c in b){b[c].setMenu(null)}if(a&&d!==a){this.bindStore(a)}}},0,0,0,0,['plugin.gridfilters'],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.grid.filters,'Filters'],0);Ext.cmd.derive('Ext.grid.locking.HeaderContainer',Ext.grid.header.Container,{headerCtRelayEvents:['blur','focus','move','resize','destroy','beforedestroy','boxready','afterrender','render','beforerender','removed','hide','beforehide','show','beforeshow','enable','disable','added','deactivate','beforedeactivate','activate','beforeactivate','remove','add','beforeremove','beforeadd','afterlayout','menucreate','sortchange','columnschanged','columnshow','columnhide','columnmove','headertriggerclick','headercontextmenu','headerclick','columnresize','statesave','beforestatesave','staterestore','beforestaterestore'],constructor:function(d){var a=this,b=d.lockedGrid,c=d.normalGrid;a.lockable=d;Ext.grid.header.Container.prototype.constructor.call(this);b.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=d.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(!0,b.headerCt,c.headerCt);b.columnManager.rootColumns=c.columnManager.rootColumns=d.columnManager=a.columnManager=new Ext.grid.ColumnManager(!1,b.headerCt,c.headerCt);a.lockedEventRelayers=a.relayEvents(b.headerCt,a.headerCtRelayEvents);a.normalEventRelayers=a.relayEvents(c.headerCt,a.headerCtRelayEvents)},destroy:function(){var a=this;Ext.destroy(a.lockedEventRelayers,a.normalEventRelayers);a.lockedEventRelayers=a.normalEventRelayers=null;Ext.grid.header.Container.prototype.destroy.call(this)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var a=this,b=a.lockable.lockedGrid.headerCt.getColumnsState(),c=a.lockable.normalGrid.headerCt.getColumnsState();return b.concat(c)},applyColumnsState:function(k,o){var l=this,j=l.lockable.lockedGrid,b=j.headerCt,c=l.lockable.normalGrid.headerCt,m=Ext.Array.toValueMap(b.items.items,'stateId'),n=Ext.Array.toValueMap(c.items.items,'stateId'),g=[],h=[],i=1,p=k.length,e,a,f,d;for(e=0;e<p;e++){d=k[e];f=m[d.id];a=f||n[d.id];if(a){if(a.applyColumnState){a.applyColumnState(d,o)}if(a.locked===undefined){a.locked=!!f}if(a.locked){g.push(a);if(!a.hidden&&typeof a.width==='number'){i+=a.width}}else {h.push(a)}}}if(g.length+h.length===b.items.getCount()+c.items.getCount()){b.removeAll(!1);c.removeAll(!1);b.add(g);c.add(h);j.setWidth(i)}},disable:function(){var a=this.lockable;a.lockedGrid.headerCt.disable();a.normalGrid.headerCt.disable()},enable:function(){var a=this.lockable;a.lockedGrid.headerCt.enable();a.normalGrid.headerCt.enable()}},1,0,['component','box','container','headercontainer'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0},0,0,[Ext.grid.locking,'HeaderContainer'],0);Ext.cmd.derive('Ext.grid.locking.View',Ext.Base,{alternateClassName:'Ext.grid.LockingView',isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(b){var d=Ext,a=this,e,c;a.ownerGrid=b.ownerGrid;a.ownerGrid.view=a;a.navigationModel=b.locked.xtype==='treepanel'?new d.tree.NavigationModel(a):new d.grid.NavigationModel(a);b.locked.viewConfig.bindStore=d.emptyFn;b.normal.viewConfig.bindStore=a.subViewBindStore;b.normal.viewConfig.isNormalView=b.locked.viewConfig.isLockedView=!0;b.locked.viewConfig.beforeLayout=b.normal.viewConfig.beforeLayout=a.beforeLayout;b.locked.viewConfig.navigationModel=b.normal.viewConfig.navigationModel=a.navigationModel;a.lockedGrid=a.ownerGrid.lockedGrid=d.ComponentManager.create(b.locked);a.lockedView=e=a.lockedGrid.getView();a.selModel=b.normal.viewConfig.selModel=e.getSelectionModel();if(a.lockedGrid.isTree){a.lockedView.animate=!1;b.normal.store=e.store;b.normal.viewConfig.stripeRows=a.lockedView.stripeRows;b.normal.rowLines=a.lockedGrid.rowLines}a.normalGrid=a.ownerGrid.normalGrid=d.ComponentManager.create(b.normal);e.lockingPartner=c=a.normalView=a.normalGrid.getView();c.lockingPartner=e;a.loadMask=b.loadMask!==undefined?b.loadMask:a.loadMask;a.mixins.observable.constructor.call(a);a.lockedViewEventRelayers=a.relayEvents(e,d.view.Table.events);a.normalViewEventRelayers=a.relayEvents(c,d.view.Table.events.concat(d.view.Table.normalSideEvents));c.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter});e.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter});a.ownerGrid.on({render:a.onPanelRender,scope:a});a.loadingText=c.loadingText;a.loadingCls=c.loadingCls;a.loadingUseMsg=c.loadingUseMsg;a.itemSelector=a.getItemSelector();a.all=c.all;a.bindStore(c.dataSource,!0,'dataSource')},subViewBindStore:function(c){var a=this,b;if(a.destroying||a.destroyed){return}b=a.getSelectionModel();b.bindStore(c);b.bindComponent(a)},beforeLayout:function(){var a=this.ownerCt.ownerLockable.view,b=a.lockedGrid.view,c=a.normalGrid.view;if(!a.relayingOperation){if(a.lockedGrid.isVisible()){if(b.refreshNeeded){b.doFirstRefresh(b.dataSource)}}if(c.refreshNeeded){c.doFirstRefresh(c.dataSource)}}},onPanelRender:function(){var a=this,b=a.loadMask,c={target:a.ownerGrid,msg:a.loadingText,msgCls:a.loadingCls,useMsg:a.loadingUseMsg,store:a.ownerGrid.store};a.el=a.ownerGrid.getTargetEl();a.rendered=!0;a.initFocusableEvents();a.fireEvent('render',a);if(b){if(Ext.isObject(b)){c=Ext.apply(c,b)}a.loadMask=new Ext.LoadMask(c)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(c){var b=this.lockedView,a;b.headerCt.cascade(function(b){if(b===c){a=!0;return !1}});return a?b:this.normalView},onItemMouseEnter:function(d,f){var e=this,b=e.lockedView,a=e.normalView,c;if(d.trackOver){if(d!==b){a=b}c=a.getNode(f);a.highlightItem(c)}},onItemMouseLeave:function(c,e){var d=this,a=d.lockedView,b=d.normalView;if(c.trackOver){if(c!==a){b=a}b.clearHighlight()}},relayFn:function(d,b){b=b||[];var c=this,a=c.lockedView;c.relayingOperation=!0;a[d].apply(a,b);a=c.normalView;a[d].apply(a,b);c.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(c,f,e){var d=this,b=d.lockedView,a=d.normalView;if(a.componentLayoutCounter&&!(b.blockRefresh&&a.blockRefresh)){Ext.suspendLayouts();b.doFirstRefresh(c);a.doFirstRefresh(c);Ext.resumeLayouts(!0)}},getStoreListeners:function(){var a=this;return {priority:1000,refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){Ext.suspendLayouts();this.relayFn('onBeginUpdate',arguments);Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts();this.relayFn('onEndUpdate',arguments);Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts();this.relayFn('onDataRefresh',arguments);Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts();this.relayFn('onReplace',arguments);Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts();this.relayFn('onAdd',arguments);Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts();this.relayFn('onRemove',arguments);Ext.resumeLayouts(!0)},setActionableMode:function(d,a){var c,b;if(d){if(!a){a=this.getNavigationModel().getPosition()}if(a){a=a.clone();a.view=b=a.column.getView();c=b.setActionableMode(d,a);if(c!==!1&&b.lockingPartner.grid.isVisible()){b.lockingPartner.setActionableMode(d,a);if(!b.lockingPartner.actionableMode){b.setActionableMode(!1);c=!1}}return c}else {return !1}}else {this.relayFn('setActionableMode',[!1])}},onUpdate:function(){Ext.suspendLayouts();this.relayFn('onUpdate',arguments);Ext.resumeLayouts(!0)},refresh:function(){Ext.suspendLayouts();this.relayFn('refresh',arguments);Ext.resumeLayouts(!0)},refreshView:function(){Ext.suspendLayouts();this.relayFn('refreshView',arguments);Ext.resumeLayouts(!0)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,a){var c=this.getViewForColumn(a),d=c.getRow(b);return Ext.fly(d).down(a.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){var a=this.ownerGrid.down('>tablepanel:not(hidden)>tableview');if(a){a.focus()}},focusRow:function(c){var b,a=this.getNavigationModel().lastFocused;b=a?a.view:this.normalView;b.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn('onRowFocus',arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var b,a=this.getNavigationModel().lastFocused;b=a?a.view:this.normalView;return b.getFocusEl()},getCellInclusive:function(a,c){var d=a.column,b=this.lockedGrid.getColumnManager().getColumns().length;if(d>=b){a=Ext.apply({},a);a.column-=b;return this.normalView.getCellInclusive(a,c)}else {return this.lockedView.getCellInclusive(a,c)}},getHeaderByCell:function(a){if(a){return this.getVisibleColumnManager().getHeaderById(a.getAttribute('data-columnId'))}return !1},onRowSelect:function(){this.relayFn('onRowSelect',arguments)},onRowDeselect:function(){this.relayFn('onRowDeselect',arguments)},onCellSelect:function(a){a.column.getView().onCellSelect({record:a.record,column:a.column})},onCellDeselect:function(a){a.column.getView().onCellDeselect({record:a.record,column:a.column})},getCellByPosition:function(a,c){var e=this,b=a.view,d=a.column;if(b===e){a=(new Ext.grid.CellContext(d.getView())).setPosition(a.record,a.column)}return b.getCellByPosition(a,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},ensureVisible:function(){var a=this.normalView;a.ensureVisible.apply(a,arguments)},disable:function(){this.relayFn('disable',arguments)},enable:function(){this.relayFn('enable',arguments)},addElListener:function(){this.relayFn('addElListener',arguments)},refreshNode:function(){this.relayFn('refreshNode',arguments)},addRowCls:function(){this.relayFn('addRowCls',arguments)},removeRowCls:function(){this.relayFn('removeRowCls',arguments)},destroy:function(){var a=this;a.rendered=!1;a.bindStore(null,!1,'dataSource');Ext.destroy(a.lockedViewEventRelayers,a.normalViewEventRelayers);a.lockedViewEventRelayers=a.normalViewEventRelayers=null;a.callParent();Ext.destroy(a.loadMask,a.navigationModel,a.selModel);a.lockedView.lockingPartner=a.normalView.lockingPartner=null;a.lockedGrid=a.lockedView=a.normalGrid=a.normalView=null;a.loadMask=a.navigationModel=a.selModel=a.headerCt=null;a.ownerGrid=a.storeListeners=null}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,'View',Ext.grid,'LockingView'],function(){this.borrow(Ext.Component,['up']);this.borrow(Ext.view.AbstractView,['doFirstRefresh','applyFirstRefresh']);this.borrow(Ext.view.Table,['cellSelector','selectedCellCls','selectedItemCls'])});Ext.cmd.derive('Ext.grid.locking.Lockable',Ext.Base,{alternateClassName:'Ext.grid.Lockable',syncRowHeight:!0,headerCounter:0,scrollDelta:40,lockedGridCls:'x-grid-inner-locked',normalGridCls:'x-grid-inner-normal',lockingBodyCls:'x-grid-locking-body',unlockText:'Unlock',lockText:'Lock',bothCfgCopy:['hideHeaders','enableColumnHide','enableColumnMove','enableColumnResize','sortableColumns','multiColumnSort','columnLines','rowLines','variableRowHeight','numFromEdge','trailingBufferZone','leadingBufferZone','scrollToLoadBuffer','syncRowHeight'],normalCfgCopy:['scroll'],lockedCfgCopy:[],determineXTypeToCreate:function(g){var f=this,a,b,d,e,c;if(f.subGridXType){a=f.subGridXType}else {if(!g){return 'gridpanel'}b=this.getXTypes().split('/');d=b.length;e=b[d-1];c=b[d-2];if(c!=='tablepanel'){a=c}else {a=e}}return a},injectLockable:function(){this.focusable=!1;this.lockable=!0;this.hasView=!0;var a=this,q=Ext.getScrollbarSize(),l=q.width,o=a.store=Ext.StoreManager.lookup(a.store),d=a.lockedViewConfig,g=a.normalViewConfig,s=Ext.Object,m,i,b,c,e,n,f,h,j=a.viewConfig,r=j&&j.loadMask,u=r!==undefined?r:a.loadMask,p=a.bufferedRenderer,k=l>0&&Ext.supports.touchScroll!==2,t=a.getInherited().rtl;m=a.constructLockableFeatures();a.features=null;i=a.constructLockablePlugins();a.plugins=i.topPlugins;b={id:a.id+'-locked',$initParent:a,isLocked:!0,bufferedRenderer:p,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(!0),store:o,reserveScrollbar:k,scrollable:{indicators:{x:!0,y:!1}},scrollerOwner:!1,animate:!1,border:!1,cls:a.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||a.normalGrid.floatedFromCollapse},features:m.lockedFeatures,plugins:i.lockedPlugins};c={id:a.id+'-normal',$initParent:a,isLocked:!1,bufferedRenderer:p,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(),store:o,reserveScrollbar:a.reserveScrollbar,scrollerOwner:!1,border:!1,cls:a.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||a.lockedGrid.floatedFromCollapse},features:m.normalFeatures,plugins:i.normalPlugins};a.addCls('x-grid-locked');Ext.copy(c,a,a.bothCfgCopy,!0);Ext.copy(b,a,a.bothCfgCopy,!0);Ext.copy(c,a,a.normalCfgCopy,!0);Ext.copy(b,a,a.lockedCfgCopy,!0);Ext.apply(c,a.normalGridConfig);Ext.apply(b,a.lockedGridConfig);for(e=0;e<a.normalCfgCopy.length;e++){delete a[a.normalCfgCopy[e]]}for(e=0;e<a.lockedCfgCopy.length;e++){delete a[a.lockedCfgCopy[e]]}a.addStateEvents(['lockcolumn','unlockcolumn']);n=a.processColumns(a.columns||[],b);b.columns=n.locked;if(!b.columns.items.length){b.hidden=!0}c.columns=n.normal;if(!c.columns.items.length){c.hidden=!0}c.flex=1;b.viewConfig=d=d?s.chain(d):{};c.viewConfig=g=g?s.chain(g):{};d.loadingUseMsg=!1;d.loadMask=!1;if(k){if(t){d.margin='0 0 0 -'+l+'px'}else {d.margin='0 -'+l+'px 0 0'}}g.loadMask=!1;Ext.applyIf(d,j);Ext.applyIf(g,j);if(!a.initialConfig.layout){a.layout={type:'hbox',align:'stretch'}}a.getLayout();if(a.layout.type==='border'){if(a.split){b.split=!0}if(!b.region){b.region='west'}if(!c.region){c.region='center'}a.addCls('x-grid-locked-split')}if(!(a.layout instanceof Ext.layout.container.Box)){a.split=!1}a.view=new Ext.grid.locking.View({loadMask:u,locked:b,normal:c,ownerGrid:a});b=a.lockedGrid;c=a.normalGrid;c.getView().getScrollable().addPartner(b.getView().getScrollable(),'y');if(q.height&&Ext.supports.touchScroll!==2){b.on({afterlayout:a.afterLockedViewLayout,scope:a});b.getView().getOverflowStyle()}f=b.headerCt;h=c.headerCt;if(k&&!t){f.reserveScrollbar=!1}a.headerCt=a.view.headerCt=new Ext.grid.locking.HeaderContainer(a);f.lockedCt=!0;f.lockableInjected=!0;h.lockableInjected=!0;f.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onLockedHeaderSortChange,columnresize:a.delaySyncLockedWidth,scope:a});h.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onNormalHeaderSortChange,scope:a});a.modifyHeaderCt();a.items=[b];if(a.split){a.addCls('x-grid-locked-split');a.items[1]={xtype:'splitter'}}a.items.push(c);a.relayHeaderCtEvents(f);a.relayHeaderCtEvents(h);a.storeRelayers=a.relayEvents(o,['filterchange','groupchange','beforeload','load']);a.gridRelayers=a.relayEvents(c,['viewready'])},afterInjectLockable:function(){delete this.lockedGrid.$initParent;delete this.normalGrid.$initParent},getLockingViewConfig:function(){return {xclass:'Ext.grid.locking.View',locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(b,m){var h=this,d,k,a,c=new Ext.grid.header.Container({'$initParent':h}),e=[],f=[],i={itemId:'lockedHeaderCt',stretchMaxPartner:'^^>>#normalHeaderCt',items:e},j={itemId:'normalHeaderCt',stretchMaxPartner:'^^>>#lockedHeaderCt',items:f},l={locked:i,normal:j},g;if(Ext.isObject(b)){Ext.applyIf(i,b);Ext.applyIf(j,b);g=Ext.apply({},b);delete g.items;Ext.apply(c,g);b=b.items}c.constructing=!0;for(d=0,k=b.length;d<k;++d){a=b[d];if(!a.isComponent){a=c.applyDefaults(a);a.$initParent=c;a=c.lookupComponent(a);delete a.$initParent}a.processed=!0;if(a.locked||a.autoLock){e.push(a)}else {f.push(a)}}h.fireEvent('processcolumns',h,e,f);c.destroy();return l},afterLockedViewLayout:function(){var i=this,e=i.lockedGrid,g=i.normalGrid,f=e.getView(),h=g.getView(),c=f.scrollFlags.x&&e.headerCt.tooNarrow,d=h.scrollFlags.x&&g.headerCt.tooNarrow,b=h.getScrollable(),a=f.getScrollable();if(c!==d){if(c){b.setX('scroll');a.setX(!0)}else {a.setX('scroll');b.setX(!0)}}else {a.setX(d?'scroll':!0);b.setX(!0)}},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments);this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},onLockedViewMouseWheel:function(h){var b=this,e=-b.scrollDelta*h.getWheelDeltas().y,d=b.lockedGrid.getView(),c=d.el.dom,a,f,g;if(!b.ignoreMousewheel){if(c){a=d.getScrollY();f=a!==c.scrollHeight-c.clientHeight;g=a!==0}if(e<0&&g||e>0&&f){h.stopEvent();a+=e;d.setScrollY(a);b.normalGrid.getView().setScrollY(a);b.onNormalViewScroll()}}},onLockedViewScroll:function(){var f=this,e=f.lockedGrid.getView(),a=f.normalGrid.getView(),c=e.getScrollY(),g=a.getScrollY(),b,d;if(g!==c){a.setScrollY(c);if(a.bufferedRenderer){d=e.body.dom;b=a.body.dom;b.style.position='absolute';b.style.top=d.style.top}}},onNormalViewScroll:function(){var e=this,b=e.lockedGrid.getView(),c=e.normalGrid.getView(),f=b.getScrollY(),d=c.getScrollY(),a;if(d!==f){b.setScrollY(d);if(c.bufferedRenderer){a=b.body;if(a.dom){a.dom.style.position='absolute';a.translate(null,c.bufferedRenderer.bodyTop)}}}},syncRowHeights:function(){if(!this.destroyed){var f=this,b=f.normalGrid.getView(),a=f.lockedGrid.getView(),d=b.syncRowHeightBegin(),c=a.syncRowHeightBegin(),e;b.syncRowHeightMeasure(d);a.syncRowHeightMeasure(c);b.syncRowHeightFinish(d,c);a.syncRowHeightFinish(c,d);e=b.getScrollY();a.setScrollY(e)}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,!0);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,!1);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(f,g,c){var d=this.getMenu(),a=d.down('#unlockItem'),b=d.down('#lockItem'),e=a.prev();if(c.lockable===!1){e.hide();a.hide();b.hide()}else {e.show();a.show();b.show();if(!a.initialConfig.disabled){a.setDisabled(c.lockable===!1)}if(!b.initialConfig.disabled){b.setDisabled(!c.isLockable())}}},getMenuItems:function(d,b){var a=this,f=a.unlockText,h=a.lockText,g='x-hmenu-unlock',i='x-hmenu-lock',c=a.onUnlockMenuClick.bind(a),e=a.onLockMenuClick.bind(a);return function(){var a=d.call(this);a.push('-',{itemId:'unlockItem',iconCls:g,text:f,handler:c,disabled:!b});a.push({itemId:'lockItem',iconCls:i,text:h,handler:e,disabled:b});return a}},delaySyncLockedWidth:function(){var a=this,b=a.syncLockedWidthTask;if(!a.view.all.getCount()){return}if(!b){b=a.syncLockedWidthTask=new Ext.util.DelayedTask(a.syncLockedWidth,a)}b.delay(1)},syncLockedWidth:function(){var b=this,c=b.rendered,a=b.lockedGrid,g=a.view,d=b.normalGrid,e=a.getVisibleColumnManager().getColumns().length,f=d.getVisibleColumnManager().getColumns().length,h=b.syncLockedWidthTask;if(h){h.cancel()}Ext.suspendLayouts();if(f){d.show();if(e){if(c&&a.shrinkWrapColumns&&!a.headerCt.forceFit){delete a.flex;a.setWidth(a.headerCt.getTableWidth()+a.gridPanelBorderWidth)}a.addCls(b.lockedGridCls);a.show();if(a.split){b.child('splitter').show();b.addCls('x-grid-locked-split')}}else {if(c){a.getView().clearViewEl(!0)}a.hide();if(a.split){b.child('splitter').hide();b.removeCls('x-grid-locked-split')}}if(Ext.supports.touchScroll!==2&&Ext.Component.pendingLayouts){g.getScrollable().setX(!0)}if(c){b.ignoreMousewheel=g.scrollFlags.y}}else {d.hide();a.flex=1;delete a.width;a.removeCls(b.lockedGridCls);a.show();b.ignoreMousewheel=!0}Ext.resumeLayouts(!0);return [e,f]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(a,l,g){var e=this,i=e.normalGrid,b=e.lockedGrid,d=i.view,c=b.view,m=i.headerCt,h,k,j,f;a=a||m.getMenu().activeHeader;j=a.hasFocus;g=g||b.headerCt;k=a.ownerCt;if(!a.isLockable()){return}if(a.flex&&b.shrinkWrapColumns){a.width=a.getWidth();a.flex=null}Ext.suspendLayouts();if(b.hidden){if(!b.componentLayoutCounter){if(c.bufferedRenderer){c.bufferedRenderer.onViewResize(c,0,d.getHeight())}f=d.getScrollY()}b.show()}d.blockRefresh=c.blockRefresh=!0;a.ownerCmp=a.ownerCt;k.remove(a,!1);a.locked=!0;if(Ext.isDefined(l)){g.insert(l,a)}else {g.add(a)}d.blockRefresh=c.blockRefresh=!1;a.ownerCmp=null;h=e.syncLockedWidth();if(h[0]){b.getView().refreshView()}if(h[1]){i.getView().refreshView()}e.fireEvent('lockcolumn',e,a);Ext.resumeLayouts(!0);if(f){c.setScrollY(f);d.setScrollY(f)}if(j){a.focus()}},unlock:function(a,f,g){var b=this,e=b.normalGrid,d=b.lockedGrid,i=e.view,h=d.view,k=d.headerCt,c,j;if(!Ext.isDefined(f)){f=0}a=a||k.getMenu().activeHeader;j=a.hasFocus;g=g||e.headerCt;Ext.suspendLayouts();i.blockRefresh=h.blockRefresh=!0;a.ownerCmp=a.ownerCt;a.ownerCt.remove(a,!1);a.locked=!1;g.insert(f,a);i.blockRefresh=h.blockRefresh=!1;a.ownerCmp=null;c=b.syncLockedWidth();if(c[0]){d.getView().refreshView()}if(c[1]){e.getView().refreshView()}b.fireEvent('unlockcolumn',b,a);Ext.resumeLayouts(!0);if(j){a.focus()}},reconfigureLockable:function(a,f){var d=this,h=d.store,c=d.lockedGrid,e=d.normalGrid,b,g;if(a&&a!==h){a=Ext.data.StoreManager.lookup(a);d.store=a;c.view.blockRefresh=e.view.blockRefresh=!0;c.bindStore(a);b=c.view;b.store=a;if(!b.dataSource.isFeatureStore){b.dataSource=a}if(b.bufferedRenderer){b.bufferedRenderer.bindStore(a)}e.bindStore(a);b=e.view;b.store=a;if(!b.dataSource.isFeatureStore){b.dataSource=a}if(b.bufferedRenderer){b.bufferedRenderer.bindStore(a)}d.view.store=a;g=d.view.loadMask;if(g&&g.isLoadMask){g.bindStore(a)}d.view.bindStore(e.view.dataSource,!1,'dataSource');c.view.blockRefresh=e.view.blockRefresh=!1}if(f){c.reconfiguring=e.reconfiguring=!0;c.headerCt.removeAll();e.headerCt.removeAll();f=d.processColumns(f,c);c.headerCt.add(f.locked.items);e.headerCt.add(f.normal.items);c.reconfiguring=e.reconfiguring=!1;d.syncLockedWidth()}d.refreshCounter=c.view.refreshCounter},afterReconfigureLockable:function(){var a=this.lockedGrid.getView();if(this.refreshCounter===a.refreshCounter){this.view.refresh()}},constructLockableFeatures:function(){var b=this.features,a,e,c,d,f=0,g;if(b){if(!Ext.isArray(b)){b=[b]}c=[];d=[];g=b.length;for(;f<g;f++){a=b[f];if(!a.isFeature){a=Ext.create('feature.'+a.ftype,a)}switch(a.lockableScope){case 'locked':c.push(a);break;case 'normal':d.push(a);break;default:a.lockableScope='both';c.push(a);d.push(e=a.clone());e.lockingPartner=a;a.lockingPartner=e;}}}return {normalFeatures:d,lockedFeatures:c}},constructLockablePlugins:function(){var b=this.plugins,a,g,f,h,c,d,i=0,k,e,j;if(b){if(!Ext.isArray(b)){b=[b]}h=[];c=[];d=[];k=b.length;for(;i<k;i++){a=b[i];if(a.init){e=a.lockableScope}else {j=a.ptype?Ext.ClassManager.getByAlias('plugin.'+a.ptype):Ext.ClassManager.get(a.xclass);e=j.prototype.lockableScope}switch(e){case 'both':c.push(f=a.clonePlugin());d.push(g=a.clonePlugin());f.lockingPartner=g;g.lockingPartner=f;Ext.destroy(a);break;case 'locked':c.push(a);break;case 'normal':d.push(a);break;default:h.push(a);}}}return {topPlugins:h,normalPlugins:d,lockedPlugins:c}},destroyLockable:function(){var a=this,b=a.syncLockedWidthTask;if(b){b.cancel();a.syncLockedWidthTask=null}if(a.lockedGrid&&a.lockedGrid.headerCt){a.lockedGrid.headerCt.showMenuBy=null}if(a.normalGrid&&a.normalGrid.headerCt){a.normalGrid.headerCt.showMenuBy=null}Ext.destroy(a.view,a.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,'Lockable',Ext.grid,'Lockable'],function(){this.borrow(Ext.Component,['constructPlugin'])});Ext.cmd.derive('Ext.util.Queue',Ext.Base,{constructor:function(){this.clear()},add:function(b){var a=this,c=a.getKey(b);if(!a.map[c]){++a.length;a.items.push(b);a.map[c]=b}return b},clear:function(){var a=this,b=a.items;a.items=[];a.map={};a.length=0;return b},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(b){var a=this,e=a.getKey(b),d=a.items,c;if(a.map[e]){c=Ext.Array.indexOf(d,b);Ext.Array.erase(d,c,1);delete a.map[e];--a.length}return b}},1,0,0,0,0,0,[Ext.util,'Queue'],0);Ext.cmd.derive('Ext.layout.ContextItem',Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(s){var a=this,o=Ext.layout.SizeModel.sizeModels,l=o.configured,g=o.shrinkWrap,r,c,f,d,k,i,b,p,m,q,n,h,e,j;Ext.apply(a,s);b=a.target;r=a.el;a.id=b.id;a.flushedProps={};a.props=k={};a.styles={};if(!b.isComponent){c=r.lastBox}else {a.wrapsComponent=!0;a.framing=b.frameSize||null;a.isComponentChild=b.ownerLayout&&b.ownerLayout.isComponentLayout;c=b.lastBox;f=b.ownerCt;if(f&&(d=f.el&&a.context.items[f.el.id])){a.ownerCtContext=d}a.sizeModel=i=b.getSizeModel(d&&d.widthModel.pairsByHeightOrdinal[d.heightModel.ordinal]);a.widthModel=h=i.width;a.heightModel=e=i.height;if(c&&c.invalid===!1){q=b.width===(p=c.width);n=b.height===(m=c.height);if(h===g&&e===g){j=!0}else {if(h===l&&q){j=e===g||e===l&&n}}if(j){a.optOut=!0;k.width=p;k.height=m}}}a.lastBox=c},init:function(r,i){var a=this,c=a.props,e=a.dirty,b=a.ownerCtContext,h=a.target.ownerLayout,j=!a.state,s=r||j,n,l,t,q,k,d,o=a.heightModel,p=a.widthModel,f,g,m=0;a.dirty=a.invalid=!1;a.props={};a.remainingChildDimensions=0;if(a.boxChildren){a.boxChildren.length=0}if(!j){a.clearAllBlocks('blocks');a.clearAllBlocks('domBlocks')}if(!a.wrapsComponent){return s}d=a.target;a.state={};if(j){if(d.beforeLayout&&d.beforeLayout!==Ext.emptyFn){d.beforeLayout()}if(!b&&(q=d.ownerCt)){b=a.context.items[q.el.id]}if(b){a.ownerCtContext=b;a.isBoxParent=h&&h.isItemBoxParent(a)}else {a.isTopLevel=!0}a.frameBodyContext=a.getEl('frameBody')}else {b=a.ownerCtContext;a.isTopLevel=!b;n=a.children;for(l=0,t=n.length;l<t;++l){n[l].init(!0)}}a.hasRawContent=!(d.isContainer&&d.items.items.length>0);if(r){a.widthModel=a.heightModel=null;k=d.getSizeModel(b&&b.widthModel.pairsByHeightOrdinal[b.heightModel.ordinal]);if(j){a.sizeModel=k}a.widthModel=k.width;a.heightModel=k.height;if(b&&!a.isComponentChild){if(h.needsItemSize||!d.liquidLayout){b.remainingChildDimensions+=2}else {if(a.widthModel.calculated){++b.remainingChildDimensions}if(a.heightModel.calculated){++b.remainingChildDimensions}}}}else {if(c){a.recoverProp('x',c,e);a.recoverProp('y',c,e);if(a.widthModel.calculated){a.recoverProp('width',c,e)}else {if('width' in c){++m}}if(a.heightModel.calculated){a.recoverProp('height',c,e)}else {if('height' in c){++m}}if(b&&!a.isComponentChild){b.remainingChildDimensions+=m}}}if(c&&h&&h.manageMargins){a.recoverProp('margin-top',c,e);a.recoverProp('margin-right',c,e);a.recoverProp('margin-bottom',c,e);a.recoverProp('margin-left',c,e)}if(i){f=i.heightModel;g=i.widthModel;if(g&&f&&p&&o){if(p.shrinkWrap&&o.shrinkWrap){if(g.constrainedMax&&f.constrainedMin){f=null}}}if(g){a.widthModel=g}if(f){a.heightModel=f}if(i.state){Ext.apply(a.state,i.state)}}return s},initContinue:function(f){var b=this,a=b.ownerCtContext,g=b.target,c=b.widthModel,e=g.getInherited(),d;if(c.fixed){e.inShrinkWrapTable=!1}else {delete e.inShrinkWrapTable}if(f){if(a&&c.shrinkWrap){d=a.isBoxParent?a:a.boxParent;if(d){d.addBoxChild(b)}}else {if(c.natural){b.boxParent=a}}}return f},initDone:function(d){var a=this,b=a.props,c=a.state;if(a.remainingChildDimensions===0){b.containerChildrenSizeDone=!0}if(d){b.containerLayoutDone=!0}if(a.boxChildren&&a.boxChildren.length&&a.widthModel.shrinkWrap){a.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var a=this,b=a.target,c=a.ownerCtContext;if(c&&c.isTopLevel){a.animatePolicy=b.ownerLayout.getAnimatePolicy(a)}else {if(!c&&b.isCollapsingOrExpanding&&b.animCollapse){a.animatePolicy=b.componentLayout.getAnimatePolicy(a)}}if(a.animatePolicy){a.context.queueAnimation(a)}},addBlock:function(f,a,e){var b=this,d=b[f]||(b[f]={}),c=d[e]||(d[e]={});if(!c[a.id]){c[a.id]=a;++a.blockCount;++b.context.blockCount}},addBoxChild:function(a){var d=this,b,c=a.widthModel;a.boxParent=this;a.measuresBox=c.shrinkWrap?a.hasRawContent:c.natural;if(a.measuresBox){b=d.boxChildren;if(b){b.push(a)}else {d.boxChildren=[a]}}},addPositionStyles:function(b,c){var d=c.x,e=c.y,a=0;if(d!==undefined){b.left=d+'px';++a}if(e!==undefined){b.top=e+'px';++a}return a},addTrigger:function(c,e){var b=this,h=e?'domTriggers':'triggers',f=b[h]||(b[h]={}),g=b.context,a=g.currentLayout,d=f[c]||(f[c]={});if(!d[a.id]){d[a.id]=a;++a.triggerCount;d=g.triggers[e?'dom':'data'];(d[a.id]||(d[a.id]=[])).push({item:this,prop:c});if(b.props[c]!==undefined){if(!e||!(b.dirty&&c in b.dirty)){++a.firedTriggers}}}},boxChildMeasured:function(){var a=this,b=a.state,c=b.boxesMeasured=(b.boxesMeasured||0)+1;if(c===a.boxChildren.length){b.clearBoxWidth=1;++a.context.progressCount;a.markDirty()}},borderNames:['border-top-width','border-right-width','border-bottom-width','border-left-width'],marginNames:['margin-top','margin-right','margin-bottom','margin-left'],paddingNames:['padding-top','padding-right','padding-bottom','padding-left'],trblNames:['top','right','bottom','left'],cacheMissHandlers:{borderInfo:function(b){var a=b.getStyles(b.borderNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a},marginInfo:function(b){var a=b.getStyles(b.marginNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a},paddingInfo:function(b){var c=b.frameBodyContext||b,a=c.getStyles(b.paddingNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(c){var a=this[c],b;if(a){for(b in a){this.clearBlocks(c,b)}}},clearBlocks:function(g,f){var c=this[g],b=c&&c[f],d,a,e;if(b){delete c[f];d=this.context;for(e in b){a=b[e];--d.blockCount;if(!--a.blockCount&&!a.pending&&!a.done){d.queueLayout(a)}}}},block:function(b,a){this.addBlock('blocks',b,a)},domBlock:function(b,a){this.addBlock('domBlocks',b,a)},fireTriggers:function(g,e){var c=this[g],b=c&&c[e],f=this.context,a,d;if(b){for(d in b){a=b[d];++a.firedTriggers;if(!a.done&&!a.blockCount&&!a.pending){f.queueLayout(a)}}}},flush:function(){var a=this,d=a.dirty,b=a.state,c=a.el;a.dirtyCount=0;if('attributes' in a){c.set(a.attributes);delete a.attributes}if('innerHTML' in a){c.innerHTML=a.innerHTML;delete a.innerHTML}if(b&&b.clearBoxWidth){b.clearBoxWidth=0;a.el.setStyle('width',null);if(!--b.blocks){a.context.queueItemLayouts(a)}}if(d){delete a.dirty;a.writeProps(d,!0)}},flushAnimations:function(){var b=this,k=b.previousSize,a,h,l,f,d,g,e,m,c,j,i;if(k){a=b.target;h=a.getAnimationProps();l=h.duration;f=Ext.Object.getKeys(b.animatePolicy);d=Ext.apply({},{from:{},to:{},duration:l||Ext.fx.Anim.prototype.duration},h);for(g=0,e=0,m=f.length;e<m;e++){c=f[e];j=k[c];i=b.peek(c);if(j!==i){c=b.translateProps[c]||c;d.from[c]=j;d.to[c]=i;++g}}if(g){if(b.isCollapsingOrExpanding===1){a.componentLayout.undoLayout(b)}else {b.writeProps(d.from)}b.el.animate(d);d=Ext.fx.Manager.getFxQueue(b.el.id)[0];a.$layoutAnim=d;d.on({afteranimate:function(){delete a.$layoutAnim;if(a.destroying||a.destroyed){return}if(b.isCollapsingOrExpanding===1){a.componentLayout.redoLayout(b);a.afterCollapse(!0)}else {if(b.isCollapsingOrExpanding===2){a.afterExpand(!0)}}if(a.hasListeners.afterlayoutanimation){a.fireEvent('afterlayoutanimation',a)}}})}}},getBorderInfo:function(){var b=this,a=b.borderInfo;if(!a){b.borderInfo=a=b.checkCache('borderInfo')}return a},getEl:function(b,f){var d=this,c,a,e;if(b){if(b.dom){a=b}else {c=d.target;if(f){c=f}a=c[b];if(typeof a==='function'){a=a.call(c);if(a===d.el){return this}}}if(a){e=d.context.getEl(d,a)}}return e||null},getFrameInfo:function(){var c=this,d=c.frameInfo,a,b;if(!d){a=c.framing;b=c.getBorderInfo();c.frameInfo=d=a?{top:a.top+b.top,right:a.right+b.right,bottom:a.bottom+b.bottom,left:a.left+b.left,width:a.width+b.width,height:a.height+b.height}:b}return d},getMarginInfo:function(){var b=this,a=b.marginInfo,c,f,d,e;if(!a){if(!b.wrapsComponent){a=b.checkCache('marginInfo')}else {c=b.target;d=c.ownerLayout;e=d?d.id:null;f=d&&d.manageMargins;a=c.margin$;if(a&&a.ownerId!==e){a=null}if(!a){a=b.parseMargins(c,c.margin)||b.checkCache('marginInfo');if(f){b.setProp('margin-top',0);b.setProp('margin-right',0);b.setProp('margin-bottom',0);b.setProp('margin-left',0)}a.ownerId=e;c.margin$=a}a.width=a.left+a.right;a.height=a.top+a.bottom}b.marginInfo=a}return a},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var b=this,a=b.paddingInfo;if(!a){b.paddingInfo=a=b.checkCache('paddingInfo')}return a},getProp:function(a){var b=this,c=b.props[a];b.addTrigger(a);return c},getDomProp:function(b){var a=this,c=a.dirty&&b in a.dirty?undefined:a.props[b];a.addTrigger(b,!0);return c},getStyle:function(b){var e=this,c=e.styles,d,a;if(b in c){a=c[b]}else {d=e.styleInfo[b];a=e.el.getStyle(b);if(d&&d.parseInt){a=parseInt(a,10)||0}c[b]=a}return a},getStyles:function(f,e){var l=this,i=l.styles,j={},h=0,o=f.length,a,b,d,c,k,m,n,g;e=e||f;for(a=0;a<o;++a){c=f[a];if(c in i){j[e[a]]=i[c];++h;if(a&&h===1){b=f.slice(0,a);d=e.slice(0,a)}}else {if(h){(b||(b=[])).push(c);(d||(d=[])).push(e[a])}}}if(h<o){b=b||f;d=d||e;m=l.styleInfo;n=l.el.getStyle(b);for(a=b.length;a--;){c=b[a];k=m[c];g=n[c];if(k&&k.parseInt){g=parseInt(g,10)||0}j[d[a]]=g;i[c]=g}}return j},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(c,a){if(a===!0){a=5}var d=typeof a,b;if(d==='string'||d==='number'){b=c.parseBox(a)}else {if(a){b={top:0,right:0,bottom:0,left:0};if(a){a=Ext.apply(b,c.parseBox(a))}}}return b},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var a=this,e=a.target,b=e.componentLayout,c=a.ownerCtContext,f=b.ownerContext,d;b.ownerContext=null;a.sizeModel=d=e.getSizeModel(c&&c.widthModel.pairsByHeightOrdinal[c.heightModel.ordinal]);a.widthModel=d.width;a.heightModel=d.height;if(f){b.ownerContext=a}},recoverProp:function(a,d,b){var c=this,f=c.props,e;if(a in d){f[a]=d[a];if(b&&a in b){e=c.dirty||(c.dirty={});e[a]=b[a]}}},redo:function(e){var c=this,b,d,a;c.revertProps(c.props);if(e&&c.wrapsComponent){if(c.childItems){for(a=0,b=c.childItems,d=b.length;a<d;a++){b[a].redo(e)}}for(a=0,b=c.children,d=b.length;a<d;a++){b[a].redo()}}},removeEl:function(b,e){var d=this,c,a;if(b){if(b.dom){a=b}else {c=d.target;if(e){c=e}a=c[b];if(typeof a==='function'){a=a.call(c);if(a===d.el){return this}}}if(a){d.context.removeEl(a,d)}}},revertProps:function(c){var a,d=this.flushedProps,b={};for(a in c){if(d.hasOwnProperty(a)){b[a]=c[a]}}this.writeProps(b)},setAttribute:function(c,b){var a=this;if(!a.attributes){a.attributes={}}a.attributes[c]=b;a.markDirty()},setBox:function(a){var b=this;if('left' in a){b.setProp('x',a.left)}if('top' in a){b.setProp('y',a.top)}b.setSize(a.width,a.height)},setContentHeight:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp('contentHeight',b)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp('contentWidth',b)},setContentSize:function(c,b,a){return this.setContentWidth(c,a)+this.setContentHeight(b,a)===2},setProp:function(b,c,f){var a=this,d=typeof c,e;if(d==='undefined'||d==='number'&&isNaN(c)){return 0}if(a.props[b]===c){return 1}a.props[b]=c;++a.context.progressCount;if(f===!1){a.fireTriggers('domTriggers',b);a.clearBlocks('domBlocks',b)}else {e=a.styleInfo[b];if(e){if(!a.dirty){a.dirty={}}a.dirty[b]=c;a.markDirty()}}a.fireTriggers('triggers',b);a.clearBlocks('blocks',b);return 1},setHeight:function(b,e){var a=this,h=a.target,c=a.ownerCtContext,d,f,i,g,j;if(b<0){b=0}if(!a.wrapsComponent){if(!a.setProp('height',b,e)){return NaN}}else {i=a.collapsedVert?0:h.minHeight||0;b=Ext.Number.constrain(b,i,h.maxHeight);g=a.props.height;if(!a.setProp('height',b,e)){return NaN}if(c&&!a.isComponentChild&&isNaN(g)){j=--c.remainingChildDimensions;if(!j){c.setProp('containerChildrenSizeDone',!0)}}d=a.frameBodyContext;if(d){f=a.getFrameInfo();d[a.el.vertical?'setWidth':'setHeight'](b-f.height,e)}}return b},setWidth:function(b,e){var a=this,h=a.target,c=a.ownerCtContext,d,f,i,g,j;if(b<0){b=0}if(!a.wrapsComponent){if(!a.setProp('width',b,e)){return NaN}}else {i=a.collapsedHorz?0:h.minWidth||0;b=Ext.Number.constrain(b,i,h.maxWidth);g=a.props.width;if(!a.setProp('width',b,e)){return NaN}if(c&&!a.isComponentChild&&isNaN(g)){j=--c.remainingChildDimensions;if(!j){c.setProp('containerChildrenSizeDone',!0)}}d=a.frameBodyContext;if(d){f=a.getFrameInfo();d.setWidth(b-f.width,e)}}return b},setSize:function(c,b,a){this.setWidth(c,a);this.setHeight(b,a)},translateProps:{x:'left',y:'top'},undo:function(e){var c=this,b,d,a;c.revertProps(c.lastBox);if(e&&c.wrapsComponent){if(c.childItems){for(a=0,b=c.childItems,d=b.length;a<d;a++){b[a].undo(e)}}for(a=0,b=c.children,d=b.length;a<d;a++){b[a].undo()}}},unsetProp:function(a){var b=this.dirty;delete this.props[a];if(b){delete b[a]}},writeProps:function(a,s){if(!(a&&typeof a==='object')){return}var b=this,q=b.el,d={},f=0,r=b.styleInfo,g,c,k,i=a.width,h=a.height,o=b.target,m,l,e,j,p,n;if('displayed' in a){q.setDisplayed(a.displayed)}for(c in a){if(s){b.fireTriggers('domTriggers',c);b.clearBlocks('domBlocks',c);b.flushedProps[c]=1}g=r[c];if(g&&g.dom){if(g.suffix&&(k=parseInt(a[c],10))){d[c]=k+g.suffix}else {d[c]=a[c]}++f}}if('x' in a||'y' in a){if(o.isComponent){o.setPosition(a.x,a.y)}else {f+=b.addPositionStyles(d,a)}}if(b.wrapsComponent&&Ext.isIE9){if((m=i!==undefined&&b.hasOverflowY)||(l=h!==undefined&&b.hasOverflowX)){e=b.isAbsolute;if(e===undefined){e=!1;n=b.target.getTargetEl();p=n.getStyle('position');b.isAbsolute=e=p==='absolute'}if(e){j=Ext.getScrollbarSize();if(m){i=parseInt(i,10)+j.width;d.width=i+'px';++f}if(l){h=parseInt(h,10)+j.height;d.height=h+'px';++f}}}}if(f){q.setStyle(d)}}},1,0,0,0,0,0,[Ext.layout,'ContextItem'],function(){var a={dom:!0,parseInt:!0,suffix:'px'},c={dom:!0},b={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:b,containerLayoutDone:b,displayed:b,done:b,x:b,y:b,columnsChanged:b,rowHeights:b,viewOverflowY:b,left:a,top:a,right:a,bottom:a,width:a,height:a,'border-top-width':a,'border-right-width':a,'border-bottom-width':a,'border-left-width':a,'margin-top':a,'margin-right':a,'margin-bottom':a,'margin-left':a,'padding-top':a,'padding-right':a,'padding-bottom':a,'padding-left':a,'line-height':c,display:c,clear:c}});Ext.define('Ext.rtl.layout.ContextItem',{override:'Ext.layout.ContextItem',addPositionStyles:function(b,c){var d=c.x,e=c.y,a=0;if(d!==undefined){b[this.parent.target.getInherited().rtl?'right':'left']=d+'px';++a}if(e!==undefined){b.top=e+'px';++a}return a}});Ext.cmd.derive('Ext.layout.Context',Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(b){var a=this;Ext.apply(a,b);a.items={};a.layouts={};a.blockCount=0;a.cycleCount=0;a.flushCount=0;a.calcCount=0;a.animateQueue=a.newQueue();a.completionQueue=a.newQueue();a.finalizeQueue=a.newQueue();a.finishQueue=a.newQueue();a.flushQueue=a.newQueue();a.invalidateData={};a.layoutQueue=a.newQueue();a.invalidQueue=[];a.triggers={data:{},dom:{}}},callLayout:function(a,b){this.currentLayout=a;a[b](this.getCmp(a.owner))},cancelComponent:function(a,p,o){var b=this,l=a,n=!a.isComponent,q=n?l.length:1,e,f,j,d,c,m,h,i,k,g;for(e=0;e<q;++e){if(n){a=l[e]}if(o){if(a.ownerCt){g=this.items[a.ownerCt.el.id];if(g){Ext.Array.remove(g.childItems,b.getCmp(a))}}else {if(a.rendered){b.removeEl(a.el)}}}if(!p){h=b.invalidQueue;j=h.length;if(j){b.invalidQueue=m=[];for(f=0;f<j;++f){i=h[f];k=i.item.target;if(k!==a&&!k.up(a)){m.push(i)}}}}c=a.componentLayout;b.cancelLayout(c);if(c.getLayoutItems){d=c.getLayoutItems();if(d.length){b.cancelComponent(d,!0)}}if(a.isContainer&&!a.collapsed){c=a.layout;b.cancelLayout(c);d=c.getVisibleItems();if(d.length){b.cancelComponent(d,!0)}}}},cancelLayout:function(a){var b=this;b.completionQueue.remove(a);b.finalizeQueue.remove(a);b.finishQueue.remove(a);b.layoutQueue.remove(a);if(a.running){b.layoutDone(a)}a.ownerContext=null},clearTriggers:function(h,f){var g=h.id,a=this.triggers[f?'dom':'data'],c=a&&a[g],i=c&&c.length||0,b,e,d;for(b=0;b<i;++b){d=c[b];e=d.item;a=f?e.domTriggers:e.triggers;delete a[d.prop][g]}},flush:function(){var d=this,c=d.flushQueue.clear(),b=c.length,a;if(b){++d.flushCount;for(a=0;a<b;++a){c[a].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),c=b.length,a;if(c){for(a=0;a<c;a++){if(b[a].target.animate!==!1){b[a].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var b=this,f=b.invalidQueue,g=f&&f.length,a,d,e,c;b.invalidQueue=[];if(g){d=[];for(c=0;c<g;++c){a=(e=f[c]).item.target;if(!a.container.isDetachedBody){d.push(a);if(e.options){b.invalidateData[a.id]=e.options}}}b.invalidate(d,null)}},flushLayouts:function(d,g,h){var a=this,e=h?a[d].items:a[d].clear(),f=e.length,b,c;if(f){for(b=0;b<f;++b){c=e[b];if(!c.running){a.callLayout(c,g)}}a.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,c){var a=this.getItem(c,c);if(!a.parent){a.parent=b;if(b.children.length){b.children.push(a)}else {b.children=[a]}}return a},getItem:function(d,b){var c=b.id,a=this.items,e=a[c]||(a[c]=new Ext.layout.ContextItem({context:this,target:d,el:b}));return e},handleFailure:function(){var a=this.layouts,b,c;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(c in a){b=a[c];if(a.hasOwnProperty(c)){b.running=!1;b.ownerContext=null}}},invalidate:function(i,q){var d=this,o=!i.isComponent,l,h,m,k,c,a,g,p,e,b,f,n,j;for(k=0,p=o?i.length:1;k<p;++k){c=o?i[k]:i;if(c.rendered&&!c.hidden){h=c.ownerLayout;e=c.componentLayout;j=!1;if((!h||!h.needsItemSize)&&c.liquidLayout){j=!0}if(!j||h&&h.setsItemSize){a=d.getCmp(c);m=!a.state;b=c.isContainer&&!c.collapsed?c.layout:null;f=d.invalidateData[a.id];delete d.invalidateData[a.id];n=a.init(q,f)}if(j){continue}if(f){d.processInvalidate(f,a,'before')}if(e.beforeLayoutCycle){e.beforeLayoutCycle(a)}if(b&&b.beforeLayoutCycle){b.beforeLayoutCycle(a)}n=a.initContinue(n);l=!0;if(e.getLayoutItems){e.renderChildren();g=e.getLayoutItems();if(g.length){d.invalidate(g,!0)}}if(b){l=!1;b.renderChildren();if(b.needsItemSize||b.activeItemCount){g=b.getVisibleItems();if(g.length){d.invalidate(g,!0)}}}a.initDone(l);d.resetLayout(e,a,m);if(b){d.resetLayout(b,a,m)}a.initAnimation();if(f){d.processInvalidate(f,a,'after')}}}d.currentLayout=null},isDescendant:function(b,c){if(b.isContainer){for(var a=c.ownerCt;a;a=a.ownerCt){if(a===b){return !0}}}return !1},layoutDone:function(b){var a=b.ownerContext;b.running=!1;if(b.isComponentLayout){if(a.measuresBox){a.onBoxMeasured()}a.setProp('done',!0)}else {a.setProp('containerLayoutDone',!0)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(a,e,c){if(a[c]){var b=this,d=b.currentLayout;b.currentLayout=a.layout||null;a[c](e,a);b.currentLayout=d}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(b,a,d){var c=this,g=b.layout,f=a.layout,e=b[d],h=a[d];return function(i){var j=c.currentLayout;if(e){c.currentLayout=g;e.call(b.scope||b,i,b)}c.currentLayout=f;h.call(a.scope||a,i,a);c.currentLayout=j}},purgeInvalidates:function(){var j=this,a=[],i=j.invalidQueue,k=i.length,c,b,h,e,d,f,g;for(c=0;c<k;++c){d=i[c];f=d.item.target;g=!0;for(b=a.length;b--;){h=a[b];e=h.item.target;if(f.isLayoutChild(e)){g=!1;break}if(e.isLayoutChild(f)){Ext.Array.erase(a,b,1)}}if(g){a.push(d)}}j.invalidQueue=a},queueInvalidate:function(c,a){var e=this,h=[],i=e.invalidQueue,k=i.length,d,f,g,b,j;if(c.isComponent){d=c;c=e.items[d.el.id];if(c){c.recalculateSizeModel()}else {c=e.getCmp(d)}}else {d=c.target}c.invalid=!0;while(k--){f=i[k];g=f.item.target;if(!d.isFloating&&d.up(g)){return}if(g===d){if(!(b=f.options)){f.options=a}else {if(a){if(a.widthModel){b.widthModel=a.widthModel}if(a.heightModel){b.heightModel=a.heightModel}if(!(j=b.state)){b.state=a.state}else {if(a.state){Ext.apply(j,a.state)}}if(a.before){b.before=e.chainFns(b,a,'before')}if(a.after){b.after=e.chainFns(b,a,'after')}}}return}if(!g.isLayoutChild(d)){h.push(f)}}h.push({item:c,options:a});e.invalidQueue=h},queueItemLayouts:function(c){var b=c.isComponent?c:c.target,a=b.componentLayout;if(!a.pending&&!a.invalid&&!a.done){this.queueLayout(a)}a=b.layout;if(a&&!a.pending&&!a.invalid&&!a.done&&!b.collapsed){this.queueLayout(a)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=!0},removeEl:function(e,b){var d=e.id,a=b?b.children:null,c=this.items;if(a){Ext.Array.remove(a,c[d])}delete c[d]},resetLayout:function(a,c,d){var b=this;b.currentLayout=a;a.done=!1;a.pending=!0;a.firedTriggers=0;b.layoutQueue.add(a);if(d){b.layouts[a.id]=a;a.running=!0;if(a.finishedLayout){b.finishQueue.add(a)}++b.remainingLayouts;++a.layoutCount;a.ownerContext=c;a.beginCount=0;a.blockCount=0;a.calcCount=0;a.triggerCount=0;if(!a.initialized){a.initLayout()}a.beginLayout(c)}else {++a.beginCount;if(!a.running){++b.remainingLayouts;a.running=!0;a.ownerContext=c;if(a.isComponentLayout){c.unsetProp('done')}b.completionQueue.remove(a);b.finalizeQueue.remove(a)}}a.beginLayoutCycle(c,d)},run:function(){var a=this,b=!1,c=a.cycleWatchDog;a.purgeInvalidates();a.flushInvalidates();a.state=1;a.totalCount=a.layoutQueue.getCount();a.flush();while((a.remainingLayouts||a.invalidQueue.length)&&c--){if(a.invalidQueue.length){a.flushInvalidates()}if(a.runCycle()){b=!1}else {if(!b){a.flush();b=!0;a.flushLayouts('completionQueue','completeLayout')}else {if(!a.invalidQueue.length){a.state=2;break}}}if(!(a.remainingLayouts||a.invalidQueue.length)){a.flush();a.flushLayouts('completionQueue','completeLayout');a.flushLayouts('finalizeQueue','finalizeLayout')}}return a.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return !1}a.flush();a.flushLayouts('finishQueue','finishedLayout',!0);a.flushLayouts('finishQueue','notifyOwner');a.flush();a.flushAnimations();return !0},runCycle:function(){var a=this,c=a.layoutQueue.clear(),d=c.length,b;++a.cycleCount;a.progressCount=0;for(b=0;b<d;++b){a.runLayout(a.currentLayout=c[b])}a.currentLayout=null;return a.progressCount>0},runLayout:function(a){var b=this,c=b.getCmp(a.owner);a.pending=!1;if(c.state.blocks){return}a.done=!0;++a.calcCount;++b.calcCount;a.calculate(c);if(a.done){b.layoutDone(a);if(a.completeLayout){b.queueCompletion(a)}if(a.finalizeLayout){b.queueFinalize(a)}}else {if(!a.pending&&!a.invalid&&!(a.blockCount+a.triggerCount-a.firedTriggers)){b.queueLayout(a)}}},setItemSize:function(a,g,f){var b=a,c=1,e,d;if(a.isComposite){b=a.elements;c=b.length;a=b[0]}else {if(!a.dom&&!a.el){c=b.length;a=b[0]}}for(d=0;d<c;){e=this.get(a);e.setSize(g,f);a=b[++d]}}},1,0,0,0,0,0,[Ext.layout,'Context'],0);Ext.cmd.derive('Ext.menu.DatePicker',Ext.menu.Menu,{ariaRole:'dialog',ariaLabel:'Date picker',hideOnClick:!0,pickerId:null,enableFocusableContainer:!1,initComponent:function(){var a=this,c,b;if(a.pickerCfg){b=Ext.apply({cls:'x-menu-date-item',margin:0,border:!1,id:a.pickerId,xtype:'datepicker'},a.pickerCfg)}else {c=Ext.apply({},a.initialConfig);delete c.listeners;b=Ext.applyIf({cls:'x-menu-date-item',margin:0,border:!1,id:a.pickerId,xtype:'datepicker'},c)}Ext.apply(a,{showSeparator:!1,plain:!0,bodyPadding:0,items:[b]});Ext.menu.Menu.prototype.initComponent.call(this);a.picker=a.down('datepicker');a.relayEvents(a.picker,['select']);if(a.hideOnClick){a.on('select',a.hidePickerOnSelect,a)}},onEscapeKey:function(a){if(this.floating&&this.ownerCmp&&this.ownerCmp.focus){this.ownerCmp.focus()}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}},0,['datemenu'],['component','box','container','panel','menu','datemenu'],{'component':!0,'box':!0,'container':!0,'panel':!0,'menu':!0,'datemenu':!0},['widget.datemenu'],0,[Ext.menu,'DatePicker'],0);Ext.cmd.derive('Ext.plugin.Manager',Ext.Base,{alternateClassName:['Ext.PluginManager','Ext.PluginMgr'],singleton:!0,typeName:'ptype',create:function(a,e,c){var b,d;if(a.init){b=a}else {if(c){a=Ext.apply({},a);a.cmp=c}else {c=a.cmp}if(a.xclass){b=Ext.create(a)}else {d='plugin.'+(a.ptype||e);b=Ext.ClassManager.instantiateByAlias(d,a)}}if(b&&c&&b.setCmp&&!b.setCmpCalled){b.setCmp(c);b.setCmpCalled=!0}return b}},0,0,0,0,0,0,[Ext.plugin,'Manager',Ext,'PluginManager',Ext,'PluginMgr'],0);Ext.cmd.derive('Ext.resizer.BorderSplitterTracker',Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var i=this,e=i.splitter,k=e.collapseTarget,n=e.defaultSplitMin,l=e.vertical?'Width':'Height',p='min'+l,o='max'+l,w='get'+l,r=e.neighbors,x=r.length,c=k.el.getBox(),u=c.x,v=c.y,t=c.right,s=c.bottom,b=e.vertical?t-u:s-v,j,h,f,d,a,g,m,q;d=(k[p]||Math.min(b,n))-b;a=k[o];if(!a){a=1000000000}else {a-=b}q=b;for(j=0;j<x;++j){h=r[j];b=h[w]();f=h[o];if(f===null){f=undefined}g=b-f;m=b-(h[p]||Math.min(b,n));if(!isNaN(g)){if(d<g){d=g}}if(a>m){a=m}}if(a-d<2){return null}c=new Ext.util.Region(v,t,s,u);i.constraintAdjusters[i.getCollapseDirection()](c,d,a,e);i.dragInfo={minRange:d,maxRange:a,targetSize:q};return c},constraintAdjusters:{left:function(a,c,b,d){a[0]=a.x=a.left=a.right+c;a.right+=b+d.getWidth()},top:function(a,c,b,d){a[1]=a.y=a.top=a.bottom+c;a.bottom+=b+d.getHeight()},bottom:function(a,c,b,d){a.bottom=a.top-c;a.top-=b+d.getHeight()},right:function(a,c,b,d){a.right=a.left-c;a[0]=a.x=a.left=a.x-b+d.getWidth()}},onBeforeStart:function(h){var c=this,f=c.splitter,d=f.collapseTarget,e=f.neighbors,g=e.length,a,b;if(d.collapsed){return !1}for(a=0;a<g;++a){b=e[a];if(b.collapsed&&b.isHorz===d.isHorz){return !1}}if(!(c.constrainTo=c.calculateConstrainRegion())){return !1}return !0},performResize:function(j,i){var d=this,b=d.splitter,e=b.getCollapseDirection(),h=b.collapseTarget,f=d.splitAdjusters[b.vertical?'horz':'vert'],a=i[f.index],c=d.dragInfo,g;if(e==='right'||e==='bottom'){a=-a}a=Math.min(Math.max(c.minRange,a),c.maxRange);if(a){(g=b.ownerCt).suspendLayouts();f.adjustTarget(h,c.targetSize,a);g.resumeLayouts(!0)}},splitAdjusters:{horz:{index:0,adjustTarget:function(a,c,b){a.flex=null;a.setSize(c+b)}},vert:{index:1,adjustTarget:function(a,b,c){a.flex=null;a.setSize(undefined,b+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,'BorderSplitterTracker'],0);Ext.define('Ext.rtl.resizer.BorderSplitterTracker',{override:'Ext.resizer.BorderSplitterTracker',rtlDirections:{top:'top',right:'left',bottom:'bottom',left:'right'},getCollapseDirection:function(){var a=this.splitter.getCollapseDirection();if(!this.splitter.getInherited().rtl!==!Ext.rootInheritedState.rtl){a=this.rtlDirections[a]}return a}});Ext.cmd.derive('Ext.resizer.ResizeTracker',Ext.dd.DragTracker,{dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:'x-resizable-proxy',constructor:function(b){var a=this,d,c,e;if(!b.el){if(b.target.isComponent){a.el=b.target.getEl()}else {a.el=b.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(a.preserveRatio&&a.minWidth&&a.minHeight){d=a.minWidth/a.el.getWidth();c=a.minHeight/a.el.getHeight();if(c>d){a.minWidth=a.el.getWidth()*c}else {a.minHeight=a.el.getHeight()*d}}if(a.throttle){e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)},a.throttle);a.resize=function(f,d,c){if(c){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)}else {e.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=!0}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(a){var b,c=this.proxyCls;if(a.isComponent){b=a.getProxy().addCls(c)}else {b=a.createProxy({tag:'div',role:'presentation',cls:c,id:a.id+'-rzproxy'},Ext.getBody())}b.removeCls('x-proxy-el');return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(c,b){var a=Ext.fly(b.parentNode);Ext.dd.DragTracker.prototype.onMouseDown.apply(this,arguments);if(a&&a.shim){a.maskIframes()}},onMouseUp:function(b){var a=Ext.fly(this.dragTarget.parentNode);Ext.dd.DragTracker.prototype.onMouseUp.apply(this,arguments);if(a&&a.shim){a.unmaskIframes()}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(s,r){var c=this,h=c.activeResizeHandle.region,d=c.getOffset(c.constrainTo?'dragTarget':null),b=c.startBox,n,f=0,e=0,k,j,l=0,m=0,q,i,g,a,o,p;h=c.convertRegionName(h);switch(h){case 'south':e=d[1];g=2;break;case 'north':e=-d[1];m=-e;g=2;break;case 'east':f=d[0];g=1;break;case 'west':f=-d[0];l=-f;g=1;break;case 'northeast':e=-d[1];m=-e;f=d[0];i=[b.x,b.y+b.height];g=3;break;case 'southeast':e=d[1];f=d[0];i=[b.x,b.y];g=3;break;case 'southwest':f=-d[0];l=-f;e=d[1];i=[b.x+b.width,b.y];g=3;break;case 'northwest':e=-d[1];m=-e;f=-d[0];l=-f;i=[b.x+b.width,b.y+b.height];g=3;break;}a={width:b.width+f,height:b.height+e,x:b.x+l,y:b.y+m};k=Ext.Number.snap(a.width,c.widthIncrement);j=Ext.Number.snap(a.height,c.heightIncrement);if(k!==a.width||j!==a.height){switch(h){case 'northeast':a.y-=j-a.height;break;case 'north':a.y-=j-a.height;break;case 'southwest':a.x-=k-a.width;break;case 'west':a.x-=k-a.width;break;case 'northwest':a.x-=k-a.width;a.y-=j-a.height;}a.width=k;a.height=j}if(a.width<c.minWidth||a.width>c.maxWidth){a.width=Ext.Number.constrain(a.width,c.minWidth,c.maxWidth);if(l){a.x=b.x+(b.width-a.width)}}else {c.lastX=a.x}if(a.height<c.minHeight||a.height>c.maxHeight){a.height=Ext.Number.constrain(a.height,c.minHeight,c.maxHeight);if(m){a.y=b.y+(b.height-a.height)}}else {c.lastY=a.y}if(c.preserveRatio||s.shiftKey){n=c.startBox.width/c.startBox.height;o=Math.min(Math.max(c.minHeight,a.width/n),c.maxHeight);p=Math.min(Math.max(c.minWidth,a.height*n),c.maxWidth);if(g===1){a.height=o}else {if(g===2){a.width=p}else {q=Math.abs(i[0]-this.lastXY[0])/Math.abs(i[1]-this.lastXY[1]);if(q>n){a.height=o}else {a.width=p}if(h==='northeast'){a.y=b.y-(a.height-b.height)}else {if(h==='northwest'){a.y=b.y-(a.height-b.height);a.x=b.x-(a.width-b.width)}else {if(h==='southwest'){a.x=b.x-(a.width-b.width)}}}}}}c.setPosition=a.x!==c.startBox.x||a.y!==c.startBox.y;c.resize(a,r)},resize:function(b,e){var a=this,c,d=a.setPosition;if(a.dynamic||!a.dynamic&&e){if(d){a.target.setBox(b)}else {a.target.setSize(b.width,b.height)}}if(!e){c=a.getProxy();if(c&&c!==a.target){if(d||a.hideProxy){c.setBox(b)}else {c.setSize(b.width,b.height)}}}},onEnd:function(a){this.updateDimensions(a,!0);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,'ResizeTracker'],0);Ext.define('Ext.rtl.resizer.ResizeTracker',{override:'Ext.resizer.ResizeTracker',_rtlRegionNames:{south:'south',north:'north',east:'west',west:'east',northeast:'northwest',southeast:'southwest',southwest:'southeast',northwest:'northeast'},convertRegionName:function(a){return Ext.rootInheritedState.rtl?this._rtlRegionNames[a]:a}});Ext.cmd.derive('Ext.selection.CellModel',Ext.selection.DataViewModel,{isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(b){var a=this,c;if(a.view&&a.gridListeners){a.gridListeners.destroy()}Ext.selection.DataViewModel.prototype.bindComponent.call(this,b);if(b){c=b.grid||b.ownerCt;if(c.optimizedColumnMove!==!1){a.gridListeners=c.on({columnmove:a.onColumnMove,scope:a,destroyable:!0})}}},getViewListeners:function(){var a=Ext.selection.DataViewModel.prototype.getViewListeners.call(this);a.refresh=this.onViewRefresh;return a},getHeaderCt:function(){var a=this.navigationModel.getPosition(),b=a?a.view:this.primaryView;return b.headerCt},onNavigate:function(a){if(!a.record||a.keyEvent.stopSelection){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(a,g,e){var b=this,c,d=b.getPosition(),f=b.view.store;if(a||a===0){if(a.isModel){c=f.indexOf(a);if(c!==-1){a={row:c,column:d?d.column:0}}else {a=null}}else {if(typeof a==='number'){a={row:a,column:0}}}}if(a){b.selectByPosition(a,e)}else {b.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return (this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(a,b,c){if(a&&!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition({row:a.row,column:typeof a.column==='number'?this.view.getColumnManager().getColumns()[a.column]:a.column})}return this.setPosition(a,b,c)},setPosition:function(a,d,e){var b=this,c=b.selection;if(a){a=a.isCellContext?a.clone():(new Ext.grid.CellContext(b.view)).setPosition(a)}if(!e&&c){if(a&&(a.record===c.record&&a.column===c.column&&a.view===c.view)){a=null}else {b.onCellDeselect(b.selection,d)}}if(a){b.nextSelection=a;b.selecting=!0;b.onCellSelect(b.nextSelection,d);b.selecting=!1;return b.selection=a}},isCellSelected:function(d,e,c){var f=this,b,a=f.getPosition();if(a&&a.view===d){b=(new Ext.grid.CellContext(d)).setPosition({row:e,column:typeof c==='number'?d.getColumnManager().getColumns()[c]:c});return b.record===a.record&&b.column===a.column}},onStoreRemove:function(b,e,d){var c=this,a=c.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments);if(a&&b.isMoving(a.record)){return}if(a&&b.getCount()&&b.indexOf(a.record)!==-1){a.setRow(a.record)}else {c.selection=null}},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments);this.selection=null},onStoreAdd:function(){var b=this,a=b.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments);if(a){a.setRow(a.record)}else {b.selection=null}},onCellClick:function(f,e,c,d,g,a,b){if(a!==-1){this.setPosition(b.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,!1,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(g,f,e,h){var b=this,a,c,d;if(f){a=b.nextSelection;c='select'}else {a=b.selection;c='deselect'}d=a.view||b.primaryView;if((e||b.fireEvent('before'+c,b,g,a.rowIdx,a.colIdx))!==!1&&h()!==!1){if(f){d.onCellSelect(a)}else {d.onCellDeselect(a);delete b.selection}if(!e){b.fireEvent(c,b,g,a.rowIdx,a.colIdx)}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(b,d,c,e){var a=b.up('tablepanel');if(a){this.onViewRefresh(a.view)}},onUpdate:function(c){var a=this,b;if(a.isSelected(c)){b=a.selecting?a.nextSelection:a.selection;a.view.onCellSelect(b)}},onViewRefresh:function(d){var f=this,b=f.getPosition(),g,c=d.headerCt,e,a;if(b&&b.view===d){e=b.record;a=b.column;if(!a.isDescendantOf(c)){a=c.queryById(a.id)||c.down('[text="'+a.text+'"]')||c.down('[dataIndex="'+a.dataIndex+'"]')}if(b.record){if(a&&d.store.indexOfId(e.getId())!==-1){g=(new Ext.grid.CellContext(d)).setPosition({row:e,column:a});f.setPosition(g)}}else {f.selection=null}}},selectByPosition:function(b,a){this.setPosition(b,a)}},0,0,0,0,['selection.cellmodel'],0,[Ext.selection,'CellModel'],0);Ext.cmd.derive('Ext.selection.CheckboxModel',Ext.selection.RowModel,{mode:'MULTI',injectCheckbox:0,checkOnly:!1,showHeaderCheckbox:undefined,checkSelector:'.x-grid-row-checker',allowDeselect:!0,headerWidth:24,checkerOnCls:'x-grid-hd-checker-on',tdCls:'x-grid-cell-special x-grid-cell-row-checker',constructor:function(){var a=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments);if(a.mode==='SINGLE'){a.showHeaderCheckbox=!1}},beforeViewRender:function(c){var a=this,b;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments);if(!a.hasLockedHeader()||c.headerCt.lockedCt){a.addCheckbox(c,!0);b=c.ownerCt;if(c.headerCt.lockedCt){b=b.ownerCt}a.mon(b,'reconfigure',a.onReconfigure,a)}},bindComponent:function(a){this.sortable=!1;Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var b=this.views,c=b.length,a;for(a=0;a<c;a++){if(b[a].headerCt.lockedCt){return !0}}return !1},addCheckbox:function(c,e){var b=this,a=b.injectCheckbox,d=c.headerCt;if(a!==!1){if(a==='first'){a=0}else {if(a==='last'){a=d.getColumnCount()}}Ext.suspendLayouts();if(c.getStore().isBufferedStore){b.showHeaderCheckbox=!1}b.column=d.add(a,b.getHeaderConfig());Ext.resumeLayouts()}if(e!==!0){c.refresh()}},onReconfigure:function(c,b,a){if(a){this.addCheckbox(this.views[0])}},toggleUiHeader:function(c){var e=this.views[0],d=e.headerCt,a=d.child('gridcolumn[isCheckerHd]'),b=this.checkerOnCls;if(a){if(c){a.addCls(b)}else {a.removeCls(b)}}},onHeaderClick:function(e,c,d){var a=this,b;if(c===a.column&&a.mode!=='SINGLE'){d.stopEvent();b=c.el.hasCls('x-grid-hd-checker-on');if(b){a.deselectAll()}else {a.selectAll()}}},getHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==!1;return {xtype:'gridcolumn',ignoreExport:!0,isCheckerHd:b,text:'&#160;',clickTargetName:'el',width:a.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:'',tdCls:a.tdCls,cls:b?'x-column-header-checkbox ':'',defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader(),processEvent:a.processColumnEvent}},processColumnEvent:function(h,b,g,d,f,a,e,i){var c=b.getNavigationModel();if(a.type==='keydown'&&b.actionableMode&&a.getKey()===a.SPACE){c.fireEvent('navigate',{view:b,navigationModel:c,keyEvent:a,position:a.position,recordIndex:d,record:e,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column})}},renderEmpty:function(){return '&#160;'},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments);this.updateHeaderState()},renderer:function(f,b,d,c,a,e,g){return '<div class="x-grid-row-checker" role="button" tabIndex="0">&#160;</div>'},selectByPosition:function(a,b){if(!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition(a.row,a.column)}if(!this.checkOnly||a.column===this.column){Ext.selection.RowModel.prototype.selectByPosition.call(this,a,b)}},onSelectChange:function(){Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments);this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this);if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var a=this,e=a.store,g=e.getCount(),h=a.views,c=!1,f=0,d,i,b;if(!e.isBufferedStore&&g>0){d=a.selected;c=!0;for(b=0,i=d.getCount();b<i;++b){if(e.indexOfId(d.getAt(b).id)===-1){break}++f}c=g===f}if(h&&h.length){a.toggleUiHeader(c)}},vetoSelection:function(a){var b=this,f=b.column,e,c,d;if(b.checkOnly){c=a.type==='click'&&a.getTarget(b.checkSelector);d=a.getKey()===a.SPACE&&a.position.column===f;e=!(c||d)}return e||Ext.selection.RowModel.prototype.vetoSelection.call(this,a)},destroy:function(){this.column=null;Ext.selection.RowModel.prototype.destroy.call(this)},privates:{onBeforeNavigate:function(b){var a=b.keyEvent;if(this.selectionMode!=='SINGLE'){b.ctrlKey=b.ctrlKey||a.ctrlKey||a.type==='click'&&!a.shiftKey||a.getKey()===a.SPACE}},selectWithEventMulti:function(b,a,d){var c=this;if(!a.shiftKey&&!a.ctrlKey&&a.getTarget(c.checkSelector)){if(d){c.doDeselect(b)}else {c.doSelect(b,!0)}}else {Ext.selection.RowModel.prototype.selectWithEventMulti.call(this,b,a,d)}}}},1,0,0,0,['selection.checkboxmodel'],0,[Ext.selection,'CheckboxModel'],0);Ext.define('Ext.theme.triton.selection.CheckboxModel',{override:'Ext.selection.CheckboxModel',headerWidth:32});Ext.cmd.derive('Ext.slider.Thumb',Ext.Base,{overCls:'x-slider-thumb-over',constructor:function(a){var b=this;Ext.apply(b,a||{},{cls:'x-slider-thumb',constrain:!1});b.callParent([a])},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst(a.getElConfig());a.onRender()},onRender:function(){if(this.disabled){this.disable()}this.initEvents()},getElConfig:function(){var c=this,a=c.slider,b={};b[a.vertical?'bottom':a.horizontalProp]=a.calculateThumbPosition(a.normalizeValue(c.value))+'%';return {style:b,id:this.id,cls:this.cls,role:'presentation'}},move:function(h,d){var a=this,f=a.el,i=a.slider,b=i.vertical?'bottom':i.horizontalProp,g,e,c;h+='%';if(!d){f.dom.style[b]=h}else {g={};g[b]=h;if(!Ext.supports.GetPositionPercentage){e={};e[b]=f.dom.style[b]}c={target:f,duration:350,from:e,to:g,scope:a,callback:a.onAnimComplete};if(d!==!0){Ext.apply(c,d)}a.anim=new Ext.fx.Anim(c)}},onAnimComplete:function(){this.anim=null},enable:function(){var a=this.el;this.disabled=!1;if(a){a.removeCls(this.slider.disabledCls)}},disable:function(){var a=this.el;this.disabled=!0;if(a){a.addCls(this.slider.disabledCls)}},initEvents:function(){var a=this;a.tracker=new Ext.dd.DragTracker({el:a.el,onBeforeStart:a.onBeforeDragStart.bind(a),onStart:a.onDragStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onDragEnd.bind(a),tolerance:3,autoStart:300});a.el.hover(a.addOverCls,a.removeOverCls,a)},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(e){var a=this,b=a.el,c=a.tracker.getXY(),d=a.pointerOffset=b.getXY();if(a.disabled){return !1}else {d[0]+=Math.floor(b.getWidth()/2)-c[0];d[1]+=Math.floor(b.getHeight()/2)-c[1];a.slider.promoteThumb(a);return !0}},onDragStart:function(c){var a=this,b=a.slider;b.onDragStart(a,c);a.el.addCls('x-slider-thumb-drag');a.dragging=a.slider.dragging=!0;a.dragStartValue=a.value;b.fireEvent('dragstart',b,c,a)},onDrag:function(g){var c=this,b=c.slider,f=c.index,a=c.getValueFromTracker(),d,e;if(a!==undefined){if(c.constrain){d=b.thumbs[f+1];e=b.thumbs[f-1];if(e!==undefined&&a<=e.value){a=e.value}if(d!==undefined&&a>=d.value){a=d.value}}b.setValue(f,a,!1);b.fireEvent('drag',b,g,c)}},getValueFromTracker:function(){var c=this.slider,b=this.tracker.getXY(),a;b[0]+=this.pointerOffset[0];b[1]+=this.pointerOffset[1];a=c.getTrackpoint(b);if(a!==undefined){return c.reversePixelValue(a)}},onDragEnd:function(d){var a=this,b=a.slider,c=a.value;b.onDragEnd(a,d);a.el.removeCls('x-slider-thumb-drag');a.dragging=b.dragging=!1;b.fireEvent('dragend',b,d);if(a.dragStartValue!==c){b.fireEvent('changecomplete',b,c,a)}},destroy:function(){var a=this,b=this.anim;if(b){b.end()}a.el=a.tracker=a.anim=Ext.destroy(a.el,a.tracker);a.callParent()}},1,0,0,0,0,0,[Ext.slider,'Thumb'],0);Ext.cmd.derive('Ext.slider.Tip',Ext.tip.Tip,{minWidth:10,offsets:null,align:null,position:'',defaultVerticalPosition:'left',defaultHorizontalPosition:'top',isSliderTip:!0,init:function(d){var a=this,c,b;if(!a.position){a.position=d.vertical?a.defaultVerticalPosition:a.defaultHorizontalPosition}switch(a.position){case 'top':b=[0,-10];c='b-t?';break;case 'bottom':b=[0,10];c='t-b?';break;case 'left':b=[-10,0];c='r-l?';break;case 'right':b=[10,0];c='l-r?';}if(!a.align){a.align=c}if(!a.offsets){a.offsets=b}d.on({scope:a,dragstart:a.onSlide,drag:a.onSlide,dragend:a.hide,destroy:a.destroy})},onSlide:function(c,d,b){var a=this;a.show();a.update(a.getText(b));a.el.alignTo(b.el,a.align,a.offsets)},getText:function(a){return String(a.value)}},0,['slidertip'],['component','box','container','panel','tip','slidertip'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tip':!0,'slidertip':!0},['widget.slidertip'],0,[Ext.slider,'Tip'],0);Ext.cmd.derive('Ext.slider.Multi',Ext.form.field.Base,{alternateClassName:'Ext.slider.MultiSlider',vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,pageSize:10,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,useTips:!0,tipText:null,defaultBindProperty:'values',ariaRole:'slider',focusable:!0,needArrowKeys:!0,tabIndex:0,focusCls:'slider-focus',childEls:['endEl','innerEl'],fieldSubTpl:['<div id="{id}" data-ref="inputEl" {inputAttrTpl}',' class="','x-','slider {fieldCls} {vertical}','{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','>','<div id="{cmpId}-endEl" data-ref="endEl" class="x-slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="x-slider-inner" role="presentation">','{%this.renderThumbs(out, values)%}','</div>','</div>','</div>',{renderThumbs:function(h,f){var e=f.$comp,a=0,c=e.thumbs,g=c.length,d,b;for(;a<g;a++){d=c[a];b=d.getElConfig();b.id=e.id+'-thumb-'+a;Ext.DomHelper.generateMarkup(b,h)}},disableFormats:!0}],horizontalProp:'left',initValue:function(){var a=this,b=Ext.valueFrom,c=b(a.values,[b(a.value,b(a.minValue,0))]),d=0,e=c.length;a.originalValue=c;for(;d<e;d++){a.addThumb(a.normalizeValue(c[d]))}},initComponent:function(){var a=this,d,e,b,f,c;a.thumbs=[];a.keyIncrement=Math.max(a.increment,a.keyIncrement);a.extraFieldBodyCls='x-slider-ct-'+(a.vertical?'vert':'horz');Ext.form.field.Base.prototype.initComponent.call(this);if(a.useTips){if(Ext.isObject(a.useTips)){d=Ext.apply({},a.useTips)}else {d=a.tipText?{getText:a.tipText}:{}}c=a.plugins=a.plugins||[];f=c.length;for(b=0;b<f;b++){if(c[b].isSliderTip){e=!0;break}}if(!e){a.plugins.push(new Ext.slider.Tip(d))}}},addThumb:function(c){var a=this,b=new Ext.slider.Thumb({ownerCt:a,value:c,slider:a,index:a.thumbs.length,constrain:a.constrainThumbs,disabled:!!a.readOnly});a.thumbs.push(b);if(a.rendered){b.render()}return b},promoteThumb:function(c){var a=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),e=a.length,d=10000,b;if(a[0]!==c){Ext.Array.remove(a,c);a.unshift(c)}for(b=0;b<e;b++){a[b].el.setStyle('zIndex',d);d-=1000}},getSubTplData:function(d){var a=this,c,b;c=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,d),{$comp:a,vertical:a.vertical?'x-slider-vert':'x-slider-horz',minValue:a.minValue,maxValue:a.maxValue,value:a.value,tabIdx:a.tabIndex,childElCls:''});b=c.inputElAriaAttributes;if(b){b['aria-orientation']=a.vertical?'vertical':'horizontal';b['aria-valuemin']=a.minValue;b['aria-valuemax']=a.maxValue;b['aria-valuenow']=a.value}return c},onRender:function(){var c=this,d=c.thumbs,e=d.length,a=0,b;(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).apply(this,arguments);for(a=0;a<e;a++){b=d[a];b.el=c.el.getById(c.id+'-thumb-'+a);b.onRender()}},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(f){var b=this,g=b.vertical,d=b.innerEl,a,e,c;if(g){c='top';a=d.getHeight()}else {c=b.horizontalProp;a=d.getWidth()}f=b.transformTrackPoints(d.translatePoints(f));e=Ext.Number.constrain(f[c],0,a);return g?a-e:e},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(f){var a=this,b=!1,d=0,e=a.thumbs,g=e.length,c;if(a.disabled){return}for(;!b&&d<g;d++){b=b||f.target===e[d].el.dom}a.focus();if(a.clickToChange&&!b){c=a.getTrackpoint(f.getXY());if(c!==undefined){a.onClickChange(c)}}},onClickChange:function(c){var a=this,b,d;b=a.getNearest(c);if(!b.disabled){d=b.index;a.setValue(d,Ext.util.Format.round(a.reversePixelValue(c),a.decimalPrecision),undefined,!0)}},getNearest:function(i){var d=this,h=d.reversePixelValue(i),g=d.getRange()+5,a=null,j=d.thumbs,f=0,k=j.length,b,c,e;for(;f<k;f++){b=d.thumbs[f];c=b.value;e=Math.abs(c-h);if(Math.abs(e)<=g){if(a&&a.value==c&&c>h&&b.index>a.index){continue}a=b;g=e}}return a},onKeyDown:function(b){var a=this,e=a.ariaEl.dom,d,c;d=b.getKey();if(a.disabled||a.thumbs.length!==1){if(d!==b.TAB){b.preventDefault()}return}switch(d){case b.UP:case b.RIGHT:c=b.ctrlKey?a.maxValue:a.getValue(0)+a.keyIncrement;break;case b.DOWN:case b.LEFT:c=b.ctrlKey?a.minValue:a.getValue(0)-a.keyIncrement;break;case b.HOME:c=a.minValue;break;case b.END:c=a.maxValue;break;case b.PAGE_UP:c=a.getValue(0)+a.pageSize;break;case b.PAGE_DOWN:c=a.getValue(0)-a.pageSize;break;}if(c!==undefined){b.stopEvent();c=a.normalizeValue(c);a.setValue(0,c,undefined,!0);if(e){e.setAttribute('aria-valuenow',c)}}},normalizeValue:function(b){var a=this,c=a.zeroBasedSnapping?'snap':'snapInRange';b=Ext.Number[c](b,a.increment,a.minValue,a.maxValue);b=Ext.util.Format.round(b,a.decimalPrecision);b=Ext.Number.constrain(b,a.minValue,a.maxValue);return b},setMinValue:function(c){var a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom,f,b;a.minValue=c;for(b=0;b<g;++b){f=e[b];if(f.value<c){a.setValue(b,c,!1)}}if(d){d.setAttribute('aria-valuemin',c)}a.syncThumbs()},setMaxValue:function(c){var a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom,f,b;a.maxValue=c;for(b=0;b<g;++b){f=e[b];if(f.value>c){a.setValue(b,c,!1)}}if(d){d.setAttribute('aria-valuemax',c)}a.syncThumbs()},setValue:function(f,c,d,j){var a=this,k=a.thumbs,h=a.ariaEl.dom,b,i,e,g;if(Ext.isArray(f)){g=f;d=c;for(e=0,i=g.length;e<i;++e){b=k[e];if(b){a.setValue(e,g[e],d)}}return a}b=a.thumbs[f];c=a.normalizeValue(c);if(c!==b.value&&a.fireEvent('beforechange',a,c,b.value,b)!==!1){b.value=c;if(a.rendered){if(Ext.isDefined(d)){d=d===!1?!1:d}else {d=a.animate}b.move(a.calculateThumbPosition(c),d);if(f===0&&h){h.setAttribute('aria-valuenow',c)}a.fireEvent('change',a,c,b);a.checkDirty();if(j){a.fireEvent('changecomplete',a,c,b)}}}return a},calculateThumbPosition:function(d){var b=this,c=b.minValue,a=(d-c)/b.getRange()*100;if(isNaN(a)){a=0}return a},getRatio:function(){var a=this,d=a.innerEl,b=a.vertical?d.getHeight():d.getWidth(),c=a.getRange();return c===0?b:b/c},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(a){return this.minValue+a/this.getRatio()},reversePercentageValue:function(a){return this.minValue+this.getRange()*(a/100)},onDisable:function(){var a=this,d=0,e=a.thumbs,g=e.length,b,c,f;Ext.form.field.Base.prototype.onDisable.call(this);for(;d<g;d++){b=e[d];c=b.el;b.disable();if(Ext.isIE){f=c.getXY();c.hide();a.innerEl.addCls(a.disabledCls).dom.disabled=!0;if(!a.thumbHolder){a.thumbHolder=a.endEl.createChild({role:'presentation',cls:'x-slider-thumb '+a.disabledCls})}a.thumbHolder.show().setXY(f)}}},onEnable:function(){var a=this,c=0,d=a.thumbs,f=d.length,b,e;Ext.form.field.Base.prototype.onEnable.call(this);for(;c<f;c++){b=d[c];e=b.el;b.enable();if(Ext.isIE){a.innerEl.removeCls(a.disabledCls).dom.disabled=!1;if(a.thumbHolder){a.thumbHolder.hide()}e.show();a.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var b=this.thumbs,c=b.length,a=0;for(;a<c;a++){b[a].move(this.calculateThumbPosition(b[a].value))}}},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){var c=[],a=0,b=this.thumbs,d=b.length;for(;a<d;a++){c.push(b[a].value)}return c},getSubmitValue:function(){var a=this;return a.disabled||!a.submitValue?null:a.getValue()},reset:function(){var a=this,c=[].concat(a.originalValue),b=0,e=c.length,d;for(;b<e;b++){d=c[b];a.setValue(b,d)}a.clearInvalid();delete a.wasValid},setReadOnly:function(c){var d=this,b=d.thumbs,e=b.length,a=0;Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments);c=d.readOnly;for(;a<e;++a){if(c){b[a].disable()}else {b[a].enable()}}},beforeDestroy:function(){var d=this,b=d.thumbs,a=0,e=b.length,c;if(d.rendered){for(;a<e;a++){c=b[a];Ext.destroy(c)}}Ext.form.field.Base.prototype.beforeDestroy.call(this)}},0,['multislider'],['component','box','field','multislider'],{'component':!0,'box':!0,'field':!0,'multislider':!0},['widget.multislider'],0,[Ext.slider,'Multi',Ext.slider,'MultiSlider'],0);Ext.define('Ext.rtl.slider.Multi',{override:'Ext.slider.Multi',initComponent:function(){if(this.getInherited().rtl){this.horizontalProp='right'}(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this)},onDragStart:function(){arguments.callee.$previous.apply(this,arguments);this._rtlInnerWidth=this.innerEl.getWidth()},onDragEnd:function(){arguments.callee.$previous.apply(this,arguments);delete this._rtlInnerWidth},onKeyDown:function(a){var b;if(this.getInherited().rtl){b=a.getKey();if(b===a.RIGHT){a.keyCode=a.LEFT}else {if(b===a.LEFT){a.keyCode=a.RIGHT}}}return arguments.callee.$previous.call(this,a)},transformTrackPoints:function(a){var c,b;if(this.isOppositeRootDirection()){c=a.left;delete a.left;b=typeof this._rtlInnerWidth!=='undefined'?this._rtlInnerWidth:this.innerEl.getWidth();a.right=b-c;return a}else {return arguments.callee.$previous.apply(this,arguments)}}});Ext.cmd.derive('Ext.slider.Single',Ext.slider.Multi,{alternateClassName:['Ext.Slider','Ext.form.SliderField','Ext.slider.SingleSlider','Ext.slider.Slider'],defaultBindProperty:'value',initComponent:function(){if(this.publishOnComplete){this.valuePublishEvent='changecomplete'}Ext.slider.Multi.prototype.initComponent.call(this)},publishOnComplete:!0,getValue:function(){return Ext.slider.Multi.prototype.getValue.call(this,0)},setValue:function(d,c){var a=arguments,b=a.length;if(b===1||b<=3&&typeof a[1]!=='number'){a=Ext.toArray(a);a.unshift(0)}return Ext.slider.Multi.prototype.setValue.apply(this,a)},getNearest:function(){return this.thumbs[0]}},0,['slider','sliderfield'],['component','box','field','multislider','slider','sliderfield'],{'component':!0,'box':!0,'field':!0,'multislider':!0,'slider':!0,'sliderfield':!0},['widget.slider','widget.sliderfield'],0,[Ext.slider,'Single',Ext,'Slider',Ext.form,'SliderField',Ext.slider,'SingleSlider',Ext.slider,'Slider'],0);Ext.cmd.derive('Ext.state.LocalStorageProvider',Ext.state.Provider,{constructor:function(){var a=this;Ext.state.Provider.prototype.constructor.apply(this,arguments);a.store=a.getStorageObject();if(a.store){a.state=a.readLocalStorage()}else {a.state={}}},readLocalStorage:function(){var b=this.store,c={},d=b.getKeys(),e=d.length,a;while(e--){a=d[e];c[a]=this.decodeValue(b.getItem(a))}return c},set:function(c,b){var a=this;a.clear(c);if(b!=null){a.store.setItem(c,a.encodeValue(b));Ext.state.Provider.prototype.set.apply(this,arguments)}},clear:function(a){this.store.removeItem(a);Ext.state.Provider.prototype.clear.apply(this,arguments)},getStorageObject:function(){var b=this.prefix,a=b,c=a.length-1;if(a.charAt(c)==='-'){a=a.substring(0,c)}return new Ext.util.LocalStorage({id:a,prefix:b})}},1,0,0,0,['state.localstorage'],0,[Ext.state,'LocalStorageProvider'],0);Ext.cmd.derive('Ext.toolbar.Fill',Ext.Component,{alternateClassName:'Ext.Toolbar.Fill',ariaRole:'presentation',isFill:!0,flex:1},0,['tbfill'],['component','box','tbfill'],{'component':!0,'box':!0,'tbfill':!0},['widget.tbfill'],0,[Ext.toolbar,'Fill',Ext.Toolbar,'Fill'],0);Ext.cmd.derive('Ext.toolbar.Spacer',Ext.Component,{alternateClassName:'Ext.Toolbar.Spacer',baseCls:'x-toolbar-spacer',ariaRole:'presentation'},0,['tbspacer'],['component','box','tbspacer'],{'component':!0,'box':!0,'tbspacer':!0},['widget.tbspacer'],0,[Ext.toolbar,'Spacer',Ext.Toolbar,'Spacer'],0);Ext.cmd.derive('Ext.view.DragZone',Ext.dd.DragZone,{containerScroll:!1,constructor:function(e){var a=this,c,b,d;Ext.apply(a,e);if(!a.ddGroup){a.ddGroup='view-dd-zone-'+a.view.id}c=a.view;b=c.ownerCt;if(b){d=b.getTargetEl().dom}else {d=c.el.dom.parentNode}Ext.dd.DragZone.prototype.constructor.call(this,d);a.ddel=document.createElement('div');a.ddel.className='x-grid-dd-wrap'},init:function(e,d,c){var a=this,b={itemmousedown:a.onItemMouseDown,scope:a};if(Ext.supports.touchScroll){b['itemlongpress']=a.onItemMouseDown}a.initTarget(e,d,c);a.view.mon(a.view,b)},onValidDrop:function(a,c,b){Ext.dd.DragZone.prototype.onValidDrop.call(this,a,c,b);a.el.focus()},onItemMouseDown:function(f,d,e,c,a){var b;if(a.pointerType==='touch'&&a.type!=='longpress'||a.position&&a.position.isEqual(a.view.actionPosition)){return}if(!this.isPreventDrag(a,d,e,c)){b=f.getNavigationModel();if(a.position){b.setPosition(a.position)}else {b.setPosition(c)}this.handleMouseDown(a)}},isPreventDrag:function(d,a,c,b){return !1},getDragData:function(c){var a=this.view,b=c.getTarget(a.getItemSelector());if(b){return {copy:a.copy||a.allowCopy&&c.ctrlKey,event:c,view:a,ddel:this.ddel,item:b,records:a.getSelectionModel().getSelection(),fromPosition:Ext.fly(b).getXY()}}},onInitDrag:function(f,g){var a=this,c=a.dragData,e=c.view,b=e.getSelectionModel(),d=e.getRecord(c.item);if(!b.isSelected(d)){b.selectWithEvent(d,a.DDMInstance.mousedownEvent)}c.records=b.getSelection();Ext.fly(a.ddel).setHtml(a.getDragText());a.proxy.update(a.ddel);a.onStartDrag(f,g);return !0},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,a===1?'':'s')},getRepairXY:function(b,a){return a?a.fromPosition:!1}},1,0,0,0,0,0,[Ext.view,'DragZone'],0);Ext.cmd.derive('Ext.tree.ViewDragZone',Ext.view.DragZone,{isPreventDrag:function(b,a){return a.get('allowDrag')===!1||!!b.getTarget(this.view.expanderSelector)},getDragText:function(){var c=this.dragData.records,e=c.length,a=c[0].get(this.displayField),d='s',f=/\{\d+\}/,b=this.dragText;if(f.test(b)&&e===1&&a){return a}else {if(!a){d=''}}return Ext.String.format(b,e,d)},afterRepair:function(){var b=this,c=b.view,f=c.selectedItemCls,g=b.dragData.records,d,h=g.length,e=Ext.fly,a;if(Ext.enableFx&&b.repairHighlight){for(d=0;d<h;d++){a=c.getNode(g[d]);e(a.firstChild).highlight(b.repairHighlightColor,{listeners:{beforeanimate:function(){if(c.isSelected(a)){e(a).removeCls(f)}},afteranimate:function(){if(c.isSelected(a)){e(a).addCls(f)}}}})}}b.dragging=!1}},0,0,0,0,0,0,[Ext.tree,'ViewDragZone'],0);Ext.cmd.derive('Ext.tree.ViewDropZone',Ext.view.DropZone,{allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:'x-tree-ddindicator',expandNode:function(a){var b=this.view;this.expandProcId=!1;if(!a.isLeaf()&&!a.isExpanded()){b.expand(a);this.expandProcId=!1}},queueExpand:function(a){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=!1}},getPosition:function(i,g){var h=this.view,b=h.getRecord(g),c=i.getY(),e=b.isLeaf(),f=!1,a=Ext.fly(g).getRegion(),d;if(b.isRoot()){return 'append'}if(this.appendOnly){return e?!1:'append'}if(!this.allowParentInserts){f=b.hasChildNodes()&&b.isExpanded()}d=(a.bottom-a.top)/(e?2:3);if(c>=a.top&&c<a.top+d){return 'before'}else {if(!f&&(e||c>=a.bottom-d&&c<=a.bottom)){return 'after'}else {return 'append'}}},isValidDropPoint:function(g,c,l,k,f){if(!g||!f.item){return !1}var h=this.view,a=h.getRecord(g),b=f.records,i=b.length,j=b.length,d,e;if(!(a&&c&&i)){return !1}for(d=0;d<j;d++){e=b[d];if(e.isNode&&e.contains(a)){return !1}}if(c==='append'&&a.get('allowDrop')===!1){return !1}else {if(c!=='append'&&a.parentNode.get('allowDrop')===!1){return !1}}if(Ext.Array.contains(b,a)){return !1}return h.fireEvent('nodedragover',a,c,f,k)!==!1},onNodeOver:function(b,h,j,i){var e=this.getPosition(j,b),d=this.dropNotAllowed,g=this.view,a=g.getRecord(b),f=this.getIndicator(),c=0;this.cancelExpand();if(e==='append'&&!this.expandProcId&&!Ext.Array.contains(i.records,a)&&!a.isLeaf()&&!a.isExpanded()){this.queueExpand(a)}if(this.isValidDropPoint(b,e,h,j,i)){this.valid=!0;this.currentPosition=e;this.overRecord=a;f.setWidth(Ext.fly(b).getWidth());c=Ext.fly(b).getY()-Ext.fly(g.el).getY()-1;if(g.touchScroll===2){c+=g.getScrollY()}if(e==='before'){d=a.isFirst()?'x-tree-drop-ok-above':'x-tree-drop-ok-between';f.showAt(0,c);h.proxy.show()}else {if(e==='after'){d=a.isLast()?'x-tree-drop-ok-below':'x-tree-drop-ok-between';c+=Ext.fly(b).getHeight();f.showAt(0,c);h.proxy.show()}else {d='x-tree-drop-ok-append';f.hide()}}}else {this.valid=!1}this.currentCls=d;return d},onNodeOut:function(d,b,c,a){this.valid=!1;this.getIndicator().hide()},onContainerOver:function(c,a,b){return this.allowContainerDrops?this.dropAllowed:a.getTarget('.'+this.indicatorCls)?this.currentCls:this.dropNotAllowed},onContainerDrop:function(a,c,b){if(this.allowContainerDrops){this.valid=!0;this.currentPosition='append';this.overRecord=this.view.store.getRoot();this.onNodeDrop(this.overRecord,a,c,b)}},notifyOut:function(){Ext.view.DropZone.prototype.notifyOut.apply(this,arguments);this.cancelExpand()},handleNodeDrop:function(d,b,o){var j=this,h=j.view,g=b?b.parentNode:h.panel.getRootNode(),m=h.store.getModel(),l,c,i,a,f,e,n,k;if(d.copy){l=d.records;d.records=[];for(c=0,i=l.length;c<i;c++){a=l[c];if(a.isNode){d.records.push(a.copy())}else {d.records.push(new m(Ext.apply({},a.data)))}}}j.cancelExpand();if(o==='before'){f=g.insertBefore;e=[null,b];b=g}else {if(o==='after'){if(b.nextSibling){f=g.insertBefore;e=[null,b.nextSibling]}else {f=g.appendChild;e=[null]}b=g}else {if(!(b.isExpanded()||b.isLoading())){n=!0}f=b.appendChild;e=[null]}}k=function(){var k,g;Ext.suspendLayouts();for(c=0,i=d.records.length;c<i;c++){a=d.records[c];if(!a.isNode){if(a.isModel){a=new m(a.data,a.getId())}else {a=new m(a)}d.records[c]=a}e[0]=a;f.apply(b,e)}if(j.sortOnDrop){b.sort(b.getOwnerTree().store.getSorters().sortFn)}Ext.resumeLayouts(!0);a=d.records[0];h.ownerGrid.ensureVisible(a);h.getNavigationModel().setPosition(a);if(Ext.enableFx&&j.dropHighlight){k=j.dropHighlightColor;for(c=0;c<i;c++){g=h.getNode(d.records[c]);if(g){Ext.fly(g).highlight(k)}}}};if(n){b.expand(!1,k)}else {if(b.isLoading()){b.on({expand:k,delay:1,single:!0})}else {k()}}}},0,0,0,0,0,0,[Ext.tree,'ViewDropZone'],0);Ext.cmd.derive('Gnt.column.WBS',Ext.grid.column.Column,{width:40,align:'left',sortable:!1,constructor:function(a){a=a||{};this.text=a.text||this.L('text');Ext.grid.column.Column.prototype.constructor.apply(this,arguments);this.tdCls=(this.tdCls||'')+' gnt-wbs-cell'},renderer:function(b,c,a){return a.getWBSCode()}},1,['ganttcolumn.wbs','wbscolumn'],['component','box','container','headercontainer','gridcolumn','wbscolumn','ganttcolumn.wbs'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'wbscolumn':!0,'ganttcolumn.wbs':!0},['widget.ganttcolumn.wbs','widget.wbscolumn'],[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[Gnt.column,'WBS'],0);Ext.define('CGA.column.WBS',{override:'Gnt.column.WBS',constructor:function(a){a=a||{};a.text='WBS';(arguments.callee.$previous||Ext.grid.column.Column.prototype.constructor).apply(this,arguments)}});Ext.cmd.derive('Gnt.column.DragDrop',Ext.grid.column.Column,{width:35,tdCls:'sch-gantt-column-dragdrop',cls:'sch-gantt-column-dragdrop-header',ignoreInAddMenu:!0,ignoreExport:!0,ignoreInExport:!0,sortable:!1,resizable:!1,hideable:!1,menuDisabled:!0,draggable:!1,align:'center',processEvent:function(a){return a!=='click'}},0,['dragdropcolumn','ganttcolumn.dragdrop'],['component','box','container','headercontainer','gridcolumn','dragdropcolumn','ganttcolumn.dragdrop'],{'component':!0,'box':!0,'container':!0,'headercontainer':!0,'gridcolumn':!0,'dragdropcolumn':!0,'ganttcolumn.dragdrop':!0},['widget.dragdropcolumn','widget.ganttcolumn.dragdrop'],0,[Gnt.column,'DragDrop'],0);Ext.cmd.derive('Sch.data.ResourceTreeStore',Ext.data.TreeStore,{model:'Sch.model.Resource',storeId:'resources',constructor:function(){Ext.data.TreeStore.prototype.constructor.apply(this,arguments);this.initTreeFiltering();if(this.getModel()!==Sch.model.Resource&&!(this.getModel().prototype instanceof Sch.model.Resource)){throw 'The model for the ResourceTreeStore must subclass Sch.model.Resource'}},setRootNode:function(){this.isSettingRoot=!0;var a=Ext.data.TreeStore.prototype.setRootNode.apply(this,arguments);this.isSettingRoot=!1;return a}},1,0,0,0,['store.resourcetreestore'],[[Sch.data.mixin.UniversalModelGetter.prototype.mixinId||Sch.data.mixin.UniversalModelGetter.$className,Sch.data.mixin.UniversalModelGetter],[Sch.data.mixin.CacheHintHelper.prototype.mixinId||Sch.data.mixin.CacheHintHelper.$className,Sch.data.mixin.CacheHintHelper],[Sch.data.mixin.ResourceStore.prototype.mixinId||Sch.data.mixin.ResourceStore.$className,Sch.data.mixin.ResourceStore],[Sch.data.mixin.FilterableTreeStore.prototype.mixinId||Sch.data.mixin.FilterableTreeStore.$className,Sch.data.mixin.FilterableTreeStore],[Robo.data.Store.prototype.mixinId||Robo.data.Store.$className,Robo.data.Store]],[Sch.data,'ResourceTreeStore'],0);Ext.cmd.derive('Gnt.data.undoredo.action.taskstore.Update',Robo.action.tree.Update,{getSerializedSegments:function(a){return a?Ext.Array.map(a,function(b){return Ext.clone(b.data)}):a},processSavingOldValue:function(c,a){var d=this,b;if(c==a.segmentsField){b=a.getTaskStore().getOriginalSegmentsState(a)}else {b=Robo.action.tree.Update.prototype.processSavingOldValue.call(this,c,a)}return b},processSavingNewValue:function(c,a){var d=this,b;if(c===a.segmentsField){b=a.buildSegmentsSnapshot()}else {b=Robo.action.tree.Update.prototype.processSavingNewValue.call(this,c,a)}return b},processRestoringValue:function(a,c,b){var d=this;if(c==b.segmentsField){b.rollbackSegmentsToSnapshot(a);a=d.self.CUSTOMLY_PROCESSED}else {a=Robo.action.tree.Update.prototype.processRestoringValue.call(this,a,c,b)}return a}},0,0,0,0,0,0,[Gnt.data.undoredo.action.taskstore,'Update'],0);Ext.cmd.derive('Gnt.model.TaskSegment',Gnt.model.Task,{task:null,customizableFields:[{name:'StartOffset',type:'int',defaultValue:null},{name:'EndOffset',type:'int',defaultValue:null}],startOffsetField:'StartOffset',endOffsetField:'EndOffset',taskNotifyingSuspended:0,respectNeighbours:0,constructor:function(a){a=a||{};a.leaf=!0;if(!a.task){throw "'task' has to be specified"}this.task=a.task;Gnt.model.Task.prototype.constructor.apply(this,arguments);Ext.override(this,this.overridables);if(this.getTask().normalized&&this.getTaskStore(!0)&&!this.normalized){this.normalize()}},overridables:{set:function(){var a=this.getTask();if(a&&!this.__editCounter&&!this.taskNotifyingSuspended){a.onSegmentEditBegin(this)}this.callParent(arguments);if(a&&!this.__editCounter&&!this.taskNotifyingSuspended){a.onSegmentEditEnd(this)}}},serialize:function(){var a={};if(this.getId()){a[this.idProperty]=this.getId()}a[this.phantomIdField]=this.getPhantomId();a[this.startDateField]=this.getStartDate();a[this.endDateField]=this.getEndDate();a[this.durationField]=this.getDuration();a[this.durationUnitField]=this.getDurationUnit();a[this.clsField]=this.getCls();return a},setStartOffset:function(a){var c=this.getTask().getProjectCalendar();var b=c.convertMSDurationToUnit(this.getEndOffset()-a,this.getDurationUnit());this.beginEdit();this.set(this.startOffsetField,a);this.set(this.durationField,b);this.endEdit()},setEndOffset:function(a){var c=this.getTask().getProjectCalendar();var b=c.convertMSDurationToUnit(a-this.getStartOffset(),this.getDurationUnit());this.beginEdit();this.set(this.endOffsetField,a);this.set(this.durationField,b);this.endEdit()},setStartEndOffset:function(a,b){var d=this.getTask().getProjectCalendar();var c=d.convertMSDurationToUnit(b-a,this.getDurationUnit());this.beginEdit();this.set(this.startOffsetField,a);this.set(this.endOffsetField,b);this.set(this.durationField,c);this.endEdit()},normalize:function(){Gnt.model.Task.prototype.normalize.apply(this,arguments);var c=this.getStartDate();if(!Ext.isNumber(this.getStartOffset())&&c){var d=this.getTask();var a=this.calculateDuration(d.getStartDate(),c,'MILLI');var b=a+this.getDuration('MILLI');var f=d.getProjectCalendar();var e=f.convertMSDurationToUnit(b-a,this.getDurationUnit());this.data[this.startOffsetField]=a;this.data[this.endOffsetField]=b;this.data[this.durationField]=e}},updateOffsetsByDates:function(){if(!this.getTaskStore(!0)){return}if(this.updatingOffsets||this.updatingDates){return}this.updatingOffsets=!0;var a=this.calculateDuration(this.getTask().getStartDate(),this.getStartDate(),'MILLI');this.setStartEndOffset(a,a+this.getDuration('MILLI'));this.updatingOffsets=!1},updateDatesByOffsets:function(b){b=b||{};if(this.updatingDates||this.updatingOffsets){return}var f=b.isForward!==!1,d=b.useAbsoluteOffset!==!1,g=b.startDate,h=b.endDate,e=this.getTaskStore(!0);if(!e){return}this.updatingDates=!0;var c,a;if(f){a=this.getPrevSegment();if(a&&!d){c=this.skipWorkingTime(a.getEndDate(),this.getStartOffset()-a.getEndOffset())}else {c=this.skipWorkingTime(g||this.getTask().getStartDate(),this.getStartOffset())}}else {a=this.getNextSegment();if(a&&!d){c=this.skipWorkingTime(a.getStartDate(),a.getStartOffset()-this.getEndOffset()+this.getDuration('MILLI'),!1)}else {c=this.skipWorkingTime(h||this.getTask().getEndDate(),this.getDuration('MILLI'),!1)}}this.setStartDateWithoutPropagation(c,!0,e.skipWeekendsDuringDragDrop);this.updatingDates=!1},getPrevSegment:function(){var a=this.task.getSegments();return a[Ext.Array.indexOf(a,this)-1]},getNextSegment:function(){var a=this.task.getSegments();return a[Ext.Array.indexOf(a,this)+1]},buildSnapshot:function(){return [this,Ext.apply({},this.data)]},readSnapshot:function(a){if(a){Ext.apply(this.data,a[1]);return this}return a},enableRespectNeighbours:function(){this.respectNeighbours++},disableRespectNeighbours:function(){this.respectNeighbours--},suspendTaskNotifying:function(){this.taskNotifyingSuspended++},resumeTaskNotifying:function(){this.taskNotifyingSuspended--},setStartDate:function(b,a){if(a){this.enableRespectNeighbours()}Gnt.model.Task.prototype.setStartDate.apply(this,arguments);if(a){this.disableRespectNeighbours()}},setStartDateWithoutPropagation:function(){this.beginEdit();Gnt.model.Task.prototype.setStartDateWithoutPropagation.apply(this,arguments);this.updateOffsetsByDates();if(!this.inShifting&&this.respectNeighbours&&this.getNextSegment()){var a=this.getNextSegment();var b=this.getEndOffset()-a.getStartOffset();if(a&&b>0){a.suspendTaskNotifying();a.enableRespectNeighbours();a.shiftWithoutPropagation(b);a.resumeTaskNotifying();a.disableRespectNeighbours()}}this.endEdit();return !0},shiftWithoutPropagation:function(c){var a=this;if(!c){return}a.beginEdit();a.inShifting=!0;a.setStartEndOffset(a.getStartOffset()+c,a.getEndOffset()+c);a.updateDatesByOffsets();var b;if(a.respectNeighbours&&(b=c>0?a.getNextSegment():a.getPrevSegment())){b.suspendTaskNotifying();b.enableRespectNeighbours();b.shiftWithoutPropagation(c);b.resumeTaskNotifying();b.disableRespectNeighbours()}a.inShifting=!1;a.endEdit();return !0},setEndDateWithoutPropagation:function(){this.beginEdit();Gnt.model.Task.prototype.setEndDateWithoutPropagation.apply(this,arguments);this.updateOffsetsByDates();this.endEdit();return !0},setStartEndDateWithoutPropagation:function(){this.beginEdit();Gnt.model.Task.prototype.setStartEndDateWithoutPropagation.apply(this,arguments);this.updateOffsetsByDates();this.endEdit();return !0},setDurationWithoutPropagation:function(){this.beginEdit();Gnt.model.Task.prototype.setDurationWithoutPropagation.apply(this,arguments);this.updateOffsetsByDates();this.endEdit();return !0},getTask:function(){return this.task},beginEdit:function(){var a=this.getTask();if(a&&!this.__editCounter&&!this.taskNotifyingSuspended){a.onSegmentEditBegin(this)}Gnt.model.Task.prototype.beginEdit.apply(this,arguments)},endEdit:function(){var a=this.previous,b=this.getTask();Gnt.model.Task.prototype.endEdit.apply(this,arguments);if(b&&!this.__editCounter&&!this.taskNotifyingSuspended){if(this.startDateField in a||this.endDateField in a||this.startOffsetField in a||this.endOffsetField in a||this.durationField in a){b.onSegmentsChanged(this,a)}b.onSegmentEditEnd(this)}},setSegments:Ext.emptyFn,getSegments:Ext.emptyFn,callTask:function(d){var c=this.task;var b=this.callTask.caller;var a=b&&c[b.$name];if(a){return a.apply(c,d)}},getSchedulingMode:function(){return 'Normal'},getCalendar:function(){return this.callTask(arguments)},getOwnCalendar:function(){return this.callTask(arguments)},getProjectCalendar:function(){return this.callTask(arguments)},getDependencyStore:function(){return this.callTask(arguments)},getResourceStore:function(){return this.callTask(arguments)},getAssignmentStore:function(){return this.callTask(arguments)},getTaskStore:function(){return this.callTask(arguments)},forEachAvailabilityInterval:function(a){a.segments=a.segments||!1;return this.callTask(arguments)},propagateChanges:function(){return this.callTask(arguments)},rejectSegmentsProjection:function(){return this.callTask(arguments)},commitSegmentsProjection:function(){return this.callTask(arguments)},getAssignments:function(){return this.callTask(arguments)},getAssignmentFor:function(){return this.callTask(arguments)},isAssignedTo:function(){return this.callTask(arguments)},getResources:function(){return this.callTask(arguments)}},1,0,0,0,0,0,[Gnt.model,'TaskSegment'],0);Ext.cmd.derive('Sch.patches.TablePanel',Sch.util.Patch,{target:'Ext.panel.Table',applyFn:function(){var a={};if(Ext.getVersion().equals('6.0.1.250')){a.ensureVisible=function(b,a){if(a&&a.column&&this.getVisibleColumnManager().indexOf(a.column)===-1){return}this.callParent(arguments)}}Ext.ClassManager.get(this.target).override(a)}},0,0,0,0,0,0,[Sch.patches,'TablePanel'],0);Ext.cmd.derive('Gnt.patches.CheckColumn',Sch.util.Patch,{target:'Ext.grid.column.Check',minVersion:'6.2.0',overrides:{constructor:function(a){this.callParent([a||{}])}}},0,0,0,0,0,0,[Gnt.patches,'CheckColumn'],0);Ext.cmd.derive('Gnt.patches.LabelEditor',Sch.util.Patch,{target:'Gnt.feature.LabelEditor',minVersion:'6.0.0',maxVersion:'6.0.1',ieOnly:!0,overrides:{constructor:function(){this.callParent(arguments);if(this.rendered){this.getEl().setVisibilityMode(Ext.dom.Element.OFFSETS)}else {this.on('render',function(){this.getEl().setVisibilityMode(Ext.dom.Element.OFFSETS)},this,{single:!0})}}}},0,0,0,0,0,0,[Gnt.patches,'LabelEditor'],0);Ext.cmd.derive('Sch.data.util.AssignmentStoreEventResourcesCache',Sch.util.Cache,{assignmentStore:null,assignmentStoreDetacher:null,eventStoreDetacher:null,resourceStoreDetacher:null,constructor:function(b){var a=this,c=b.getEventStore(),d=c&&c.getResourceStore();Sch.util.Cache.prototype.constructor.call(this);function onAssignmentAdd(f,e){var d=a.assignmentStore.getEventStore(),c=d&&d.getResourceStore();Ext.Array.each(e,function(d){var g=c&&c.getModelById(d.getResourceId());if(g){a.add(d.getEventId(),g)}else {a.clear(d.getEventId())}})}function onAssignmentRemove(f,e){var c=a.assignmentStore.getEventStore(),d=c&&c.getResourceStore();Ext.Array.each(e,function(c){var g=d.getModelById(c.getResourceId());if(g){a.remove(c.getEventId(),g)}else {a.clear(c.getEventId())}})}function onAssignmentUpdate(n,c,m){var i=c.resourceIdField,g=c.previous&&i in c.previous,f=g&&c.previous[i],k=c.eventIdField,h=c.previous&&k in c.previous,e=h&&c.previous[k],l=a.assignmentStore.getEventStore(),j=l&&l.getResourceStore(),d;if(g||h){f=g?f:c.getResourceId();e=h?e:c.getEventId();d=j.getModelById(f);if(d){a.remove(e,d)}else {a.clear(e)}d=j.getModelById(c.getResourceId());if(d){a.add(c.getEventId(),d)}else {a.clear(c.getEventId())}}}function onAssignmentStoreClearOrReset(c){a.clear()}function onAssignmentStoreEventStoreChange(d,c){a.clear();attachToEventStore(c);attachToResourceStore(c&&c.getResourceStore())}function onEventIdChanged(e,f,d,c){a.move(d,c)}function onEventRemove(d,c){Ext.Array.each(c,function(e){a.clear(e)})}function onEventStoreClearOrReset(){a.clear()}function onEventStoreResourceStoreChange(d,c){a.clear();attachToResourceStore(c)}function onResourceRemove(d,c){Ext.Array.each(c,function(e){a.uncache(e)})}function onResourceStoreClearOrReset(){a.clear()}function attachToEventStore(c){Ext.destroy(a.eventStoreDetacher);a.eventStoreDetacher=c&&c.on({idchanged:onEventIdChanged,remove:onEventRemove,clear:onEventStoreClearOrReset,cacheresethint:onEventStoreClearOrReset,rootchange:onEventStoreClearOrReset,resourcestorechange:onEventStoreResourceStoreChange,priority:100,destroyable:!0})}function attachToResourceStore(c){Ext.destory(a.resourceStoreDetacher);a.resourceStoreDetacher=c&&c.on({remove:onResourceRemove,clear:onResourceStoreClearOrReset,cacheresethint:onResourceStoreClearOrReset,rootchange:onResourceStoreClearOrReset,priority:100,destroyable:!0})}a.assignmentStoreDetacher=b.on({add:onAssignmentAdd,remove:onAssignmentRemove,update:onAssignmentUpdate,clear:onAssignmentStoreClearOrReset,cacheresethint:onAssignmentStoreClearOrReset,priority:100,destroyable:!0});a.assignmentStore=b},destroy:function(){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher','eventStoreDetacher','resourceStoreDetacher');a.assignmentStore=null},get:function(b,a){var c=this;a=a||function(){return c.assignmentStore.mapAssignmentsForEvent(b,function mapper(c){return c.getResource()},function filter(c){return !!c})};return Sch.util.Cache.prototype.get.call(this,b,a)}},1,0,0,0,0,0,[Sch.data.util,'AssignmentStoreEventResourcesCache'],0);Ext.cmd.derive('Sch.data.util.AssignmentStoreResourceEventsCache',Sch.util.Cache,{assignmentStore:null,assignmentStoreDetacher:null,eventStoreDetacher:null,resourceStoreDetacher:null,constructor:function(b){var a=this,c=b.getEventStore(),d=c&&c.getResourceStore();Sch.util.Cache.prototype.constructor.call(this);function onAssignmentAdd(e,d){var c=a.assignmentStore.getEventStore();Ext.Array.each(d,function(f){var g=c&&c.getModelById(f.getEventId());if(g){a.add(f.getResourceId(),g)}else {a.clear(f.getResourceId())}})}function onAssignmentRemove(e,d){var c=a.assignmentStore.getEventStore();Ext.Array.each(d,function(f){var g=c&&c.getModelById(f.getEventId());if(g){a.remove(f.getResourceId(),g)}else {a.clear(f.getResourceId())}})}function onAssignmentUpdate(m,c,l){var j=c.resourceIdField,g=c.previous&&j in c.previous,e=g&&c.previous[j],k=c.eventIdField,i=c.previous&&k in c.previous,h=i&&c.previous[k],f=a.assignmentStore.getEventStore(),d;if(g||i){e=g?e:c.getResourceId();h=i?h:c.getEventId();d=f&&f.getModelById(h);if(d){a.remove(e,d)}else {a.clear(e)}d=f&&f.getModelById(c.getEventId());if(d){a.add(c.getResourceId(),d)}else {a.clear(c.getResourceId())}}}function onAssignmentStoreClearOrReset(c){a.clear()}function onAssignmentStoreEventStoreChange(d,c){a.clear();attachToEventStore(c);attachToResourceStore(c&&c.getResourceStore())}function onEventRemove(d,c){Ext.Array.each(c,function(e){a.uncache(e)})}function onEventStoreClearOrReset(){a.clear()}function onEventStoreResourceStoreChange(d,c){a.clear();attachToResourceStore(c)}function onResourceIdChanged(e,f,d,c){a.move(d,c)}function onResourceRemove(d,c){Ext.Array.each(c,function(e){a.clear(e)})}function onResourceStoreClearOrReset(){a.clear()}function attachToEventStore(c){Ext.destroy(a.eventStoreDetacher);a.eventStoreDetacher=c&&c.on({remove:onEventRemove,cacheresethint:onEventStoreClearOrReset,clear:onEventStoreClearOrReset,rootchange:onEventStoreClearOrReset,resourcestorechange:onEventStoreResourceStoreChange,priority:100,destroyable:!0})}function attachToResourceStore(c){Ext.destroy(a.resourceStoreDetacher);a.resourceStoreDetacher=c&&c.on({idchanged:onResourceIdChanged,remove:onResourceRemove,cacheresethint:onResourceStoreClearOrReset,clear:onResourceStoreClearOrReset,rootchange:onResourceStoreClearOrReset,priority:100,destroyable:!0})}a.assignmentStoreDetacher=b.on({add:onAssignmentAdd,remove:onAssignmentRemove,update:onAssignmentUpdate,cacheresethint:onAssignmentStoreClearOrReset,clear:onAssignmentStoreClearOrReset,eventstorechange:onAssignmentStoreEventStoreChange,priority:100,destroyable:!0});attachToEventStore(c);attachToResourceStore(d);a.assignmentStore=b},destroy:function(){var a=this;Ext.destroyMembers(a,'assignmentStoreDetacher','eventStoreDetacher','resourceStoreDetacher');a.assignmentStore=null},get:function(b,a){var c=this;a=a||function(){return c.assignmentStore.mapAssignmentsForResource(b,function mapper(c){return c.getEvent()},function filter(c){return !!c})};return Sch.util.Cache.prototype.get.call(this,b,a)}},1,0,0,0,0,0,[Sch.data.util,'AssignmentStoreResourceEventsCache'],0);Ext.cmd.derive('Sch.patches.BufferedRenderer',Sch.util.Patch,{target:'Ext.grid.plugin.BufferedRenderer',minVersion:'6.0.2',overrides:{onRangeFetched:function(h,e,j,A,s){var a=this,c=a.view,y=c.el,b=c.all,i=0,l=a.variableRowHeight,f=c.lockingPartner&&!s&&!a.doNotMirror&&c.lockingPartner.bufferedRenderer,r,o,v,p,g,d,n,q,x,u,k,m,t,w;if(c.destroyed){return}if(h){if(!s){a.scrollTop=a.view.getScrollY()}}else {h=a.store.getRange(e,j);if(!h){return}}r=Ext.Element.getActiveElement();v=y.contains(r);o=e*a.rowHeight;if(e<b.startIndex&&j>b.endIndex){t=b.startIndex-e;c.clearViewEl(!0);g=c.doAdd(h,e);c.fireEvent('itemadd',h,e,g);for(p=0;p<t;p++){i-=g[p].offsetHeight}d=a.bodyTop+i}else {q=a.teleported||e>b.endIndex||j<b.startIndex;if(q){c.clearViewEl(!0);a.teleported=!1}if(!b.getCount()){g=c.doAdd(h,e);c.fireEvent('itemadd',h,e,g);d=o;if(q&&l){w=a.scrollTop<a.position?a.leadingBufferZone:a.trailingBufferZone;var z=Math.min(b.startIndex+w-1,b.endIndex);d=Math.max(a.scrollTop-b.item(z,!0).offsetTop,0)}}else {if(j>b.endIndex){m=Math.max(e-b.startIndex,0);if(l){i=b.item(b.startIndex+m,!0).offsetTop}g=b.scroll(Ext.Array.slice(h,b.endIndex+1-e),1,m);if(l){d=a.bodyTop+i}else {d=o}}else {m=Math.max(b.endIndex-j,0);x=b.startIndex;g=b.scroll(Ext.Array.slice(h,0,b.startIndex-e),-1,m);if(l){d=a.bodyTop-b.item(x,!0).offsetTop;if(!b.startIndex){if(d){c.setScrollY(a.position=a.scrollTop-=d);d=0}}else {if(d<0){i=b.startIndex*a.rowHeight;c.setScrollY(a.position=a.scrollTop+=i);d=a.bodyTop+i}}}else {d=o}}}a.position=a.scrollTop}if(v&&!y.contains(r)){k=c.actionableMode?c.actionPosition:c.lastFocused;if(k&&k.column){c.onFocusLeave({});if(k.column.focusable){n=k.column}else {n=k.column.el.findTabbableElements()[0]}if(!n){n=c.el}n.focus()}}d=Math.max(Math.floor(d),0);if(c.positionBody){a.setBodyTop(d)}if(g&&f&&!f.disabled){f.scrollTop=f.position=a.scrollTop;if(f.view.ownerCt.isVisible()){u=f.onRangeFetched(h,e,j,A,!0);if(c.ownerGrid.syncRowHeight||f.variableRowHeight!==l){a.syncRowHeights(g,u)}}if(f.bodyTop!==d){f.setBodyTop(d)}f.view.setScrollY(a.scrollTop)}if(c.getVisibleColumnManager().getColumns().length&&b.getCount()!==Math.min(a.store.getCount(),a.viewSize)){Ext.raise('rendered block refreshed at '+b.getCount()+' rows while BufferedRenderer view size is '+a.viewSize)}return g}}},0,0,0,0,0,0,[Sch.patches,'BufferedRenderer'],0);Ext.cmd.derive('Sch.patches.BufferedRenderer_6_2_1',Sch.util.Patch,{target:'Ext.grid.plugin.BufferedRenderer',minVersion:'6.2.1',applyFn:function(){if(Ext.isIE11){Ext.define(null,{override:'Ext.grid.plugin.BufferedRenderer',getFirstVisibleRowIndex:function(b,e,c,f){var a=this,m=a.view,g=m.all,l=g.elements,k=a.viewClientHeight,d,i,j=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(!arguments.length){b=g.startIndex;e=g.endIndex;c=a.scrollTop;f=c+k;if(j>f||j+a.bodyHeight<c){a.teleported=!0;return Math.floor(a.scrollTop/a.rowHeight)}d=b+Math.min(a.numFromEdge+(a.lastScrollDirection===-1?a.leadingBufferZone:a.trailingBufferZone),Math.floor((e-b)/2))}else {if(b===e){return e}d=b+Math.floor((e-b)/2)}var h=l[d];i=j+h.offsetTop;if(i+h.offsetHeight<=c&&h.offsetHeight){return a.getFirstVisibleRowIndex(d+1,e,c,f)}if(i<=c){return d}else {if(d!==b){return a.getFirstVisibleRowIndex(b,d-1,c,f)}}}return Math.floor(a.scrollTop/a.rowHeight)}})}}},0,0,0,0,0,0,[Sch.patches,'BufferedRenderer_6_2_1'],0);Ext.cmd.derive('Sch.patches.CellContext',Sch.util.Patch,{target:'Ext.grid.CellContext',minVersion:'6.0.0',maxVersion:'6.2.0',applyFn:function(){var a={setAll:function(a,e,c,f,b){var d=this;if(b&&c==-1&&a!==d.view){a=d.view;c=a.getVisibleColumnManager().indexOf(b)}return this.callParent(arguments)}};if(Ext.getVersion().isGreaterThanOrEqual('6.0.1')){a.setPosition=function(b,a){b=b||0;a=a||0;return this.callParent(arguments)}}Ext.override(Ext.grid.CellContext,a)}},0,0,0,0,0,0,[Sch.patches,'CellContext'],0);Ext.cmd.derive('Sch.patches.CellContext_6_2_0',Sch.util.Patch,{minVersion:'6.2.0',maxVersion:'6.2.1',target:'Ext.grid.CellContext',overrides:{setView:function(a){this.view=a;this.refresh()}}},0,0,0,0,0,0,[Sch.patches,'CellContext_6_2_0'],0);Ext.cmd.derive('Sch.patches.DomScroller',Sch.util.Patch,{target:'Ext.scroll.DomScroller',maxVersion:'6.2.0',overrides:{privates:{convertX:function(a){if(a==null){return null}return this.callParent(arguments)}}}},0,0,0,0,0,0,[Sch.patches,'DomScroller'],0);Ext.cmd.derive('Sch.patches.DragZone',Sch.util.Patch,{target:'Ext.dd.DragZone',minVersion:'6.2.0',overrides:{unreg:function(){try{this.callParent(arguments)}catch(b){}}}},0,0,0,0,0,0,[Sch.patches,'DragZone'],0);Ext.cmd.derive('Sch.patches.Explorer',Sch.util.Patch,{target:['Ext.util.CSS'],minVersion:'6.0.0',maxVersion:'6.0.1',applyFn:function(){if(Ext.isIE9m){Ext.util.CSS.createStyleSheet('.x-column-header-trigger { z-index: 10; }')}}},0,0,0,0,0,0,[Sch.patches,'Explorer'],0);Ext.cmd.derive('Sch.patches.LockingScroller',Sch.util.Patch,{target:'Ext.scroll.Scroller',minVersion:'6.2.0',overrides:{scrollTo:function(){if(this.getNormalScroller&&!this.getNormalScroller()){if(Sch.panel.TimelineGridPanel&&this.component instanceof Sch.panel.TimelineGridPanel||Sch.panel.TimelineTreePanel&&this.component instanceof Sch.panel.TimelineTreePanel){return}}this.callParent(arguments)}}},0,0,0,0,0,0,[Sch.patches,'LockingScroller'],0);Ext.cmd.derive('Sch.patches.RowSynchronizer',Sch.util.Patch,{target:'Ext.grid.locking.RowSynchronizer',minVersion:'6.0.0',maxVersion:'6.0.1',overrides:{finish:function(a){if(!a){return}return this.callParent(arguments)}}},0,0,0,0,0,0,[Sch.patches,'RowSynchronizer'],0);Ext.cmd.derive('Sch.patches.TablePanel_6_2_1',Sch.util.Patch,{target:'Ext.panel.Table',minVersion:'6.2.1',overrides:{privates:{initFocusableElement:function(){},doEnsureVisible:function(a,d){if(this.lockable){return this.ensureLockedVisible(a,d)}if(typeof a!=='number'&&!a.isEntity){a=this.store.getById(a)}var b=this,c=b.getView(),f=c.getNode(a),o=b.ownerGrid.lockable,i,k,j,h,m,l,g,p,e,n;if(d){i=d.callback;k=d.scope;j=d.animate;h=d.highlight;m=d.select;l=d.focus;e=d.column}if(b.deferredEnsureVisible){b.deferredEnsureVisible.destroy()}if(!c.componentLayoutCounter){b.deferredEnsureVisible=c.on({resize:b.doEnsureVisible,args:Ext.Array.slice(arguments),scope:b,single:!0,destroyable:!0});return}if(typeof e==='number'){e=b.ownerGrid.getVisibleColumnManager().getColumns()[e]}if(f){g=o?b.ownerGrid.getScrollable():c.getScrollable();if(g){if(e){n=Ext.fly(f).selectNode(e.getCellSelector())}if(o&&e){g.scrollIntoView(f,!1);c.getScrollable().scrollIntoView(n||f,!0,j,h)}else {g.scrollIntoView(n||f,!!e,j,h)}}if(!a.isEntity){a=c.getRecord(f)}if(m){c.getSelectionModel().select(a)}if(l){c.getNavigationModel().setPosition(a,0)}Ext.callback(i,k||b,[!0,a,f])}else {if(c.bufferedRenderer){c.bufferedRenderer.scrollTo(a,{animate:j,highlight:h,select:m,focus:l,column:e,callback:function(f,e,c){Ext.callback(i,k||b,[!0,e,c])}})}else {Ext.callback(i,k||b,[!1,null])}}}}}},0,0,0,0,0,0,[Sch.patches,'TablePanel_6_2_1'],0);Ext.cmd.derive('Sch.patches.TableView',Sch.util.Patch,{target:'Ext.view.Table',minVersion:'6.0.1',maxVersion:'6.0.1.9999',overrides:{suspendCellEditing:function(c){var b=c,a=b.activeEditor;if(a&&a.editing){b.suspendedEditor=a;b.suspendEvents();a.suspendEvents();a.cancelEdit(!0);a.resumeEvents();b.resumeEvents()}},resumeCellEditing:function(d,e){var b=d,a=b.activeEditor=b.suspendedEditor,c;if(a){b.suspendEvents();a.suspendEvents();c=b.activateCell(e,!0,!0);a.field&&a.field.focus(!1,!0);a.resumeEvents();b.resumeEvents()}return c},suspendActionableMode:function(){var d=this,b=d.grid.actionables,e=b.length,a;for(a=0;a<e;a++){var c=b[a];if(Ext.grid.plugin.CellEditing&&c instanceof Ext.grid.plugin.CellEditing){d.suspendCellEditing(c)}}},resumeActionableMode:function(f){var a=this,d=a.grid.actionables,g=d.length,b,c;a.toggleChildrenTabbability(!1);for(b=0;b<g;b++){var e=d[b];if(!c&&Ext.grid.plugin.CellEditing&&e instanceof Ext.grid.plugin.CellEditing){c=a.resumeCellEditing(e,f)}}if(!c){a.activateCell(f)}},saveFocusState:function(){var b=this,i=b.dataSource,c=b.actionableMode,e=b.getNavigationModel(),a=c?b.actionPosition:e.getPosition(!0),d=Ext.Element.getActiveElement(!0),h=a&&a.view===b&&a.getCell(),g,f;if(h&&h.contains(d)){a=a.clone();d.suspendFocusEvents();if(c){b.suspendActionableMode()}else {e.setPosition()}d.resumeFocusEvents();return function(){if(i.getCount()){g=Math.min(a.rowIdx,b.all.getCount()-1);f=Math.min(a.colIdx,b.getVisibleColumnManager().getColumns().length-1);a=(new Ext.grid.CellContext(b)).setPosition(i.contains(a.record)?a.record:g,f);if(c){b.resumeActionableMode(a)}else {e.setPosition(a,null,null,null,!0)}}else {a.column.focus()}}}return Ext.emptyFn},activateCell:function(){return !0},onFocusEnter:function(a){if(!Ext.fly(a.target).hasCls('sch-event')){this.callParent(arguments)}}}},0,0,0,0,0,0,[Sch.patches,'TableView'],0);Ext.cmd.derive('Sch.patches.TableView2',Sch.util.Patch,{target:'Ext.view.Table',minVersion:'6.0.2',maxVersion:'6.2.0',overrides:{privates:{setActionableMode:function(f,b){var a=this,i=a.getNavigationModel(),c,e=a.grid.actionables,l=e.length,d,k,j,h=!1,g;if(a.actionableMode===f){if(!f||b.isEqual(a.actionPosition)){return !1}}if(f){if(b&&(b.view===a||b.view===(g=a.lockingPartner)&&g.actionableMode)){h=a.activateCell(b)}return h}else {c=Ext.fly(Ext.Element.getActiveElement());if(a.el.contains(c)){k=a.actionPosition&&a.actionPosition.record||a.getRecord(c);j=a.getHeaderByCell(c.findParent(a.getCellSelector()));if(!b){b=(new Ext.grid.CellContext(a)).setPosition(k||0,j||0)}a._leavingActionableMode=!0;b.getCell().focus();a._leavingActionableMode=!1;c=Ext.fly(Ext.Element.getActiveElement());if(!(a.el.contains(c)&&c.is(a.getCellSelector()))){b=null}}for(d=0;d<l;d++){if(e[d].deactivate){e[d].deactivate()}}if(a.actionRow){a.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1})}if(a.destroyed){return !1}a.actionableMode=a.ownerGrid.actionableMode=!1;a.actionPosition=i.actionPosition=a.actionRow=null;if(b){i.setPosition(b)}}}},saveFocusState:function(){var b=this,i=b.dataSource,c=b.actionableMode,e=b.getNavigationModel(),a=c?b.actionPosition:e.getPosition(!0),d=Ext.Element.getActiveElement(!0),h=a&&a.view===b&&a.getCell(),g,f;if(h&&h.contains(d)){a=a.clone();d.suspendFocusEvents();if(c){b.suspendActionableMode()}else {e.setPosition()}d.resumeFocusEvents();return function(){if(i.getCount()){g=Math.min(a.rowIdx,b.all.getCount()-1);f=Math.min(a.colIdx,b.getVisibleColumnManager().getColumns().length-1);a=(new Ext.grid.CellContext(b)).setPosition(i.contains(a.record)?a.record:g,f);if(c&&!b._leavingActionableMode){b.resumeActionableMode(a)}else {e.setPosition(a,null,null,null,!0)}}else {a.column.focus()}}}return Ext.emptyFn}}},0,0,0,0,0,0,[Sch.patches,'TableView2'],0);Ext.cmd.derive('Sch.patches.TableView_6_0_2',Sch.util.Patch,{target:'Ext.view.Table',minVersion:'6.0.2',maxVersion:'6.0.3',overrides:{handleUpdate:function(J,d,y,B,K,I){y=y||Ext.data.Model.EDIT;var a=this,D=a.store.indexOf(d),n=a.rowTpl,x=a.markDirty,k=a.dirtyCls,v=y!==Ext.data.Model.EDIT,f=[],o=a.variableRowHeight,p=0,G=a.ownerCt,g=a.cellFly||(a.self.prototype.cellFly=new Ext.dom.Fly()),c,E,j,q,H,z,l,u,m,b,r,i,t,h,F,e,C,s,A,w;if(a.viewReady){c=a.getNodeByRecord(d);if(c){if(d.isCollapsedPlaceholder){Ext.fly(c).syncContent(a.createRowElement(d,a.indexOfRow(d)));return}u=a.overItemCls;m=a.ownerCt.getVisibleColumnManager().getColumns();if(I){f=m;p=1}else {for(i=0,r=m.length;i<r;i++){b=m[i];if(b.preventUpdate){h=Ext.fly(c).down(b.getCellSelector(),!0);if(h&&!v&&x){g.attach(h);if(d.isModified(b.dataIndex)){g.addCls(k)}else {g.removeCls(k)}}}else {t=a.shouldUpdateCell(d,b,B);if(t){p=p|t;f[f.length]=b;o=o||b.variableRowHeight}}}}a.fireEvent('beforeitemupdate',d,D,c,f);if(a.getRowClass||!a.getRowFromItem(c)||p&1||c.tBodies[0].childNodes.length>1){A=c._extData;j=a.createRowElement(d,a.indexOfRow(d),f);if(Ext.fly(c,'_internal').hasCls(u)){Ext.fly(j).addCls(u)}if(Ext.isIE9m&&c.mergeAttributes){c.mergeAttributes(j,!0)}else {q=j.attributes;H=q.length;for(l=0;l<H;l++){z=q[l].name;if(z!=='id'){c.setAttribute(z,q[l].value)}}}if(A){A.isSynchronized=!1}if(m.length&&(E=a.getRow(c))){a.updateColumns(E,Ext.fly(j).down(a.rowSelector,!0),f)}while(n){if(n.syncContent){if(n.syncContent(c,j,B?f:null)===!1){break}}n=n.nextTpl}}else {for(i=0,r=f.length;i<r;i++){b=f[i];F=b.dataIndex;e=d.get(F);h=Ext.fly(c).down(b.getCellSelector(),!0);g.attach(h);if(!v&&x){if(d.isModified(b.dataIndex)){g.addCls(k)}else {g.removeCls(k)}}C=b.usingDefaultRenderer;s=C?b:b.scope;if(b.updater){Ext.callback(b.updater,s,[h,e,d,a,a.dataSource],0,b,G)}else {if(b.renderer){e=Ext.callback(b.renderer,s,[e,null,d,0,0,a.dataSource,a],0,b,G)}w=e==null||e==='';e=w?b.emptyCellText:e;if(b.producesHTML||w){g.down(a.innerSelector,!0).innerHTML=e}else {g.down(a.innerSelector,!0).childNodes[0].data=e}}if(a.highlightClass){Ext.fly(h).addCls(a.highlightClass);if(!a.changedCells){a.self.prototype.changedCells=[];a.prototype.clearChangedTask=new Ext.util.DelayedTask(a.clearChangedCells,a.prototype);a.clearChangedTask.delay(a.unhighlightDelay)}a.changedCells.push({cell:h,cls:a.highlightClass,expires:Ext.Date.now()+1000})}}}if(v&&x&&!d.dirty){Ext.fly(c,'_internal').select('.'+k).removeCls(k)}if(o){Ext.suspendLayouts()}a.fireEvent('itemupdate',d,D,c);if(o){a.ownerGrid.updateLayout();Ext.resumeLayouts(!0)}}}}}},0,0,0,0,0,0,[Sch.patches,'TableView_6_0_2'],0);Ext.cmd.derive('Sch.patches.TableView_6_2_0',Sch.util.Patch,{minVersion:'6.2.0',maxVersion:'6.2.1',target:'Ext.view.Table',overrides:{getDefaultFocusPosition:function(c){var b=this,f=b.dataSource,a=b.lastFocused,g=(new Ext.grid.CellContext(b)).setPosition(0,0),d,e;if(c){if(c.isColumn&&c.cellFocusable!==!1){if(!a){a=g}a.setColumn(c);a.setView(c.getView())}else {if(c.isTableView&&c.lastFocused){a=(new Ext.grid.CellContext(b)).setPosition(c.lastFocused.record,0)}}}if(a){e=b.getScrollable();if(!f.contains(a.record)||e&&!e.isInView(a.getRow()).y){a.setRow(f.getAt(Math.min(a.rowIdx,f.getCount()-1)))}}else {a=g;d=b.el.down(b.getCellSelector()+'[tabIndex="-1"]');if(d){a.setPosition(b.getRecord(d),b.getHeaderByCell(d))}else {a=null}}return a}}},0,0,0,0,0,0,[Sch.patches,'TableView_6_2_0'],0);Ext.cmd.derive('Sch.patches.TimelineGridView',Sch.util.Patch,{target:'Sch.view.TimelineGridView',minVersion:'6.0.1',overrides:{initComponent:function(){this.callParent(arguments);if(this.rtl){this.headerCt.on('afterlayout',function(a){a.scrollTo(this.getScrollX())},this)}}}},0,0,0,0,0,0,[Sch.patches,'TimelineGridView'],0);Ext.cmd.derive('Sch.patches.TimelineGridViewScroll6_2',Sch.util.Patch,{target:'Sch.view.TimelineGridView',minVersion:'6.2.0',overrides:{scrollVerticallyTo:function(b,a){this.up('timelinegrid,timelinetree').getScrollable().scrollTo(null,b,a)},getVerticalScroll:function(){var a=this.up('timelinegrid,timelinetree').getScrollable();if(a.getNormalScroller){if(a.getNormalScroller()){return a.getPosition().y}else {return 0}}else {return a.getPosition().y}}}},0,0,0,0,0,0,[Sch.patches,'TimelineGridViewScroll6_2'],0);Ext.cmd.derive('Sch.patches.TimelinePanel',Sch.util.Patch,{target:'Sch.mixin.TimelinePanel',minVersion:'6.2.0',applyFn:function(){Sch.panel.TimelineGridPanel&&Sch.panel.TimelineGridPanel.override({hideHeaders:!1});Sch.panel.TimelineTreePanel&&Sch.panel.TimelineTreePanel.override({hideHeaders:!1})}},0,0,0,0,0,0,[Sch.patches,'TimelinePanel'],0);(function(h){if(!h){return}var e=function(){var a=h.document.createTextNode('');if(a.ownerDocument!==h.document&&typeof h.wrap==='function'&&h.wrap(a)===a){return h.wrap(h)}return h}(),l=e.document,N=e.DocumentFragment||blank,J=e.SVGElement||blank,O=e.SVGSVGElement||blank,M=e.SVGElementInstance||blank,P=e.HTMLElement||e.Element,p=e.PointerEvent||e.MSPointerEvent,i,u=Math.hypot||function(a,b){return Math.sqrt(a*a+b*b)},v={},t=[],f=[],d=[],D=!1,j={},g={base:{accept:null,actionChecker:null,styleCursor:!1,preventDefault:'auto',origin:{x:0,y:0},deltaSource:'page',allowFrom:null,ignoreFrom:null,_context:l,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:'xy'},drop:{enabled:!1,accept:null,overlap:'pointer'},resize:{enabled:!1,manualStart:!1,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:'xy',margin:NaN,edges:null,invert:'none'},gesture:{manualStart:!1,enabled:!1,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:Infinity,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},c={interaction:null,i:null,x:0,y:0,scroll:function(){var b=c.interaction.target.options[c.interaction.prepared.name].autoScroll,a=b.container||getWindow(c.interaction.element),f=(new Date()).getTime(),j=(f-c.prevTimeX)/1000,k=(f-c.prevTimeY)/1000,g,i,d,e;if(b.velocity){g=b.velocity.x;i=b.velocity.y}else {g=i=b.speed}d=g*j;e=i*k;if(d>=1||e>=1){if(isWindow(a)){a.scrollBy(c.x*d,c.y*e)}else {if(a){a.scrollLeft+=c.x*d;a.scrollTop+=c.y*e}}if(d>=1){c.prevTimeX=f}if(e>=1){c.prevTimeY=f}}if(c.isScrolling){o(c.i);c.i=n(c.scroll)}},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(a){c.isScrolling=!0;o(c.i);c.interaction=a;c.prevTimeX=(new Date()).getTime();c.prevTimeY=(new Date()).getTime();c.i=n(c.scroll)},stop:function(){c.isScrolling=!1;o(c.i)}},s='ontouchstart' in e||e.DocumentTouch&&l instanceof e.DocumentTouch,w=!!p,x=s||w?20:10,B=1,I=0,y=Infinity,z=l.all&&!e.atob?{drag:'move',resizex:'e-resize',resizey:'s-resize',resizexy:'se-resize',resizetop:'n-resize',resizeleft:'w-resize',resizebottom:'s-resize',resizeright:'e-resize',resizetopleft:'se-resize',resizebottomright:'se-resize',resizetopright:'ne-resize',resizebottomleft:'ne-resize',gesture:''}:{drag:'move',resizex:'ew-resize',resizey:'ns-resize',resizexy:'nwse-resize',resizetop:'ns-resize',resizeleft:'ew-resize',resizebottom:'ns-resize',resizeright:'ew-resize',resizetopleft:'nwse-resize',resizebottomright:'nwse-resize',resizetopright:'nesw-resize',resizebottomleft:'nesw-resize',gesture:''},k={drag:!0,resize:!0,gesture:!0},K='onmousewheel' in l?'mousewheel':'wheel',q=['dragstart','dragmove','draginertiastart','dragend','dragenter','dragleave','dropactivate','dropdeactivate','dropmove','drop','resizestart','resizemove','resizeinertiastart','resizeend','gesturestart','gesturemove','gestureinertiastart','gestureend','down','move','up','cancel','tap','doubletap','hold'],m={},H=navigator.appName=='Opera'&&s&&navigator.userAgent.match('Presto'),Q=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),A=typeof Element==='undefined'?'msMatchesSelector':'matches' in Element.prototype?'matches':'webkitMatchesSelector' in Element.prototype?'webkitMatchesSelector':'mozMatchesSelector' in Element.prototype?'mozMatchesSelector':'oMatchesSelector' in Element.prototype?'oMatchesSelector':'msMatchesSelector',r,n=h.requestAnimationFrame,o=h.cancelAnimationFrame,a=function(){var j=navigator.appName.indexOf('Internet Explorer')!==-1&&navigator.appVersion.indexOf('MSIE 9')!==-1,a=j||'attachEvent' in e&&!('addEventListener' in e),f=a?'attachEvent':'addEventListener',i=a?'detachEvent':'removeEventListener',g=a?'on':'',c=[],d=[],b=[];function add(i,l,k,p){var n=indexOf(c,i),e=d[n];if(!e){e={events:{},typeCount:0};n=c.push(i)-1;d.push(e);b.push(a?{supplied:[],wrapped:[],useCount:[]}:null)}if(!e.events[l]){e.events[l]=[];e.typeCount++}if(!contains(e.events[l],k)){var o;if(a){var j=b[n],m=indexOf(j.supplied,k);var q=j.wrapped[m]||function(a){if(!a.immediatePropagationStopped){a.target=a.srcElement;a.currentTarget=i;a.preventDefault=a.preventDefault||preventDef;a.stopPropagation=a.stopPropagation||stopProp;a.stopImmediatePropagation=a.stopImmediatePropagation||stopImmProp;if(/mouse|click/.test(a.type)){a.pageX=a.clientX+getWindow(i).document.documentElement.scrollLeft;a.pageY=a.clientY+getWindow(i).document.documentElement.scrollTop}k(a)}};o=i[f](g+l,q,Boolean(p));if(m===-1){j.supplied.push(k);j.wrapped.push(q);j.useCount.push(1)}else {j.useCount[m]++}}else {o=i[f](l,k,p||!1)}e.events[l].push(k);return o}}function remove(o,f,n,p){var k,m=indexOf(c,o),e=d[m],j,l,q=n;if(!e||!e.events){return}if(a){j=b[m];l=indexOf(j.supplied,n);q=j.wrapped[l]}if(f==='all'){for(f in e.events){if(e.events.hasOwnProperty(f)){remove(o,f,'all')}}return}if(e.events[f]){var r=e.events[f].length;if(n==='all'){for(k=0;k<r;k++){remove(o,f,e.events[f][k],Boolean(p))}return}else {for(k=0;k<r;k++){if(e.events[f][k]===n){o[i](g+f,q,p||!1);e.events[f].splice(k,1);if(a&&j){j.useCount[l]--;if(j.useCount[l]===0){j.supplied.splice(l,1);j.wrapped.splice(l,1);j.useCount.splice(l,1)}}break}}}if(e.events[f]&&e.events[f].length===0){e.events[f]=null;e.typeCount--}}if(!e.typeCount){d.splice(m,1);c.splice(m,1);b.splice(m,1)}}function preventDef(){this.returnValue=!1}function stopProp(){this.cancelBubble=!0}function stopImmProp(){this.cancelBubble=!0;this.immediatePropagationStopped=!0}return {add:add,remove:remove,useAttachEvent:a,_elements:c,_targets:d,_attachedListeners:b}}();function blank(){}function isElement(a){if(!a||typeof a!=='object'){return !1}var b=getWindow(a)||e;return /object|function/.test(typeof b.Element)?a instanceof b.Element:a.nodeType===1&&typeof a.nodeName==='string'}function isWindow(a){return a===e||!!(a&&a.Window)&&a instanceof a.Window}function isDocFrag(a){return !!a&&a instanceof N}function isArray(a){return isObject(a)&&typeof a.length!==undefined&&isFunction(a.splice)}function isObject(a){return !!a&&typeof a==='object'}function isFunction(a){return typeof a==='function'}function isNumber(a){return typeof a==='number'}function isBool(a){return typeof a==='boolean'}function isString(a){return typeof a==='string'}function trySelector(a){if(!isString(a)){return !1}l.querySelector(a);return !0}function extend(b,a){for(var c in a){b[c]=a[c]}return b}var C={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};function pointerExtend(e,c){for(var a in c){var b=!1;for(var d in C){if(a.indexOf(d)===0&&C[d].test(a)){b=!0;break}}if(!b){e[a]=c[a]}}return e}function copyCoords(a,b){a.page=a.page||{};a.page.x=b.page.x;a.page.y=b.page.y;a.client=a.client||{};a.client.x=b.client.x;a.client.y=b.client.y;a.timeStamp=b.timeStamp}function setEventXY(a,b,c){var d=b.length>1?pointerAverage(b):b[0];getPageXY(d,v,c);a.page.x=v.x;a.page.y=v.y;getClientXY(d,v,c);a.client.x=v.x;a.client.y=v.y;a.timeStamp=(new Date()).getTime()}function setEventDeltas(a,c,d){a.page.x=d.page.x-c.page.x;a.page.y=d.page.y-c.page.y;a.client.x=d.client.x-c.client.x;a.client.y=d.client.y-c.client.y;a.timeStamp=(new Date()).getTime()-c.timeStamp;var b=Math.max(a.timeStamp/1000,0.001);a.page.speed=u(a.page.x,a.page.y)/b;a.page.vx=a.page.x/b;a.page.vy=a.page.y/b;a.client.speed=u(a.client.x,a.page.y)/b;a.client.vx=a.client.x/b;a.client.vy=a.client.y/b}function isNativePointer(a){return a instanceof e.Event||s&&e.Touch&&a instanceof e.Touch}function getXY(b,c,a){a=a||{};if(c){b=b||'page';a.x=c[b+'X'];a.y=c[b+'Y']}else {}return a}function getPageXY(b,a){a=a||{};if(H&&isNativePointer(b)){getXY('screen',b,a);a.x+=e.scrollX;a.y+=e.scrollY}else {getXY('page',b,a)}return a}function getClientXY(b,a){a=a||{};if(H&&isNativePointer(b)){getXY('screen',b,a)}else {getXY('client',b,a)}return a}function getScrollXY(a){a=a||e;return {x:a.scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop}}function getPointerId(a){return isNumber(a.pointerId)?a.pointerId:a.identifier}function getActualElement(a){return a instanceof M?a.correspondingUseElement:a}function getWindow(a){if(isWindow(a)){return a}var b=a.ownerDocument||a;return b.defaultView||b.parentWindow||e}function getElementClientRect(b){var a=b instanceof J?b.getBoundingClientRect():b.getClientRects()[0];return a&&{left:a.left,right:a.right,top:a.top,bottom:a.bottom,width:a.width||a.right-a.left,height:a.height||a.bottom-a.top}}function getElementRect(c){var a=getElementClientRect(c);if(!Q&&a){var b=getScrollXY(getWindow(c));a.left+=b.x;a.right+=b.x;a.top+=b.y;a.bottom+=b.y}return a}function getTouchPair(a){var b=[];if(isArray(a)){b[0]=a[0];b[1]=a[1]}else {if(a.type==='touchend'){if(a.touches.length===1){b[0]=a.touches[0];b[1]=a.changedTouches[0]}else {if(a.touches.length===0){b[0]=a.changedTouches[0];b[1]=a.changedTouches[1]}}}else {b[0]=a.touches[0];b[1]=a.touches[1]}}return b}function pointerAverage(c){var a={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};var b;for(var d=0;d<c.length;d++){for(b in a){a[b]+=c[d][b]}}for(b in a){a[b]/=c.length}return a}function touchBBox(b){if(!b.length&&!(b.touches&&b.touches.length>1)){return}var a=getTouchPair(b),c=Math.min(a[0].pageX,a[1].pageX),d=Math.min(a[0].pageY,a[1].pageY),e=Math.max(a[0].pageX,a[1].pageX),f=Math.max(a[0].pageY,a[1].pageY);return {x:c,y:d,left:c,top:d,width:e-c,height:f-d}}function touchDistance(e,a){a=a||g.deltaSource;var c=a+'X',d=a+'Y',b=getTouchPair(e);var f=b[0][c]-b[1][c],i=b[0][d]-b[1][d];return u(f,i)}function touchAngle(j,e,b){b=b||g.deltaSource;var f=b+'X',i=b+'Y',d=getTouchPair(j),l=d[0][f]-d[1][f],m=d[0][i]-d[1][i],a=180*Math.atan(m/l)/Math.PI;if(isNumber(e)){var k=a-e,c=k%360;if(c>315){a-=360+a/360|0*360}else {if(c>135){a-=180+a/360|0*360}else {if(c<-315){a+=360+a/360|0*360}else {if(c<-135){a+=180+a/360|0*360}}}}}return a}function getOriginXY(b,c){var a=b?b.options.origin:g.origin;if(a==='parent'){a=parentElement(c)}else {if(a==='self'){a=b.getRect(c)}else {if(trySelector(a)){a=closest(c,a)||{x:0,y:0}}}}if(isFunction(a)){a=a(b&&c)}if(isElement(a)){a=getElementRect(a)}a.x='x' in a?a.x:a.left;a.y='y' in a?a.y:a.top;return a}function _getQBezierValue(a,c,d,e){var b=1-a;return b*b*c+2*b*a*d+a*a*e}function getQuadraticCurvePoint(b,c,f,g,d,e,a){return {x:_getQBezierValue(a,b,f,d),y:_getQBezierValue(a,c,g,e)}}function easeOutQuad(a,b,c,d){a/=d;return -c*a*(a-2)+b}function nodeContains(b,a){while(a){if(a===b){return !0}a=a.parentNode}return !1}function closest(c,b){var a=parentElement(c);while(isElement(a)){if(matchesSelector(a,b)){return a}a=parentElement(a)}return null}function parentElement(b){var a=b.parentNode;if(isDocFrag(a)){while((a=a.host)&&isDocFrag(a)){}return a}return a}function inContext(a,b){return a._context===b.ownerDocument||nodeContains(a._context,b)}function testIgnore(d,c,b){var a=d.options.ignoreFrom;if(!a||!isElement(b)){return !1}if(isString(a)){return matchesUpTo(b,a,c)}else {if(isElement(a)){return nodeContains(a,b)}}return !1}function testAllow(d,c,b){var a=d.options.allowFrom;if(!a){return !0}if(!isElement(b)){return !1}if(isString(a)){return matchesUpTo(b,a,c)}else {if(isElement(a)){return nodeContains(a,b)}}return !1}function checkAxis(c,a){if(!a){return !1}var b=a.options.drag.axis;return c==='xy'||b==='xy'||b===c}function checkSnap(c,a){var b=c.options;if(/^resize/.test(a)){a='resize'}return b[a].snap&&b[a].snap.enabled}function checkRestrict(c,a){var b=c.options;if(/^resize/.test(a)){a='resize'}return b[a].restrict&&b[a].restrict.enabled}function checkAutoScroll(c,a){var b=c.options;if(/^resize/.test(a)){a='resize'}return b[a].autoScroll&&b[a].autoScroll.enabled}function withinInteractionLimit(g,n,b){var k=g.options,m=k[b.name].max,l=k[b.name].maxPerElement,e=0,j=0,f=0;for(var c=0,p=d.length;c<p;c++){var a=d[c],i=a.prepared.name,o=a.interacting();if(!o){continue}e++;if(e>=y){return !1}if(a.target!==g){continue}j+=i===b.name|0;if(j>=m){return !1}if(a.element===n){f++;if(i!==b.name||f>=l){return !1}}}return y>0}function indexOfDeepestElement(k){var a,c=k[0],j=c?0:-1,b,i=[],f=[],g,e,d;for(e=1;e<k.length;e++){a=k[e];if(!a||a===c){continue}if(!c){c=a;j=e;continue}if(a.parentNode===a.ownerDocument){continue}else {if(c.parentNode===a.ownerDocument){c=a;j=e;continue}}if(!i.length){b=c;while(b.parentNode&&b.parentNode!==b.ownerDocument){i.unshift(b);b=b.parentNode}}if(c instanceof P&&a instanceof J&&!(a instanceof O)){if(a===c.parentNode){continue}b=a.ownerSVGElement}else {b=a}f=[];while(b.parentNode!==b.ownerDocument){f.unshift(b);b=b.parentNode}d=0;while(f[d]&&f[d]===i[d]){d++}var l=[f[d-1],f[d],i[d]];g=l[0].lastChild;while(g){if(g===l[1]){c=a;j=e;i=[];break}else {if(g===l[2]){break}}g=g.previousSibling}}return j}function Interaction(){this.target=null;this.element=null;this.dropTarget=null;this.dropElement=null;this.prevDropTarget=null;this.prevDropElement=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(isFunction(Function.prototype.bind)){this.boundInertiaFrame=this.inertiaFrame.bind(this);this.boundSmoothEndFrame=this.smoothEndFrame.bind(this)}else {var a=this;this.boundInertiaFrame=function(){return a.inertiaFrame()};this.boundSmoothEndFrame=function(){return a.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this._eventTarget=null;this._curEventTarget=null;this.prevEvent=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1};this.restrictStatus.snap=this.snapStatus;this.pointerIsDown=!1;this.pointerWasMoved=!1;this.gesturing=!1;this.dragging=!1;this.resizing=!1;this.resizeAxes='xy';this.mouse=!1;d.push(this)}Interaction.prototype={getPageXY:function(a,b){return getPageXY(a,b,this)},getClientXY:function(a,b){return getClientXY(a,b,this)},setEventXY:function(a,b){return setEventXY(a,b,this)},pointerOver:function(e,j,c){if(this.prepared.name||!this.mouse){return}var l=[],k=[],m=this.element;this.addPointer(e);if(this.target&&(testIgnore(this.target,this.element,c)||!testAllow(this.target,this.element,c))){this.target=null;this.element=null;this.matches=[];this.matchElements=[]}var d=f.get(c),g=d&&!testIgnore(d,c,c)&&testAllow(d,c,c)&&validateAction(d.getAction(e,j,this,c),d);if(g&&!withinInteractionLimit(d,c,g)){g=null}function pushCurMatches(a,b){if(a&&inContext(a,c)&&!testIgnore(a,c,c)&&testAllow(a,c,c)&&matchesSelector(c,b)){l.push(a);k.push(c)}}if(g){this.target=d;this.element=c;this.matches=[];this.matchElements=[]}else {f.forEachSelector(pushCurMatches);if(this.validateSelector(e,j,l,k)){this.matches=l;this.matchElements=k;this.pointerHover(e,j,this.matches,this.matchElements);a.add(c,p?i.move:'mousemove',b.pointerHover)}else {if(this.target){if(nodeContains(m,c)){this.pointerHover(e,j,this.matches,this.matchElements);a.add(this.element,p?i.move:'mousemove',b.pointerHover)}else {this.target=null;this.element=null;this.matches=[];this.matchElements=[]}}}}},pointerHover:function(e,c,i,g,d,f){var a=this.target;if(!this.prepared.name&&this.mouse){var b;this.setEventXY(this.curCoords,[e]);if(d){b=this.validateSelector(e,c,d,f)}else {if(a){b=validateAction(a.getAction(this.pointers[0],c,this,this.element),this.target)}}if(a&&a.options.styleCursor){if(b){a._doc.documentElement.style.cursor=getActionCursor(b)}else {a._doc.documentElement.style.cursor=''}}}else {if(this.prepared.name){this.checkAndPreventDefault(c,a,this.element)}}},pointerOut:function(d,e,c){if(this.prepared.name){return}if(!f.get(c)){a.remove(c,p?i.move:'mousemove',b.pointerHover)}if(this.target&&this.target.options.styleCursor&&!this.interacting()){this.target._doc.documentElement.style.cursor=''}},selectorDown:function(c,e,d,l){var k=this,m=a.useAttachEvent?extend({},e):e,b=d,j=this.addPointer(c),i;this.holdTimers[j]=setTimeout(function(){k.pointerHold(a.useAttachEvent?m:c,m,d,l)},g._holdDuration);this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector){while(isElement(b)){if(b===this.element&&validateAction(this.target.getAction(c,e,this,this.element),this.target).name===this.prepared.name){o(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.collectEventTargets(c,e,d,'down');return}b=parentElement(b)}}if(this.interacting()){this.collectEventTargets(c,e,d,'down');return}function pushMatches(a,f,i){var g=r?i.querySelectorAll(f):undefined;if(inContext(a,b)&&!testIgnore(a,b,d)&&testAllow(a,b,d)&&matchesSelector(b,f,g)){k.matches.push(a);k.matchElements.push(b)}}this.setEventXY(this.curCoords,[c]);this.downEvent=e;while(isElement(b)&&!i){this.matches=[];this.matchElements=[];f.forEachSelector(pushMatches);i=this.validateSelector(c,e,this.matches,this.matchElements);b=parentElement(b)}if(i){this.prepared.name=i.name;this.prepared.axis=i.axis;this.prepared.edges=i.edges;this.collectEventTargets(c,e,d,'down');return this.pointerDown(c,e,d,l,i)}else {this.downTimes[j]=(new Date()).getTime();this.downTargets[j]=d;pointerExtend(this.downPointer,c);copyCoords(this.prevCoords,this.curCoords);this.pointerWasMoved=!1}this.collectEventTargets(c,e,d,'down')},pointerDown:function(g,d,j,c,i){if(!i&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name){this.checkAndPreventDefault(d,this.target,this.element);return}this.pointerIsDown=!0;this.downEvent=d;var k=this.addPointer(g),a;if(this.pointerIds.length>1&&this.target._element===this.element){var l=validateAction(i||this.target.getAction(g,d,this,this.element),this.target);if(withinInteractionLimit(this.target,this.element,l)){a=l}this.prepared.name=null}else {if(!this.prepared.name){var e=f.get(c);if(e&&!testIgnore(e,c,j)&&testAllow(e,c,j)&&(a=validateAction(i||e.getAction(g,d,this,c),e,j))&&withinInteractionLimit(e,c,a)){this.target=e;this.element=c}}}var b=this.target,m=b&&b.options;if(b&&(i||!this.prepared.name)){a=a||validateAction(i||b.getAction(g,d,this,c),b,this.element);this.setEventXY(this.startCoords,this.pointers);if(!a){return}if(m.styleCursor){b._doc.documentElement.style.cursor=getActionCursor(a)}this.resizeAxes=a.name==='resize'?a.axis:null;if(a==='gesture'&&this.pointerIds.length<2){a=null}this.prepared.name=a.name;this.prepared.axis=a.axis;this.prepared.edges=a.edges;this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN;this.downTimes[k]=(new Date()).getTime();this.downTargets[k]=j;pointerExtend(this.downPointer,g);copyCoords(this.prevCoords,this.startCoords);this.pointerWasMoved=!1;this.checkAndPreventDefault(d,b,this.element)}else {if(this.inertiaStatus.active&&c===this.element&&validateAction(b.getAction(g,d,this,this.element),b).name===this.prepared.name){o(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.checkAndPreventDefault(d,b,this.element)}}},setModifications:function(e,f){var a=this.target,c=!0,d=checkSnap(a,this.prepared.name)&&(!a.options[this.prepared.name].snap.endOnly||f),b=checkRestrict(a,this.prepared.name)&&(!a.options[this.prepared.name].restrict.endOnly||f);if(d){this.setSnapping(e)}else {this.snapStatus.locked=!1}if(b){this.setRestriction(e)}else {this.restrictStatus.restricted=!1}if(d&&this.snapStatus.locked&&!this.snapStatus.changed){c=b&&this.restrictStatus.restricted&&this.restrictStatus.changed}else {if(b&&this.restrictStatus.restricted&&!this.restrictStatus.changed){c=!1}}return c},setStartOffsets:function(l,f,j){var a=f.getRect(j),k=getOriginXY(f,j),b=f.options[this.prepared.name].snap,c=f.options[this.prepared.name].restrict,e,d;if(a){this.startOffset.left=this.startCoords.page.x-a.left;this.startOffset.top=this.startCoords.page.y-a.top;this.startOffset.right=a.right-this.startCoords.page.x;this.startOffset.bottom=a.bottom-this.startCoords.page.y;if('width' in a){e=a.width}else {e=a.right-a.left}if('height' in a){d=a.height}else {d=a.bottom-a.top}}else {this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0}this.snapOffsets.splice(0);var i=b&&b.offset==='startCoords'?{x:this.startCoords.page.x-k.x,y:this.startCoords.page.y-k.y}:b&&b.offset||{x:0,y:0};if(a&&b&&b.relativePoints&&b.relativePoints.length){for(var g=0;g<b.relativePoints.length;g++){this.snapOffsets.push({x:this.startOffset.left-e*b.relativePoints[g].x+i.x,y:this.startOffset.top-d*b.relativePoints[g].y+i.y})}}else {this.snapOffsets.push(i)}if(a&&c.elementRect){this.restrictOffset.left=this.startOffset.left-e*c.elementRect.left;this.restrictOffset.top=this.startOffset.top-d*c.elementRect.top;this.restrictOffset.right=this.startOffset.right-e*(1-c.elementRect.right);this.restrictOffset.bottom=this.startOffset.bottom-d*(1-c.elementRect.bottom)}else {this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0}},start:function(a,b,c){if(this.interacting()||!this.pointerIsDown||this.pointerIds.length<(a.name==='gesture'?2:1)){return}if(indexOf(d,this)===-1){d.push(this)}if(!this.prepared.name){this.setEventXY(this.startCoords)}this.prepared.name=a.name;this.prepared.axis=a.axis;this.prepared.edges=a.edges;this.target=b;this.element=c;this.setStartOffsets(a.name,b,c);this.setModifications(this.startCoords.page);this.prevEvent=this[this.prepared.name+'Start'](this.downEvent)},pointerMove:function(d,e,c,A,s){if(this.inertiaStatus.active){var q=this.inertiaStatus.upCoords.page;var p=this.inertiaStatus.upCoords.client;var w={pageX:q.x+this.inertiaStatus.sx,pageY:q.y+this.inertiaStatus.sy,clientX:p.x+this.inertiaStatus.sx,clientY:p.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[w])}else {this.recordPointer(d);this.setEventXY(this.curCoords,this.pointers)}var n=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var k,l,y=this.mouse?0:indexOf(this.pointerIds,getPointerId(d));if(this.pointerIsDown&&!this.pointerWasMoved){k=this.curCoords.client.x-this.startCoords.client.x;l=this.curCoords.client.y-this.startCoords.client.y;this.pointerWasMoved=u(k,l)>B}if(!n&&(!this.pointerIsDown||this.pointerWasMoved)){if(this.pointerIsDown){clearTimeout(this.holdTimers[y])}this.collectEventTargets(d,e,c,'move')}if(!this.pointerIsDown){return}if(n&&this.pointerWasMoved&&!s){this.checkAndPreventDefault(e,this.target,this.element);return}setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords);if(!this.prepared.name){return}if(this.pointerWasMoved&&(!this.inertiaStatus.active||d instanceof InteractEvent&&/inertiastart/.test(d.type))){if(!this.interacting()){setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords);if(this.prepared.name==='drag'){var t=Math.abs(k),v=Math.abs(l),o=this.target.options.drag.axis,i=t>v?'x':t<v?'y':'xy';if(i!=='xy'&&o!=='xy'&&o!==i){this.prepared.name=null;var a=c;while(isElement(a)){var b=f.get(a);if(b&&b!==this.target&&!b.options.drag.manualStart&&b.getAction(this.downPointer,this.downEvent,this,a).name==='drag'&&checkAxis(i,b)){this.prepared.name='drag';this.target=b;this.element=a;break}a=parentElement(a)}if(!this.prepared.name){var g=this;var x=function(b,f,k){var j=r?k.querySelectorAll(f):undefined;if(b===g.target){return}if(inContext(b,c)&&!b.options.drag.manualStart&&!testIgnore(b,a,c)&&testAllow(b,a,c)&&matchesSelector(a,f,j)&&b.getAction(g.downPointer,g.downEvent,g,a).name==='drag'&&checkAxis(i,b)&&withinInteractionLimit(b,a,'drag')){return b}};a=c;while(isElement(a)){var m=f.forEachSelector(x);if(m){this.prepared.name='drag';this.target=m;this.element=a;break}a=parentElement(a)}}}}}var j=!!this.prepared.name&&!this.interacting();if(j&&(this.target.options[this.prepared.name].manualStart||!withinInteractionLimit(this.target,this.element,this.prepared))){this.stop(e);return}if(this.prepared.name&&this.target){if(j){this.start(this.prepared,this.target,this.element)}var z=this.setModifications(this.curCoords.page,s);if(z||j){this.prevEvent=this[this.prepared.name+'Move'](e)}this.checkAndPreventDefault(e,this.target,this.element)}}copyCoords(this.prevCoords,this.curCoords);if(this.dragging||this.resizing){this.autoScrollMove(d)}},dragStart:function(c){var a=new InteractEvent(this,c,'drag','start',this.element);this.dragging=!0;this.target.fire(a);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];if(!this.dynamicDrop){this.setActiveDrops(this.element)}var b=this.getDropEvents(c,a);if(b.activate){this.fireActiveDrops(b.activate)}return a},dragMove:function(c){var f=this.target,b=new InteractEvent(this,c,'drag','move',this.element),e=this.element,d=this.getDrop(b,c,e);this.dropTarget=d.dropzone;this.dropElement=d.element;var a=this.getDropEvents(c,b);f.fire(b);if(a.leave){this.prevDropTarget.fire(a.leave)}if(a.enter){this.dropTarget.fire(a.enter)}if(a.move){this.dropTarget.fire(a.move)}this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return b},resizeStart:function(d){var c=new InteractEvent(this,d,'resize','start',this.element);if(this.prepared.edges){var b=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var a=extend({},this.prepared.edges);a.top=a.top||a.left&&!a.bottom;a.left=a.left||a.top&&!a.right;a.bottom=a.bottom||a.right&&!a.top;a.right=a.right||a.bottom&&!a.left;this.prepared._linkedEdges=a}else {this.prepared._linkedEdges=null}if(this.target.options.resize.preserveAspectRatio){this.resizeStartAspectRatio=b.width/b.height}this.resizeRects={start:b,current:extend({},b),restricted:extend({},b),previous:extend({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};c.rect=this.resizeRects.restricted;c.deltaRect=this.resizeRects.delta}this.target.fire(c);this.resizing=!0;return c},resizeMove:function(q){var g=new InteractEvent(this,q,'resize','move',this.element);var d=this.prepared.edges,l=this.target.options.resize.invert,o=l==='reposition'||l==='negate';if(d){var e=g.dx,f=g.dy,i=this.resizeRects.start,c=this.resizeRects.current,a=this.resizeRects.restricted,n=this.resizeRects.delta,p=extend(this.resizeRects.previous,a),b=d;if(this.target.options.resize.preserveAspectRatio){var k=this.resizeStartAspectRatio;d=this.prepared._linkedEdges;if(b.left&&b.bottom||b.right&&b.top){f=-e/k}else {if(b.left||b.right){f=e/k}else {if(b.top||b.bottom){e=f*k}}}}else {if(this.target.options.resize.square){d=this.prepared._linkedEdges;if(b.left&&b.bottom||b.right&&b.top){f=-e}else {if(b.left||b.right){f=e}else {if(b.top||b.bottom){e=f}}}}}if(d.top){c.top+=f}if(d.bottom){c.bottom+=f}if(d.left){c.left+=e}if(d.right){c.right+=e}if(o){extend(a,c);if(l==='reposition'){var j;if(a.top>a.bottom){j=a.top;a.top=a.bottom;a.bottom=j}if(a.left>a.right){j=a.left;a.left=a.right;a.right=j}}}else {a.top=Math.min(c.top,i.bottom);a.bottom=Math.max(c.bottom,i.top);a.left=Math.min(c.left,i.right);a.right=Math.max(c.right,i.left)}a.width=a.right-a.left;a.height=a.bottom-a.top;for(var m in a){n[m]=a[m]-p[m]}g.edges=this.prepared.edges;g.rect=a;g.deltaRect=n}this.target.fire(g);return g},gestureStart:function(b){var a=new InteractEvent(this,b,'gesture','start',this.element);a.ds=0;this.gesture.startDistance=this.gesture.prevDistance=a.distance;this.gesture.startAngle=this.gesture.prevAngle=a.angle;this.gesture.scale=1;this.gesturing=!0;this.target.fire(a);return a},gestureMove:function(b){if(!this.pointerIds.length){return this.prevEvent}var a;a=new InteractEvent(this,b,'gesture','move',this.element);a.ds=a.scale-this.gesture.scale;this.target.fire(a);this.gesture.prevAngle=a.angle;this.gesture.prevDistance=a.distance;if(a.scale!==Infinity&&a.scale!==null&&a.scale!==undefined&&!isNaN(a.scale)){this.gesture.scale=a.scale}return a},pointerHold:function(b,c,a){this.collectEventTargets(b,c,a,'hold')},pointerUp:function(a,c,b,d){var e=this.mouse?0:indexOf(this.pointerIds,getPointerId(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,c,b,'up');this.collectEventTargets(a,c,b,'tap');this.pointerEnd(a,c,b,d);this.removePointer(a)},pointerCancel:function(a,c,b,d){var e=this.mouse?0:indexOf(this.pointerIds,getPointerId(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,c,b,'cancel');this.pointerEnd(a,c,b,d);this.removePointer(a)},ie8Dblclick:function(c,b,a){if(this.prevTap&&b.clientX===this.prevTap.clientX&&b.clientY===this.prevTap.clientY&&a===this.prevTap.target){this.downTargets[0]=a;this.downTimes[0]=(new Date()).getTime();this.collectEventTargets(c,b,a,'tap')}},pointerEnd:function(C,d,A,z){var f,c=this.target,k=c&&c.options,o=k&&this.prepared.name&&k[this.prepared.name].inertia,a=this.inertiaStatus;if(this.interacting()){if(a.active&&!a.ending){return}var j,y=(new Date()).getTime(),s=!1,r=!1,v=!1,q=checkSnap(c,this.prepared.name)&&k[this.prepared.name].snap.endOnly,p=checkRestrict(c,this.prepared.name)&&k[this.prepared.name].restrict.endOnly,g=0,i=0,B;if(this.dragging){if(k.drag.axis==='x'){j=Math.abs(this.pointerDelta.client.vx)}else {if(k.drag.axis==='y'){j=Math.abs(this.pointerDelta.client.vy)}else {j=this.pointerDelta.client.speed}}}else {j=this.pointerDelta.client.speed}s=o&&o.enabled&&this.prepared.name!=='gesture'&&d!==a.startEvent;r=s&&y-this.curCoords.timeStamp<50&&j>o.minSpeed&&j>o.endSpeed;if(s&&!r&&(q||p)){var b={};b.snap=b.restrict=b;if(q){this.setSnapping(this.curCoords.page,b);if(b.locked){g+=b.dx;i+=b.dy}}if(p){this.setRestriction(this.curCoords.page,b);if(b.restricted){g+=b.dx;i+=b.dy}}if(g||i){v=!0}}if(r||v){copyCoords(a.upCoords,this.curCoords);this.pointers[0]=a.startEvent=B=new InteractEvent(this,d,this.prepared.name,'inertiastart',this.element);a.t0=y;c.fire(a.startEvent);if(r){a.vx0=this.pointerDelta.client.vx;a.vy0=this.pointerDelta.client.vy;a.v0=j;this.calcInertia(a);var l=extend({},this.curCoords.page),w=getOriginXY(c,this.element),m;l.x=l.x+a.xe-w.x;l.y=l.y+a.ye-w.y;m={useStatusXY:!0,x:l.x,y:l.y,dx:0,dy:0,snap:null};m.snap=m;g=i=0;if(q){var u=this.setSnapping(this.curCoords.page,m);if(u.locked){g+=u.dx;i+=u.dy}}if(p){var t=this.setRestriction(this.curCoords.page,m);if(t.restricted){g+=t.dx;i+=t.dy}}a.modifiedXe+=g;a.modifiedYe+=i;a.i=n(this.boundInertiaFrame)}else {a.smoothEnd=!0;a.xe=g;a.ye=i;a.sx=a.sy=0;a.i=n(this.boundSmoothEndFrame)}a.active=!0;return}if(q||p){this.pointerMove(C,d,A,z,!0)}}if(this.dragging){f=new InteractEvent(this,d,'drag','end',this.element);var D=this.element,x=this.getDrop(f,d,D);this.dropTarget=x.dropzone;this.dropElement=x.element;var e=this.getDropEvents(d,f);if(e.leave){this.prevDropTarget.fire(e.leave)}if(e.enter){this.dropTarget.fire(e.enter)}if(e.drop){this.dropTarget.fire(e.drop)}if(e.deactivate){this.fireActiveDrops(e.deactivate)}c.fire(f)}else {if(this.resizing){f=new InteractEvent(this,d,'resize','end',this.element);c.fire(f)}else {if(this.gesturing){f=new InteractEvent(this,d,'gesture','end',this.element);c.fire(f)}}}this.stop(d)},collectDrops:function(b){var k=[],j=[],c;b=b||this.element;for(c=0;c<f.length;c++){if(!f[c].options.drop.enabled){continue}var a=f[c],d=a.options.drop.accept;if(isElement(d)&&d!==b||isString(d)&&!matchesSelector(b,d)){continue}var i=a.selector?a._context.querySelectorAll(a.selector):[a._element];for(var e=0,l=i.length;e<l;e++){var g=i[e];if(g===b){continue}k.push(a);j.push(g)}}return {dropzones:k,elements:j}},fireActiveDrops:function(e){var a,d,b,c;for(a=0;a<this.activeDrops.dropzones.length;a++){d=this.activeDrops.dropzones[a];b=this.activeDrops.elements[a];if(b!==c){e.target=b;d.fire(e)}c=b}},setActiveDrops:function(c){var b=this.collectDrops(c,!0);this.activeDrops.dropzones=b.dropzones;this.activeDrops.elements=b.elements;this.activeDrops.rects=[];for(var a=0;a<this.activeDrops.dropzones.length;a++){this.activeDrops.rects[a]=this.activeDrops.dropzones[a].getRect(this.activeDrops.elements[a])}},getDrop:function(f,k,c){var d=[];if(D){this.setActiveDrops(c)}for(var a=0;a<this.activeDrops.dropzones.length;a++){var i=this.activeDrops.dropzones[a],b=this.activeDrops.elements[a],l=this.activeDrops.rects[a];d.push(i.dropCheck(f,k,this.target,c,b,l)?b:null)}var e=indexOfDeepestElement(d),g=this.activeDrops.dropzones[e]||null,j=this.activeDrops.elements[e]||null;return {dropzone:g,element:j}},getDropEvents:function(c,a){var b={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};if(this.dropElement!==this.prevDropElement){if(this.prevDropTarget){b.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,timeStamp:a.timeStamp,type:'dragleave'};a.dragLeave=this.prevDropElement;a.prevDropzone=this.prevDropTarget}if(this.dropTarget){b.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,timeStamp:a.timeStamp,type:'dragenter'};a.dragEnter=this.dropElement;a.dropzone=this.dropTarget}}if(a.type==='dragend'&&this.dropTarget){b.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,timeStamp:a.timeStamp,type:'drop'};a.dropzone=this.dropTarget}if(a.type==='dragstart'){b.activate={target:null,dropzone:null,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,timeStamp:a.timeStamp,type:'dropactivate'}}if(a.type==='dragend'){b.deactivate={target:null,dropzone:null,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,timeStamp:a.timeStamp,type:'dropdeactivate'}}if(a.type==='dragmove'&&this.dropTarget){b.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:a.target,draggable:a.interactable,dragEvent:a,interaction:this,dragmove:a,timeStamp:a.timeStamp,type:'dropmove'};a.dropzone=this.dropTarget}return b},currentAction:function(){return this.dragging&&'drag'||this.resizing&&'resize'||this.gesturing&&'gesture'||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null;this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(d){if(this.interacting()){c.stop();this.matches=[];this.matchElements=[];var b=this.target;if(b.options.styleCursor){b._doc.documentElement.style.cursor=''}if(d&&isFunction(d.preventDefault)){this.checkAndPreventDefault(d,b,this.element)}if(this.dragging){this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null}}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1;this.prepared.name=this.prevEvent=null;this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var a=0;a<this.pointers.length;a++){if(indexOf(this.pointerIds,getPointerId(this.pointers[a]))===-1){this.pointers.splice(a,1)}}},inertiaFrame:function(){var a=this.inertiaStatus,e=this.target.options[this.prepared.name].inertia,f=e.resistance,d=(new Date()).getTime()/1000-a.t0;if(d<a.te){var b=1-(Math.exp(-f*d)-a.lambda_v0)/a.one_ve_v0;if(a.modifiedXe===a.xe&&a.modifiedYe===a.ye){a.sx=a.xe*b;a.sy=a.ye*b}else {var c=getQuadraticCurvePoint(0,0,a.xe,a.ye,a.modifiedXe,a.modifiedYe,b);a.sx=c.x;a.sy=c.y}this.pointerMove(a.startEvent,a.startEvent);a.i=n(this.boundInertiaFrame)}else {a.ending=!0;a.sx=a.modifiedXe;a.sy=a.modifiedYe;this.pointerMove(a.startEvent,a.startEvent);this.pointerEnd(a.startEvent,a.startEvent);a.active=a.ending=!1}},smoothEndFrame:function(){var a=this.inertiaStatus,c=(new Date()).getTime()-a.t0,b=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(c<b){a.sx=easeOutQuad(c,0,a.xe,b);a.sy=easeOutQuad(c,0,a.ye,b);this.pointerMove(a.startEvent,a.startEvent);a.i=n(this.boundSmoothEndFrame)}else {a.ending=!0;a.sx=a.xe;a.sy=a.ye;this.pointerMove(a.startEvent,a.startEvent);this.pointerEnd(a.startEvent,a.startEvent);a.smoothEnd=a.active=a.ending=!1}},addPointer:function(b){var c=getPointerId(b),a=this.mouse?0:indexOf(this.pointerIds,c);if(a===-1){a=this.pointerIds.length}this.pointerIds[a]=c;this.pointers[a]=b;return a},removePointer:function(b){var c=getPointerId(b),a=this.mouse?0:indexOf(this.pointerIds,c);if(a===-1){return}this.pointers.splice(a,1);this.pointerIds.splice(a,1);this.downTargets.splice(a,1);this.downTimes.splice(a,1);this.holdTimers.splice(a,1)},recordPointer:function(a){var b=this.mouse?0:indexOf(this.pointerIds,getPointerId(a));if(b===-1){return}this.pointers[b]=a},collectEventTargets:function(i,j,b,c){var g=this.mouse?0:indexOf(this.pointerIds,getPointerId(i));if(c==='tap'&&(this.pointerWasMoved||!(this.downTargets[g]&&this.downTargets[g]===b))){return}var d=[],e=[],a=b;function collectSelectors(f,g,k){var l=r?k.querySelectorAll(g):undefined;if(f._iEvents[c]&&isElement(a)&&inContext(f,a)&&!testIgnore(f,a,b)&&testAllow(f,a,b)&&matchesSelector(a,g,l)){d.push(f);e.push(a)}}while(a){if(interact.isSet(a)&&interact(a)._iEvents[c]){d.push(interact(a));e.push(a)}f.forEachSelector(collectSelectors);a=parentElement(a)}if(d.length||c==='tap'){this.firePointers(i,j,b,d,e,c)}},firePointers:function(b,f,m,j,k,e){var l=this.mouse?0:indexOf(this.pointerIds,getPointerId(b)),a={},c,i,g;if(e==='doubletap'){a=b}else {pointerExtend(a,f);if(f!==b){pointerExtend(a,b)}a.preventDefault=preventOriginalDefault;a.stopPropagation=InteractEvent.prototype.stopPropagation;a.stopImmediatePropagation=InteractEvent.prototype.stopImmediatePropagation;a.interaction=this;a.timeStamp=(new Date()).getTime();a.originalEvent=f;a.originalPointer=b;a.type=e;a.pointerId=getPointerId(b);a.pointerType=this.mouse?'mouse':!w?'touch':isString(b.pointerType)?b.pointerType:['touch','pen','mouse'][b.pointerType]}if(e==='tap'){a.dt=a.timeStamp-this.downTimes[l];i=a.timeStamp-this.tapTime;g=!!(this.prevTap&&this.prevTap.type!=='doubletap'&&this.prevTap.target===a.target&&i<500);a['double']=g;this.tapTime=a.timeStamp}for(c=0;c<j.length;c++){a.currentTarget=k[c];a.interactable=j[c];j[c].fire(a);if(a.immediatePropagationStopped||a.propagationStopped&&k[c+1]!==a.currentTarget){break}}if(g){var d={};extend(d,a);d.dt=i;d.type='doubletap';this.collectEventTargets(d,f,m,'doubletap');this.prevTap=d}else {if(e==='tap'){this.prevTap=a}}},validateSelector:function(g,i,e,f){for(var b=0,j=e.length;b<j;b++){var a=e[b],c=f[b],d=validateAction(a.getAction(g,i,this,c),a);if(d&&withinInteractionLimit(a,c,d)){this.target=a;this.element=c;return d}}},setSnapping:function(s,b){var i=this.target.options[this.prepared.name].snap,n=[],c,d,e;b=b||this.snapStatus;if(b.useStatusXY){d={x:b.x,y:b.y}}else {var p=getOriginXY(this.target,this.element);d=extend({},s);d.x-=p.x;d.y-=p.y}b.realX=d.x;b.realY=d.y;d.x=d.x-this.inertiaStatus.resumeDx;d.y=d.y-this.inertiaStatus.resumeDy;var o=i.targets?i.targets.length:0;for(var g=0;g<this.snapOffsets.length;g++){var k={x:d.x-this.snapOffsets[g].x,y:d.y-this.snapOffsets[g].y};for(e=0;e<o;e++){if(isFunction(i.targets[e])){c=i.targets[e](k.x,k.y,this)}else {c=i.targets[e]}if(!c){continue}n.push({x:isNumber(c.x)?c.x+this.snapOffsets[g].x:k.x,y:isNumber(c.y)?c.y+this.snapOffsets[g].y:k.y,range:isNumber(c.range)?c.range:i.range})}}var a={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(e=0,o=n.length;e<o;e++){c=n[e];var f=c.range,q=c.x-d.x,r=c.y-d.y,j=u(q,r),l=j<=f;if(f===Infinity&&a.inRange&&a.range!==Infinity){l=!1}if(!a.target||(l?a.inRange&&f!==Infinity?j/f<a.distance/a.range:f===Infinity&&a.range!==Infinity||j<a.distance:!a.inRange&&j<a.distance)){if(f===Infinity){l=!0}a.target=c;a.distance=j;a.range=f;a.inRange=l;a.dx=q;a.dy=r;b.range=f}}var m;if(a.target){m=b.snappedX!==a.target.x||b.snappedY!==a.target.y;b.snappedX=a.target.x;b.snappedY=a.target.y}else {m=!0;b.snappedX=NaN;b.snappedY=NaN}b.dx=a.dx;b.dy=a.dy;b.changed=m||a.inRange&&!b.locked;b.locked=a.inRange;return b},setRestriction:function(j,a){var g=this.target,i=g&&g.options[this.prepared.name].restrict,b=i&&i.restriction,c;if(!b){return a}a=a||this.restrictStatus;c=a.useStatusXY?c={x:a.x,y:a.y}:c=extend({},j);if(a.snap&&a.snap.locked){c.x+=a.snap.dx||0;c.y+=a.snap.dy||0}c.x-=this.inertiaStatus.resumeDx;c.y-=this.inertiaStatus.resumeDy;a.dx=0;a.dy=0;a.restricted=!1;var d,e,f;if(isString(b)){if(b==='parent'){b=parentElement(this.element)}else {if(b==='self'){b=g.getRect(this.element)}else {b=closest(this.element,b)}}if(!b){return a}}if(isFunction(b)){b=b(c.x,c.y,this.element)}if(isElement(b)){b=getElementRect(b)}d=b;if(!b){e=c.x;f=c.y}else {if('x' in b&&'y' in b){e=Math.max(Math.min(d.x+d.width-this.restrictOffset.right,c.x),d.x+this.restrictOffset.left);f=Math.max(Math.min(d.y+d.height-this.restrictOffset.bottom,c.y),d.y+this.restrictOffset.top)}else {e=Math.max(Math.min(d.right-this.restrictOffset.right,c.x),d.left+this.restrictOffset.left);f=Math.max(Math.min(d.bottom-this.restrictOffset.bottom,c.y),d.top+this.restrictOffset.top)}}a.dx=e-c.x;a.dy=f-c.y;a.changed=a.restrictedX!==e||a.restrictedY!==f;a.restricted=!!(a.dx||a.dy);a.restrictedX=e;a.restrictedY=f;return a},checkAndPreventDefault:function(b,c,e){if(!(c=c||this.target)){return}var a=c.options,d=a.preventDefault;if(d==='auto'&&e&&!/^(input|select|textarea)$/i.test(b.target.nodeName)){if(/down|start/i.test(b.type)&&this.prepared.name==='drag'&&a.drag.axis!=='xy'){return}if(a[this.prepared.name]&&a[this.prepared.name].manualStart&&!this.interacting()){return}b.preventDefault();return}if(d==='always'){b.preventDefault();return}},calcInertia:function(a){var c=this.target.options[this.prepared.name].inertia,b=c.resistance,d=-Math.log(c.endSpeed/a.v0)/b;a.x0=this.prevEvent.pageX;a.y0=this.prevEvent.pageY;a.t0=a.startEvent.timeStamp/1000;a.sx=a.sy=0;a.modifiedXe=a.xe=(a.vx0-d)/b;a.modifiedYe=a.ye=(a.vy0-d)/b;a.te=d;a.lambda_v0=b/a.v0;a.one_ve_v0=1-c.endSpeed/a.v0},autoScrollMove:function(a){if(!(this.interacting()&&checkAutoScroll(this.target,this.prepared.name))){return}if(this.inertiaStatus.active){c.x=c.y=0;return}var j,g,f,i,e=this.target.options[this.prepared.name].autoScroll,b=e.container||getWindow(this.element);if(isWindow(b)){i=a.clientX<c.margin;j=a.clientY<c.margin;g=a.clientX>b.innerWidth-c.margin;f=a.clientY>b.innerHeight-c.margin}else {var d=getElementClientRect(b);i=a.clientX<d.left+c.margin;j=a.clientY<d.top+c.margin;g=a.clientX>d.right-c.margin;f=a.clientY>d.bottom-c.margin}c.x=g?1:i?-1:0;c.y=f?1:j?-1:0;if(!c.isScrolling){c.margin=e.margin;c.speed=e.speed;c.start(this)}},_updateEventTargets:function(b,a){this._eventTarget=b;this._curEventTarget=a}};function getInteractionFromPointer(i,e,j){var a=0,c=d.length,g=/mouse/i.test(i.pointerType||e)||i.pointerType===4,b;var k=getPointerId(i);if(/down|start/i.test(e)){for(a=0;a<c;a++){b=d[a];var f=j;if(b.inertiaStatus.active&&b.target.options[b.prepared.name].inertia.allowResume&&b.mouse===g){while(f){if(f===b.element){return b}f=parentElement(f)}}}}if(g||!(s||w)){for(a=0;a<c;a++){if(d[a].mouse&&!d[a].inertiaStatus.active){return d[a]}}for(a=0;a<c;a++){if(d[a].mouse&&!(/down/.test(e)&&d[a].inertiaStatus.active)){return b}}b=new Interaction();b.mouse=!0;return b}for(a=0;a<c;a++){if(contains(d[a].pointerIds,k)){return d[a]}}if(/up|end|out/i.test(e)){return null}for(a=0;a<c;a++){b=d[a];if((!b.prepared.name||b.target.options.gesture.enabled)&&!b.interacting()&&!(!g&&b.mouse)){return b}}return new Interaction()}function doOnInteractions(a){return function(b){var e,f=getActualElement(b.path?b.path[0]:b.target),g=getActualElement(b.currentTarget),c;if(s&&/touch/.test(b.type)){I=(new Date()).getTime();for(c=0;c<b.changedTouches.length;c++){var i=b.changedTouches[c];e=getInteractionFromPointer(i,b.type,f);if(!e){continue}e._updateEventTargets(f,g);e[a](i,b,f,g)}}else {if(!w&&/mouse/.test(b.type)){for(c=0;c<d.length;c++){if(!d[c].mouse&&d[c].pointerIsDown){return}}if((new Date()).getTime()-I<500){return}}e=getInteractionFromPointer(b,b.type,f);if(!e){return}e._updateEventTargets(f,g);e[a](b,b,f,g)}}}function InteractEvent(a,n,i,r,t,E){var c,d,m=a.target,b=a.snapStatus,o=a.restrictStatus,j=a.pointers,e=(m&&m.options||g).deltaSource,F=e+'X',x=e+'Y',q=m?m.options:g,l=getOriginXY(m,t),p=r==='start',v=r==='end',y=p?a.startCoords:a.curCoords;t=t||a.element;d=extend({},y.page);c=extend({},y.client);d.x-=l.x;d.y-=l.y;c.x-=l.x;c.y-=l.y;var D=q[i].snap&&q[i].snap.relativePoints;if(checkSnap(m,i)&&!(p&&D&&D.length)){this.snap={range:b.range,locked:b.locked,x:b.snappedX,y:b.snappedY,realX:b.realX,realY:b.realY,dx:b.dx,dy:b.dy};if(b.locked){d.x+=b.dx;d.y+=b.dy;c.x+=b.dx;c.y+=b.dy}}if(checkRestrict(m,i)&&!(p&&q[i].restrict.elementRect)&&o.restricted){d.x+=o.dx;d.y+=o.dy;c.x+=o.dx;c.y+=o.dy;this.restrict={dx:o.dx,dy:o.dy}}this.pageX=d.x;this.pageY=d.y;this.clientX=c.x;this.clientY=c.y;this.x0=a.startCoords.page.x-l.x;this.y0=a.startCoords.page.y-l.y;this.clientX0=a.startCoords.client.x-l.x;this.clientY0=a.startCoords.client.y-l.y;this.ctrlKey=n.ctrlKey;this.altKey=n.altKey;this.shiftKey=n.shiftKey;this.metaKey=n.metaKey;this.button=n.button;this.buttons=n.buttons;this.target=t;this.t0=a.downTimes[0];this.type=i+(r||'');this.interaction=a;this.interactable=m;var s=a.inertiaStatus;if(s.active){this.detail='inertia'}if(E){this.relatedTarget=E}if(v){if(e==='client'){this.dx=c.x-a.startCoords.client.x;this.dy=c.y-a.startCoords.client.y}else {this.dx=d.x-a.startCoords.page.x;this.dy=d.y-a.startCoords.page.y}}else {if(p){this.dx=0;this.dy=0}else {if(r==='inertiastart'){this.dx=a.prevEvent.dx;this.dy=a.prevEvent.dy}else {if(e==='client'){this.dx=c.x-a.prevEvent.clientX;this.dy=c.y-a.prevEvent.clientY}else {this.dx=d.x-a.prevEvent.pageX;this.dy=d.y-a.prevEvent.pageY}}}}if(a.prevEvent&&a.prevEvent.detail==='inertia'&&!s.active&&q[i].inertia&&q[i].inertia.zeroResumeDelta){s.resumeDx+=this.dx;s.resumeDy+=this.dy;this.dx=this.dy=0}if(i==='resize'&&a.resizeAxes){if(q.resize.square){if(a.resizeAxes==='y'){this.dx=this.dy}else {this.dy=this.dx}this.axes='xy'}else {this.axes=a.resizeAxes;if(a.resizeAxes==='x'){this.dy=0}else {if(a.resizeAxes==='y'){this.dx=0}}}}else {if(i==='gesture'){this.touches=[j[0],j[1]];if(p){this.distance=touchDistance(j,e);this.box=touchBBox(j);this.scale=1;this.ds=0;this.angle=touchAngle(j,undefined,e);this.da=0}else {if(v||n instanceof InteractEvent){this.distance=a.prevEvent.distance;this.box=a.prevEvent.box;this.scale=a.prevEvent.scale;this.ds=this.scale-1;this.angle=a.prevEvent.angle;this.da=this.angle-a.gesture.startAngle}else {this.distance=touchDistance(j,e);this.box=touchBBox(j);this.scale=this.distance/a.gesture.startDistance;this.angle=touchAngle(j,a.gesture.prevAngle,e);this.ds=this.scale-a.gesture.prevScale;this.da=this.angle-a.gesture.prevAngle}}}}if(p){this.timeStamp=a.downTimes[0];this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0}else {if(r==='inertiastart'){this.timeStamp=a.prevEvent.timeStamp;this.dt=a.prevEvent.dt;this.duration=a.prevEvent.duration;this.speed=a.prevEvent.speed;this.velocityX=a.prevEvent.velocityX;this.velocityY=a.prevEvent.velocityY}else {this.timeStamp=(new Date()).getTime();this.dt=this.timeStamp-a.prevEvent.timeStamp;this.duration=this.timeStamp-a.downTimes[0];if(n instanceof InteractEvent){var A=this[F]-a.prevEvent[F],B=this[x]-a.prevEvent[x],w=this.dt/1000;this.speed=u(A,B)/w;this.velocityX=A/w;this.velocityY=B/w}else {this.speed=a.pointerDelta[e].speed;this.velocityX=a.pointerDelta[e].vx;this.velocityY=a.pointerDelta[e].vy}}}if((v||r==='inertiastart')&&a.prevEvent.speed>600&&this.timeStamp-a.prevEvent.timeStamp<150){var f=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI,k=22.5;if(f<0){f+=360}var z=135-k<=f&&f<225+k,C=225-k<=f&&f<315+k,G=!z&&(315-k<=f||f<45+k),H=!C&&45-k<=f&&f<135+k;this.swipe={up:C,down:H,left:z,right:G,angle:f,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}}}}InteractEvent.prototype={preventDefault:blank,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};function preventOriginalDefault(){this.originalEvent.preventDefault()}function getActionCursor(a){var b='';if(a.name==='drag'){b=z.drag}if(a.name==='resize'){if(a.axis){b=z[a.name+a.axis]}else {if(a.edges){var d='resize',e=['top','bottom','left','right'];for(var c=0;c<4;c++){if(a.edges[e[c]]){d+=e[c]}}b=z[d]}}}return b}function checkResizeEdge(b,c,e,f,j,a,d){if(!c){return !1}if(c===!0){var i=isNumber(a.width)?a.width:a.right-a.left,g=isNumber(a.height)?a.height:a.bottom-a.top;if(i<0){if(b==='left'){b='right'}else {if(b==='right'){b='left'}}}if(g<0){if(b==='top'){b='bottom'}else {if(b==='bottom'){b='top'}}}if(b==='left'){return e.x<(i>=0?a.left:a.right)+d}if(b==='top'){return e.y<(g>=0?a.top:a.bottom)+d}if(b==='right'){return e.x>(i>=0?a.right:a.left)-d}if(b==='bottom'){return e.y>(g>=0?a.bottom:a.top)-d}}if(!isElement(f)){return !1}return isElement(c)?c===f:matchesUpTo(f,c,j)}function defaultActionChecker(t,e,b,n){if(e.type!=='mousedown'&&e.type!=='MSPointerDown'&&e.type!=='pointerdown'){return null}var r=navigator.appName.indexOf('Internet Explorer')!==-1&&navigator.appVersion.indexOf('MSIE 8')!==-1;var s=navigator.appName.indexOf('Internet Explorer')!==-1&&navigator.appVersion.indexOf('MSIE 9')!==-1;var q=r||s?1:0;if(e.button>q){return null}var f=this.getRect(n),i=!1,d=null,m=null,a,l=extend({},b.curCoords.page),c=this.options;if(!f){return null}if(k.resize&&c.resize.enabled){var g=c.resize;a={left:!1,right:!1,top:!1,bottom:!1};if(isObject(g.edges)){for(var j in a){a[j]=checkResizeEdge(j,g.edges[j],l,b._eventTarget,n,f,g.margin||x)}a.left=a.left&&!a.right;a.top=a.top&&!a.bottom;i=a.left||a.right||a.top||a.bottom}else {var p=c.resize.axis!=='y'&&l.x>f.right-x,o=c.resize.axis!=='x'&&l.y>f.bottom-x;i=p||o;m=(p?'x':'')+(o?'y':'')}}d=i?'resize':k.drag&&c.drag.enabled?'drag':null;if(k.gesture&&b.pointerIds.length>=2&&!(b.dragging||b.resizing)){d='gesture'}if(d){return {name:d,axis:m,edges:a}}return null}function validateAction(c,d){if(!isObject(c)){return null}var a=c.name,b=d.options;if((a==='resize'&&b.resize.enabled||a==='drag'&&b.drag.enabled||a==='gesture'&&b.gesture.enabled)&&k[a]){if(a==='resize'||a==='resizeyx'){a='resizexy'}return c}return null}var b={},G=['dragStart','dragMove','resizeStart','resizeMove','gestureStart','gestureMove','pointerOver','pointerOut','pointerHover','selectorDown','pointerDown','pointerMove','pointerUp','pointerCancel','pointerEnd','addPointer','removePointer','recordPointer','autoScrollMove'];for(var F=0,E=G.length;F<E;F++){var L=G[F];b[L]=doOnInteractions(L)}function delegateListener(a,g){var c={},e=j[a.type],k=getActualElement(a.path?a.path[0]:a.target),b=k;g=g?!0:!1;for(var m in a){c[m]=a[m]}c.originalEvent=a;c.preventDefault=preventOriginalDefault;while(isElement(b)){for(var d=0;d<e.selectors.length;d++){var n=e.selectors[d],l=e.contexts[d];if(matchesSelector(b,n)&&nodeContains(l,k)&&nodeContains(l,b)){var i=e.listeners[d];c.currentTarget=b;for(var f=0;f<i.length;f++){if(i[f][1]===g){i[f][0](c)}}}}b=parentElement(b)}}function delegateUseCapture(a){return delegateListener.call(this,a,!0)}f.indexOfElement=function indexOfElement(d,c){c=c||l;for(var b=0;b<this.length;b++){var a=this[b];if(a.selector===d&&a._context===c||!a.selector&&a._element===d){return b}}return -1};f.get=function interactableGet(b,a){return this[this.indexOfElement(b,a&&a.context)]};f.forEachSelector=function(d){for(var b=0;b<this.length;b++){var a=this[b];if(!a.selector){continue}var c=d(a,a.selector,a._context,b,this);if(c!==undefined){return c}}};function interact(a,b){return f.get(a,b)||new Interactable(a,b)}function Interactable(g,j){this._element=g;this._iEvents=this._iEvents||{};var c;if(trySelector(g)){this.selector=g;var d=j&&j.context;c=d?getWindow(d):e;if(d&&(c.Node?d instanceof c.Node:isElement(d)||d===c.document)){this._context=d}}else {c=getWindow(g);if(isElement(g,c)){if(p){a.add(this._element,i.down,b.pointerDown);a.add(this._element,i.move,b.pointerHover)}else {a.add(this._element,'mousedown',b.pointerDown);a.add(this._element,'mousemove',b.pointerHover);a.add(this._element,'touchstart',b.pointerDown);a.add(this._element,'touchmove',b.pointerHover)}}}this._doc=c.document;if(!contains(t,this._doc)){listenToDocument(this._doc)}f.push(this);this.set(j)}Interactable.prototype={setOnEvents:function(b,a){if(b==='drop'){if(isFunction(a.ondrop)){this.ondrop=a.ondrop}if(isFunction(a.ondropactivate)){this.ondropactivate=a.ondropactivate}if(isFunction(a.ondropdeactivate)){this.ondropdeactivate=a.ondropdeactivate}if(isFunction(a.ondragenter)){this.ondragenter=a.ondragenter}if(isFunction(a.ondragleave)){this.ondragleave=a.ondragleave}if(isFunction(a.ondropmove)){this.ondropmove=a.ondropmove}}else {b='on'+b;if(isFunction(a.onstart)){this[b+'start']=a.onstart}if(isFunction(a.onmove)){this[b+'move']=a.onmove}if(isFunction(a.onend)){this[b+'end']=a.onend}if(isFunction(a.oninertiastart)){this[b+'inertiastart']=a.oninertiastart}}return this},draggable:function(a){if(isObject(a)){this.options.drag.enabled=a.enabled===!1?!1:!0;this.setPerAction('drag',a);this.setOnEvents('drag',a);if(/^x$|^y$|^xy$/.test(a.axis)){this.options.drag.axis=a.axis}else {if(a.axis===null){delete this.options.drag.axis}}return this}if(isBool(a)){this.options.drag.enabled=a;return this}return this.options.drag},setPerAction:function(c,b){for(var a in b){if(a in g[c]){if(isObject(b[a])){this.options[c][a]=extend(this.options[c][a]||{},b[a]);if(isObject(g.perAction[a])&&'enabled' in g.perAction[a]){this.options[c][a].enabled=b[a].enabled===!1?!1:!0}}else {if(isBool(b[a])&&isObject(g.perAction[a])){this.options[c][a].enabled=b[a]}else {if(b[a]!==undefined){this.options[c][a]=b[a]}}}}}},dropzone:function(a){if(isObject(a)){this.options.drop.enabled=a.enabled===!1?!1:!0;this.setOnEvents('drop',a);if(/^(pointer|center)$/.test(a.overlap)){this.options.drop.overlap=a.overlap}else {if(isNumber(a.overlap)){this.options.drop.overlap=Math.max(Math.min(1,a.overlap),0)}}if('accept' in a){this.options.drop.accept=a.accept}if('checker' in a){this.options.drop.checker=a.checker}return this}if(isBool(a)){this.options.drop.enabled=a;return this}return this.options.drop},dropCheck:function(j,n,g,e,i,a){var c=!1;if(!(a=a||this.getRect(i))){return this.options.drop.checker?this.options.drop.checker(j,n,c,this,i,g,e):!1}var f=this.options.drop.overlap;if(f==='pointer'){var d=getPageXY(j),m=getOriginXY(g,e),k,l;d.x+=m.x;d.y+=m.y;k=d.x>a.left&&d.x<a.right;l=d.y>a.top&&d.y<a.bottom;c=k&&l}var b=g.getRect(e);if(f==='center'){var o=b.left+b.width/2,p=b.top+b.height/2;c=o>=a.left&&o<=a.right&&p>=a.top&&p<=a.bottom}if(isNumber(f)){var r=Math.max(0,Math.min(a.right,b.right)-Math.max(a.left,b.left))*Math.max(0,Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top)),q=r/(b.width*b.height);c=q>=f}if(this.options.drop.checker){c=this.options.drop.checker(j,n,c,this,i,g,e)}return c},dropChecker:function(a){if(isFunction(a)){this.options.drop.checker=a;return this}if(a===null){delete this.options.getRect;return this}return this.options.drop.checker},accept:function(a){if(isElement(a)){this.options.drop.accept=a;return this}if(trySelector(a)){this.options.drop.accept=a;return this}if(a===null){delete this.options.drop.accept;return this}return this.options.drop.accept},resizable:function(a){if(isObject(a)){this.options.resize.enabled=a.enabled===!1?!1:!0;this.setPerAction('resize',a);this.setOnEvents('resize',a);if(/^x$|^y$|^xy$/.test(a.axis)){this.options.resize.axis=a.axis}else {if(a.axis===null){this.options.resize.axis=g.resize.axis}}if(isBool(a.preserveAspectRatio)){this.options.resize.preserveAspectRatio=a.preserveAspectRatio}else {if(isBool(a.square)){this.options.resize.square=a.square}}return this}if(isBool(a)){this.options.resize.enabled=a;return this}return this.options.resize},squareResize:function(a){if(isBool(a)){this.options.resize.square=a;return this}if(a===null){delete this.options.resize.square;return this}return this.options.resize.square},gesturable:function(a){if(isObject(a)){this.options.gesture.enabled=a.enabled===!1?!1:!0;this.setPerAction('gesture',a);this.setOnEvents('gesture',a);return this}if(isBool(a)){this.options.gesture.enabled=a;return this}return this.options.gesture},autoScroll:function(a){if(isObject(a)){a=extend({actions:['drag','resize']},a)}else {if(isBool(a)){a={actions:['drag','resize'],enabled:a}}}return this.setOptions('autoScroll',a)},snap:function(b){var a=this.setOptions('snap',b);if(a===this){return this}return a.drag},setOptions:function(e,b){var f=b&&isArray(b.actions)?b.actions:['drag'];var c;if(isObject(b)||isBool(b)){for(c=0;c<f.length;c++){var i=/resize/.test(f[c])?'resize':f[c];if(!isObject(this.options[i])){continue}var a=this.options[i][e];if(isObject(b)){extend(a,b);a.enabled=b.enabled===!1?!1:!0;if(e==='snap'){if(a.mode==='grid'){a.targets=[interact.createSnapGrid(extend({offset:a.gridOffset||{x:0,y:0}},a.grid||{}))]}else {if(a.mode==='anchor'){a.targets=a.anchors}else {if(a.mode==='path'){a.targets=a.paths}}}if('elementOrigin' in b){a.relativePoints=[b.elementOrigin]}}}else {if(isBool(b)){a.enabled=b}}}return this}var j={},d=['drag','resize','gesture'];for(c=0;c<d.length;c++){if(e in g[d[c]]){j[d[c]]=this.options[d[c]][e]}}return j},inertia:function(b){var a=this.setOptions('inertia',b);if(a===this){return this}return a.drag},getAction:function(d,e,b,c){var a=this.defaultActionChecker(d,e,b,c);if(a&&this.options.actionChecker){return this.options.actionChecker(d,e,a,this,c,b)}return a},defaultActionChecker:defaultActionChecker,actionChecker:function(a){if(isFunction(a)){this.options.actionChecker=a;return this}if(a===null){delete this.options.actionChecker;return this}return this.options.actionChecker},getRect:function rectCheck(a){a=a||this._element;if(this.selector&&!isElement(a)){a=this._context.querySelector(this.selector)}return getElementRect(a)},rectChecker:function(a){if(isFunction(a)){this.getRect=a;return this}if(a===null){delete this.options.getRect;return this}return this.getRect},styleCursor:function(a){if(isBool(a)){this.options.styleCursor=a;return this}if(a===null){delete this.options.styleCursor;return this}return this.options.styleCursor},preventDefault:function(a){if(/^(always|never|auto)$/.test(a)){this.options.preventDefault=a;return this}if(isBool(a)){this.options.preventDefault=a?'always':'never';return this}return this.options.preventDefault},origin:function(a){if(trySelector(a)){this.options.origin=a;return this}else {if(isObject(a)){this.options.origin=a;return this}}return this.options.origin},deltaSource:function(a){if(a==='page'||a==='client'){this.options.deltaSource=a;return this}return this.options.deltaSource},restrict:function(a){if(!isObject(a)){return this.setOptions('restrict',a)}var d=['drag','resize','gesture'],e;for(var c=0;c<d.length;c++){var b=d[c];if(b in a){var f=extend({actions:[b],restriction:a[b]},a);e=this.setOptions('restrict',f)}}return e},context:function(){return this._context},_context:l,ignoreFrom:function(a){if(trySelector(a)){this.options.ignoreFrom=a;return this}if(isElement(a)){this.options.ignoreFrom=a;return this}return this.options.ignoreFrom},allowFrom:function(a){if(trySelector(a)){this.options.allowFrom=a;return this}if(isElement(a)){this.options.allowFrom=a;return this}return this.options.allowFrom},element:function(){return this._element},fire:function(a){if(!(a&&a.type)||!contains(q,a.type)){return this}var c,b,d,f='on'+a.type,e='';if(a.type in this._iEvents){c=this._iEvents[a.type];for(b=0,d=c.length;b<d&&!a.immediatePropagationStopped;b++){e=c[b].name;c[b](a)}}if(isFunction(this[f])){e=this[f].name;this[f](a)}if(a.type in m&&(c=m[a.type])){for(b=0,d=c.length;b<d&&!a.immediatePropagationStopped;b++){e=c[b].name;c[b](a)}}return this},on:function(b,f,g){var c;if(isString(b)&&b.search(' ')!==-1){b=b.trim().split(/ +/)}if(isArray(b)){for(c=0;c<b.length;c++){this.on(b[c],f,g)}return this}if(isObject(b)){for(var i in b){this.on(i,b[i],f)}return this}if(b==='wheel'){b=K}g=g?!0:!1;if(contains(q,b)){if(!(b in this._iEvents)){this._iEvents[b]=[f]}else {this._iEvents[b].push(f)}}else {if(this.selector){if(!j[b]){j[b]={selectors:[],contexts:[],listeners:[]};for(c=0;c<t.length;c++){a.add(t[c],b,delegateListener);a.add(t[c],b,delegateUseCapture,!0)}}var d=j[b],e;for(e=d.selectors.length-1;e>=0;e--){if(d.selectors[e]===this.selector&&d.contexts[e]===this._context){break}}if(e===-1){e=d.selectors.length;d.selectors.push(this.selector);d.contexts.push(this._context);d.listeners.push([])}d.listeners[e].push([f,g])}else {a.add(this._element,b,f,g)}}return this},off:function(b,i,f){var d;if(isString(b)&&b.search(' ')!==-1){b=b.trim().split(/ +/)}if(isArray(b)){for(d=0;d<b.length;d++){this.off(b[d],i,f)}return this}if(isObject(b)){for(var m in b){this.off(m,b[m],i)}return this}var k,c=-1;f=f?!0:!1;if(b==='wheel'){b=K}if(contains(q,b)){k=this._iEvents[b];if(k&&(c=indexOf(k,i))!==-1){this._iEvents[b].splice(c,1)}}else {if(this.selector){var e=j[b],l=!1;if(!e){return this}for(c=e.selectors.length-1;c>=0;c--){if(e.selectors[c]===this.selector&&e.contexts[c]===this._context){var g=e.listeners[c];for(d=g.length-1;d>=0;d--){var o=g[d][0],n=g[d][1];if(o===i&&n===f){g.splice(d,1);if(!g.length){e.selectors.splice(c,1);e.contexts.splice(c,1);e.listeners.splice(c,1);a.remove(this._context,b,delegateListener);a.remove(this._context,b,delegateUseCapture,!0);if(!e.selectors.length){j[b]=null}}l=!0;break}}if(l){break}}}}else {a.remove(this._element,b,i,f)}}return this},set:function(b){if(!isObject(b)){b={}}this.options=extend({},g.base);var a,f=['drag','drop','resize','gesture'],j=['draggable','dropzone','resizable','gesturable'],i=extend(extend({},g.perAction),b[d]||{});for(a=0;a<f.length;a++){var d=f[a];this.options[d]=extend({},g[d]);this.setPerAction(d,i);this[j[a]](b[d])}var e=['accept','actionChecker','allowFrom','deltaSource','dropChecker','ignoreFrom','origin','preventDefault','rectChecker','styleCursor'];for(a=0,E=e.length;a<E;a++){var c=e[a];this.options[c]=g.base[c];if(c in b){this[c](b[c])}}return this},unset:function(){a.remove(this._element,'all');if(!isString(this.selector)){a.remove(this,'all');if(this.options.styleCursor){this._element.style.cursor=''}}else {for(var d in j){var b=j[d];for(var c=0;c<b.selectors.length;c++){if(b.selectors[c]===this.selector&&b.contexts[c]===this._context){b.selectors.splice(c,1);b.contexts.splice(c,1);b.listeners.splice(c,1);if(!b.selectors.length){j[d]=null}}a.remove(this._context,d,delegateListener);a.remove(this._context,d,delegateUseCapture,!0);break}}}this.dropzone(!1);f.splice(indexOf(f,this),1);return interact}};function warnOnce(c,b){var a=!1;return function(){if(!a){e.console.warn(b);a=!0}return c.apply(this,arguments)}}Interactable.prototype.snap=warnOnce(Interactable.prototype.snap,'Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping');Interactable.prototype.restrict=warnOnce(Interactable.prototype.restrict,'Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction');Interactable.prototype.inertia=warnOnce(Interactable.prototype.inertia,'Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia');Interactable.prototype.autoScroll=warnOnce(Interactable.prototype.autoScroll,'Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll');Interactable.prototype.squareResize=warnOnce(Interactable.prototype.squareResize,'Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square');Interactable.prototype.accept=warnOnce(Interactable.prototype.accept,'Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead');Interactable.prototype.dropChecker=warnOnce(Interactable.prototype.dropChecker,'Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead');Interactable.prototype.context=warnOnce(Interactable.prototype.context,'Interactable#context as a method is deprecated. It will soon be a DOM Node instead');interact.isSet=function(b,a){return f.indexOfElement(b,a&&a.context)!==-1};interact.on=function(b,c,e){if(isString(b)&&b.search(' ')!==-1){b=b.trim().split(/ +/)}if(isArray(b)){for(var d=0;d<b.length;d++){interact.on(b[d],c,e)}return interact}if(isObject(b)){for(var f in b){interact.on(f,b[f],c)}return interact}if(contains(q,b)){if(!m[b]){m[b]=[c]}else {m[b].push(c)}}else {a.add(l,b,c,e)}return interact};interact.off=function(b,c,e){if(isString(b)&&b.search(' ')!==-1){b=b.trim().split(/ +/)}if(isArray(b)){for(var d=0;d<b.length;d++){interact.off(b[d],c,e)}return interact}if(isObject(b)){for(var g in b){interact.off(g,b[g],c)}return interact}if(!contains(q,b)){a.remove(l,b,c,e)}else {var f;if(b in m&&(f=indexOf(m[b],c))!==-1){m[b].splice(f,1)}}return interact};interact.enableDragging=warnOnce(function(a){if(a!==null&&a!==undefined){k.drag=a;return interact}return k.drag},'interact.enableDragging is deprecated and will soon be removed.');interact.enableResizing=warnOnce(function(a){if(a!==null&&a!==undefined){k.resize=a;return interact}return k.resize},'interact.enableResizing is deprecated and will soon be removed.');interact.enableGesturing=warnOnce(function(a){if(a!==null&&a!==undefined){k.gesture=a;return interact}return k.gesture},'interact.enableGesturing is deprecated and will soon be removed.');interact.eventTypes=q;interact.debug=function(){var c=d[0]||new Interaction();return {interactions:d,target:c.target,dragging:c.dragging,resizing:c.resizing,gesturing:c.gesturing,prepared:c.prepared,matches:c.matches,matchElements:c.matchElements,prevCoords:c.prevCoords,startCoords:c.startCoords,pointerIds:c.pointerIds,pointers:c.pointers,addPointer:b.addPointer,removePointer:b.removePointer,recordPointer:b.recordPointer,snap:c.snapStatus,restrict:c.restrictStatus,inertia:c.inertiaStatus,downTime:c.downTimes[0],downEvent:c.downEvent,downPointer:c.downPointer,prevEvent:c.prevEvent,Interactable:Interactable,interactables:f,pointerIsDown:c.pointerIsDown,defaultOptions:g,defaultActionChecker:defaultActionChecker,actionCursors:z,dragMove:b.dragMove,resizeMove:b.resizeMove,gestureMove:b.gestureMove,pointerUp:b.pointerUp,pointerDown:b.pointerDown,pointerMove:b.pointerMove,pointerHover:b.pointerHover,eventTypes:q,events:a,globalEvents:m,delegatedEvents:j,prefixedPropREs:C}};interact.getPointerAverage=pointerAverage;interact.getTouchBBox=touchBBox;interact.getTouchDistance=touchDistance;interact.getTouchAngle=touchAngle;interact.getElementRect=getElementRect;interact.getElementClientRect=getElementClientRect;interact.matchesSelector=matchesSelector;interact.closest=closest;interact.margin=warnOnce(function(a){if(isNumber(a)){x=a;return interact}return x},'interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.');interact.supportsTouch=function(){return s};interact.supportsPointerEvent=function(){return w};interact.stop=function(b){for(var a=d.length-1;a>=0;a--){d[a].stop(b)}return interact};interact.dynamicDrop=function(a){if(isBool(a)){D=a;return interact}return D};interact.pointerMoveTolerance=function(a){if(isNumber(a)){B=a;return this}return B};interact.maxInteractions=function(a){if(isNumber(a)){y=a;return this}return y};interact.createSnapGrid=function(a){return function(i,j){var b=0,c=0;if(isObject(a.offset)){b=a.offset.x;c=a.offset.y}var d=Math.round((i-b)/a.x),e=Math.round((j-c)/a.y),f=d*a.x+b,g=e*a.y+c;return {x:f,y:g,range:a.range}}};function endAllInteractions(b){for(var a=0;a<d.length;a++){d[a].pointerEnd(b,b)}}function listenToDocument(c){if(contains(t,c)){return}var f=c.defaultView||c.parentWindow;for(var g in j){a.add(c,g,delegateListener);a.add(c,g,delegateUseCapture,!0)}if(p){if(p===f.MSPointerEvent){i={up:'MSPointerUp',down:'MSPointerDown',over:'mouseover',out:'mouseout',move:'MSPointerMove',cancel:'MSPointerCancel'}}else {i={up:'pointerup',down:'pointerdown',over:'pointerover',out:'pointerout',move:'pointermove',cancel:'pointercancel'}}a.add(c,i.down,b.selectorDown);a.add(c,i.move,b.pointerMove);a.add(c,i.over,b.pointerOver);a.add(c,i.out,b.pointerOut);a.add(c,i.up,b.pointerUp);a.add(c,i.cancel,b.pointerCancel);a.add(c,i.move,b.autoScrollMove)}else {a.add(c,'mousedown',b.selectorDown);a.add(c,'mousemove',b.pointerMove);a.add(c,'mouseup',b.pointerUp);a.add(c,'mouseover',b.pointerOver);a.add(c,'mouseout',b.pointerOut);a.add(c,'touchstart',b.selectorDown);a.add(c,'touchmove',b.pointerMove);a.add(c,'touchend',b.pointerUp);a.add(c,'touchcancel',b.pointerCancel);a.add(c,'mousemove',b.autoScrollMove);a.add(c,'touchmove',b.autoScrollMove)}a.add(f,'blur',endAllInteractions);try{if(f.frameElement){var e=f.frameElement.ownerDocument,k=e.defaultView;a.add(e,'mouseup',b.pointerEnd);a.add(e,'touchend',b.pointerEnd);a.add(e,'touchcancel',b.pointerEnd);a.add(e,'pointerup',b.pointerEnd);a.add(e,'MSPointerUp',b.pointerEnd);a.add(k,'blur',endAllInteractions)}}catch(R){interact.windowParentError=R}a.add(c,'dragstart',function(b){for(var e=0;e<d.length;e++){var a=d[e];if(a.element&&(a.element===b.target||nodeContains(a.element,b.target))){a.checkAndPreventDefault(b,a.target,a.element);return}}});if(a.useAttachEvent){a.add(c,'selectstart',function(b){var a=d[0];if(a.currentAction()){a.checkAndPreventDefault(b)}});a.add(c,'dblclick',doOnInteractions('ie8Dblclick'))}t.push(c)}listenToDocument(l);function indexOf(b,c){for(var a=0,d=b.length;a<d;a++){if(b[a]===c){return a}}return -1}function contains(b,a){return indexOf(b,a)!==-1}function matchesSelector(b,a,c){if(r){return r(b,a,c)}if(e!==h){a=a.replace(/\/deep\//g,' ')}return b[A](a)}function matchesUpTo(a,b,c){while(isElement(a)){if(matchesSelector(a,b)){return !0}a=parentElement(a);if(a===c){return matchesSelector(a,b)}}return !1}if(typeof Element==='undefined'||!(A in Element.prototype)||!isFunction(Element.prototype[A])){r=function(c,d,a){a=a||c.parentNode.querySelectorAll(d);for(var b=0,e=a.length;b<e;b++){if(a[b]===c){return !0}}return !1}}(function(){var c=0,b=['ms','moz','webkit','o'];for(var a=0;a<b.length&&!h.requestAnimationFrame;++a){n=h[b[a]+'RequestAnimationFrame'];o=h[b[a]+'CancelAnimationFrame']||h[b[a]+'CancelRequestAnimationFrame']}if(!n){n=function(d){var b=(new Date()).getTime(),a=Math.max(0,16-(b-c)),e=setTimeout(function(){d(b+a)},a);c=b+a;return e}}if(!o){o=function(a){clearTimeout(a)}}})();if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=interact}exports.interact=interact}else {if(typeof define==='function'&&define.amd){define('interact',function(){return interact})}else {h.interact=interact}}})(typeof window==='undefined'?undefined:window);Ext.cmd.derive('MeetingsCalendar.store.AreaTreeStore',Ext.data.TreeStore,{},0,0,0,0,0,0,[MeetingsCalendar.store,'AreaTreeStore'],0);Ext.cmd.derive('MeetingsCalendar.view.calendarController',Ext.app.ViewController,{applyFilter:function(b,a,f){var c=this.view.getEventStore();var g=this;var d=b=='area'?'area':a;if(!f){var e=new Ext.util.Filter({id:d,filterFn:function(d){var c=d.getData();if(b=='area'){if(c.Areas&&a&&(c.Areas.length>0&&a.length>0)){if(Ext.Array.intersect(c.Areas,a).length>0){return !0}else {return !1}}else {return !1}}else {if(a=='mTypeOther'){if(c.Type=='MEETING'&&(c.MeetingtypeType==null||Ext.isEmpty(c.MeetingtypeType))){return !1}else {return !0}}else {return c[b]!=a}}}});c.filter(e)}else {c.removeFilter(d)}}},0,0,0,0,['controller.calendarController'],0,[MeetingsCalendar.view,'calendarController'],0);Ext.cmd.derive('Deft.util.Function',Ext.Base,{alternateClassName:['Deft.Function'],statics:{memoize:function(d,c,b){var a;a={};return function(f){var e;e=Ext.isFunction(b)?b.apply(c,arguments):f;if(!(e in a)){a[e]=d.apply(c,arguments)}return a[e]}},nextTick:function(a,b){if(b!=null){a=Ext.Function.bind(a,b)}setTimeout(a,0)},spread:function(b,a){return function(c){if(!Ext.isArray(c)){Ext.Error.raise({msg:'Error spreading passed Array over target function arguments: passed a non-Array.'})}return b.apply(a,c)}}}},0,0,0,0,0,0,[Deft.util,'Function',Deft,'Function'],function(){if(typeof setImmediate!=='undefined'&&setImmediate!==null){return this.nextTick=function(a,b){if(b!=null){a=Ext.Function.bind(a,b)}setImmediate(a)}}});Ext.cmd.derive('Deft.promise.Resolver',Ext.Base,{alternateClassName:['Deft.Resolver'],constructor:function(m,b,i){var k,e,f,c,g,h,n,a,l,d,j,o;this.promise=Ext.create('Deft.promise.Promise',this);a=[];d=!1;c=!1;g=null;h=null;if(!Ext.isFunction(b)){b=function(a){throw a}}n=Deft.util.Function.nextTick;j=function(){var d,c,e;for(c=0,e=a.length;c<e;c++){d=a[c];d[g](h)}a=[]};o=function(d){a.push(d);if(c){j()}};k=function(a,d){m=b=i=null;g=a;h=d;c=!0;j()};f=function(a){k('resolve',a)};e=function(a){k('reject',a)};l=function(c,a){var g;d=!0;try{if(Ext.isFunction(c)){a=c(a)}if(a&&Ext.isFunction(a.then)){a.then(f,e)}else {f(a)}}catch(p){g=p;e(g)}};this.resolve=function(a){if(!d){l(m,a)}};this.reject=function(a){if(!d){l(b,a)}};this.update=function(e){var f,d,g;if(!c){if(Ext.isFunction(i)){e=i(e)}for(d=0,g=a.length;d<g;d++){f=a[d];f.update(e)}}};this.then=function(e,d,c){var a;if(Ext.isFunction(e)||Ext.isFunction(d)||Ext.isFunction(c)){a=Ext.create('Deft.promise.Resolver',e,d,c);n(function(){return o(a)});return a.promise}return this.promise};return this},resolve:Ext.emptyFn,reject:Ext.emptyFn,update:Ext.emptyFn,then:Ext.emptyFn},1,0,0,0,0,0,[Deft.promise,'Resolver',Deft,'Resolver'],0);Ext.cmd.derive('Deft.promise.Promise',Ext.Base,{alternateClassName:['Deft.Promise'],statics:{when:function(b){var a;a=Ext.create('Deft.promise.Deferred');a.resolve(b);return a.promise},isPromise:function(a){return (a&&Ext.isFunction(a.then))===!0},all:function(a){if(!(Ext.isArray(a)||Deft.Promise.isPromise(a))){throw new Error('Invalid parameter: expected an Array or Promise of an Array.')}return Deft.Promise.map(a,function(b){return b})},any:function(a){if(!(Ext.isArray(a)||Deft.Promise.isPromise(a))){throw new Error('Invalid parameter: expected an Array or Promise of an Array.')}return Deft.Promise.some(a,1).then(function(b){return b[0]},function(b){if(b.message==='Too few Promises were resolved.'){throw new Error('No Promises were resolved.')}else {throw b}})},some:function(b,a){if(!(Ext.isArray(b)||Deft.Promise.isPromise(b))){throw new Error('Invalid parameter: expected an Array or Promise of an Array.')}if(!Ext.isNumeric(a)||a<=0){throw new Error('Invalid parameter: expected a positive integer.')}return Deft.Promise.when(b).then(function(c){var h,d,f,o,n,m,i,g,e,j,k,l,p;k=[];e=a;g=c.length-e+1;d=Ext.create('Deft.promise.Deferred');if(c.length<a){d.reject(new Error('Too few Promises were resolved.'))}else {j=function(f){k.push(f);e--;if(e===0){h();d.resolve(k)}return f};i=function(e){g--;if(g===0){h();d.reject(new Error('Too few Promises were resolved.'))}return e};h=function(){return j=i=Ext.emptyFn};n=function(d){return j(d)};o=function(d){return i(d)};for(f=l=0,p=c.length;l<p;f=++l){m=c[f];if(f in c){Deft.Promise.when(m).then(n,o)}}}return d.promise})},delay:function(b,a){var c;if(arguments.length===1){a=b;b=void 0}a=Math.max(a,0);c=Ext.create('Deft.promise.Deferred');setTimeout(function(){c.resolve(b)},a);return c.promise},timeout:function(d,e){var c,a,b;a=Ext.create('Deft.promise.Deferred');b=setTimeout(function(){if(b){a.reject(new Error('Promise timed out.'))}},e);c=function(){clearTimeout(b);return b=null};Deft.Promise.when(d).then(function(b){c();a.resolve(b)},function(b){c();a.reject(b)});return a.promise},memoize:function(d,b,c){var a;a=Deft.util.Function.memoize(d,b,c);return function(){return Deft.Promise.all(Ext.Array.toArray(arguments)).then(function(e){return a.apply(b,e)})}},map:function(a,b){if(!(Ext.isArray(a)||Deft.Promise.isPromise(a))){throw new Error('Invalid parameter: expected an Array or Promise of an Array.')}if(!Ext.isFunction(b)){throw new Error('Invalid parameter: expected a function.')}return Deft.Promise.when(a).then(function(c){var e,d,k,g,i,f,h,j;g=c.length;f=new Array(c.length);e=Ext.create('Deft.promise.Deferred');if(!g){e.resolve(f)}else {i=function(h,d){return Deft.Promise.when(h).then(function(e){return b(e,d,f)}).then(function(i){f[d]=i;if(!--g){e.resolve(f)}return i},e.reject)};for(d=h=0,j=c.length;h<j;d=++h){k=c[d];if(d in c){i(c[d],d)}else {g--}}}return e.promise})},reduce:function(a,c,d){var b;if(!(Ext.isArray(a)||Deft.Promise.isPromise(a))){throw new Error('Invalid parameter: expected an Array or Promise of an Array.')}if(!Ext.isFunction(c)){throw new Error('Invalid parameter: expected a function.')}b=arguments.length===3;return Deft.Promise.when(a).then(function(f){var e;e=[function(b,e,g){return Deft.Promise.when(b).then(function(h){return Deft.Promise.when(e).then(function(i){return c(h,i,g,f)})})}];if(b){e.push(d)}return Deft.Promise.reduceArray.apply(f,e)})},reduceArray:function(f,g){var e,b,a,d,c;a=0;b=Object(this);d=b.length>>>0;e=arguments;if(e.length<=1){while(!0){if(a in b){c=b[a++];break}if(++a>=d){throw new TypeError('Reduce of empty array with no initial value')}}}else {c=e[1]}while(a<d){if(a in b){c=f(c,b[a],a,b)}a++}return c}},constructor:function(a){var b;b=function(b){Deft.util.Function.nextTick(function(){throw b})};this.then=function(b,d,c,e){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0],b=f.success,d=f.failure,c=f.progress,e=f.scope}if(e!=null){if(Ext.isFunction(b)){b=Ext.Function.bind(b,e)}if(Ext.isFunction(d)){d=Ext.Function.bind(d,e)}if(Ext.isFunction(c)){c=Ext.Function.bind(c,e)}}return a.then(b,d,c)};this.otherwise=function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0],b=d.fn,c=d.scope}if(c!=null){b=Ext.Function.bind(b,c)}return a.then(null,b)};this.always=function(c,d){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0],c=e.fn,d=e.scope}if(d!=null){c=Ext.Function.bind(c,d)}return a.then(function(f){var e;try{c()}catch(g){e=g;b(e)}return f},function(f){var e;try{c()}catch(g){e=g;b(e)}throw f})};this.done=function(){a.then(null,b)};this.cancel=function(b){if(b==null){b=null}a.reject(new CancellationError(b))};this.log=function(b){if(b==null){b=''}return a.then(function(c){Deft.Logger.log(''+(b||'Promise')+' resolved with value: '+c);return c},function(c){Deft.Logger.log(''+(b||'Promise')+' rejected with reason: '+c);throw c})};return this},then:Ext.emptyFn,otherwise:Ext.emptyFn,always:Ext.emptyFn,done:Ext.emptyFn,cancel:Ext.emptyFn,log:Ext.emptyFn},1,0,0,0,0,0,[Deft.promise,'Promise',Deft,'Promise'],function(){var a;if(Array.prototype.reduce!=null){this.reduceArray=Array.prototype.reduce}a=typeof exports!=='undefined'&&exports!==null?exports:window;a.CancellationError=function(a){if(Error.captureStackTrace){Error.captureStackTrace(this,CancellationError)}this.name='Canceled';this.message=a};a.CancellationError.prototype=new Error();a.CancellationError.constructor=a.CancellationError});Ext.cmd.derive('Deft.promise.Chain',Ext.Base,{alternateClassName:['Deft.Chain'],statics:{sequence:function(c,a){var b;if(a==null){a=null}b=[].slice.call(arguments,2);return Deft.Promise.reduce(c,function(d,e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return Deft.Promise.when(e.apply(a,b)).then(function(b){d.push(b);return d})},[])},parallel:function(c,a){var b;if(a==null){a=null}b=[].slice.call(arguments,2);return Deft.Promise.map(c,function(d){if(!Ext.isFunction(d)){throw new Error('Invalid parameter: expected a function.')}return d.apply(a,b)})},pipeline:function(c,b,a){if(a==null){a=null}return Deft.Promise.reduce(c,function(e,d){if(!Ext.isFunction(d)){throw new Error('Invalid parameter: expected a function.')}return d.call(a,e)},b)}}},0,0,0,0,0,0,[Deft.promise,'Chain',Deft,'Chain'],0);Ext.cmd.derive('Deft.promise.Deferred',Ext.Base,{alternateClassName:['Deft.Deferred'],statics:{resolve:function(b){var a;a=Ext.create('Deft.promise.Deferred');a.resolve(b);return a.promise},reject:function(b){var a;a=Ext.create('Deft.promise.Deferred');a.reject(b);return a.promise}},promise:null,constructor:function(){var a;a=Ext.create('Deft.promise.Resolver');this.promise=a.promise;this.resolve=function(b){return a.resolve(b)};this.reject=function(b){return a.reject(b)};this.update=function(b){return a.update(b)};return this},resolve:Ext.emptyFn,reject:Ext.emptyFn,update:Ext.emptyFn,getPromise:function(){return this.promise}},1,0,0,0,0,0,[Deft.promise,'Deferred',Deft,'Deferred'],0);Ext.cmd.derive('Ext.ux.IFrame',Ext.Component,{loadMask:'Loading...',src:'about:blank',renderTpl:['<iframe src="{src}" id="{id}-iframeEl" data-ref="iframeEl" name="{frameName}" width="100%" height="100%" frameborder="0"></iframe>'],childEls:['iframeEl'],initComponent:function(){Ext.Component.prototype.initComponent.call(this);this.frameName=this.frameName||this.id+'-frame'},initEvents:function(){var a=this;Ext.Component.prototype.initEvents.call(this);a.iframeEl.on('load',a.onLoad,a)},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{src:this.src,frameName:this.frameName})},getBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){try{return this.getWin().document}catch(b){return null}},getWin:function(){var a=this,b=a.frameName,c=Ext.isIE?a.iframeEl.dom.contentWindow:window.frames[b];return c},getFrame:function(){var a=this;return a.iframeEl.dom},beforeDestroy:function(){this.cleanupListeners(!0);Ext.Component.prototype.beforeDestroy.call(this)},cleanupListeners:function(c){var a,b;if(this.rendered){try{a=this.getDoc();if(a){Ext.get(a).un(this._docListeners);if(c){for(b in a){if(a.hasOwnProperty&&a.hasOwnProperty(b)){delete a[b]}}}}}catch(d){}}},onLoad:function(){var a=this,c=a.getDoc(),b=a.onRelayedEvent;if(c){try{Ext.get(c).on(a._docListeners={mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,scope:a})}catch(d){}Ext.get(this.getWin()).on('beforeunload',a.cleanupListeners,a);this.el.unmask();this.fireEvent('load',this)}else {if(a.src){this.el.unmask();this.fireEvent('error',this)}}},onRelayedEvent:function(a){var b=this.iframeEl,c=b.getTrueXY(),e=a.getXY(),d=a.getTrueXY();a.xy=[c[0]+d[0],c[1]+d[1]];a.injectEvent(b);a.xy=e},load:function(c){var a=this,b=a.loadMask,d=a.getFrame();if(a.fireEvent('beforeload',a,c)!==!1){if(b&&a.el){a.el.mask(b)}d.src=a.src=c||a.src}}},0,['uxiframe'],['component','box','uxiframe'],{'component':!0,'box':!0,'uxiframe':!0},['widget.uxiframe'],0,[Ext.ux,'IFrame'],0);Ext.cmd.derive('ccReidComponents.button.ActionButton',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{cls:'ccActionButtonCss',glyph:a.glyph,scale:'small'});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.glyph=a.glyph;Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_actionbutton'],['component','box','button','ccreid_actionbutton'],{'component':!0,'box':!0,'button':!0,'ccreid_actionbutton':!0},['widget.ccreid_actionbutton'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'ActionButton'],0);Ext.cmd.derive('ccReidComponents.button.AddButton',ccReidComponents.button.ActionButton,{initComponent:function(){var a=this;Ext.apply(a,{glyph:'xf067@FontAwesome',tooltip:a.L('Add')});ccReidComponents.button.ActionButton.prototype.initComponent.apply(this,arguments)}},0,['ccreid_addbutton'],['component','box','button','ccreid_actionbutton','ccreid_addbutton'],{'component':!0,'box':!0,'button':!0,'ccreid_actionbutton':!0,'ccreid_addbutton':!0},['widget.ccreid_addbutton'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'AddButton'],0);Ext.cmd.derive('ccReidComponents.button.AddFileButton',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{text:a.L('AddFile'),itemId:'addFileButtonItemId',cls:'buttonCss fileButtonCss',handler:function(){var a=this;Ext.create('ccReidComponents.button.ccreid_addfilewindow',{title:a.L('AddFile'),width:400,items:[],itemId:'addFileWindow',buttons:[],parentObject:a.parentObject,projectId:a.projectId,contentDocument:a.contentDocument,folderId:a.folderId,createFile:a.createFile}).show()}});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.contentDocument=a.contentDocument||null;b.createFile=a.createFile||!1;b.parentObject=a.componentId||null;b.projectId=a.projectId;b.folderId=a.folderId;Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_addfilebutton'],['component','box','button','ccreid_addfilebutton'],{'component':!0,'box':!0,'button':!0,'ccreid_addfilebutton':!0},['widget.ccreid_addfilebutton'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'AddFileButton'],0);Ext.cmd.derive('ccReidComponents.button.CloseButton',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{text:a.L('Cancel'),itemId:'closeButtonItemId',scale:'medium',cls:'buttonCss closeButton',handler:function(){a.closeFunction()}});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.closeFunction=a.closeFunction;Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_closebutton'],['component','box','button','ccreid_closebutton'],{'component':!0,'box':!0,'button':!0,'ccreid_closebutton':!0},['widget.ccreid_closebutton'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'CloseButton'],0);Ext.cmd.derive('ccReidComponents.button.SubmitButton',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{itemId:'submitButtonItemId',scale:'medium',cls:'buttonCss submitButton',style:{marginLeft:a.rtl?'10px!important':''},submitFunction:a.submitFunction,handler:function(){if(Ext.isFunction(a.submitFunction)){a.submitFunction()}}});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.submitFunction=a.submitFunction||null;Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_submitbutton'],['component','box','button','ccreid_submitbutton'],{'component':!0,'box':!0,'button':!0,'ccreid_submitbutton':!0},['widget.ccreid_submitbutton'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.button,'SubmitButton'],0);Ext.cmd.derive('ccReidComponents.form.field.CheckBoxIcon',Ext.form.field.Checkbox,{initComponent:function(){var a=this;Ext.apply(a,{boxLabel:a.label,beforeBoxLabelTextTpl:a.icon,checked:a.checked,disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.Checkbox.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.icon='<span class="'+a.image+'"></span>';b.label=a.label;b.checked=a.checked;b.dataValue=a.dataValue;Ext.form.field.Checkbox.prototype.constructor.apply(this,arguments)}},1,['ccreid_checkboxicon'],['component','box','field','checkboxfield','checkbox','ccreid_checkboxicon'],{'component':!0,'box':!0,'field':!0,'checkboxfield':!0,'checkbox':!0,'ccreid_checkboxicon':!0},['widget.ccreid_checkboxicon'],0,[ccReidComponents.form.field,'CheckBoxIcon'],0);Ext.cmd.derive('ccReidComponents.container.categoriesFilter.CategoriesFilterController',Ext.app.ViewController,{crudManager:ccReidComponents.store.crudManager.CrudManager,control:{'[reference=categoryFilterContainer]':{change:'categoryFilterContainerChange'},'[reference=kindCheckBox]':{change:'kindCheckBoxChange'},'[reference=subjectTypeCheckBox]':{change:'subjectTypeCheckBoxChange'}},getKindsFilters:function(){var a=this;var b={className:'KanbanManagementRequest',actionName:'getKindsSubKindsFilter'};a.crudManager.makeRequest(b).then(function(c){var e=a.getView().down('#kindsContainerId');var d=a.getView().down('#subjectTypesContainerId');var b=a.getView();Ext.each(c.kindsList,function(a){if(b.possibleKinds==null||Ext.Array.contains(b.possibleKinds,a.value)){e.add({cls:'checkboxWithIconAndLabel marginLR0',xtype:'ccreid_checkboxicon',label:a.label,image:a.image,itemId:a.itemId,checked:Ext.Array.contains(b.checkedKinds,a.value),reference:'kindCheckBox',dataValue:a.value})}});Ext.each(c.subjectTypesList,function(a){if(b.possibleSubjectTypes==null||Ext.Array.contains(b.possibleSubjectTypes,a.value)){d.add({cls:'checkboxWithIconAndLabel marginLR0',xtype:'ccreid_checkboxicon',label:a.label,image:a.image,itemId:a.itemId,checked:Ext.Array.contains(b.checkedSubjectTypes,a.value),reference:'subjectTypeCheckBox',dataValue:a.value})}})});a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().kindFieldName+':updatesource',a.handleKindUpdateSource.bind(a));a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().subjectTypeFieldName+':updatesource',a.handleSubjectTypeUpdateSource.bind(a));a.getView().parentObject.on(a.getView().parentObject.getId()+':'+a.getView().kindFieldName+':clearFilter',a.handleClearFilter.bind(a))},handleClearFilter:function(){var a=this;a.getView().down('#categoryFilterPresets').setValue({inputValue:'All'});a.clearAllCategoriesSelection()},handleKindUpdateSource:function(c){var a=this;var b=a.getView().down('#kindsContainerId');a.handleUpdateSource(b,c)},handleSubjectTypeUpdateSource:function(c){var a=this;var b=a.getView().down('#subjectTypesContainerId');a.handleUpdateSource(b,c)},handleUpdateSource:function(b,a){Ext.each(b.items.getRange(),function(c){if(c.xtype=='ccreid_checkboxicon'&&(a.data.length==0||Ext.Array.contains(a.data,c.dataValue)!=!0)){if(c.getValue()==!1){c.setVisible(!1)}else {c.setDisabled(!0)}}else {if(c.isVisible()!=!0){c.setVisible(!0)}if(c.isDisabled()==!0){c.setDisabled(!1)}}})},categoryFilterContainerChange:function(d,a,c){var b=this;if(a.categoryFilterRadio=='All'){b.clearAllCategoriesSelection()}},clearAllCategoriesSelection:function(){var b=this;var a=b.getView();a.checkedKinds=[];a.checkedSubjectTypes=[];Ext.each(a.down('#kindsContainerId').items.getRange(),function(a){if(a.xtype=='ccreid_checkboxicon'){a.setValue(!1)}});Ext.each(a.down('#subjectTypesContainerId').items.getRange(),function(a){if(a.xtype=='ccreid_checkboxicon'){a.setValue(!1)}});a.parentObject.fireEvent(a.parentObject.getId()+':'+a.kindFieldName+':filterdata',{data:a.checkedKinds,fieldName:a.kindFieldName});a.parentObject.fireEvent(a.parentObject.getId()+':'+a.subjectTypeFieldName+':filterdata',{data:a.checkedSubjectTypes,fieldName:a.subjectTypeFieldName})},kindCheckBoxChange:function(c,b,d){var a=this.getView();this.setCheckBoxes(c,b,a,a.checkedKinds,a.kindFieldName)},subjectTypeCheckBoxChange:function(c,b,d){var a=this.getView();this.setCheckBoxes(c,b,a,a.checkedSubjectTypes,a.subjectTypeFieldName)},setCheckBoxes:function(d,e,b,a,c){if(e){a.push(d.dataValue)}else {a=Ext.Array.remove(a,d.dataValue)}if(a.length>0){b.down('#CustomPreset').setValue(!0)}b.parentObject.fireEvent(b.parentObject.getId()+':'+c+':filterdata',{data:a,fieldName:c})}},0,0,0,0,['controller.CategoriesFilterController'],0,[ccReidComponents.container.categoriesFilter,'CategoriesFilterController'],0);Ext.cmd.derive('ccReidComponents.grid.tabGrid.TabGrid',Ext.grid.Panel,{initComponent:function(){var a=this;if(a.columns){a.columns.map(function(a){a.align='center';a.menuDisabled=!0;a.tdCls=a.tdCls==null?'leftBorde':a.tdCls+' leftBorde';a.draggable=!1})}a.cls=a.cls==null?'ccreid-tabGrid':a.cls+' ccreid-tabGrid';a.on('afterrender',function(b){if(b.getStore().loading){b.mask(a.L('Loading'))}});a.emptyText=a.L('NoDataToDisplay');Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},selModel:{selType:'checkboxmodel',mode:'SINGLE',allowDeselect:!0,checkOnly:!1},bindStore:function(a,c){var b=this;Ext.grid.Panel.prototype.bindStore.apply(this,arguments);if(a.loading){a.on('load',function(){if(b.rendered){b.unmask()}})}},constructor:function(b){var a=this;if(a.columns){a.columns.map(function(a){a.align='center';a.menuDisabled=!0;a.tdCls=a.tdCls==null?'leftBorde':a.tdCls+' leftBorde';a.draggable=!1})}a.cls=b.cls==null?'ccreid-tabGrid':b.cls+' ccreid-tabGrid';Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_tabgrid'],['component','box','container','panel','tablepanel','gridpanel','grid','ccreid_tabgrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'ccreid_tabgrid':!0},['widget.ccreid_tabgrid'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.grid.tabGrid,'TabGrid'],0);Ext.cmd.derive('ccReidComponents.utils.Upload',Ext.Base,{statics:{requires:['ccReidComponents.store.crudManager.CrudManager'],crudManager:ccReidComponents.store.crudManager.CrudManager,uploadFileByCase:function(e,f,d,a,b){var c=this;a.tempFile=f!=!0;c.createBlob(e,b).then(function(g){c.triggerEvent('contentVersionCreated',d,{contentVersionId:g.id});c.uploadFile(a,b,g.id).then(function(h){a.lastModified=b[0].lastModified;a.name=b[0].name;a.size=b[0].size;a.type=b[0].type;a.webkitRelativePath=b[0].webkitRelativePath;c.triggerEvent('fileCreated',d,{fileId:g.id,dataFile:a})})})},triggerEvent:function(c,a,b){var d=this;if(c=='contentVersionCreated'){a.fireEvent(a.getId()+':contentVersion',b)}if(c=='fileCreated'){a.fireEvent(a.getId()+':file__c',b)}},createBlob:function(b,a){var f=this;var c=new Ext.Deferred();var e='ContentVersion';var d={Origin:'H',PathOnClient:a[0].name};if(b){d.ContentDocumentId=b}client.createBlob(e,d,a[0].name,'VersionData',a[0],function(d){c.resolve(d)});return c.promise},uploadFile:function(a,b,c){var e=this;var d={className:'FileTreeRequest',actionName:'createFile',projectId:a.projectId,folderId:a.folderId||null,fileId:a.fileId,tempId:a.tempId,tempFile:a.tempFile,contentVersionId:c||null,fileName:b[0].name,fileSize:b[0].size,description:a.description||''};return e.crudManager.makeRequest(d)},uploadUrl:function(a){var c=this;var b={className:'FileTreeRequest',actionName:'createUrl',projectId:a.projectId,fileId:a.fileId,tempId:a.tempId,fileName:a.urlName,folderId:a.folderId,url:a.url,description:a.description||''};return c.crudManager.makeRequest(b)},editUrl:function(d,c,b,e){var f=this;var a={};var a={className:'FileTreeRequest',actionName:'editUrl',fileId:d,newName:c,description:b,url:e};return f.crudManager.makeRequest(a)},removeFile:function(b){var c=this;var a={};var a={className:'FileTreeRequest',actionName:'deleteFiles',fileIds:b};return c.crudManager.makeRequest(a)},removeUrl:function(a){}}},0,0,0,0,0,0,[ccReidComponents.utils,'Upload'],0);Ext.cmd.derive('ccReidComponents.container.filesView.FilesView',ccReidComponents.grid.tabGrid.TabGrid,{required:['ccReidComponents.filesView.FilesViewController','ccReidComponents.container.toolbar.Toolbar','ccReidComponents.utils.Upload'],bodyPadding:0,controller:'FilesViewController',crudManager:ccReidComponents.store.crudManager.CrudManager,allowDeselect:!0,reference:'filesgrid',uploader:ccReidComponents.utils.Upload,selModel:{selType:'checkboxmodel',mode:'SINGLE',allowDeselect:!0,checkOnly:!0},initComponent:function(){var a=this;Ext.apply(a,{cls:'ccreid-filesView',scrollable:'vertical',plugins:{ptype:'cellediting',clicksToEdit:1},dockedItems:[{xtype:'ccreid_toolbar',dock:'top',layout:{pack:'end',type:'hbox'},items:[{xtype:'ccreid_actionbutton',glyph:'xf016@FontAwesome',reference:'addNewFileButton',tooltip:a.L('AddFile')},{xtype:'ccreid_actionbutton',glyph:'xf0c1@FontAwesome',reference:'addNewUrlButton',tooltip:a.L('AddLink')},{xtype:'ccreid_actionbutton',disabled:!0,glyph:'xf014@FontAwesome',reference:'deleteFileOrUrlButton',itemId:'deleteFileButton',tooltip:a.L('DeleteFile')}]}],columns:[{text:this.L('Type'),dataIndex:'type',align:'center',flex:1,renderer:function(c,d,a){var b=a.get('type')||'url';if(b==='url'){return '<i class="fa fa-link" aria-hidden="true"></i>'}else {return '<i class="fa fa-file-o" aria-hidden="true"></i>'}}},{dataIndex:'name',header:this.L('Name'),flex:2,align:'center',renderer:function(b,c,a){if(a.data.type=='file'){if(a.data.contentDocumentId){return '<a href="'+client.instanceUrl+'/'+a.data.contentDocumentId+'" target="_blank">'+b+'</a><i class="fa fa-pencil fileEditIcon" aria-hidden="true"></i>'}else {return '<a href="'+client.instanceUrl+'/'+a.data.contentVersionId+'" target="_blank">'+b+'</a><i class="fa fa-pencil fileEditIcon" aria-hidden="true"></i>'}}else {return '<a href="'+a.getData().url+'" target="_blank">'+b+'</a><i class="fa fa-pencil fileEditIcon" aria-hidden="true"></i>'}},editor:{xtype:'textfield',allowBlank:!0}},{dataIndex:'description',header:this.L('Description'),flex:2,align:'center',renderer:function(a,d,c){var b=a||'';return '<span>'+b+'</span><i class="fa fa-pencil fileEditIcon" aria-hidden="true"></i>'},editor:{xtype:'textfield',allowBlank:!0}},{text:this.L('Date'),dataIndex:'fileDate',format:a.rtl?'m/d/Y':'d/m/Y',flex:2,renderer:a.rtl?Ext.util.Format.dateRenderer('m/d/Y'):Ext.util.Format.dateRenderer('d/m/Y'),align:'center'},{text:this.L('UploadBy'),dataIndex:'user',flex:2,align:'center'},{xtype:'checkcolumn',text:this.L('involvedWorkflow'),tdCls:'no-dirty',dataIndex:'isInvolvedWorkflow',flex:2,align:'center',sortable:!1}],store:Ext.create('Ext.data.Store',{storeId:'filesViewStore',view:this,proxy:{type:'salesforce',configuration:{read:{type:'apexrest',request:{className:'FileTreeRequest',actionName:'getFilesList',projectId:a.projectId,fileId:a.issueId},dataKey:'files'},create:{type:'apexrest',request:{className:'FileTreeRequest',actionName:'createFile'}},update:{type:'apexrest',request:{className:'FileTreeRequest',actionName:'updateFile'}}}},listeners:{load:function(b){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_filesview'})},datachanged:function(b,c){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_filesview'})},add:function(c,a,d){var b=this;a[0].set('tempId',a[0].get('id'),{silent:!0});if(a[0].data.type=='url'){b.getProxy().configuration.create.request.actionName='createUrl'}else {b.getProxy().configuration.create.request.actionName='createFile'}b.getProxy().create(c)},update:function(d,a,c,b){var e=this;if(a.get('fileId')==null){a.set('fileId',a.get('id'),{silent:!0})}if(b&&Ext.Array.contains(b,'isInvolvedWorkflow')){if(a.data.isInvolvedWorkflow){a.set('involvedWorkflow',['Work'])}else {a.set('involvedWorkflow',[])}}else {e.getProxy().update(d,c)}}},autoLoad:!0,fields:['description','fileDate','user','type','thumbNailLarge','involvedWorkflow','fileId','url','size','contentDocumentId','tempId','name',{name:'id',mapping:function(a){return a.fileId}},{name:'isInvolvedWorkflow',mapping:function(a){return a.involvedWorkflow&&a.involvedWorkflow.length>0&&a.involvedWorkflow[0]=='Work'}}]})});ccReidComponents.grid.tabGrid.TabGrid.prototype.initComponent.apply(this,arguments)},listeners:{deselect:function(b,a){this.getDockedItems()[0].items.getRange()[2].setDisabled(!0)},select:function(b,a){this.getDockedItems()[0].items.getRange()[2].setDisabled(!1)}},constructor:function(a){var b=this;b.projectId=a.projectId;b.issueId=a.issueId;b.folderId=a.folderId;ccReidComponents.grid.tabGrid.TabGrid.prototype.constructor.apply(this,arguments)}},1,['ccreid_filesview'],['component','box','container','panel','tablepanel','gridpanel','grid','ccreid_tabgrid','ccreid_filesview'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'ccreid_tabgrid':!0,'ccreid_filesview':!0},['widget.ccreid_filesview'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.filesView,'FilesView'],0);Ext.cmd.derive('ccReidComponents.container.filesView.FilesViewController',Ext.app.ViewController,{control:{'[reference=addNewUrlButton]':{click:'addUrlButtonClicked'},'[reference=addNewFileButton]':{click:'addFileButtonClicked'},'[reference=deleteFileOrUrlButton]':{click:'deleteFileOrUrlButtonClicked'}},required:['ccReidComponents.window.CcreidMessageBox'],uploader:ccReidComponents.utils.Upload,addRecordToStore:function(a){var b=this.getView();b.getStore().add(a)},addUrlButtonClicked:function(c){var a=this.getView();var b=this;Ext.create('ccReidComponents.noneGeneric.window.AddUrlWindow',{title:a.L('AddLink'),width:400,parentObject:a,items:[],itemId:'addFileWindow',buttons:[],projectId:a.projectId,folderId:a.issueId}).show().on('submitUrlUpload',function(a){b.addRecordToStore(a)})},addFileButtonClicked:function(c){var a=this.getView();var b=this;Ext.create('ccReidComponents.noneGeneric.window.AddFileWindow',{title:a.L('AddFile'),width:400,parentObject:a,items:[],itemId:'addFileWindow',buttons:[],projectId:a.projectId,folderId:a.issueId,contentDocument:a.contentDocument,createFile:!0}).show().on('submitFileUpload',function(a){b.addRecordToStore(a)})},deleteFileOrUrlButtonClicked:function(f){var a=this.getView();var d=this;var e=a.getSelectionModel();var b=e.getSelection();var c=Ext.create('ccReidComponents.window.CcreidMessageBox',{});c.show({title:a.L('RemoveFile'),message:a.L('AreYouSure'),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e==='yes'){var c=b[0].id;a.getSelectionModel().deselectAll();a.store.remove(b[0]);d.uploader.removeFile([c]).then(function(a){})}}})}},0,0,0,0,['controller.FilesViewController'],0,[ccReidComponents.container.filesView,'FilesViewController'],0);Ext.cmd.derive('ccReidComponents.container.formRow.FormRowController',Ext.app.ViewController,{crudManager:ccReidComponents.store.crudManager.CrudManager,control:{},setRowItems:function(){var b=this;var a=b.getView();Ext.each(a.rowItems,function(b){b.cls='fieldCls '+(b.cls!=null?b.cls:'');a.add(b)})}},0,0,0,0,['controller.FormRowController'],0,[ccReidComponents.container.formRow,'FormRowController'],0);Ext.cmd.derive('ccReidComponents.container.formRow.FormRow',Ext.container.Container,{controller:'FormRowController',initComponent:function(){var a=this;Ext.apply(a,{hidden:a.hidden,layout:'hbox',cls:'formRow',itemId:a.rowItemId,items:[{xtype:'label',text:a.textLabel,cls:'labelCls '+a.extraLabelCls}]});Ext.container.Container.prototype.initComponent.apply(this,arguments);a.getController().setRowItems()},constructor:function(a){var b=this;b.textLabel=a.textLabel;b.extraLabelCls=a.labelCls;b.rowItemId=a.rowItemId;b.rowItems=a.rowItems;b.hidden=a.hidden;Ext.container.Container.prototype.constructor.apply(this,arguments)}},1,['ccreid_formrow'],['component','box','container','ccreid_formrow'],{'component':!0,'box':!0,'container':!0,'ccreid_formrow':!0},['widget.ccreid_formrow'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.formRow,'FormRow'],0);Ext.cmd.derive('ccReidComponents.container.pagingtoolbar.Paging',Ext.toolbar.Paging,{initComponent:function(){var a=this;Ext.apply(a,{displayInfo:!0,style:'background-color: #f0f3f7 !important;',displayMsg:a.L('Displaying')+' {0} - {1} '+a.L('Of')+' {2}',lastText:a.L('LastPage'),nextText:a.L('NextPage'),prevText:a.L('PreviousPage'),firstText:a.L('FirstPage'),afterPageText:a.L('Of')+' {0}',beforePageText:a.L('Page'),emptyMsg:a.L('NoDataToDisplay'),refreshText:a.L('refreshText')});Ext.toolbar.Paging.prototype.initComponent.apply(this,arguments)}},0,['ccreid_pagingtoolbar'],['component','box','container','toolbar','pagingtoolbar','ccreid_pagingtoolbar'],{'component':!0,'box':!0,'container':!0,'toolbar':!0,'pagingtoolbar':!0,'ccreid_pagingtoolbar':!0},['widget.ccreid_pagingtoolbar'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.container.pagingtoolbar,'Paging'],0);Ext.cmd.derive('ccReidComponents.container.tabPanel.TabPanel',Ext.tab.Panel,{required:['ccReidComponents.tabPanel.TabPanelController'],controller:'TabPanelController',initComponent:function(){var a=this;Ext.apply(a,{xtype:'tabpanel',cls:'allow-overflow',activeTab:0,plain:!0});Ext.tab.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.tabsArray=a.tabsArray||[];Ext.tab.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_tabPanel'],['component','box','container','panel','tabpanel','ccreid_tabPanel'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0,'ccreid_tabPanel':!0},['widget.ccreid_tabPanel'],0,[ccReidComponents.container.tabPanel,'TabPanel'],0);Ext.cmd.derive('ccReidComponents.container.tabPanel.TabPanelController',Ext.app.ViewController,{control:{'[reference=button]':{click:'buttonHandler'}},buttonHandler:function(a){}},0,0,0,0,['controller.TabPanelController'],0,[ccReidComponents.container.tabPanel,'TabPanelController'],0);Ext.cmd.derive('ccReidComponents.container.toolbar.Toolbar',Ext.toolbar.Toolbar,{cls:'ccreid-toolbar',cls:'ccreid_toolbar'},0,['ccreid_toolbar'],['component','box','container','toolbar','ccreid_toolbar'],{'component':!0,'box':!0,'container':!0,'toolbar':!0,'ccreid_toolbar':!0},['widget.ccreid_toolbar'],0,[ccReidComponents.container.toolbar,'Toolbar'],0);Ext.cmd.derive('ccReidComponents.form.field.Combobox',Ext.form.field.ComboBox,{initComponent:function(){var a=this;Ext.apply(a,{emptyCls:'emptyTextCls',cls:'comboboxCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments)},listeners:{change:function(a,b,c){if(a.parentObject!=null){a.parentObject.fireEvent(a.itemId+':comboboxValueChange',b)}},afterrender:function(a){if(a.getInitialConfig().hasOwnProperty('proxy')){var b=a.getInitialConfig('storeId');var d=Object.assign(a.getInitialConfig('proxy'),{type:'salesforce'});var c=Ext.StoreManager.get(b);if(!c){c=Ext.create('Ext.data.Store',{storeId:b,proxy:d,autoLoad:!0})}}if(a.getInitialConfig().hasOwnProperty('storeId')){var b=a.getInitialConfig('storeId');a.bindStore(Ext.create('Ext.data.Store',{autoLoad:!0,proxy:{type:'viewproxy',dataSource:b}}))}}},filterStore:function(b){var a=this;var c=function(c){if(Ext.isArray(b)){return Ext.Array.contains(b,c.getData()[a.filterFieldName])}else {return c.getData()[a.filterFieldName]==b}};if(a.filterFn){c=a.filterFn}if(a.initFilterFn){a.initFilterFn()}a.store.getFilters().replaceAll({filterFn:c})},bindStore:function(b,c){var a=this;if(a.effectedItemId!=null||Ext.isArray(a.effectedItemId)&&a.effectedItemId.length>0){if(a.filterFieldName==null||a.parentObject==null){throw new Error(a.L('EffectedStoreMissingRequiredParameters'))}else {if(Ext.isArray(a.effectedItemId)){Ext.Array.forEach(a.effectedItemId,function(d){a.parentObject.on(d+':comboboxValueChange',a.filterStore.bind(a))})}else {a.parentObject.on(a.effectedItemId+':comboboxValueChange',a.filterStore.bind(a))}}}if(!a.hasOwnProperty('destroying')){a.fireEvent('storeBounded',a,b)}Ext.form.field.ComboBox.prototype.bindStore.apply(this,arguments)},constructor:function(a){var b=this;if(a.proxy){if(!a.proxy.configuration){throw new Error('combobox with proxy requires "configuration" object')}else {if(!a.proxy.configuration.read){throw new Error('combobox with proxy requires "configuration" with "read" object')}else {if(!a.proxy.configuration.read.type){throw new Error('combobox with proxy requires "type" in "read" object')}else {if(!a.proxy.configuration.read.request){throw new Error('combobox with proxy requires "request" in "read" object')}else {if(!a.storeId){throw new Error('combobox with proxy requires "storeId" value')}}}}}}Ext.form.field.ComboBox.prototype.constructor.apply(this,arguments)}},1,['ccreid_combobox'],['component','box','field','textfield','pickerfield','combobox','combo','ccreid_combobox'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'combobox':!0,'combo':!0,'ccreid_combobox':!0},['widget.ccreid_combobox'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.field,'Combobox'],0);Ext.cmd.derive('ccReidComponents.form.field.Datefield',Ext.form.field.Date,{initComponent:function(){var a=this;Ext.apply(a,{emptyCls:'emptyTextCls',cls:'dateFieldCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.Date.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.form.field.Date.prototype.constructor.apply(this,arguments)}},1,['ccreid_datefield'],['component','box','field','textfield','pickerfield','datefield','ccreid_datefield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'pickerfield':!0,'datefield':!0,'ccreid_datefield':!0},['widget.ccreid_datefield'],0,[ccReidComponents.form.field,'Datefield'],0);Ext.cmd.derive('ccReidComponents.form.field.FileFieldLink',Ext.form.field.FileButton,{initComponent:function(){var a=this;Ext.apply(a,{cls:'fileFieldLink',text:a.linkText,fireChange:function(c){var d=this.fileInputEl.dom.files[0].name;var b=a.up('ccreid_addfilewindow');b.files=[];b.files.push(this.fileInputEl.dom.files[0]);this.fireEvent('change',this,c,this.fileInputEl.dom.value)},listeners:{change:function(f,g,h){var b=this;var d=b.up('ccreid_addfilewindow');var e=b.fileInputEl.dom.files[0].name;var a=d.down('#fileNameLabel');var c=e.substr(0,10);a.setText(c);a.setHidden(!1)}}});Ext.form.field.FileButton.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.linkText=b.linkText||'please add text to component';a.currentLocale='En';a.rtl=a.currentLocale=='He';Ext.form.field.FileButton.prototype.constructor.apply(this,arguments)}},1,['ccreid_filefieldlink'],['component','box','button','filebutton','ccreid_filefieldlink'],{'component':!0,'box':!0,'button':!0,'filebutton':!0,'ccreid_filefieldlink':!0},['widget.ccreid_filefieldlink'],0,[ccReidComponents.form.field,'FileFieldLink'],0);Ext.cmd.derive('ccReidComponents.form.field.HtmlEditor',Ext.form.field.HtmlEditor,{initComponent:function(){var a=this;Ext.apply(a,{emptyCls:'emptyTextCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.HtmlEditor.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.form.field.HtmlEditor.prototype.constructor.apply(this,arguments)}},1,['ccreid_htmleditor'],['component','box','container','fieldcontainer','htmleditor','ccreid_htmleditor'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0,'htmleditor':!0,'ccreid_htmleditor':!0},['widget.ccreid_htmleditor'],0,[ccReidComponents.form.field,'HtmlEditor'],0);Ext.cmd.derive('ccReidComponents.form.field.LabelTextWithIcon',Ext.form.Label,{iconCls:null,constructor:function(a){var b=this;b.componentCls=a.iconCls?a.iconCls+' x-label-icon':null;Ext.form.Label.prototype.constructor.apply(this,arguments)}},1,['ccreid_labeltextwithicon','iconlabel'],['component','box','label','iconlabel','ccreid_labeltextwithicon'],{'component':!0,'box':!0,'label':!0,'iconlabel':!0,'ccreid_labeltextwithicon':!0},['widget.ccreid_labeltextwithicon','widget.iconlabel'],0,[ccReidComponents.form.field,'LabelTextWithIcon'],0);Ext.cmd.derive('ccReidComponents.form.field.LinkTextWithIcon',Ext.button.Button,{initComponent:function(){var a=this;Ext.apply(a,{cls:'ccreid-linktextWithIcon',defaultBindProperty:null,glyph:a.glyph});Ext.button.Button.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.iconCls=b.iconCls?b.iconCls+' x-label-icon':null;a.glyph=b.glyph||'';a.currentLocale='En';a.rtl=a.currentLocale=='He';Ext.button.Button.prototype.constructor.apply(this,arguments)}},1,['ccreid_linktextwithicon'],['component','box','button','ccreid_linktextwithicon'],{'component':!0,'box':!0,'button':!0,'ccreid_linktextwithicon':!0},['widget.ccreid_linktextwithicon'],0,[ccReidComponents.form.field,'LinkTextWithIcon'],0);Ext.cmd.derive('ccReidComponents.form.field.NumberField',Ext.form.field.Number,{initComponent:function(){var a=this;Ext.apply(a,{emptyCls:'emptyTextCls',cls:'numberFieldCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.Number.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.form.field.Number.prototype.constructor.apply(this,arguments)}},1,['ccreid_numberfield'],['component','box','field','textfield','spinnerfield','numberfield','ccreid_numberfield'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'spinnerfield':!0,'numberfield':!0,'ccreid_numberfield':!0},['widget.ccreid_numberfield'],0,[ccReidComponents.form.field,'NumberField'],0);Ext.cmd.derive('ccReidComponents.form.field.RadioGroup',Ext.form.RadioGroup,{initComponent:function(){var a=this;Ext.apply(a,{cls:'radioGroupContainerCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.RadioGroup.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.form.RadioGroup.prototype.constructor.apply(this,arguments)}},1,['ccreid_radiogroup'],['component','box','container','fieldcontainer','checkboxgroup','radiogroup','ccreid_radiogroup'],{'component':!0,'box':!0,'container':!0,'fieldcontainer':!0,'checkboxgroup':!0,'radiogroup':!0,'ccreid_radiogroup':!0},['widget.ccreid_radiogroup'],0,[ccReidComponents.form.field,'RadioGroup'],0);Ext.cmd.derive('ccReidComponents.form.field.TextArea',Ext.form.field.TextArea,{initComponent:function(){var a=this;Ext.apply(a,{emptyCls:'emptyTextCls',disabledCls:'ccreidDisabledFieldCls'});Ext.form.field.TextArea.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;Ext.form.field.TextArea.prototype.constructor.apply(this,arguments)}},1,['ccreid_textarea'],['component','box','field','textfield','textareafield','textarea','ccreid_textarea'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'textareafield':!0,'textarea':!0,'ccreid_textarea':!0},['widget.ccreid_textarea'],0,[ccReidComponents.form.field,'TextArea'],0);Ext.cmd.derive('ccReidComponents.form.field.TextBox',Ext.form.field.Text,{initComponent:function(){var a=this;Ext.apply(a,{allowBlank:a.allowBlank,hideLabel:a.hideLabel,emptyText:a.emptyText});if(!a.hideLabel){a.add({fieldLabel:a.fieldLabel})}Ext.form.field.Text.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.hideLabel=a.hideLabel||!0;b.emptyText=a.emptyText||'';b.fieldLabel=a.fieldLabel||'';b.allowBlank=a.allowBlank||!0;Ext.form.field.Text.prototype.constructor.apply(this,arguments)}},1,['ccreid_textbox'],['component','box','field','textfield','ccreid_textbox'],{'component':!0,'box':!0,'field':!0,'textfield':!0,'ccreid_textbox':!0},['widget.ccreid_textbox'],0,[ccReidComponents.form.field,'TextBox'],0);Ext.cmd.derive('ccReidComponents.form.panel.EditIssueController',Ext.app.ViewController,{crudManager:ccReidComponents.store.crudManager.CrudManager,control:{'[reference=submitButtonClicked]':{click:'submitButtonClicked'},'[reference=closeButtonClicked]':{click:'closeButtonClicked'}},submitButtonClicked:function(e,d){var b=this;var a=b.getView();var c=a.down('ccreid_issueview').getViewModel();if(a.openFromNewTab){a.dispatcher.on('extjs:successUpdateTasksByStagesStore',function(c,a){b.issueUpdatedInGeneralStore=!0;b.issueIdUpdate=a});a.dispatcher.trigger('extjs:updateIssueStore',{issueId:a.issueId,issueData:c.get('issue')});setTimeout(function(){if(b.issueUpdatedInGeneralStore!=!0||b.issueIdUpdate!=a.issueId){Ext.StoreManager.get('issueStore:'+a.issueId).getById(a.issueId).set(c.get('issue').getData())}else {b.issueUpdatedInGeneralStore=!1;b.issueIdUpdate=null}},2000)}else {Ext.StoreManager.get('tasksByStagesStore').getById(a.issueId).set(c.get('issue').getData());if(d){b.closeButtonClicked(e)}}},closeButtonClicked:function(a){a.up('window').close()}},0,0,0,0,['controller.ccreid_editissuecontroller'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.panel,'EditIssueController'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.grid.similarIssues.SimilarIssues',ccReidComponents.grid.tabGrid.TabGrid,{required:['ccReidComponents.container.toolbar.Toolbar','ccReidComponents.noneGeneric.grid.similarIssues.Model'],initComponent:function(){var a=this;Ext.apply(a,{selModel:{},dockedItems:{xtype:'ccreid_toolbar',dock:'top',items:[{xtype:'tbspacer',height:32}]},store:Ext.create('Ext.data.Store',{storeId:'similarIssuesStore',view:a,autoLoad:!0,model:'ccReidComponents.noneGeneric.grid.similarIssues.Model',proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:"/v20.0/query/?q=Select+Id,Responsible_V1__r.Project_Worker_Name_Text__c,(Select+Id,Construct_Stage__r.Construct__r.Id,Construct_Stage__r.Construct__r.Name,Construct_Stage__r.Spot__r.Id,Construct_Stage__r.Spot__r.Spot_Name__c,Stage__r.Asset__r.Id,Stage__r.Asset__r.Name,Stage__r.Id,Stage__r.Display_Name__c,Construct_Stage__r.Id,Construct_Stage__r.Display_Name__c+From+Issue_Stages__r),Construct__r.Id,Construct__r.Name,Spot__r.Id,Spot__r.Spot_Name__c,Asset__r.Id,Asset__r.Name,Title__c,Due_Date__c,Status__c+from+Issue__c+Where+Project__c='"+a.getInitialConfig('projectId')+"'+And+Issue_Type__c='"+a.getInitialConfig('issueTypeId')+"'"}}},listeners:{load:function(b){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_similarissues'})},datachanged:function(b,c){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_similarissues'})}}}),columns:[{dataIndex:'Title__c',header:a.L('Description'),flex:1},{dataIndex:'areas',header:a.L('Areas'),flex:1,renderer:function(c){var b='';if(Ext.isArray(c)){if(c.length==1){var a=c[0];Object.keys(a).filter(function(b){return a[b]!=null&&(b=='Construct__r'||b=='Spot__r'||b=='Asset__r')}).forEach(function(d,f,e){if(e.length==1){b=a[d].hasOwnProperty('Spot_Name__c')?a[d]['Spot_Name__c']:a[d]['Name']}else {b='. . .'}})}else {b='. . .'}}return b}},{dataIndex:'stages',header:a.L('Stages'),flex:1,renderer:function(c){var b='';if(Ext.isArray(c)){if(c.length==1){var d=c[0];if(d.Id=='Project'){b=a.L(d.Id)}else {b=d.Name}}else {b='. . .'}}return b}},{dataIndex:'Due_Date__c',header:a.L('DueDate'),flex:1,format:a.rtl?'m/d/Y':'d/m/Y'},{dataIndex:'Responsible_V1__r',header:a.L('Responsible'),flex:1},{dataIndex:'Status__c',header:a.L('Status'),flex:1}]});ccReidComponents.grid.tabGrid.TabGrid.prototype.initComponent.apply(this,arguments)},listeners:{viewready:function(a){var b=a.getView();a.tip=Ext.create('Ext.tip.ToolTip',{target:b.el,delegate:b.cellSelector,trackMouse:!0,renderTo:Ext.getBody(),listeners:{beforeshow:function updateTipBody(f){var h=f.triggerElement,i=f.triggerElement.parentElement,g=b.getHeaderByCell(h).text,e=b.getHeaderByCell(h).dataIndex;var c=b.getRecord(i)?b.getRecord(i).get(e):null;if(c){var d='';if(Ext.isArray(c)&&c.length>0&&e=='stages'){if(c.length>1){d=a.L('AssignTo')+' '+c.length+' '+a.L('Stages')}else {if(c[0].Id=='Project'){d=a.L(c[0].Id)}else {d=c[0].Name}}}else {if(Ext.isArray(c)&&c.length>0&&e=='areas'){c.forEach(function(b){if(!Ext.Object.isEmpty(b)){Object.keys(b).filter(function(c){return !Ext.isEmpty(b[c])&&(c=='Construct__r'||c=='Spot__r'||c=='Asset__r')}).forEach(function(c,e,g){d+=a.L(c)+': <u>'+(b[c].hasOwnProperty('Spot_Name__c')?b[c]['Spot_Name__c']:b[c]['Name'])+'</u>';d+=e<g.length?'<br>':''})}})}else {d=c.toString()}}if(e=='Responsible_V1__r'){g=a.L(e)}if(e=='Due_Date__c'){d=Ext.Date.format(new Date(d),'d/m/Y')}f.update('<div '+(a.rtl?'style="direction:rtl;"':'')+'><b><u>'+g+':</u></b><br>'+d+'</div>')}else {return !1}}}})}},constructor:function(a){var b=this;if(!a.projectId){throw new Error('SimilarIssues cannot work without projectId')}if(!a.issueTypeId){throw new Error('SimilarIssues cannot work without issueTypeId')}if(!a.parentObject){throw new Error('SimilarIssues cannot work without parentObject pointer')}ccReidComponents.grid.tabGrid.TabGrid.prototype.constructor.apply(this,arguments)}},1,['ccreid_similarissues'],['component','box','container','panel','tablepanel','gridpanel','grid','ccreid_tabgrid','ccreid_similarissues'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'ccreid_tabgrid':!0,'ccreid_similarissues':!0},['widget.ccreid_similarissues'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.grid.similarIssues,'SimilarIssues'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.grid.SubIssues',ccReidComponents.grid.tabGrid.TabGrid,{required:['ccReidComponents.container.toolbar.Toolbar','ccReidComponents.button.AddButton','tasksByStages.model.IssueModel'],scrollable:'y',initComponent:function(){var a=this;Ext.apply(a,{dockedItems:{xtype:'ccreid_toolbar',dock:'top',layout:{pack:'end',type:'hbox'},items:[{xtype:'ccreid_addbutton',handler:function(){var b=Ext.create('ccReidComponents.noneGeneric.window.IssueViewWindow',{parentId:a.getInitialConfig('issueId'),showToolBarButtons:!0,activeUser:a.getInitialConfig('activeUser'),projectId:a.getInitialConfig('projectId')});b.show();b.on('subIssueSubmitted',a.handleSubmit.bind(a))}}]},store:Ext.create('Ext.data.Store',{view:a,storeId:'subIssuesStore',model:'tasksByStages.model.IssueModel',proxy:{type:'salesforce',configuration:{read:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'getSubIssues',projectId:a.getInitialConfig('projectId'),parentIssue:a.getInitialConfig('issueId')},dataKey:'Issues'},create:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'createNewIssue',projectId:a.getInitialConfig('projectId')},dataKey:'issuesDetails'}},listeners:{successToCreate:function(){Ext.StoreManager.get('subIssuesStore').loadPage(1)}}},autoLoad:!0,listeners:{load:function(b){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_subissues'})},datachanged:function(b,c){var a=b.view;a.parentObject.fireEvent(a.parentObject.getId()+':tabStoreChanged',a.parentObject,{badgeText:b.count()||0,tabId:'ccreid_subissues'})},add:function(a){this.getProxy().create(a)}}}),columns:[{dataIndex:'title',header:a.L('Description'),flex:1,renderer:function(b,c,d){if(b){return '<a href="javascript;" onclick="event.preventDefault()">'+b+'</a>'}else {return a.L('Loading')}}},{xtype:'datecolumn',dataIndex:'issueDueDate',header:a.L('DueDate'),flex:1,format:a.rtl?'m/d/Y':'d/m/Y'},{dataIndex:'responsible',header:a.L('Responsible'),flex:1},{dataIndex:'status',header:a.L('Status'),flex:1}]});var b=Ext.StoreManager.get('tasksByStagesStore');if(b!=null){b.getProxy().on('successtocreate',function(){a.getInitialConfig('parentObject').up('window').close()})}ccReidComponents.grid.tabGrid.TabGrid.prototype.initComponent.apply(this,arguments)},handleSubmit:function(a){var b=this;b.store.add(a)},listeners:{beforeselect:function(d,a,c,b){return !1},cellclick:function(c,i,f,b,j,g,e,h){if(e.target.tagName=='A'){var a=c.up();b.set('parentId',a.getInitialConfig('issueId'));var d=Ext.create('ccReidComponents.noneGeneric.window.IssueEditorWindow',{projectId:a.getInitialConfig('projectId'),record:b});d.show();a.getInitialConfig('parentObject').up('window').close()}}},constructor:function(a){var b=this;if(!a.issueId){throw new Error('SubIssues cannot work without issueId')}if(!a.projectId){throw new Error('SubIssues cannot work without projectId')}if(!a.activeUser){throw new Error('SubIssues cannot work without activeUser')}if(!a.parentObject){throw new Error('SubIssues cannot work without parentObject pointer')}ccReidComponents.grid.tabGrid.TabGrid.prototype.constructor.apply(this,arguments)}},1,['ccreid_subissues'],['component','box','container','panel','tablepanel','gridpanel','grid','ccreid_tabgrid','ccreid_subissues'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'ccreid_tabgrid':!0,'ccreid_subissues':!0},['widget.ccreid_subissues'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.grid,'SubIssues'],0);Ext.cmd.derive('ccReidComponents.form.panel.EditIssueView',Ext.form.Panel,{controller:'ccreid_editissuecontroller',viewModel:{},initComponent:function(){var a=this;a.on(a.getId()+':tabStoreChanged',a.handlerStoreChange.bind(a));Ext.apply(a,{cls:'issueEditorCls',layout:'hbox',items:[{width:'60%',xtype:'ccreid_tabPanel',itemId:'tabPanelItem',defaults:{width:'60%'},parentObject:a,items:[{title:a.L('Details'),type:'ccreid_issueview',items:[{xtype:'ccreid_issueview',projectId:a.projectId,activeUser:a.activeUser,issue:a.editIssue,showToolBarButtons:!1}]},{title:a.L('Files'),type:'ccreid_filesview',items:[{xtype:'ccreid_filesview',projectId:a.projectId,issueId:a.issueId,folderId:a.issueId,parentObject:a}]},{title:a.L('SubIssues'),type:'ccreid_subissues',items:[{xtype:'ccreid_subissues',projectId:a.projectId,issueId:a.issueId,activeUser:a.activeUser,parentObject:a}]},{title:a.L('SimilarIssues'),type:'ccreid_similarissues',items:[{xtype:'ccreid_similarissues',projectId:a.projectId,issueTypeId:a.editIssue.data.iti||a.editIssue.data.typeId,parentObject:a}]},{title:a.L('Meetings'),type:'',items:[]},{title:a.L('Tasks'),type:'',items:[]},{title:a.L('Stages'),type:'',items:[]}]},{flex:1,height:'100%',cls:'issueEditorChatter',items:[{xtype:'ccreid_formrow',textLabel:a.L('Chatter'),extraLabelCls:'centerSectionLabelCls'},{xtype:'uxiframe',src:a.srcIframe,flex:1,height:'66%',style:'background:white; padding: 20px'}]}],dockedItems:[{xtype:'ccreid_toolbar',dock:'bottom',ui:'footer',layout:{pack:'end',type:'hbox'},items:[{xtype:'ccreid_closebutton',reference:'closeButtonClicked',hidden:a.openFromNewTab},{xtype:'ccreid_submitbutton',text:a.L('Confirm'),reference:'submitButtonClicked',bind:{disabled:'{!issueTypeCombo.selection}'}}]}]});Ext.form.Panel.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){this.updateBadges()}},tabState:{},handlerStoreChange:function(b,a){this.tabState[a.tabId]=a.badgeText;this.updateBadges()},updateBadges:function(){var a=this;if(this.rendered){Object.keys(a.tabState).forEach(function(b){var c=a.tabState[b];a.down('[type='+b+']').tab.setBadgeText(c)})}},listeners:{afterRender:function(){var a=this;var c=a.up('window');if(a.parentIssueId==null){c.header.title.setText(a.L('IssueDetails'))}else {var b=Ext.StoreManager.get('tasksByStagesStore').getById(a.parentIssueId);var d={xtype:'panel',cls:'headerButtonsPanel',layout:'hbox',defaults:{cls:'headerButtons'},items:[{xtype:'button',text:b.getData().title,itemId:'parentItemId',handler:function(){a.getController().closeButtonClicked(this);var c=Ext.create('ccReidComponents.noneGeneric.window.IssueEditorWindow',{projectId:a.projectId,record:b});c.show()}},{xtype:'image',glyph:a.rtl?'xf054@FontAwesome':'xf053@FontAwesome'},{xtype:'label',html:a.issue.getData().title}]};c.header.add(d)}}},constructor:function(b){var a=this;a.issueId=b.issueId;a.activeUser=b.activeUser!=null?b.activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId');a.projectId=b.projectId;if(a.issueId==null||a.activeUser==null||a.projectId==null){throw new Error(a.L('MissingRequiredParameters'))}a.parentIssueId=b.parentIssueId||b.issue.data.parentId;a.editIssue=b.issue;a.srcIframe=screenConfig.instanceURL+'apex/CC_REID__Chatter?entityId='+a.issueId;a.openFromNewTab=b.openFromNewTab;a.dispatcher=b.dispatcher;Ext.form.Panel.prototype.constructor.apply(this,arguments)}},1,['ccreid_editissueview'],['component','box','container','panel','form','ccreid_editissueview'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'ccreid_editissueview':!0},['widget.ccreid_editissueview'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.panel,'EditIssueView'],0);Ext.cmd.derive('ccReidComponents.form.panel.IssueController',Ext.app.ViewController,{crudManager:ccReidComponents.store.crudManager.CrudManager,control:{'[reference=AssociatedProjectRadioGroup]':{change:'AssociatedProjectChange'},'[reference=submitButtonClicked]':{click:'submitButtonClicked'},'[reference=closeButtonClicked]':{click:'closeButtonClicked'},'[reference=bufferField]':{change:'bufferFieldChange'},'[reference=stageCombo]':{change:'stageComboChange'}},AssociatedProjectChange:function(e,c,d){var a=this;var b=a.getView().getViewModel();if(c.associatedProject=='ByAreaStage'){a.getView().down('#LocationRowItemId').setHidden(!1);a.getView().down('#locationSpacer').setHidden(!0)}else {a.getView().down('#LocationRowItemId').setHidden(!0);a.getView().down('#locationSpacer').setHidden(!1);b.set('issue.constructId',null);b.set('issue.spotId',null);b.set('issue.assetId',null);b.set('issue.stageId',null)}},submitButtonClicked:function(c){var a=this;var d=c.up('ccreid_issueview').query('[requiredField=true]').every(function(a){return a.validate()});if(!d){return !1}else {var b=a.getViewModel().getData().issue;if(a.getView().getInitialConfig().hasOwnProperty('parentId')&&a.getView().getInitialConfig('parentId')!=null&&a.getView().up('window')){b.set('issueParentId',a.getView().getInitialConfig('parentId'));a.getView().up('window').fireEvent('subIssueSubmitted',b)}else {Ext.StoreManager.get('tasksByStagesStore').add(b)}a.closeButtonClicked(c)}},closeButtonClicked:function(a){a.up('window').close()},bufferFieldChange:function(g,d,f){var e=this;var b=e.getView().getViewModel();var a=b.get('issue.stageDueDate');if(a!=null){var c=new Date();b.set('issue.issueDueDate',new Date(c.setDate(a.getDate()-d)))}},stageComboChange:function(d,c){var e=this;var a=e.getView().getViewModel();if(c!=null){a.set('issue.stageDueDate',new Date(d.selection.getData().Expected_End_Date_V1__c));var b=new Date();a.set('issue.issueDueDate',new Date(b.setDate(a.get('issue.stageDueDate').getDate()-a.get('issue.buffer'))))}else {a.set('issue.stageDueDate',null);a.set('issue.buffer',0);a.set('issue.issueDueDate',null)}}},0,0,0,0,['controller.ccreid_issuecontroller'],0,[ccReidComponents.form.panel,'IssueController'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.form.field.ProjectWorkerComboxIcon',ccReidComponents.form.field.ComboboxIcon,{constructor:function(a){var b=this;if(!a.comboboxItem.storeId||!a.comboboxItem.projectId){throw new Error('ProjectWorkerComboxIcon cannot work without storeId or projetcId')}a.comboboxItem.proxy={configuration:{read:{type:'ajax',request:"/v20.0/query/?q=SELECT+Worker_Type__c,+Project_Worker_Name_Text__c,+Worker__r.User__c,+Id+From+Project_Worker_V1__c+Where+Project__c='"+a.comboboxItem.projectId+"'"}}};ccReidComponents.form.field.ComboboxIcon.prototype.constructor.apply(this,arguments)}},1,['ccreid_projectworker_comboboxicon'],['component','box','container','ccreid_comboboxicon','ccreid_projectworker_comboboxicon'],{'component':!0,'box':!0,'container':!0,'ccreid_comboboxicon':!0,'ccreid_projectworker_comboboxicon':!0},['widget.ccreid_projectworker_comboboxicon'],0,[ccReidComponents.noneGeneric.form.field,'ProjectWorkerComboxIcon'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.container.workersSelector.WorkersSelectorController',Ext.app.ViewController,{populateGroups:function(){var b=this;var e=b.getView();var a={};var f=e.queryBy(function(a){return a.xtype=='ccreid_combobox'&&a.storeId=='ProjectWorkerComboxIconStore'})[0];var g=e.queryBy(function(a){return a.xtype=='ccreid_combobox'&&a.storeId=='WorkerTypeComboxIconStore'})[0];var c=!1;var d=!1;f.on('storeBounded',function(f,e){a['projectWorkerStore']=e;if(e.loadCount>0){c=!0;if(d){b.handleStores(a)}}else {e.on('load',function(g){if(d){b.handleStores(a)}else {c=!0}})}});g.on('storeBounded',function(f,e){a['workerTypeStore']=e;if(e.loadCount>0){d=!0;if(c){b.handleStores(a)}}else {e.on('load',function(g){if(c){b.handleStores(a)}else {d=!0}})}})},handleStores:function(a){var b=this;a['projectWorkerStore'].getRange().forEach(function(b){a['workerTypeStore'].getById(b.getData().Worker_Type__c).set('group','inProject')});a['workerTypeStore'].getRange().forEach(function(b){if(!b.getData().hasOwnProperty('group')){b.set('group','notInProject')}});a['workerTypeStore'].applySorters('group')}},0,0,0,0,['controller.ccreid_workersselectorcontroller'],0,[ccReidComponents.noneGeneric.container.workersSelector,'WorkersSelectorController'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.container.workersSelector.WorkersSelector',Ext.container.Container,{controller:'ccreid_workersselectorcontroller',layout:'hbox',initComponent:function(){var a=this;var d=ccReidComponents.utils.Data.validateObjectPath;var b=a.getInitialConfig()['projectWorkerCombo']||{};var c=a.getInitialConfig()['workerTypeCombo']||{};if(d('comboboxItem.allowBlank',b)&&b.comboboxItem.allowBlank){b.comboboxItem.emptyText=a.L('PositionHolderRequired')}if(d('comboboxItem.allowBlank',c)&&c.comboboxItem.allowBlank){c.comboboxItem.emptyText=a.L('NameRequired')}Ext.apply(a,{items:[Ext.Object.merge({xtype:'ccreid_workertype_comboboxicon',image:'xf002',comboboxItem:{xtype:'ccreid_combobox',displayField:'Name',valueField:'Id',requiredField:!0,emptyText:a.L('PositionHolder'),queryMode:'local',anyMatch:!0,forceSelection:!0,storeId:'WorkerTypeComboxIconStore',parentObject:a,itemId:a.getId()+'-workerType',projectId:a.getInitialConfig('projectId')}},c),{xtype:'tbspacer',width:14},Ext.Object.merge({xtype:'ccreid_projectworker_comboboxicon',image:'xf002',comboboxItem:{xtype:'ccreid_combobox',displayField:'Project_Worker_Name_Text__c',valueField:'Id',requiredField:!0,emptyText:a.L('Name'),queryMode:'local',anyMatch:!0,forceSelection:!0,storeId:'ProjectWorkerComboxIconStore',parentObject:a,effectedItemId:a.getId()+'-workerType',itemId:a.getId()+'-projectworker',filterFieldName:'Worker_Type__c',projectId:a.getInitialConfig('projectId')}},b)]});Ext.container.Container.prototype.initComponent.apply(this,arguments);a.getController().populateGroups()},selectByActiveUser:function(e,d,c){var b=ccReidComponents.utils.Data.validateObjectPath;var a=e.getRange().find(function(a){if(b('data.Worker__r.User__c',a)){return a.data.Worker__r.User__c==c}});if(a){d.setValue(a.id)}},listeners:{afterrender:function(d){var a=d;if(a.getInitialConfig()['activeUser']&&a.getInitialConfig()['hasValue']!=!0){var b=a.down('#'+a.getId()+'-projectworker');var c=b.getStore();if(c.loading){c.on('load',function(c){a.selectByActiveUser(c,b,a.getInitialConfig()['activeUser'])})}else {a.selectByActiveUser(c,b,a.getInitialConfig()['activeUser'])}}}}},0,['ccreid_workersselector'],['component','box','container','ccreid_workersselector'],{'component':!0,'box':!0,'container':!0,'ccreid_workersselector':!0},['widget.ccreid_workersselector'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.container.workersSelector,'WorkersSelector'],0);Ext.cmd.derive('ccReidComponents.form.panel.IssueView',Ext.form.Panel,{controller:'ccreid_issuecontroller',fileIds:[],viewModel:{data:{},formulas:{disabledFormFields:{bind:{subjectTypeComboSelection:'{subjectTypeCombo.selection}',closedIssue:'{issue.closedIssue}'},get:function(a){return !a.subjectTypeComboSelection||a.closedIssue}},editModeOrDisableField:{bind:{subjectTypeComboSelection:'{subjectTypeCombo.selection}',closedIssue:'{issue.closedIssue}',editMode:'{issue.editMode}'},get:function(a){return !a.subjectTypeComboSelection||a.closedIssue||a.editMode}},newIssue:{bind:{editMode:'{issue.editMode}'},get:function(a){return !a.editMode}},editIssueDueDate:{bind:{disabledFormFields:'{disabledFormFields}',singleStage:'{issue.stageId}'},get:function(a){return !a.disabledFormFields&&a.singleStage}}}},initComponent:function(){var a=this;var b=a.getViewModel();b.set('issue',Ext.create('tasksByStages.model.IssueModel'));if(a.clonedIssue!=null){b.set('issue',a.clonedIssue);a.clonedIssue.editMode=!0;b.set('issue.editMode',!0);b.set('issue.issueDueDate',new Date(a.clonedIssue.data.issueDueDate));if(a.clonedIssue.data.stageDate!=null){b.set('issue.stageDueDate',new Date(a.clonedIssue.data.stageDate))}if(a.clonedIssue.data.stages!=null){a.hasStages=!0}if(a.clonedIssue.data.status=='Closed'){b.set('issue.closedIssue',!0)}}else {b.set('issue.status','Opened');b.set('issue.editMode',!1);b.set('issue.buffer',0);if(a.getInitialConfig().areaId){b.set('issue.constructId',a.getInitialConfig().areaId)}if(a.getInitialConfig().assetId){b.set('issue.assetId',a.getInitialConfig().assetId)}if(a.getInitialConfig().spotId){b.set('issue.spotId',a.getInitialConfig().spotId)}if(a.getInitialConfig().stageId){b.set('issue.stageId',a.getInitialConfig().stageId)}}Ext.apply(a,{cls:'issueEditorCls',items:[{xtype:'ccreid_formrow',textLabel:a.L('IssueDetails'),extraLabelCls:'sectionLabelCls'},{xtype:'ccreid_formrow',textLabel:a.L('Kind')+':',rowItemId:'kindRowItemId',rowItems:[{xtype:'ccreid_combobox',reference:'subjectTypeCombo',parentObject:a,displayField:'Name',valueField:'Subject_Type__c',itemId:'subjectTypeItemId',emptyText:a.L('SubjectTypeRequired'),flex:1,requiredField:!0,anyMatch:!0,allowBlank:!1,forceSelection:!0,bind:{value:'{issue.subjectTypeId}',disabled:'{!newIssue}'},storeId:'subjectTypesStore',proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:'/v20.0/query/?q=SELECT+Subject_Type__c,Subject_Type__r.Name+from+Issue_Type__c+where+Subject_Type__c<>null+group+by+Subject_Type__c,Subject_Type__r.Name'}}}},{xtype:'ccreid_comboboxicon',itemId:'issueTypeItemId',image:'xf002',comboboxItem:{xtype:'ccreid_combobox',reference:'issueTypeCombo',effectedItemId:'subjectTypeItemId',filterFieldName:'Subject_Type__c',parentObject:a,displayField:'Name',valueField:'Id',emptyText:a.L('IssueTypeRequired'),requiredField:!0,anyMatch:!0,allowBlank:!1,forceSelection:!0,bind:{value:'{issue.typeId}'},storeId:'issueTypesStore',proxy:{type:'salesforce',configuration:{read:{type:'ajax',request:'/v20.0/query/?q=SELECT+Id,Name,Subject_Type__c+from+Issue_Type__c'}}}},flex:1,bind:{disabled:'{editModeOrDisableField}'}}]},{xtype:'ccreid_formrow',textLabel:a.L('Description')+':',rowItemId:'descriptionRowItemId',rowItems:[{xtype:'ccreid_textarea',itemId:'descriptionItemId',emptyText:a.L('DescriptionRequired'),flex:1,allowBlank:!1,requiredField:!0,bind:{disabled:'{disabledFormFields}',value:'{issue.description}'}}]},{xtype:'ccreid_formrow',textLabel:a.L('AssociatedInProject')+':',rowItemId:'AssociatedInProjectRowItemId',rowItems:[{xtype:'ccreid_radiogroup',flex:1,reference:'AssociatedProjectRadioGroup',items:[{boxLabel:a.L('Project'),name:'associatedProject',inputValue:'Project',itemId:'ProjectItemId',checked:!a.hasStages&&!a.areaId},{boxLabel:a.L('ByAreaStage'),name:'associatedProject',inputValue:'ByAreaStage',itemId:'ByAreaStageItemId',checked:a.hasStages||a.areaId}],bind:{disabled:'{editModeOrDisableField}'}},{xtype:'tbfill',flex:1}]},{xtype:'tbspacer',itemId:'locationSpacer',height:42,hidden:a.hasStages},{xtype:'ccreid_formrow',textLabel:a.L('Location')+':',rowItemId:'LocationRowItemId',hidden:!a.hasStages&&!a.areaId,rowItems:[{xtype:'ccreid_stagesareasselector',projectId:a.projectId,layout:'hbox',defaults:{bind:{disabled:'{editModeOrDisableField}'}},flex:1,constructViewModel:'{issue.constructId}',spotViewModel:'{issue.spotId}',assetViewModel:'{issue.assetId}',stageViewModel:'{issue.stageId}',stageDueDateViewModelName:'issue.stageDueDate'}]},{xtype:'ccreid_formrow',textLabel:a.L('PositionHolder'),extraLabelCls:'sectionLabelCls'},{xtype:'ccreid_formrow',textLabel:a.L('accountable')+':',rowItemId:'accountableRowItemId',rowItems:[{xtype:'ccreid_workersselector',activeUser:a.activeUser,hasValue:b.get('issue.accountableId')!=null,projectId:a.projectId,flex:1,workerTypeCombo:{flex:1,comboboxItem:{bind:{disabled:'{disabledFormFields}',value:'{issue.accountableWorkerType}'}}},projectWorkerCombo:{flex:1,comboboxItem:{allowBlank:!1,bind:{disabled:'{disabledFormFields}',value:'{issue.accountableId}'}}}}]},{xtype:'ccreid_formrow',textLabel:a.L('Responsible')+':',rowItemId:'responsibleRowItemId',rowItems:[{xtype:'ccreid_workersselector',projectId:a.projectId,flex:1,workerTypeCombo:{flex:1,comboboxItem:{bind:{disabled:'{disabledFormFields}',value:'{issue.responsibleWorkerType}'}}},projectWorkerCombo:{flex:1,comboboxItem:{bind:{disabled:'{disabledFormFields}',value:'{issue.responsibleId}'}}}}]},{xtype:'ccreid_formrow',textLabel:a.L('IssueTiming'),extraLabelCls:'sectionLabelCls'},{xtype:'ccreid_formrow',textLabel:a.L('DueDate')+':',rowItemId:'dueDateRowItemId',rowItems:[{xtype:'ccreid_datefield',itemId:'dueDateItemId',flex:1,format:'d/m/Y',minValue:new Date(),allowOnlyWhitespace:!1,allowBlank:!1,requiredField:!0,bind:{disabled:'{editIssueDueDate}',value:'{issue.issueDueDate}'}},{xtype:'ccreid_numberfield',itemId:'bufferItemId',reference:'bufferField',flex:1,minValue:0,maxValue:999,bind:{hidden:'{!editIssueDueDate}',value:'{issue.buffer}'}},{xtype:'tbfill',flex:1,bind:{hidden:'{editIssueDueDate}'}}]},{xtype:'ccreid_formrow',textLabel:a.L('StageDueDate')+':',rowItemId:'stageDueDateRowItemId',rowItems:[{xtype:'ccreid_datefield',itemId:'dueDateItemId',flex:1,format:'d/m/Y',disabled:!0,bind:{value:'{issue.stageDueDate}'}},{xtype:'tbfill',flex:1}]},{xtype:'ccreid_formrow',textLabel:a.L('Status')+':',rowItemId:'statusRowItemId',rowItems:[{xtype:'ccreid_combobox',displayField:'label',valueField:'value',itemId:'statusItemId',flex:1,disabled:!0,bind:{value:'{issue.status}'},storeId:'issueStatusStore',proxy:{type:'salesforce',configuration:{read:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'getIssueStatuses'},dataKey:'requestedData'}}}},{xtype:'tbfill',flex:1}]},{xtype:'ccreid_formrow',textLabel:a.L('MoreInformation'),extraLabelCls:'sectionLabelCls',rowItems:[{xtype:'ccreid_linktextwithicon',text:a.L('RichDescription'),bind:{disabled:'{disabledFormFields}'},handler:function(){var b=Ext.create('ccReidComponents.window.Window',{title:a.L('RichDescription'),cls:'extjsWizardWrapper',width:'840px',modal:!0,resizable:!1,hideOnMaskTap:!0,closeAction:'destroy',items:[{margin:'5px',xtype:'ccreid_htmleditor',itemId:'richDescriptionItemId',flex:1,bind:{value:'{issue.richDescription}'}}]});b.show()}},{xtype:'ccreid_linktextwithicon',text:a.L('Summary'),bind:{disabled:'{newIssue}'},handler:function(){a.summaryWin=Ext.create('ccReidComponents.window.Window',{title:a.L('Summary'),cls:'extjsWizardWrapper',width:'840px',modal:!0,resizable:!1,hideOnMaskTap:!0,closeAction:'destroy',items:[{margin:'5px',xtype:'ccreid_htmleditor',itemId:'SummaryItemId',flex:1,bind:{value:'{issue.decision}'}}],dockedItems:[{xtype:'ccreid_toolbar',dock:'bottom',ui:'footer',layout:{pack:'end',type:'hbox'},items:[{xtype:'ccreid_button',text:a.buttonText,cls:'closeIssueBtnCss',handler:function(){a.closeIssueButtonClicked(this);a.summaryWin.close();delete a.summaryWin}}]}]});a.summaryWin.show()}}]}],dockedItems:[{xtype:'ccreid_toolbar',dock:'bottom',ui:'footer',layout:{pack:'end',type:'hbox'},hidden:!a.showToolBarButtons,items:[{xtype:'ccreid_closebutton',reference:'closeButtonClicked'},{xtype:'ccreid_submitbutton',text:a.L('Confirm'),reference:'submitButtonClicked',bind:{disabled:'{disabledFormFields}'}}]}]});Ext.form.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.activeUser=b.activeUser!=null?b.activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId');a.projectId=b.projectId;a.showToolBarButtons=b.showToolBarButtons==!1?!1:!0;if(a.activeUser==null||a.projectId==null){throw new Error(a.L('MissingRequiredParameters'))}if(b.issue!=null){a.clonedIssue=ccReidComponents.utils.Data.cloneModelSet(b.issue)[0]}if(a.clonedIssue){if(a.clonedIssue.data.status!='Closed'){a.buttonText=a.L('CloseIssue')}else {a.buttonText=a.L('ReOpen')}}Ext.form.Panel.prototype.constructor.apply(this,arguments)},closeIssueButtonClicked:function(d){var a=this;var b=a.getViewModel();var c=!0;if(b.get('issue.status')=='Closed'){b.set('issue.status','In Process');b.set('issue.closedIssue',!1);a.buttonText=a.L('CloseIssue');c=!1}else {b.set('issue.status','Closed');b.set('issue.closedIssue',!0);a.buttonText=a.L('ReOpen')}d.setText(a.buttonText)}},1,['ccreid_issueview'],['component','box','container','panel','form','ccreid_issueview'],{'component':!0,'box':!0,'container':!0,'panel':!0,'form':!0,'ccreid_issueview':!0},['widget.ccreid_issueview'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.form.panel,'IssueView'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.grid.similarIssues.Model',Ext.data.Model,{fields:[{name:'Responsible_V1__r',mapping:function(a){if(a.Responsible_V1__r){return a.Responsible_V1__r.Project_Worker_Name_Text__c}else {return ''}}},{name:'areas',mapping:function(a){var b=[];var c=ccReidComponents.utils.Data.validateObjectPath;if(c('Issue_Stages__r.records',a)&&a.Issue_Stages__r.records.length>0){b=a.Issue_Stages__r.records.map(function(b){if(!Ext.Object.isEmpty(b.Construct_Stage__r)){delete b.Construct_Stage__r.attributes;return b.Construct_Stage__r}if(!Ext.Object.isEmpty(b.Stage__r)){delete b.Stage__r.attributes;return b.Stage__r}});return b}else {if(!Ext.Object.isEmpty(a.Asset__r)){delete a.Asset__r.attributes}if(!Ext.Object.isEmpty(a.Spot__r)){delete a.Spot__r.attributes}if(!Ext.Object.isEmpty(a.Construct__r)){delete a.Construct__r.attributes}b.push({'Asset__r':a.Asset__r,'Spot__r':a.Spot__r,'Construct__r':a.Construct__r});return b}}},{name:'stages',mapping:function(b){var a=[];var c=ccReidComponents.utils.Data.validateObjectPath;if(c('Issue_Stages__r.records',b)&&b.Issue_Stages__r.records.length>0){a=b.Issue_Stages__r.records.map(function(a){if(!Ext.Object.isEmpty(a.Construct_Stage__r)){return {Id:a.Construct_Stage__r.Id,Name:a.Construct_Stage__r.Display_Name__c}}if(!Ext.Object.isEmpty(a.Stage__r)){return {Id:a.Stage__r.Id,Name:a.Stage__r.Display_Name__c}}});return a}else {a.push({Id:'Project',Name:'By Project'});return a}}}]},0,0,0,0,0,0,[ccReidComponents.noneGeneric.grid.similarIssues,'Model'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.window.AddFileWindow',ccReidComponents.window.Window,{uploader:ccReidComponents.utils.Upload,initComponent:function(){var a=this;Ext.apply(a,{modal:!0,cls:'addFileWindowWrapper',buttons:[{xtype:'ccreid_closebutton',closeFunction:function(){a.close()}},{xtype:'ccreid_submitbutton',text:a.L('Confirm'),disabled:!0,id:'addFileSubmit',itemId:'addFileSubmit',submitFunction:function(){a.handleFileUpload()}}],items:[{xtype:'ccreid_formrow',textLabel:a.L('FileName')+':',cls:'addFileRowWrapper',rowItemId:'',rowItems:[{xtype:'ccreid_textbox',cls:'textboxWrapper',allowBlank:!1,emptyText:a.L('FileName'),labelWidth:100,value:a.name,width:'80%',itemId:'fileNameTextBox',listeners:{change:function(){var b=this;var a=b.up('ccreid_addfilewindow');if(a.down('#fileNameTextBox').value!=''&&a.files.length>0){Ext.getCmp('addFileSubmit').enable()}else {Ext.getCmp('addFileSubmit').disable()}}}}]},{xtype:'ccreid_formrow',rowItemId:'',cls:'addFileRowWrapper',textLabel:a.L('AttachFileByDragAndDropLabel'),rowItems:[{cls:'fileFieldLinkWrapper',xtype:'ccreid_filefieldlink',itemId:'filefieldlink',linkText:a.L('ChooseFromYourPc'),listeners:{change:function(){var b=this;var a=b.up('ccreid_addfilewindow');if(a.down('#fileNameTextBox').value!=''&&a.files.length>0){Ext.getCmp('addFileSubmit').enable()}else {Ext.getCmp('addFileSubmit').disable()}}}},{xtype:'iconlabel',text:'Label with iconCls',iconCls:'x-fa fa-check',itemId:'fileNameLabel',hidden:!0}]},{xtype:'ccreid_formrow',rowItemId:'',cls:'addFileRowWrapper',textLabel:a.L('Description')+':',rowItems:[{cls:'textboxWrapper',emptyText:a.L('Description'),labelWidth:100,value:a.description,xtype:'ccreid_textarea',width:'80%',itemId:'fileDescription'}]}]});ccReidComponents.window.Window.prototype.initComponent.apply(this,arguments)},handleFileUpload:function(){var a=this;a.uploader.createBlob(a.contentDocument,a.files,a.createFile).then(function(c){var b={projectId:a.projectId,folderId:a.folderId,fileId:a.fileId,contentVersionId:c.id,name:a.down('#fileNameTextBox').value,fileName:a.down('#fileNameTextBox').value,fileSize:a.files[0].size,description:a.down('#fileDescription').value,tempFile:!1,tempId:null,type:'file',user:a.L('ByYou'),fileDate:new Date()};a.fireEvent('submitFileUpload',b);a.destroy()})},constructor:function(b){var a=this;a.files=[];a.contentDocument=b.contentDocument||null;a.createFile=b.createFile||!1;a.projectId=b.projectId;a.folderId=b.folderId;a.parentObject=b.parentObject||null;ccReidComponents.window.Window.prototype.constructor.apply(this,arguments)}},1,['ccreid_addfilewindow'],['component','box','container','panel','window','ccreid_window','ccreid_addfilewindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'ccreid_window':!0,'ccreid_addfilewindow':!0},['widget.ccreid_addfilewindow'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.window,'AddFileWindow'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.window.AddUrlWindow',ccReidComponents.window.Window,{uploader:ccReidComponents.utils.Upload,initComponent:function(){var a=this;Ext.apply(a,{modal:!0,cls:'addUrlWindowWrapper',buttons:[{xtype:'ccreid_closebutton',closeFunction:function(){a.close()}},{xtype:'ccreid_submitbutton',text:a.L('Confirm'),itemId:'addUrlSubmit',disabled:!0,id:'addUrlSubmit',submitFunction:function(){a.handleLinkUpload()}}],items:[{xtype:'ccreid_formrow',textLabel:a.L('LinkTitleLabel'),cls:'addFileRowWrapper',rowItemId:'kindRowItemId',rowItems:[{xtype:'ccreid_textbox',cls:'textboxWrapper',allowBlank:!1,emptyText:a.L('EmptyLinkName'),value:a.name,labelWidth:100,width:'100%',itemId:'linkNameTextBox',listeners:{change:function(){var b=this;var a=b.up('ccreid_addurlwindow');if(a.down('#linkNameTextBox').value!=''&&a.down('#linkUrlTextBox').value!=''&&validateURL(a.down('#linkUrlTextBox').value)){Ext.getCmp('addUrlSubmit').enable()}else {Ext.getCmp('addUrlSubmit').disable()}}}}]},{xtype:'ccreid_formrow',rowItemId:'kindRowItemId2',cls:'addFileRowWrapper',textLabel:a.L('LinkLabel'),rowItems:[{xtype:'ccreid_textbox',cls:'textboxWrapper',allowBlank:!1,emptyText:a.L('HyperLinkEmpty'),labelWidth:100,width:'100%',itemId:'linkUrlTextBox',value:a.url,listeners:{change:function(){var b=this;var a=b.up('ccreid_addurlwindow');if(a.down('#linkNameTextBox').value!=''&&a.down('#linkUrlTextBox').value!=''&&validateURL(a.down('#linkUrlTextBox').value)){Ext.getCmp('addUrlSubmit').enable()}else {Ext.getCmp('addUrlSubmit').disable()}}}}]},{xtype:'ccreid_formrow',rowItemId:'',cls:'addFileRowWrapper',textLabel:a.L('Description')+':',value:a.description,rowItems:[{cls:'textboxWrapper',emptyText:a.L('Description'),labelWidth:100,xtype:'ccreid_textarea',width:'80%',itemId:'urlDescription'}]}]});function validateURL(b){var a=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;return a.test(b)}ccReidComponents.window.Window.prototype.initComponent.apply(this,arguments)},handleLinkUpload:function(){var a=this;var c=a.up('ccreid_addurlwindow');var b={projectId:a.projectId,folderId:a.folderId,fileId:null,url:a.down('#linkUrlTextBox').value,fileName:a.down('#linkNameTextBox').value,description:a.down('#urlDescription').value||'',tempId:'',user:a.L('ByYou'),type:'url',name:a.down('#linkNameTextBox').value,fileDate:new Date()};a.fireEvent('submitUrlUpload',b);a.destroy()},constructor:function(a){var b=this;b.parentObject=a.parentObject;ccReidComponents.window.Window.prototype.constructor.apply(this,arguments)}},1,['ccreid_addurlwindow'],['component','box','container','panel','window','ccreid_window','ccreid_addurlwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'ccreid_window':!0,'ccreid_addurlwindow':!0},['widget.ccreid_addurlwindow'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.window,'AddUrlWindow'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.window.IssueEditorWindow',ccReidComponents.window.Window,{initComponent:function(){var a=this;Ext.apply(a,{cls:'issueEditorWindow',width:'1800px',layout:'fit',height:'800px',modal:!0,resizable:!1,hideOnMaskTap:!0,closeAction:'destroy',header:{titlePosition:100,titleAlign:'center'},items:[Ext.create('ccReidComponents.form.panel.EditIssueView',{issue:a.record,issueId:a.record.id,projectId:a.projectId,activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId')})]});ccReidComponents.window.Window.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.record=a.record;b.projectId=a.projectId;ccReidComponents.window.Window.prototype.constructor.apply(this,arguments)}},1,['ccreid_issueeditorwindow'],['component','box','container','panel','window','ccreid_window','ccreid_issueeditorwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'ccreid_window':!0,'ccreid_issueeditorwindow':!0},['widget.ccreid_issueeditorwindow'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.window,'IssueEditorWindow'],0);Ext.cmd.derive('ccReidComponents.noneGeneric.window.IssueViewWindow',ccReidComponents.window.Window,{initComponent:function(){var a=this;Ext.apply(a,{cls:'extjsWizardWrapper',width:'50%',modal:!0,resizable:!1,hideOnMaskTap:!0,closeAction:'destroy',title:a.L('IssueForm'),header:{titleAlign:'center'},items:[Ext.create('ccReidComponents.form.panel.IssueView',{projectId:a.getInitialConfig('projectId'),activeUser:ccReidComponents.utils.Data.getValueByKey('activeUserId'),parentId:a.parentId,areaId:a.areaId,spotId:a.spotId,stageTypeId:a.stageTypeId,stageId:a.stageId,assetId:a.assetId})]});ccReidComponents.window.Window.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.activeUser=a.activeUser;b.projectId=a.projectId;b.parentId=a.parentId;b.areaId=a.constructId;b.spotId=a.spotId;b.stageTypeId=a.stageTypeId;b.assetId=a.assetId;b.stageId=a.stageId;ccReidComponents.window.Window.prototype.constructor.apply(this,arguments)}},1,['ccreid_issueviewwindow'],['component','box','container','panel','window','ccreid_window','ccreid_issueviewwindow'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'ccreid_window':!0,'ccreid_issueviewwindow':!0},['widget.ccreid_issueviewwindow'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.noneGeneric.window,'IssueViewWindow'],0);Ext.cmd.derive('ccReidComponents.window.CcreidMessageBox',Ext.window.MessageBox,{cls:'extjsWizardWrapper ccreidMessageBox',titleAlign:'center',initComponent:function(){var a=this;Ext.window.MessageBox.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.currentLocale=ccReidComponents.utils.Data.getValueByKey('locale');if(a.currentLocale==null){a.currentLocale=b.locale.charAt(0).toUpperCase()+b.locale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;ccReidComponents.utils.Data.setKeyValue('locale',a.currentLocale)}ccReidComponents.locale[a.currentLocale].apply();a.rtl=a.currentLocale=='He';Ext.window.MessageBox.prototype.constructor.apply(this,arguments)}},1,['ccreidMessageBox'],['component','box','container','panel','window','messagebox','ccreidMessageBox'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0,'messagebox':!0,'ccreidMessageBox':!0},['widget.ccreidMessageBox'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[ccReidComponents.window,'CcreidMessageBox'],0);Ext.cmd.derive('issuesEditor.locale.Locale',Ext.Base,{l10n:null,legacyMode:!0,localeName:null,namespaceId:null,constructor:function(){if(!issuesEditor.locale.Active){issuesEditor.locale.Active={};this.bindRequire()}var b=this.self.getName().split('.');var c=this.localeName=b.pop();this.namespaceId=b.join('.');var a=issuesEditor.locale.Active[this.namespaceId];if(!(c=='En'&&a&&a.localeName!='En')){this.apply()}},bindRequire:function(){var a=Ext.ClassManager.triggerCreated;Ext.ClassManager.triggerCreated=function(b){a.apply(this,arguments);if(b){var d=Ext.ClassManager.get(b);for(var c in issuesEditor.locale.Active){issuesEditor.locale.Active[c].apply(d)}}}},applyToClass:function(d,a){var e=this,g=e.self.getName();a=a||Ext.ClassManager.get(d);if(a&&a.activeLocaleId!==g){var c=e.l10n[d];if(typeof c==='function'){c(d)}else {if(a.singleton){a.l10n=Ext.apply({},c,a.prototype&&a.prototype.l10n)}else {Ext.override(a,{l10n:c})}}if(e.legacyMode){var b;if(a.prototype){b=a.prototype}else {if(a.singleton){b=a}}if(b&&b.legacyMode){if(b.legacyHolderProp){if(!b[b.legacyHolderProp]){b[b.legacyHolderProp]={}}b=b[b.legacyHolderProp]}for(var f in c){if(typeof b[f]!=='function'){b[f]=c[f]}}}}a.activeLocaleId=g;if(a.onLocalized){a.onLocalized()}}},apply:function(a){if(this.l10n){var e=this;if(a){if(!Ext.isArray(a)){a=[a]}var c,d;for(var b=0,g=a.length;b<g;b++){if(Ext.isObject(a[b])){if(a[b].singleton){d=a[b];c=Ext.getClassName(Ext.getClass(d))}else {d=Ext.getClass(a[b]);c=Ext.getClassName(d)}}else {d=null;c='string'===typeof a[b]?a[b]:Ext.getClassName(a[b])}if(c){if(c in this.l10n){e.applyToClass(c,d)}}}}else {issuesEditor.locale.Active[this.namespaceId]=this;for(var f in this.l10n){e.applyToClass(f)}}}}},1,0,0,0,0,0,[issuesEditor.locale,'Locale'],0);Ext.cmd.derive('issuesEditor.locale.En',issuesEditor.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesEditor.view.addEventView':{Close:'Close',Submit:'Submit'},'issuesEditor.view.issueDetailsView':{Description:'Description',Accountable:'Accountable',Responsible:'Responsible',IssueType:'Issue Type',DueDate:'Due Date',Status:'Status',Tag:'Tag',Loading:'Loading...',RichDescription:'RichDescription',Close:'Close',Submit:'Submit',Name:'Name',Cancel:'Cancel',Title:'Title',Apply:'Apply'},'issuesEditor.view.addRemainderView':{Subject:'Subject',Close:'Close',Submit:'Submit',Accountable:'Accountable',Project:'Project',Responsible:'Responsible'},'issuesEditor.view.commentDetailView':{Reply:'Reply'},'issuesEditor.view.commentView':{TypeComment:'Type Comment...',Close:'Close',Submit:'Submit'},'issuesEditor.view.filesView':{Name:'Name',Description:'Description',Date:'Date',UploadBy:'Upload By',Type:'Type',Source:'Source',involvedWorkflow:'Show in App',AddFile:'Add File',ChooseFile:'Choose File',AddUrl:'Add Url',Link:'Link',FileName:'File Name',Url:'Url',Cancel:'Cancel',Upload:'Upload',Uploading:'Uploading...',Loading:'Loading...',Removing:'Removing...',Delete:'Delete',Edit:'Edit',EditFile:'Edit File',EditUrl:'Edit Link',Confirm:'Confirm',DeleteFile:'Delete File',DeleteConfirmText:'are you sure you want to delete file ?',PleaseAddDescription:'Please add description',PleaseAddFileName:'Please add File Name',File:'File',PleaseAddUrlName:'Please add Link Name',PleaseAddLinkUrl:'Please add url Link'},'issuesEditor.view.relatedFilesView':{Name:'Name',Description:'Description',Date:'Date',UploadBy:'Upload By',Type:'Type',Source:'Source',involvedWorkflow:'Show in App',AddFile:'Add File',ChooseFile:'Choose File',AddUrl:'Add Url',Link:'Link',FileName:'File Name',Url:'Url',Cancel:'Cancel',Upload:'Upload',Uploading:'Uploading...',Loading:'Loading...',DataSource:'Source',File:'File',Direct_Stage_Type:'Direct Stage Type',Indirect_Stage_Type:'Indirect Stage Type',Indriect_Prototype:'Indriect Prototype',Direct_Stage:'Direct Stage',Indirect_Stage_Prototype:'Indirect Stage Prototype',Direct_Prototype:'Direct Prototype',Direct_Type:'Direct Type'},'issuesEditor.view.similarTabView':{Due_Date:'Due Date',Title:'Title',responsible:'responsible',Status:'Status',Tags:'Tags'},'issuesEditor.view.subTasksTabView':{Due_Date:'Due Date',Title:'Title',responsible:'responsible',Status:'Status'},'issuesEditor.view.eventsTabView':{Due_Date:'Due Date',Created_By:'Created By',Title:'Title',Start_Date:'Start Date',End_Date:'End Date',responsible:'responsible',Subject:'Subject',Status:'Status'},'issuesEditor.view.historyTabView':{Due_Date:'Due Date',Title:'Title',responsible:'responsible',Status:'Status'},'issuesEditor.view.remindersTabView':{Due_Date:'Due Date',Title:'Title',responsible:'responsible',Status:'Status',Created_By:'Created By',Subject:'Subject',Image:'Image'},'issuesEditor.view.issueTabsView':{Managements:'Managements',Add:'Add',SubTasks:'Sub Tasks',AddSubTaks:'Add Sub Task',Similar:'Similar',Comments:'Comments',TypeComment:'Type Comment...',History:'History',Meeting:'Meeting',Log:'Log',Events:'Events',Remainders:'Remainders',Work:'Work',Submit:'Submit',Files:'Files',RelatedFiles:'Related Files',Error:'Error',DueDateInvalid:'Due date is invalid!'}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesEditor.locale,'En'],0);Ext.cmd.derive('issuesEditor.locale.He',issuesEditor.locale.Locale,{singleton:!0,constructor:function(a){Ext.apply(this,{l10n:{'issuesEditor.view.addEventView':{Close:'',Submit:''},'issuesEditor.view.issueDetailsView':{Description:'',Accountable:'',Responsible:'',IssueType:' ',DueDate:' ',Status:'',Tag:'',RichDescription:' ',Close:'',Submit:'',Name:'',Cancel:'',Uploading:'...',Loading:'...',Title:'',Apply:''},'issuesEditor.view.addRemainderView':{Close:'',Submit:'',Subject:'',Accountable:'',Project:'',Responsible:''},'issuesEditor.view.commentDetailView':{Reply:''},'issuesEditor.view.commentView':{TypeComment:' ...',Close:'',Submit:''},'issuesEditor.view.filesView':{Name:'',Description:'',Date:'',UploadBy:' "',Type:'',Source:'',involvedWorkflow:' ',AddFile:' ',ChooseFile:' ',AddUrl:' ',Link:'',FileName:' ',Url:'',Cancel:'',Upload:'',Uploading:'...',Loading:'...',Delete:'',Edit:'',EditFile:' ',EditUrl:' ',Confirm:'',DeleteFile:' ',DeleteConfirmText:'        ?',PleaseAddDescription:'  ',File:'',Removing:'...',PleaseAddFileName:'   ',PleaseAddUrlName:'   ',PleaseAddLinkUrl:'   ',Direct_Prototype:'',Direct_Type:''},'issuesEditor.view.relatedFilesView':{Name:'',Description:'',Date:'',UploadBy:' "',Type:'',Source:'',involvedWorkflow:' ',AddFile:' ',ChooseFile:' ',AddUrl:' ',Link:'',FileName:' ',Url:'',Cancel:'',Upload:'',DataSource:' ',File:'',Direct_Stage_Type:' ',Indirect_Stage_Type:'  ',Indriect_Prototype:' ',Direct_Stage:'',Indirect_Stage_Prototype:' '},'issuesEditor.view.similarTabView':{Due_Date:' ',Title:'',responsible:'',Status:'',Tags:''},'issuesEditor.view.subTasksTabView':{Due_Date:' ',Title:'',responsible:'',Status:''},'issuesEditor.view.historyTabView':{Due_Date:' ',Title:'',responsible:'',Status:''},'issuesEditor.view.eventsTabView':{Due_Date:' ',Title:'',Start_Date:' ',End_Date:' ',Created_By:' "',responsible:'',Subject:'',Status:''},'issuesEditor.view.remindersTabView':{Due_Date:' ',Title:'',responsible:'',Status:'',Subject:'',Created_By:' "',Image:''},'issuesEditor.view.issueTabsView':{Managements:' ',Add:'',SubTasks:' ',AddSubTaks:'  ',Similar:' ',Comments:'',TypeComment:' ...',History:'',Meeting:'',Log:' ',Events:'',Remainders:'',Work:' ',Submit:'',Files:'',RelatedFiles:' ',Error:'',DueDateInvalid:'   '}}});this.callParent(arguments)}},1,0,0,0,0,0,[issuesEditor.locale,'He'],0);Ext.cmd.derive('issuesEditor.mixin.Localizable',Ext.Base,{legacyMode:!1,activeLocaleId:'',l10n:null,isLocaleApplied:function(){var a=this.singleton&&this.activeLocaleId||this.self.activeLocaleId;if(!a){return !1}for(var b in issuesEditor.locale.Active){if(a===issuesEditor.locale.Active[b].self.getName()){return !0}}return !1},applyLocale:function(){for(var a in issuesEditor.locale.Active){issuesEditor.locale.Active[a].apply(this.singleton?this:this.self.getName())}},L:function(){return this.localize.apply(this,arguments)},localize:function(a,i,h){if(!this.isLocaleApplied()&&!h){this.applyLocale()}if(this.hasOwnProperty('l10n')&&this.l10n.hasOwnProperty(a)&&'function'!=typeof this.l10n[a]){return this.l10n[a]}var b=this.self&&this.self.prototype;if(this.legacyMode){var f=i||this.legacyHolderProp;var d=f?this[f]:this;if(d&&d.hasOwnProperty(a)&&'function'!=typeof d[a]){return d[a]}if(b){var e=f?b[f]:b;if(e&&e.hasOwnProperty(a)&&'function'!=typeof e[a]){return e[a]}}}var c=b.l10n&&b.l10n[a];if(c===null||c===undefined){var g=b&&b.superclass;if(g&&g.localize){c=g.localize(a,i,h)}if(c===null||c===undefined){throw 'Cannot find locale: '+a+' ['+this.self.getName()+']'}}return c}},0,0,0,0,0,0,[issuesEditor.mixin,'Localizable'],0);Ext.cmd.derive('issuesEditor.store.CrudManager',Ext.Base,{externalConfig:null,activeUser:null,projectId:null,setExternalConfig:function(a){var b=this;b.externalConfig=a;b.activeUser=a.activeUser;b.projectId=a.projectId},makeRequest:function(c){var b=this;if(!b.externalConfig){throw 'You need to setExternalConfig first!'}var a=new Ext.Deferred();b.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(b){a.resolve(b)},function(b){a.reject(b)},'POST',JSON.stringify({'requestJSON':JSON.stringify(c)}));return a.promise},addComment:function(a){var c=this;var b={className:'ChatterGeneralRequest',actionName:'addFeedItem',parentId:a.parentId,feedDescription:a.data};return c.makeRequest(b)},addSubComment:function(a){var c=this;var b={className:'ChatterGeneralRequest',actionName:'addFeedComment',feedId:a.feedId,feedDescription:a.data};return c.makeRequest(b)},submitIssue:function(d,e,c,f){var b=this;var a={};var a={className:'KanbanManagementRequest',actionName:'submitIssue',action:d,issue:e,parentIssue:c,meetingId:f,projectId:b.projectId};return b.makeRequest(a)},getIssueFiles:function(b,c){var d=this;var a={};var a={className:'FileTreeRequest',actionName:'getFilesList',projectId:b,fileId:c};return d.makeRequest(a)},deleteFile:function(b){var c=this;var a={};var a={className:'FileTreeRequest',actionName:'deleteFiles',fileIds:b};return c.makeRequest(a)},editFile:function(a,b){var d=new Ext.Deferred();var e=this;var c={};var c={className:'FileTreeRequest',actionName:'createFile',projectId:a.projectId,folderId:a.folderId,fileId:a.fileId,contentVersionId:a.contentVersionId,fileName:a.fileName,fileSize:a.fileSize,description:a.description};if(b.files.length>0){client.createBlob('ContentVersion',{ContentDocumentId:a.contentDocumentId,Origin:'H',PathOnClient:b.files[0].name},b.files[0].name,'VersionData',b.files[0],function(f){c.contentVersionId=f.id;d.resolve(e.makeRequest(c))})}else {d.resolve(e.makeRequest(c))}return d.promise},editUrl:function(d,c,b,e){var f=this;var a={};var a={className:'FileTreeRequest',actionName:'editUrl',fileId:d,newName:c,description:b,url:e};return f.makeRequest(a)},getIssueFilesRelated:function(b,c){var d=this;var a={};var a={className:'KanbanManagementRequest',actionName:'getRelatedFiles',projectId:b,issueId:c};return d.makeRequest(a)},createFile:function(f,b,d,a,c){var g=this;var e={className:'FileTreeRequest',actionName:'createFile',projectId:f,folderId:d,fileId:null,contentVersionId:b,fileName:c,fileSize:null,description:a};return g.makeRequest(e)},createUrlFile:function(e,b,c,f,a){var g=this;var d={className:'FileTreeRequest',actionName:'createUrl',projectId:e,fileName:b,folderId:c,url:f,description:a};return g.makeRequest(d)},setAvailableInApp:function(b,d){var a=[];if(b){a.push('Work')}var e=this;var c={className:'FileTreeRequest',actionName:'setInvolvedWorkflow',fileId:d,involvedWorkflow:a};return e.makeRequest(c)},addTask:function(d,c,e,b){var f=this;var a={};var a={className:'KanbanManagementRequest',actionName:'setReminder',taskId:d,dueDate:c,recipientRole:e,recipientId:b};return f.makeRequest(a)},addEvent:function(e,c,d,b){var f=this;var a={};var a={className:'KanbanManagementRequest',actionName:'createEvent',taskId:e,StartDateTime:c,EndDateTime:d,recipientId:b};return f.makeRequest(a)},getIsUserAdmin:function(){var b=this;var a={className:'KanbanManagementRequest',actionName:'getIsUserAdmin',pageName:null};return b.makeRequest(a)},getIssue:function(c,b){var e=this;var a=[];a.push(c);var d={className:'KanbanManagementRequest',actionName:'getStore',projectId:b,groupingType:'STATUS',mode:'ISSUES',pageName:null,includeHistory:!0,includeComments:!0,includeIrrelevant:!0,issueIds:a};return e.makeRequest(d)}},0,0,0,0,0,0,[issuesEditor.store,'CrudManager'],0);Ext.cmd.derive('issuesEditor.store.EventsTabStore',Ext.data.Store,{fields:['ed','eds','i','id','im','n','oi','re','res','s','sd','sds','ti','userImage'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'EventsTabStore'],0);Ext.cmd.derive('issuesEditor.store.FilesRelatedStore',Ext.data.Store,{fields:['description','fileDate','user','type','thumbNailLarge','involvedWorkflow','fileId','url','datasource','source'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'FilesRelatedStore'],0);Ext.cmd.derive('issuesEditor.store.FilesStore',Ext.data.Store,{fields:['description','fileDate','user','type','thumbNailLarge','involvedWorkflow','fileId','url','size','contentDocumentId'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'FilesStore'],0);Ext.cmd.derive('issuesEditor.store.HistoryTabStrore',Ext.data.Store,{fields:['n','dds','i','n','res','s'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'HistoryTabStrore'],0);Ext.cmd.derive('issuesEditor.store.RemindersTabStore',Ext.data.Store,{fields:['ad','ads','d','esc','i','isi','isn','n','ri','rn','s','sot','ti','userImage'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'RemindersTabStore'],0);Ext.cmd.derive('issuesEditor.store.SimilarTabStore',Ext.data.Store,{fields:['n','dds','i','n','res','s','t'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'SimilarTabStore'],0);Ext.cmd.derive('issuesEditor.store.SubTasksTabStore',Ext.data.Store,{fields:['n','dds','i','n','res','s'],proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1},0,0,0,0,0,0,[issuesEditor.store,'SubTasksTabStore'],0);Ext.cmd.derive('issuesEditor.view.addEventViewController',Ext.app.ViewController,{addEvent:function(a,c,d){var e=a.externalConfig.recordId;var b=a.activeUser.id;return a.addEvent(e,c,d,b).then(function(b){return b.requestedData})}},0,0,0,0,['controller.addEventViewController'],0,[issuesEditor.view,'addEventViewController'],0);Ext.cmd.derive('issuesEditor.view.addEventView',Ext.panel.Panel,{crudManager:null,controller:'addEventViewController',initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'datefield',width:'45%',cls:'fieldForm',format:'d/m/Y H:i:s',altFormats:'d/m/Y H:i:s',itemId:'eventStartDate',emptyText:'dd/mm/yy H:i:s',allowBlank:!1,minValue:new Date(),listeners:{change:function(c,a,b){if(a!=null){this.up().down('#eventEndDate').setMinValue(a);this.up().down('#eventEndDate').setDisabled(!1)}else {this.up().down('#eventEndDate').setDisabled(!0);this.up().down('#eventEndDate').setValue(null)}}}},{xtype:'tbspacer',width:'10%',height:1},{xtype:'datefield',width:'45%',cls:'fieldForm',format:'d/m/Y H:i:s',altFormats:'d/m/Y H:i:s',itemId:'eventEndDate',emptyText:'dd/mm/yy H:i:s',allowBlank:!1,margin:'0 0 10 0',disabled:!0,validator:function(a){if(this.up().down('#eventStartDate').rawValue<a){return !0}else {return ''}}},{xtype:'button',text:this.L('Submit'),scale:'medium',cls:'buttonCss',listeners:{click:function(){var a=this.up('panel');var b=a.items.getRange().every(function(a){if(a.xtype!='tbspacer'&&a.xtype!='button'){return a.validate()}else {return !0}});if(!b){return !1}else {a.getController().addEvent(a.crudManager,a.down('#eventStartDate').value,a.down('#eventEndDate').value).then(function(e){var b=a.crudManager.activeUser;var d=[{layout:{type:'column'},cls:'rowInTab',width:'100%',bodyPadding:10,items:[{xtype:'eventDetailsView',value:{oi:b.id,n:b.name,sds:Ext.Date.format(a.down('#eventStartDate').value,'d/m/Y H:i:s'),eds:Ext.Date.format(a.down('#eventEndDate').value,'d/m/Y H:i:s')}}]}];a.parentElement.add(d);var c=Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().get(a.parentElement.config.dataName);c.push({oi:b.id,n:b.name,sds:Ext.Date.format(a.down('#eventStartDate').value,'d/m/Y H:i:s'),eds:Ext.Date.format(a.down('#eventEndDate').value,'d/m/Y H:i:s')});Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().set(a.parentElement.config.dataName,c);Ext.ComponentQuery.query('#eventWindow')[0].close()})}}}},{xtype:'button',text:this.L('Close'),itemId:'close',scale:'medium',cls:'buttonCss closeButton',listeners:{click:function(){this.up('window').close()}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['addEventView'],['component','box','container','panel','addEventView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'addEventView':!0},['widget.addEventView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'addEventView'],0);Ext.cmd.derive('issuesEditor.view.addRemainderController',Ext.app.ViewController,{addTask:function(a,c,e){var d=a.externalConfig.recordId;var b=a.activeUser.id;return a.addTask(d,c,e,b).then(function(b){return b.requestedData})}},0,0,0,0,['controller.addRemainderController'],0,[issuesEditor.view,'addRemainderController'],0);Ext.cmd.derive('issuesEditor.view.addRemainderView',Ext.panel.Panel,{crudManager:null,controller:'addRemainderController',subjectStore:null,initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'datefield',width:'45%',cls:'fieldForm',format:'d/m/y',itemId:'dueDateRemainder',emptyText:'dd/mm/yy',minValue:new Date(),allowBlank:!1},{xtype:'tbspacer',width:'10%',height:1},{xtype:'combobox',emptyText:this.L('Subject'),width:'45%',cls:'fieldForm',queryMode:'local',displayField:'label',valueField:'value',store:a.subjectStore,value:a.subjectStore.getAt(0),margin:'0 0 10 0',itemId:'subjectRemainder',allowBlank:!1},{xtype:'button',text:this.L('Submit'),scale:'medium',cls:'buttonCss',listeners:{click:function(){var a=this.up('panel');var b=a.items.getRange().every(function(a){if(a.xtype!='tbspacer'&&a.xtype!='button'){return a.validate()}else {return !0}});if(!b){return !1}else {a.getController().addTask(a.crudManager,a.down('#dueDateRemainder').value,a.down('#subjectRemainder').value.toUpperCase()).then(function(e){var b=a.crudManager.activeUser;var d=[{layout:{type:'column'},cls:'rowInTab',width:'100%',bodyPadding:10,items:[{xtype:'remainderDetailView',value:{ri:b.id,rn:b.name,n:a.down('#subjectRemainder').value,ads:Ext.Date.format(a.down('#dueDateRemainder').value,'d/m/Y')}}]}];a.parentElement.add(d);var c=Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().get(a.parentElement.config.dataName);c.push({ri:b.id,rn:b.name,n:a.down('#subjectRemainder').value,ads:Ext.Date.format(a.down('#dueDateRemainder').value,'d/m/Y')});Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().set(a.parentElement.config.dataName,c);Ext.ComponentQuery.query('#remainderWindow')[0].close()})}}}},{xtype:'button',text:this.L('Close'),itemId:'close',scale:'medium',cls:'buttonCss closeButton',listeners:{click:function(){this.up('window').close()}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(){var a=this;a.subjectStore=Ext.create('Ext.data.Store',{data:[{value:'ACCOUNTABLE',label:a.L('Accountable')},{value:'PROJECT',label:a.L('Project')},{value:'RESPONSIBLE',label:a.L('Responsible')}]});Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['addRemainderView'],['component','box','container','panel','addRemainderView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'addRemainderView':!0},['widget.addRemainderView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'addRemainderView'],0);Ext.cmd.derive('issuesEditor.view.commentController',Ext.app.ViewController,{addSubComment:function(a,b){return a.addSubComment(b).then(function(c){return c.requestedData})}},0,0,0,0,['controller.commentController'],0,[issuesEditor.view,'commentController'],0);Ext.cmd.derive('issuesEditor.view.commentDetailView',Ext.panel.Panel,{itemId:'commentDetailViewId',initComponent:function(){var a=this;Ext.apply(a,{layout:{type:'column'},width:'100%',items:[{xtype:'image',itemId:'commentImg',width:'7%',height:50,cls:'imageField',listeners:{afterrender:function(b){this.up('issueTabsView').getUserImg(a.value.ui,this)}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.un,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'10%',height:1},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.cd,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'40%',height:1,padding:'0 0 5 0'},{xtype:'button',text:this.L('Reply'),itemId:'reply',scale:'small',cls:'replyButton',hidden:a.value.ci==null,listeners:{click:function(c){var b=c.up();var d=new Ext.Window({itemId:'replyCommentWindow',cls:'replyCommentWindow',width:400,height:120,resizable:!1,closeAction:'destroy',header:!1,modal:!0,items:[{xtype:'commentView',commentId:a.value.ci,crudManager:b.crudManager,parentElement:b}]});d.show()}}},{xtype:'textareafield',grow:!0,anchor:'100%',width:'100%',padding:'0 0 5 0',fieldCls:'readonlyField',readOnly:!0,value:a.value.t}],listeners:{afterrender:function(a){Ext.each(a.config.value.sc,function(c){var b=[{layout:{type:'fit'},width:'100%',bodyPadding:'0 0 0 30',items:[{xtype:'commentDetailView',value:c}]}];a.add(b)})}}});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['commentDetailView'],['component','box','container','panel','commentDetailView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'commentDetailView':!0},['widget.commentDetailView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'commentDetailView'],0);Ext.cmd.derive('issuesEditor.view.commentView',Ext.panel.Panel,{controller:'commentController',itemId:'commentViewId',initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},width:'100%',items:[{xtype:'textareafield',grow:!0,itemId:'replyComment',emptyText:this.L('TypeComment'),anchor:'100%',width:'100%',padding:'0 0 5 0'},{xtype:'button',text:this.L('Submit'),itemId:'submitComment',scale:'medium',cls:'buttonCss',margin:'0 0 5 0',listeners:{click:function(c){var a=c.up();var d={data:a.down('#replyComment').value,feedId:a.parentElement.value.ci};var b=a.crudManager.activeUser;var e=[{layout:{type:'fit'},width:'100%',items:[{xtype:'commentDetailView',bodyPadding:'0 0 0 30',value:{cd:Ext.Date.format(new Date(),'d-m-Y'),un:b.name,ui:b.id,t:a.down('#replyComment').value}}]}];a.getController().addSubComment(a.crudManager,d).then(function(d){a.parentElement.add(e);a.parentElement.value.sc.push({cd:Ext.Date.format(new Date(),'d-m-Y'),un:b.name,ui:b.id,t:a.down('#replyComment').value});c.up().up().close()})}}},{xtype:'button',text:this.L('Close'),itemId:'closeReply',scale:'medium',cls:'buttonCss closeButton',margin:'0 0 5 0',listeners:{click:function(a){a.up().up().close()}}}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['commentView'],['component','box','container','panel','commentView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'commentView':!0},['widget.commentView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'commentView'],0);Ext.cmd.derive('issuesEditor.view.eventDetailsView',Ext.panel.Panel,{itemId:'eventDetailsViewId',initComponent:function(){var a=this;Ext.apply(a,{layout:{type:'column'},width:'100%',items:[{xtype:'image',width:'7%',height:'20%',cls:'imageField',listeners:{afterrender:function(b){this.up('issueTabsView').getUserImg(a.value.oi,this)}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.n,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'30%',cls:'fieldForm',value:a.value.sds,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'30%',cls:'fieldForm',value:a.value.eds,fieldCls:'readonlyField',readOnly:!0}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['eventDetailsView'],['component','box','container','panel','eventDetailsView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'eventDetailsView':!0},['widget.eventDetailsView'],0,[issuesEditor.view,'eventDetailsView'],0);Ext.cmd.derive('issuesEditor.view.eventsTabController',Ext.app.ViewController,{},0,0,0,0,['controller.eventsTabController'],0,[issuesEditor.view,'eventsTabController'],0);Ext.cmd.derive('issuesEditor.view.eventsTabView',Ext.grid.Panel,{crudManager:null,controller:'eventsTabController',subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.EventsTabStore');a.store.loadData(a.data);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{header:'Photo',dataIndex:'userImage',align:'center',renderer:function(a){return '<img width="32" height="32"  src="'+a+'" />'}},{text:a.L('Created_By'),dataIndex:'n',flex:1,align:'center'},{text:a.L('Start_Date'),dataIndex:'sds',flex:1,align:'center'},{text:a.L('End_Date'),dataIndex:'eds',flex:1,align:'center'}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.rtl=a.rtl;b.data=a.data;b.crudManager=a.crudManager;Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['eventsTabView'],['component','box','container','panel','tablepanel','gridpanel','grid','eventsTabView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'eventsTabView':!0},['widget.eventsTabView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'eventsTabView'],0);Ext.cmd.derive('issuesEditor.view.filesController',Ext.app.ViewController,{createFile:function(a,b){return b.createFile(a.projectId,a.contentVersionId,a.folderId,a.description,a.fileName).then(function(c){return c})},createUrlFile:function(a,b){return b.createUrlFile(a.projectId,a.fileName,a.folderId,a.url,a.description).then(function(c){return c})},getIssueFiles:function(b,c,a){return a.getIssueFiles(b,c)},deleteFile:function(b,a){return a.deleteFile(b)},editFile:function(c,b,a){return a.editFile(c,b)},editUrl:function(a,b){return b.editUrl(a.fileId,a.fileName,a.fileDescription,a.url)},setAvailableInApp:function(a,b){return b.setAvailableInApp(a.involvedWorkflow,a.fileId).then(function(c){return c})}},0,0,0,0,['controller.filesController'],0,[issuesEditor.view,'filesController'],0);Ext.cmd.derive('issuesEditor.view.filesView',Ext.grid.Panel,{allowDeselect:!0,reference:'filesgrid',crudManager:null,controller:'filesController',subjectStore:null,layout:'fit',initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.FilesStore');var c;a.store.loadData(a.dataFiles);var d=document.URL.split('?');var b=Ext.urlDecode(d[d.length-1]);Ext.apply(a,{cls:'extjsWizardWrapper fileScrollHeight',scrollable:'vertical',renderTo:Ext.getBody(),columns:[{text:this.L('Name'),dataIndex:'thumbNailLarge',flex:1,align:'center',renderer:function(d,e,b){var c=b.get('type');if(c==='url'){return '<a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('url')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a>'}else {if(!a.rtl){return '<a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('thumbNailLarge')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a><a class="contentsVersionsLink" target="_blank" href="'+client.instanceUrl+'/'+b.data.contentDocumentId+'"><i class = "fa fa-list-ol" aria-hidden="true"></i></a>'}else {return '<a class="contentsVersionsLink" target="_blank" href="'+client.instanceUrl+'/'+b.data.contentDocumentId+'"><i class = "fa fa-list-ol" aria-hidden="true"></i></a><a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('thumbNailLarge')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a>'}}}},{text:this.L('Description'),dataIndex:'description',flex:1,align:'center',renderer:function(c,d,b){var a=Ext.util.Format.substr(b.get('description'),0,15);if(a=='null'){a=''}return '<span  title="'+b.get('description')+'">'+a+'</span>'}},{text:this.L('Date'),dataIndex:'fileDate',format:'m-d-Y',flex:1,renderer:Ext.util.Format.dateRenderer('m-d-Y'),align:'center'},{text:this.L('UploadBy'),dataIndex:'user',flex:1,align:'center'},{text:this.L('Type'),dataIndex:'type',align:'center',flex:1,renderer:function(c,d,a){var b=a.get('type');if(b==='url'){return '<span flex="1">'+this.L('Link')+'</span>'}else {return '<span>'+this.L('File')+'</span>'}}},{xtype:'checkcolumn',text:this.L('involvedWorkflow'),tdCls:'no-dirty',dataIndex:'involvedWorkflow',flex:1,align:'center',sortable:!1,listeners:{checkchange:function(e,f,b){var d={involvedWorkflow:b,fileId:c};a.getController().setAvailableInApp(d,a.crudManager)},beforecheckchange:function(d,a){var b=this.up('grid').getStore().getAt(a);c=b.data.fileId}}}],dockedItems:[{xtype:'toolbar',flex:1,dock:'top',ui:'footer',items:[{xtype:'button',tooltip:this.L('AddFile'),itemId:'add',itemCls:'toolbar-dock-left',text:this.L('AddFile'),cls:'submitButton toolbar-dock-left',handler:function(){var d=null;var c=new Ext.Window({id:'TableWinUpload',bodyPadding:'10px 10px 10px 10px',width:400,rtl:a.isLocalRtl(),minWidth:400,cls:'extjsWizardWrapper',minHeight:180,layout:'anchor',defaults:{anchor:'100%'},border:!1,closable:!0,collapsible:!1,title:a.L('AddFile'),titleAlign:'center',modal:!0,items:[{fieldLabel:a.L('Name'),labelAlign:'left',allowBlank:!1,xtype:'textfield',itemId:'fileNameAddFile',emptyText:a.L('PleaseAddFileName'),anchor:'100%',width:'90%',padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#fileNameAddFile').value!=''&&d.files.length>0){Ext.getCmp('buttonUpload').enable()}else {Ext.getCmp('buttonUpload').disable()}}}},{fieldLabel:a.L('Description'),labelAlign:'left',xtype:'textareafield',itemId:'descriptionNameAddFile',emptyText:a.L('PleaseAddDescription'),anchor:'100%',width:'90%',padding:'0 0 5 0'}],html:'<div class=""><label class="">'+a.L('ChooseFile')+'</label><input  class="'+a.inputFileClass+'" id="inputFile" type="file" name="uploaded"/></div>',listeners:{afterrender:function(){d=document.getElementById('inputFile');d.addEventListener('change',EventChange,!1)}},buttons:[{id:'buttonUpload',text:a.L('Upload'),disabled:!0,cls:'submitButton',handler:function(){c.mask(a.L('Uploading'));var f=Ext.ComponentQuery.query('#descriptionNameAddFile')[0].value;var d=$('#inputFile')[0];client.createBlob('ContentVersion',{Origin:'H',PathOnClient:d.files[0].name},Ext.ComponentQuery.query('#fileNameAddFile')[0].value,'VersionData',d.files[0],function(a){e(a.id,f)});var e=function(e,d){var f={description:d,projectId:b.projectId,contentVersionId:e,folderId:a.issueId,fileName:Ext.ComponentQuery.query('#fileNameAddFile')[0].value};a.getController().createFile(f,a.crudManager).then(function(f){c.unmask();c.close();a.up('issueTabsView').body.mask(a.L('Loading'));a.getController().getIssueFiles(b.projectId,a.issueId,a.crudManager).then(function(b){a.dataFiles=b.files;a.store.loadData(a.dataFiles);a.up('issueTabsView').body.unmask()})})}}},{text:a.L('Cancel'),cls:'closeButton',handler:function(){c.close()}}]});function EventChange(a){if(Ext.ComponentQuery.query('#fileNameAddFile')[0].value&&d.files.length>0){Ext.getCmp('buttonUpload').enable()}else {Ext.getCmp('buttonUpload').disable()}}c.show()}},{xtype:'button',itemCls:'toolbar-dock-right',text:this.L('AddUrl'),itemId:'addUrl',cls:'submitButton',handler:function(){var d,e;var c=new Ext.Window({id:'TableWinuploadUrl',bodyPadding:'10px 10px 10px 10px',width:400,rtl:a.isLocalRtl(),minWidth:400,minHeight:180,titleAlign:'center',layout:'anchor',defaults:{anchor:'100%'},border:!1,closable:!0,cls:'uploadUrlWindow extjsWizardWrapper',collapsible:!1,title:a.L('AddUrl'),modal:!0,items:[{fieldLabel:a.L('Name'),labelAlign:'left',allowBlank:!1,xtype:'textfield',itemId:'urlNameAddUrl',emptyText:a.L('PleaseAddUrlName'),anchor:'100%',width:'90%',padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#urlNameAddUrl').value!=''&&this.up('panel').down('#urlLinkddUrl').value!=''&&validateURL(this.up('panel').down('#urlLinkddUrl').value)){Ext.getCmp('urlbuttonUpload').enable()}else {Ext.getCmp('urlbuttonUpload').disable()}}}},{fieldLabel:a.L('Description'),labelAlign:'left',xtype:'textareafield',itemId:'descriptionNameAddUrl',emptyText:a.L('PleaseAddDescription'),anchor:'100%',width:'90%',padding:'0 0 5 0'},{fieldLabel:a.L('Url'),labelAlign:'left',allowBlank:!1,xtype:'textfield',itemId:'urlLinkddUrl',emptyText:a.L('PleaseAddLinkUrl'),anchor:'100%',width:'90%',padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#urlNameAddUrl').value!=''&&this.up('panel').down('#urlLinkddUrl').value!=''&&validateURL(this.up('panel').down('#urlLinkddUrl').value)){Ext.getCmp('urlbuttonUpload').enable()}else {Ext.getCmp('urlbuttonUpload').disable()}}}}],buttons:[{text:a.L('Upload'),id:'urlbuttonUpload',itemId:'urlbuttonUpload',disabled:!0,cls:'submitButton',handler:function(){c.mask('Uploading...');var d=this.up('panel').down('#descriptionNameAddUrl').value;var e=this.up('panel').down('#urlLinkddUrl').value;var f=this.up('panel').down('#urlNameAddUrl').value;var g={projectId:b.projectId,fileName:f,folderId:a.issueId,url:e,description:d};a.getController().createUrlFile(g,a.crudManager).then(function(d){c.unmask();c.close();a.up('issueTabsView').body.mask(a.L('Loading'));a.getController().getIssueFiles(b.projectId,a.issueId,a.crudManager).then(function(b){a.dataFiles=b.files;a.store.loadData(a.dataFiles);a.up('issueTabsView').body.unmask()})})}},{cls:'closeButton',text:a.L('Cancel'),handler:function(){c.close()}}]});c.show()}},{'xtype':'tbfill'},{xtype:'button',buttonAlign:'right',text:a.L('Delete'),itemId:'deleteItem',cls:'clsIcon x-fa fa-trash',disabled:!0,bind:{disabled:'{!filesgrid.selection}'},handler:function(){var d,e;var c=new Ext.Window({id:'TableWindeleteItem',bodyPadding:'10px 10px 10px 10px',width:400,rtl:a.isLocalRtl(),minWidth:400,minHeight:180,titleAlign:'center',layout:'anchor',defaults:{anchor:'100%'},border:!1,closable:!0,cls:'uploadUrlWindow extjsWizardWrapper',collapsible:!1,title:a.L('DeleteFile'),modal:!0,html:'<div >'+a.L('DeleteConfirmText')+'</div>',buttons:[{text:a.L('Confirm'),id:'deleteButton',cls:'submitButton',handler:function(){c.mask(a.L('Removing'));if(a.getSelectionModel().hasSelection()){var e=a.getSelectionModel().getSelection()[0];var d=[e.data.fileId];a.getController().deleteFile(d,a.crudManager).then(function(d){c.unmask();c.close();a.up('issueTabsView').body.mask(a.L('Loading'));a.getController().getIssueFiles(b.projectId,a.issueId,a.crudManager).then(function(b){a.dataFiles=b.files;a.store.loadData(a.dataFiles);a.up('issueTabsView').body.unmask()})})}}},{cls:'closeButton',text:a.L('Cancel'),handler:function(){c.close()}}]});c.show()}},{xtype:'button',buttonAlign:'right',text:a.L('Edit'),itemId:'editItem',cls:'clsIcon x-fa  fa-pencil-square-o',disabled:!0,bind:{disabled:'{!filesgrid.selection}'},handler:function(){var g,h;var f=a.getSelectionModel().getSelection()[0];var e=f.data.type;if(e=='url'){var d=new Ext.Window({id:'TableWinEditItem',bodyPadding:'10px 10px 10px 10px',width:400,rtl:a.isLocalRtl(),minWidth:400,minHeight:180,titleAlign:'center',layout:'anchor',defaults:{anchor:'100%'},border:!1,closable:!0,cls:'uploadUrlWindow extjsWizardWrapper',collapsible:!1,title:a.L('EditUrl'),modal:!0,items:[{fieldLabel:a.L('Name'),labelAlign:'left',allowBlank:!1,xtype:'textfield',itemId:'nameEditUrlField',emptyText:a.L('PleaseAddUrlName'),anchor:'100%',width:'90%',value:a.getSelection()[0].data.name,padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#nameEditUrlField').value!=''&&this.up('panel').down('#EditUrlField').value!=''&&validateURL(this.up('panel').down('#EditUrlField').value)){Ext.getCmp('urlEditbuttonUpload').enable()}else {Ext.getCmp('urlEditbuttonUpload').disable()}}}},{fieldLabel:a.L('Description'),labelAlign:'left',xtype:'textareafield',itemId:'descriptionEditUrlField',emptyText:a.L('PleaseAddDescription'),anchor:'100%',width:'90%',value:a.getSelection()[0].data.description,padding:'0 0 5 0'},{fieldLabel:a.L('Link'),labelAlign:'left',xtype:'textfield',itemId:'EditUrlField',emptyText:a.L('PleaseAddLinkUrl'),anchor:'100%',width:'90%',value:a.getSelection()[0].data.url,padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#nameEditUrlField').value!=''&&this.up('panel').down('#EditUrlField').value!=''&&validateURL(this.up('panel').down('#EditUrlField').value)){Ext.getCmp('urlEditbuttonUpload').enable()}else {Ext.getCmp('urlEditbuttonUpload').disable()}}}}],buttons:[{text:a.L('Confirm'),id:'urlEditbuttonUpload',itemId:'urlEditbuttonUpload',cls:'submitButton',handler:function(){if(a.getSelectionModel().hasSelection()){var c={fileId:f.data.fileId,fileName:this.up('panel').down('#nameEditUrlField').value,fileDescription:this.up('panel').down('#descriptionEditUrlField').value,url:this.up('panel').down('#EditUrlField').value};a.getController().editUrl(c,a.crudManager).then(function(c){d.unmask();d.close();a.up('issueTabsView').body.mask(a.L('Loading'));a.getController().getIssueFiles(b.projectId,a.issueId,a.crudManager).then(function(b){a.dataFiles=b.files;a.store.loadData(a.dataFiles);a.up('issueTabsView').body.unmask()})})}}},{cls:'closeButton',text:a.L('Cancel'),handler:function(){d.close()}}]});d.show()}else {if(e=='file'){var c=new Ext.Window({id:'TableWinEditItem',width:400,rtl:a.isLocalRtl(),minWidth:400,minHeight:180,titleAlign:'center',bodyPadding:5,layout:'anchor',defaults:{anchor:'100%'},border:!1,closable:!0,cls:'uploadUrlWindow extjsWizardWrapper',collapsible:!1,title:a.L('EditFile'),modal:!0,items:[{fieldLabel:a.L('Name'),labelAlign:'left',allowBlank:!1,xtype:'textfield',itemId:'nameEditField',emptyText:a.L('PleaseAddFileName'),anchor:'100%',width:'90%',value:a.getSelection()[0].data.name,padding:'0 0 5 0',listeners:{change:function(){if(this.up('panel').down('#nameEditField').value!=''){Ext.getCmp('fileEditbuttonUpload').enable()}else {Ext.getCmp('fileEditbuttonUpload').disable()}}}},{fieldLabel:a.L('Description'),labelAlign:'left',xtype:'textareafield',itemId:'descriptionEditField',emptyText:a.L('PleaseAddDescription'),anchor:'100%',width:'90%',value:a.getSelection()[0].data.description,padding:'0 0 5 0'}],html:'<div class=""><label class="">'+a.L('ChooseFile')+'</label><input  class="inputFileUpload" id="inputFile" type="file" name="uploaded"/></div>',listeners:{afterrender:function(){itemFile=document.getElementById('inputFile');itemFile.addEventListener('change',EventChange,!1)}},buttons:[{text:a.L('Confirm'),id:'fileEditbuttonUpload',itemId:'fileEditbuttonUpload',cls:'submitButton',handler:function(){if(a.getSelectionModel().hasSelection()){var f=a.getSelectionModel().getSelection()[0];c.mask('Uploading...');var e=$('#inputFile')[0];var d;if(e.files.length>0){d=e.files[0].size}else {d=f.data.size}var g={projectId:b.projectId,fileId:f.data.fileId,folderId:a.issueId,contentDocumentId:f.data.contentDocumentId,contentVersionId:'',fileSize:d,fileName:this.up('panel').down('#nameEditField').value,description:this.up('panel').down('#descriptionEditField').value};a.getController().editFile(g,e,a.crudManager).then(function(d){c.unmask();c.close();a.up('issueTabsView').body.mask(a.L('Loading'));a.getController().getIssueFiles(b.projectId,a.issueId,a.crudManager).then(function(b){a.dataFiles=b.files;a.store.loadData(a.dataFiles);a.up('issueTabsView').body.unmask()})})}}},{cls:'closeButton',text:a.L('Cancel'),handler:function(){c.close()}}]});c.show()}}function EventChange(a){if(Ext.ComponentQuery.query('#nameEditField')[0].value){Ext.getCmp('fileEditbuttonUpload').enable()}else {Ext.getCmp('fileEditbuttonUpload').disable()}}}}]}]});function validateURL(b){var a=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;return a.test(b)}Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.dataFiles=b.data.files;a.crudManager=b.crudManager;a.rtl=b.rtl;a.issueId=b.issueId;Ext.grid.Panel.prototype.constructor.apply(this,arguments);a.inputFileClass=a.rtl?'inputFileUploadRtl':'inputFileUpload'}},1,['filesView'],['component','box','container','panel','tablepanel','gridpanel','grid','filesView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'filesView':!0},['widget.filesView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'filesView'],0);Ext.cmd.derive('issuesEditor.view.historyTabView',Ext.grid.Panel,{crudManager:null,subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.SubTasksTabStore');a.store.loadData(a.data);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{text:this.L('Title'),dataIndex:'n',flex:1,align:'center'},{text:this.L('Due_Date'),dataIndex:'dds',flex:1,align:'center'},{text:this.L('Responsible'),dataIndex:'res',flex:1,align:'center'},{text:this.L('Status'),dataIndex:'s',flex:1,align:'center'}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.rtl=a.rtl;b.data=a.data;b.crudManager=a.crudManager;Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['historyTabView'],['component','box','container','panel','tablepanel','gridpanel','grid','historyTabView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'historyTabView':!0},['widget.historyTabView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'historyTabView'],0);Ext.cmd.derive('issuesEditor.view.historyView',Ext.panel.Panel,{initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'image',itemId:'responsibleImg',width:'7%',height:'20%',cls:'imageField',listeners:{afterrender:function(b){this.up('issueTabsView').getUserImg(a.value.kui,this)}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.kun,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'30%',value:a.value.ds,fieldCls:'readonlyField',readOnly:!0,margin:'0 0 10 0'},{xtype:'textfield',width:'100%',cls:'fieldForm',value:a.value.m,fieldCls:'readonlyField',readOnly:!0}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['historyView'],['component','box','container','panel','historyView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'historyView':!0},['widget.historyView'],0,[issuesEditor.view,'historyView'],0);Ext.cmd.derive('issuesEditor.view.issueDetailsController',Ext.app.ViewController,{submitIssue:function(a,e,d,c,b){return a.submitIssue(d,e,c,b).then(function(f){return f})}},0,0,0,0,['controller.issueDetailsController'],0,[issuesEditor.view,'issueDetailsController'],0);Ext.cmd.derive('issuesEditor.view.issueDetailsViewModel',Ext.app.ViewModel,{data:{activeUserIsNotAccountableData:!0,responsibleDisabled:!0,accountableDisabled:!0,issueDetails:{},issueData:{}},formulas:{activeUserIsNotAccountable:{get:function(a){return a('activeUserIsNotAccountableData')},set:function(b){var a=Ext.ComponentQuery.query('issueTabsView')[0];if(a){a.getViewModel().set('activeUserIsNotAccountable',b)}this.set('activeUserIsNotAccountableData',b)}}}},0,0,0,0,['viewmodel.issueDetailsViewModel'],0,[issuesEditor.view,'issueDetailsViewModel'],0);Ext.cmd.derive('issuesEditor.view.issueDetailsView',Ext.panel.Panel,{controller:'issueDetailsController',issueDetails:{},width:'100%',viewModel:'issueDetailsViewModel',cls:'extjsWizardWrapper',setPermissions:function(c){var a=this;var b=a.getViewModel();if(c||a.isNew==!0&&!a.openFromSubIssue||a.issueDetails&&a.issueDetails.ownerId==a.crudManager.activeUser.id){b.set('activeUserIsNotAccountable',!1);b.set('activeUserIsNotResponsible',!1);b.set('responsibleDisabled',!1);b.set('accountableDisabled',!1);b.set('activeUserIsNotAccountableNotResponsible',!1)}else {b.set('activeUserIsNotAccountable',!(a.crudManager.activeUser!=null&&a.crudManager.activeUser.id==a.issueDetails.accountableUserId));b.set('activeUserIsNotResponsible',!(a.crudManager.activeUser!=null&&a.crudManager.activeUser.id==a.issueDetails.responsibleUserId));b.set('responsibleDisabled',b.get('activeUserIsNotAccountableData')&&a.issueDetails.accountableId!=null);b.set('accountableDisabled',!(a.mi!=null||a.isNew!=!0&&a.issueDetails.accountableId==null)&&b.get('activeUserIsNotAccountableData'));b.set('activeUserIsNotAccountableNotResponsible',b.get('activeUserIsNotResponsible')&&b.get('activeUserIsNotAccountableData'))}},initComponent:function(){var a=this;var b=a.getViewModel();var d=Ext.ComponentQuery.query('issuesGrid')[0];var c=!1;if(d){c=d.getController().thisUserIsAdministrator;a.setPermissions(c)}else {var e=a.up('issueEditorView');if(e){e.crudManager.getIsUserAdmin().then(function(b){c=b.userIsAdministrator;a.setPermissions(c)})}}if(!a.isNew){b.set('issueDetails',a.issueDetails)}Ext.apply(a,{bodyPadding:'10px 10px 10px 10px',layout:{type:'column'},style:{paddingBottom:'0'},defaults:{labelAlign:'right',labelWidth:120,margin:'5px 0px 5px 0px'},items:[{xtype:'fieldset',border:!1,style:{background:'transparent',padding:'0 0 0 0',border:'none!important'},layout:'column',width:'100%',items:[{xtype:'textfield',labelClsExtra:'text-center-label-with-width',fieldLabel:a.L('Title'),width:'calc(49%)',itemId:'issueName',emptyText:this.L('Name'),allowOnlyWhitespace:!1,allowBlank:!1,requiredField:!0,bind:{value:a.isNew!=!0?'{issueDetails.title}':a.issueDetails.title,disabled:'{activeUserIsNotAccountableNotResponsible}'},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.title=b}}}},{xtype:'combobox',fieldLabel:a.L('Tag'),labelClsExtra:'text-center-label-with-width',width:'calc(49%)',itemId:'tag',emptyText:this.L('Tag'),store:a.stores.issueTagsStore,queryMode:'local',displayField:'label',multiSelect:!0,bind:{value:a.isNew!=!0?'{issueDetails.tag}':a.issueDetails.tag,disabled:'{activeUserIsNotAccountableNotResponsible}'},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.tag=b}}}}]},{xtype:'fieldset',border:!1,style:{background:'transparent',padding:a.rtl?'0 39px 0 0':'0 0 0 0',border:'none!important'},layout:'column',width:'100%',items:[{width:32,height:32,xtype:'image',margin:'0px 5px 0px 5px',style:{'text-align':'center'},itemId:'accountableImg',bind:{src:a.isNew!=!0?'{issueDetails.accountablePhoto}':a.issueDetails.accountablePhoto},listeners:{afterrender:function(c){if(a.isNew!=!0){if(b.get('issueDetails.accountablePhoto')==null){this.up('issueDetailsView').getUserImg(b.get('issueData.accountableUserId'),this,'issueDetails.accountablePhoto')}}else {if(a.issueDetails.accountablePhoto==null){this.up('issueDetailsView').getUserImg(a.issue.data.accountableUserId,this)}}}}},{xtype:'label',forId:'issueName',text:this.L('Accountable'),labelAlign:'left',margin:a.rtl?'9px 5px 9px 5px':'9px 5px 9px 5px'},{xtype:'combobox',emptyText:this.L('Accountable'),style:{margin:a.rtl?'0 0 0 31px':'0 9px 0 0'},itemId:'accountable',width:a.rtl?'calc(49% - 103px)':'calc(49% - 123px)',store:a.stores.workerStore,queryMode:'local',displayField:'label',allowBlank:!1,allowOnlyWhitespace:!1,requiredField:!0,bind:{value:a.isNew!=!0?'{issueDetails.accountable}':a.issueDetails.accountable,disabled:'{accountableDisabled}'},listeners:{change:function(e,c,d){if(a.isNew!=!0){Ext.each(a.stores.workerStore.data.items,function(a){if(a.data.label==c){b.set('issueDetails.accountablePhoto',a.data.fullPathUrl);b.set('issueDetails.accountableUserId',a.data.userId);b.set('issueDetails.accountableId',a.data.value)}})}else {Ext.each(a.stores.workerStore.data.items,function(b){if(b.data.label==c){a.issueDetails.accountablePhoto=b.data.fullPathUrl;a.issueDetails.accountable=c;a.issueDetails.accountableId=b.data.value}})}}}},{xtype:'image',width:32,height:32,style:{'text-align':'center'},bind:{src:a.isNew!=!0?'{issueDetails.responsiblePhoto}':a.issueDetails.responsiblePhoto},listeners:{afterrender:function(c){if(a.isNew!=!0){if(b.get('issueDetails.responsiblePhoto')==null){this.up().up().getUserImg(b.get('issueData.responsibleUserId'),this,'issueDetails.responsiblePhoto')}}else {if(a.issueDetails.responsiblePhoto==null){this.up().up().getUserImg(a.issue.data.responsibleUserId,this)}}}}},{xtype:'label',forId:'issueName',text:this.L('Responsible'),labelAlign:'left',margin:a.rtl?'9px 20px 9px 10px':'9px 5px 9px 5px'},{xtype:'combobox',emptyText:this.L('Responsible'),itemId:'responsible',width:a.rtl?'calc(49% - 104px)':'calc(49% - 122px)',store:a.stores.workerStore,queryMode:'local',displayField:'label',allowBlank:!1,allowOnlyWhitespace:!1,requiredField:!0,bind:{disabled:'{activeUserIsNotAccountable}',value:a.isNew!=!0?'{issueDetails.responsible}':a.issueDetails.responsible},listeners:{change:function(e,c,d){if(a.isNew!=!0){Ext.each(a.stores.workerStore.data.items,function(a){if(a.data.label==c){b.set('issueDetails.responsiblePhoto',a.data.fullPathUrl);b.set('issueDetails.responsibleId',a.data.value)}})}else {Ext.each(a.stores.workerStore.data.items,function(b){if(b.data.label==c){a.issueDetails.responsiblePhoto=b.data.fullPathUrl;a.issueDetails.responsible=c;a.issueDetails.responsibleId=b.data.value}})}}}}]},{xtype:'fieldset',border:!1,style:{background:'transparent',padding:'0 0 0 0',border:'none!important'},layout:'column',width:'100%',items:[{xtype:'textfield',labelClsExtra:'text-center-label-with-width',width:'calc(49%)',fieldLabel:a.L('Description'),itemId:'description',emptyText:this.L('Description'),allowOnlyWhitespace:!1,requiredField:!0,bind:{value:a.isNew!=!0?'{issueDetails.description}':a.issueDetails.description,disabled:'{activeUserIsNotAccountableNotResponsible}'},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.description=b}}}},{xtype:'combobox',labelClsExtra:'text-center-label-with-width',width:'calc(49%)',fieldLabel:a.L('IssueType'),itemId:'issueType',emptyText:this.L('IssueType'),allowOnlyWhitespace:!1,allowBlank:!1,requiredField:!0,store:a.stores.issueTypeStore,disabled:a.mi!=null?!1:a.isNew&&!a.openFromSubIssue?!1:!0,queryMode:'local',displayField:'label',valueField:'value',bind:{value:a.isNew!=!0?'{issueDetails.issueTypeId}':a.issueDetails.issueTypeId},listeners:{change:function(d,b,c){a.issueTypeChange=!0;if(a.isNew==!0){a.issueDetails.issueTypeId=b}}}}]},{xtype:'fieldset',border:!1,style:{background:'transparent',padding:'0 0 0 0',border:'none!important'},layout:'column',width:'100%',items:[{xtype:'datefield',labelClsExtra:'text-center-label-with-width',width:'calc(49%)',fieldLabel:a.L('DueDate'),itemId:'issueDueDate',emptyText:this.L('DueDate'),format:'d/m/Y',allowOnlyWhitespace:!1,allowBlank:!1,requiredField:!0,bind:{disabled:'{activeUserIsNotAccountable}',value:a.isNew!=!0?'{issueDetails.dueDate}':a.issueDetails.dueDate},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.dueDate=b}}}},{xtype:'combobox',labelClsExtra:'text-center-label-with-width',width:'calc(49%)',fieldLabel:a.L('Status'),itemId:'status',emptyText:this.L('Status'),queryMode:'local',displayField:'label',valueField:'value',store:a.stores.issueStatusStore,allowBlank:!1,requiredField:!0,editable:!1,forceSelction:!0,bind:{value:a.isNew!=!0?'{issueDetails.status}':'Opened',disabled:'{activeUserIsNotAccountableNotResponsible}'},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.status=b}}}}]},{xtype:'fieldset',border:!1,style:{background:'transparent',border:'none!important',paddingTop:'0px!important'},layout:'fit',width:725,items:[{xtype:'htmleditor',emptyText:this.L('RichDescription'),rtl:a.rtl,createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=='http://'){var b=this.getDoc().getSelection().getRangeAt(0);this.relayCmd('InsertHTML','<a onClick="window.open(\''+a+'\')" href="'+a+'">'+b.startContainer.data.substring(b.startOffset,b.endOffset)+'</a>')}},itemId:'richDescription',bind:{value:a.isNew!=!0?'{issueDetails.richDescription}':a.issueDetails.richDescription,disabled:'{activeUserIsNotAccountableNotResponsible}'},listeners:{change:function(d,b,c){if(a.isNew==!0){a.issueDetails.richDescription=b}}}}]}],dockedItems:[{xtype:'toolbar',flex:1,cls:'background-color-tratnasparent',style:{background:'transparent',padding:a.rtl?'0 9px 0 10px':'0 17px 0 0',backgroundColor:'#ececec!important',paddingTop:'0px!important'},dock:'bottom',ui:'footer',layout:{pack:'end',type:'hbox'},items:[{xtype:'fieldset',border:!1,style:{background:'transparent',border:'none!important',paddingTop:'0px!important',paddingRight:'0px!important',paddingLeft:'0px!important',paddingBottom:'0px!important'},items:[{xtype:'button',text:this.L('Cancel'),itemId:'close',scale:'medium',cls:'buttonCss closeButton',listeners:{click:function(a){if(a.up('window')!=null){a.up('window').close()}else {$(document).trigger('closeEvent')}}}},{xtype:'button',text:this.L('Submit'),itemId:'submit',scale:'medium',cls:'buttonCss submitButton',style:{marginLeft:a.rtl?'10px!important':''},listeners:{click:function(g){var f=g.up('issueDetailsView').query('[requiredField=true]').every(function(a){return a.validate()});if(!f){return !1}else {var b=a.getViewModel();a.up('window').mask(a.L('Loading'));var c=this.up('issueDetailsView');var d=c.issue.data.id!=null?'UPDATE':'NEW';if(a.issueTypeChange==!0){Ext.each(a.stores.issueTypeStore.data.items,function(a){if(a.data.label==b.get('issueDetails.issueType')){b.set('issueDetails.issueType',a.data.label);b.set('issueData.issueTypeId',a.data.value)}})}var e=b.get('issueDetails');if(a.isNew==!0){e=a.issueDetails}c.getController().submitIssue(c.crudManager,e,d,c.parentIssueId,c.config.mi).then(function(l){var c=null;var h=null;if(Ext.ComponentQuery.query('issueTabsView')[0]){h=Ext.ComponentQuery.query('issueTabsView')[0];c=h.down('#subTasksTab')}if(d=='UPDATE'){if(a.openFromSubIssue===!0){var f=[{layout:{type:'column'},cls:'rowInTab',width:'100%',bodyPadding:10,items:[{xtype:'subIssueView',value:{resPhoto:a.issueDetails.responsiblePhoto,res:a.issueDetails.responsible,n:a.issueDetails.title,dds:Ext.Date.format(a.issueDetails.dueDate,'d/m/Y'),dd:a.issueDetails.dueDate,s:a.issueDetails.status,t:a.issueDetails.tag,i:a.issueDetails.id}}]}];if(c==null){h=Ext.ComponentQuery.query('issueTabsView')[0];c=h.down('#'+h.activeTab.items.items[0].activeTab.itemId)}var e;Ext.each(c.items.getRange(),function(b){if(b.config.items[0].value.i==a.issueDetails.id){e=c.items.indexOf(b);c.remove(b)}});c.insert(e,f);var i=h.getViewModel().get(c.config.dataName);i.splice(e,1);i.splice(e,0,f[0].items[0].value);Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().set(c.config.dataName,i)}else {b.set('issueData.title',b.get('issueDetails.title'));b.set('issueData.accountable',b.get('issueDetails.accountable'));b.set('issueData.accountableId',b.get('issueDetails.accountableId'));b.set('issueData.accountablePhoto',b.get('issueDetails.accountablePhoto'));b.set('issueData.responsible',b.get('issueDetails.responsible'));b.set('issueData.responsibleId',b.get('issueDetails.responsibleId'));b.set('issueData.responsiblePhoto',b.get('issueDetails.responsiblePhoto'));b.set('issueData.description',b.get('issueDetails.description'));b.set('issueData.issueType',b.get('issueDetails.issueType'));if(a.issue.data.issueDueDate!=b.get('issueDetails.dueDate')&&a.issue.data.issueDueDate!=null&&b.get('issueDetails.dueDate')!=null){a.issue.data.issueDueDate.setHours(0);b.get('issueDetails.dueDate').setHours(0);var m=Ext.Date.diff(a.issue.data.issueDueDate,b.get('issueDetails.dueDate'),'d');var k=[];Ext.each(Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().get(c.config.dataName),function(a){var b=new Date(a.dd);a.dd=Ext.Date.add(b,Ext.Date.DAY,m);a.dds=Ext.Date.format(a.dd,'d/m/Y');k.push(a)});c.removeAll();for(var e=k.length;e>0;e--){var f=[{layout:{type:'column'},cls:'rowInTab',width:'100%',bodyPadding:10,items:[{xtype:'subIssueView',value:k[e-1]}]}];c.insert(0,f)}}a.issue.data.issueDueDate=b.get('issueDetails.dueDate');b.set('issueData.issueDueDate',b.get('issueDetails.dueDate'));b.set('issueData.status',b.get('issueDetails.status'));b.set('issueData.tag',b.get('issueDetails.tag'));b.set('issueData.richDescription',b.get('issueDetails.richDescription'));b.set('issueData.accountableId',b.get('issueDetails.accountableId'));b.set('issueData.accountableUserId',b.get('issueDetails.accountableUserId'));b.set('activeUserIsNotAccountable',!(a.crudManager.activeUser!=null&&a.crudManager.activeUser.id==b.get('issueDetails.accountableUserId')));b.set('activeUserIsNotResponsible',!(a.crudManager.activeUser!=null&&a.crudManager.activeUser.id==b.get('issueDetails.responsibleUserId')));b.set('responsibleDisabled',b.get('activeUserIsNotAccountableData')&&b.get('issueDetails.accountableId')!=null);b.set('accountableDisabled',!(a.mi!=null||a.isNew!=!0&&b.get('issueDetails.accountableId')==null)&&b.get('activeUserIsNotAccountableData'));b.set('activeUserIsNotAccountableNotResponsible',b.get('activeUserIsNotResponsible')&&b.get('activeUserIsNotAccountableData'));var j=Ext.ComponentQuery.query('issuesComponent');if(j[0]){j[0].down('issuesGrid').getStore().getById(b.get('issueDetails').id).set(b.get('issueDetails'))}}}else {if(d=='NEW'){if(c!=null){var f=[{layout:{type:'column'},cls:'rowInTab',width:'100%',bodyPadding:10,items:[{xtype:'subIssueView',value:{resPhoto:a.issueDetails.responsiblePhoto,res:a.issueDetails.responsible,n:a.issueDetails.title,dds:Ext.Date.format(a.issueDetails.dueDate,'d/m/Y'),dd:a.issueDetails.dueDate,s:a.issueDetails.status,t:a.issueDetails.tag}}]}];c.insert(0,f);var i=Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().get(c.config.dataName);i.push(f[0].items[0].value);Ext.ComponentQuery.query('issueTabsView')[0].getViewModel().set(c.config.dataName,i)}var j=Ext.ComponentQuery.query('issuesComponent');if(j[0]){a.issueDetails.id=l.newIssue.Id;a.issueDetails.progress=l.newIssue.CC_REID__Progress_Status__c;j[0].getController().addNewIssue(a.issueDetails)}Ext.ComponentQuery.query('#addNewChildIssue')[0].close()}}a.up('window').unmask();if(!a.firstTimeAccountable){a.up('window').close()}else {a.firstTimeAccountable=!1;a.applyFirstTimeAccountable(!1)}})}}}}]}]}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},applyFirstTimeAccountable:function(c){var b=this;var a=b.down('#submit');if(c){a.setText(b.L('Apply'));a.addCls('applyButton')}else {a.setText(b.L('Submit'));a.removeCls('applyButton')}},listeners:{afterlayout:function(a){if(a.up()){var b=a.up().getWidth();a.down('htmleditor').up().setWidth(b-20)}if(a.firstTimeAccountable==!0){a.applyFirstTimeAccountable(!0)}}},getUserImg:function(d,c,b){var e=this.getViewModel();var a=!1;Ext.each(Ext.data.StoreManager.lookup('usersStore').data.items,function(f){if(f.id==d){a=!0;if(b!=null){e.set(b,f.data.url)}else {c.setSrc(f.data.url)}}});if(a==!1){c.setSrc(screenConfig.resourceUrl+'resources/images/default-user.png')}},constructor:function(a){var b=this;b.stores=a.stores;b.isNew=a.isNew===!0||a.openFromSubIssue===!0;b.openFromSubIssue=a.openFromSubIssue===!0;b.rtl=a.rtl;b.setIssueDetails(a.issue,a.crudManager);b.maxAllowedDate=a.maxAllowedDate||null;if(a.locale){issuesEditor.locale[a.locale].apply()}Ext.panel.Panel.prototype.constructor.apply(this,arguments)},setIssueDetails:function(b,c){var a=this;if(!b.data.accountableId){a.firstTimeAccountable=!0}a.issueDetails.id=b.data.id;a.issueDetails.title=b.data.title;a.issueDetails.responsible=b.data.responsible;a.issueDetails.responsibleId=b.data.responsibleId;a.issueDetails.accountable=b.data.accountable;a.issueDetails.accountableId=b.data.accountableId;a.issueDetails.description=b.data.description;a.issueDetails.issueType=b.data.issueType;a.issueDetails.issueTypeId=b.data.issueTypeId;a.issueDetails.accountableUserId=b.data.accountableUserId;a.issueDetails.dueDate=null;if(c.activeUser){a.issueDetails.dueDate=c.activeUser.id==b.data.responsibleUserId&&c.activeUser.id!=a.issueDetails.accountableUserId?b.data.issueRequestedDueDate:b.data.issueDueDate}a.issueDetails.status=b.data.status;if(Ext.isArray(b.data.tag)){a.issueDetails.tag=b.data.tag}else {a.issueDetails.tag=[];a.issueDetails.tag.push(b.data.tag)}a.issueDetails.richDescription=b.data.richDescription;a.issueDetails.responsibleUserId=b.data.responsibleUserId;a.issueDetails.responsiblePhoto=null;a.issueDetails.accountablePhoto=null;a.issueDetails.ownerId=b.data.ownerId;a.issueDetails=Object.assign({},a.issueDetails)}},1,['issueDetailsView'],['component','box','container','panel','issueDetailsView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'issueDetailsView':!0},['widget.issueDetailsView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'issueDetailsView'],0);Ext.cmd.derive('issuesEditor.view.issueEditorController',Ext.app.ViewController,{},0,0,0,0,['controller.issueEditorController'],0,[issuesEditor.view,'issueEditorController'],0);Ext.cmd.derive('issuesEditor.view.IssueEditorView',Ext.panel.Panel,{controller:'issueEditorController',width:'100%',cls:'extjsWizardWrapper addNewChildIssue',issueStores:{},issue:{},initComponent:function(){var a=this;if(a.issueTemp!=null){a.initIssue(a.issueTemp)}Ext.apply(a,{disabled:a.isMeetingSigned,dockedItems:[{xtype:'issueDetailsView',dock:'top',itemId:'issueDetails',crudManager:a.crudManager,issue:a.issue,cls:'issueDetailsView',stores:a.issue.data.stores,rtl:a.rtl},{xtype:'issueTabsView',itemId:'issueTabs',crudManager:a.crudManager,issue:a.issue,rtl:a.rtl}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},listeners:{afterlayout:function(a){if(a.down('issueDetailsView')){var b=a.getWidth();a.down('issueDetailsView').down('htmleditor').up().setWidth(b-20)}}},listeners:{afterlayout:function(a){if(a.down('issueDetailsView')){var b=a.getWidth();a.down('issueDetailsView').down('htmleditor').up().setWidth(b-20)}}},setAllStores:function(b,d){var a=this;a.issueStores['userStore']=Ext.create('issuesPkgs.store.usersStore');var c=[];b.resourceStore.forEach(function(a){c.push({name:a.n,url:a.iu,id:a.i})});a.issueStores['userStore'].loadData(c);a.issueStores['issueStatusStore']=Ext.create('Ext.data.Store');b.issueStatusOptions.forEach(function(c){a.issueStores['issueStatusStore'].add({value:c.value,label:c.label})});a.issueStores['issueTagsStore']=Ext.create('Ext.data.Store');b.issueTagOptions.forEach(function(c){a.issueStores['issueTagsStore'].add({value:c.value,label:c.label})});a.issueStores['issueTypeStore']=Ext.create('Ext.data.Store');b.issueTypeOptions.forEach(function(c){a.issueStores['issueTypeStore'].add({value:c.value,label:c.label})});a.issueStores['workerStore']=Ext.create('Ext.data.Store');b.workers.forEach(function(c){a.issueStores['workerStore'].add({value:c.value,label:c.label,fullPathUrl:c.fullPathUrl,userId:c.userId})})},initIssue:function(a){var b=this;b.issue={};b.issue.data={id:a.i,AssetId:a.ass,SpotId:a.spo,ConstructId:a.con,name:a.n,title:a.ti,issueDueDate:a.dd!=null?new Date(a.dd):null,issueDueDateString:a.dds,issueRequestedDueDate:a.rdd!=null?new Date(a.rdd):null,subject:a.su,status:a.s,accountable:a.ac,accountableId:a.aci,accountableUserId:a.acui,responsible:a.res,responsibleId:a.resi,responsibleUserId:a.resui,description:a.de,progress:a.pro,issueComments:a.c,issueHistory:a.h,issueEvents:a.ke,issueSubTasks:a.st,meetingSubject:a.ms,issueType:a.it,issueTypeId:a.iti,tag:a.t,richDescription:a.rd,userId:a.kui,stores:b.issueStores,relatedIssue:a.ris,similarIssues:a.si,meetingSubjectIssues:a.msil,tasks:a.st,events:a.ke,administrative:a.ad,irrelevant:a.irr,kind:a.ki,subkind:a.sk};var c;b.setCrudManager(b.issue.data.id,b.issue.data.userId,b.clientInstance)},changeIssue:function(f){var a=this;a.initIssue(f);var c=a.down('issueDetailsView');var d=c.getViewModel();c.setIssueDetails(a.issue,a.crudManager);d.set('issueDetails',a.down('issueDetailsView').issueDetails);var e=a.down('issueTabsView');d.set('issueData',a.issue.data);var b=a.down('issueTabsView').getActiveTab();if(b.tabValue=='Managements'){b=b.items.items[0].getActiveTab()}if(b.tabValue=='Comments'){b.items.getRange().forEach(function(a){if(a.xtype=='panel'){b.remove(a)}})}else {b.removeAll()}e.loadDataToTab(b);a.crudManager.getIsUserAdmin().then(function(b){var a=b.userIsAdministrator;c.setPermissions(a)});c.getUserImg(d.get('issueData.responsibleUserId'),this,'issueDetails.responsiblePhoto');c.getUserImg(d.get('issueData.accountableUserId'),this,'issueDetails.accountablePhoto')},setCrudManager:function(f,g,c,e,d){var b=this;var a;Ext.each(Ext.data.StoreManager.lookup('usersStore').data.items,function(b){if(b.id==g){a=b.data}});b.crudManager=Ext.create('issuesEditor.store.CrudManager');b.crudManager.setExternalConfig({client:c,recordId:f,activeUser:a,projectId:e,currentLocal:d})},constructor:function(b){var a=this;a.recordId=b.recordId;a.isMeetingSigned=b.isMeetingSigned;a.clientInstance=b.clientInstance;if(b.stores!=null){a.setAllStores(b.stores);a.issueTemp=b.issue}else {a.issue=Object.assign({},b.issue);a.setCrudManager(a.issue.data.id,a.issue.data.userId,a.clientInstance,b.projectId,b.currentLocal)}a.currentLocale=b.currentLocal.charAt(0).toUpperCase()+b.currentLocal.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';issuesEditor.locale[a.currentLocale].apply();Ext.panel.Panel.prototype.constructor.apply(this,arguments)}},1,['issueEditorView'],['component','box','container','panel','issueEditorView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'issueEditorView':!0},['widget.issueEditorView'],0,[issuesEditor.view,'IssueEditorView'],0);Ext.cmd.derive('issuesEditor.view.issueTabsController',Ext.app.ViewController,{loadTabData:function(a,c){var b=this.view.up('panel').recordId;return a.getIssueTab(b,c).then(function(b){return b})},getIssueFiles:function(b,c,a){return a.getIssueFiles(b,c).then(function(d){return d})},getIssueFilesRelated:function(b,c,a){return a.getIssueFilesRelated(b,c).then(function(d){return d})},addComment:function(a,b){return a.addComment(b).then(function(c){return c})}},0,0,0,0,['controller.issueTabsController'],0,[issuesEditor.view,'issueTabsController'],0);Ext.cmd.derive('issuesEditor.view.meetingSubjectIssueView',Ext.panel.Panel,{initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'image',itemId:'responsibleImg',width:'7%',height:'20%',cls:'imageField',listeners:{afterrender:function(b){this.up('issueTabsView').getUserImg(a.value.resui,this)}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.res,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.n,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'20%',value:a.value.dds,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'5%',height:1},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.s,fieldCls:'readonlyField',readOnly:!0}],listeners:{dblclick:{fn:function(){var a=new Ext.Window({id:'meetingWindow',width:250,height:100,resizable:!1,closeAction:'destroy',header:!1,modal:!0,data:'will open a meeting window'});a.show()},element:'el'}}});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['meetingSubjectIssueView'],['component','box','container','panel','meetingSubjectIssueView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'meetingSubjectIssueView':!0},['widget.meetingSubjectIssueView'],0,[issuesEditor.view,'meetingSubjectIssueView'],0);Ext.cmd.derive('issuesEditor.view.issueTabsViewModel',Ext.app.ViewModel,{data:{showAddButton:!1,activeUserIsNotAccountable:!0}},0,0,0,0,['viewmodel.issueTabsViewModel'],0,[issuesEditor.view,'issueTabsViewModel'],0);Ext.cmd.derive('issuesEditor.view.relatedFilesController',Ext.app.ViewController,{setAvailableInApp:function(a,b){return b.setAvailableInApp(a.involvedWorkflow,a.fileId).then(function(c){return c})}},0,0,0,0,['controller.relatedFilesController'],0,[issuesEditor.view,'relatedFilesController'],0);Ext.cmd.derive('issuesEditor.view.relatedFilesView',Ext.grid.Panel,{crudManager:null,controller:'relatedFilesController',subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.FilesRelatedStore');a.store.loadData(a.dataFiles);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{text:this.L('Name'),dataIndex:'thumbNailLarge',flex:1,align:'center',renderer:function(d,e,b){var c=b.get('type');if(c==='url'){return '<a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('url')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a>'}else {if(!a.rtl){return '<a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('thumbNailLarge')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a><a class="contentsVersionsLink" target="_blank" href="'+client.instanceUrl+'/'+b.data.contentDocumentId+'"><i class = "fa fa-list-ol" aria-hidden="true"></i></a>'}else {return '<a class="contentsVersionsLink" target="_blank" href="'+client.instanceUrl+'/'+b.data.contentDocumentId+'"><i class = "fa fa-list-ol" aria-hidden="true"></i></a><a title="'+b.get('name')+'" flex="1" target="_blank" href="'+b.get('thumbNailLarge')+'">'+Ext.util.Format.substr(b.get('name'),0,12)+'</a>'}}}},{text:this.L('Description'),dataIndex:'description',flex:1,align:'center',renderer:function(c,d,b){var a=Ext.util.Format.substr(b.get('description'),0,15);if(a=='null'){a=''}return '<span  title="'+b.get('description')+'">'+a+'</span>'}},{text:this.L('Date'),dataIndex:'fileDate',format:'m-d-Y',renderer:Ext.util.Format.dateRenderer('m-d-Y'),align:'center',flex:1},{text:this.L('UploadBy'),dataIndex:'user',flex:1,align:'center'},{text:this.L('Type'),dataIndex:'type',align:'center',flex:1,renderer:function(c,d,a){var b=a.get('type');if(b==='url'){return '<span flex="1">'+this.L('Link')+'</span>'}else {return '<span>'+this.L('File')+'</span>'}}},{xtype:'checkcolumn',text:this.L('involvedWorkflow'),dataIndex:'involvedWorkflow',tdCls:'no-dirty',flex:1,align:'center',sortable:!1,listeners:{checkchange:function(d,e,b){var c={involvedWorkflow:b,fileId:currentIdChecked};a.getController().setAvailableInApp(c,a.crudManager)},beforecheckchange:function(c,a){var b=this.up('grid').getStore().getAt(a);currentIdChecked=b.data.fileId}}},{text:this.L('DataSource'),dataIndex:'source',flex:1,align:'center',renderer:function(c){var b=c.split(' ').join('_');var a=this.L(b);return '<span title="'+a+'">'+Ext.util.Format.substr(a,0,16)+'</span>'}}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.rtl=b.rtl;a.dataFiles=b.data.files;console.log(a.dataFiles);Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['relatedFilesView'],['component','box','container','panel','tablepanel','gridpanel','grid','relatedFilesView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'relatedFilesView':!0},['widget.relatedFilesView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'relatedFilesView'],0);Ext.cmd.derive('issuesEditor.view.similarTabController',Ext.app.ViewController,{},0,0,0,0,['controller.similarTabController'],0,[issuesEditor.view,'similarTabController'],0);Ext.cmd.derive('issuesEditor.view.similarTabView',Ext.grid.Panel,{crudManager:null,controller:'similarTabController',subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.SimilarTabStore');a.store.loadData(a.dataSimilar);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{text:this.L('Title'),dataIndex:'n',flex:1,align:'center'},{text:this.L('Due_Date'),dataIndex:'dds',flex:1,align:'center'},{text:this.L('Responsible'),dataIndex:'res',flex:1,align:'center'},{text:this.L('Status'),dataIndex:'s',flex:1,align:'center'},{text:this.L('Tags'),dataIndex:'t',flex:1,align:'center'}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.rtl=b.rtl;a.dataSimilar=b.data;a.crudManager=b.crudManager;console.log(a.dataSimilar);Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['similarTabView'],['component','box','container','panel','tablepanel','gridpanel','grid','similarTabView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'similarTabView':!0},['widget.similarTabView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'similarTabView'],0);Ext.cmd.derive('issuesEditor.view.remainderDetailView',Ext.panel.Panel,{itemId:'remainderDetailViewId',initComponent:function(){var a=this;Ext.apply(a,{layout:{type:'column'},width:'100%',items:[{xtype:'image',width:'7%',height:'20%',cls:'imageField',listeners:{afterrender:function(b){this.up('issueTabsView').getUserImg(a.value.ri,this)}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.rn,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',cls:'fieldForm',value:a.value.n,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'30%',cls:'fieldForm',value:a.value.s,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',cls:'fieldForm',value:a.value.ads,fieldCls:'readonlyField',readOnly:!0}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,['remainderDetailView'],['component','box','container','panel','remainderDetailView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'remainderDetailView':!0},['widget.remainderDetailView'],0,[issuesEditor.view,'remainderDetailView'],0);Ext.cmd.derive('issuesEditor.view.remindersTabController',Ext.app.ViewController,{},0,0,0,0,['controller.remindersTabController'],0,[issuesEditor.view,'remindersTabController'],0);Ext.cmd.derive('issuesEditor.view.remindersTabView',Ext.grid.Panel,{crudManager:null,controller:'remindersTabController',subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.RemindersTabStore');a.store.loadData(a.dataSimilar);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{header:'Image',dataIndex:'userImage',align:'center',renderer:function(a){return '<img width="32" height="32"  src="'+a+'" />'}},{text:a.L('Created_By'),dataIndex:'rn',flex:1,align:'center'},{text:a.L('Subject'),dataIndex:'n',flex:1,align:'center'},{text:a.L('Status'),dataIndex:'s',flex:1,align:'center'}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(b){var a=this;a.rtl=b.rtl;a.dataSimilar=b.data;a.crudManager=b.crudManager;a.userStore=b.userStore;console.log(a.dataSimilar);Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['remindersTabView'],['component','box','container','panel','tablepanel','gridpanel','grid','remindersTabView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'remindersTabView':!0},['widget.remindersTabView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'remindersTabView'],0);Ext.cmd.derive('issuesEditor.view.subTasksTabController',Ext.app.ViewController,{},0,0,0,0,['controller.subTasksTabController'],0,[issuesEditor.view,'subTasksTabController'],0);Ext.cmd.derive('issuesEditor.view.subTasksTabView',Ext.grid.Panel,{crudManager:null,controller:'subTasksTabController',subjectStore:null,initComponent:function(){var a=this;a.store=Ext.create('issuesEditor.store.SubTasksTabStore');a.store.loadData(a.data);Ext.apply(a,{height:212,cls:'fileScrollHeightRelatedFiles extjsWizardWrapper',autoScroll:!1,style:{overflow:'hidden'},layout:'fit',renderTo:Ext.getBody(),columns:[{text:this.L('Title'),dataIndex:'n',flex:1,align:'center'},{text:this.L('Due_Date'),dataIndex:'dds',flex:1,align:'center'},{text:this.L('Responsible'),dataIndex:'res',flex:1,align:'center'},{text:this.L('Status'),dataIndex:'s',flex:1,align:'center'}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},constructor:function(a){var b=this;b.rtl=a.rtl;b.data=a.data;b.crudManager=a.crudManager;Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['subTasksTabView'],['component','box','container','panel','tablepanel','gridpanel','grid','subTasksTabView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'subTasksTabView':!0},['widget.subTasksTabView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'subTasksTabView'],0);Ext.cmd.derive('issuesEditor.view.issueTabsView',Ext.tab.Panel,{viewModel:'issueTabsViewModel',controller:'issueTabsController',itemId:'issueTabsViewId',width:'100%',height:'50%',cls:'issueTabsViewId',initComponent:function(){var b=this;var c=Ext.ComponentQuery.query('issueDetailsView')[0].getViewModel();var a=b.getViewModel();a.set('activeUserIsNotAccountable',c.get('activeUserIsNotAccountableData'));a.set('addButtonDisable',a.get('activeUserIsNotAccountable'));a.set('issueData',b.issue.data);Ext.apply(b,{items:[{title:this.L('Managements'),tabValue:'Managements',height:265,items:[{xtype:'tabpanel',width:'100%',height:265,scrollable:'y',listeners:{beforetabchange:function(d,b,c){if(!b.rendered){this.up('issueTabsView').loadDataToTab(b)}if(b.tabValue=='SubTasks'||b.tabValue=='Remainders'||b.tabValue=='Events'){a.set('showAddButton',!1);if(a.get('activeUserIsNotAccountable')&&(b.tabValue=='Remainders'||b.tabValue=='Events')||!a.get('activeUserIsNotAccountable')){a.set('addButtonDisable',!1)}else {a.set('addButtonDisable',!0)}}else {a.set('showAddButton',!0);a.set('addButtonDisable',!1)}},afterrender:function(b){var e=this;var c=b.up('issueTabsView');c.loadDataToTab(b.activeTab);var d=b.tabBar;d.insert(7,[{xtype:'button',text:this.up().up().L('Add'),itemId:'addTask',scale:'small',cls:'addButton '+(c.rtl==!0?'addButtonRtl':'addButtonLtr'),bind:{hidden:'{showAddButton}',disabled:'{addButtonDisable}'},listeners:{click:function(h){var d=b.activeTab;if(d.tabValue=='SubTasks'){var c=a.get('issueData');if(c.issueDueDate!=null&&!Ext.Date.between(new Date(),new Date(),c.issueDueDate)&&(new Date()).toDateString()!==c.issueDueDate.toDateString()){var f=h.up('issueTabsView');Ext.Msg.show({title:f.L('Error'),message:f.L('DueDateInvalid'),buttons:Ext.Msg.OK,rtl:f.isLocalRtl(),icon:Ext.Msg.ERROR})}else {var g={data:{issueDueDate:c.issueDueDate,accountableUserId:c.accountableUserId,accountable:c.accountable,accountableId:c.accountableId,issueTypeId:c.issueTypeId,issueType:c.issueType,ownerId:c.ownerId}};var e=new Ext.Window({itemId:'addNewChildIssue',cls:'extjsWizardWrapperaddNewChildIssue',width:750,height:500,resizable:!1,title:this.up('panel').up().up().L('AddSubTaks'),titleAlign:'center',header:!0,modal:!0,rtl:this.up('panel').up().up().rtl,items:[{xtype:'issueDetailsView',dock:'top',rtl:this.up('window').rtl,itemId:'issueDetails',border:'0 0 50 0',height:'100%',crudManager:this.up('issueTabsView').crudManager,issue:g,parentIssueId:this.up('issueTabsView').issue.data.id,stores:c.stores,openFromSubIssue:!0,maxAllowedDate:c.issueDueDate}]});e.show()}}else {if(d.tabValue=='Remainders'){var e=new Ext.Window({itemId:'remainderWindow',cls:'remainderWindow',width:450,height:100,resizable:!1,header:!1,modal:!0,items:[{xtype:'addRemainderView',dock:'top',crudManager:this.up('issueTabsView').crudManager,parentElement:d}]});e.show()}else {if(d.tabValue=='Events'){var e=new Ext.Window({itemId:'eventWindow',cls:'eventWindow',width:450,height:100,resizable:!1,header:!1,modal:!0,items:[{xtype:'addEventView',dock:'top',crudManager:this.up('issueTabsView').crudManager,parentElement:d}]});e.show()}}}}}}])}},items:[{title:this.L('SubTasks'),itemId:'subTasksTab',tabValue:'SubTasks',scroll:'vertical',autoScroll:!0,height:'100%',type:'subIssueView',elementCss:'rowInTab',dataName:'issueData.relatedIssue'},{title:this.L('History'),tabValue:'History',itemId:'HistoryTab',scroll:'vertical',autoScroll:!0,type:'meetingSubjectIssueView',elementCss:'rowInTab',dataName:'issueData.meetingSubjectIssues'},{title:this.L('Remainders'),tabValue:'Remainders',itemId:'remindersTab',scroll:'vertical',autoScroll:!0,type:'remainderDetailView',elementCss:'rowInTab',dataName:'issueData.tasks'},{title:this.L('Events'),tabValue:'Events',itemId:'EventsTab',scroll:'vertical',autoScroll:!0,type:'eventDetailsView',elementCss:'rowInTab',dataName:'issueData.events'},{title:this.L('Similar'),itemId:'SimilarTab',tabValue:'Similar',scroll:!1,autoScroll:!1,height:'100%',type:'subIssueView',elementCss:'rowInTab',dataName:'issueData.similarIssues'},{title:this.L('Files'),itemId:'FilesTab',tabValue:'Files',scroll:!1,autoScroll:!1,height:'100%',type:'subIssueView',elementCss:'rowInTab',dataName:'issueData.files'},{title:this.L('RelatedFiles'),itemId:'RelatedFilesTab',tabValue:'RelatedFiles',scroll:!1,autoScroll:!1,height:'100%',type:'subIssueView',elementCss:'rowInTab',dataName:'issueData.relatedFiles'}]}]},{title:this.L('Comments'),tabValue:'Comments',height:265,bodyPadding:5,scroll:'vertical',scrollable:!0,type:'commentDetailView',layout:{type:'column'},dataName:'issueData.issueComments',items:[{xtype:'image',itemId:'commentImg',width:'7%',height:60,cls:'imageField',src:this.crudManager.activeUser.url},{xtype:'textareafield',grow:!0,itemId:'newComment',emptyText:this.L('TypeComment'),anchor:'100%',width:'90%',padding:'0 0 5 0'},{xtype:'button',text:this.L('Submit'),itemId:'submitComment',scale:'medium',cls:'buttonCss',margin:'0 20 0 10',listeners:{click:function(b){var b=this.up().up();var c={data:b.activeTab.down('#newComment').value,parentId:b.issue.data.id,userId:b.issue.data.userId};b.getController().addComment(b.crudManager,c).then(function(f){var c=b.up().crudManager.activeUser;var e=[{layout:{type:'fit'},width:'100%',bodyPadding:5,items:[{xtype:'commentDetailView',value:{cd:Ext.Date.format(new Date(),'d-m-Y'),un:c.name,ui:c.id,t:b.activeTab.down('#newComment').value,ci:f.recordId,sc:[]},crudManager:b.up().crudManager}]}];b.activeTab.insert(3,e);b.activeTab.data.unshift({cd:new Date(),un:c.name,t:b.activeTab.down('#newComment').value,sc:[]});b.activeTab.down('#newComment').setValue(null);var d=a.get('issueData.issueComments');d.unshift({cd:new Date(),un:c.name,t:b.activeTab.down('#newComment').value,sc:[]});a.set('issueData.issueComments',d)})}}}],listeners:{afterrender:function(a){a.up('issueTabsView').loadDataToTab(a)}}},{title:this.L('Log'),tabValue:'Log',height:265,scroll:'vertical',autoScroll:!0,type:'historyView',elementCss:'logRow',dataName:'issueData.issueHistory',listeners:{afterrender:function(a){a.up('issueTabsView').loadDataToTab(a)}}}]});Ext.tab.Panel.prototype.initComponent.apply(this,arguments)},getUserImg:function(b,a){Ext.each(Ext.data.StoreManager.lookup('usersStore').data.items,function(c){if(c.id==b){a.setSrc(c.data.url)}})},loadDataToTab:function(a){var f=this.getViewModel();var c=[];var b,d,e;b=f.data.issueData.id;d=document.URL.split('?');e=Ext.urlDecode(d[d.length-1]);a.up('issueTabsView').body.mask('Loading...');Ext.each(f.get(a.config.dataName),function(b){c.push(b)});a.up('issueTabsView').body.mask('Loading...');switch(a.itemId){case 'RelatedFilesTab':this.getController().getIssueFilesRelated(e.projectId,b,a.up('issueTabsView').crudManager).then(function(c){for(i=0;i<c.files.length;i++){for(var d in c.fileSourceMap){if(c.fileSourceMap.hasOwnProperty(d)){if(d==c.files[i].parentId){c.files[i].source=c.fileSourceMap[d]}}}}a.add({data:c,xtype:'relatedFilesView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl})});break;case 'FilesTab':this.getController().getIssueFiles(e.projectId,b,a.up('issueTabsView').crudManager).then(function(c){a.add({data:c,xtype:'filesView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl});a.up('issueTabsView').body.unmask()});break;case 'remindersTab':Ext.each(c,function(b){Ext.each(Ext.data.StoreManager.lookup('usersStore').data.items,function(c){if(c.id===b.ri){b.userImage=c.data.url}})});a.add({data:c,xtype:'remindersTabView',crudManager:a.up('issueTabsView').crudManager,issueId:b,userStore:f.get('issueData').stores.userStore.data.items,rtl:a.up('issueTabsView').rtl});break;case 'SimilarTab':a.add({data:c,xtype:'similarTabView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl});break;case 'EventsTab':Ext.each(c,function(b){Ext.each(Ext.data.StoreManager.lookup('usersStore').data.items,function(c){if(c.id===b.oi){b.userImage=c.data.url}})});a.add({data:c,xtype:'eventsTabView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl});break;case 'HistoryTab':a.add({data:c,xtype:'historyTabView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl});break;case 'subTasksTab':a.add({data:c,xtype:'subTasksTabView',crudManager:a.up('issueTabsView').crudManager,issueId:b,rtl:a.up('issueTabsView').rtl});break;default:}a.up('issueTabsView').body.unmask()}},0,['issueTabsView'],['component','box','container','panel','tabpanel','issueTabsView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tabpanel':!0,'issueTabsView':!0},['widget.issueTabsView'],[[issuesEditor.mixin.Localizable.prototype.mixinId||issuesEditor.mixin.Localizable.$className,issuesEditor.mixin.Localizable]],[issuesEditor.view,'issueTabsView'],0);Ext.cmd.derive('issuesEditor.view.subIssueController',Ext.app.ViewController,{getIssue:function(b,a){var a=a;var c=b.externalConfig.projectId;return b.getIssue(a,c).then(function(c){return c})}},0,0,0,0,['controller.subIssueController'],0,[issuesEditor.view,'subIssueController'],0);Ext.cmd.derive('issuesEditor.view.subIssueView',Ext.panel.Panel,{controller:'subIssueController',initComponent:function(){var a=this;Ext.apply(a,{bodyPadding:10,layout:{type:'column'},items:[{xtype:'image',itemId:'responsibleImg',width:'7%',height:'20%',cls:'imageField',src:a.value.resPhoto,listeners:{afterrender:function(b){if(a.value.resPhoto==null){this.up('issueTabsView').getUserImg(a.value.resui,this)}}}},{xtype:'textfield',width:'20%',cls:'fieldForm',value:a.value.res,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',cls:'fieldForm',value:a.value.n,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',value:a.value.dds,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',cls:'fieldForm',value:a.value.s,fieldCls:'readonlyField',readOnly:!0},{xtype:'tbspacer',width:'3%',height:1},{xtype:'textfield',width:'15%',cls:'fieldForm',value:a.value.t,fieldCls:'readonlyField',readOnly:!0},{xtype:'textfield',value:a.value.i,hidden:!0}]});Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},modifiyFieldsToFitModel:function(a){var b={data:{id:a.i,AssetId:a.ass,SpotId:a.spo,ConstructId:a.con,name:a.n,issueDueDate:a.dd!=null?new Date(a.dd):null,issueDueDateString:a.dds,issueRequestedDueDate:a.rdd!=null?new Date(a.rdd):null,subject:a.su,status:a.s,accountable:a.ac,accountableId:a.aci,accountableUserId:a.acui,responsible:a.res,responsibleId:a.resi,responsibleUserId:a.resui,description:a.de,progress:a.pro,issueComments:a.c,issueHistory:a.h,issueEvents:a.ke,issueSubTasks:a.st,meetingSubject:a.ms,issueType:a.it,issueTypeId:a.iti,tag:a.t,richDescription:a.rd,userId:a.kui,stores:this.stores,relatedIssue:a.ris,similarIssues:a.si,meetingSubjectIssues:a.msil,tasks:a.st,sequence:a.sq,events:a.ke,administrative:a.ad,irrelevant:a.ir,kind:a.ki,issueTypeType:a.itt}};return b},openDetailsWindow:function(a){var b=new Ext.Window({itemId:'issueEditorWindow',cls:'issueEditorWindow',width:700,height:700,resizable:!1,header:!1,modal:!0,items:[Ext.create('issuesEditor.view.IssueEditorView',{clientInstance:window.client,recordId:a.id,issue:a,currentLocal:this.crudManager.externalConfig.currentLocal,openFromSubIssue:!0})]});b.show()},listeners:{dblclick:{fn:function(){var a=this;var c=a.component.value.i;var b=Ext.ComponentQuery.query('issuesGrid')[0].store.getById(c);if(b==null){a.component.controller.getIssue(a.component.up('issueTabsView').crudManager,c).then(function(d){b=d.kanbanStore.taskStore[0];var c=a.component.modifiyFieldsToFitModel(b);a.component.openDetailsWindow(c)})}else {a.component.openDetailsWindow(b)}},element:'el'}}},0,['subIssueView'],['component','box','container','panel','subIssueView'],{'component':!0,'box':!0,'container':!0,'panel':!0,'subIssueView':!0},['widget.subIssueView'],0,[issuesEditor.view,'subIssueView'],0);Ext.cmd.derive('issuesPkgs.model.Issue',Ext.data.Model,{fields:[{name:'name',type:'string'},{name:'description',type:'string'},{name:'subject',type:'auto'},{name:'issueDueDate',type:'date'},{name:'accountable',reference:'issuesPkgs.model.User'},{name:'accountableId',reference:'string'},{name:'responsible',reference:'issuesPkgs.model.User'},{name:'responsibleId',type:'string'},{name:'progress',type:'string'},{name:'AssetId',type:'string'},{name:'SpotId',type:'string'},{name:'ConstructId',type:'string'},{name:'administrative',type:'boolean'},{name:'kind',type:'string'},{name:'issueTypeType',type:'auto'}]},0,0,0,0,0,0,[issuesPkgs.model,'Issue'],0);Ext.cmd.derive('issuesPkgs.model.User',Ext.data.Model,{fields:[{name:'name',type:'string'},{name:'url',type:'string'}]},0,0,0,0,0,0,[issuesPkgs.model,'User'],0);Ext.cmd.derive('issuesPkgs.store.CrudManager',Ext.Base,{externalConfig:null,setExternalConfig:function(a){var b=this;b.externalConfig=a},makeRequest:function(d,c){var b=this;var c=c||!1;if(!b.externalConfig){throw 'You need to setExternalConfig first!'}d.projectId=b.externalConfig.projectId;var a=new Ext.Deferred();if(!c){b.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(b){a.resolve(b)},function(b){a.reject(b)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}else {b.externalConfig.client.apexrest('/CC_REID/RemoteAction',function(b){a.resolve(b)},function(b){a.reject(b)},'POST',JSON.stringify({'requestJSON':JSON.stringify(d)}))}return a.promise},submitIssue:function(b,c,f,e){var d=this;var a={className:'KanbanManagementRequest',actionName:'submitIssue',action:b,issue:c,parentIssue:null,meetingId:e};return d.makeRequest(a)},sendReminderToServer:function(c,b,a){var e=this;var d={className:'KanbanManagementRequest',actionName:'setReminder',taskId:c,recipientId:b,recipientRole:a.substr(0,a.length-2)};return e.makeRequest(d)},addAttendant:function(b,a){var d=this;var c={className:'MeetingRequest',actionName:'addAttendant',meetingId:b,contactId:a};return d.makeRequest(c)},getAutoCompleteAttendees:function(a,c){var d=this;var b={className:'MeetingRequest',actionName:'getContacts',meetingId:a,freeText:c};return d.makeRequest(b)},sendRemoveAttendant:function(a){var c=this;var b={className:'MeetingRequest',actionName:'removeAttendant',attendantId:a};return c.makeRequest(b)},getMeetingAttendants:function(a){var c=this;var b={className:'MeetingRequest',actionName:'getMeetingAttendants',meetingId:a};return c.makeRequest(b)},syncMeetingDescription:function(b){var a=this;var c={className:'MeetingRequest',actionName:'setMeetingDescription',freeText:b,meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(c)},getIssueTypesByMeetingResponse:function(a){var c=this;var b={className:'KanbanManagementRequest',actionName:'getIssueTypesByMeeting',meetingTypeId:a};return c.makeRequest(b)},sendSignMeeting:function(){var a=this;var b={className:'MeetingRequest',actionName:'signMeeting',meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},getPdf:function(){var a=this;var b={className:'MeetingRequest',actionName:'createProtoclDocument',meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},getWorkersStore:function(){var a=this;var b={className:'MeetingRequest',actionName:'getWorkersStore',meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},sendSummeryEmail:function(c){var a=this;var b={className:'MeetingRequest',actionName:'sendEmail',email:c,meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},connectToMeeting:function(b){var a=this;var c={className:'MeetingRequest',actionName:'connectToMeeting',issueIds:b,meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(c)},inviteInvitees:function(){var a=this;var b={className:'MeetingRequest',actionName:'inviteInvitees',meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},getMeetingFileDownloadUrl:function(){var a=this;var b={className:'MeetingRequest',actionName:'getMeetingFileDownloadUrl',meetingId:a.externalConfig.filterByRecord.data.Id};return a.makeRequest(b)},setIssueIrrelevant:function(a){var c=this;var b={className:'KanbanManagementRequest',actionName:'setIssueIrrelevant',issueId:a};return c.makeRequest(b)},setIssueEnded:function(a,b){var d=this;var c={className:'KanbanManagementRequest',actionName:'setIssueEnded',issueId:b,meetingId:a};return d.makeRequest(c)},setIssueNotRelated:function(a,b){var d=this;var c={className:'KanbanManagementRequest',actionName:'setIssueNotRelated',issueId:b,meetingId:a};return d.makeRequest(c)},fetchFromServer:function(a,g){var f=g?!0:!1;var i=this;var c,b,d,e;if(a.mode=='byStage'){c=a.id;b=null;d=a.areaId}else {if(a.mode=='byMeeting'){b=a.id;c=null}else {if(a.mode=='byProject'){b=null;c=null;d=a.areaId;e=a.stageTypeId}}}var h={className:'KanbanManagementRequest',meetingId:b,actionName:'getStore',projectId:null,stageId:c,stageTypeId:e,areaId:d,groupingType:'STATUS',mode:'ISSUES',pageName:null,includeHistory:!0,includeComments:!0,includeIrrelevant:f,pageSize:100,offset:null,initPage:null};return i.makeRequest(h)}},0,0,0,0,0,0,[issuesPkgs.store,'CrudManager'],0);Ext.cmd.derive('issuesPkgs.store.usersStore',Ext.data.Store,{model:'issuesPkgs.model.User',proxy:{type:'memory',reader:{type:'json'}},lazyFill:!0,autoLoad:!1,storeId:'usersStore'},0,0,0,0,0,0,[issuesPkgs.store,'usersStore'],0);Ext.cmd.derive('issuesPkgs.store.viewIssuesStore',Ext.data.Store,{model:'issuesPkgs.model.Issue',storeId:'viewIssuesStore',crudStore:null,proxy:{type:'memory',reader:{type:'json'}},constructor:function(){this.crudStore=Ext.data.StoreManager.lookup('crudGridStore');Ext.data.Store.prototype.constructor.call(this)},lazyFill:!0,autoLoad:!1,listeners:{update:function(c,b,a){Ext.ComponentQuery.query('issuesGrid')[0].view.refresh()}},getDirtyRecords:function(){var c=this;var b=c.getRange();var a=[];b.forEach(function(b){if(b.dirty){a.push(b)}});return a}},1,0,0,0,0,0,[issuesPkgs.store,'viewIssuesStore'],0);(function(){var a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function utf8Encode(c){c=c.replace(/\r\n/g,'\n');var b='';for(var d=0;d<c.length;d++){var a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a)}else {if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else {b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}}return b}Ext.cmd.derive('issuesPkgs.ux.exporter.Base64',Ext.Base,{statics:{encode:function(b){var g='';var h,c,d,j,k,i,e;var f=0;b=utf8Encode(b);while(f<b.length){h=b.charCodeAt(f++);c=b.charCodeAt(f++);d=b.charCodeAt(f++);j=h>>2;k=(h&3)<<4|c>>4;i=(c&15)<<2|d>>6;e=d&63;if(isNaN(c)){i=e=64}else {if(isNaN(d)){e=64}}g=g+a.charAt(j)+a.charAt(k)+a.charAt(i)+a.charAt(e)}return g}}},0,0,0,0,0,0,[issuesPkgs.ux.exporter,'Base64'],0)})();Ext.cmd.derive('issuesPkgs.ux.exporter.Button',Ext.Component,{html:'<p></p>',config:{swfPath:'/flash/downloadify.swf',downloadImage:'/images/ext_reports/download.png',width:62,height:22,downloadName:'download'},constructor:function(b){b=b||{};issuesPkgs.ux.exporter.Button.superclass.constructor.call(this,b);var a=this;this.on('afterrender',function(){a.setComponent(a.store||a.component||a.up('gridpanel')||a.up('treepanel'),b)})},setComponent:function(a,b){this.component=a;this.store=!a.is?a:a.getStore();this.setDownloadify(b)},setDownloadify:function(a){}},1,['exporterbutton'],['component','box','exporterbutton'],{'component':!0,'box':!0,'exporterbutton':!0},['widget.exporterbutton'],0,[issuesPkgs.ux.exporter,'Button'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.Exporter',Ext.Base,{statics:{exportAny:function(b,c,d){var a='export';if(!b.is){a=a+'Store'}else {if(b.is('gridpanel')){a=a+'Grid'}else {if(b.is('treepanel')){a=a+'Tree'}else {a=a+'Store';b=b.getStore()}}}return this[a](b,this.getFormatterByName(c),d)},exportGrid:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=Ext.Array.filter(c.columns,function(d){return !d.hidden});Ext.applyIf(a,{title:c.title,columns:d});return b.format(c.store,a)},exportStore:function(b,c,a){a=a||{};c=this.getFormatterByName(c);Ext.applyIf(a,{columns:b.fields?b.fields.items:b.model.prototype.fields.items});return c.format(b,a)},exportTree:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=c.store||a.store;Ext.applyIf(a,{title:c.title});return b.format(d,a)},getFormatterByName:function(a){a=a?a:'excel';a=!Ext.isString(a)?a:Ext.create('issuesPkgs.ux.exporter.'+a+'Formatter.'+Ext.String.capitalize(a)+'Formatter');return a}}},0,0,0,0,0,0,[issuesPkgs.ux.exporter,'Exporter'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.Formatter',Ext.Base,{format:Ext.emptyFn,constructor:function(a){a=a||{};Ext.applyIf(a,{})}},1,0,0,0,0,0,[issuesPkgs.ux.exporter,'Formatter'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.csvFormatter.CsvFormatter',issuesPkgs.ux.exporter.Formatter,{contentType:'data:text/csv;base64,',separator:',',extension:'csv',format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);return this.getHeaders()+'\n'+this.getRows(a)},getHeaders:function(b){var a=[],c;Ext.each(this.columns,function(d){var c;if(d.text=='#'){c='ID'}else {if(d.text!=undefined){c=d.text}else {if(d.name){c=d.name.replace(/_/g,' ');c=Ext.String.capitalize(c)}}}a.push(c)},this);return a.join(this.separator)},getRows:function(b){var a=[];var c=this;b.each(function(c,d){a.push(this.getCell(c,d))},this);return a.join('\n')},getCell:function(a){var b=[];Ext.each(this.columns,function(e){var c=e.name||e.dataIndex;if(c){var d='';if(c=='PercentDone'){d=a.get(c)!=NaN?parseFloat(a.get(c))/100:''}else {if(c!='Name'&&Ext.isFunction(e.renderer)){d=e.renderer(a.get(c),{},a,null,null,null,{rootVisible:!1})}else {d=a.get(c)}}if(!d){d=''}b.push('"'+String(d).replace('"/g','\\"')+'"')}});return b.join(this.separator)}},0,0,0,0,0,0,[issuesPkgs.ux.exporter.csvFormatter,'CsvFormatter'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.excelFormatter.Cell',Ext.Base,{constructor:function(a){Ext.applyIf(a,{type:'String'});Ext.apply(this,a);issuesPkgs.ux.exporter.excelFormatter.Cell.superclass.constructor.apply(this,arguments)},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<ss:Cell ss:StyleID="{style}">','<ss:Data ss:Type="{type}"><![CDATA[{value}]]></ss:Data>','</ss:Cell>')},1,0,0,0,0,0,[issuesPkgs.ux.exporter.excelFormatter,'Cell'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.excelFormatter.ExcelFormatter',issuesPkgs.ux.exporter.Formatter,{contentType:'data:application/vnd.ms-excel;base64,',extension:'xls',format:function(c,b){var a=new issuesPkgs.ux.exporter.excelFormatter.Workbook(b);a.addWorksheet(c,b||{});return a.render()}},0,0,0,0,0,0,[issuesPkgs.ux.exporter.excelFormatter,'ExcelFormatter'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.excelFormatter.Style',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{parentStyle:'',attributes:[]});issuesPkgs.ux.exporter.excelFormatter.Style.superclass.constructor.apply(this,arguments);if(this.id==undefined){throw new Error('An ID must be provided to Style')}this.preparePropertyStrings()},preparePropertyStrings:function(){Ext.each(this.attributes,function(b,a){this.attributes[a].propertiesString=this.buildPropertyString(b);this.attributes[a].children=b.children||[];Ext.each(b.children,function(d,c){this.attributes[a].children[c].propertiesString=this.buildPropertyString(d)},this)},this)},buildPropertyString:function(b){var a='';Ext.each(b.properties||[],function(c){a+=Ext.String.format('ss:{0}="{1}" ',c.name,c.value)},this);return a},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<tpl if="parentStyle.length == 0">','<ss:Style ss:ID="{id}">','</tpl>','<tpl if="parentStyle.length != 0">','<ss:Style ss:ID="{id}" ss:Parent="{parentStyle}">','</tpl>','<tpl for="attributes">','<tpl if="children.length == 0">','<ss:{name} {propertiesString} />','</tpl>','<tpl if="children.length > 0">','<ss:{name} {propertiesString}>','<tpl for="children">','<ss:{name} {propertiesString} />','</tpl>','</ss:{name}>','</tpl>','</tpl>','</ss:Style>')},1,0,0,0,0,0,[issuesPkgs.ux.exporter.excelFormatter,'Style'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.excelFormatter.Workbook',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{title:'Workbook',worksheets:[],compiledWorksheets:[],cellBorderColor:'#e4e4e4',styles:[],compiledStyles:[],hasDefaultStyle:!0,hasStripeStyles:!0,windowHeight:9000,windowWidth:50000,protectStructure:!1,protectWindows:!1});if(this.hasDefaultStyle){this.addDefaultStyle()}if(this.hasStripeStyles){this.addStripedStyles()}this.addTitleStyle();this.addHeaderStyle()},render:function(){this.compileStyles();this.joinedCompiledStyles=this.compiledStyles.join('');this.compileWorksheets();this.joinedWorksheets=this.compiledWorksheets.join('');return this.tpl.apply(this)},addWorksheet:function(c,b){var a=new issuesPkgs.ux.exporter.excelFormatter.Worksheet(c,b);this.worksheets.push(a);return a},addStyle:function(b){var a=new issuesPkgs.ux.exporter.excelFormatter.Style(b||{});this.styles.push(a);return a},compileStyles:function(){this.compiledStyles=[];Ext.each(this.styles,function(a){this.compiledStyles.push(a.render())},this);return this.compiledStyles},compileWorksheets:function(){this.compiledWorksheets=[];Ext.each(this.worksheets,function(a){this.compiledWorksheets.push(a.render())},this);return this.compiledWorksheets},tpl:new Ext.XTemplate('<?xml version="1.0" encoding="utf-8"?>','<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:o="urn:schemas-microsoft-com:office:office">','<o:DocumentProperties>','<o:Title>{title}</o:Title>','</o:DocumentProperties>','<ss:ExcelWorkbook>','<ss:WindowHeight>{windowHeight}</ss:WindowHeight>','<ss:WindowWidth>{windowWidth}</ss:WindowWidth>','<ss:ProtectStructure>{protectStructure}</ss:ProtectStructure>','<ss:ProtectWindows>{protectWindows}</ss:ProtectWindows>','</ss:ExcelWorkbook>','<ss:Styles>','{joinedCompiledStyles}','</ss:Styles>','{joinedWorksheets}','</ss:Workbook>'),addDefaultStyle:function(){var a=[{name:'Color',value:this.cellBorderColor},{name:'Weight',value:'1'},{name:'LineStyle',value:'Continuous'}];this.addStyle({id:'Default',attributes:[{name:'Alignment',properties:[{name:'Vertical',value:'Top'},{name:'WrapText',value:'1'}]},{name:'Font',properties:[{name:'FontName',value:'arial'},{name:'Size',value:'10'}]},{name:'Interior'},{name:'NumberFormat'},{name:'Protection'},{name:'Borders',children:[{name:'Border',properties:[{name:'Position',value:'Top'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Bottom'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Left'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Right'}].concat(a)}]}]})},addTitleStyle:function(){this.addStyle({id:'title',attributes:[{name:'Borders'},{name:'Font'},{name:'NumberFormat',properties:[{name:'Format',value:'@'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'},{name:'Vertical',value:'Center'}]}]})},addHeaderStyle:function(){this.addStyle({id:'headercell',attributes:[{name:'Font',properties:[{name:'Bold',value:'1'},{name:'Size',value:'10'}]},{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#A3C9F1'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'}]}]})},addStripedStyles:function(){this.addStyle({id:'even',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCFFFF'}]}]});this.addStyle({id:'odd',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCCCFF'}]}]});Ext.each(['even','odd'],function(a){this.addChildNumberFormatStyle(a,a+'date','[ENG][$-409]dd-mmm-yyyy;@');this.addChildNumberFormatStyle(a,a+'int','0');this.addChildNumberFormatStyle(a,a+'float','0.00')},this)},addChildNumberFormatStyle:function(c,b,a){this.addStyle({id:b,parentStyle:'even',attributes:[{name:'NumberFormat',properties:[{name:'Format',value:a}]}]})}},1,0,0,0,0,0,[issuesPkgs.ux.exporter.excelFormatter,'Workbook'],0);Ext.cmd.derive('issuesPkgs.ux.exporter.excelFormatter.Worksheet',Ext.Base,{constructor:function(b,a){a=a||{};this.store=b;Ext.applyIf(a,{hasTitle:!0,hasHeadings:!0,stripeRows:!0,title:'Workbook',columns:b.fields==undefined?{}:b.fields.items});Ext.apply(this,a);issuesPkgs.ux.exporter.excelFormatter.Worksheet.superclass.constructor.apply(this,arguments)},dateFormatString:'Y-m-d',worksheetTpl:new Ext.XTemplate('<ss:Worksheet ss:Name="{title}">','<ss:Names>','<ss:NamedRange ss:Name="Print_Titles" ss:RefersTo="=\'{title}\'!R1:R2" />','</ss:Names>','<ss:Table x:FullRows="1" x:FullColumns="1" ss:ExpandedColumnCount="{colCount}" ss:ExpandedRowCount="{rowCount}">','{columns}','<ss:Row ss:Height="38">','<ss:Cell ss:StyleID="title" ss:MergeAcross="{colCount - 1}">','<ss:Data xmlns:html="http://www.w3.org/TR/REC-html40" ss:Type="String">','<html:B><html:U><html:Font html:Size="15">{title}','</html:Font></html:U></html:B></ss:Data><ss:NamedCell ss:Name="Print_Titles" />','</ss:Cell>','</ss:Row>','<ss:Row ss:AutoFitHeight="1">','{header}','</ss:Row>','{rows}','</ss:Table>','<x:WorksheetOptions>','<x:PageSetup>','<x:Layout x:CenterHorizontal="1" x:Orientation="Landscape" />','<x:Footer x:Data="Page &amp;P of &amp;N" x:Margin="0.5" />','<x:PageMargins x:Top="0.5" x:Right="0.5" x:Left="0.5" x:Bottom="0.8" />','</x:PageSetup>','<x:FitToPage />','<x:Print>','<x:PrintErrors>Blank</x:PrintErrors>','<x:FitWidth>1</x:FitWidth>','<x:FitHeight>32767</x:FitHeight>','<x:ValidPrinterInfo />','<x:VerticalResolution>600</x:VerticalResolution>','</x:Print>','<x:Selected />','<x:DoNotDisplayGridlines />','<x:ProtectObjects>False</x:ProtectObjects>','<x:ProtectScenarios>False</x:ProtectScenarios>','</x:WorksheetOptions>','</ss:Worksheet>'),render:function(a){return this.worksheetTpl.apply({header:this.buildHeader(),columns:this.buildColumns().join(''),rows:this.buildRows().join(''),colCount:this.columns.length,rowCount:this.store.getCount()+2,title:this.title})},buildColumns:function(){var a=[];Ext.each(this.columns,function(b){a.push(this.buildColumn())},this);return a},buildColumn:function(a){return Ext.String.format('<ss:Column ss:AutoFitWidth="1" ss:Width="{0}" />',a||164)},buildRows:function(){var a=[];this.store.each(function(b,c){a.push(this.buildRow(b,c))},this);return a},buildHeader:function(){var a=[];Ext.each(this.columns,function(c){var b;if(c.text!=undefined){b=c.text}else {if(c.name){b=c.name.replace(/_/g,' ');b=Ext.String.capitalize(b)}}a.push(Ext.String.format('<ss:Cell ss:StyleID="headercell"><ss:Data ss:Type="String">{0}</ss:Data><ss:NamedCell ss:Name="Print_Titles" /></ss:Cell>',b))},this);return a.join('')},buildRow:function(a,d){var c,b=[];if(this.stripeRows===!0){c=d%2==0?'even':'odd'}Ext.each(this.columns,function(e){var f=e.name||e.dataIndex;if(f){if(Ext.isFunction(e.renderer)){var g=e.renderer(a.get(f),null,a),h='String'}else {var g=a.get(f),h=this.typeMappings[e.type||a.getField(f).type]}b.push(this.buildCell(g,h,c).render())}},this);return Ext.String.format('<ss:Row>{0}</ss:Row>',b.join(''))},buildCell:function(a,b,c){if(a!=null&&b=='DateTime'&&Ext.isFunction(a.format)){a=a.format(this.dateFormatString)}return new issuesPkgs.ux.exporter.excelFormatter.Cell({value:a,type:b,style:c})},typeMappings:{'int':'Number','string':'String','float':'Number','date':'DateTime'}},1,0,0,0,0,0,[issuesPkgs.ux.exporter.excelFormatter,'Worksheet'],0);Ext.cmd.derive('issuesPkgs.view.AttendeesGrid',Ext.grid.Panel,{layout:{type:'fit',align:'stretch',pack:'start'},viewConfig:{forceFit:!0,stripeRows:!1},scrollable:!0,bodyCls:'AttendeesGrid',columnLines:!0,autoSizeColumn:!0,initComponent:function(){var a=this;Ext.apply(a,{columns:[{text:this.L('Name'),dataIndex:'n',width:55,flex:3},{text:this.L('Email'),dataIndex:'e',width:45,hidden:!0,flex:2},{text:this.L('Role'),dataIndex:'r',width:45,hidden:!0,flex:2},{text:this.L('Status'),dataIndex:'s',width:45,flex:2,renderer:function(b,c,a,g,f,h,d){if(b!='Invited'){var e=Ext.isEmpty(a.data.re)==!0?d.up('AttendeesGrid').L('NoReason'):a.data.re;c.tdAttr='data-qtip="'+e+'"'}return b}},{xtype:'widgetcolumn',flex:1,width:33,text:'',hideable:!1,align:'center',widget:{xtype:'button',scale:'small',width:33,iconCls:'fa fa-times-circle deleteAttendantButton',style:'background-color: white !important; border-color: white !important;',listeners:{click:'onRemoveAttendant'}}}]});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(a,c){a.body.mask(a.L('Loading'));var b=a.up('issuesComponent');b.crudManager.getMeetingAttendants(b.filterByRecord.data.Id).then(function(b){var e=Ext.create('Ext.data.Store',{fields:[{name:'n',type:'string'},{name:'e',type:'string'},{name:'s',type:'string'},{name:'r',type:'string'},{name:'re',type:'string'}]});var d=[];if(b.attendees&&b.attendees.length>0){b.attendees.forEach(function(e){if(!e.s){e.s=a.L('Invited')}d.push({n:e.n,e:e.e,s:e.s,r:e.r,re:e.re,Id:e.i})})}e.loadData(d);a.setStore(e);a.body.unmask();a.columns[0].autoSize();a.columns[1].autoSize()})}}},0,['AttendeesGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','AttendeesGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'AttendeesGrid':!0},['widget.AttendeesGrid'],[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.view,'AttendeesGrid'],0);Ext.cmd.derive('issuesPkgs.window.NewAttendant',Ext.Window,{layout:'fit',alwaysOnTop:!0,closeAction:'hide',modal:!0,resizable:!1,width:400,height:300,cls:'extjsWizardWrapper',initComponent:function(){var a=this;Ext.apply(a,{emptyStoreData:[{field:a.L('FullName'),value:''},{field:a.L('Email'),value:''},{field:a.L('Role'),value:''}]});Ext.apply(a,{title:a.L('NewAttendant'),comboStore:Ext.create('Ext.data.Store',{fields:[{name:'text',type:'string'},{name:'id',type:'string'}]}),contactInfoStore:Ext.create('Ext.data.Store',{fields:[{name:'i',type:'string'},{name:'n',type:'string'},{name:'e',type:'string'},{name:'r',type:'string'}]}),buttons:[{text:a.L('Cancel'),cls:'closeButton',scope:this,handler:function(a){a.up('window').close()}},{text:a.L('Save'),cls:'submitButton',itemId:'saveButton',scope:this,disabled:!0,handler:function(d){var c=d.up('window');c.body.mask(a.L('Loading'));var b=c.contactInfoStore.query('i',c.down('combo').getValue()).getAt(0);c.crudManager.addAttendant(c.meeting.data.Id,b.data.i).then(function(f){var e=Ext.ComponentQuery.query('AttendeesGrid')[0];if(!b.data.s){b.data.s='Invited'}e.getStore().add({n:b.data.n,e:b.data.e,r:b.data.r,s:b.data.s,Id:f.recordId});e.columns[0].autoSize();c.body.unmask();c.resetFields();Ext.toast(a.L('AddedSuccessfully'))})}}],items:[{xtype:'panel',items:[{xtype:'panel',layout:{type:'hbox',align:'begin'},items:[{flex:1},{padding:10,margin:10,flex:5,xtype:'combobox',hideTrigger:!0,fieldLabel:a.L('Contact'),store:a.comboStore,queryMode:'local',valueField:'id',forceSelection:!0,enableKeyEvents:!0,listeners:{change:function(e,d,f,g){if(!Ext.isEmpty(d)){var c=e.up('window');var b=c.contactInfoStore.query('i',d).getAt(0);c.down('grid').getStore().loadData([{field:a.L('FullName'),value:b.data.n},{field:a.L('Email'),value:b.data.e},{field:a.L('Role'),value:b.data.r}]);c.down('[itemId=saveButton]').setDisabled(!1)}else {e.up('window').resetFields()}},keyup:function(b,e,d){if(Ext.isEmpty(b.getRawValue())){b.up('window').resetFields()}else {b.mask(a.L('Loading'));var c=b.up('window');c.crudManager.getAutoCompleteAttendees(c.meeting.data.Id,b.getRawValue()).then(function(a){c.comboStore.loadData(a.contacts);c.contactInfoStore.loadData(a.contactsInformation);var f=b.getRawValue();b.setStore(c.comboStore);b.unmask();b.expand();b.setRawValue(f)})}}}},{flex:1}]},{xtype:'fieldset',padding:'0 10 10 10',margin:'0 10 10 10',title:a.L('Details'),items:[{xtype:'grid',hideHeaders:!0,columns:[{dataIndex:'field',flex:1},{dataIndex:'value',flex:2}],store:Ext.create('Ext.data.Store',{fields:[{name:'field',type:'string'},{name:'value',type:'string'}],data:a.emptyStoreData})}]}]}]});Ext.window.Window.prototype.initComponent.apply(this,arguments)},resetFields:function(){var a=this;var b=a.down('combo');b.unmask();b.collapse();b.setRawValue();a.down('grid').getStore().loadData(a.emptyStoreData);a.down('[itemId=saveButton]').setDisabled(!0)}},0,0,['component','box','container','panel','window'],{'component':!0,'box':!0,'container':!0,'panel':!0,'window':!0},0,[[issuesPkgs.mixin.Localizable.prototype.mixinId||issuesPkgs.mixin.Localizable.$className,issuesPkgs.mixin.Localizable]],[issuesPkgs.window,'NewAttendant'],0);Ext.cmd.derive('genericGrid.model.Column',Ext.data.Model,{fields:[]},0,0,0,0,0,0,[genericGrid.model,'Column'],0);Ext.cmd.derive('genericGrid.store.ColumnsDefinitionStore',Ext.data.Store,{model:'genericGrid.model.Column',storeId:'ColumnsDefinitionStore',proxy:{type:'memory',reader:{type:'json'}}},0,0,0,0,0,0,[genericGrid.store,'ColumnsDefinitionStore'],0);Ext.cmd.derive('genericGrid.store.GridStore',Ext.data.Store,{storeId:'genericGridStore',pageSize:50,proxy:{type:'memory',enablePaging:!0,reader:{type:'json'}}},0,0,0,0,0,0,[genericGrid.store,'GridStore'],0);Ext.cmd.derive('genericGrid.view.GridViewModel',Ext.app.ViewModel,{data:{gridStoreDirty:!1}},0,0,0,0,['viewmodel.GridViewModel'],0,[genericGrid.view,'GridViewModel'],0);Ext.cmd.derive('genericGrid.view.GridController',Ext.app.ViewController,{control:{'[reference=addHandler]':{click:'addHandler'},'[reference=removeHandler]':{click:'removeHandler'},'[reference=editHandler]':{click:'editHandler'},'[reference=refreshHandler]':{click:'refreshHandler'}},addHandler:function(b){var c=this;var a=c.getView().getInitialConfig('dispatcher');if(a){a.trigger(b.dispatcherCallBack)}},removeHandler:function(e){var a=this;var c=a.getView().getInitialConfig('dispatcher');var d=a.getView().up();d.mask(this.getView().up('genericGridView').L('Loading'));if(c){var b=a.getView().getSelectionModel().getSelection();c.trigger(e.dispatcherCallBack,{data:b,callback:function(){d.unmask()}});a.getView().getStore().remove(b)}},editHandler:function(d){var b=this;var a=b.getView().getInitialConfig('dispatcher');if(a){var c=b.getView().getSelectionModel().getSelection();a.trigger(d.dispatcherCallBack,{data:c,callback:function(){}})}},refreshHandler:function(e){var c=this;var d=c.getView().getInitialConfig('dispatcher');var b=c.getView().up();b.mask(this.getView().up('genericGridView').L('Loading'));c.getView().getStore().removeAll();var a=b;b.getController().initiateLoading(b).then(function(g){var f=a.down('genericGridGrid');var c=f.down('pagingtoolbar');f.reconfigure(a.gridStore,g.columnsArray);if(b.rtl){var d=[];for(i=0;i<11;i++){d.push(c.items.getAt(0));c.items.removeAt(0)}c.insert(0,d.reverse())}c.bindStore(a.gridStore);c.doRefresh();c.query('#refresh')[0].setHidden(!0);a.tryReizeAccordingToParentDiv();a.unmask()})}},0,0,0,0,['controller.GridController'],[[genericGrid.mixin.Localizable.prototype.mixinId||genericGrid.mixin.Localizable.$className,genericGrid.mixin.Localizable]],[genericGrid.view,'GridController'],0);Ext.cmd.derive('genericGrid.view.Grid',Ext.grid.Panel,{controller:'GridController',reference:'genericGridGrid',viewModel:'GridViewModel',allowDeselect:!0,readOnly:!1,overrides:{},groupable:!1,initComponent:function(){var a=this;Ext.apply(a,{emptyText:a.L('EmptyStore'),border:1,style:{borderColor:'white',borderStyle:'solid'},columnLines:!0,bodyCls:'gridBodyCls',bbar:{xtype:'pagingtoolbar',store:this.store,cls:'gridPagingtoolbar',displayInfo:!0,items:[{xtype:'tbfill'},{xtype:'button',style:'font-size: 20px !important;',tooltip:a.L('Save'),iconCls:'fa fa-floppy-o icon-attention',bind:{disabled:'{!gridStoreDirty}'},hidden:a.readOnly,handler:function(a){a.up('genericGridGrid').handleSave(a)}},{xtype:'button',style:'font-size: 20px !important;',text:a.L('Close'),hidden:a.getInitialConfig('showCloseButton')==!1?!0:a.getInitialConfig('runAsDiv'),iconCls:'fa fa-times',handler:function(b){var c=b.up('genericGridView');var a=b.up('genericGridGrid');var e=a.getStore();var d=e.getUpdatedRecords();if(d.length>0){Ext.Msg.show({title:a.L('SaveChanges'),rtl:a.rtl,message:a.L('unSavedMessage'),buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){b.up('genericGridGrid').handleSave(b);a.handleClose(c)}else {if(d==='no'){a.handleClose(c)}else {}}}})}else {a.handleClose(c)}}}]}});if(a.getInitialConfig('enableFilters')){Ext.apply(a,{plugins:[{ptype:'gridfilters',menuFilterText:'filterText'}]})}if(a.getInitialConfig('rowSelectable')){Ext.apply(a,{selModel:{selType:'checkboxmodel',mode:'SINGLE',checkOnly:!0}})}if(a.getInitialConfig('actionButtons')&&a.getInitialConfig('actionButtons').length>0){var b=[];a.getInitialConfig('actionButtons').forEach(function(a){b.push({xtype:'button',cls:'actionButton',text:'<i class="'+a.icon+'"></i>',reference:a.type+'Handler',dispatcherCallBack:a.dispatcherCallBack,disabled:a.type=='remove'||a.type=='edit'?!0:!1,bind:{disabled:a.type=='remove'||a.type=='edit'?'{!genericGridGrid.selection}':!1}})});Ext.apply(a,{dockedItems:[{xtype:'toolbar',dock:'top',ui:'footer',defaults:{minWidth:10},items:b}]})}if(!a.getInitialConfig('readOnly')){Ext.apply(a,{plugins:{ptype:'cellediting',clicksToEdit:1,listeners:{validateedit:function(a,b,c){if(isNaN(a.activeRecord.getField(a.activeColumn.dataIndex).parse(b.value))){return !1}},edit:function(b,a,c){a.grid.viewModel.set('gridStoreDirty',!0)}}}})}if(a.getInitialConfig('groupable')){Ext.apply(a,{features:[{ftype:'grouping'}],viewConfig:{forceFit:!0,listeners:{groupexpand:function(e,d,c,b){a.doRefresh()},groupcollapse:function(e,d,c,b){a.doRefresh()}}}})}if(a.overrides!=null){Ext.apply(a,a.getInitialConfig('overrides'))}Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},doRefresh:function(){var a=this.down('pagingtoolbar');a.doRefresh()},handleSave:function(a){var e=a.up('genericGridView');var d=a.up('genericGridGrid');var h=d.getStore();var g=e.aaDataStore;var f=h.getUpdatedRecords();var b=[];f.forEach(function(e){var c=g.getById(e.id);var d=e.getChanges();for(prop in d){c.set(prop,Object.assign(c.get(prop),{value:d[prop]}))}c.changesMap=d;b.push(c);e.commit()});d.viewModel.set('gridStoreDirty',!1);e.crudManager.doUpdate(b);var c=a.up('genericGridView').dispatcher;if(c){c.trigger('extjs:QuickEditSaved')}},handleClose:function(b){var c=b.up('window');var a=b.dispatcher;if(a){a.trigger('extjs:QuickEditClose')}if(c){c.close()}}},0,['genericGridGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','genericGridGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'genericGridGrid':!0},['widget.genericGridGrid'],[[genericGrid.mixin.Localizable.prototype.mixinId||genericGrid.mixin.Localizable.$className,genericGrid.mixin.Localizable]],[genericGrid.view,'Grid'],0);(function(){var a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function utf8Encode(c){c=c.replace(/\r\n/g,'\n');var b='';for(var d=0;d<c.length;d++){var a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a)}else {if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else {b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}}return b}Ext.cmd.derive('velocityGrid.ux.exporter.Base64',Ext.Base,{statics:{encode:function(b){var g='';var h,c,d,j,k,i,e;var f=0;b=utf8Encode(b);while(f<b.length){h=b.charCodeAt(f++);c=b.charCodeAt(f++);d=b.charCodeAt(f++);j=h>>2;k=(h&3)<<4|c>>4;i=(c&15)<<2|d>>6;e=d&63;if(isNaN(c)){i=e=64}else {if(isNaN(d)){e=64}}g=g+a.charAt(j)+a.charAt(k)+a.charAt(i)+a.charAt(e)}return g}}},0,0,0,0,0,0,[velocityGrid.ux.exporter,'Base64'],0)})();Ext.cmd.derive('velocityGrid.ux.exporter.Button',Ext.Component,{html:'<p></p>',config:{swfPath:'/flash/downloadify.swf',downloadImage:'/images/ext_reports/download.png',width:62,height:22,downloadName:'download'},constructor:function(b){b=b||{};velocityGrid.ux.exporter.Button.superclass.constructor.call(this,b);var a=this;this.on('afterrender',function(){a.setComponent(a.store||a.component||a.up('gridpanel')||a.up('treepanel'),b)})},setComponent:function(a,b){this.component=a;this.store=!a.is?a:a.getStore();this.setDownloadify(b)},setDownloadify:function(a){}},1,['exporterbutton'],['component','box','exporterbutton'],{'component':!0,'box':!0,'exporterbutton':!0},['widget.exporterbutton'],0,[velocityGrid.ux.exporter,'Button'],0);Ext.cmd.derive('velocityGrid.ux.exporter.Exporter',Ext.Base,{statics:{exportAny:function(b,c,d){var a='export';if(!b.is){a=a+'Store'}else {if(b.is('gridpanel')){a=a+'Grid'}else {if(b.is('treepanel')){a=a+'Tree'}else {a=a+'Store';b=b.getStore()}}}return this[a](b,this.getFormatterByName(c),d)},exportGrid:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=Ext.Array.filter(c.columns,function(d){return !d.hidden});Ext.applyIf(a,{title:c.title,columns:d});return b.format(c.store,a)},exportStore:function(b,c,a){a=a||{};c=this.getFormatterByName(c);Ext.applyIf(a,{columns:b.fields?b.fields.items:b.model.prototype.fields.items});return c.format(b,a)},exportTree:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=c.store||a.store;Ext.applyIf(a,{title:c.title});return b.format(d,a)},getFormatterByName:function(a){a=a?a:'excel';a=!Ext.isString(a)?a:Ext.create('velocityGrid.ux.exporter.'+a+'Formatter.'+Ext.String.capitalize(a)+'Formatter');return a}}},0,0,0,0,0,0,[velocityGrid.ux.exporter,'Exporter'],0);Ext.cmd.derive('velocityGrid.ux.exporter.Formatter',Ext.Base,{format:Ext.emptyFn,constructor:function(a){a=a||{};Ext.applyIf(a,{})}},1,0,0,0,0,0,[velocityGrid.ux.exporter,'Formatter'],0);Ext.cmd.derive('velocityGrid.ux.exporter.csvFormatter.CsvFormatter',velocityGrid.ux.exporter.Formatter,{contentType:'data:text/csv;base64,',separator:',',extension:'csv',format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);return this.getHeaders()+'\n'+this.getRows(a)},getHeaders:function(b){var a=[],c;Ext.each(this.columns,function(d){var c;if(d.text!=undefined){if(Ext.String.startsWith(d.text,'<span')){c=d.exportHeader}else {c=d.text}}else {if(d.name){c=d.name.replace(/_/g,' ');c=Ext.String.capitalize(c)}}a.push(c)},this);return a.join(this.separator)},getRows:function(b){var a=[];var c=this;b.each(function(c,d){a.push(this.getCell(c,d))},this);return a.join('\n')},getCell:function(b){var a=[];Ext.each(this.columns,function(e){var d=e.name||e.dataIndex;if(d){var c='';c=b.get(d);if(!c||c=='.'){c=''}a.push('"'+String(c).replace('"/g','\\"')+'"')}});return a.join(this.separator)}},0,0,0,0,0,0,[velocityGrid.ux.exporter.csvFormatter,'CsvFormatter'],0);Ext.cmd.derive('velocityGrid.ux.exporter.excelFormatter.Cell',Ext.Base,{constructor:function(a){Ext.applyIf(a,{type:'String'});Ext.apply(this,a);velocityGrid.ux.exporter.excelFormatter.Cell.superclass.constructor.apply(this,arguments)},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<ss:Cell ss:StyleID="{style}">','<ss:Data ss:Type="{type}"><![CDATA[{value}]]></ss:Data>','</ss:Cell>')},1,0,0,0,0,0,[velocityGrid.ux.exporter.excelFormatter,'Cell'],0);Ext.cmd.derive('velocityGrid.ux.exporter.excelFormatter.ExcelFormatter',velocityGrid.ux.exporter.Formatter,{contentType:'data:application/vnd.ms-excel;base64,',extension:'xls',format:function(c,b){var a=new velocityGrid.ux.exporter.excelFormatter.Workbook(b);a.addWorksheet(c,b||{});return a.render()}},0,0,0,0,0,0,[velocityGrid.ux.exporter.excelFormatter,'ExcelFormatter'],0);Ext.cmd.derive('velocityGrid.ux.exporter.excelFormatter.Style',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{parentStyle:'',attributes:[]});velocityGrid.ux.exporter.excelFormatter.Style.superclass.constructor.apply(this,arguments);if(this.id==undefined){throw new Error('An ID must be provided to Style')}this.preparePropertyStrings()},preparePropertyStrings:function(){Ext.each(this.attributes,function(b,a){this.attributes[a].propertiesString=this.buildPropertyString(b);this.attributes[a].children=b.children||[];Ext.each(b.children,function(d,c){this.attributes[a].children[c].propertiesString=this.buildPropertyString(d)},this)},this)},buildPropertyString:function(b){var a='';Ext.each(b.properties||[],function(c){a+=Ext.String.format('ss:{0}="{1}" ',c.name,c.value)},this);return a},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<tpl if="parentStyle.length == 0">','<ss:Style ss:ID="{id}">','</tpl>','<tpl if="parentStyle.length != 0">','<ss:Style ss:ID="{id}" ss:Parent="{parentStyle}">','</tpl>','<tpl for="attributes">','<tpl if="children.length == 0">','<ss:{name} {propertiesString} />','</tpl>','<tpl if="children.length > 0">','<ss:{name} {propertiesString}>','<tpl for="children">','<ss:{name} {propertiesString} />','</tpl>','</ss:{name}>','</tpl>','</tpl>','</ss:Style>')},1,0,0,0,0,0,[velocityGrid.ux.exporter.excelFormatter,'Style'],0);Ext.cmd.derive('velocityGrid.ux.exporter.excelFormatter.Workbook',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{title:'Workbook',worksheets:[],compiledWorksheets:[],cellBorderColor:'#e4e4e4',styles:[],compiledStyles:[],hasDefaultStyle:!0,hasStripeStyles:!0,windowHeight:9000,windowWidth:50000,protectStructure:!1,protectWindows:!1});if(this.hasDefaultStyle){this.addDefaultStyle()}if(this.hasStripeStyles){this.addStripedStyles()}this.addTitleStyle();this.addHeaderStyle()},render:function(){this.compileStyles();this.joinedCompiledStyles=this.compiledStyles.join('');this.compileWorksheets();this.joinedWorksheets=this.compiledWorksheets.join('');return this.tpl.apply(this)},addWorksheet:function(c,b){var a=new velocityGrid.ux.exporter.excelFormatter.Worksheet(c,b);this.worksheets.push(a);return a},addStyle:function(b){var a=new velocityGrid.ux.exporter.excelFormatter.Style(b||{});this.styles.push(a);return a},compileStyles:function(){this.compiledStyles=[];Ext.each(this.styles,function(a){this.compiledStyles.push(a.render())},this);return this.compiledStyles},compileWorksheets:function(){this.compiledWorksheets=[];Ext.each(this.worksheets,function(a){this.compiledWorksheets.push(a.render())},this);return this.compiledWorksheets},tpl:new Ext.XTemplate('<?xml version="1.0" encoding="utf-8"?>','<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:o="urn:schemas-microsoft-com:office:office">','<o:DocumentProperties>','<o:Title>{title}</o:Title>','</o:DocumentProperties>','<ss:ExcelWorkbook>','<ss:WindowHeight>{windowHeight}</ss:WindowHeight>','<ss:WindowWidth>{windowWidth}</ss:WindowWidth>','<ss:ProtectStructure>{protectStructure}</ss:ProtectStructure>','<ss:ProtectWindows>{protectWindows}</ss:ProtectWindows>','</ss:ExcelWorkbook>','<ss:Styles>','{joinedCompiledStyles}','</ss:Styles>','{joinedWorksheets}','</ss:Workbook>'),addDefaultStyle:function(){var a=[{name:'Color',value:this.cellBorderColor},{name:'Weight',value:'1'},{name:'LineStyle',value:'Continuous'}];this.addStyle({id:'Default',attributes:[{name:'Alignment',properties:[{name:'Vertical',value:'Top'},{name:'WrapText',value:'1'}]},{name:'Font',properties:[{name:'FontName',value:'arial'},{name:'Size',value:'10'}]},{name:'Interior'},{name:'NumberFormat'},{name:'Protection'},{name:'Borders',children:[{name:'Border',properties:[{name:'Position',value:'Top'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Bottom'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Left'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Right'}].concat(a)}]}]})},addTitleStyle:function(){this.addStyle({id:'title',attributes:[{name:'Borders'},{name:'Font'},{name:'NumberFormat',properties:[{name:'Format',value:'@'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'},{name:'Vertical',value:'Center'}]}]})},addHeaderStyle:function(){this.addStyle({id:'headercell',attributes:[{name:'Font',properties:[{name:'Bold',value:'1'},{name:'Size',value:'10'}]},{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#A3C9F1'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'}]}]})},addStripedStyles:function(){this.addStyle({id:'even',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCFFFF'}]}]});this.addStyle({id:'odd',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCCCFF'}]}]});Ext.each(['even','odd'],function(a){this.addChildNumberFormatStyle(a,a+'date','[ENG][$-409]dd-mmm-yyyy;@');this.addChildNumberFormatStyle(a,a+'int','0');this.addChildNumberFormatStyle(a,a+'float','0.00')},this)},addChildNumberFormatStyle:function(c,b,a){this.addStyle({id:b,parentStyle:'even',attributes:[{name:'NumberFormat',properties:[{name:'Format',value:a}]}]})}},1,0,0,0,0,0,[velocityGrid.ux.exporter.excelFormatter,'Workbook'],0);Ext.cmd.derive('velocityGrid.ux.exporter.excelFormatter.Worksheet',Ext.Base,{constructor:function(b,a){a=a||{};this.store=b;Ext.applyIf(a,{hasTitle:!0,hasHeadings:!0,stripeRows:!0,title:'Workbook',columns:b.fields==undefined?{}:b.fields.items});Ext.apply(this,a);velocityGrid.ux.exporter.excelFormatter.Worksheet.superclass.constructor.apply(this,arguments)},dateFormatString:'Y-m-d',worksheetTpl:new Ext.XTemplate('<ss:Worksheet ss:Name="{title}">','<ss:Names>','<ss:NamedRange ss:Name="Print_Titles" ss:RefersTo="=\'{title}\'!R1:R2" />','</ss:Names>','<ss:Table x:FullRows="1" x:FullColumns="1" ss:ExpandedColumnCount="{colCount}" ss:ExpandedRowCount="{rowCount}">','{columns}','<ss:Row ss:Height="38">','<ss:Cell ss:StyleID="title" ss:MergeAcross="{colCount - 1}">','<ss:Data xmlns:html="http://www.w3.org/TR/REC-html40" ss:Type="String">','<html:B><html:U><html:Font html:Size="15">{title}','</html:Font></html:U></html:B></ss:Data><ss:NamedCell ss:Name="Print_Titles" />','</ss:Cell>','</ss:Row>','<ss:Row ss:AutoFitHeight="1">','{header}','</ss:Row>','{rows}','</ss:Table>','<x:WorksheetOptions>','<x:PageSetup>','<x:Layout x:CenterHorizontal="1" x:Orientation="Landscape" />','<x:Footer x:Data="Page &amp;P of &amp;N" x:Margin="0.5" />','<x:PageMargins x:Top="0.5" x:Right="0.5" x:Left="0.5" x:Bottom="0.8" />','</x:PageSetup>','<x:FitToPage />','<x:Print>','<x:PrintErrors>Blank</x:PrintErrors>','<x:FitWidth>1</x:FitWidth>','<x:FitHeight>32767</x:FitHeight>','<x:ValidPrinterInfo />','<x:VerticalResolution>600</x:VerticalResolution>','</x:Print>','<x:Selected />','<x:DoNotDisplayGridlines />','<x:ProtectObjects>False</x:ProtectObjects>','<x:ProtectScenarios>False</x:ProtectScenarios>','</x:WorksheetOptions>','</ss:Worksheet>'),render:function(a){return this.worksheetTpl.apply({header:this.buildHeader(),columns:this.buildColumns().join(''),rows:this.buildRows().join(''),colCount:this.columns.length,rowCount:this.store.getCount()+2,title:this.title})},buildColumns:function(){var a=[];Ext.each(this.columns,function(b){a.push(this.buildColumn())},this);return a},buildColumn:function(a){return Ext.String.format('<ss:Column ss:AutoFitWidth="1" ss:Width="{0}" />',a||164)},buildRows:function(){var a=[];this.store.each(function(b,c){a.push(this.buildRow(b,c))},this);return a},buildHeader:function(){var a=[];Ext.each(this.columns,function(c){var b;if(c.text!=undefined){b=c.text}else {if(c.name){b=c.name.replace(/_/g,' ');b=Ext.String.capitalize(b)}}a.push(Ext.String.format('<ss:Cell ss:StyleID="headercell"><ss:Data ss:Type="String">{0}</ss:Data><ss:NamedCell ss:Name="Print_Titles" /></ss:Cell>',b))},this);return a.join('')},buildRow:function(a,d){var c,b=[];if(this.stripeRows===!0){c=d%2==0?'even':'odd'}Ext.each(this.columns,function(e){var f=e.name||e.dataIndex;if(f){if(Ext.isFunction(e.renderer)){var g=e.renderer(a.get(f),null,a),h='String'}else {var g=a.get(f),h=this.typeMappings[e.type||a.getField(f).type]}b.push(this.buildCell(g,h,c).render())}},this);return Ext.String.format('<ss:Row>{0}</ss:Row>',b.join(''))},buildCell:function(a,b,c){if(a!=null&&b=='DateTime'&&Ext.isFunction(a.format)){a=a.format(this.dateFormatString)}return new velocityGrid.ux.exporter.excelFormatter.Cell({value:a,type:b,style:c})},typeMappings:{'int':'Number','string':'String','float':'Number','date':'DateTime'}},1,0,0,0,0,0,[velocityGrid.ux.exporter.excelFormatter,'Worksheet'],0);Ext.cmd.derive('tasksByStages.model.IssueModel',Ext.data.Model,{fields:[{name:'accountable',mapping:function(a){return a.a}},{name:'accountableId',ccReidFilterType:'stringSet',mapping:function(a){return a.ai}},{name:'accountableWorkerType',mapping:function(a){return a.awt}},{name:'issueDueDate',type:'date',ccReidFilterType:'dateRange',mapping:function(a){return a.d}},{name:'id',mapping:function(a){return a.i}},{name:'kind',ccReidFilterType:'stringSet',mapping:function(a){return a.ik}},{name:'type',mapping:function(a){return a.it}},{name:'typeId',mapping:function(a){return a.iti}},{name:'subjectTypeId',mapping:function(a){return a.sti}},{name:'subjectType',ccReidFilterType:'stringSet',mapping:function(a){return a.stn}},{name:'progress',ccReidFilterType:'stringSet',mapping:function(a){return ccReidComponents.utils.Data.camelize(a.p)}},{name:'responsible',mapping:function(a){return a.r}},{name:'responsibleId',ccReidFilterType:'stringSet',mapping:function(a){return a.ri}},{name:'responsibleWorkerType',mapping:function(a){return a.rwt}},{name:'title',mapping:function(a){return a.t}},{name:'status',mapping:function(a){return a.st}},{name:'stages',mapping:function(a){return a.s}},{name:'areas',mapping:function(a){return a.ar}},{name:'areasFlatten',ccReidFilterType:'stringSet',mapping:function(a){return ccReidComponents.utils.Data.flattenAreas(a.ar,'Project')}},{name:'groupingKey',ccReidFilterType:'stringSet',mapping:function(a){return a.gk}},{name:'discipline',mapping:function(a){return a.de}},{name:'stageTypeId',ccReidFilterType:'stringSet',mapping:function(a){return a.ti}},{name:'subKind',mapping:function(a){return a.sk}},{name:'description',mapping:function(a){return a.des}},{name:'richDescription',mapping:function(a){return a.rdes}},{name:'constructId',mapping:function(a){return a.ci}},{name:'spotId',mapping:function(a){return a.si}},{name:'assetId',mapping:function(a){return a.asi}},{name:'stageId',mapping:function(a){return a.stai}},{name:'stageDate',type:'date',mapping:function(a){return a.sd}},{name:'buffer',mapping:function(a){return a.buf}},{name:'decision',mapping:function(a){return a.dec}},{name:'irrelevant',mapping:function(a){return a.ir}}]},0,0,0,0,0,[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[tasksByStages.model,'IssueModel'],0);Ext.cmd.derive('tasksByStages.store.CrudManager',Ext.Base,{externalConfig:null,setExternalConfig:function(b){var a=this;a.externalConfig={};a.externalConfig.client=b.client;a.externalConfig.projectId=b.projectId},makeRequest:function(a,d){var c=this;var d=d||!1;if(!c.externalConfig){throw 'You need to setExternalConfig first!'}a.projectId=a.projectId||c.externalConfig.projectId;a.offset=a.offset||0;a.pageSize=a.pageSize||100;var b=new Ext.Deferred();if(!d){c.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(c){b.resolve(c)},function(c){b.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(a)}))}else {c.externalConfig.client.apexrest('/CC_REID/RemoteAction',function(c){b.resolve(c)},function(c){b.reject(c)},'POST',JSON.stringify({'requestJSON':JSON.stringify(a)}))}return b.promise},getIssues:function(){var b=this;var a={className:'KanbanManagementRequest',actionName:'getIssues'};return b.makeRequest(a)}},0,0,0,0,0,0,[tasksByStages.store,'CrudManager'],0);Ext.cmd.derive('tasksByStages.store.Store',Ext.data.Store,{pageSize:100},0,0,0,0,0,0,[tasksByStages.store,'Store'],0);Ext.cmd.derive('tasksByStages.view.Grid',Ext.grid.Panel,{cls:'tasksByStagesGrid extjsWizardWrapper',required:['tasksByStages.store.CrudManager','tasksByStages.view.GridController','ccReidComponents.container.pagingtoolbar.Paging','Ext.rtl.*'],bodyCls:'tasksByStagesGridBody',controller:'tasksByStagesGridController',scrollable:'vertical',reference:'tasksByStagesGrid',selModel:{selType:'checkboxmodel',mode:'SINGLE',allowDeselect:!0,checkOnly:!0},viewConfig:{getRowClass:function(a,c,b,d){return a.get('irrelevant')?'irrelevantIssueRow':''}},initComponent:function(){var a=this;Ext.apply(a,{emptyText:'<span>'+a.L('NoValuesToFilter')+'</span>',bbar:{xtype:'ccreid_pagingtoolbar'}});Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){a.getInitialConfig('maskParent')(!0);a.getController().buildStore().then(function(b){var d=a.getController().buildColumns(b.getProxy().proxyStore.getProxy().originalResponse.headersMap);a.reconfigure(b,d);var c=a.down('ccreid_pagingtoolbar');b.pagingtoolbar=c;if(a.rtl){c.queryBy(function(c){return c.xtype=='button'}).forEach(function(c){c.addCls('rotatePaginationButtonInRtl')})}c.bindStore(b);a.getInitialConfig('maskParent')(!1)})},viewready:function(a){var b=a.getView();a.tip=Ext.create('Ext.tip.ToolTip',{target:b.el,delegate:b.cellSelector,trackMouse:!0,renderTo:Ext.getBody(),listeners:{beforeshow:function updateTipBody(f){var h=f.triggerElement,i=f.triggerElement.parentElement,g=b.getHeaderByCell(h).text,e=b.getHeaderByCell(h).dataIndex;var c=b.getRecord(i)?b.getRecord(i).get(e):null;if(c){var d='';if(Ext.isObject(c)&&!Ext.Object.isEmpty(c)&&e=='stages'){if(Object.keys(c).length>1){d=a.L('AssignTo')+' '+Object.keys(c).length+' '+a.L('Stages')}else {d=Object.keys(c)[0]=='project'?a.L('project'):c[Object.keys(c)[0]]}}else {if(Ext.isObject(c)&&!Ext.Object.isEmpty(c)&&e=='areas'){Object.keys(c).forEach(function(b){if(!Ext.Object.isEmpty(c[b])){Object.keys(c[b]).filter(function(d){return !Ext.isEmpty(c[b][d])}).forEach(function(e,h,i){var g=c[b][e][b]==null?c[b][e]:c[b][e][b];if(b=='Spot'&&c[b][e]['constructName']!=null){d+=a.L('Construct')+': <u>'+c[b][e]['constructName']+'</u><br>';d+=a.L(b)+': <u>'+g+'</u>'}else {if(b=='Asset'&&c[b][e]['constructName']!=null&&c[b][e]['spotName']!=null){d+=a.L('Construct')+': <u>'+c[b][e]['constructName']+'</u><br>';d+=a.L('Spot')+': <u>'+c[b][e]['spotName']+'</u><br>';d+=a.L(b)+': <u>'+g+'</u>'}else {d+=a.L(b)+': <u>'+g+'</u>'}}d+=h<i.length?'<br>':''})}});if(Ext.isEmpty(d)){d=a.L('Project')}}else {if(Ext.isObject(c)&&!Ext.Object.isEmpty(c)&&(e=='subjectType'||e=='kind')){Ext.Object.eachValue(c,function(b){d+=b+' '})}else {d=c.toString()}}}if(e=='accountable'||e=='responsible'||e=='title'||e=='progress'){g=a.L(Ext.String.capitalize(e))}if(e=='issueDueDate'){d=Ext.Date.format(new Date(d),'d/m/Y')}if(e=='progress'){d=a.L(d)}f.update('<div '+(a.rtl?'style="direction:rtl;"':'')+'><b><u>'+g+':</u></b><br>'+d+'</div>')}else {return !1}}}})},cellclick:function(c,j,g,b,k,h,d,i){if(d.target.tagName=='A'){var a=c.up();var f=Ext.create('ccReidComponents.noneGeneric.window.IssueEditorWindow',{projectId:a.getInitialConfig('projectId'),record:b});f.show()}else {if(d.target.tagName=='I'){var a=c.up();var e=client.instanceUrl+'/apex/EditIssueView?issueId='+b.id+'&activeUser='+ccReidComponents.utils.Data.getValueByKey('activeUserId')+'&projectId='+a.getInitialConfig('projectId')+'#/gantt';window.open(e)}}}},constructor:function(b){var a=this;a.crudManager=Ext.create('tasksByStages.store.CrudManager');a.crudManager.setExternalConfig({projectId:b.projectId,client:b.clientInstance});a.currentLocale=b.locale;a.currentLocale=a.currentLocale.charAt(0).toUpperCase()+a.currentLocale.slice(1,2);a.currentLocale=a.currentLocale=='Iw'?'He':a.currentLocale;a.rtl=a.currentLocale=='He';ccReidComponents.locale[a.currentLocale].apply();Ext.grid.Panel.prototype.constructor.apply(this,arguments)}},1,['tasksByStagesGrid'],['component','box','container','panel','tablepanel','gridpanel','grid','tasksByStagesGrid'],{'component':!0,'box':!0,'container':!0,'panel':!0,'tablepanel':!0,'gridpanel':!0,'grid':!0,'tasksByStagesGrid':!0},['widget.tasksByStagesGrid'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[tasksByStages.view,'Grid'],0);Ext.cmd.derive('tasksByStages.view.GridController',Ext.app.ViewController,{control:{'[reference=downloadCSV]':{click:'downloadCSV'},'[reference=print]':{click:'print'}},downloadCSV:function(){Ext.Msg.alert('Info','downloadCSV clicked')},print:function(){Ext.Msg.alert('Info','print clicked')},buildStore:function(){var a=this;var b=new Ext.Deferred();var d=Ext.create('Ext.data.Store',{storeId:a.getView().getInitialConfig()['storeId'],model:'tasksByStages.model.IssueModel',proxy:{type:'salesforce',configuration:{read:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'getIssues',projectId:a.getView().getInitialConfig('projectId')},dataKey:'Issues'},create:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'createNewIssue',projectId:a.getView().getInitialConfig('projectId')},dataKey:'issuesDetails'},update:{type:'apexrest',request:{className:'KanbanManagementRequest',actionName:'updateIssues',projectId:a.getView().getInitialConfig('projectId')},dataKey:'issuesDetails'}},listeners:{failedToCreate:function(a,b){},successToCreate:function(f,g,d,e){var c=Ext.StoreManager.get('tasksByStagesViewStore');c.loadPage(c.currentPage);var b=Ext.ComponentQuery.query('tasksByStagesGrid')[0].initialConfig['parentObject'];b.fireEvent(b.getId()+':itemAdded');setTimeout(function(){var b=e.getById(d[0]);var c=Ext.create('ccReidComponents.noneGeneric.window.IssueEditorWindow',{projectId:a.getView().getInitialConfig('projectId'),record:b});c.show()})},successToUpdate:function(b,d,c){var a=Ext.StoreManager.get('tasksByStagesViewStore');a.loadPage(a.currentPage)}}},listeners:{add:function(a,c,d){var b=this;b.getProxy().create(a)},update:function(b,d,a){var c=this;c.getProxy().update(b,a)}},autoLoad:!0}).on('load',function(){ccReidComponents.utils.Data.setKeyValue('activeUserId',this.getProxy().originalResponse.userId)});var c=Ext.create('Ext.data.Store',{autoLoad:!0,storeId:a.getView().getInitialConfig()['viewStoreId'],model:'tasksByStages.model.IssueModel',pageSize:30,proxy:{type:'viewproxy',dataSource:a.getView().getInitialConfig()['storeId'],enablePaging:!0}}).on('load',function(a){b.resolve(a)});return b.promise},buildColumns:function(b){var a=this;var d=a.getView();var c=[{header:b['title'],columns:[{tdCls:'vericalAlignTd',height:0,width:45,dataIndex:'progress',renderer:function(a,c){return '<div class="progressBox '+a+'"></div>'}},{dataIndex:'title',width:200,height:0,tdCls:'vericalAlignTd '+(a.getView().rtl?'leftBorder':'rightBorder'),renderer:function(a,c,d){if(a){return '<a class="linkColumn" href="javascript;" onclick="event.preventDefault()">'+a+'</a><i class="fa fa-plus-square-o" style="padding: 0px 10px 0px 10px;cursor: pointer;" href="javascript;" onclick="event.preventDefault()"></i>'}else {return ''}}}]},{header:b['areas'],dataIndex:'areas',renderer:a.areasRenderer,flex:2},{header:b['stages'],dataIndex:'stages',renderer:a.stagesRenderer,flex:2},{header:b['subjectType'],dataIndex:'subjectType',flex:1,renderer:function(a){return Object.values(a)[0]}},{header:b['kind'],dataIndex:'kind',flex:1,renderer:function(a){return Object.values(a)[0]}},{header:b['accountable'],columns:[{dataIndex:'accountable',height:0,width:170,tdCls:'vericalAlignTd'},{xtype:'widgetcolumn',width:50,height:0,tdCls:'vericalAlignTd '+(a.getView().rtl?'leftBorder':'rightBorder'),widget:{cls:'reminderRoundButton',scale:'small',tooltip:a.L('sendReminder'),xtype:'button',iconCls:'fa fa-list-alt reminderIconColor',handler:function(a){alert(a.accountableId+'  '+a.issueId)}},onWidgetAttach:function(d,a,c){a.accountableId=c.get('accountableId');a.issueId=c.id}}]},{header:b['responsible'],columns:[{dataIndex:'responsible',height:0,width:170,tdCls:'vericalAlignTd'},{xtype:'widgetcolumn',width:50,height:0,tdCls:'vericalAlignTd '+(a.getView().rtl?'leftBorder':'rightBorder'),widget:{cls:'reminderRoundButton',scale:'small',tooltip:a.L('sendReminder'),xtype:'button',iconCls:'fa fa-list-alt reminderIconColor',handler:function(a){alert(a.responsibleId+'  '+a.issueId)}},onWidgetAttach:function(d,a,c){a.responsibleId=c.get('responsibleId');a.issueId=c.id}}]},{header:b['dueDateFinish'],dataIndex:'issueDueDate',xtype:'datecolumn',align:'center',format:'d/m/Y',flex:2}];c.forEach(function(c){Object.assign(c,{menuDisabled:!0,resizable:!1,draggable:!1,tdCls:'vericalAlignTd '+(a.getView().rtl?'leftBorder':'rightBorder')})});return c},stagesRenderer:function(b){var a=Object.keys(b);if(a.length==0){return ''}else {if(a.length==1){if(a[0]=='project'){return this.L('project')}else {return b[a[0]]}}else {return '<div style="text-align: center;">. . .</div>'}}},areasRenderer:function(a){var d=this;var c=!0;var b='';Object.keys(a).forEach(function(d){if(!Ext.Object.isEmpty(a[d])){c=!1;Object.keys(a[d]).forEach(function(c){if(Ext.isEmpty(b)){var e=a[d][c][d]==null?a[d][c]:a[d][c][d];b='<div style="text-align: center;">'+e+'</div>'}else {b='<div style="text-align: center;">. . .</div>'}})}});if(c){return '<div style="text-align: center;">'+d.L('Project')+'</div>'}else {return b}}},0,0,0,0,['controller.tasksByStagesGridController'],[[ccReidComponents.mixin.Localizable.prototype.mixinId||ccReidComponents.mixin.Localizable.$className,ccReidComponents.mixin.Localizable]],[tasksByStages.view,'GridController'],0);Ext.cmd.derive('issuesProgress.store.CrudManager',Ext.Base,{externalConfig:null,setExternalConfig:function(a){var b=this;b.externalConfig=a},makeRequest:function(c){var b=this;if(!b.externalConfig){throw 'You need to setExternalConfig first!'}var a=new Ext.Deferred();b.externalConfig.client.apexRemoteAction('/CC_REID/RemoteAction',function(b){a.resolve(b)},function(b){a.reject(b)},'POST',JSON.stringify({'requestJSON':JSON.stringify(c)}));return a.promise},getIssuesDataTable:function(d,f,c,a,b,j,h,e,i){var k=this;var g={className:'IssuesProgressViewRequest',actionName:'getIssuesProgressDataRows',projectId:d,statuses:f,significant:c,accountableId:a,responsibleId:b,level:j,subKind:h,fromDateTime:e,toDateTime:i};return k.makeRequest(g)},getFilters:function(a){var c=this;var b={className:'IssuesProgressViewRequest',actionName:'getFilters',projectId:a};return c.makeRequest(b)},setDates:function(f,a,b,d,c){var g=this;var e={className:'IssuesProgressViewRequest',actionName:'setDates',stageId:f,expectedStartDate:a,expectedEndDate:b,startedDate:d,completedDate:c};return g.makeRequest(e)},getDates:function(b,d,e,g,f){var c=this;var a={className:'IssuesProgressViewRequest',actionName:'getDates',stageId:b};return c.makeRequest(a)}},0,0,0,0,0,0,[issuesProgress.store,'CrudManager'],0);Ext.cmd.derive('CGA.utils.Data',Ext.Base,{singleton:!0,cloneModelSet:function(b,e,f){var d=[],a;var c=function(c){a=c.copy();a.data.WBSCode=c.getWBSCode();a.phantom=!1;a.originalRecord=c;if(e){if(e.call(f||b,a,c)===!1){return}}d.push(a)};if(b.each){b.each(c)}else {Ext.Array.each(b,c)}return d}},0,0,0,0,0,0,[CGA.utils,'Data'],0);(function(){var a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function utf8Encode(c){c=c.replace(/\r\n/g,'\n');var b='';for(var d=0;d<c.length;d++){var a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a)}else {if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else {b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}}return b}Ext.cmd.derive('CGA.ux.exporter.Base64',Ext.Base,{statics:{encode:function(b){var g='';var h,c,d,j,k,i,e;var f=0;b=utf8Encode(b);while(f<b.length){h=b.charCodeAt(f++);c=b.charCodeAt(f++);d=b.charCodeAt(f++);j=h>>2;k=(h&3)<<4|c>>4;i=(c&15)<<2|d>>6;e=d&63;if(isNaN(c)){i=e=64}else {if(isNaN(d)){e=64}}g=g+a.charAt(j)+a.charAt(k)+a.charAt(i)+a.charAt(e)}return g}}},0,0,0,0,0,0,[CGA.ux.exporter,'Base64'],0)})();Ext.cmd.derive('CGA.ux.exporter.Button',Ext.Component,{html:'<p></p>',config:{swfPath:'/flash/downloadify.swf',downloadImage:'/images/ext_reports/download.png',width:62,height:22,downloadName:'download'},constructor:function(b){b=b||{};CGA.ux.exporter.Button.superclass.constructor.call(this,b);var a=this;this.on('afterrender',function(){a.setComponent(a.store||a.component||a.up('gridpanel')||a.up('treepanel'),b)})},setComponent:function(a,b){this.component=a;this.store=!a.is?a:a.getStore();this.setDownloadify(b)},setDownloadify:function(a){}},1,['exporterbutton'],['component','box','exporterbutton'],{'component':!0,'box':!0,'exporterbutton':!0},['widget.exporterbutton'],0,[CGA.ux.exporter,'Button'],0);Ext.cmd.derive('CGA.ux.exporter.Exporter',Ext.Base,{statics:{exportAny:function(b,c,d){var a='export';if(!b.is){a=a+'Store'}else {if(b.is('gridpanel')){a=a+'Grid'}else {if(b.is('treepanel')){a=a+'Tree'}else {a=a+'Store';b=b.getStore()}}}return this[a](b,this.getFormatterByName(c),d)},exportGrid:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=Ext.Array.filter(c.columns,function(d){return !d.hidden});Ext.applyIf(a,{title:c.title,columns:d});return b.format(c.store,a)},exportStore:function(b,c,a){a=a||{};c=this.getFormatterByName(c);Ext.applyIf(a,{columns:b.fields?b.fields.items:b.model.prototype.fields.items});return c.format(b,a)},exportTree:function(c,b,a){a=a||{};b=this.getFormatterByName(b);var d=c.store||a.store;Ext.applyIf(a,{title:c.title});return b.format(d,a)},getFormatterByName:function(a){a=a?a:'excel';a=!Ext.isString(a)?a:Ext.create('CGA.ux.exporter.'+a+'Formatter.'+Ext.String.capitalize(a)+'Formatter');return a}}},0,0,0,0,0,0,[CGA.ux.exporter,'Exporter'],0);Ext.cmd.derive('CGA.ux.exporter.Formatter',Ext.Base,{format:Ext.emptyFn,constructor:function(a){a=a||{};Ext.applyIf(a,{})}},1,0,0,0,0,0,[CGA.ux.exporter,'Formatter'],0);Ext.cmd.derive('CGA.ux.exporter.csvFormatter.CsvFormatter',CGA.ux.exporter.Formatter,{contentType:'data:text/csv;base64,',separator:',',extension:'csv',format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);return this.getHeaders()+'\n'+this.getRows(a)},getHeaders:function(b){var a=[],c;Ext.each(this.columns,function(d){var c;if(d.text=='#'){c='ID'}else {if(d.text!=undefined){c=d.text}else {if(d.name){c=d.name.replace(/_/g,' ');c=Ext.String.capitalize(c)}}}a.push(c)},this);a.push(this.L('depth'));a.push(this.L('schedulingMode'));return a.join(this.separator)},getRows:function(b){var a=[];var c=this;b.getRoot().cascadeBy(function(d){if(d.id!='root'){a.push(c.getCell(d))}});return a.join('\n')},getCell:function(a){var b=[];Ext.each(this.columns,function(e){var c=e.name||e.dataIndex;if(c){var d='';if(c=='PercentDone'){d=a.get(c)!=NaN?parseFloat(a.get(c))/100:''}else {if(c!='Name'&&Ext.isFunction(e.renderer)){d=e.renderer(a.get(c),{},a,null,null,null,{rootVisible:!1})}else {d=a.get(c)}}if(!d){d=''}b.push('"'+String(d).replace('"/g','\\"')+'"')}});b.push(a.get('depth'));b.push(a.get('ManuallyScheduled')==!0?this.L('manuallyScheduled'):this.L('autoScheduled'));return b.join(this.separator)}},0,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.ux.exporter.csvFormatter,'CsvFormatter'],0);Ext.cmd.derive('CGA.ux.exporter.excelFormatter.Cell',Ext.Base,{constructor:function(a){Ext.applyIf(a,{type:'String'});Ext.apply(this,a);CGA.ux.exporter.excelFormatter.Cell.superclass.constructor.apply(this,arguments)},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<ss:Cell ss:StyleID="{style}">','<ss:Data ss:Type="{type}"><![CDATA[{value}]]></ss:Data>','</ss:Cell>')},1,0,0,0,0,0,[CGA.ux.exporter.excelFormatter,'Cell'],0);Ext.cmd.derive('CGA.ux.exporter.excelFormatter.ExcelFormatter',CGA.ux.exporter.Formatter,{contentType:'data:application/vnd.ms-excel;base64,',extension:'xls',format:function(c,b){var a=new CGA.ux.exporter.excelFormatter.Workbook(b);a.addWorksheet(c,b||{});return a.render()}},0,0,0,0,0,0,[CGA.ux.exporter.excelFormatter,'ExcelFormatter'],0);Ext.cmd.derive('CGA.ux.exporter.excelFormatter.Style',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{parentStyle:'',attributes:[]});CGA.ux.exporter.excelFormatter.Style.superclass.constructor.apply(this,arguments);if(this.id==undefined){throw new Error('An ID must be provided to Style')}this.preparePropertyStrings()},preparePropertyStrings:function(){Ext.each(this.attributes,function(b,a){this.attributes[a].propertiesString=this.buildPropertyString(b);this.attributes[a].children=b.children||[];Ext.each(b.children,function(d,c){this.attributes[a].children[c].propertiesString=this.buildPropertyString(d)},this)},this)},buildPropertyString:function(b){var a='';Ext.each(b.properties||[],function(c){a+=Ext.String.format('ss:{0}="{1}" ',c.name,c.value)},this);return a},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<tpl if="parentStyle.length == 0">','<ss:Style ss:ID="{id}">','</tpl>','<tpl if="parentStyle.length != 0">','<ss:Style ss:ID="{id}" ss:Parent="{parentStyle}">','</tpl>','<tpl for="attributes">','<tpl if="children.length == 0">','<ss:{name} {propertiesString} />','</tpl>','<tpl if="children.length > 0">','<ss:{name} {propertiesString}>','<tpl for="children">','<ss:{name} {propertiesString} />','</tpl>','</ss:{name}>','</tpl>','</tpl>','</ss:Style>')},1,0,0,0,0,0,[CGA.ux.exporter.excelFormatter,'Style'],0);Ext.cmd.derive('CGA.ux.exporter.excelFormatter.Workbook',Ext.Base,{constructor:function(a){a=a||{};Ext.apply(this,a,{title:'Workbook',worksheets:[],compiledWorksheets:[],cellBorderColor:'#e4e4e4',styles:[],compiledStyles:[],hasDefaultStyle:!0,hasStripeStyles:!0,windowHeight:9000,windowWidth:50000,protectStructure:!1,protectWindows:!1});if(this.hasDefaultStyle){this.addDefaultStyle()}if(this.hasStripeStyles){this.addStripedStyles()}this.addTitleStyle();this.addHeaderStyle()},render:function(){this.compileStyles();this.joinedCompiledStyles=this.compiledStyles.join('');this.compileWorksheets();this.joinedWorksheets=this.compiledWorksheets.join('');return this.tpl.apply(this)},addWorksheet:function(c,b){var a=new CGA.ux.exporter.excelFormatter.Worksheet(c,b);this.worksheets.push(a);return a},addStyle:function(b){var a=new CGA.ux.exporter.excelFormatter.Style(b||{});this.styles.push(a);return a},compileStyles:function(){this.compiledStyles=[];Ext.each(this.styles,function(a){this.compiledStyles.push(a.render())},this);return this.compiledStyles},compileWorksheets:function(){this.compiledWorksheets=[];Ext.each(this.worksheets,function(a){this.compiledWorksheets.push(a.render())},this);return this.compiledWorksheets},tpl:new Ext.XTemplate('<?xml version="1.0" encoding="utf-8"?>','<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:o="urn:schemas-microsoft-com:office:office">','<o:DocumentProperties>','<o:Title>{title}</o:Title>','</o:DocumentProperties>','<ss:ExcelWorkbook>','<ss:WindowHeight>{windowHeight}</ss:WindowHeight>','<ss:WindowWidth>{windowWidth}</ss:WindowWidth>','<ss:ProtectStructure>{protectStructure}</ss:ProtectStructure>','<ss:ProtectWindows>{protectWindows}</ss:ProtectWindows>','</ss:ExcelWorkbook>','<ss:Styles>','{joinedCompiledStyles}','</ss:Styles>','{joinedWorksheets}','</ss:Workbook>'),addDefaultStyle:function(){var a=[{name:'Color',value:this.cellBorderColor},{name:'Weight',value:'1'},{name:'LineStyle',value:'Continuous'}];this.addStyle({id:'Default',attributes:[{name:'Alignment',properties:[{name:'Vertical',value:'Top'},{name:'WrapText',value:'1'}]},{name:'Font',properties:[{name:'FontName',value:'arial'},{name:'Size',value:'10'}]},{name:'Interior'},{name:'NumberFormat'},{name:'Protection'},{name:'Borders',children:[{name:'Border',properties:[{name:'Position',value:'Top'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Bottom'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Left'}].concat(a)},{name:'Border',properties:[{name:'Position',value:'Right'}].concat(a)}]}]})},addTitleStyle:function(){this.addStyle({id:'title',attributes:[{name:'Borders'},{name:'Font'},{name:'NumberFormat',properties:[{name:'Format',value:'@'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'},{name:'Vertical',value:'Center'}]}]})},addHeaderStyle:function(){this.addStyle({id:'headercell',attributes:[{name:'Font',properties:[{name:'Bold',value:'1'},{name:'Size',value:'10'}]},{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#A3C9F1'}]},{name:'Alignment',properties:[{name:'WrapText',value:'1'},{name:'Horizontal',value:'Center'}]}]})},addStripedStyles:function(){this.addStyle({id:'even',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCFFFF'}]}]});this.addStyle({id:'odd',attributes:[{name:'Interior',properties:[{name:'Pattern',value:'Solid'},{name:'Color',value:'#CCCCFF'}]}]});Ext.each(['even','odd'],function(a){this.addChildNumberFormatStyle(a,a+'date','[ENG][$-409]dd-mmm-yyyy;@');this.addChildNumberFormatStyle(a,a+'int','0');this.addChildNumberFormatStyle(a,a+'float','0.00')},this)},addChildNumberFormatStyle:function(c,b,a){this.addStyle({id:b,parentStyle:'even',attributes:[{name:'NumberFormat',properties:[{name:'Format',value:a}]}]})}},1,0,0,0,0,0,[CGA.ux.exporter.excelFormatter,'Workbook'],0);Ext.cmd.derive('CGA.ux.exporter.excelFormatter.Worksheet',Ext.Base,{constructor:function(b,a){a=a||{};this.store=b;Ext.applyIf(a,{hasTitle:!0,hasHeadings:!0,stripeRows:!0,title:'Workbook',columns:b.fields==undefined?{}:b.fields.items});Ext.apply(this,a);CGA.ux.exporter.excelFormatter.Worksheet.superclass.constructor.apply(this,arguments)},dateFormatString:'Y-m-d',worksheetTpl:new Ext.XTemplate('<ss:Worksheet ss:Name="{title}">','<ss:Names>','<ss:NamedRange ss:Name="Print_Titles" ss:RefersTo="=\'{title}\'!R1:R2" />','</ss:Names>','<ss:Table x:FullRows="1" x:FullColumns="1" ss:ExpandedColumnCount="{colCount}" ss:ExpandedRowCount="{rowCount}">','{columns}','<ss:Row ss:Height="38">','<ss:Cell ss:StyleID="title" ss:MergeAcross="{colCount - 1}">','<ss:Data xmlns:html="http://www.w3.org/TR/REC-html40" ss:Type="String">','<html:B><html:U><html:Font html:Size="15">{title}','</html:Font></html:U></html:B></ss:Data><ss:NamedCell ss:Name="Print_Titles" />','</ss:Cell>','</ss:Row>','<ss:Row ss:AutoFitHeight="1">','{header}','</ss:Row>','{rows}','</ss:Table>','<x:WorksheetOptions>','<x:PageSetup>','<x:Layout x:CenterHorizontal="1" x:Orientation="Landscape" />','<x:Footer x:Data="Page &amp;P of &amp;N" x:Margin="0.5" />','<x:PageMargins x:Top="0.5" x:Right="0.5" x:Left="0.5" x:Bottom="0.8" />','</x:PageSetup>','<x:FitToPage />','<x:Print>','<x:PrintErrors>Blank</x:PrintErrors>','<x:FitWidth>1</x:FitWidth>','<x:FitHeight>32767</x:FitHeight>','<x:ValidPrinterInfo />','<x:VerticalResolution>600</x:VerticalResolution>','</x:Print>','<x:Selected />','<x:DoNotDisplayGridlines />','<x:ProtectObjects>False</x:ProtectObjects>','<x:ProtectScenarios>False</x:ProtectScenarios>','</x:WorksheetOptions>','</ss:Worksheet>'),render:function(a){return this.worksheetTpl.apply({header:this.buildHeader(),columns:this.buildColumns().join(''),rows:this.buildRows().join(''),colCount:this.columns.length,rowCount:this.store.getCount()+2,title:this.title})},buildColumns:function(){var a=[];Ext.each(this.columns,function(b){a.push(this.buildColumn())},this);return a},buildColumn:function(a){return Ext.String.format('<ss:Column ss:AutoFitWidth="1" ss:Width="{0}" />',a||164)},buildRows:function(){var a=[];this.store.each(function(b,c){a.push(this.buildRow(b,c))},this);return a},buildHeader:function(){var a=[];Ext.each(this.columns,function(c){var b;if(c.text!=undefined){b=c.text}else {if(c.name){b=c.name.replace(/_/g,' ');b=Ext.String.capitalize(b)}}a.push(Ext.String.format('<ss:Cell ss:StyleID="headercell"><ss:Data ss:Type="String">{0}</ss:Data><ss:NamedCell ss:Name="Print_Titles" /></ss:Cell>',b))},this);return a.join('')},buildRow:function(a,d){var c,b=[];if(this.stripeRows===!0){c=d%2==0?'even':'odd'}Ext.each(this.columns,function(e){var f=e.name||e.dataIndex;if(f){if(Ext.isFunction(e.renderer)){var g=e.renderer(a.get(f),null,a),h='String'}else {var g=a.get(f),h=this.typeMappings[e.type||a.fields.get(f).type.type]}b.push(this.buildCell(g,h,c).render())}},this);return Ext.String.format('<ss:Row>{0}</ss:Row>',b.join(''))},buildCell:function(a,b,c){if(a!=null&&b=='DateTime'&&Ext.isFunction(a.format)){a=a.format(this.dateFormatString)}return new CGA.ux.exporter.excelFormatter.Cell({value:a,type:b,style:c})},typeMappings:{'int':'Number','string':'String','float':'Number','date':'DateTime'}},1,0,0,0,0,0,[CGA.ux.exporter.excelFormatter,'Worksheet'],0);Ext.cmd.derive('CGA.ux.exporter.msProjectFormatter.MsProjectFormatter',CGA.ux.exporter.Formatter,{contentType:'data:text/csv;base64,',separator:',',extension:'csv',format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);return this.getHeaders()+'\n'+this.getRows(a)},getHeaders:function(b){var a=[],c;Ext.each(this.columns,function(c){a.push(c.msProjectPrintType=='WBS'?c.msProjectPrintType:this.L(c.dataIndex))},this);a.push(this.L('OutlineLevel'));a.push(this.L('TaskMode'));a.push(this.L('Summary'));return a.join(this.separator)},getRows:function(b){var a=[];var c=this;b.getRoot().cascadeBy(function(d){if(d.id!='root'){a.push(c.getCell(d))}});return a.join('\n')},getCell:function(a){var b=this;var c=[];Ext.each(this.columns,function(f){var e=f.dataIndex;if(e||f.msProjectPrintType=='WBS'){var d='';if(f.msProjectPrintType=='WBS'){d=a.getWBSCode()}else {if(e=='PercentDone'){d=a.get(e)!=NaN?parseFloat(a.get(e))/100:0;d=Ext.util.Format.round(d,0)}else {if(e=='ConstraintType'){d=a.get(e)?b.L(a.get(e)):b.L('assoonaspossible')}else {if(f.msProjectPrintType=='Date'){d=Ext.Date.format(a.get(e),b.L('dateFormat').split(' ')[0]);if(!d&&e=='ConstraintDate'){d='12:00:00 AM'}}else {if(f.msProjectPrintType=='DateTime'){d=Ext.Date.format(a.get(e),b.L('dateFormat'));if(!d){d=b.L('NA')}}else {if(e!='Name'&&Ext.isFunction(f.renderer)){d=f.renderer(a.get(e),{},a,null,null,null,{rootVisible:!1});if(e=='Predecessor'){d=d.replace(/;/g,', ');d=d.replace(/SS/g,b.L('SS'));d=d.replace(/SE/g,b.L('SE'));d=d.replace(/EE/g,b.L('EE'));d=d.replace(/ES/g,b.L('ES'))}}else {d=a.get(e)}}}}}}if(!d){d=''}c.push('"'+String(d).replace('"/g','\\"')+'"')}});c.push(a.get('depth'));c.push(a.get('ManuallyScheduled')==!0?this.L('manuallyScheduled'):this.L('autoScheduled'));c.push(a.get('leaf')==!0?this.L('No'):this.L('Yes'));return c.join(this.separator)}},0,0,0,0,0,[[Gnt.mixin.Localizable.prototype.mixinId||Gnt.mixin.Localizable.$className,Gnt.mixin.Localizable]],[CGA.ux.exporter.msProjectFormatter,'MsProjectFormatter'],0);Ext.cmd.derive('CGA.widget.editMenuItem',Ext.container.Container,{overCls:'containerEditOver',cls:'containerCls',initComponent:function(){var a=this;a.label=a.config.label;a.name=a.config.name;a.value=a.config.value;Ext.apply(a,{items:[{xtype:'button',tooltip:a.label,text:a.label,baselineId:a.value,baselineLabel:a.label,baselineName:a.name,reference:'changeSelectedBaseline',itemId:'baselineCheckItem',cls:'showBaselineButton'},{xtype:'button',iconCls:'fa fa-pencil',cls:'editButton',reference:'openEditBaselineWindow'}]});Ext.container.Container.prototype.initComponent.apply(this,arguments)}},0,['editMenuItem'],['component','box','container','editMenuItem'],{'component':!0,'box':!0,'container':!0,'editMenuItem':!0},['widget.editMenuItem'],0,[CGA.widget,'editMenuItem'],0);